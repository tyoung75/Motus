(function(){const p=document.createElement("link").relList;if(p&&p.supports&&p.supports("modulepreload"))return;for(const N of document.querySelectorAll('link[rel="modulepreload"]'))v(N);new MutationObserver(N=>{for(const w of N)if(w.type==="childList")for(const I of w.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&v(I)}).observe(document,{childList:!0,subtree:!0});function x(N){const w={};return N.integrity&&(w.integrity=N.integrity),N.referrerPolicy&&(w.referrerPolicy=N.referrerPolicy),N.crossOrigin==="use-credentials"?w.credentials="include":N.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function v(N){if(N.ep)return;N.ep=!0;const w=x(N);fetch(N.href,w)}})();var Ul=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i0(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var mc={exports:{}},ka={},pc={exports:{}},ct={};var Sd;function x1(){if(Sd)return ct;Sd=1;var f=Symbol.for("react.element"),p=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),I=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),j=Symbol.iterator;function se(D){return D===null||typeof D!="object"?null:(D=j&&D[j]||D["@@iterator"],typeof D=="function"?D:null)}var re={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ee=Object.assign,ie={};function ae(D,W,ke){this.props=D,this.context=W,this.refs=ie,this.updater=ke||re}ae.prototype.isReactComponent={},ae.prototype.setState=function(D,W){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,W,"setState")},ae.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function ue(){}ue.prototype=ae.prototype;function ce(D,W,ke){this.props=D,this.context=W,this.refs=ie,this.updater=ke||re}var oe=ce.prototype=new ue;oe.constructor=ce,ee(oe,ae.prototype),oe.isPureReactComponent=!0;var xe=Array.isArray,Ee=Object.prototype.hasOwnProperty,he={current:null},G={key:!0,ref:!0,__self:!0,__source:!0};function pe(D,W,ke){var _e,ye={},fe=null,Pe=null;if(W!=null)for(_e in W.ref!==void 0&&(Pe=W.ref),W.key!==void 0&&(fe=""+W.key),W)Ee.call(W,_e)&&!G.hasOwnProperty(_e)&&(ye[_e]=W[_e]);var je=arguments.length-2;if(je===1)ye.children=ke;else if(1<je){for(var Me=Array(je),Be=0;Be<je;Be++)Me[Be]=arguments[Be+2];ye.children=Me}if(D&&D.defaultProps)for(_e in je=D.defaultProps,je)ye[_e]===void 0&&(ye[_e]=je[_e]);return{$$typeof:f,type:D,key:fe,ref:Pe,props:ye,_owner:he.current}}function de(D,W){return{$$typeof:f,type:D.type,key:W,ref:D.ref,props:D.props,_owner:D._owner}}function nt(D){return typeof D=="object"&&D!==null&&D.$$typeof===f}function Xe(D){var W={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(ke){return W[ke]})}var ne=/\/+/g;function K(D,W){return typeof D=="object"&&D!==null&&D.key!=null?Xe(""+D.key):W.toString(36)}function Se(D,W,ke,_e,ye){var fe=typeof D;(fe==="undefined"||fe==="boolean")&&(D=null);var Pe=!1;if(D===null)Pe=!0;else switch(fe){case"string":case"number":Pe=!0;break;case"object":switch(D.$$typeof){case f:case p:Pe=!0}}if(Pe)return Pe=D,ye=ye(Pe),D=_e===""?"."+K(Pe,0):_e,xe(ye)?(ke="",D!=null&&(ke=D.replace(ne,"$&/")+"/"),Se(ye,W,ke,"",function(Be){return Be})):ye!=null&&(nt(ye)&&(ye=de(ye,ke+(!ye.key||Pe&&Pe.key===ye.key?"":(""+ye.key).replace(ne,"$&/")+"/")+D)),W.push(ye)),1;if(Pe=0,_e=_e===""?".":_e+":",xe(D))for(var je=0;je<D.length;je++){fe=D[je];var Me=_e+K(fe,je);Pe+=Se(fe,W,ke,Me,ye)}else if(Me=se(D),typeof Me=="function")for(D=Me.call(D),je=0;!(fe=D.next()).done;)fe=fe.value,Me=_e+K(fe,je++),Pe+=Se(fe,W,ke,Me,ye);else if(fe==="object")throw W=String(D),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Pe}function B(D,W,ke){if(D==null)return D;var _e=[],ye=0;return Se(D,_e,"","",function(fe){return W.call(ke,fe,ye++)}),_e}function me(D){if(D._status===-1){var W=D._result;W=W(),W.then(function(ke){(D._status===0||D._status===-1)&&(D._status=1,D._result=ke)},function(ke){(D._status===0||D._status===-1)&&(D._status=2,D._result=ke)}),D._status===-1&&(D._status=0,D._result=W)}if(D._status===1)return D._result.default;throw D._result}var q={current:null},le={transition:null},X={ReactCurrentDispatcher:q,ReactCurrentBatchConfig:le,ReactCurrentOwner:he};function z(){throw Error("act(...) is not supported in production builds of React.")}return ct.Children={map:B,forEach:function(D,W,ke){B(D,function(){W.apply(this,arguments)},ke)},count:function(D){var W=0;return B(D,function(){W++}),W},toArray:function(D){return B(D,function(W){return W})||[]},only:function(D){if(!nt(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},ct.Component=ae,ct.Fragment=x,ct.Profiler=N,ct.PureComponent=ce,ct.StrictMode=v,ct.Suspense=T,ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,ct.act=z,ct.cloneElement=function(D,W,ke){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var _e=ee({},D.props),ye=D.key,fe=D.ref,Pe=D._owner;if(W!=null){if(W.ref!==void 0&&(fe=W.ref,Pe=he.current),W.key!==void 0&&(ye=""+W.key),D.type&&D.type.defaultProps)var je=D.type.defaultProps;for(Me in W)Ee.call(W,Me)&&!G.hasOwnProperty(Me)&&(_e[Me]=W[Me]===void 0&&je!==void 0?je[Me]:W[Me])}var Me=arguments.length-2;if(Me===1)_e.children=ke;else if(1<Me){je=Array(Me);for(var Be=0;Be<Me;Be++)je[Be]=arguments[Be+2];_e.children=je}return{$$typeof:f,type:D.type,key:ye,ref:fe,props:_e,_owner:Pe}},ct.createContext=function(D){return D={$$typeof:I,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:w,_context:D},D.Consumer=D},ct.createElement=pe,ct.createFactory=function(D){var W=pe.bind(null,D);return W.type=D,W},ct.createRef=function(){return{current:null}},ct.forwardRef=function(D){return{$$typeof:M,render:D}},ct.isValidElement=nt,ct.lazy=function(D){return{$$typeof:P,_payload:{_status:-1,_result:D},_init:me}},ct.memo=function(D,W){return{$$typeof:A,type:D,compare:W===void 0?null:W}},ct.startTransition=function(D){var W=le.transition;le.transition={};try{D()}finally{le.transition=W}},ct.unstable_act=z,ct.useCallback=function(D,W){return q.current.useCallback(D,W)},ct.useContext=function(D){return q.current.useContext(D)},ct.useDebugValue=function(){},ct.useDeferredValue=function(D){return q.current.useDeferredValue(D)},ct.useEffect=function(D,W){return q.current.useEffect(D,W)},ct.useId=function(){return q.current.useId()},ct.useImperativeHandle=function(D,W,ke){return q.current.useImperativeHandle(D,W,ke)},ct.useInsertionEffect=function(D,W){return q.current.useInsertionEffect(D,W)},ct.useLayoutEffect=function(D,W){return q.current.useLayoutEffect(D,W)},ct.useMemo=function(D,W){return q.current.useMemo(D,W)},ct.useReducer=function(D,W,ke){return q.current.useReducer(D,W,ke)},ct.useRef=function(D){return q.current.useRef(D)},ct.useState=function(D){return q.current.useState(D)},ct.useSyncExternalStore=function(D,W,ke){return q.current.useSyncExternalStore(D,W,ke)},ct.useTransition=function(){return q.current.useTransition()},ct.version="18.3.1",ct}var kd;function kc(){return kd||(kd=1,pc.exports=x1()),pc.exports}var Id;function g1(){if(Id)return ka;Id=1;var f=kc(),p=Symbol.for("react.element"),x=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,N=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function I(M,T,A){var P,j={},se=null,re=null;A!==void 0&&(se=""+A),T.key!==void 0&&(se=""+T.key),T.ref!==void 0&&(re=T.ref);for(P in T)v.call(T,P)&&!w.hasOwnProperty(P)&&(j[P]=T[P]);if(M&&M.defaultProps)for(P in T=M.defaultProps,T)j[P]===void 0&&(j[P]=T[P]);return{$$typeof:p,type:M,key:se,ref:re,props:j,_owner:N.current}}return ka.Fragment=x,ka.jsx=I,ka.jsxs=I,ka}var Td;function m1(){return Td||(Td=1,mc.exports=g1()),mc.exports}var l=m1(),Re=kc();const a0=i0(Re);var Wl={},yc={exports:{}},Hn={},wc={exports:{}},bc={};var Rd;function p1(){return Rd||(Rd=1,(function(f){function p(le,X){var z=le.length;le.push(X);e:for(;0<z;){var D=z-1>>>1,W=le[D];if(0<N(W,X))le[D]=X,le[z]=W,z=D;else break e}}function x(le){return le.length===0?null:le[0]}function v(le){if(le.length===0)return null;var X=le[0],z=le.pop();if(z!==X){le[0]=z;e:for(var D=0,W=le.length,ke=W>>>1;D<ke;){var _e=2*(D+1)-1,ye=le[_e],fe=_e+1,Pe=le[fe];if(0>N(ye,z))fe<W&&0>N(Pe,ye)?(le[D]=Pe,le[fe]=z,D=fe):(le[D]=ye,le[_e]=z,D=_e);else if(fe<W&&0>N(Pe,z))le[D]=Pe,le[fe]=z,D=fe;else break e}}return X}function N(le,X){var z=le.sortIndex-X.sortIndex;return z!==0?z:le.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;f.unstable_now=function(){return w.now()}}else{var I=Date,M=I.now();f.unstable_now=function(){return I.now()-M}}var T=[],A=[],P=1,j=null,se=3,re=!1,ee=!1,ie=!1,ae=typeof setTimeout=="function"?setTimeout:null,ue=typeof clearTimeout=="function"?clearTimeout:null,ce=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function oe(le){for(var X=x(A);X!==null;){if(X.callback===null)v(A);else if(X.startTime<=le)v(A),X.sortIndex=X.expirationTime,p(T,X);else break;X=x(A)}}function xe(le){if(ie=!1,oe(le),!ee)if(x(T)!==null)ee=!0,me(Ee);else{var X=x(A);X!==null&&q(xe,X.startTime-le)}}function Ee(le,X){ee=!1,ie&&(ie=!1,ue(pe),pe=-1),re=!0;var z=se;try{for(oe(X),j=x(T);j!==null&&(!(j.expirationTime>X)||le&&!Xe());){var D=j.callback;if(typeof D=="function"){j.callback=null,se=j.priorityLevel;var W=D(j.expirationTime<=X);X=f.unstable_now(),typeof W=="function"?j.callback=W:j===x(T)&&v(T),oe(X)}else v(T);j=x(T)}if(j!==null)var ke=!0;else{var _e=x(A);_e!==null&&q(xe,_e.startTime-X),ke=!1}return ke}finally{j=null,se=z,re=!1}}var he=!1,G=null,pe=-1,de=5,nt=-1;function Xe(){return!(f.unstable_now()-nt<de)}function ne(){if(G!==null){var le=f.unstable_now();nt=le;var X=!0;try{X=G(!0,le)}finally{X?K():(he=!1,G=null)}}else he=!1}var K;if(typeof ce=="function")K=function(){ce(ne)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,B=Se.port2;Se.port1.onmessage=ne,K=function(){B.postMessage(null)}}else K=function(){ae(ne,0)};function me(le){G=le,he||(he=!0,K())}function q(le,X){pe=ae(function(){le(f.unstable_now())},X)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(le){le.callback=null},f.unstable_continueExecution=function(){ee||re||(ee=!0,me(Ee))},f.unstable_forceFrameRate=function(le){0>le||125<le?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):de=0<le?Math.floor(1e3/le):5},f.unstable_getCurrentPriorityLevel=function(){return se},f.unstable_getFirstCallbackNode=function(){return x(T)},f.unstable_next=function(le){switch(se){case 1:case 2:case 3:var X=3;break;default:X=se}var z=se;se=X;try{return le()}finally{se=z}},f.unstable_pauseExecution=function(){},f.unstable_requestPaint=function(){},f.unstable_runWithPriority=function(le,X){switch(le){case 1:case 2:case 3:case 4:case 5:break;default:le=3}var z=se;se=le;try{return X()}finally{se=z}},f.unstable_scheduleCallback=function(le,X,z){var D=f.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?D+z:D):z=D,le){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=z+W,le={id:P++,callback:X,priorityLevel:le,startTime:z,expirationTime:W,sortIndex:-1},z>D?(le.sortIndex=z,p(A,le),x(T)===null&&le===x(A)&&(ie?(ue(pe),pe=-1):ie=!0,q(xe,z-D))):(le.sortIndex=W,p(T,le),ee||re||(ee=!0,me(Ee))),le},f.unstable_shouldYield=Xe,f.unstable_wrapCallback=function(le){var X=se;return function(){var z=se;se=X;try{return le.apply(this,arguments)}finally{se=z}}}})(bc)),bc}var _d;function y1(){return _d||(_d=1,wc.exports=p1()),wc.exports}var jd;function w1(){if(jd)return Hn;jd=1;var f=kc(),p=y1();function x(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v=new Set,N={};function w(t,s){I(t,s),I(t+"Capture",s)}function I(t,s){for(N[t]=s,t=0;t<s.length;t++)v.add(s[t])}var M=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),T=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},j={};function se(t){return T.call(j,t)?!0:T.call(P,t)?!1:A.test(t)?j[t]=!0:(P[t]=!0,!1)}function re(t,s,c,d){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:c!==null?!c.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ee(t,s,c,d){if(s===null||typeof s>"u"||re(t,s,c,d))return!0;if(d)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function ie(t,s,c,d,m,y,S){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=m,this.mustUseProperty=c,this.propertyName=t,this.type=s,this.sanitizeURL=y,this.removeEmptyString=S}var ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ae[t]=new ie(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];ae[s]=new ie(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){ae[t]=new ie(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ae[t]=new ie(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ae[t]=new ie(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){ae[t]=new ie(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){ae[t]=new ie(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){ae[t]=new ie(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){ae[t]=new ie(t,5,!1,t.toLowerCase(),null,!1,!1)});var ue=/[\-:]([a-z])/g;function ce(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(ue,ce);ae[s]=new ie(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(ue,ce);ae[s]=new ie(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(ue,ce);ae[s]=new ie(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){ae[t]=new ie(t,1,!1,t.toLowerCase(),null,!1,!1)}),ae.xlinkHref=new ie("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){ae[t]=new ie(t,1,!1,t.toLowerCase(),null,!0,!0)});function oe(t,s,c,d){var m=ae.hasOwnProperty(s)?ae[s]:null;(m!==null?m.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(ee(s,c,m,d)&&(c=null),d||m===null?se(s)&&(c===null?t.removeAttribute(s):t.setAttribute(s,""+c)):m.mustUseProperty?t[m.propertyName]=c===null?m.type===3?!1:"":c:(s=m.attributeName,d=m.attributeNamespace,c===null?t.removeAttribute(s):(m=m.type,c=m===3||m===4&&c===!0?"":""+c,d?t.setAttributeNS(d,s,c):t.setAttribute(s,c))))}var xe=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ee=Symbol.for("react.element"),he=Symbol.for("react.portal"),G=Symbol.for("react.fragment"),pe=Symbol.for("react.strict_mode"),de=Symbol.for("react.profiler"),nt=Symbol.for("react.provider"),Xe=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),Se=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),me=Symbol.for("react.lazy"),q=Symbol.for("react.offscreen"),le=Symbol.iterator;function X(t){return t===null||typeof t!="object"?null:(t=le&&t[le]||t["@@iterator"],typeof t=="function"?t:null)}var z=Object.assign,D;function W(t){if(D===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);D=s&&s[1]||""}return`
`+D+t}var ke=!1;function _e(t,s){if(!t||ke)return"";ke=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(te){var d=te}Reflect.construct(t,[],s)}else{try{s.call()}catch(te){d=te}t.call(s.prototype)}else{try{throw Error()}catch(te){d=te}t()}}catch(te){if(te&&d&&typeof te.stack=="string"){for(var m=te.stack.split(`
`),y=d.stack.split(`
`),S=m.length-1,O=y.length-1;1<=S&&0<=O&&m[S]!==y[O];)O--;for(;1<=S&&0<=O;S--,O--)if(m[S]!==y[O]){if(S!==1||O!==1)do if(S--,O--,0>O||m[S]!==y[O]){var F=`
`+m[S].replace(" at new "," at ");return t.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",t.displayName)),F}while(1<=S&&0<=O);break}}}finally{ke=!1,Error.prepareStackTrace=c}return(t=t?t.displayName||t.name:"")?W(t):""}function ye(t){switch(t.tag){case 5:return W(t.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return t=_e(t.type,!1),t;case 11:return t=_e(t.type.render,!1),t;case 1:return t=_e(t.type,!0),t;default:return""}}function fe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case G:return"Fragment";case he:return"Portal";case de:return"Profiler";case pe:return"StrictMode";case K:return"Suspense";case Se:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xe:return(t.displayName||"Context")+".Consumer";case nt:return(t._context.displayName||"Context")+".Provider";case ne:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case B:return s=t.displayName||null,s!==null?s:fe(t.type)||"Memo";case me:s=t._payload,t=t._init;try{return fe(t(s))}catch{}}return null}function Pe(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fe(s);case 8:return s===pe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function je(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Me(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Be(t){var s=Me(t)?"checked":"value",c=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),d=""+t[s];if(!t.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,y=c.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return m.call(this)},set:function(S){d=""+S,y.call(this,S)}}),Object.defineProperty(t,s,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(S){d=""+S},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Qe(t){t._valueTracker||(t._valueTracker=Be(t))}function sr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return t&&(d=Me(t)?t.checked?"true":"false":t.value),t=d,t!==c?(s.setValue(t),!0):!1}function at(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gn(t,s){var c=s.checked;return z({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??t._wrapperState.initialChecked})}function vn(t,s){var c=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;c=je(s.value!=null?s.value:c),t._wrapperState={initialChecked:d,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Rn(t,s){s=s.checked,s!=null&&oe(t,"checked",s,!1)}function Dt(t,s){Rn(t,s);var c=je(s.value),d=s.type;if(c!=null)d==="number"?(c===0&&t.value===""||t.value!=c)&&(t.value=""+c):t.value!==""+c&&(t.value=""+c);else if(d==="submit"||d==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?ut(t,s.type,c):s.hasOwnProperty("defaultValue")&&ut(t,s.type,je(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function vt(t,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,c||s===t.value||(t.value=s),t.defaultValue=s}c=t.name,c!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,c!==""&&(t.name=c)}function ut(t,s,c){(s!=="number"||at(t.ownerDocument)!==t)&&(c==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+c&&(t.defaultValue=""+c))}var Sr=Array.isArray;function Le(t,s,c,d){if(t=t.options,s){s={};for(var m=0;m<c.length;m++)s["$"+c[m]]=!0;for(c=0;c<t.length;c++)m=s.hasOwnProperty("$"+t[c].value),t[c].selected!==m&&(t[c].selected=m),m&&d&&(t[c].defaultSelected=!0)}else{for(c=""+je(c),s=null,m=0;m<t.length;m++){if(t[m].value===c){t[m].selected=!0,d&&(t[m].defaultSelected=!0);return}s!==null||t[m].disabled||(s=t[m])}s!==null&&(s.selected=!0)}}function es(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(x(91));return z({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ui(t,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(x(92));if(Sr(c)){if(1<c.length)throw Error(x(93));c=c[0]}s=c}s==null&&(s=""),c=s}t._wrapperState={initialValue:je(c)}}function ir(t,s){var c=je(s.value),d=je(s.defaultValue);c!=null&&(c=""+c,c!==t.value&&(t.value=c),s.defaultValue==null&&t.defaultValue!==c&&(t.defaultValue=c)),d!=null&&(t.defaultValue=""+d)}function si(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function On(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ii(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?On(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vn,cn=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,d,m){MSApp.execUnsafeLocalFunction(function(){return t(s,c,d,m)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Vn=Vn||document.createElement("div"),Vn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Vn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function ts(t,s){if(s){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=s;return}}t.textContent=s}var kr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yl=["Webkit","ms","Moz","O"];Object.keys(kr).forEach(function(t){Yl.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),kr[s]=kr[t]})});function Pt(t,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||kr.hasOwnProperty(t)&&kr[t]?(""+s).trim():s+"px"}function Te(t,s){t=t.style;for(var c in s)if(s.hasOwnProperty(c)){var d=c.indexOf("--")===0,m=Pt(c,s[c],d);c==="float"&&(c="cssFloat"),d?t.setProperty(c,m):t[c]=m}}var Xt=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pt(t,s){if(s){if(Xt[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(x(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(x(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(x(61))}if(s.style!=null&&typeof s.style!="object")throw Error(x(62))}}function St(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lr=null;function _s(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ai=null,ot=null,Dn=null;function Wi(t){if(t=ha(t)){if(typeof ai!="function")throw Error(x(280));var s=t.stateNode;s&&(s=tl(s),ai(t.stateNode,t.type,s))}}function zi(t){ot?Dn?Dn.push(t):Dn=[t]:ot=t}function Pn(){if(ot){var t=ot,s=Dn;if(Dn=ot=null,Wi(t),s)for(t=0;t<s.length;t++)Wi(s[t])}}function li(t,s){return t(s)}function tn(){}var Ir=!1;function js(t,s,c){if(Ir)return t(s,c);Ir=!0;try{return li(t,s,c)}finally{Ir=!1,(ot!==null||Dn!==null)&&(tn(),Pn())}}function Nn(t,s){var c=t.stateNode;if(c===null)return null;var d=tl(c);if(d===null)return null;c=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(x(231,s,typeof c));return c}var Hi=!1;if(M)try{var Xn={};Object.defineProperty(Xn,"passive",{get:function(){Hi=!0}}),window.addEventListener("test",Xn,Xn),window.removeEventListener("test",Xn,Xn)}catch{Hi=!1}function Gi(t,s,c,d,m,y,S,O,F){var te=Array.prototype.slice.call(arguments,3);try{s.apply(c,te)}catch(ve){this.onError(ve)}}var $t=!1,ar=null,gn=!1,Oe=null,ns={onError:function(t){$t=!0,ar=t}};function Vi(t,s,c,d,m,y,S,O,F){$t=!1,ar=null,Gi.apply(ns,arguments)}function Cn(t,s,c,d,m,y,S,O,F){if(Vi.apply(this,arguments),$t){if($t){var te=ar;$t=!1,ar=null}else throw Error(x(198));gn||(gn=!0,Oe=te)}}function Bn(t){var s=t,c=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(c=s.return),t=s.return;while(t)}return s.tag===3?c:null}function Ms(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Os(t){if(Bn(t)!==t)throw Error(x(188))}function lr(t){var s=t.alternate;if(!s){if(s=Bn(t),s===null)throw Error(x(188));return s!==t?null:t}for(var c=t,d=s;;){var m=c.return;if(m===null)break;var y=m.alternate;if(y===null){if(d=m.return,d!==null){c=d;continue}break}if(m.child===y.child){for(y=m.child;y;){if(y===c)return Os(m),t;if(y===d)return Os(m),s;y=y.sibling}throw Error(x(188))}if(c.return!==d.return)c=m,d=y;else{for(var S=!1,O=m.child;O;){if(O===c){S=!0,c=m,d=y;break}if(O===d){S=!0,d=m,c=y;break}O=O.sibling}if(!S){for(O=y.child;O;){if(O===c){S=!0,c=y,d=m;break}if(O===d){S=!0,d=y,c=m;break}O=O.sibling}if(!S)throw Error(x(189))}}if(c.alternate!==d)throw Error(x(190))}if(c.tag!==3)throw Error(x(188));return c.stateNode.current===c?t:s}function Oa(t){return t=lr(t),t!==null?Da(t):null}function Da(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Da(t);if(s!==null)return s;t=t.sibling}return null}var Zn=p.unstable_scheduleCallback,un=p.unstable_cancelCallback,kt=p.unstable_shouldYield,Pa=p.unstable_requestPaint,wt=p.unstable_now,Xi=p.unstable_getCurrentPriorityLevel,ge=p.unstable_ImmediatePriority,Ba=p.unstable_UserBlockingPriority,Et=p.unstable_NormalPriority,rs=p.unstable_LowPriority,La=p.unstable_IdlePriority,ft=null,rt=null;function dt(t){if(rt&&typeof rt.onCommitFiberRoot=="function")try{rt.onCommitFiberRoot(ft,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:Zt,Zi=Math.log,Yi=Math.LN2;function Zt(t){return t>>>=0,t===0?32:31-(Zi(t)/Yi|0)|0}var Yn=64,oi=4194304;function At(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kn(t,s){var c=t.pendingLanes;if(c===0)return 0;var d=0,m=t.suspendedLanes,y=t.pingedLanes,S=c&268435455;if(S!==0){var O=S&~m;O!==0?d=At(O):(y&=S,y!==0&&(d=At(y)))}else S=c&~m,S!==0?d=At(S):y!==0&&(d=At(y));if(d===0)return 0;if(s!==0&&s!==d&&(s&m)===0&&(m=d&-d,y=s&-s,m>=y||m===16&&(y&4194240)!==0))return s;if((d&4)!==0&&(d|=c&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=d;0<s;)c=31-_n(s),m=1<<c,d|=t[c],s&=~m;return d}function Kl(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ss(t,s){for(var c=t.suspendedLanes,d=t.pingedLanes,m=t.expirationTimes,y=t.pendingLanes;0<y;){var S=31-_n(y),O=1<<S,F=m[S];F===-1?((O&c)===0||(O&d)!==0)&&(m[S]=Kl(O,s)):F<=s&&(t.expiredLanes|=O),y&=~O}}function bt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nn(){var t=Yn;return Yn<<=1,(Yn&4194240)===0&&(Yn=64),t}function Z(t){for(var s=[],c=0;31>c;c++)s.push(t);return s}function R(t,s,c){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-_n(s),t[s]=c}function Ge(t,s){var c=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var d=t.eventTimes;for(t=t.expirationTimes;0<c;){var m=31-_n(c),y=1<<m;s[m]=0,d[m]=-1,t[m]=-1,c&=~y}}function Wt(t,s){var c=t.entangledLanes|=s;for(t=t.entanglements;c;){var d=31-_n(c),m=1<<d;m&s|t[d]&s&&(t[d]|=s),c&=~m}}var st=0;function Fa(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ci,En,Ve,It,Ki,qi=!1,is=[],qn=null,or=null,Tr=null,Mt=new Map,pr=new Map,mn=[],qe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ua(t,s){switch(t){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Mt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":pr.delete(s.pointerId)}}function $e(t,s,c,d,m,y){return t===null||t.nativeEvent!==y?(t={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[m]},s!==null&&(s=ha(s),s!==null&&En(s)),t):(t.eventSystemFlags|=d,s=t.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),t)}function rn(t,s,c,d,m){switch(s){case"focusin":return qn=$e(qn,t,s,c,d,m),!0;case"dragenter":return or=$e(or,t,s,c,d,m),!0;case"mouseover":return Tr=$e(Tr,t,s,c,d,m),!0;case"pointerover":var y=m.pointerId;return Mt.set(y,$e(Mt.get(y)||null,t,s,c,d,m)),!0;case"gotpointercapture":return y=m.pointerId,pr.set(y,$e(pr.get(y)||null,t,s,c,d,m)),!0}return!1}function Wa(t){var s=Gs(t.target);if(s!==null){var c=Bn(s);if(c!==null){if(s=c.tag,s===13){if(s=Ms(c),s!==null){t.blockedOn=s,Ki(t.priority,function(){Ve(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function as(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var c=ui(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(c===null){c=t.nativeEvent;var d=new c.constructor(c.type,c);Lr=d,c.target.dispatchEvent(d),Lr=null}else return s=ha(c),s!==null&&En(s),t.blockedOn=c,!1;s.shift()}return!0}function Qi(t,s,c){as(t)&&c.delete(s)}function Fr(){qi=!1,qn!==null&&as(qn)&&(qn=null),or!==null&&as(or)&&(or=null),Tr!==null&&as(Tr)&&(Tr=null),Mt.forEach(Qi),pr.forEach(Qi)}function Ds(t,s){t.blockedOn===s&&(t.blockedOn=null,qi||(qi=!0,p.unstable_scheduleCallback(p.unstable_NormalPriority,Fr)))}function yr(t){function s(m){return Ds(m,t)}if(0<is.length){Ds(is[0],t);for(var c=1;c<is.length;c++){var d=is[c];d.blockedOn===t&&(d.blockedOn=null)}}for(qn!==null&&Ds(qn,t),or!==null&&Ds(or,t),Tr!==null&&Ds(Tr,t),Mt.forEach(s),pr.forEach(s),c=0;c<mn.length;c++)d=mn[c],d.blockedOn===t&&(d.blockedOn=null);for(;0<mn.length&&(c=mn[0],c.blockedOn===null);)Wa(c),c.blockedOn===null&&mn.shift()}var cr=xe.ReactCurrentBatchConfig,Rr=!0;function za(t,s,c,d){var m=st,y=cr.transition;cr.transition=null;try{st=1,Ur(t,s,c,d)}finally{st=m,cr.transition=y}}function Ps(t,s,c,d){var m=st,y=cr.transition;cr.transition=null;try{st=4,Ur(t,s,c,d)}finally{st=m,cr.transition=y}}function Ur(t,s,c,d){if(Rr){var m=ui(t,s,c,d);if(m===null)io(t,s,d,sn,c),Ua(t,d);else if(rn(m,t,s,c,d))d.stopPropagation();else if(Ua(t,d),s&4&&-1<qe.indexOf(t)){for(;m!==null;){var y=ha(m);if(y!==null&&ci(y),y=ui(t,s,c,d),y===null&&io(t,s,d,sn,c),y===m)break;m=y}m!==null&&d.stopPropagation()}else io(t,s,d,null,c)}}var sn=null;function ui(t,s,c,d){if(sn=null,t=_s(d),t=Gs(t),t!==null)if(s=Bn(t),s===null)t=null;else if(c=s.tag,c===13){if(t=Ms(s),t!==null)return t;t=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return sn=t,null}function Ji(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xi()){case ge:return 1;case Ba:return 4;case Et:case rs:return 16;case La:return 536870912;default:return 16}default:return 16}}var wr=null,$i=null,di=null;function Ha(){if(di)return di;var t,s=$i,c=s.length,d,m="value"in wr?wr.value:wr.textContent,y=m.length;for(t=0;t<c&&s[t]===m[t];t++);var S=c-t;for(d=1;d<=S&&s[c-d]===m[y-d];d++);return di=m.slice(t,1<d?1-d:void 0)}function xt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Bs(){return!0}function Ls(){return!1}function zt(t){function s(c,d,m,y,S){this._reactName=c,this._targetInst=m,this.type=d,this.nativeEvent=y,this.target=S,this.currentTarget=null;for(var O in t)t.hasOwnProperty(O)&&(c=t[O],this[O]=c?c(y):y[O]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Bs:Ls,this.isPropagationStopped=Ls,this}return z(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Bs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Bs)},persist:function(){},isPersistent:Bs}),s}var ls={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$=zt(ls),tt=z({},ls,{view:0,detail:0}),an=zt(tt),os,hi,Fs,fi=z({},tt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Fs&&(Fs&&t.type==="mousemove"?(os=t.screenX-Fs.screenX,hi=t.screenY-Fs.screenY):hi=os=0,Fs=t),os)},movementY:function(t){return"movementY"in t?t.movementY:hi}}),Ga=zt(fi),ea=z({},fi,{dataTransfer:0}),Yt=zt(ea),ta=z({},tt,{relatedTarget:0}),Tt=zt(ta),xi=z({},ls,{animationName:0,elapsedTime:0,pseudoElement:0}),Wr=zt(xi),Nt=z({},ls,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ze=zt(Nt),ql=z({},ls,{data:0}),Ct=zt(ql),zr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ql={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ur(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Ql[t])?!!s[t]:!1}function Us(){return ur}var Va=z({},tt,{key:function(t){if(t.key){var s=zr[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=xt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cs[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(t){return t.type==="keypress"?xt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),na=zt(Va),Xa=z({},fi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ra=zt(Xa),Jl=z({},tt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),us=zt(Jl),sa=z({},ls,{propertyName:0,elapsedTime:0,pseudoElement:0}),$l=zt(sa),Ws=z({},fi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eo=zt(Ws),_r=[9,13,27,32],ds=M&&"CompositionEvent"in window,dn=null;M&&"documentMode"in document&&(dn=document.documentMode);var Za=M&&"TextEvent"in window&&!dn,Qn=M&&(!ds||dn&&8<dn&&11>=dn),Ya=" ",gi=!1;function Ka(t,s){switch(t){case"keyup":return _r.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ia(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pn=!1;function to(t,s){switch(t){case"compositionend":return ia(s);case"keypress":return s.which!==32?null:(gi=!0,Ya);case"textInput":return t=s.data,t===Ya&&gi?null:t;default:return null}}function aa(t,s){if(pn)return t==="compositionend"||!ds&&Ka(t,s)?(t=Ha(),di=$i=wr=null,pn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Qn&&s.locale!=="ko"?null:s.data;default:return null}}var zs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ht(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!zs[t.type]:s==="textarea"}function Hs(t,s,c,d){zi(d),s=Ja(s,"onChange"),0<s.length&&(c=new $("onChange","change",null,c,d),t.push({event:c,listeners:s}))}var C=null,e=null;function n(t){zc(t,0)}function r(t){var s=yi(t);if(sr(s))return t}function i(t,s){if(t==="change")return s}var a=!1;if(M){var o;if(M){var u="oninput"in document;if(!u){var h=document.createElement("div");h.setAttribute("oninput","return;"),u=typeof h.oninput=="function"}o=u}else o=!1;a=o&&(!document.documentMode||9<document.documentMode)}function g(){C&&(C.detachEvent("onpropertychange",b),e=C=null)}function b(t){if(t.propertyName==="value"&&r(e)){var s=[];Hs(s,e,t,_s(t)),js(n,s)}}function E(t,s,c){t==="focusin"?(g(),C=s,e=c,C.attachEvent("onpropertychange",b)):t==="focusout"&&g()}function k(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return r(e)}function _(t,s){if(t==="click")return r(s)}function L(t,s){if(t==="input"||t==="change")return r(s)}function U(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var V=typeof Object.is=="function"?Object.is:U;function J(t,s){if(V(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var c=Object.keys(t),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var m=c[d];if(!T.call(s,m)||!V(t[m],s[m]))return!1}return!0}function Ce(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ae(t,s){var c=Ce(t);t=0;for(var d;c;){if(c.nodeType===3){if(d=t+c.textContent.length,t<=s&&d>=s)return{node:c,offset:s-t};t=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ce(c)}}function be(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?be(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function lt(){for(var t=window,s=at();s instanceof t.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)t=s.contentWindow;else break;s=at(t.document)}return s}function et(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function An(t){var s=lt(),c=t.focusedElem,d=t.selectionRange;if(s!==c&&c&&c.ownerDocument&&be(c.ownerDocument.documentElement,c)){if(d!==null&&et(c)){if(s=d.start,t=d.end,t===void 0&&(t=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(t,c.value.length);else if(t=(s=c.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var m=c.textContent.length,y=Math.min(d.start,m);d=d.end===void 0?y:Math.min(d.end,m),!t.extend&&y>d&&(m=d,d=y,y=m),m=Ae(c,y);var S=Ae(c,d);m&&S&&(t.rangeCount!==1||t.anchorNode!==m.node||t.anchorOffset!==m.offset||t.focusNode!==S.node||t.focusOffset!==S.offset)&&(s=s.createRange(),s.setStart(m.node,m.offset),t.removeAllRanges(),y>d?(t.addRange(s),t.extend(S.node,S.offset)):(s.setEnd(S.node,S.offset),t.addRange(s)))}}for(s=[],t=c;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)t=s[c],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jn=M&&"documentMode"in document&&11>=document.documentMode,Kt=null,yt=null,Bt=null,yn=!1;function Hr(t,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;yn||Kt==null||Kt!==at(d)||(d=Kt,"selectionStart"in d&&et(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Bt&&J(Bt,d)||(Bt=d,d=Ja(yt,"onSelect"),0<d.length&&(s=new $("onSelect","select",null,s,c),t.push({event:s,listeners:d}),s.target=Kt)))}function br(t,s){var c={};return c[t.toLowerCase()]=s.toLowerCase(),c["Webkit"+t]="webkit"+s,c["Moz"+t]="moz"+s,c}var hs={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},la={},Oc={};M&&(Oc=document.createElement("div").style,"AnimationEvent"in window||(delete hs.animationend.animation,delete hs.animationiteration.animation,delete hs.animationstart.animation),"TransitionEvent"in window||delete hs.transitionend.transition);function qa(t){if(la[t])return la[t];if(!hs[t])return t;var s=hs[t],c;for(c in s)if(s.hasOwnProperty(c)&&c in Oc)return la[t]=s[c];return t}var Dc=qa("animationend"),Pc=qa("animationiteration"),Bc=qa("animationstart"),Lc=qa("transitionend"),Fc=new Map,Uc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fs(t,s){Fc.set(t,s),w(s,[t])}for(var no=0;no<Uc.length;no++){var ro=Uc[no],C0=ro.toLowerCase(),E0=ro[0].toUpperCase()+ro.slice(1);fs(C0,"on"+E0)}fs(Dc,"onAnimationEnd"),fs(Pc,"onAnimationIteration"),fs(Bc,"onAnimationStart"),fs("dblclick","onDoubleClick"),fs("focusin","onFocus"),fs("focusout","onBlur"),fs(Lc,"onTransitionEnd"),I("onMouseEnter",["mouseout","mouseover"]),I("onMouseLeave",["mouseout","mouseover"]),I("onPointerEnter",["pointerout","pointerover"]),I("onPointerLeave",["pointerout","pointerover"]),w("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),w("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),w("onBeforeInput",["compositionend","keypress","textInput","paste"]),w("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),w("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),w("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),A0=new Set("cancel close invalid load scroll toggle".split(" ").concat(oa));function Wc(t,s,c){var d=t.type||"unknown-event";t.currentTarget=c,Cn(d,s,void 0,t),t.currentTarget=null}function zc(t,s){s=(s&4)!==0;for(var c=0;c<t.length;c++){var d=t[c],m=d.event;d=d.listeners;e:{var y=void 0;if(s)for(var S=d.length-1;0<=S;S--){var O=d[S],F=O.instance,te=O.currentTarget;if(O=O.listener,F!==y&&m.isPropagationStopped())break e;Wc(m,O,te),y=F}else for(S=0;S<d.length;S++){if(O=d[S],F=O.instance,te=O.currentTarget,O=O.listener,F!==y&&m.isPropagationStopped())break e;Wc(m,O,te),y=F}}}if(gn)throw t=Oe,gn=!1,Oe=null,t}function _t(t,s){var c=s[ho];c===void 0&&(c=s[ho]=new Set);var d=t+"__bubble";c.has(d)||(Hc(s,t,2,!1),c.add(d))}function so(t,s,c){var d=0;s&&(d|=4),Hc(c,t,d,s)}var Qa="_reactListening"+Math.random().toString(36).slice(2);function ca(t){if(!t[Qa]){t[Qa]=!0,v.forEach(function(c){c!=="selectionchange"&&(A0.has(c)||so(c,!1,t),so(c,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Qa]||(s[Qa]=!0,so("selectionchange",!1,s))}}function Hc(t,s,c,d){switch(Ji(s)){case 1:var m=za;break;case 4:m=Ps;break;default:m=Ur}c=m.bind(null,s,c,t),m=void 0,!Hi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),d?m!==void 0?t.addEventListener(s,c,{capture:!0,passive:m}):t.addEventListener(s,c,!0):m!==void 0?t.addEventListener(s,c,{passive:m}):t.addEventListener(s,c,!1)}function io(t,s,c,d,m){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var O=d.stateNode.containerInfo;if(O===m||O.nodeType===8&&O.parentNode===m)break;if(S===4)for(S=d.return;S!==null;){var F=S.tag;if((F===3||F===4)&&(F=S.stateNode.containerInfo,F===m||F.nodeType===8&&F.parentNode===m))return;S=S.return}for(;O!==null;){if(S=Gs(O),S===null)return;if(F=S.tag,F===5||F===6){d=y=S;continue e}O=O.parentNode}}d=d.return}js(function(){var te=y,ve=_s(c),Ne=[];e:{var we=Fc.get(t);if(we!==void 0){var De=$,We=t;switch(t){case"keypress":if(xt(c)===0)break e;case"keydown":case"keyup":De=na;break;case"focusin":We="focus",De=Tt;break;case"focusout":We="blur",De=Tt;break;case"beforeblur":case"afterblur":De=Tt;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=Ga;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=Yt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=us;break;case Dc:case Pc:case Bc:De=Wr;break;case Lc:De=$l;break;case"scroll":De=an;break;case"wheel":De=eo;break;case"copy":case"cut":case"paste":De=Ze;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=ra}var ze=(s&4)!==0,qt=!ze&&t==="scroll",Y=ze?we!==null?we+"Capture":null:we;ze=[];for(var H=te,Q;H!==null;){Q=H;var Ie=Q.stateNode;if(Q.tag===5&&Ie!==null&&(Q=Ie,Y!==null&&(Ie=Nn(H,Y),Ie!=null&&ze.push(ua(H,Ie,Q)))),qt)break;H=H.return}0<ze.length&&(we=new De(we,We,null,c,ve),Ne.push({event:we,listeners:ze}))}}if((s&7)===0){e:{if(we=t==="mouseover"||t==="pointerover",De=t==="mouseout"||t==="pointerout",we&&c!==Lr&&(We=c.relatedTarget||c.fromElement)&&(Gs(We)||We[Gr]))break e;if((De||we)&&(we=ve.window===ve?ve:(we=ve.ownerDocument)?we.defaultView||we.parentWindow:window,De?(We=c.relatedTarget||c.toElement,De=te,We=We?Gs(We):null,We!==null&&(qt=Bn(We),We!==qt||We.tag!==5&&We.tag!==6)&&(We=null)):(De=null,We=te),De!==We)){if(ze=Ga,Ie="onMouseLeave",Y="onMouseEnter",H="mouse",(t==="pointerout"||t==="pointerover")&&(ze=ra,Ie="onPointerLeave",Y="onPointerEnter",H="pointer"),qt=De==null?we:yi(De),Q=We==null?we:yi(We),we=new ze(Ie,H+"leave",De,c,ve),we.target=qt,we.relatedTarget=Q,Ie=null,Gs(ve)===te&&(ze=new ze(Y,H+"enter",We,c,ve),ze.target=Q,ze.relatedTarget=qt,Ie=ze),qt=Ie,De&&We)t:{for(ze=De,Y=We,H=0,Q=ze;Q;Q=mi(Q))H++;for(Q=0,Ie=Y;Ie;Ie=mi(Ie))Q++;for(;0<H-Q;)ze=mi(ze),H--;for(;0<Q-H;)Y=mi(Y),Q--;for(;H--;){if(ze===Y||Y!==null&&ze===Y.alternate)break t;ze=mi(ze),Y=mi(Y)}ze=null}else ze=null;De!==null&&Gc(Ne,we,De,ze,!1),We!==null&&qt!==null&&Gc(Ne,qt,We,ze,!0)}}e:{if(we=te?yi(te):window,De=we.nodeName&&we.nodeName.toLowerCase(),De==="select"||De==="input"&&we.type==="file")var He=i;else if(ht(we))if(a)He=L;else{He=k;var Ye=E}else(De=we.nodeName)&&De.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(He=_);if(He&&(He=He(t,te))){Hs(Ne,He,c,ve);break e}Ye&&Ye(t,we,te),t==="focusout"&&(Ye=we._wrapperState)&&Ye.controlled&&we.type==="number"&&ut(we,"number",we.value)}switch(Ye=te?yi(te):window,t){case"focusin":(ht(Ye)||Ye.contentEditable==="true")&&(Kt=Ye,yt=te,Bt=null);break;case"focusout":Bt=yt=Kt=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,Hr(Ne,c,ve);break;case"selectionchange":if(Jn)break;case"keydown":case"keyup":Hr(Ne,c,ve)}var Ke;if(ds)e:{switch(t){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else pn?Ka(t,c)&&(Je="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(Je="onCompositionStart");Je&&(Qn&&c.locale!=="ko"&&(pn||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&pn&&(Ke=Ha()):(wr=ve,$i="value"in wr?wr.value:wr.textContent,pn=!0)),Ye=Ja(te,Je),0<Ye.length&&(Je=new Ct(Je,t,null,c,ve),Ne.push({event:Je,listeners:Ye}),Ke?Je.data=Ke:(Ke=ia(c),Ke!==null&&(Je.data=Ke)))),(Ke=Za?to(t,c):aa(t,c))&&(te=Ja(te,"onBeforeInput"),0<te.length&&(ve=new Ct("onBeforeInput","beforeinput",null,c,ve),Ne.push({event:ve,listeners:te}),ve.data=Ke))}zc(Ne,s)})}function ua(t,s,c){return{instance:t,listener:s,currentTarget:c}}function Ja(t,s){for(var c=s+"Capture",d=[];t!==null;){var m=t,y=m.stateNode;m.tag===5&&y!==null&&(m=y,y=Nn(t,c),y!=null&&d.unshift(ua(t,y,m)),y=Nn(t,s),y!=null&&d.push(ua(t,y,m))),t=t.return}return d}function mi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Gc(t,s,c,d,m){for(var y=s._reactName,S=[];c!==null&&c!==d;){var O=c,F=O.alternate,te=O.stateNode;if(F!==null&&F===d)break;O.tag===5&&te!==null&&(O=te,m?(F=Nn(c,y),F!=null&&S.unshift(ua(c,F,O))):m||(F=Nn(c,y),F!=null&&S.push(ua(c,F,O)))),c=c.return}S.length!==0&&t.push({event:s,listeners:S})}var S0=/\r\n?/g,k0=/\u0000|\uFFFD/g;function Vc(t){return(typeof t=="string"?t:""+t).replace(S0,`
`).replace(k0,"")}function $a(t,s,c){if(s=Vc(s),Vc(t)!==s&&c)throw Error(x(425))}function el(){}var ao=null,lo=null;function oo(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var co=typeof setTimeout=="function"?setTimeout:void 0,I0=typeof clearTimeout=="function"?clearTimeout:void 0,Xc=typeof Promise=="function"?Promise:void 0,T0=typeof queueMicrotask=="function"?queueMicrotask:typeof Xc<"u"?function(t){return Xc.resolve(null).then(t).catch(R0)}:co;function R0(t){setTimeout(function(){throw t})}function uo(t,s){var c=s,d=0;do{var m=c.nextSibling;if(t.removeChild(c),m&&m.nodeType===8)if(c=m.data,c==="/$"){if(d===0){t.removeChild(m),yr(s);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=m}while(c);yr(s)}function xs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Zc(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return t;s--}else c==="/$"&&s++}t=t.previousSibling}return null}var pi=Math.random().toString(36).slice(2),jr="__reactFiber$"+pi,da="__reactProps$"+pi,Gr="__reactContainer$"+pi,ho="__reactEvents$"+pi,_0="__reactListeners$"+pi,j0="__reactHandles$"+pi;function Gs(t){var s=t[jr];if(s)return s;for(var c=t.parentNode;c;){if(s=c[Gr]||c[jr]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(t=Zc(t);t!==null;){if(c=t[jr])return c;t=Zc(t)}return s}t=c,c=t.parentNode}return null}function ha(t){return t=t[jr]||t[Gr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(x(33))}function tl(t){return t[da]||null}var fo=[],wi=-1;function gs(t){return{current:t}}function jt(t){0>wi||(t.current=fo[wi],fo[wi]=null,wi--)}function Rt(t,s){wi++,fo[wi]=t.current,t.current=s}var ms={},Sn=gs(ms),Ln=gs(!1),Vs=ms;function bi(t,s){var c=t.type.contextTypes;if(!c)return ms;var d=t.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var m={},y;for(y in c)m[y]=s[y];return d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=m),m}function Fn(t){return t=t.childContextTypes,t!=null}function nl(){jt(Ln),jt(Sn)}function Yc(t,s,c){if(Sn.current!==ms)throw Error(x(168));Rt(Sn,s),Rt(Ln,c)}function Kc(t,s,c){var d=t.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return c;d=d.getChildContext();for(var m in d)if(!(m in s))throw Error(x(108,Pe(t)||"Unknown",m));return z({},c,d)}function rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ms,Vs=Sn.current,Rt(Sn,t),Rt(Ln,Ln.current),!0}function qc(t,s,c){var d=t.stateNode;if(!d)throw Error(x(169));c?(t=Kc(t,s,Vs),d.__reactInternalMemoizedMergedChildContext=t,jt(Ln),jt(Sn),Rt(Sn,t)):jt(Ln),Rt(Ln,c)}var Vr=null,sl=!1,xo=!1;function Qc(t){Vr===null?Vr=[t]:Vr.push(t)}function M0(t){sl=!0,Qc(t)}function ps(){if(!xo&&Vr!==null){xo=!0;var t=0,s=st;try{var c=Vr;for(st=1;t<c.length;t++){var d=c[t];do d=d(!0);while(d!==null)}Vr=null,sl=!1}catch(m){throw Vr!==null&&(Vr=Vr.slice(t+1)),Zn(ge,ps),m}finally{st=s,xo=!1}}return null}var vi=[],Ni=0,il=null,al=0,dr=[],hr=0,Xs=null,Xr=1,Zr="";function Zs(t,s){vi[Ni++]=al,vi[Ni++]=il,il=t,al=s}function Jc(t,s,c){dr[hr++]=Xr,dr[hr++]=Zr,dr[hr++]=Xs,Xs=t;var d=Xr;t=Zr;var m=32-_n(d)-1;d&=~(1<<m),c+=1;var y=32-_n(s)+m;if(30<y){var S=m-m%5;y=(d&(1<<S)-1).toString(32),d>>=S,m-=S,Xr=1<<32-_n(s)+m|c<<m|d,Zr=y+t}else Xr=1<<y|c<<m|d,Zr=t}function go(t){t.return!==null&&(Zs(t,1),Jc(t,1,0))}function mo(t){for(;t===il;)il=vi[--Ni],vi[Ni]=null,al=vi[--Ni],vi[Ni]=null;for(;t===Xs;)Xs=dr[--hr],dr[hr]=null,Zr=dr[--hr],dr[hr]=null,Xr=dr[--hr],dr[hr]=null}var $n=null,er=null,Ot=!1,vr=null;function $c(t,s){var c=mr(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=t,s=t.deletions,s===null?(t.deletions=[c],t.flags|=16):s.push(c)}function eu(t,s){switch(t.tag){case 5:var c=t.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,$n=t,er=xs(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,$n=t,er=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=Xs!==null?{id:Xr,overflow:Zr}:null,t.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=mr(18,null,null,0),c.stateNode=s,c.return=t,t.child=c,$n=t,er=null,!0):!1;default:return!1}}function po(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yo(t){if(Ot){var s=er;if(s){var c=s;if(!eu(t,s)){if(po(t))throw Error(x(418));s=xs(c.nextSibling);var d=$n;s&&eu(t,s)?$c(d,c):(t.flags=t.flags&-4097|2,Ot=!1,$n=t)}}else{if(po(t))throw Error(x(418));t.flags=t.flags&-4097|2,Ot=!1,$n=t}}}function tu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$n=t}function ll(t){if(t!==$n)return!1;if(!Ot)return tu(t),Ot=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!oo(t.type,t.memoizedProps)),s&&(s=er)){if(po(t))throw nu(),Error(x(418));for(;s;)$c(t,s),s=xs(s.nextSibling)}if(tu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(x(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"){if(s===0){er=xs(t.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}t=t.nextSibling}er=null}}else er=$n?xs(t.stateNode.nextSibling):null;return!0}function nu(){for(var t=er;t;)t=xs(t.nextSibling)}function Ci(){er=$n=null,Ot=!1}function wo(t){vr===null?vr=[t]:vr.push(t)}var O0=xe.ReactCurrentBatchConfig;function fa(t,s,c){if(t=c.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(x(309));var d=c.stateNode}if(!d)throw Error(x(147,t));var m=d,y=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(S){var O=m.refs;S===null?delete O[y]:O[y]=S},s._stringRef=y,s)}if(typeof t!="string")throw Error(x(284));if(!c._owner)throw Error(x(290,t))}return t}function ol(t,s){throw t=Object.prototype.toString.call(s),Error(x(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function ru(t){var s=t._init;return s(t._payload)}function su(t){function s(Y,H){if(t){var Q=Y.deletions;Q===null?(Y.deletions=[H],Y.flags|=16):Q.push(H)}}function c(Y,H){if(!t)return null;for(;H!==null;)s(Y,H),H=H.sibling;return null}function d(Y,H){for(Y=new Map;H!==null;)H.key!==null?Y.set(H.key,H):Y.set(H.index,H),H=H.sibling;return Y}function m(Y,H){return Y=As(Y,H),Y.index=0,Y.sibling=null,Y}function y(Y,H,Q){return Y.index=Q,t?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<H?(Y.flags|=2,H):Q):(Y.flags|=2,H)):(Y.flags|=1048576,H)}function S(Y){return t&&Y.alternate===null&&(Y.flags|=2),Y}function O(Y,H,Q,Ie){return H===null||H.tag!==6?(H=uc(Q,Y.mode,Ie),H.return=Y,H):(H=m(H,Q),H.return=Y,H)}function F(Y,H,Q,Ie){var He=Q.type;return He===G?ve(Y,H,Q.props.children,Ie,Q.key):H!==null&&(H.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===me&&ru(He)===H.type)?(Ie=m(H,Q.props),Ie.ref=fa(Y,H,Q),Ie.return=Y,Ie):(Ie=jl(Q.type,Q.key,Q.props,null,Y.mode,Ie),Ie.ref=fa(Y,H,Q),Ie.return=Y,Ie)}function te(Y,H,Q,Ie){return H===null||H.tag!==4||H.stateNode.containerInfo!==Q.containerInfo||H.stateNode.implementation!==Q.implementation?(H=dc(Q,Y.mode,Ie),H.return=Y,H):(H=m(H,Q.children||[]),H.return=Y,H)}function ve(Y,H,Q,Ie,He){return H===null||H.tag!==7?(H=ti(Q,Y.mode,Ie,He),H.return=Y,H):(H=m(H,Q),H.return=Y,H)}function Ne(Y,H,Q){if(typeof H=="string"&&H!==""||typeof H=="number")return H=uc(""+H,Y.mode,Q),H.return=Y,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case Ee:return Q=jl(H.type,H.key,H.props,null,Y.mode,Q),Q.ref=fa(Y,null,H),Q.return=Y,Q;case he:return H=dc(H,Y.mode,Q),H.return=Y,H;case me:var Ie=H._init;return Ne(Y,Ie(H._payload),Q)}if(Sr(H)||X(H))return H=ti(H,Y.mode,Q,null),H.return=Y,H;ol(Y,H)}return null}function we(Y,H,Q,Ie){var He=H!==null?H.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return He!==null?null:O(Y,H,""+Q,Ie);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Ee:return Q.key===He?F(Y,H,Q,Ie):null;case he:return Q.key===He?te(Y,H,Q,Ie):null;case me:return He=Q._init,we(Y,H,He(Q._payload),Ie)}if(Sr(Q)||X(Q))return He!==null?null:ve(Y,H,Q,Ie,null);ol(Y,Q)}return null}function De(Y,H,Q,Ie,He){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Y=Y.get(Q)||null,O(H,Y,""+Ie,He);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case Ee:return Y=Y.get(Ie.key===null?Q:Ie.key)||null,F(H,Y,Ie,He);case he:return Y=Y.get(Ie.key===null?Q:Ie.key)||null,te(H,Y,Ie,He);case me:var Ye=Ie._init;return De(Y,H,Q,Ye(Ie._payload),He)}if(Sr(Ie)||X(Ie))return Y=Y.get(Q)||null,ve(H,Y,Ie,He,null);ol(H,Ie)}return null}function We(Y,H,Q,Ie){for(var He=null,Ye=null,Ke=H,Je=H=0,xn=null;Ke!==null&&Je<Q.length;Je++){Ke.index>Je?(xn=Ke,Ke=null):xn=Ke.sibling;var mt=we(Y,Ke,Q[Je],Ie);if(mt===null){Ke===null&&(Ke=xn);break}t&&Ke&&mt.alternate===null&&s(Y,Ke),H=y(mt,H,Je),Ye===null?He=mt:Ye.sibling=mt,Ye=mt,Ke=xn}if(Je===Q.length)return c(Y,Ke),Ot&&Zs(Y,Je),He;if(Ke===null){for(;Je<Q.length;Je++)Ke=Ne(Y,Q[Je],Ie),Ke!==null&&(H=y(Ke,H,Je),Ye===null?He=Ke:Ye.sibling=Ke,Ye=Ke);return Ot&&Zs(Y,Je),He}for(Ke=d(Y,Ke);Je<Q.length;Je++)xn=De(Ke,Y,Je,Q[Je],Ie),xn!==null&&(t&&xn.alternate!==null&&Ke.delete(xn.key===null?Je:xn.key),H=y(xn,H,Je),Ye===null?He=xn:Ye.sibling=xn,Ye=xn);return t&&Ke.forEach(function(Ss){return s(Y,Ss)}),Ot&&Zs(Y,Je),He}function ze(Y,H,Q,Ie){var He=X(Q);if(typeof He!="function")throw Error(x(150));if(Q=He.call(Q),Q==null)throw Error(x(151));for(var Ye=He=null,Ke=H,Je=H=0,xn=null,mt=Q.next();Ke!==null&&!mt.done;Je++,mt=Q.next()){Ke.index>Je?(xn=Ke,Ke=null):xn=Ke.sibling;var Ss=we(Y,Ke,mt.value,Ie);if(Ss===null){Ke===null&&(Ke=xn);break}t&&Ke&&Ss.alternate===null&&s(Y,Ke),H=y(Ss,H,Je),Ye===null?He=Ss:Ye.sibling=Ss,Ye=Ss,Ke=xn}if(mt.done)return c(Y,Ke),Ot&&Zs(Y,Je),He;if(Ke===null){for(;!mt.done;Je++,mt=Q.next())mt=Ne(Y,mt.value,Ie),mt!==null&&(H=y(mt,H,Je),Ye===null?He=mt:Ye.sibling=mt,Ye=mt);return Ot&&Zs(Y,Je),He}for(Ke=d(Y,Ke);!mt.done;Je++,mt=Q.next())mt=De(Ke,Y,Je,mt.value,Ie),mt!==null&&(t&&mt.alternate!==null&&Ke.delete(mt.key===null?Je:mt.key),H=y(mt,H,Je),Ye===null?He=mt:Ye.sibling=mt,Ye=mt);return t&&Ke.forEach(function(f1){return s(Y,f1)}),Ot&&Zs(Y,Je),He}function qt(Y,H,Q,Ie){if(typeof Q=="object"&&Q!==null&&Q.type===G&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Ee:e:{for(var He=Q.key,Ye=H;Ye!==null;){if(Ye.key===He){if(He=Q.type,He===G){if(Ye.tag===7){c(Y,Ye.sibling),H=m(Ye,Q.props.children),H.return=Y,Y=H;break e}}else if(Ye.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===me&&ru(He)===Ye.type){c(Y,Ye.sibling),H=m(Ye,Q.props),H.ref=fa(Y,Ye,Q),H.return=Y,Y=H;break e}c(Y,Ye);break}else s(Y,Ye);Ye=Ye.sibling}Q.type===G?(H=ti(Q.props.children,Y.mode,Ie,Q.key),H.return=Y,Y=H):(Ie=jl(Q.type,Q.key,Q.props,null,Y.mode,Ie),Ie.ref=fa(Y,H,Q),Ie.return=Y,Y=Ie)}return S(Y);case he:e:{for(Ye=Q.key;H!==null;){if(H.key===Ye)if(H.tag===4&&H.stateNode.containerInfo===Q.containerInfo&&H.stateNode.implementation===Q.implementation){c(Y,H.sibling),H=m(H,Q.children||[]),H.return=Y,Y=H;break e}else{c(Y,H);break}else s(Y,H);H=H.sibling}H=dc(Q,Y.mode,Ie),H.return=Y,Y=H}return S(Y);case me:return Ye=Q._init,qt(Y,H,Ye(Q._payload),Ie)}if(Sr(Q))return We(Y,H,Q,Ie);if(X(Q))return ze(Y,H,Q,Ie);ol(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,H!==null&&H.tag===6?(c(Y,H.sibling),H=m(H,Q),H.return=Y,Y=H):(c(Y,H),H=uc(Q,Y.mode,Ie),H.return=Y,Y=H),S(Y)):c(Y,H)}return qt}var Ei=su(!0),iu=su(!1),cl=gs(null),ul=null,Ai=null,bo=null;function vo(){bo=Ai=ul=null}function No(t){var s=cl.current;jt(cl),t._currentValue=s}function Co(t,s,c){for(;t!==null;){var d=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),t===c)break;t=t.return}}function Si(t,s){ul=t,bo=Ai=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(Un=!0),t.firstContext=null)}function fr(t){var s=t._currentValue;if(bo!==t)if(t={context:t,memoizedValue:s,next:null},Ai===null){if(ul===null)throw Error(x(308));Ai=t,ul.dependencies={lanes:0,firstContext:t}}else Ai=Ai.next=t;return s}var Ys=null;function Eo(t){Ys===null?Ys=[t]:Ys.push(t)}function au(t,s,c,d){var m=s.interleaved;return m===null?(c.next=c,Eo(s)):(c.next=m.next,m.next=c),s.interleaved=c,Yr(t,d)}function Yr(t,s){t.lanes|=s;var c=t.alternate;for(c!==null&&(c.lanes|=s),c=t,t=t.return;t!==null;)t.childLanes|=s,c=t.alternate,c!==null&&(c.childLanes|=s),c=t,t=t.return;return c.tag===3?c.stateNode:null}var ys=!1;function Ao(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lu(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kr(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function ws(t,s,c){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(gt&2)!==0){var m=d.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),d.pending=s,Yr(t,c)}return m=d.interleaved,m===null?(s.next=s,Eo(d)):(s.next=m.next,m.next=s),d.interleaved=s,Yr(t,c)}function dl(t,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var d=s.lanes;d&=t.pendingLanes,c|=d,s.lanes=c,Wt(t,c)}}function ou(t,s){var c=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var m=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var S={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};y===null?m=y=S:y=y.next=S,c=c.next}while(c!==null);y===null?m=y=s:y=y.next=s}else m=y=s;c={baseState:d.baseState,firstBaseUpdate:m,lastBaseUpdate:y,shared:d.shared,effects:d.effects},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=s:t.next=s,c.lastBaseUpdate=s}function hl(t,s,c,d){var m=t.updateQueue;ys=!1;var y=m.firstBaseUpdate,S=m.lastBaseUpdate,O=m.shared.pending;if(O!==null){m.shared.pending=null;var F=O,te=F.next;F.next=null,S===null?y=te:S.next=te,S=F;var ve=t.alternate;ve!==null&&(ve=ve.updateQueue,O=ve.lastBaseUpdate,O!==S&&(O===null?ve.firstBaseUpdate=te:O.next=te,ve.lastBaseUpdate=F))}if(y!==null){var Ne=m.baseState;S=0,ve=te=F=null,O=y;do{var we=O.lane,De=O.eventTime;if((d&we)===we){ve!==null&&(ve=ve.next={eventTime:De,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var We=t,ze=O;switch(we=s,De=c,ze.tag){case 1:if(We=ze.payload,typeof We=="function"){Ne=We.call(De,Ne,we);break e}Ne=We;break e;case 3:We.flags=We.flags&-65537|128;case 0:if(We=ze.payload,we=typeof We=="function"?We.call(De,Ne,we):We,we==null)break e;Ne=z({},Ne,we);break e;case 2:ys=!0}}O.callback!==null&&O.lane!==0&&(t.flags|=64,we=m.effects,we===null?m.effects=[O]:we.push(O))}else De={eventTime:De,lane:we,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ve===null?(te=ve=De,F=Ne):ve=ve.next=De,S|=we;if(O=O.next,O===null){if(O=m.shared.pending,O===null)break;we=O,O=we.next,we.next=null,m.lastBaseUpdate=we,m.shared.pending=null}}while(!0);if(ve===null&&(F=Ne),m.baseState=F,m.firstBaseUpdate=te,m.lastBaseUpdate=ve,s=m.shared.interleaved,s!==null){m=s;do S|=m.lane,m=m.next;while(m!==s)}else y===null&&(m.shared.lanes=0);Qs|=S,t.lanes=S,t.memoizedState=Ne}}function cu(t,s,c){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var d=t[s],m=d.callback;if(m!==null){if(d.callback=null,d=c,typeof m!="function")throw Error(x(191,m));m.call(d)}}}var xa={},Mr=gs(xa),ga=gs(xa),ma=gs(xa);function Ks(t){if(t===xa)throw Error(x(174));return t}function So(t,s){switch(Rt(ma,s),Rt(ga,t),Rt(Mr,xa),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ii(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=ii(s,t)}jt(Mr),Rt(Mr,s)}function ki(){jt(Mr),jt(ga),jt(ma)}function uu(t){Ks(ma.current);var s=Ks(Mr.current),c=ii(s,t.type);s!==c&&(Rt(ga,t),Rt(Mr,c))}function ko(t){ga.current===t&&(jt(Mr),jt(ga))}var Lt=gs(0);function fl(t){for(var s=t;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Io=[];function To(){for(var t=0;t<Io.length;t++)Io[t]._workInProgressVersionPrimary=null;Io.length=0}var xl=xe.ReactCurrentDispatcher,Ro=xe.ReactCurrentBatchConfig,qs=0,Ft=null,ln=null,hn=null,gl=!1,pa=!1,ya=0,D0=0;function kn(){throw Error(x(321))}function _o(t,s){if(s===null)return!1;for(var c=0;c<s.length&&c<t.length;c++)if(!V(t[c],s[c]))return!1;return!0}function jo(t,s,c,d,m,y){if(qs=y,Ft=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,xl.current=t===null||t.memoizedState===null?F0:U0,t=c(d,m),pa){y=0;do{if(pa=!1,ya=0,25<=y)throw Error(x(301));y+=1,hn=ln=null,s.updateQueue=null,xl.current=W0,t=c(d,m)}while(pa)}if(xl.current=yl,s=ln!==null&&ln.next!==null,qs=0,hn=ln=Ft=null,gl=!1,s)throw Error(x(300));return t}function Mo(){var t=ya!==0;return ya=0,t}function Or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Ft.memoizedState=hn=t:hn=hn.next=t,hn}function xr(){if(ln===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=ln.next;var s=hn===null?Ft.memoizedState:hn.next;if(s!==null)hn=s,ln=t;else{if(t===null)throw Error(x(310));ln=t,t={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},hn===null?Ft.memoizedState=hn=t:hn=hn.next=t}return hn}function wa(t,s){return typeof s=="function"?s(t):s}function Oo(t){var s=xr(),c=s.queue;if(c===null)throw Error(x(311));c.lastRenderedReducer=t;var d=ln,m=d.baseQueue,y=c.pending;if(y!==null){if(m!==null){var S=m.next;m.next=y.next,y.next=S}d.baseQueue=m=y,c.pending=null}if(m!==null){y=m.next,d=d.baseState;var O=S=null,F=null,te=y;do{var ve=te.lane;if((qs&ve)===ve)F!==null&&(F=F.next={lane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),d=te.hasEagerState?te.eagerState:t(d,te.action);else{var Ne={lane:ve,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null};F===null?(O=F=Ne,S=d):F=F.next=Ne,Ft.lanes|=ve,Qs|=ve}te=te.next}while(te!==null&&te!==y);F===null?S=d:F.next=O,V(d,s.memoizedState)||(Un=!0),s.memoizedState=d,s.baseState=S,s.baseQueue=F,c.lastRenderedState=d}if(t=c.interleaved,t!==null){m=t;do y=m.lane,Ft.lanes|=y,Qs|=y,m=m.next;while(m!==t)}else m===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function Do(t){var s=xr(),c=s.queue;if(c===null)throw Error(x(311));c.lastRenderedReducer=t;var d=c.dispatch,m=c.pending,y=s.memoizedState;if(m!==null){c.pending=null;var S=m=m.next;do y=t(y,S.action),S=S.next;while(S!==m);V(y,s.memoizedState)||(Un=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),c.lastRenderedState=y}return[y,d]}function du(){}function hu(t,s){var c=Ft,d=xr(),m=s(),y=!V(d.memoizedState,m);if(y&&(d.memoizedState=m,Un=!0),d=d.queue,Po(gu.bind(null,c,d,t),[t]),d.getSnapshot!==s||y||hn!==null&&hn.memoizedState.tag&1){if(c.flags|=2048,ba(9,xu.bind(null,c,d,m,s),void 0,null),fn===null)throw Error(x(349));(qs&30)!==0||fu(c,s,m)}return m}function fu(t,s,c){t.flags|=16384,t={getSnapshot:s,value:c},s=Ft.updateQueue,s===null?(s={lastEffect:null,stores:null},Ft.updateQueue=s,s.stores=[t]):(c=s.stores,c===null?s.stores=[t]:c.push(t))}function xu(t,s,c,d){s.value=c,s.getSnapshot=d,mu(s)&&pu(t)}function gu(t,s,c){return c(function(){mu(s)&&pu(t)})}function mu(t){var s=t.getSnapshot;t=t.value;try{var c=s();return!V(t,c)}catch{return!0}}function pu(t){var s=Yr(t,1);s!==null&&Ar(s,t,1,-1)}function yu(t){var s=Or();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wa,lastRenderedState:t},s.queue=t,t=t.dispatch=L0.bind(null,Ft,t),[s.memoizedState,t]}function ba(t,s,c,d){return t={tag:t,create:s,destroy:c,deps:d,next:null},s=Ft.updateQueue,s===null?(s={lastEffect:null,stores:null},Ft.updateQueue=s,s.lastEffect=t.next=t):(c=s.lastEffect,c===null?s.lastEffect=t.next=t:(d=c.next,c.next=t,t.next=d,s.lastEffect=t)),t}function wu(){return xr().memoizedState}function ml(t,s,c,d){var m=Or();Ft.flags|=t,m.memoizedState=ba(1|s,c,void 0,d===void 0?null:d)}function pl(t,s,c,d){var m=xr();d=d===void 0?null:d;var y=void 0;if(ln!==null){var S=ln.memoizedState;if(y=S.destroy,d!==null&&_o(d,S.deps)){m.memoizedState=ba(s,c,y,d);return}}Ft.flags|=t,m.memoizedState=ba(1|s,c,y,d)}function bu(t,s){return ml(8390656,8,t,s)}function Po(t,s){return pl(2048,8,t,s)}function vu(t,s){return pl(4,2,t,s)}function Nu(t,s){return pl(4,4,t,s)}function Cu(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Eu(t,s,c){return c=c!=null?c.concat([t]):null,pl(4,4,Cu.bind(null,s,t),c)}function Bo(){}function Au(t,s){var c=xr();s=s===void 0?null:s;var d=c.memoizedState;return d!==null&&s!==null&&_o(s,d[1])?d[0]:(c.memoizedState=[t,s],t)}function Su(t,s){var c=xr();s=s===void 0?null:s;var d=c.memoizedState;return d!==null&&s!==null&&_o(s,d[1])?d[0]:(t=t(),c.memoizedState=[t,s],t)}function ku(t,s,c){return(qs&21)===0?(t.baseState&&(t.baseState=!1,Un=!0),t.memoizedState=c):(V(c,s)||(c=nn(),Ft.lanes|=c,Qs|=c,t.baseState=!0),s)}function P0(t,s){var c=st;st=c!==0&&4>c?c:4,t(!0);var d=Ro.transition;Ro.transition={};try{t(!1),s()}finally{st=c,Ro.transition=d}}function Iu(){return xr().memoizedState}function B0(t,s,c){var d=Cs(t);if(c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},Tu(t))Ru(s,c);else if(c=au(t,s,c,d),c!==null){var m=Mn();Ar(c,t,d,m),_u(c,s,d)}}function L0(t,s,c){var d=Cs(t),m={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Tu(t))Ru(s,m);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var S=s.lastRenderedState,O=y(S,c);if(m.hasEagerState=!0,m.eagerState=O,V(O,S)){var F=s.interleaved;F===null?(m.next=m,Eo(s)):(m.next=F.next,F.next=m),s.interleaved=m;return}}catch{}c=au(t,s,m,d),c!==null&&(m=Mn(),Ar(c,t,d,m),_u(c,s,d))}}function Tu(t){var s=t.alternate;return t===Ft||s!==null&&s===Ft}function Ru(t,s){pa=gl=!0;var c=t.pending;c===null?s.next=s:(s.next=c.next,c.next=s),t.pending=s}function _u(t,s,c){if((c&4194240)!==0){var d=s.lanes;d&=t.pendingLanes,c|=d,s.lanes=c,Wt(t,c)}}var yl={readContext:fr,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},F0={readContext:fr,useCallback:function(t,s){return Or().memoizedState=[t,s===void 0?null:s],t},useContext:fr,useEffect:bu,useImperativeHandle:function(t,s,c){return c=c!=null?c.concat([t]):null,ml(4194308,4,Cu.bind(null,s,t),c)},useLayoutEffect:function(t,s){return ml(4194308,4,t,s)},useInsertionEffect:function(t,s){return ml(4,2,t,s)},useMemo:function(t,s){var c=Or();return s=s===void 0?null:s,t=t(),c.memoizedState=[t,s],t},useReducer:function(t,s,c){var d=Or();return s=c!==void 0?c(s):s,d.memoizedState=d.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},d.queue=t,t=t.dispatch=B0.bind(null,Ft,t),[d.memoizedState,t]},useRef:function(t){var s=Or();return t={current:t},s.memoizedState=t},useState:yu,useDebugValue:Bo,useDeferredValue:function(t){return Or().memoizedState=t},useTransition:function(){var t=yu(!1),s=t[0];return t=P0.bind(null,t[1]),Or().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,c){var d=Ft,m=Or();if(Ot){if(c===void 0)throw Error(x(407));c=c()}else{if(c=s(),fn===null)throw Error(x(349));(qs&30)!==0||fu(d,s,c)}m.memoizedState=c;var y={value:c,getSnapshot:s};return m.queue=y,bu(gu.bind(null,d,y,t),[t]),d.flags|=2048,ba(9,xu.bind(null,d,y,c,s),void 0,null),c},useId:function(){var t=Or(),s=fn.identifierPrefix;if(Ot){var c=Zr,d=Xr;c=(d&~(1<<32-_n(d)-1)).toString(32)+c,s=":"+s+"R"+c,c=ya++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=D0++,s=":"+s+"r"+c.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},U0={readContext:fr,useCallback:Au,useContext:fr,useEffect:Po,useImperativeHandle:Eu,useInsertionEffect:vu,useLayoutEffect:Nu,useMemo:Su,useReducer:Oo,useRef:wu,useState:function(){return Oo(wa)},useDebugValue:Bo,useDeferredValue:function(t){var s=xr();return ku(s,ln.memoizedState,t)},useTransition:function(){var t=Oo(wa)[0],s=xr().memoizedState;return[t,s]},useMutableSource:du,useSyncExternalStore:hu,useId:Iu,unstable_isNewReconciler:!1},W0={readContext:fr,useCallback:Au,useContext:fr,useEffect:Po,useImperativeHandle:Eu,useInsertionEffect:vu,useLayoutEffect:Nu,useMemo:Su,useReducer:Do,useRef:wu,useState:function(){return Do(wa)},useDebugValue:Bo,useDeferredValue:function(t){var s=xr();return ln===null?s.memoizedState=t:ku(s,ln.memoizedState,t)},useTransition:function(){var t=Do(wa)[0],s=xr().memoizedState;return[t,s]},useMutableSource:du,useSyncExternalStore:hu,useId:Iu,unstable_isNewReconciler:!1};function Nr(t,s){if(t&&t.defaultProps){s=z({},s),t=t.defaultProps;for(var c in t)s[c]===void 0&&(s[c]=t[c]);return s}return s}function Lo(t,s,c,d){s=t.memoizedState,c=c(d,s),c=c==null?s:z({},s,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var wl={isMounted:function(t){return(t=t._reactInternals)?Bn(t)===t:!1},enqueueSetState:function(t,s,c){t=t._reactInternals;var d=Mn(),m=Cs(t),y=Kr(d,m);y.payload=s,c!=null&&(y.callback=c),s=ws(t,y,m),s!==null&&(Ar(s,t,m,d),dl(s,t,m))},enqueueReplaceState:function(t,s,c){t=t._reactInternals;var d=Mn(),m=Cs(t),y=Kr(d,m);y.tag=1,y.payload=s,c!=null&&(y.callback=c),s=ws(t,y,m),s!==null&&(Ar(s,t,m,d),dl(s,t,m))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var c=Mn(),d=Cs(t),m=Kr(c,d);m.tag=2,s!=null&&(m.callback=s),s=ws(t,m,d),s!==null&&(Ar(s,t,d,c),dl(s,t,d))}};function ju(t,s,c,d,m,y,S){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,y,S):s.prototype&&s.prototype.isPureReactComponent?!J(c,d)||!J(m,y):!0}function Mu(t,s,c){var d=!1,m=ms,y=s.contextType;return typeof y=="object"&&y!==null?y=fr(y):(m=Fn(s)?Vs:Sn.current,d=s.contextTypes,y=(d=d!=null)?bi(t,m):ms),s=new s(c,y),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=wl,t.stateNode=s,s._reactInternals=t,d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=m,t.__reactInternalMemoizedMaskedChildContext=y),s}function Ou(t,s,c,d){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==t&&wl.enqueueReplaceState(s,s.state,null)}function Fo(t,s,c,d){var m=t.stateNode;m.props=c,m.state=t.memoizedState,m.refs={},Ao(t);var y=s.contextType;typeof y=="object"&&y!==null?m.context=fr(y):(y=Fn(s)?Vs:Sn.current,m.context=bi(t,y)),m.state=t.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Lo(t,s,y,c),m.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(s=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),s!==m.state&&wl.enqueueReplaceState(m,m.state,null),hl(t,c,m,d),m.state=t.memoizedState),typeof m.componentDidMount=="function"&&(t.flags|=4194308)}function Ii(t,s){try{var c="",d=s;do c+=ye(d),d=d.return;while(d);var m=c}catch(y){m=`
Error generating stack: `+y.message+`
`+y.stack}return{value:t,source:s,stack:m,digest:null}}function Uo(t,s,c){return{value:t,source:null,stack:c??null,digest:s??null}}function Wo(t,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var z0=typeof WeakMap=="function"?WeakMap:Map;function Du(t,s,c){c=Kr(-1,c),c.tag=3,c.payload={element:null};var d=s.value;return c.callback=function(){Sl||(Sl=!0,nc=d),Wo(t,s)},c}function Pu(t,s,c){c=Kr(-1,c),c.tag=3;var d=t.type.getDerivedStateFromError;if(typeof d=="function"){var m=s.value;c.payload=function(){return d(m)},c.callback=function(){Wo(t,s)}}var y=t.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(c.callback=function(){Wo(t,s),typeof d!="function"&&(vs===null?vs=new Set([this]):vs.add(this));var S=s.stack;this.componentDidCatch(s.value,{componentStack:S!==null?S:""})}),c}function Bu(t,s,c){var d=t.pingCache;if(d===null){d=t.pingCache=new z0;var m=new Set;d.set(s,m)}else m=d.get(s),m===void 0&&(m=new Set,d.set(s,m));m.has(c)||(m.add(c),t=n1.bind(null,t,s,c),s.then(t,t))}function Lu(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Fu(t,s,c,d,m){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=Kr(-1,1),s.tag=2,ws(c,s,1))),c.lanes|=1),t):(t.flags|=65536,t.lanes=m,t)}var H0=xe.ReactCurrentOwner,Un=!1;function jn(t,s,c,d){s.child=t===null?iu(s,null,c,d):Ei(s,t.child,c,d)}function Uu(t,s,c,d,m){c=c.render;var y=s.ref;return Si(s,m),d=jo(t,s,c,d,y,m),c=Mo(),t!==null&&!Un?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~m,qr(t,s,m)):(Ot&&c&&go(s),s.flags|=1,jn(t,s,d,m),s.child)}function Wu(t,s,c,d,m){if(t===null){var y=c.type;return typeof y=="function"&&!cc(y)&&y.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=y,zu(t,s,y,d,m)):(t=jl(c.type,null,d,s,s.mode,m),t.ref=s.ref,t.return=s,s.child=t)}if(y=t.child,(t.lanes&m)===0){var S=y.memoizedProps;if(c=c.compare,c=c!==null?c:J,c(S,d)&&t.ref===s.ref)return qr(t,s,m)}return s.flags|=1,t=As(y,d),t.ref=s.ref,t.return=s,s.child=t}function zu(t,s,c,d,m){if(t!==null){var y=t.memoizedProps;if(J(y,d)&&t.ref===s.ref)if(Un=!1,s.pendingProps=d=y,(t.lanes&m)!==0)(t.flags&131072)!==0&&(Un=!0);else return s.lanes=t.lanes,qr(t,s,m)}return zo(t,s,c,d,m)}function Hu(t,s,c){var d=s.pendingProps,m=d.children,y=t!==null?t.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(Ri,tr),tr|=c;else{if((c&1073741824)===0)return t=y!==null?y.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Rt(Ri,tr),tr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:c,Rt(Ri,tr),tr|=d}else y!==null?(d=y.baseLanes|c,s.memoizedState=null):d=c,Rt(Ri,tr),tr|=d;return jn(t,s,m,c),s.child}function Gu(t,s){var c=s.ref;(t===null&&c!==null||t!==null&&t.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function zo(t,s,c,d,m){var y=Fn(c)?Vs:Sn.current;return y=bi(s,y),Si(s,m),c=jo(t,s,c,d,y,m),d=Mo(),t!==null&&!Un?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~m,qr(t,s,m)):(Ot&&d&&go(s),s.flags|=1,jn(t,s,c,m),s.child)}function Vu(t,s,c,d,m){if(Fn(c)){var y=!0;rl(s)}else y=!1;if(Si(s,m),s.stateNode===null)vl(t,s),Mu(s,c,d),Fo(s,c,d,m),d=!0;else if(t===null){var S=s.stateNode,O=s.memoizedProps;S.props=O;var F=S.context,te=c.contextType;typeof te=="object"&&te!==null?te=fr(te):(te=Fn(c)?Vs:Sn.current,te=bi(s,te));var ve=c.getDerivedStateFromProps,Ne=typeof ve=="function"||typeof S.getSnapshotBeforeUpdate=="function";Ne||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==d||F!==te)&&Ou(s,S,d,te),ys=!1;var we=s.memoizedState;S.state=we,hl(s,d,S,m),F=s.memoizedState,O!==d||we!==F||Ln.current||ys?(typeof ve=="function"&&(Lo(s,c,ve,d),F=s.memoizedState),(O=ys||ju(s,c,O,d,we,F,te))?(Ne||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(s.flags|=4194308)):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=F),S.props=d,S.state=F,S.context=te,d=O):(typeof S.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{S=s.stateNode,lu(t,s),O=s.memoizedProps,te=s.type===s.elementType?O:Nr(s.type,O),S.props=te,Ne=s.pendingProps,we=S.context,F=c.contextType,typeof F=="object"&&F!==null?F=fr(F):(F=Fn(c)?Vs:Sn.current,F=bi(s,F));var De=c.getDerivedStateFromProps;(ve=typeof De=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(O!==Ne||we!==F)&&Ou(s,S,d,F),ys=!1,we=s.memoizedState,S.state=we,hl(s,d,S,m);var We=s.memoizedState;O!==Ne||we!==We||Ln.current||ys?(typeof De=="function"&&(Lo(s,c,De,d),We=s.memoizedState),(te=ys||ju(s,c,te,d,we,We,F)||!1)?(ve||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(d,We,F),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(d,We,F)),typeof S.componentDidUpdate=="function"&&(s.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof S.componentDidUpdate!="function"||O===t.memoizedProps&&we===t.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&we===t.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=We),S.props=d,S.state=We,S.context=F,d=te):(typeof S.componentDidUpdate!="function"||O===t.memoizedProps&&we===t.memoizedState||(s.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&we===t.memoizedState||(s.flags|=1024),d=!1)}return Ho(t,s,c,d,y,m)}function Ho(t,s,c,d,m,y){Gu(t,s);var S=(s.flags&128)!==0;if(!d&&!S)return m&&qc(s,c,!1),qr(t,s,y);d=s.stateNode,H0.current=s;var O=S&&typeof c.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,t!==null&&S?(s.child=Ei(s,t.child,null,y),s.child=Ei(s,null,O,y)):jn(t,s,O,y),s.memoizedState=d.state,m&&qc(s,c,!0),s.child}function Xu(t){var s=t.stateNode;s.pendingContext?Yc(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Yc(t,s.context,!1),So(t,s.containerInfo)}function Zu(t,s,c,d,m){return Ci(),wo(m),s.flags|=256,jn(t,s,c,d),s.child}var Go={dehydrated:null,treeContext:null,retryLane:0};function Vo(t){return{baseLanes:t,cachePool:null,transitions:null}}function Yu(t,s,c){var d=s.pendingProps,m=Lt.current,y=!1,S=(s.flags&128)!==0,O;if((O=S)||(O=t!==null&&t.memoizedState===null?!1:(m&2)!==0),O?(y=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(m|=1),Rt(Lt,m&1),t===null)return yo(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(S=d.children,t=d.fallback,y?(d=s.mode,y=s.child,S={mode:"hidden",children:S},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=S):y=Ml(S,d,0,null),t=ti(t,d,c,null),y.return=s,t.return=s,y.sibling=t,s.child=y,s.child.memoizedState=Vo(c),s.memoizedState=Go,t):Xo(s,S));if(m=t.memoizedState,m!==null&&(O=m.dehydrated,O!==null))return G0(t,s,S,d,O,m,c);if(y){y=d.fallback,S=s.mode,m=t.child,O=m.sibling;var F={mode:"hidden",children:d.children};return(S&1)===0&&s.child!==m?(d=s.child,d.childLanes=0,d.pendingProps=F,s.deletions=null):(d=As(m,F),d.subtreeFlags=m.subtreeFlags&14680064),O!==null?y=As(O,y):(y=ti(y,S,c,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,S=t.child.memoizedState,S=S===null?Vo(c):{baseLanes:S.baseLanes|c,cachePool:null,transitions:S.transitions},y.memoizedState=S,y.childLanes=t.childLanes&~c,s.memoizedState=Go,d}return y=t.child,t=y.sibling,d=As(y,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=c),d.return=s,d.sibling=null,t!==null&&(c=s.deletions,c===null?(s.deletions=[t],s.flags|=16):c.push(t)),s.child=d,s.memoizedState=null,d}function Xo(t,s){return s=Ml({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function bl(t,s,c,d){return d!==null&&wo(d),Ei(s,t.child,null,c),t=Xo(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function G0(t,s,c,d,m,y,S){if(c)return s.flags&256?(s.flags&=-257,d=Uo(Error(x(422))),bl(t,s,S,d)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(y=d.fallback,m=s.mode,d=Ml({mode:"visible",children:d.children},m,0,null),y=ti(y,m,S,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,(s.mode&1)!==0&&Ei(s,t.child,null,S),s.child.memoizedState=Vo(S),s.memoizedState=Go,y);if((s.mode&1)===0)return bl(t,s,S,null);if(m.data==="$!"){if(d=m.nextSibling&&m.nextSibling.dataset,d)var O=d.dgst;return d=O,y=Error(x(419)),d=Uo(y,d,void 0),bl(t,s,S,d)}if(O=(S&t.childLanes)!==0,Un||O){if(d=fn,d!==null){switch(S&-S){case 4:m=2;break;case 16:m=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:m=32;break;case 536870912:m=268435456;break;default:m=0}m=(m&(d.suspendedLanes|S))!==0?0:m,m!==0&&m!==y.retryLane&&(y.retryLane=m,Yr(t,m),Ar(d,t,m,-1))}return oc(),d=Uo(Error(x(421))),bl(t,s,S,d)}return m.data==="$?"?(s.flags|=128,s.child=t.child,s=r1.bind(null,t),m._reactRetry=s,null):(t=y.treeContext,er=xs(m.nextSibling),$n=s,Ot=!0,vr=null,t!==null&&(dr[hr++]=Xr,dr[hr++]=Zr,dr[hr++]=Xs,Xr=t.id,Zr=t.overflow,Xs=s),s=Xo(s,d.children),s.flags|=4096,s)}function Ku(t,s,c){t.lanes|=s;var d=t.alternate;d!==null&&(d.lanes|=s),Co(t.return,s,c)}function Zo(t,s,c,d,m){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:m}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=c,y.tailMode=m)}function qu(t,s,c){var d=s.pendingProps,m=d.revealOrder,y=d.tail;if(jn(t,s,d.children,c),d=Lt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ku(t,c,s);else if(t.tag===19)Ku(t,c,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}d&=1}if(Rt(Lt,d),(s.mode&1)===0)s.memoizedState=null;else switch(m){case"forwards":for(c=s.child,m=null;c!==null;)t=c.alternate,t!==null&&fl(t)===null&&(m=c),c=c.sibling;c=m,c===null?(m=s.child,s.child=null):(m=c.sibling,c.sibling=null),Zo(s,!1,m,c,y);break;case"backwards":for(c=null,m=s.child,s.child=null;m!==null;){if(t=m.alternate,t!==null&&fl(t)===null){s.child=m;break}t=m.sibling,m.sibling=c,c=m,m=t}Zo(s,!0,c,null,y);break;case"together":Zo(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function vl(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function qr(t,s,c){if(t!==null&&(s.dependencies=t.dependencies),Qs|=s.lanes,(c&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(x(153));if(s.child!==null){for(t=s.child,c=As(t,t.pendingProps),s.child=c,c.return=s;t.sibling!==null;)t=t.sibling,c=c.sibling=As(t,t.pendingProps),c.return=s;c.sibling=null}return s.child}function V0(t,s,c){switch(s.tag){case 3:Xu(s),Ci();break;case 5:uu(s);break;case 1:Fn(s.type)&&rl(s);break;case 4:So(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,m=s.memoizedProps.value;Rt(cl,d._currentValue),d._currentValue=m;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Rt(Lt,Lt.current&1),s.flags|=128,null):(c&s.child.childLanes)!==0?Yu(t,s,c):(Rt(Lt,Lt.current&1),t=qr(t,s,c),t!==null?t.sibling:null);Rt(Lt,Lt.current&1);break;case 19:if(d=(c&s.childLanes)!==0,(t.flags&128)!==0){if(d)return qu(t,s,c);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),Rt(Lt,Lt.current),d)break;return null;case 22:case 23:return s.lanes=0,Hu(t,s,c)}return qr(t,s,c)}var Qu,Yo,Ju,$u;Qu=function(t,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Yo=function(){},Ju=function(t,s,c,d){var m=t.memoizedProps;if(m!==d){t=s.stateNode,Ks(Mr.current);var y=null;switch(c){case"input":m=Gn(t,m),d=Gn(t,d),y=[];break;case"select":m=z({},m,{value:void 0}),d=z({},d,{value:void 0}),y=[];break;case"textarea":m=es(t,m),d=es(t,d),y=[];break;default:typeof m.onClick!="function"&&typeof d.onClick=="function"&&(t.onclick=el)}pt(c,d);var S;c=null;for(te in m)if(!d.hasOwnProperty(te)&&m.hasOwnProperty(te)&&m[te]!=null)if(te==="style"){var O=m[te];for(S in O)O.hasOwnProperty(S)&&(c||(c={}),c[S]="")}else te!=="dangerouslySetInnerHTML"&&te!=="children"&&te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&te!=="autoFocus"&&(N.hasOwnProperty(te)?y||(y=[]):(y=y||[]).push(te,null));for(te in d){var F=d[te];if(O=m?.[te],d.hasOwnProperty(te)&&F!==O&&(F!=null||O!=null))if(te==="style")if(O){for(S in O)!O.hasOwnProperty(S)||F&&F.hasOwnProperty(S)||(c||(c={}),c[S]="");for(S in F)F.hasOwnProperty(S)&&O[S]!==F[S]&&(c||(c={}),c[S]=F[S])}else c||(y||(y=[]),y.push(te,c)),c=F;else te==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,O=O?O.__html:void 0,F!=null&&O!==F&&(y=y||[]).push(te,F)):te==="children"?typeof F!="string"&&typeof F!="number"||(y=y||[]).push(te,""+F):te!=="suppressContentEditableWarning"&&te!=="suppressHydrationWarning"&&(N.hasOwnProperty(te)?(F!=null&&te==="onScroll"&&_t("scroll",t),y||O===F||(y=[])):(y=y||[]).push(te,F))}c&&(y=y||[]).push("style",c);var te=y;(s.updateQueue=te)&&(s.flags|=4)}},$u=function(t,s,c,d){c!==d&&(s.flags|=4)};function va(t,s){if(!Ot)switch(t.tailMode){case"hidden":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function In(t){var s=t.alternate!==null&&t.alternate.child===t.child,c=0,d=0;if(s)for(var m=t.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags&14680064,d|=m.flags&14680064,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)c|=m.lanes|m.childLanes,d|=m.subtreeFlags,d|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=d,t.childLanes=c,s}function X0(t,s,c){var d=s.pendingProps;switch(mo(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(s),null;case 1:return Fn(s.type)&&nl(),In(s),null;case 3:return d=s.stateNode,ki(),jt(Ln),jt(Sn),To(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(t===null||t.child===null)&&(ll(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,vr!==null&&(ic(vr),vr=null))),Yo(t,s),In(s),null;case 5:ko(s);var m=Ks(ma.current);if(c=s.type,t!==null&&s.stateNode!=null)Ju(t,s,c,d,m),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(x(166));return In(s),null}if(t=Ks(Mr.current),ll(s)){d=s.stateNode,c=s.type;var y=s.memoizedProps;switch(d[jr]=s,d[da]=y,t=(s.mode&1)!==0,c){case"dialog":_t("cancel",d),_t("close",d);break;case"iframe":case"object":case"embed":_t("load",d);break;case"video":case"audio":for(m=0;m<oa.length;m++)_t(oa[m],d);break;case"source":_t("error",d);break;case"img":case"image":case"link":_t("error",d),_t("load",d);break;case"details":_t("toggle",d);break;case"input":vn(d,y),_t("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},_t("invalid",d);break;case"textarea":Ui(d,y),_t("invalid",d)}pt(c,y),m=null;for(var S in y)if(y.hasOwnProperty(S)){var O=y[S];S==="children"?typeof O=="string"?d.textContent!==O&&(y.suppressHydrationWarning!==!0&&$a(d.textContent,O,t),m=["children",O]):typeof O=="number"&&d.textContent!==""+O&&(y.suppressHydrationWarning!==!0&&$a(d.textContent,O,t),m=["children",""+O]):N.hasOwnProperty(S)&&O!=null&&S==="onScroll"&&_t("scroll",d)}switch(c){case"input":Qe(d),vt(d,y,!0);break;case"textarea":Qe(d),si(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=el)}d=m,s.updateQueue=d,d!==null&&(s.flags|=4)}else{S=m.nodeType===9?m:m.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=On(c)),t==="http://www.w3.org/1999/xhtml"?c==="script"?(t=S.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof d.is=="string"?t=S.createElement(c,{is:d.is}):(t=S.createElement(c),c==="select"&&(S=t,d.multiple?S.multiple=!0:d.size&&(S.size=d.size))):t=S.createElementNS(t,c),t[jr]=s,t[da]=d,Qu(t,s,!1,!1),s.stateNode=t;e:{switch(S=St(c,d),c){case"dialog":_t("cancel",t),_t("close",t),m=d;break;case"iframe":case"object":case"embed":_t("load",t),m=d;break;case"video":case"audio":for(m=0;m<oa.length;m++)_t(oa[m],t);m=d;break;case"source":_t("error",t),m=d;break;case"img":case"image":case"link":_t("error",t),_t("load",t),m=d;break;case"details":_t("toggle",t),m=d;break;case"input":vn(t,d),m=Gn(t,d),_t("invalid",t);break;case"option":m=d;break;case"select":t._wrapperState={wasMultiple:!!d.multiple},m=z({},d,{value:void 0}),_t("invalid",t);break;case"textarea":Ui(t,d),m=es(t,d),_t("invalid",t);break;default:m=d}pt(c,m),O=m;for(y in O)if(O.hasOwnProperty(y)){var F=O[y];y==="style"?Te(t,F):y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&cn(t,F)):y==="children"?typeof F=="string"?(c!=="textarea"||F!=="")&&ts(t,F):typeof F=="number"&&ts(t,""+F):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(N.hasOwnProperty(y)?F!=null&&y==="onScroll"&&_t("scroll",t):F!=null&&oe(t,y,F,S))}switch(c){case"input":Qe(t),vt(t,d,!1);break;case"textarea":Qe(t),si(t);break;case"option":d.value!=null&&t.setAttribute("value",""+je(d.value));break;case"select":t.multiple=!!d.multiple,y=d.value,y!=null?Le(t,!!d.multiple,y,!1):d.defaultValue!=null&&Le(t,!!d.multiple,d.defaultValue,!0);break;default:typeof m.onClick=="function"&&(t.onclick=el)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return In(s),null;case 6:if(t&&s.stateNode!=null)$u(t,s,t.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(x(166));if(c=Ks(ma.current),Ks(Mr.current),ll(s)){if(d=s.stateNode,c=s.memoizedProps,d[jr]=s,(y=d.nodeValue!==c)&&(t=$n,t!==null))switch(t.tag){case 3:$a(d.nodeValue,c,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$a(d.nodeValue,c,(t.mode&1)!==0)}y&&(s.flags|=4)}else d=(c.nodeType===9?c:c.ownerDocument).createTextNode(d),d[jr]=s,s.stateNode=d}return In(s),null;case 13:if(jt(Lt),d=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ot&&er!==null&&(s.mode&1)!==0&&(s.flags&128)===0)nu(),Ci(),s.flags|=98560,y=!1;else if(y=ll(s),d!==null&&d.dehydrated!==null){if(t===null){if(!y)throw Error(x(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(x(317));y[jr]=s}else Ci(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;In(s),y=!1}else vr!==null&&(ic(vr),vr=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=c,s):(d=d!==null,d!==(t!==null&&t.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(Lt.current&1)!==0?on===0&&(on=3):oc())),s.updateQueue!==null&&(s.flags|=4),In(s),null);case 4:return ki(),Yo(t,s),t===null&&ca(s.stateNode.containerInfo),In(s),null;case 10:return No(s.type._context),In(s),null;case 17:return Fn(s.type)&&nl(),In(s),null;case 19:if(jt(Lt),y=s.memoizedState,y===null)return In(s),null;if(d=(s.flags&128)!==0,S=y.rendering,S===null)if(d)va(y,!1);else{if(on!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(S=fl(t),S!==null){for(s.flags|=128,va(y,!1),d=S.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=c,c=s.child;c!==null;)y=c,t=d,y.flags&=14680066,S=y.alternate,S===null?(y.childLanes=0,y.lanes=t,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=S.childLanes,y.lanes=S.lanes,y.child=S.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=S.memoizedProps,y.memoizedState=S.memoizedState,y.updateQueue=S.updateQueue,y.type=S.type,t=S.dependencies,y.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),c=c.sibling;return Rt(Lt,Lt.current&1|2),s.child}t=t.sibling}y.tail!==null&&wt()>_i&&(s.flags|=128,d=!0,va(y,!1),s.lanes=4194304)}else{if(!d)if(t=fl(S),t!==null){if(s.flags|=128,d=!0,c=t.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),va(y,!0),y.tail===null&&y.tailMode==="hidden"&&!S.alternate&&!Ot)return In(s),null}else 2*wt()-y.renderingStartTime>_i&&c!==1073741824&&(s.flags|=128,d=!0,va(y,!1),s.lanes=4194304);y.isBackwards?(S.sibling=s.child,s.child=S):(c=y.last,c!==null?c.sibling=S:s.child=S,y.last=S)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=wt(),s.sibling=null,c=Lt.current,Rt(Lt,d?c&1|2:c&1),s):(In(s),null);case 22:case 23:return lc(),d=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(tr&1073741824)!==0&&(In(s),s.subtreeFlags&6&&(s.flags|=8192)):In(s),null;case 24:return null;case 25:return null}throw Error(x(156,s.tag))}function Z0(t,s){switch(mo(s),s.tag){case 1:return Fn(s.type)&&nl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return ki(),jt(Ln),jt(Sn),To(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return ko(s),null;case 13:if(jt(Lt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(x(340));Ci()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return jt(Lt),null;case 4:return ki(),null;case 10:return No(s.type._context),null;case 22:case 23:return lc(),null;case 24:return null;default:return null}}var Nl=!1,Tn=!1,Y0=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Ti(t,s){var c=t.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d){Ht(t,s,d)}else c.current=null}function Ko(t,s,c){try{c()}catch(d){Ht(t,s,d)}}var ed=!1;function K0(t,s){if(ao=Rr,t=lt(),et(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var m=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var S=0,O=-1,F=-1,te=0,ve=0,Ne=t,we=null;t:for(;;){for(var De;Ne!==c||m!==0&&Ne.nodeType!==3||(O=S+m),Ne!==y||d!==0&&Ne.nodeType!==3||(F=S+d),Ne.nodeType===3&&(S+=Ne.nodeValue.length),(De=Ne.firstChild)!==null;)we=Ne,Ne=De;for(;;){if(Ne===t)break t;if(we===c&&++te===m&&(O=S),we===y&&++ve===d&&(F=S),(De=Ne.nextSibling)!==null)break;Ne=we,we=Ne.parentNode}Ne=De}c=O===-1||F===-1?null:{start:O,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(lo={focusedElem:t,selectionRange:c},Rr=!1,Ue=s;Ue!==null;)if(s=Ue,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ue=t;else for(;Ue!==null;){s=Ue;try{var We=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(We!==null){var ze=We.memoizedProps,qt=We.memoizedState,Y=s.stateNode,H=Y.getSnapshotBeforeUpdate(s.elementType===s.type?ze:Nr(s.type,ze),qt);Y.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var Q=s.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(Ie){Ht(s,s.return,Ie)}if(t=s.sibling,t!==null){t.return=s.return,Ue=t;break}Ue=s.return}return We=ed,ed=!1,We}function Na(t,s,c){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var m=d=d.next;do{if((m.tag&t)===t){var y=m.destroy;m.destroy=void 0,y!==void 0&&Ko(s,c,y)}m=m.next}while(m!==d)}}function Cl(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&t)===t){var d=c.create;c.destroy=d()}c=c.next}while(c!==s)}}function qo(t){var s=t.ref;if(s!==null){var c=t.stateNode;t.tag,t=c,typeof s=="function"?s(t):s.current=t}}function td(t){var s=t.alternate;s!==null&&(t.alternate=null,td(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[jr],delete s[da],delete s[ho],delete s[_0],delete s[j0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nd(t){return t.tag===5||t.tag===3||t.tag===4}function rd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qo(t,s,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(t,s):c.insertBefore(t,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(t,c)):(s=c,s.appendChild(t)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=el));else if(d!==4&&(t=t.child,t!==null))for(Qo(t,s,c),t=t.sibling;t!==null;)Qo(t,s,c),t=t.sibling}function Jo(t,s,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,s?c.insertBefore(t,s):c.appendChild(t);else if(d!==4&&(t=t.child,t!==null))for(Jo(t,s,c),t=t.sibling;t!==null;)Jo(t,s,c),t=t.sibling}var wn=null,Cr=!1;function bs(t,s,c){for(c=c.child;c!==null;)sd(t,s,c),c=c.sibling}function sd(t,s,c){if(rt&&typeof rt.onCommitFiberUnmount=="function")try{rt.onCommitFiberUnmount(ft,c)}catch{}switch(c.tag){case 5:Tn||Ti(c,s);case 6:var d=wn,m=Cr;wn=null,bs(t,s,c),wn=d,Cr=m,wn!==null&&(Cr?(t=wn,c=c.stateNode,t.nodeType===8?t.parentNode.removeChild(c):t.removeChild(c)):wn.removeChild(c.stateNode));break;case 18:wn!==null&&(Cr?(t=wn,c=c.stateNode,t.nodeType===8?uo(t.parentNode,c):t.nodeType===1&&uo(t,c),yr(t)):uo(wn,c.stateNode));break;case 4:d=wn,m=Cr,wn=c.stateNode.containerInfo,Cr=!0,bs(t,s,c),wn=d,Cr=m;break;case 0:case 11:case 14:case 15:if(!Tn&&(d=c.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){m=d=d.next;do{var y=m,S=y.destroy;y=y.tag,S!==void 0&&((y&2)!==0||(y&4)!==0)&&Ko(c,s,S),m=m.next}while(m!==d)}bs(t,s,c);break;case 1:if(!Tn&&(Ti(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(O){Ht(c,s,O)}bs(t,s,c);break;case 21:bs(t,s,c);break;case 22:c.mode&1?(Tn=(d=Tn)||c.memoizedState!==null,bs(t,s,c),Tn=d):bs(t,s,c);break;default:bs(t,s,c)}}function id(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var c=t.stateNode;c===null&&(c=t.stateNode=new Y0),s.forEach(function(d){var m=s1.bind(null,t,d);c.has(d)||(c.add(d),d.then(m,m))})}}function Er(t,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var m=c[d];try{var y=t,S=s,O=S;e:for(;O!==null;){switch(O.tag){case 5:wn=O.stateNode,Cr=!1;break e;case 3:wn=O.stateNode.containerInfo,Cr=!0;break e;case 4:wn=O.stateNode.containerInfo,Cr=!0;break e}O=O.return}if(wn===null)throw Error(x(160));sd(y,S,m),wn=null,Cr=!1;var F=m.alternate;F!==null&&(F.return=null),m.return=null}catch(te){Ht(m,s,te)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)ad(s,t),s=s.sibling}function ad(t,s){var c=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Er(s,t),Dr(t),d&4){try{Na(3,t,t.return),Cl(3,t)}catch(ze){Ht(t,t.return,ze)}try{Na(5,t,t.return)}catch(ze){Ht(t,t.return,ze)}}break;case 1:Er(s,t),Dr(t),d&512&&c!==null&&Ti(c,c.return);break;case 5:if(Er(s,t),Dr(t),d&512&&c!==null&&Ti(c,c.return),t.flags&32){var m=t.stateNode;try{ts(m,"")}catch(ze){Ht(t,t.return,ze)}}if(d&4&&(m=t.stateNode,m!=null)){var y=t.memoizedProps,S=c!==null?c.memoizedProps:y,O=t.type,F=t.updateQueue;if(t.updateQueue=null,F!==null)try{O==="input"&&y.type==="radio"&&y.name!=null&&Rn(m,y),St(O,S);var te=St(O,y);for(S=0;S<F.length;S+=2){var ve=F[S],Ne=F[S+1];ve==="style"?Te(m,Ne):ve==="dangerouslySetInnerHTML"?cn(m,Ne):ve==="children"?ts(m,Ne):oe(m,ve,Ne,te)}switch(O){case"input":Dt(m,y);break;case"textarea":ir(m,y);break;case"select":var we=m._wrapperState.wasMultiple;m._wrapperState.wasMultiple=!!y.multiple;var De=y.value;De!=null?Le(m,!!y.multiple,De,!1):we!==!!y.multiple&&(y.defaultValue!=null?Le(m,!!y.multiple,y.defaultValue,!0):Le(m,!!y.multiple,y.multiple?[]:"",!1))}m[da]=y}catch(ze){Ht(t,t.return,ze)}}break;case 6:if(Er(s,t),Dr(t),d&4){if(t.stateNode===null)throw Error(x(162));m=t.stateNode,y=t.memoizedProps;try{m.nodeValue=y}catch(ze){Ht(t,t.return,ze)}}break;case 3:if(Er(s,t),Dr(t),d&4&&c!==null&&c.memoizedState.isDehydrated)try{yr(s.containerInfo)}catch(ze){Ht(t,t.return,ze)}break;case 4:Er(s,t),Dr(t);break;case 13:Er(s,t),Dr(t),m=t.child,m.flags&8192&&(y=m.memoizedState!==null,m.stateNode.isHidden=y,!y||m.alternate!==null&&m.alternate.memoizedState!==null||(tc=wt())),d&4&&id(t);break;case 22:if(ve=c!==null&&c.memoizedState!==null,t.mode&1?(Tn=(te=Tn)||ve,Er(s,t),Tn=te):Er(s,t),Dr(t),d&8192){if(te=t.memoizedState!==null,(t.stateNode.isHidden=te)&&!ve&&(t.mode&1)!==0)for(Ue=t,ve=t.child;ve!==null;){for(Ne=Ue=ve;Ue!==null;){switch(we=Ue,De=we.child,we.tag){case 0:case 11:case 14:case 15:Na(4,we,we.return);break;case 1:Ti(we,we.return);var We=we.stateNode;if(typeof We.componentWillUnmount=="function"){d=we,c=we.return;try{s=d,We.props=s.memoizedProps,We.state=s.memoizedState,We.componentWillUnmount()}catch(ze){Ht(d,c,ze)}}break;case 5:Ti(we,we.return);break;case 22:if(we.memoizedState!==null){cd(Ne);continue}}De!==null?(De.return=we,Ue=De):cd(Ne)}ve=ve.sibling}e:for(ve=null,Ne=t;;){if(Ne.tag===5){if(ve===null){ve=Ne;try{m=Ne.stateNode,te?(y=m.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(O=Ne.stateNode,F=Ne.memoizedProps.style,S=F!=null&&F.hasOwnProperty("display")?F.display:null,O.style.display=Pt("display",S))}catch(ze){Ht(t,t.return,ze)}}}else if(Ne.tag===6){if(ve===null)try{Ne.stateNode.nodeValue=te?"":Ne.memoizedProps}catch(ze){Ht(t,t.return,ze)}}else if((Ne.tag!==22&&Ne.tag!==23||Ne.memoizedState===null||Ne===t)&&Ne.child!==null){Ne.child.return=Ne,Ne=Ne.child;continue}if(Ne===t)break e;for(;Ne.sibling===null;){if(Ne.return===null||Ne.return===t)break e;ve===Ne&&(ve=null),Ne=Ne.return}ve===Ne&&(ve=null),Ne.sibling.return=Ne.return,Ne=Ne.sibling}}break;case 19:Er(s,t),Dr(t),d&4&&id(t);break;case 21:break;default:Er(s,t),Dr(t)}}function Dr(t){var s=t.flags;if(s&2){try{e:{for(var c=t.return;c!==null;){if(nd(c)){var d=c;break e}c=c.return}throw Error(x(160))}switch(d.tag){case 5:var m=d.stateNode;d.flags&32&&(ts(m,""),d.flags&=-33);var y=rd(t);Jo(t,y,m);break;case 3:case 4:var S=d.stateNode.containerInfo,O=rd(t);Qo(t,O,S);break;default:throw Error(x(161))}}catch(F){Ht(t,t.return,F)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function q0(t,s,c){Ue=t,ld(t)}function ld(t,s,c){for(var d=(t.mode&1)!==0;Ue!==null;){var m=Ue,y=m.child;if(m.tag===22&&d){var S=m.memoizedState!==null||Nl;if(!S){var O=m.alternate,F=O!==null&&O.memoizedState!==null||Tn;O=Nl;var te=Tn;if(Nl=S,(Tn=F)&&!te)for(Ue=m;Ue!==null;)S=Ue,F=S.child,S.tag===22&&S.memoizedState!==null?ud(m):F!==null?(F.return=S,Ue=F):ud(m);for(;y!==null;)Ue=y,ld(y),y=y.sibling;Ue=m,Nl=O,Tn=te}od(t)}else(m.subtreeFlags&8772)!==0&&y!==null?(y.return=m,Ue=y):od(t)}}function od(t){for(;Ue!==null;){var s=Ue;if((s.flags&8772)!==0){var c=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Tn||Cl(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Tn)if(c===null)d.componentDidMount();else{var m=s.elementType===s.type?c.memoizedProps:Nr(s.type,c.memoizedProps);d.componentDidUpdate(m,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&cu(s,y,d);break;case 3:var S=s.updateQueue;if(S!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}cu(s,S,c)}break;case 5:var O=s.stateNode;if(c===null&&s.flags&4){c=O;var F=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var te=s.alternate;if(te!==null){var ve=te.memoizedState;if(ve!==null){var Ne=ve.dehydrated;Ne!==null&&yr(Ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}Tn||s.flags&512&&qo(s)}catch(we){Ht(s,s.return,we)}}if(s===t){Ue=null;break}if(c=s.sibling,c!==null){c.return=s.return,Ue=c;break}Ue=s.return}}function cd(t){for(;Ue!==null;){var s=Ue;if(s===t){Ue=null;break}var c=s.sibling;if(c!==null){c.return=s.return,Ue=c;break}Ue=s.return}}function ud(t){for(;Ue!==null;){var s=Ue;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{Cl(4,s)}catch(F){Ht(s,c,F)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var m=s.return;try{d.componentDidMount()}catch(F){Ht(s,m,F)}}var y=s.return;try{qo(s)}catch(F){Ht(s,y,F)}break;case 5:var S=s.return;try{qo(s)}catch(F){Ht(s,S,F)}}}catch(F){Ht(s,s.return,F)}if(s===t){Ue=null;break}var O=s.sibling;if(O!==null){O.return=s.return,Ue=O;break}Ue=s.return}}var Q0=Math.ceil,El=xe.ReactCurrentDispatcher,$o=xe.ReactCurrentOwner,gr=xe.ReactCurrentBatchConfig,gt=0,fn=null,en=null,bn=0,tr=0,Ri=gs(0),on=0,Ca=null,Qs=0,Al=0,ec=0,Ea=null,Wn=null,tc=0,_i=1/0,Qr=null,Sl=!1,nc=null,vs=null,kl=!1,Ns=null,Il=0,Aa=0,rc=null,Tl=-1,Rl=0;function Mn(){return(gt&6)!==0?wt():Tl!==-1?Tl:Tl=wt()}function Cs(t){return(t.mode&1)===0?1:(gt&2)!==0&&bn!==0?bn&-bn:O0.transition!==null?(Rl===0&&(Rl=nn()),Rl):(t=st,t!==0||(t=window.event,t=t===void 0?16:Ji(t.type)),t)}function Ar(t,s,c,d){if(50<Aa)throw Aa=0,rc=null,Error(x(185));R(t,c,d),((gt&2)===0||t!==fn)&&(t===fn&&((gt&2)===0&&(Al|=c),on===4&&Es(t,bn)),zn(t,d),c===1&&gt===0&&(s.mode&1)===0&&(_i=wt()+500,sl&&ps()))}function zn(t,s){var c=t.callbackNode;ss(t,s);var d=Kn(t,t===fn?bn:0);if(d===0)c!==null&&un(c),t.callbackNode=null,t.callbackPriority=0;else if(s=d&-d,t.callbackPriority!==s){if(c!=null&&un(c),s===1)t.tag===0?M0(hd.bind(null,t)):Qc(hd.bind(null,t)),T0(function(){(gt&6)===0&&ps()}),c=null;else{switch(Fa(d)){case 1:c=ge;break;case 4:c=Ba;break;case 16:c=Et;break;case 536870912:c=La;break;default:c=Et}c=bd(c,dd.bind(null,t))}t.callbackPriority=s,t.callbackNode=c}}function dd(t,s){if(Tl=-1,Rl=0,(gt&6)!==0)throw Error(x(327));var c=t.callbackNode;if(ji()&&t.callbackNode!==c)return null;var d=Kn(t,t===fn?bn:0);if(d===0)return null;if((d&30)!==0||(d&t.expiredLanes)!==0||s)s=_l(t,d);else{s=d;var m=gt;gt|=2;var y=xd();(fn!==t||bn!==s)&&(Qr=null,_i=wt()+500,$s(t,s));do try{e1();break}catch(O){fd(t,O)}while(!0);vo(),El.current=y,gt=m,en!==null?s=0:(fn=null,bn=0,s=on)}if(s!==0){if(s===2&&(m=bt(t),m!==0&&(d=m,s=sc(t,m))),s===1)throw c=Ca,$s(t,0),Es(t,d),zn(t,wt()),c;if(s===6)Es(t,d);else{if(m=t.current.alternate,(d&30)===0&&!J0(m)&&(s=_l(t,d),s===2&&(y=bt(t),y!==0&&(d=y,s=sc(t,y))),s===1))throw c=Ca,$s(t,0),Es(t,d),zn(t,wt()),c;switch(t.finishedWork=m,t.finishedLanes=d,s){case 0:case 1:throw Error(x(345));case 2:ei(t,Wn,Qr);break;case 3:if(Es(t,d),(d&130023424)===d&&(s=tc+500-wt(),10<s)){if(Kn(t,0)!==0)break;if(m=t.suspendedLanes,(m&d)!==d){Mn(),t.pingedLanes|=t.suspendedLanes&m;break}t.timeoutHandle=co(ei.bind(null,t,Wn,Qr),s);break}ei(t,Wn,Qr);break;case 4:if(Es(t,d),(d&4194240)===d)break;for(s=t.eventTimes,m=-1;0<d;){var S=31-_n(d);y=1<<S,S=s[S],S>m&&(m=S),d&=~y}if(d=m,d=wt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Q0(d/1960))-d,10<d){t.timeoutHandle=co(ei.bind(null,t,Wn,Qr),d);break}ei(t,Wn,Qr);break;case 5:ei(t,Wn,Qr);break;default:throw Error(x(329))}}}return zn(t,wt()),t.callbackNode===c?dd.bind(null,t):null}function sc(t,s){var c=Ea;return t.current.memoizedState.isDehydrated&&($s(t,s).flags|=256),t=_l(t,s),t!==2&&(s=Wn,Wn=c,s!==null&&ic(s)),t}function ic(t){Wn===null?Wn=t:Wn.push.apply(Wn,t)}function J0(t){for(var s=t;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d=0;d<c.length;d++){var m=c[d],y=m.getSnapshot;m=m.value;try{if(!V(y(),m))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Es(t,s){for(s&=~ec,s&=~Al,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var c=31-_n(s),d=1<<c;t[c]=-1,s&=~d}}function hd(t){if((gt&6)!==0)throw Error(x(327));ji();var s=Kn(t,0);if((s&1)===0)return zn(t,wt()),null;var c=_l(t,s);if(t.tag!==0&&c===2){var d=bt(t);d!==0&&(s=d,c=sc(t,d))}if(c===1)throw c=Ca,$s(t,0),Es(t,s),zn(t,wt()),c;if(c===6)throw Error(x(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,ei(t,Wn,Qr),zn(t,wt()),null}function ac(t,s){var c=gt;gt|=1;try{return t(s)}finally{gt=c,gt===0&&(_i=wt()+500,sl&&ps())}}function Js(t){Ns!==null&&Ns.tag===0&&(gt&6)===0&&ji();var s=gt;gt|=1;var c=gr.transition,d=st;try{if(gr.transition=null,st=1,t)return t()}finally{st=d,gr.transition=c,gt=s,(gt&6)===0&&ps()}}function lc(){tr=Ri.current,jt(Ri)}function $s(t,s){t.finishedWork=null,t.finishedLanes=0;var c=t.timeoutHandle;if(c!==-1&&(t.timeoutHandle=-1,I0(c)),en!==null)for(c=en.return;c!==null;){var d=c;switch(mo(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&nl();break;case 3:ki(),jt(Ln),jt(Sn),To();break;case 5:ko(d);break;case 4:ki();break;case 13:jt(Lt);break;case 19:jt(Lt);break;case 10:No(d.type._context);break;case 22:case 23:lc()}c=c.return}if(fn=t,en=t=As(t.current,null),bn=tr=s,on=0,Ca=null,ec=Al=Qs=0,Wn=Ea=null,Ys!==null){for(s=0;s<Ys.length;s++)if(c=Ys[s],d=c.interleaved,d!==null){c.interleaved=null;var m=d.next,y=c.pending;if(y!==null){var S=y.next;y.next=m,d.next=S}c.pending=d}Ys=null}return t}function fd(t,s){do{var c=en;try{if(vo(),xl.current=yl,gl){for(var d=Ft.memoizedState;d!==null;){var m=d.queue;m!==null&&(m.pending=null),d=d.next}gl=!1}if(qs=0,hn=ln=Ft=null,pa=!1,ya=0,$o.current=null,c===null||c.return===null){on=1,Ca=s,en=null;break}e:{var y=t,S=c.return,O=c,F=s;if(s=bn,O.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var te=F,ve=O,Ne=ve.tag;if((ve.mode&1)===0&&(Ne===0||Ne===11||Ne===15)){var we=ve.alternate;we?(ve.updateQueue=we.updateQueue,ve.memoizedState=we.memoizedState,ve.lanes=we.lanes):(ve.updateQueue=null,ve.memoizedState=null)}var De=Lu(S);if(De!==null){De.flags&=-257,Fu(De,S,O,y,s),De.mode&1&&Bu(y,te,s),s=De,F=te;var We=s.updateQueue;if(We===null){var ze=new Set;ze.add(F),s.updateQueue=ze}else We.add(F);break e}else{if((s&1)===0){Bu(y,te,s),oc();break e}F=Error(x(426))}}else if(Ot&&O.mode&1){var qt=Lu(S);if(qt!==null){(qt.flags&65536)===0&&(qt.flags|=256),Fu(qt,S,O,y,s),wo(Ii(F,O));break e}}y=F=Ii(F,O),on!==4&&(on=2),Ea===null?Ea=[y]:Ea.push(y),y=S;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var Y=Du(y,F,s);ou(y,Y);break e;case 1:O=F;var H=y.type,Q=y.stateNode;if((y.flags&128)===0&&(typeof H.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(vs===null||!vs.has(Q)))){y.flags|=65536,s&=-s,y.lanes|=s;var Ie=Pu(y,O,s);ou(y,Ie);break e}}y=y.return}while(y!==null)}md(c)}catch(He){s=He,en===c&&c!==null&&(en=c=c.return);continue}break}while(!0)}function xd(){var t=El.current;return El.current=yl,t===null?yl:t}function oc(){(on===0||on===3||on===2)&&(on=4),fn===null||(Qs&268435455)===0&&(Al&268435455)===0||Es(fn,bn)}function _l(t,s){var c=gt;gt|=2;var d=xd();(fn!==t||bn!==s)&&(Qr=null,$s(t,s));do try{$0();break}catch(m){fd(t,m)}while(!0);if(vo(),gt=c,El.current=d,en!==null)throw Error(x(261));return fn=null,bn=0,on}function $0(){for(;en!==null;)gd(en)}function e1(){for(;en!==null&&!kt();)gd(en)}function gd(t){var s=wd(t.alternate,t,tr);t.memoizedProps=t.pendingProps,s===null?md(t):en=s,$o.current=null}function md(t){var s=t;do{var c=s.alternate;if(t=s.return,(s.flags&32768)===0){if(c=X0(c,s,tr),c!==null){en=c;return}}else{if(c=Z0(c,s),c!==null){c.flags&=32767,en=c;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{on=6,en=null;return}}if(s=s.sibling,s!==null){en=s;return}en=s=t}while(s!==null);on===0&&(on=5)}function ei(t,s,c){var d=st,m=gr.transition;try{gr.transition=null,st=1,t1(t,s,c,d)}finally{gr.transition=m,st=d}return null}function t1(t,s,c,d){do ji();while(Ns!==null);if((gt&6)!==0)throw Error(x(327));c=t.finishedWork;var m=t.finishedLanes;if(c===null)return null;if(t.finishedWork=null,t.finishedLanes=0,c===t.current)throw Error(x(177));t.callbackNode=null,t.callbackPriority=0;var y=c.lanes|c.childLanes;if(Ge(t,y),t===fn&&(en=fn=null,bn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||kl||(kl=!0,bd(Et,function(){return ji(),null})),y=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||y){y=gr.transition,gr.transition=null;var S=st;st=1;var O=gt;gt|=4,$o.current=null,K0(t,c),ad(c,t),An(lo),Rr=!!ao,lo=ao=null,t.current=c,q0(c),Pa(),gt=O,st=S,gr.transition=y}else t.current=c;if(kl&&(kl=!1,Ns=t,Il=m),y=t.pendingLanes,y===0&&(vs=null),dt(c.stateNode),zn(t,wt()),s!==null)for(d=t.onRecoverableError,c=0;c<s.length;c++)m=s[c],d(m.value,{componentStack:m.stack,digest:m.digest});if(Sl)throw Sl=!1,t=nc,nc=null,t;return(Il&1)!==0&&t.tag!==0&&ji(),y=t.pendingLanes,(y&1)!==0?t===rc?Aa++:(Aa=0,rc=t):Aa=0,ps(),null}function ji(){if(Ns!==null){var t=Fa(Il),s=gr.transition,c=st;try{if(gr.transition=null,st=16>t?16:t,Ns===null)var d=!1;else{if(t=Ns,Ns=null,Il=0,(gt&6)!==0)throw Error(x(331));var m=gt;for(gt|=4,Ue=t.current;Ue!==null;){var y=Ue,S=y.child;if((Ue.flags&16)!==0){var O=y.deletions;if(O!==null){for(var F=0;F<O.length;F++){var te=O[F];for(Ue=te;Ue!==null;){var ve=Ue;switch(ve.tag){case 0:case 11:case 15:Na(8,ve,y)}var Ne=ve.child;if(Ne!==null)Ne.return=ve,Ue=Ne;else for(;Ue!==null;){ve=Ue;var we=ve.sibling,De=ve.return;if(td(ve),ve===te){Ue=null;break}if(we!==null){we.return=De,Ue=we;break}Ue=De}}}var We=y.alternate;if(We!==null){var ze=We.child;if(ze!==null){We.child=null;do{var qt=ze.sibling;ze.sibling=null,ze=qt}while(ze!==null)}}Ue=y}}if((y.subtreeFlags&2064)!==0&&S!==null)S.return=y,Ue=S;else e:for(;Ue!==null;){if(y=Ue,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Na(9,y,y.return)}var Y=y.sibling;if(Y!==null){Y.return=y.return,Ue=Y;break e}Ue=y.return}}var H=t.current;for(Ue=H;Ue!==null;){S=Ue;var Q=S.child;if((S.subtreeFlags&2064)!==0&&Q!==null)Q.return=S,Ue=Q;else e:for(S=H;Ue!==null;){if(O=Ue,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Cl(9,O)}}catch(He){Ht(O,O.return,He)}if(O===S){Ue=null;break e}var Ie=O.sibling;if(Ie!==null){Ie.return=O.return,Ue=Ie;break e}Ue=O.return}}if(gt=m,ps(),rt&&typeof rt.onPostCommitFiberRoot=="function")try{rt.onPostCommitFiberRoot(ft,t)}catch{}d=!0}return d}finally{st=c,gr.transition=s}}return!1}function pd(t,s,c){s=Ii(c,s),s=Du(t,s,1),t=ws(t,s,1),s=Mn(),t!==null&&(R(t,1,s),zn(t,s))}function Ht(t,s,c){if(t.tag===3)pd(t,t,c);else for(;s!==null;){if(s.tag===3){pd(s,t,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(vs===null||!vs.has(d))){t=Ii(c,t),t=Pu(s,t,1),s=ws(s,t,1),t=Mn(),s!==null&&(R(s,1,t),zn(s,t));break}}s=s.return}}function n1(t,s,c){var d=t.pingCache;d!==null&&d.delete(s),s=Mn(),t.pingedLanes|=t.suspendedLanes&c,fn===t&&(bn&c)===c&&(on===4||on===3&&(bn&130023424)===bn&&500>wt()-tc?$s(t,0):ec|=c),zn(t,s)}function yd(t,s){s===0&&((t.mode&1)===0?s=1:(s=oi,oi<<=1,(oi&130023424)===0&&(oi=4194304)));var c=Mn();t=Yr(t,s),t!==null&&(R(t,s,c),zn(t,c))}function r1(t){var s=t.memoizedState,c=0;s!==null&&(c=s.retryLane),yd(t,c)}function s1(t,s){var c=0;switch(t.tag){case 13:var d=t.stateNode,m=t.memoizedState;m!==null&&(c=m.retryLane);break;case 19:d=t.stateNode;break;default:throw Error(x(314))}d!==null&&d.delete(s),yd(t,c)}var wd;wd=function(t,s,c){if(t!==null)if(t.memoizedProps!==s.pendingProps||Ln.current)Un=!0;else{if((t.lanes&c)===0&&(s.flags&128)===0)return Un=!1,V0(t,s,c);Un=(t.flags&131072)!==0}else Un=!1,Ot&&(s.flags&1048576)!==0&&Jc(s,al,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;vl(t,s),t=s.pendingProps;var m=bi(s,Sn.current);Si(s,c),m=jo(null,s,d,t,m,c);var y=Mo();return s.flags|=1,typeof m=="object"&&m!==null&&typeof m.render=="function"&&m.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Fn(d)?(y=!0,rl(s)):y=!1,s.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,Ao(s),m.updater=wl,s.stateNode=m,m._reactInternals=s,Fo(s,d,t,c),s=Ho(null,s,d,!0,y,c)):(s.tag=0,Ot&&y&&go(s),jn(null,s,m,c),s=s.child),s;case 16:d=s.elementType;e:{switch(vl(t,s),t=s.pendingProps,m=d._init,d=m(d._payload),s.type=d,m=s.tag=a1(d),t=Nr(d,t),m){case 0:s=zo(null,s,d,t,c);break e;case 1:s=Vu(null,s,d,t,c);break e;case 11:s=Uu(null,s,d,t,c);break e;case 14:s=Wu(null,s,d,Nr(d.type,t),c);break e}throw Error(x(306,d,""))}return s;case 0:return d=s.type,m=s.pendingProps,m=s.elementType===d?m:Nr(d,m),zo(t,s,d,m,c);case 1:return d=s.type,m=s.pendingProps,m=s.elementType===d?m:Nr(d,m),Vu(t,s,d,m,c);case 3:e:{if(Xu(s),t===null)throw Error(x(387));d=s.pendingProps,y=s.memoizedState,m=y.element,lu(t,s),hl(s,d,null,c);var S=s.memoizedState;if(d=S.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){m=Ii(Error(x(423)),s),s=Zu(t,s,d,c,m);break e}else if(d!==m){m=Ii(Error(x(424)),s),s=Zu(t,s,d,c,m);break e}else for(er=xs(s.stateNode.containerInfo.firstChild),$n=s,Ot=!0,vr=null,c=iu(s,null,d,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ci(),d===m){s=qr(t,s,c);break e}jn(t,s,d,c)}s=s.child}return s;case 5:return uu(s),t===null&&yo(s),d=s.type,m=s.pendingProps,y=t!==null?t.memoizedProps:null,S=m.children,oo(d,m)?S=null:y!==null&&oo(d,y)&&(s.flags|=32),Gu(t,s),jn(t,s,S,c),s.child;case 6:return t===null&&yo(s),null;case 13:return Yu(t,s,c);case 4:return So(s,s.stateNode.containerInfo),d=s.pendingProps,t===null?s.child=Ei(s,null,d,c):jn(t,s,d,c),s.child;case 11:return d=s.type,m=s.pendingProps,m=s.elementType===d?m:Nr(d,m),Uu(t,s,d,m,c);case 7:return jn(t,s,s.pendingProps,c),s.child;case 8:return jn(t,s,s.pendingProps.children,c),s.child;case 12:return jn(t,s,s.pendingProps.children,c),s.child;case 10:e:{if(d=s.type._context,m=s.pendingProps,y=s.memoizedProps,S=m.value,Rt(cl,d._currentValue),d._currentValue=S,y!==null)if(V(y.value,S)){if(y.children===m.children&&!Ln.current){s=qr(t,s,c);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var O=y.dependencies;if(O!==null){S=y.child;for(var F=O.firstContext;F!==null;){if(F.context===d){if(y.tag===1){F=Kr(-1,c&-c),F.tag=2;var te=y.updateQueue;if(te!==null){te=te.shared;var ve=te.pending;ve===null?F.next=F:(F.next=ve.next,ve.next=F),te.pending=F}}y.lanes|=c,F=y.alternate,F!==null&&(F.lanes|=c),Co(y.return,c,s),O.lanes|=c;break}F=F.next}}else if(y.tag===10)S=y.type===s.type?null:y.child;else if(y.tag===18){if(S=y.return,S===null)throw Error(x(341));S.lanes|=c,O=S.alternate,O!==null&&(O.lanes|=c),Co(S,c,s),S=y.sibling}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===s){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}jn(t,s,m.children,c),s=s.child}return s;case 9:return m=s.type,d=s.pendingProps.children,Si(s,c),m=fr(m),d=d(m),s.flags|=1,jn(t,s,d,c),s.child;case 14:return d=s.type,m=Nr(d,s.pendingProps),m=Nr(d.type,m),Wu(t,s,d,m,c);case 15:return zu(t,s,s.type,s.pendingProps,c);case 17:return d=s.type,m=s.pendingProps,m=s.elementType===d?m:Nr(d,m),vl(t,s),s.tag=1,Fn(d)?(t=!0,rl(s)):t=!1,Si(s,c),Mu(s,d,m),Fo(s,d,m,c),Ho(null,s,d,!0,t,c);case 19:return qu(t,s,c);case 22:return Hu(t,s,c)}throw Error(x(156,s.tag))};function bd(t,s){return Zn(t,s)}function i1(t,s,c,d){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(t,s,c,d){return new i1(t,s,c,d)}function cc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function a1(t){if(typeof t=="function")return cc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ne)return 11;if(t===B)return 14}return 2}function As(t,s){var c=t.alternate;return c===null?(c=mr(t.tag,s,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=s,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&14680064,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,s=t.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c}function jl(t,s,c,d,m,y){var S=2;if(d=t,typeof t=="function")cc(t)&&(S=1);else if(typeof t=="string")S=5;else e:switch(t){case G:return ti(c.children,m,y,s);case pe:S=8,m|=8;break;case de:return t=mr(12,c,s,m|2),t.elementType=de,t.lanes=y,t;case K:return t=mr(13,c,s,m),t.elementType=K,t.lanes=y,t;case Se:return t=mr(19,c,s,m),t.elementType=Se,t.lanes=y,t;case q:return Ml(c,m,y,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case nt:S=10;break e;case Xe:S=9;break e;case ne:S=11;break e;case B:S=14;break e;case me:S=16,d=null;break e}throw Error(x(130,t==null?t:typeof t,""))}return s=mr(S,c,s,m),s.elementType=t,s.type=d,s.lanes=y,s}function ti(t,s,c,d){return t=mr(7,t,d,s),t.lanes=c,t}function Ml(t,s,c,d){return t=mr(22,t,d,s),t.elementType=q,t.lanes=c,t.stateNode={isHidden:!1},t}function uc(t,s,c){return t=mr(6,t,null,s),t.lanes=c,t}function dc(t,s,c){return s=mr(4,t.children!==null?t.children:[],t.key,s),s.lanes=c,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function l1(t,s,c,d,m){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Z(0),this.expirationTimes=Z(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Z(0),this.identifierPrefix=d,this.onRecoverableError=m,this.mutableSourceEagerHydrationData=null}function hc(t,s,c,d,m,y,S,O,F){return t=new l1(t,s,c,O,F),s===1?(s=1,y===!0&&(s|=8)):s=0,y=mr(3,null,null,s),t.current=y,y.stateNode=t,y.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ao(y),t}function o1(t,s,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:d==null?null:""+d,children:t,containerInfo:s,implementation:c}}function vd(t){if(!t)return ms;t=t._reactInternals;e:{if(Bn(t)!==t||t.tag!==1)throw Error(x(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Fn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(x(171))}if(t.tag===1){var c=t.type;if(Fn(c))return Kc(t,c,s)}return s}function Nd(t,s,c,d,m,y,S,O,F){return t=hc(c,d,!0,t,m,y,S,O,F),t.context=vd(null),c=t.current,d=Mn(),m=Cs(c),y=Kr(d,m),y.callback=s??null,ws(c,y,m),t.current.lanes=m,R(t,m,d),zn(t,d),t}function Ol(t,s,c,d){var m=s.current,y=Mn(),S=Cs(m);return c=vd(c),s.context===null?s.context=c:s.pendingContext=c,s=Kr(y,S),s.payload={element:t},d=d===void 0?null:d,d!==null&&(s.callback=d),t=ws(m,s,S),t!==null&&(Ar(t,m,S,y),dl(t,m,S)),S}function Dl(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function Cd(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<s?c:s}}function fc(t,s){Cd(t,s),(t=t.alternate)&&Cd(t,s)}function c1(){return null}var Ed=typeof reportError=="function"?reportError:function(t){console.error(t)};function xc(t){this._internalRoot=t}Pl.prototype.render=xc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(x(409));Ol(t,s,null,null)},Pl.prototype.unmount=xc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Js(function(){Ol(null,t,null,null)}),s[Gr]=null}};function Pl(t){this._internalRoot=t}Pl.prototype.unstable_scheduleHydration=function(t){if(t){var s=It();t={blockedOn:null,target:t,priority:s};for(var c=0;c<mn.length&&s!==0&&s<mn[c].priority;c++);mn.splice(c,0,t),c===0&&Wa(t)}};function gc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Bl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ad(){}function u1(t,s,c,d,m){if(m){if(typeof d=="function"){var y=d;d=function(){var te=Dl(S);y.call(te)}}var S=Nd(s,d,t,0,null,!1,!1,"",Ad);return t._reactRootContainer=S,t[Gr]=S.current,ca(t.nodeType===8?t.parentNode:t),Js(),S}for(;m=t.lastChild;)t.removeChild(m);if(typeof d=="function"){var O=d;d=function(){var te=Dl(F);O.call(te)}}var F=hc(t,0,!1,null,null,!1,!1,"",Ad);return t._reactRootContainer=F,t[Gr]=F.current,ca(t.nodeType===8?t.parentNode:t),Js(function(){Ol(s,F,c,d)}),F}function Ll(t,s,c,d,m){var y=c._reactRootContainer;if(y){var S=y;if(typeof m=="function"){var O=m;m=function(){var F=Dl(S);O.call(F)}}Ol(s,S,t,m)}else S=u1(c,s,t,m,d);return Dl(S)}ci=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var c=At(s.pendingLanes);c!==0&&(Wt(s,c|1),zn(s,wt()),(gt&6)===0&&(_i=wt()+500,ps()))}break;case 13:Js(function(){var d=Yr(t,1);if(d!==null){var m=Mn();Ar(d,t,1,m)}}),fc(t,1)}},En=function(t){if(t.tag===13){var s=Yr(t,134217728);if(s!==null){var c=Mn();Ar(s,t,134217728,c)}fc(t,134217728)}},Ve=function(t){if(t.tag===13){var s=Cs(t),c=Yr(t,s);if(c!==null){var d=Mn();Ar(c,t,s,d)}fc(t,s)}},It=function(){return st},Ki=function(t,s){var c=st;try{return st=t,s()}finally{st=c}},ai=function(t,s,c){switch(s){case"input":if(Dt(t,c),s=c.name,c.type==="radio"&&s!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==t&&d.form===t.form){var m=tl(d);if(!m)throw Error(x(90));sr(d),Dt(d,m)}}}break;case"textarea":ir(t,c);break;case"select":s=c.value,s!=null&&Le(t,!!c.multiple,s,!1)}},li=ac,tn=Js;var d1={usingClientEntryPoint:!1,Events:[ha,yi,tl,zi,Pn,ac]},Sa={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},h1={bundleType:Sa.bundleType,version:Sa.version,rendererPackageName:Sa.rendererPackageName,rendererConfig:Sa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xe.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Oa(t),t===null?null:t.stateNode},findFiberByHostInstance:Sa.findFiberByHostInstance||c1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fl.isDisabled&&Fl.supportsFiber)try{ft=Fl.inject(h1),rt=Fl}catch{}}return Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=d1,Hn.createPortal=function(t,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gc(s))throw Error(x(200));return o1(t,s,null,c)},Hn.createRoot=function(t,s){if(!gc(t))throw Error(x(299));var c=!1,d="",m=Ed;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(m=s.onRecoverableError)),s=hc(t,1,!1,null,null,c,!1,d,m),t[Gr]=s.current,ca(t.nodeType===8?t.parentNode:t),new xc(s)},Hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(x(188)):(t=Object.keys(t).join(","),Error(x(268,t)));return t=Oa(s),t=t===null?null:t.stateNode,t},Hn.flushSync=function(t){return Js(t)},Hn.hydrate=function(t,s,c){if(!Bl(s))throw Error(x(200));return Ll(null,t,s,!0,c)},Hn.hydrateRoot=function(t,s,c){if(!gc(t))throw Error(x(405));var d=c!=null&&c.hydratedSources||null,m=!1,y="",S=Ed;if(c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(S=c.onRecoverableError)),s=Nd(s,null,t,1,c??null,m,!1,y,S),t[Gr]=s.current,ca(t),d)for(t=0;t<d.length;t++)c=d[t],m=c._getVersion,m=m(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,m]:s.mutableSourceEagerHydrationData.push(c,m);return new Pl(s)},Hn.render=function(t,s,c){if(!Bl(s))throw Error(x(200));return Ll(null,t,s,!1,c)},Hn.unmountComponentAtNode=function(t){if(!Bl(t))throw Error(x(40));return t._reactRootContainer?(Js(function(){Ll(null,null,t,!1,function(){t._reactRootContainer=null,t[Gr]=null})}),!0):!1},Hn.unstable_batchedUpdates=ac,Hn.unstable_renderSubtreeIntoContainer=function(t,s,c,d){if(!Bl(c))throw Error(x(200));if(t==null||t._reactInternals===void 0)throw Error(x(38));return Ll(t,s,c,!1,d)},Hn.version="18.3.1-next-f1338f8080-20240426",Hn}var Md;function b1(){if(Md)return yc.exports;Md=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(p){console.error(p)}}return f(),yc.exports=w1(),yc.exports}var Od;function v1(){if(Od)return Wl;Od=1;var f=b1();return Wl.createRoot=f.createRoot,Wl.hydrateRoot=f.hydrateRoot,Wl}var N1=v1();const C1=i0(N1);console.warn("Supabase credentials not found. Running in offline mode.");const E1=()=>!1,l0=Re.createContext({}),o0=()=>Re.useContext(l0);function A1({children:f}){const[p,x]=Re.useState(null),[v,N]=Re.useState(!0);Re.useEffect(()=>{{N(!1);return}},[]);const M={user:p,loading:v,signInWithGoogle:async()=>(console.error("Supabase not configured"),{error:{message:"Authentication not configured. Please check your Supabase credentials."}}),signOut:async()=>{},isAuthenticated:!!p,isConfigured:E1()};return l.jsx(l0.Provider,{value:M,children:f})}var S1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const k1=f=>f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),it=(f,p)=>{const x=Re.forwardRef(({color:v="currentColor",size:N=24,strokeWidth:w=2,absoluteStrokeWidth:I,className:M="",children:T,...A},P)=>Re.createElement("svg",{ref:P,...S1,width:N,height:N,stroke:v,strokeWidth:I?Number(w)*24/Number(N):w,className:["lucide",`lucide-${k1(f)}`,M].join(" "),...A},[...p.map(([j,se])=>Re.createElement(j,se)),...Array.isArray(T)?T:[T]]));return x.displayName=`${f}`,x};const I1=it("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const Cc=it("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const T1=it("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Dd=it("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const R1=it("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);const Ic=it("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const _1=it("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);const c0=it("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);const Ts=it("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const u0=it("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const Pr=it("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Tc=it("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const ja=it("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Bi=it("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const j1=it("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const M1=it("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Rc=it("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const ni=it("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);const Li=it("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const O1=it("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const D1=it("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const P1=it("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Pd=it("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const B1=it("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Bd=it("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const L1=it("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const F1=it("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);const Ld=it("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const Fi=it("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const U1=it("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const W1=it("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const d0=it("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Ec=it("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const z1=it("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const h0=it("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const Br=it("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Ma=it("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Rs=it("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const f0=it("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const ri=it("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);const Zl=it("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Is=it("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),H1=[{icon:c0,title:"Intelligent Programming",description:"Periodized training blocks built from proven methodologies. Auto-regulated progression based on your actual performance data."},{icon:Br,title:"Sport-Specific Periodization",description:"Whether you're peaking for a meet, racing a marathon, or training for a triathlonyour mesocycles are structured for your event."},{icon:ri,title:"Performance Nutrition",description:"Macros calibrated to your training load and body composition goals. Nutrient timing aligned with your session schedule."},{icon:Rs,title:"Progressive Overload Engine",description:"Systematic volume and intensity progression with strategic deloads. No guesswork, no stalled progress."},{icon:I1,title:"Session Tracking",description:"Log sets, reps, RPE, and actual loads. Track deviations from prescribed work to inform future programming."},{icon:Ic,title:"Performance Analytics",description:"Volume load trends, strength curve analysis, and training density metrics. Data-driven decisions, not guesswork."}];function G1({onGetStarted:f}){return l.jsxs("div",{className:"min-h-screen bg-dark-950 text-white overflow-x-hidden",children:[l.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-dark-950/80 backdrop-blur-lg border-b border-dark-800",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-accent-primary to-accent-primaryHover rounded-xl flex items-center justify-center",children:l.jsx(Is,{className:"w-6 h-6 text-dark-950"})}),l.jsx("span",{className:"text-2xl font-display font-bold tracking-tight",children:"MOTUS"})]}),l.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[l.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors",children:"Features"}),l.jsx("a",{href:"#how-it-works",className:"text-gray-400 hover:text-white transition-colors",children:"How It Works"}),l.jsx("a",{href:"#programs",className:"text-gray-400 hover:text-white transition-colors",children:"Programs"})]}),l.jsx("button",{onClick:f,className:"px-5 py-2.5 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-semibold rounded-lg transition-all hover:scale-105",children:"Get Started"})]})}),l.jsxs("section",{className:"relative min-h-screen flex items-center justify-center pt-20 overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-dark-950 via-dark-900 to-dark-950"}),l.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-accent-primary/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent-secondary/10 rounded-full blur-3xl"}),l.jsx("div",{className:"absolute inset-0 opacity-5",children:l.jsx("div",{className:"h-full w-full",style:{backgroundImage:"linear-gradient(rgba(212,168,83,0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(212,168,83,0.3) 1px, transparent 1px)",backgroundSize:"50px 50px"}})}),l.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 text-center",children:[l.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-accent-primary/10 border border-accent-primary/30 rounded-full mb-8",children:[l.jsx(Is,{className:"w-4 h-4 text-accent-primary"}),l.jsx("span",{className:"text-sm text-accent-primary font-medium",children:"Periodized Training + Precision Nutrition"})]}),l.jsxs("h1",{className:"text-5xl md:text-7xl lg:text-8xl font-display font-bold tracking-tight mb-6",children:[l.jsx("span",{className:"block",children:"TRAIN WITH"}),l.jsx("span",{className:"block bg-gradient-to-r from-accent-primary via-accent-primaryHover to-accent-secondary bg-clip-text text-transparent",children:"INTENT."})]}),l.jsxs("p",{className:"text-xl md:text-2xl text-gray-400 max-w-3xl mx-auto mb-10 leading-relaxed",children:["Structured programming for serious athletes. ",l.jsx("span",{className:"text-white font-medium",children:"Periodized workouts"}),","," ",l.jsx("span",{className:"text-white font-medium",children:"calibrated nutrition"}),", and"," ",l.jsx("span",{className:"text-white font-medium",children:"intelligent progression"}),"all in one platform."]}),l.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-16",children:l.jsxs("button",{onClick:f,className:"group px-8 py-4 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-bold text-lg rounded-xl transition-all hover:scale-105 flex items-center gap-2 shadow-lg shadow-accent-primary/25",children:["Build Your Program",l.jsx(Dd,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[l.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[l.jsx(B1,{className:"w-5 h-5 text-accent-primary"}),l.jsx("span",{children:"Mesocycle-based periodization"})]}),l.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[l.jsx(Rc,{className:"w-5 h-5 text-accent-primary"}),l.jsx("span",{children:"Auto-regulated deloads"})]}),l.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[l.jsx(z1,{className:"w-5 h-5 text-accent-primary"}),l.jsx("span",{children:"Research-backed protocols"})]})]})]}),l.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce",children:l.jsx("div",{className:"w-6 h-10 border-2 border-gray-600 rounded-full flex items-start justify-center p-2",children:l.jsx("div",{className:"w-1.5 h-3 bg-accent-primary rounded-full animate-pulse"})})})]}),l.jsx("section",{className:"py-24 bg-dark-900",children:l.jsx("div",{className:"max-w-7xl mx-auto px-6",children:l.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["You Know What You're Doing. ",l.jsx("span",{className:"text-accent-danger",children:"Your Tools Should Too."})]}),l.jsxs("div",{className:"space-y-4 text-gray-400",children:[l.jsxs("p",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Generic apps that don't understand periodization or peaking"]}),l.jsxs("p",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Nutrition trackers disconnected from your training load"]}),l.jsxs("p",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-accent-danger mt-1",children:""}),"No intelligent programmingjust random workouts"]}),l.jsxs("p",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Fragmented tools that don't talk to each other"]})]})]}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["MOTUS Gets It. ",l.jsx("span",{className:"text-accent-success",children:"Built for Athletes."})]}),l.jsxs("div",{className:"space-y-4 text-gray-400",children:[l.jsxs("p",{className:"flex items-start gap-3",children:[l.jsx(Pr,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"Proper periodization with base, build, peak, and taper phases"})]}),l.jsxs("p",{className:"flex items-start gap-3",children:[l.jsx(Pr,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"Nutrition that scales with your training volume and intensity"})]}),l.jsxs("p",{className:"flex items-start gap-3",children:[l.jsx(Pr,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"Progressive overload with strategic deload weeks built in"})]}),l.jsxs("p",{className:"flex items-start gap-3",children:[l.jsx(Pr,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),l.jsx("span",{children:"One integrated platformworkouts, nutrition, and tracking"})]})]})]})]})})}),l.jsx("section",{id:"features",className:"py-24 bg-dark-950",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Built for ",l.jsx("span",{className:"text-accent-primary",children:"Performance"})]}),l.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Every feature designed around how serious athletes actually train."})]}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:H1.map((p,x)=>l.jsxs("div",{className:"group p-6 bg-dark-900 border border-dark-700 rounded-2xl hover:border-accent-primary/50 transition-all hover:-translate-y-1",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-primary/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-accent-primary/20 transition-colors",children:l.jsx(p.icon,{className:"w-6 h-6 text-accent-primary"})}),l.jsx("h3",{className:"text-xl font-semibold mb-2",children:p.title}),l.jsx("p",{className:"text-gray-400",children:p.description})]},x))})]})}),l.jsx("section",{id:"how-it-works",className:"py-24 bg-dark-900",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Setup in ",l.jsx("span",{className:"text-accent-primary",children:"5 Minutes"})]}),l.jsx("p",{className:"text-xl text-gray-400",children:"Input your data. Get your program. Start training."})]}),l.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{step:"01",title:"Define Your Goal",description:"Select your primary focusstrength, endurance, hypertrophy, or triathlon. Set your target event or timeline.",icon:Br},{step:"02",title:"Input Your Baseline",description:"Current lifts, recent race times, training history. We need real numbers to build a real program.",icon:c0},{step:"03",title:"Execute & Track",description:"Follow your periodized program. Log your sessions. Let the system adjust based on your actual performance.",icon:Rs}].map((p,x)=>l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:"text-7xl font-display font-bold text-dark-800 absolute -top-4 -left-2",children:p.step}),l.jsxs("div",{className:"relative bg-dark-800 border border-dark-700 rounded-2xl p-6 pt-12",children:[l.jsx("div",{className:"w-14 h-14 bg-accent-primary rounded-xl flex items-center justify-center mb-4",children:l.jsx(p.icon,{className:"w-7 h-7 text-dark-950"})}),l.jsx("h3",{className:"text-xl font-semibold mb-2",children:p.title}),l.jsx("p",{className:"text-gray-400",children:p.description})]}),x<2&&l.jsx("div",{className:"hidden md:block absolute top-1/2 -right-4 transform -translate-y-1/2",children:l.jsx(Bi,{className:"w-8 h-8 text-dark-600"})})]},x))})]})}),l.jsx("section",{id:"programs",className:"py-24 bg-dark-950",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[l.jsxs("div",{className:"text-center mb-16",children:[l.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Specialized ",l.jsx("span",{className:"text-accent-primary",children:"Programming"})]}),l.jsx("p",{className:"text-xl text-gray-400",children:"Structured training systems for your discipline"})]}),l.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"Strength",subtitle:"Powerlifting & Strength Sport",description:"Periodized programming for squat, bench, and deadlift. Volume blocks, intensity blocks, and peaking protocols.",icon:"",color:"from-red-500/20 to-orange-500/20",border:"border-red-500/30"},{title:"Endurance",subtitle:"Running & Cycling",description:"5K to marathon and beyond. Pace-based training zones, mileage progression, and taper protocols.",icon:"",color:"from-blue-500/20 to-cyan-500/20",border:"border-blue-500/30"},{title:"Hypertrophy",subtitle:"Bodybuilding & Physique",description:"Volume-driven programming for muscle development. Progressive overload with strategic deloads.",icon:"",color:"from-purple-500/20 to-pink-500/20",border:"border-purple-500/30"},{title:"Triathlon",subtitle:"Swim  Bike  Run",description:"Multi-sport periodization with brick workouts and double days. Injury-prevention strength work built in.",icon:"",color:"from-accent-primary/20 to-yellow-500/20",border:"border-accent-primary/30"}].map((p,x)=>l.jsxs("div",{className:`p-6 rounded-2xl bg-gradient-to-br ${p.color} border ${p.border} hover:scale-105 transition-transform cursor-pointer`,children:[l.jsx("span",{className:"text-4xl mb-4 block",children:p.icon}),l.jsx("h3",{className:"text-xl font-bold mb-1",children:p.title}),l.jsx("p",{className:"text-accent-primary text-sm font-medium mb-3",children:p.subtitle}),l.jsx("p",{className:"text-gray-400 text-sm",children:p.description})]},x))})]})}),l.jsxs("section",{className:"py-24 bg-dark-900 relative overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent-primary/5 via-transparent to-accent-secondary/5"}),l.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-px bg-gradient-to-r from-transparent via-accent-primary/50 to-transparent"}),l.jsxs("div",{className:"relative max-w-4xl mx-auto px-6 text-center",children:[l.jsxs("h2",{className:"text-4xl md:text-6xl font-display font-bold mb-6",children:["Stop Guessing. ",l.jsx("span",{className:"text-accent-primary",children:"Start Training."})]}),l.jsx("p",{className:"text-xl text-gray-400 mb-10 max-w-2xl mx-auto",children:"Your personalized program is 5 minutes away."}),l.jsxs("button",{onClick:f,className:"group px-10 py-5 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-bold text-xl rounded-xl transition-all hover:scale-105 flex items-center gap-3 mx-auto shadow-lg shadow-accent-primary/25",children:["Build My Program",l.jsx(Dd,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]})]})]}),l.jsx("footer",{className:"py-12 bg-dark-950 border-t border-dark-800",children:l.jsx("div",{className:"max-w-7xl mx-auto px-6",children:l.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-accent-primary to-accent-primaryHover rounded-lg flex items-center justify-center",children:l.jsx(Is,{className:"w-5 h-5 text-dark-950"})}),l.jsx("span",{className:"text-xl font-display font-bold",children:"MOTUS"})]}),l.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[l.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"}),l.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms"}),l.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})]}),l.jsx("p",{className:"text-sm text-gray-500",children:" 2024 MOTUS. Train With Intent."})]})})})]})}const V1={primary:"bg-accent-primary hover:bg-accent-primaryHover active:bg-accent-primaryMuted text-dark-900 font-semibold shadow-sm",secondary:"bg-dark-700 hover:bg-dark-600 text-white border border-dark-500 hover:border-dark-400",ghost:"bg-transparent hover:bg-dark-800 text-text-secondary hover:text-white",danger:"bg-accent-danger hover:bg-red-500 text-white",success:"bg-accent-success hover:bg-green-500 text-dark-900 font-semibold",outline:"bg-transparent border-2 border-accent-primary text-accent-primary hover:bg-accent-primary hover:text-dark-900"},X1={sm:"px-3 py-1.5 text-sm rounded-md",md:"px-5 py-2.5 text-sm rounded-lg",lg:"px-6 py-3 text-base rounded-lg",xl:"px-8 py-4 text-lg rounded-xl"};function Vt({children:f,variant:p="primary",size:x="md",disabled:v=!1,fullWidth:N=!1,onClick:w,type:I="button",className:M="",icon:T,iconPosition:A="left",...P}){return l.jsxs("button",{type:I,onClick:w,disabled:v,className:`
        ${V1[p]}
        ${X1[x]}
        ${N?"w-full":""}
        ${v?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        font-medium tracking-wide
        transition-all duration-200
        focus:outline-none focus:ring-2 focus:ring-accent-primary/50 focus:ring-offset-2 focus:ring-offset-dark-900
        inline-flex items-center justify-center gap-2
        ${M}
      `,...P,children:[T&&A==="left"&&l.jsx("span",{className:"flex-shrink-0",children:T}),f,T&&A==="right"&&l.jsx("span",{className:"flex-shrink-0",children:T})]})}function Qt({children:f,className:p="",hover:x=!1,onClick:v,variant:N="default",padding:w=!0}){const I="rounded-xl transition-all duration-300",M={default:"bg-dark-800 border border-dark-600",elevated:"bg-dark-800 border border-dark-600 shadow-lg shadow-black/20",outlined:"bg-transparent border border-dark-500",solid:"bg-dark-700"},T=x?"hover:border-dark-400 hover:shadow-gold cursor-pointer":"";return l.jsx("div",{onClick:v,className:`
        ${I}
        ${M[N]}
        ${T}
        ${p}
      `,children:f})}function Jt({children:f,className:p=""}){return l.jsx("div",{className:`p-6 ${p}`,children:f})}function Z1({label:f,type:p="text",value:x,onChange:v,placeholder:N,error:w,helper:I,disabled:M=!1,className:T="",size:A="md",...P}){const j={sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-base",lg:"px-5 py-4 text-lg"};return l.jsxs("div",{className:`space-y-2 ${T}`,children:[f&&l.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:f}),l.jsx("input",{type:p,value:x,onChange:v,placeholder:N,disabled:M,className:`
          w-full ${j[A]}
          bg-dark-700 border rounded-lg
          text-white placeholder-dark-400
          focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary
          hover:border-dark-400
          transition-colors duration-200
          ${w?"border-accent-danger focus:border-accent-danger focus:ring-accent-danger":"border-dark-600"}
          ${M?"opacity-50 cursor-not-allowed bg-dark-800":""}
        `,...P}),w&&l.jsxs("p",{className:"text-sm text-accent-danger flex items-center gap-1",children:[l.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),w]}),I&&!w&&l.jsx("p",{className:"text-sm text-text-muted",children:I})]})}function Hl({isOpen:f,onClose:p,title:x,children:v,size:N="md",showClose:w=!0}){const I=Re.useRef(null),M={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[90vw]"};return Re.useEffect(()=>{const T=A=>{A.key==="Escape"&&p()};return f&&(document.addEventListener("keydown",T),document.body.style.overflow="hidden",I.current?.focus()),()=>{document.removeEventListener("keydown",T),document.body.style.overflow="unset"}},[f,p]),f?l.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[l.jsx("div",{className:"absolute inset-0 bg-dark-950/80 backdrop-blur-sm",onClick:p}),l.jsxs("div",{ref:I,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",tabIndex:-1,className:`
          relative w-full ${M[N]}
          bg-dark-800 rounded-2xl
          border border-dark-600
          shadow-2xl shadow-black/50
          animate-in fade-in zoom-in-95 duration-200
        `,children:[l.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-dark-600",children:[l.jsx("h2",{id:"modal-title",className:"text-xl font-semibold text-white tracking-tight",children:x}),w&&l.jsx("button",{onClick:p,className:"p-2 rounded-lg text-dark-400 hover:text-white hover:bg-dark-700 transition-colors","aria-label":"Close modal",children:l.jsx(Zl,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"px-6 py-5 max-h-[70vh] overflow-y-auto",children:v})]})]}):null}function Pi({value:f,max:p=100,color:x="primary",showLabel:v=!1,size:N="md",className:w=""}){const I=Math.min(Math.max(f/p*100,0),100),M={primary:"bg-accent-primary",secondary:"bg-text-secondary",success:"bg-accent-success",warning:"bg-accent-warning",danger:"bg-accent-danger",gold:"bg-gradient-to-r from-accent-primaryMuted via-accent-primary to-accent-primaryHover"},T={xs:"h-1",sm:"h-1.5",md:"h-2",lg:"h-3",xl:"h-4"};return l.jsxs("div",{className:`w-full ${w}`,children:[l.jsx("div",{className:`w-full bg-dark-700 rounded-full ${T[N]} overflow-hidden`,children:l.jsx("div",{className:`${M[x]} ${T[N]} rounded-full transition-all duration-500 ease-out`,style:{width:`${I}%`}})}),v&&l.jsxs("div",{className:"flex justify-between mt-1.5 text-sm",children:[l.jsx("span",{className:"text-text-secondary",children:f}),l.jsx("span",{className:"text-text-muted",children:p})]})]})}const Y1=[{id:"dashboard",label:"Home",icon:D1},{id:"program",label:"Program",icon:Ts},{id:"nutrition",label:"Nutrition",icon:ri},{id:"stats",label:"Stats",icon:Ic},{id:"profile",label:"Profile",icon:f0}];function K1({activeTab:f,onChange:p}){return l.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-dark-900/95 backdrop-blur-md border-t border-dark-700 px-2 pt-2 z-50",style:{paddingBottom:"max(0.5rem, env(safe-area-inset-bottom))"},children:l.jsx("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:Y1.map(x=>{const v=f===x.id,N=x.icon;return l.jsxs("button",{onClick:()=>p(x.id),className:`
                flex flex-col items-center px-4 py-2 rounded-xl transition-all duration-200
                ${v?"text-accent-primary":"text-dark-400 hover:text-text-secondary"}
              `,children:[l.jsxs("div",{className:`
                relative p-1.5 rounded-lg transition-all duration-200
                ${v?"bg-accent-primary/10":""}
              `,children:[l.jsx(N,{className:`w-5 h-5 ${v?"stroke-[2.5]":"stroke-[1.5]"}`}),v&&l.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-accent-primary rounded-full"})]}),l.jsx("span",{className:`text-xs mt-1 ${v?"font-semibold":"font-medium"}`,children:x.label})]},x.id)})})})}function q1({profile:f,program:p,meals:x,workouts:v,todaysMeals:N,todaysWorkouts:w}){const I=()=>{let ue=null;if(f?.raceDate?ue=new Date(f.raceDate):f?.aestheticGoalDate?ue=new Date(f.aestheticGoalDate):f?.targetDate&&(ue=new Date(f.targetDate)),ue){const oe=ue-new Date,xe=Math.ceil(oe/(1e3*60*60*24));return xe>0?xe:null}return null},M=()=>{const ue=I(),ce=f?.programType||p?.primaryGoal,oe=f?.programSubtype||p?.primarySubtype,xe=p?.currentPhase||"Base",Ee=p?.currentWeek||1,he=p?.mesocycleWeeks||5;if(ce==="endurance"){if(oe==="marathon"||oe==="running"){const pe=f?.raceDistance||"race";return ue?`Your ${pe} is ${ue} days away! Every run gets you closer to the finish line. `:"Building your aerobic base. Consistency beats intensity at this stage!"}return oe==="triathlon"?ue?`${ue} days until race day! Swim, bike, run - you've got this! `:"Training all three disciplines builds an unstoppable athlete.":"Endurance is built one workout at a time. Keep moving forward!"}if(ce==="strength"){const pe=f?.strengthGoals?.filter(de=>de.target)||[];return pe.length>0?`${pe.length} lift targets set. Progressive overload is your path to strength! `:`${xe} phase - building the foundation for serious strength gains.`}if(ce==="aesthetic"){const pe=f?.targetBodyFat;return pe?`Working toward ${pe}% body fat. Trust the process - gains take time! `:"Sculpting takes patience. Your dedication will pay off!"}if(ce==="fatloss"){const pe=f?.targetWeight;return pe?`On track to ${pe} ${f?.weightUnit||"lbs"}. Small daily wins add up! `:"Fat loss is a marathon, not a sprint. Stay consistent!"}return{Base:`Building your foundation in the ${xe} phase. This sets you up for success!`,Build:`${xe} phase - time to push your limits and grow stronger!`,Peak:`${xe} phase - you're at your strongest. Time to perform!`,Deload:"Recovery week - your body adapts and grows during rest. Embrace it!"}[xe]||`Week ${Ee} of ${he} - keep showing up!`},T=()=>{const ue=new Date().getDay()||7,ce=p?.weeklySchedule?.find(he=>he.day===ue),oe=ce?.isRestDay,xe=ce?.sessions||[],Ee=w?.length||0;return{isRestDay:oe,totalSessions:xe.length,completedSessions:Ee,sessionNames:xe.map(he=>he.focus).join(" + ")}},A=()=>{const ue=p?.daysPerWeek||f?.desiredTrainingDays||4,ce=new Date,oe=new Date(ce);oe.setDate(ce.getDate()-ce.getDay()+1);const xe=v?.filter(Ee=>{const he=new Date(Ee.loggedAt||Ee.completedAt);return he>=oe&&he<=ce})||[];return{completed:xe.length,target:ue,percentage:Math.min(xe.length/ue*100,100)}},P=()=>{const ue=f?.macros?.calories||f?.tdee||2e3,ce=N?.reduce((Ee,he)=>Ee+(he.calories||0),0)||0,oe=ue-ce,xe=ce/ue*100;return{consumed:ce,target:ue,remaining:Math.max(oe,0),percentOfTarget:xe,mealsLogged:N?.length||0}},j=()=>{const ue=p?.currentWeek||1,ce=p?.mesocycleWeeks||5;return{currentWeek:ue,totalWeeks:ce,percentage:ue/ce*100,phase:p?.currentPhase||"Base"}},se=I(),re=T(),ee=A(),ie=P(),ae=j();return l.jsxs("div",{className:"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden",children:[l.jsx("div",{className:"px-4 py-3 border-b border-dark-600",children:l.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[l.jsx(Br,{className:"w-5 h-5 text-accent-primary"}),"Daily Summary"]})}),l.jsxs("div",{className:"mx-4 mt-4 p-4 rounded-lg bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30",children:[se&&l.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[l.jsx(Ts,{className:"w-5 h-5 text-accent-primary"}),l.jsx("span",{className:"text-2xl font-bold text-white",children:se}),l.jsx("span",{className:"text-gray-300",children:"days to go"})]}),l.jsx("p",{className:"text-sm text-gray-200",children:M()})]}),l.jsxs("div",{className:"mx-4 mt-4 p-3 rounded-lg bg-dark-700",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(ni,{className:"w-5 h-5 text-accent-secondary"}),l.jsx("span",{className:"text-white font-medium",children:"Today"})]}),re.isRestDay?l.jsx("span",{className:"text-gray-400",children:" Rest Day"}):l.jsxs("span",{className:"text-gray-300",children:[re.completedSessions,"/",re.totalSessions," sessions"]})]}),!re.isRestDay&&re.sessionNames&&l.jsx("p",{className:"text-sm text-gray-400 mt-1 ml-7",children:re.sessionNames})]}),l.jsxs("div",{className:"p-4 space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[l.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[l.jsx(Rs,{className:"w-4 h-4"}),"This Week"]}),l.jsxs("span",{className:"text-white font-medium",children:[ee.completed,"/",ee.target," workouts"]})]}),l.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full rounded-full transition-all duration-500 bg-accent-primary",style:{width:`${ee.percentage}%`}})})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[l.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[l.jsx(ri,{className:"w-4 h-4"}),"Calories Today"]}),l.jsxs("span",{className:`font-medium ${ie.percentOfTarget>100?"text-orange-400":"text-green-400"}`,children:[ie.consumed.toLocaleString()," / ",ie.target.toLocaleString()]})]}),l.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${ie.percentOfTarget<=100?"bg-green-500":"bg-orange-500"}`,style:{width:`${Math.min(ie.percentOfTarget,100)}%`}})}),ie.remaining>0&&l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[ie.remaining," kcal remaining"]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[l.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[l.jsx(Li,{className:"w-4 h-4"}),ae.phase," Phase"]}),l.jsxs("span",{className:"text-white font-medium",children:["Week ",ae.currentWeek," of ",ae.totalWeeks]})]}),l.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-accent-secondary rounded-full transition-all duration-500",style:{width:`${ae.percentage}%`}})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[l.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:v?.length||0}),l.jsx("p",{className:"text-xs text-gray-400",children:"Total Workouts"})]}),l.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:x?.length||0}),l.jsx("p",{className:"text-xs text-gray-400",children:"Meals Logged"})]})]})]})]})}function Q1({profile:f,program:p}){const[x,v]=Re.useState(!0);if(!p)return null;const{name:N,description:w,totalWeeks:I,currentWeek:M,currentPhase:T,phases:A,athleteLevel:P,daysPerWeek:j,paces:se,baseline:re,progressionRules:ee,primaryGoal:ie,primarySubtype:ae,secondaryGoal:ue,isHybrid:ce,allowDoubleDays:oe,weeksUntilGoal:xe}=p,Ee=()=>{if(!A||A.length===0)return[];const ne=[];let K=null;return A.forEach((Se,B)=>{const me=B+1;!K||K.name!==Se?(K&&ne.push(K),K={name:Se,startWeek:me,endWeek:me,weeks:1}):(K.endWeek=me,K.weeks++)}),K&&ne.push(K),ne},he=ne=>{const K={Base:{focus:"Building aerobic foundation & movement patterns",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Increasing volume & introducing intensity",intensity:"Moderate",icon:""},"Build 2":{focus:"Peak volume & race-specific workouts",intensity:"Moderate-High",icon:""},Build:{focus:"Increasing mileage & race-specific workouts",intensity:"Moderate-High",icon:""},Peak:{focus:"Sharpening fitness & race simulation",intensity:"High",icon:""},Taper:{focus:"Reducing volume for race readiness",intensity:"Low (recovery)",icon:""},Deload:{focus:"Active recovery & adaptation",intensity:"Low",icon:""}},Se={Base:{focus:"Building movement patterns & work capacity",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Progressive overload & strength gains",intensity:"Moderate",icon:""},"Build 2":{focus:"Heavy singles & competition prep",intensity:"Moderate-High",icon:""},Build:{focus:"Progressive overload & strength gains",intensity:"Moderate-High",icon:""},Peak:{focus:"Testing maxes & competition preparation",intensity:"High",icon:""},Taper:{focus:"Reducing volume for max strength",intensity:"Low (maintain)",icon:""},Deload:{focus:"Active recovery & CNS restoration",intensity:"Low",icon:""}},B={Base:{focus:"Building mind-muscle connection & form",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Increasing volume & hypertrophy",intensity:"Moderate",icon:""},"Build 2":{focus:"Peak volume & maximum pump",intensity:"Moderate-High",icon:""},Build:{focus:"Progressive overload & muscle building",intensity:"Moderate-High",icon:""},Peak:{focus:"Maximum intensity & muscle definition",intensity:"High",icon:""},Taper:{focus:"Reducing fatigue for peak aesthetics",intensity:"Low (maintain)",icon:""},Deload:{focus:"Active recovery & muscle repair",intensity:"Low",icon:""}};let me;return ie==="endurance"?me=K:ie==="strength"?me=Se:ie==="aesthetic"?me=B:me=Se,me[ne]||{focus:"Training adaptation",intensity:"Moderate",icon:""}},G=()=>{if(ie!=="endurance"||!re?.endurance)return null;const ne=re.endurance.currentMileage||20,K=P==="elite"?60:P==="advanced"?50:40,Se=[];let B=ne;for(let me=1;me<=I;me++)(me===1||me===Math.floor(I*.25)||me===Math.floor(I*.5)||me===Math.floor(I*.75)||me===I-2||me===I)&&Se.push({week:me,mileage:Math.round(B)}),B=Math.min(B*1.05,K);return{starting:ne,peak:K,milestones:Se}},pe=()=>{const K=(p.weeklySchedule||[]).filter(B=>!B.isRestDay),Se=K.reduce((B,me)=>B+(me.sessions?.reduce((q,le)=>q+(le.exercises?.length||0),0)||0),0);return{workoutDays:K.length,totalExercises:Se,avgExercisesPerDay:Math.round(Se/Math.max(K.length,1))}},de=Ee(),nt=G(),Xe=pe();return l.jsxs("div",{className:"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden",children:[l.jsxs("button",{onClick:()=>v(!x),className:"w-full px-4 py-3 border-b border-dark-600 flex items-center justify-between hover:bg-dark-700 transition-colors",children:[l.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[l.jsx(R1,{className:"w-5 h-5 text-accent-primary"}),"Program Overview"]}),x?l.jsx(j1,{className:"w-5 h-5 text-gray-400"}):l.jsx(Tc,{className:"w-5 h-5 text-gray-400"})]}),x&&l.jsxs("div",{className:"p-4 space-y-5",children:[l.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30",children:[l.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:N}),l.jsx("p",{className:"text-sm text-gray-300",children:w}),l.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-xs",children:[l.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-full text-gray-300",children:[I," weeks"]}),l.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-full text-gray-300",children:[j," days/week"]}),l.jsxs("span",{className:"px-2 py-1 bg-accent-primary/30 rounded-full text-accent-primary",children:[P," level"]}),xe&&l.jsxs("span",{className:"px-2 py-1 bg-accent-secondary/30 rounded-full text-accent-secondary",children:[xe," weeks to race"]})]})]}),(ce||ae==="triathlon")&&l.jsxs("div",{className:"p-4 rounded-lg bg-dark-700 border border-dark-500",children:[l.jsxs("h5",{className:"text-sm font-medium text-white mb-3 flex items-center gap-2",children:[ae==="triathlon"?"":"",ae==="triathlon"?"Triathlon Training Structure":"Hybrid Program Structure"]}),l.jsx("div",{className:"space-y-3 text-sm",children:ae==="triathlon"?l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-gray-300",children:["This program combines ",l.jsx("span",{className:"text-cyan-400 font-medium",children:"swim"}),","," ",l.jsx("span",{className:"text-orange-400 font-medium",children:"bike"}),", and"," ",l.jsx("span",{className:"text-green-400 font-medium",children:"run"})," training with"," ",l.jsx("span",{className:"text-accent-primary font-medium",children:"injury prevention strength"})," work."]}),l.jsxs("ul",{className:"space-y-2 text-gray-400",children:[l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-accent-primary",children:""}),l.jsx("span",{children:"3 strength sessions/week (hip stability, core, shoulders)"})]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-accent-primary",children:""}),l.jsx("span",{children:"Double day sessions (AM cardio + PM strength)"})]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-accent-primary",children:""}),l.jsx("span",{children:"Brick workouts for race-day transitions"})]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-accent-primary",children:""}),l.jsx("span",{children:"Periodized build to peak race fitness"})]})]})]}):l.jsxs(l.Fragment,{children:[l.jsxs("p",{className:"text-gray-300",children:["This hybrid program balances ",l.jsx("span",{className:"text-accent-primary font-medium",children:ie})," training with ",l.jsx("span",{className:"text-accent-secondary font-medium",children:ue})," work for well-rounded athletic development."]}),l.jsxs("ul",{className:"space-y-2 text-gray-400",children:[l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-accent-primary",children:""}),l.jsxs("span",{children:["Minimum 3 ",ue," sessions strategically placed"]})]}),oe&&l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-accent-primary",children:""}),l.jsx("span",{children:"Double days on recovery/easy training days"})]}),l.jsxs("li",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"text-accent-primary",children:""}),l.jsx("span",{children:"Smart scheduling to avoid interference"})]})]})]})})]}),l.jsxs("div",{children:[l.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[l.jsx(Ts,{className:"w-4 h-4"}),"Training Phases"]}),l.jsx("div",{className:"space-y-2",children:de.map((ne,K)=>{const Se=he(ne.name),B=ne.name===T,me={Base:{border:"border-l-blue-500",bg:"bg-blue-500/5"},Build:{border:"border-l-orange-500",bg:"bg-orange-500/5"},"Build 1":{border:"border-l-orange-500",bg:"bg-orange-500/5"},"Build 2":{border:"border-l-red-500",bg:"bg-red-500/5"},Peak:{border:"border-l-purple-500",bg:"bg-purple-500/5"},Taper:{border:"border-l-cyan-500",bg:"bg-cyan-500/5"},Deload:{border:"border-l-green-500",bg:"bg-green-500/5"}},q=me[ne.name]||me.Base,le=()=>{if(ne.weeks===1)return`Week ${ne.startWeek}`;if(ne.weeks<=3){const X=[];for(let z=ne.startWeek;z<=ne.endWeek;z++)X.push(z);return`Weeks ${X.join(", ")}`}else return`Weeks ${ne.startWeek}${ne.endWeek}`};return l.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${q.border} ${B?"bg-accent-primary/20 border border-l-4 border-accent-primary/50":`${q.bg} border border-dark-600`}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{children:Se.icon}),l.jsx("span",{className:"font-medium text-white",children:ne.name}),B&&l.jsx("span",{className:"text-xs px-2 py-0.5 bg-accent-primary rounded-full text-white",children:"Current"})]}),l.jsxs("div",{className:"text-right",children:[l.jsx("span",{className:"text-xs text-accent-primary font-medium",children:le()}),l.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",ne.weeks," ",ne.weeks===1?"week":"weeks",")"]})]})]}),l.jsx("p",{className:"text-xs text-gray-400",children:Se.focus}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Intensity: ",Se.intensity]})]},K)})})]}),nt&&l.jsxs("div",{children:[l.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[l.jsx(Rs,{className:"w-4 h-4"}),"Weekly Mileage Progression"]}),l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"text-gray-400 text-sm",children:"Start"}),l.jsx("span",{className:"text-gray-400 text-sm",children:"Peak"})]}),l.jsxs("div",{className:"relative h-8 bg-dark-600 rounded-full overflow-hidden",children:[l.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-accent-primary to-accent-secondary rounded-full",style:{width:`${nt.starting/nt.peak*100}%`}}),l.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-3",children:[l.jsxs("span",{className:"text-xs font-medium text-white",children:[nt.starting," mi"]}),l.jsxs("span",{className:"text-xs font-medium text-white",children:[nt.peak," mi"]})]})]}),l.jsx("div",{className:"mt-3 grid grid-cols-3 gap-2 text-center",children:nt.milestones.slice(0,3).map((ne,K)=>l.jsxs("div",{className:"text-xs",children:[l.jsxs("span",{className:"text-gray-500",children:["Wk ",ne.week]}),l.jsxs("p",{className:"text-white font-medium",children:[ne.mileage," mi"]})]},K))})]})]}),se&&l.jsxs("div",{children:[l.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[l.jsx(Is,{className:"w-4 h-4"}),"Your Training Paces"]}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{label:"Easy",pace:se.easyPace,zone:"Zone 2"},{label:"Tempo",pace:se.tempoPace,zone:"Zone 3-4"},{label:"Interval",pace:se.intervalPace,zone:"Zone 4-5"},{label:"Long Run",pace:se.longRunPace,zone:"Zone 2"}].map((ne,K)=>l.jsxs("div",{className:"p-2 bg-dark-700 rounded-lg",children:[l.jsx("span",{className:"text-xs text-gray-400",children:ne.label}),l.jsx("p",{className:"text-sm font-medium text-white",children:ne.pace}),l.jsx("span",{className:"text-xs text-gray-500",children:ne.zone})]},K))}),se.currentPace&&se.goalPace!==se.currentPace&&l.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Current: ",se.currentPace,"  Goal: ",se.goalPace]})]}),re?.strength?.lifts?.length>0&&l.jsxs("div",{children:[l.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[l.jsx(ni,{className:"w-4 h-4"}),"Your Lift Targets"]}),l.jsx("div",{className:"space-y-2",children:re.strength.lifts.map((ne,K)=>l.jsxs("div",{className:"p-2 bg-dark-700 rounded-lg flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-white",children:ne.exercise}),l.jsxs("div",{className:"text-right",children:[l.jsxs("span",{className:"text-sm text-gray-400",children:[ne.current1RM,"lbs"]}),l.jsx("span",{className:"text-gray-500 mx-1",children:""}),l.jsxs("span",{className:"text-sm text-accent-secondary font-medium",children:[ne.target1RM,"lbs"]})]})]},K))})]}),l.jsxs("div",{children:[l.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[l.jsx(Rc,{className:"w-4 h-4"}),"Weekly Structure"]}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:Xe.workoutDays}),l.jsx("p",{className:"text-xs text-gray-400",children:"Workout Days"})]}),l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:Xe.totalExercises}),l.jsx("p",{className:"text-xs text-gray-400",children:"Exercises/Week"})]}),l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:7-Xe.workoutDays}),l.jsx("p",{className:"text-xs text-gray-400",children:"Rest Days"})]})]})]}),l.jsxs("div",{children:[l.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[l.jsx(Pr,{className:"w-4 h-4"}),"Program Principles"]}),l.jsxs("div",{className:"space-y-2",children:[ee&&l.jsxs(l.Fragment,{children:[ee.mileageIncrease&&l.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[l.jsx(T1,{className:"w-4 h-4 text-accent-warning mt-0.5 flex-shrink-0"}),l.jsx("span",{className:"text-gray-300",children:ee.mileageIncrease})]}),ee.strengthIncrease&&l.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[l.jsx(Rs,{className:"w-4 h-4 text-accent-success mt-0.5 flex-shrink-0"}),l.jsx("span",{className:"text-gray-300",children:ee.strengthIncrease})]}),ee.deloadProtocol&&l.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[l.jsx(Pr,{className:"w-4 h-4 text-accent-primary mt-0.5 flex-shrink-0"}),l.jsx("span",{className:"text-gray-300",children:ee.deloadProtocol})]})]}),l.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[l.jsx(Br,{className:"w-4 h-4 text-accent-secondary mt-0.5 flex-shrink-0"}),l.jsx("span",{className:"text-gray-300",children:"RPE-based intensity to auto-regulate based on daily readiness"})]})]})]})]})]})}var Fe;(function(f){f[f.QR_CODE=0]="QR_CODE",f[f.AZTEC=1]="AZTEC",f[f.CODABAR=2]="CODABAR",f[f.CODE_39=3]="CODE_39",f[f.CODE_93=4]="CODE_93",f[f.CODE_128=5]="CODE_128",f[f.DATA_MATRIX=6]="DATA_MATRIX",f[f.MAXICODE=7]="MAXICODE",f[f.ITF=8]="ITF",f[f.EAN_13=9]="EAN_13",f[f.EAN_8=10]="EAN_8",f[f.PDF_417=11]="PDF_417",f[f.RSS_14=12]="RSS_14",f[f.RSS_EXPANDED=13]="RSS_EXPANDED",f[f.UPC_A=14]="UPC_A",f[f.UPC_E=15]="UPC_E",f[f.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var Fd=new Map([[Fe.QR_CODE,"QR_CODE"],[Fe.AZTEC,"AZTEC"],[Fe.CODABAR,"CODABAR"],[Fe.CODE_39,"CODE_39"],[Fe.CODE_93,"CODE_93"],[Fe.CODE_128,"CODE_128"],[Fe.DATA_MATRIX,"DATA_MATRIX"],[Fe.MAXICODE,"MAXICODE"],[Fe.ITF,"ITF"],[Fe.EAN_13,"EAN_13"],[Fe.EAN_8,"EAN_8"],[Fe.PDF_417,"PDF_417"],[Fe.RSS_14,"RSS_14"],[Fe.RSS_EXPANDED,"RSS_EXPANDED"],[Fe.UPC_A,"UPC_A"],[Fe.UPC_E,"UPC_E"],[Fe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Ud;(function(f){f[f.UNKNOWN=0]="UNKNOWN",f[f.URL=1]="URL"})(Ud||(Ud={}));function J1(f){return Object.values(Fe).includes(f)}var Gl;(function(f){f[f.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",f[f.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Gl||(Gl={}));var $1=(function(){function f(){}return f.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",f.SCAN_DEFAULT_FPS=2,f.DEFAULT_DISABLE_FLIP=!1,f.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,f.DEFAULT_SUPPORTED_SCAN_TYPE=[Gl.SCAN_TYPE_CAMERA,Gl.SCAN_TYPE_FILE],f})(),x0=(function(){function f(p,x){this.format=p,this.formatName=x}return f.prototype.toString=function(){return this.formatName},f.create=function(p){if(!Fd.has(p))throw"".concat(p," not in html5QrcodeSupportedFormatsTextMap");return new f(p,Fd.get(p))},f})(),Wd=(function(){function f(){}return f.createFromText=function(p){var x={text:p};return{decodedText:p,result:x}},f.createFromQrcodeResult=function(p){return{decodedText:p.text,result:p}},f})(),Ac;(function(f){f[f.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",f[f.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",f[f.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Ac||(Ac={}));var eh=(function(){function f(){}return f.createFrom=function(p){return{errorMessage:p,type:Ac.UNKWOWN_ERROR}},f})(),th=(function(){function f(p){this.verbose=p}return f.prototype.log=function(p){this.verbose&&console.log(p)},f.prototype.warn=function(p){this.verbose&&console.warn(p)},f.prototype.logError=function(p,x){(this.verbose||x===!0)&&console.error(p)},f.prototype.logErrors=function(p){if(p.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(p)},f})();function Jr(f){return typeof f>"u"||f===null}var Oi=(function(){function f(){}return f.codeParseError=function(p){return"QR code parse error, error = ".concat(p)},f.errorGettingUserMedia=function(p){return"Error getting userMedia, error = ".concat(p)},f.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},f.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},f.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},f.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},f.scannerPaused=function(){return"Scanner paused"},f})(),g0=(function(){function f(){}return f.isMediaStreamConstraintsValid=function(p,x){if(typeof p!="object"){var v=typeof p;return x.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(v,"."),!0),!1}for(var N=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],w=new Set(N),I=Object.keys(p),M=0,T=I;M<T.length;M++){var A=T[M];if(w.has(A))return x.logError("".concat(A," is not supported videoConstaints."),!0),!1}return!0},f})(),Ra={exports:{}},nh=Ra.exports,zd;function rh(){return zd||(zd=1,(function(f,p){(function(x,v){v(p)})(nh,(function(x){function v(C){return C==null}var N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,e){C.__proto__=e}||function(C,e){for(var n in e)e.hasOwnProperty(n)&&(C[n]=e[n])};function w(C,e){N(C,e);function n(){this.constructor=C}C.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function I(C,e){var n=Object.setPrototypeOf;n?n(C,e):C.__proto__=e}function M(C,e){e===void 0&&(e=C.constructor);var n=Error.captureStackTrace;n&&n(C,e)}var T=(function(C){w(e,C);function e(n){var r=this.constructor,i=C.call(this,n)||this;return Object.defineProperty(i,"name",{value:r.name,enumerable:!1}),I(i,r.prototype),M(i),i}return e})(Error);class A extends T{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}A.kind="Exception";class P extends A{}P.kind="ArgumentException";class j extends A{}j.kind="IllegalArgumentException";class se{constructor(e){if(this.binarizer=e,e===null)throw new j("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,r,i){const a=this.binarizer.getLuminanceSource().crop(e,n,r,i);return new se(this.binarizer.createBinarizer(a))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new se(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new se(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class re extends A{static getChecksumInstance(){return new re}}re.kind="ChecksumException";class ee{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ie{static arraycopy(e,n,r,i,a){for(;a--;)r[i++]=e[n++]}static currentTimeMillis(){return Date.now()}}class ae extends A{}ae.kind="IndexOutOfBoundsException";class ue extends ae{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}ue.kind="ArrayIndexOutOfBoundsException";class ce{static fill(e,n){for(let r=0,i=e.length;r<i;r++)e[r]=n}static fillWithin(e,n,r,i){ce.rangeCheck(e.length,n,r);for(let a=n;a<r;a++)e[a]=i}static rangeCheck(e,n,r){if(n>r)throw new j("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new ue(n);if(r>e)throw new ue(r)}static asList(...e){return e}static create(e,n,r){return Array.from({length:e}).map(a=>Array.from({length:n}).fill(r))}static createInt32Array(e,n,r){return Array.from({length:e}).map(a=>Int32Array.from({length:n}).fill(r))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const r of e)n=31*n+r;return n}static fillUint8Array(e,n){for(let r=0;r!==e.length;r++)e[r]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)}static copyOfRange(e,n,r){const i=r-n,a=new Int32Array(i);return ie.arraycopy(e,n,a,0,i),a}static binarySearch(e,n,r){r===void 0&&(r=ce.numberComparator);let i=0,a=e.length-1;for(;i<=a;){const o=a+i>>1,u=r(n,e[o]);if(u>0)i=o+1;else if(u<0)a=o-1;else return o}return-i-1}static numberComparator(e,n){return e-n}}class oe{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}oe.MIN_VALUE_32_BITS=-2147483648,oe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class xe{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=xe.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=xe.makeArray(e);ie.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const r=this.bits;let i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);const o=r.length;for(;a===0;){if(++i===o)return n;a=r[i]}const u=i*32+oe.numberOfTrailingZeros(a);return u>n?n:u}getNextUnset(e){const n=this.size;if(e>=n)return n;const r=this.bits;let i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);const o=r.length;for(;a===0;){if(++i===o)return n;a=~r[i]}const u=i*32+oe.numberOfTrailingZeros(a);return u>n?n:u}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new j;if(n===e)return;n--;const r=Math.floor(e/32),i=Math.floor(n/32),a=this.bits;for(let o=r;o<=i;o++){const u=o>r?0:e&31,g=(2<<(o<i?31:n&31))-(1<<u);a[o]|=g}}clear(){const e=this.bits.length,n=this.bits;for(let r=0;r<e;r++)n[r]=0}isRange(e,n,r){if(n<e||e<0||n>this.size)throw new j;if(n===e)return!0;n--;const i=Math.floor(e/32),a=Math.floor(n/32),o=this.bits;for(let u=i;u<=a;u++){const h=u>i?0:e&31,b=(2<<(u<a?31:n&31))-(1<<h)&4294967295;if((o[u]&b)!==(r?b:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new j("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let r=0;r<n;r++)this.appendBit(e.get(r))}xor(e){if(this.size!==e.size)throw new j("Sizes don't match");const n=this.bits;for(let r=0,i=n.length;r<i;r++)n[r]^=e.bits[r]}toBytes(e,n,r,i){for(let a=0;a<i;a++){let o=0;for(let u=0;u<8;u++)this.get(e)&&(o|=1<<7-u),e++;n[r+a]=o}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,i=this.bits;for(let a=0;a<r;a++){let o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[n-a]=o}if(this.size!==r*32){const a=r*32-this.size;let o=e[0]>>>a;for(let u=1;u<r;u++){const h=e[u];o|=h<<32-a,e[u-1]=o,o=h>>>a}e[r-1]=o}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof xe))return!1;const n=e;return this.size===n.size&&ce.equals(this.bits,n.bits)}hashCode(){return 31*this.size+ce.hashCode(this.bits)}toString(){let e="";for(let n=0,r=this.size;n<r;n++)(n&7)===0&&(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new xe(this.size,this.bits.slice())}}var Ee;(function(C){C[C.OTHER=0]="OTHER",C[C.PURE_BARCODE=1]="PURE_BARCODE",C[C.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",C[C.TRY_HARDER=3]="TRY_HARDER",C[C.CHARACTER_SET=4]="CHARACTER_SET",C[C.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",C[C.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",C[C.ASSUME_GS1=7]="ASSUME_GS1",C[C.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",C[C.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",C[C.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ee||(Ee={}));var he=Ee;class G extends A{static getFormatInstance(){return new G}}G.kind="FormatException";var pe;(function(C){C[C.Cp437=0]="Cp437",C[C.ISO8859_1=1]="ISO8859_1",C[C.ISO8859_2=2]="ISO8859_2",C[C.ISO8859_3=3]="ISO8859_3",C[C.ISO8859_4=4]="ISO8859_4",C[C.ISO8859_5=5]="ISO8859_5",C[C.ISO8859_6=6]="ISO8859_6",C[C.ISO8859_7=7]="ISO8859_7",C[C.ISO8859_8=8]="ISO8859_8",C[C.ISO8859_9=9]="ISO8859_9",C[C.ISO8859_10=10]="ISO8859_10",C[C.ISO8859_11=11]="ISO8859_11",C[C.ISO8859_13=12]="ISO8859_13",C[C.ISO8859_14=13]="ISO8859_14",C[C.ISO8859_15=14]="ISO8859_15",C[C.ISO8859_16=15]="ISO8859_16",C[C.SJIS=16]="SJIS",C[C.Cp1250=17]="Cp1250",C[C.Cp1251=18]="Cp1251",C[C.Cp1252=19]="Cp1252",C[C.Cp1256=20]="Cp1256",C[C.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",C[C.UTF8=22]="UTF8",C[C.ASCII=23]="ASCII",C[C.Big5=24]="Big5",C[C.GB18030=25]="GB18030",C[C.EUC_KR=26]="EUC_KR"})(pe||(pe={}));class de{constructor(e,n,r,...i){this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=i,de.VALUE_IDENTIFIER_TO_ECI.set(e,this),de.NAME_TO_ECI.set(r,this);const a=this.values;for(let o=0,u=a.length;o!==u;o++){const h=a[o];de.VALUES_TO_ECI.set(h,this)}for(const o of i)de.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new G("incorect value");const n=de.VALUES_TO_ECI.get(e);if(n===void 0)throw new G("incorect value");return n}static getCharacterSetECIByName(e){const n=de.NAME_TO_ECI.get(e);if(n===void 0)throw new G("incorect value");return n}equals(e){if(!(e instanceof de))return!1;const n=e;return this.getName()===n.getName()}}de.VALUE_IDENTIFIER_TO_ECI=new Map,de.VALUES_TO_ECI=new Map,de.NAME_TO_ECI=new Map,de.Cp437=new de(pe.Cp437,Int32Array.from([0,2]),"Cp437"),de.ISO8859_1=new de(pe.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),de.ISO8859_2=new de(pe.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),de.ISO8859_3=new de(pe.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),de.ISO8859_4=new de(pe.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),de.ISO8859_5=new de(pe.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),de.ISO8859_6=new de(pe.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),de.ISO8859_7=new de(pe.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),de.ISO8859_8=new de(pe.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),de.ISO8859_9=new de(pe.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),de.ISO8859_10=new de(pe.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),de.ISO8859_11=new de(pe.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),de.ISO8859_13=new de(pe.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),de.ISO8859_14=new de(pe.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),de.ISO8859_15=new de(pe.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),de.ISO8859_16=new de(pe.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),de.SJIS=new de(pe.SJIS,20,"SJIS","Shift_JIS"),de.Cp1250=new de(pe.Cp1250,21,"Cp1250","windows-1250"),de.Cp1251=new de(pe.Cp1251,22,"Cp1251","windows-1251"),de.Cp1252=new de(pe.Cp1252,23,"Cp1252","windows-1252"),de.Cp1256=new de(pe.Cp1256,24,"Cp1256","windows-1256"),de.UnicodeBigUnmarked=new de(pe.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),de.UTF8=new de(pe.UTF8,26,"UTF8","UTF-8"),de.ASCII=new de(pe.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),de.Big5=new de(pe.Big5,28,"Big5"),de.GB18030=new de(pe.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),de.EUC_KR=new de(pe.EUC_KR,30,"EUC_KR","EUC-KR");class nt extends A{}nt.kind="UnsupportedOperationException";class Xe{static decode(e,n){const r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)}static shouldDecodeOnFallback(e){return!Xe.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof de?e:de.getCharacterSetECIByName(e)}static decodeFallback(e,n){const r=this.encodingCharacterSet(n);if(Xe.isDecodeFallbackSupported(r)){let i="";for(let a=0,o=e.length;a<o;a++){let u=e[a].toString(16);u.length<2&&(u="0"+u),i+="%"+u}return decodeURIComponent(i)}if(r.equals(de.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new nt(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(de.UTF8)||e.equals(de.ISO8859_1)||e.equals(de.ASCII)}static encodeFallback(e){const r=btoa(unescape(encodeURIComponent(e))).split(""),i=[];for(let a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)}}class ne{static castAsNonUtf8Char(e,n=null){const r=n?n.getName():this.ISO88591;return Xe.decode(new Uint8Array([e]),r)}static guessEncoding(e,n){if(n!=null&&n.get(he.CHARACTER_SET)!==void 0)return n.get(he.CHARACTER_SET).toString();const r=e.length;let i=!0,a=!0,o=!0,u=0,h=0,g=0,b=0,E=0,k=0,_=0,L=0,U=0,V=0,J=0;const Ce=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Ae=0;Ae<r&&(i||a||o);Ae++){const be=e[Ae]&255;o&&(u>0?(be&128)===0?o=!1:u--:(be&128)!==0&&((be&64)===0?o=!1:(u++,(be&32)===0?h++:(u++,(be&16)===0?g++:(u++,(be&8)===0?b++:o=!1))))),i&&(be>127&&be<160?i=!1:be>159&&(be<192||be===215||be===247)&&J++),a&&(E>0?be<64||be===127||be>252?a=!1:E--:be===128||be===160||be>239?a=!1:be>160&&be<224?(k++,L=0,_++,_>U&&(U=_)):be>127?(E++,_=0,L++,L>V&&(V=L)):(_=0,L=0))}return o&&u>0&&(o=!1),a&&E>0&&(a=!1),o&&(Ce||h+g+b>0)?ne.UTF8:a&&(ne.ASSUME_SHIFT_JIS||U>=3||V>=3)?ne.SHIFT_JIS:i&&a?U===2&&k===2||J*10>=r?ne.SHIFT_JIS:ne.ISO88591:i?ne.ISO88591:a?ne.SHIFT_JIS:o?ne.UTF8:ne.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let r=-1;function i(o,u,h,g,b,E){if(o==="%%")return"%";if(n[++r]===void 0)return;o=g?parseInt(g.substr(1)):void 0;let k=b?parseInt(b.substr(1)):void 0,_;switch(E){case"s":_=n[r];break;case"c":_=n[r][0];break;case"f":_=parseFloat(n[r]).toFixed(o);break;case"p":_=parseFloat(n[r]).toPrecision(o);break;case"e":_=parseFloat(n[r]).toExponential(o);break;case"x":_=parseInt(n[r]).toString(k||16);break;case"d":_=parseFloat(parseInt(n[r],k||10).toPrecision(o)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(k);let L=parseInt(h),U=h&&h[0]+""=="0"?"0":" ";for(;_.length<L;)_=u!==void 0?_+U:U+_;return _}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)}static getBytes(e,n){return Xe.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}ne.SHIFT_JIS=de.SJIS.getName(),ne.GB2312="GB2312",ne.ISO88591=de.ISO8859_1.getName(),ne.EUC_JP="EUC_JP",ne.UTF8=de.UTF8.getName(),ne.PLATFORM_DEFAULT_ENCODING=ne.UTF8,ne.ASSUME_SHIFT_JIS=!1;class K{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ne.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,r){for(let i=n;n<n+r;i++)this.append(e[i]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class Se{constructor(e,n,r,i){if(this.width=e,this.height=n,this.rowSize=r,this.bits=i,n==null&&(n=e),this.height=n,e<1||n<1)throw new j("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,r=e[0].length,i=new Se(r,n);for(let a=0;a<n;a++){const o=e[a];for(let u=0;u<r;u++)o[u]&&i.set(u,a)}return i}static parseFromString(e,n,r){if(e===null)throw new j("stringRepresentation cannot be null");const i=new Array(e.length);let a=0,o=0,u=-1,h=0,g=0;for(;g<e.length;)if(e.charAt(g)===`
`||e.charAt(g)==="\r"){if(a>o){if(u===-1)u=a-o;else if(a-o!==u)throw new j("row lengths do not match");o=a,h++}g++}else if(e.substring(g,g+n.length)===n)g+=n.length,i[a]=!0,a++;else if(e.substring(g,g+r.length)===r)g+=r.length,i[a]=!1,a++;else throw new j("illegal character encountered: "+e.substring(g));if(a>o){if(u===-1)u=a-o;else if(a-o!==u)throw new j("row lengths do not match");h++}const b=new Se(u,h);for(let E=0;E<a;E++)i[E]&&b.set(Math.floor(E%u),Math.floor(E/u));return b}get(e,n){const r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0}set(e,n){const r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295}unset(e,n){const r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)}flip(e,n){const r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new j("input matrix dimensions do not match");const n=new xe(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits;for(let a=0,o=this.height;a<o;a++){const u=a*r,h=e.getRow(a,n).getBitArray();for(let g=0;g<r;g++)i[u+g]^=h[g]}}clear(){const e=this.bits,n=e.length;for(let r=0;r<n;r++)e[r]=0}setRegion(e,n,r,i){if(n<0||e<0)throw new j("Left and top must be nonnegative");if(i<1||r<1)throw new j("Height and width must be at least 1");const a=e+r,o=n+i;if(o>this.height||a>this.width)throw new j("The region must fit inside the matrix");const u=this.rowSize,h=this.bits;for(let g=n;g<o;g++){const b=g*u;for(let E=e;E<a;E++)h[b+Math.floor(E/32)]|=1<<(E&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new xe(this.width):n.clear();const r=this.rowSize,i=this.bits,a=e*r;for(let o=0;o<r;o++)n.setBulk(o*32,i[a+o]);return n}setRow(e,n){ie.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let r=new xe(e),i=new xe(e);for(let a=0,o=Math.floor((n+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(n-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(n-1-a,r)}getEnclosingRectangle(){const e=this.width,n=this.height,r=this.rowSize,i=this.bits;let a=e,o=n,u=-1,h=-1;for(let g=0;g<n;g++)for(let b=0;b<r;b++){const E=i[g*r+b];if(E!==0){if(g<o&&(o=g),g>h&&(h=g),b*32<a){let k=0;for(;(E<<31-k&4294967295)===0;)k++;b*32+k<a&&(a=b*32+k)}if(b*32+31>u){let k=31;for(;!(E>>>k);)k--;b*32+k>u&&(u=b*32+k)}}}return u<a||h<o?null:Int32Array.from([a,o,u-a+1,h-o+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let r=0;for(;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;const i=r/e;let a=r%e*32;const o=n[r];let u=0;for(;(o<<31-u&4294967295)===0;)u++;return a+=u,Int32Array.from([a,i])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let r=n.length-1;for(;r>=0&&n[r]===0;)r--;if(r<0)return null;const i=Math.floor(r/e);let a=Math.floor(r%e)*32;const o=n[r];let u=31;for(;!(o>>>u);)u--;return a+=u,Int32Array.from([a,i])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Se))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&ce.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ce.hashCode(this.bits),e}toString(e="X ",n="  ",r=`
`){return this.buildToString(e,n,r)}buildToString(e,n,r){let i=new K;for(let a=0,o=this.height;a<o;a++){for(let u=0,h=this.width;u<h;u++)i.append(this.get(u,a)?e:n);i.append(r)}return i.toString()}clone(){return new Se(this.width,this.height,this.rowSize,this.bits.slice())}}class B extends A{static getNotFoundInstance(){return new B}}B.kind="NotFoundException";class me extends ee{constructor(e){super(e),this.luminances=me.EMPTY,this.buckets=new Int32Array(me.LUMINANCE_BUCKETS)}getBlackRow(e,n){const r=this.getLuminanceSource(),i=r.getWidth();n==null||n.getSize()<i?n=new xe(i):n.clear(),this.initArrays(i);const a=r.getRow(e,this.luminances),o=this.buckets;for(let h=0;h<i;h++)o[(a[h]&255)>>me.LUMINANCE_SHIFT]++;const u=me.estimateBlackPoint(o);if(i<3)for(let h=0;h<i;h++)(a[h]&255)<u&&n.set(h);else{let h=a[0]&255,g=a[1]&255;for(let b=1;b<i-1;b++){const E=a[b+1]&255;(g*4-h-E)/2<u&&n.set(b),h=g,g=E}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),r=e.getHeight(),i=new Se(n,r);this.initArrays(n);const a=this.buckets;for(let h=1;h<5;h++){const g=Math.floor(r*h/5),b=e.getRow(g,this.luminances),E=Math.floor(n*4/5);for(let k=Math.floor(n/5);k<E;k++){const _=b[k]&255;a[_>>me.LUMINANCE_SHIFT]++}}const o=me.estimateBlackPoint(a),u=e.getMatrix();for(let h=0;h<r;h++){const g=h*n;for(let b=0;b<n;b++)(u[g+b]&255)<o&&i.set(b,h)}return i}createBinarizer(e){return new me(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let r=0;r<me.LUMINANCE_BUCKETS;r++)n[r]=0}static estimateBlackPoint(e){const n=e.length;let r=0,i=0,a=0;for(let b=0;b<n;b++)e[b]>a&&(i=b,a=e[b]),e[b]>r&&(r=e[b]);let o=0,u=0;for(let b=0;b<n;b++){const E=b-i,k=e[b]*E*E;k>u&&(o=b,u=k)}if(i>o){const b=i;i=o,o=b}if(o-i<=n/16)throw new B;let h=o-1,g=-1;for(let b=o-1;b>i;b--){const E=b-i,k=E*E*(o-b)*(r-e[b]);k>g&&(h=b,g=k)}return h<<me.LUMINANCE_SHIFT}}me.LUMINANCE_BITS=5,me.LUMINANCE_SHIFT=8-me.LUMINANCE_BITS,me.LUMINANCE_BUCKETS=1<<me.LUMINANCE_BITS,me.EMPTY=Uint8ClampedArray.from([0]);class q extends me{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),r=e.getHeight();if(n>=q.MINIMUM_DIMENSION&&r>=q.MINIMUM_DIMENSION){const i=e.getMatrix();let a=n>>q.BLOCK_SIZE_POWER;(n&q.BLOCK_SIZE_MASK)!==0&&a++;let o=r>>q.BLOCK_SIZE_POWER;(r&q.BLOCK_SIZE_MASK)!==0&&o++;const u=q.calculateBlackPoints(i,a,o,n,r),h=new Se(n,r);q.calculateThresholdForBlock(i,a,o,n,r,u,h),this.matrix=h}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new q(e)}static calculateThresholdForBlock(e,n,r,i,a,o,u){const h=a-q.BLOCK_SIZE,g=i-q.BLOCK_SIZE;for(let b=0;b<r;b++){let E=b<<q.BLOCK_SIZE_POWER;E>h&&(E=h);const k=q.cap(b,2,r-3);for(let _=0;_<n;_++){let L=_<<q.BLOCK_SIZE_POWER;L>g&&(L=g);const U=q.cap(_,2,n-3);let V=0;for(let Ce=-2;Ce<=2;Ce++){const Ae=o[k+Ce];V+=Ae[U-2]+Ae[U-1]+Ae[U]+Ae[U+1]+Ae[U+2]}const J=V/25;q.thresholdBlock(e,L,E,J,i,u)}}}static cap(e,n,r){return e<n?n:e>r?r:e}static thresholdBlock(e,n,r,i,a,o){for(let u=0,h=r*a+n;u<q.BLOCK_SIZE;u++,h+=a)for(let g=0;g<q.BLOCK_SIZE;g++)(e[h+g]&255)<=i&&o.set(n+g,r+u)}static calculateBlackPoints(e,n,r,i,a){const o=a-q.BLOCK_SIZE,u=i-q.BLOCK_SIZE,h=new Array(r);for(let g=0;g<r;g++){h[g]=new Int32Array(n);let b=g<<q.BLOCK_SIZE_POWER;b>o&&(b=o);for(let E=0;E<n;E++){let k=E<<q.BLOCK_SIZE_POWER;k>u&&(k=u);let _=0,L=255,U=0;for(let J=0,Ce=b*i+k;J<q.BLOCK_SIZE;J++,Ce+=i){for(let Ae=0;Ae<q.BLOCK_SIZE;Ae++){const be=e[Ce+Ae]&255;_+=be,be<L&&(L=be),be>U&&(U=be)}if(U-L>q.MIN_DYNAMIC_RANGE)for(J++,Ce+=i;J<q.BLOCK_SIZE;J++,Ce+=i)for(let Ae=0;Ae<q.BLOCK_SIZE;Ae++)_+=e[Ce+Ae]&255}let V=_>>q.BLOCK_SIZE_POWER*2;if(U-L<=q.MIN_DYNAMIC_RANGE&&(V=L/2,g>0&&E>0)){const J=(h[g-1][E]+2*h[g][E-1]+h[g-1][E-1])/4;L<J&&(V=J)}h[g][E]=V}}return h}}q.BLOCK_SIZE_POWER=3,q.BLOCK_SIZE=1<<q.BLOCK_SIZE_POWER,q.BLOCK_SIZE_MASK=q.BLOCK_SIZE-1,q.MINIMUM_DIMENSION=q.BLOCK_SIZE*5,q.MIN_DYNAMIC_RANGE=24;class le{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,r,i){throw new nt("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new nt("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new nt("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new K;for(let r=0;r<this.height;r++){const i=this.getRow(r,e);for(let a=0;a<this.width;a++){const o=i[a]&255;let u;o<64?u="#":o<128?u="+":o<192?u=".":u=" ",n.append(u)}n.append(`
`)}return n.toString()}}class X extends le{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const r=this.delegate.getRow(e,n),i=this.getWidth();for(let a=0;a<i;a++)r[a]=255-(r[a]&255);return r}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(n);for(let i=0;i<n;i++)r[i]=255-(e[i]&255);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,r,i){return new X(this.delegate.crop(e,n,r,i))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new X(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new X(this.delegate.rotateCounterClockwise45())}}class z extends le{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=z.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return z.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,r){const i=new Uint8ClampedArray(n*r);for(let a=0,o=0,u=e.length;a<u;a+=4,o++){let h;if(e[a+3]===0)h=255;else{const b=e[a],E=e[a+1],k=e[a+2];h=306*b+601*E+117*k+512>>10}i[o]=h}return i}getRow(e,n){if(e<0||e>=this.getHeight())throw new j("Requested row is outside the image: "+e);const r=this.getWidth(),i=e*r;return n===null?n=this.buffer.slice(i,i+r):(n.length<r&&(n=new Uint8ClampedArray(r)),n.set(this.buffer.slice(i,i+r))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,r,i){return super.crop(e,n,r,i),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),r=n.getContext("2d"),i=e*z.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*o),h=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*o);return n.width=u,n.height=h,r.translate(u/2,h/2),r.rotate(i),r.drawImage(this.canvas,a/-2,o/-2),this.buffer=z.makeBufferFromCanvasImageData(n),this}invert(){return new X(this)}}z.DEGREE_TO_RADIANS=Math.PI/180;class D{constructor(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var W=(globalThis||Ul||self||window||void 0)&&(globalThis||Ul||self||window||void 0).__awaiter||function(C,e,n,r){function i(a){return a instanceof n?a:new n(function(o){o(a)})}return new(n||(n=Promise))(function(a,o){function u(b){try{g(r.next(b))}catch(E){o(E)}}function h(b){try{g(r.throw(b))}catch(E){o(E)}}function g(b){b.done?a(b.value):i(b.value).then(u,h)}g((r=r.apply(C,e||[])).next())})};class ke{constructor(e,n=500,r){this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return W(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const r of e){const i=r.kind==="video"?"videoinput":r.kind;if(i!=="videoinput")continue;const a=r.deviceId||r.id,o=r.label||`Video device ${n.length+1}`,u=r.groupId,h={deviceId:a,label:o,kind:i,groupId:u};n.push(h)}return n})}getVideoInputDevices(){return W(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new D(n.deviceId,n.label))})}findDeviceById(e){return W(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(r=>r.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return W(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return W(this,void 0,void 0,function*(){this.reset();let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const i={video:r};return yield this.decodeOnceFromConstraints(i,n)})}decodeOnceFromConstraints(e,n){return W(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(r,n)})}decodeOnceFromStream(e,n){return W(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(e,n,r){return W(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,r)})}decodeFromVideoDevice(e,n,r){return W(this,void 0,void 0,function*(){let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const a={video:i};return yield this.decodeFromConstraints(a,n,r)})}decodeFromConstraints(e,n,r){return W(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(i,n,r)})}decodeFromStream(e,n,r){return W(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(i,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return W(this,void 0,void 0,function*(){const r=this.prepareVideoElement(n);return this.addVideoSource(r,e),this.videoElement=r,this.stream=e,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(e){return new Promise((n,r)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return W(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const r=document.getElementById(e);if(!r)throw new P(`element with id '${e}' not found`);if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new P(`element with id '${e}' must be an ${n} element`);return r}decodeFromImage(e,n){if(!e&&!n)throw new P("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new P("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,r){if(e===void 0&&n===void 0)throw new P("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)}decodeFromImageElement(e){if(!e)throw new P("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)}_decodeFromVideoElementSetup(e){if(!e)throw new P("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new P("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const r=this._decodeOnLoadImage(n);return n.src=e,r}decodeFromVideoUrl(e){if(!e)throw new P("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r}decodeFromVideoUrlContinuously(e,n){if(!e)throw new P("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,n);return r.src=e,i}_decodeOnLoadImage(e){return new Promise((n,r)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,r),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return W(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return W(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,r=!0){this._stopAsyncDecode=!1;const i=(a,o)=>{if(this._stopAsyncDecode){o(new B("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const u=this.decode(e);a(u)}catch(u){const h=n&&u instanceof B,b=(u instanceof re||u instanceof G)&&r;if(h||b)return setTimeout(i,this._timeBetweenDecodingAttempts,a,o);o(u)}};return new Promise((a,o)=>i(a,o))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const i=this.decode(e);n(i,null),setTimeout(r,this.timeBetweenScansMillis)}catch(i){n(null,i);const a=i instanceof re||i instanceof G,o=i instanceof B;(a||o)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,r){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,r=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),r=new z(n),i=new q(r);return new se(i)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const r=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=r}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=i+"px",n.width=r,n.height=i,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class _e{constructor(e,n,r=n==null?0:8*n.length,i,a,o=ie.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=ie.currentTimeMillis():this.timestamp=o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const r=new Array(n.length+e.length);ie.arraycopy(n,0,r,0,n.length),ie.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ye;(function(C){C[C.AZTEC=0]="AZTEC",C[C.CODABAR=1]="CODABAR",C[C.CODE_39=2]="CODE_39",C[C.CODE_93=3]="CODE_93",C[C.CODE_128=4]="CODE_128",C[C.DATA_MATRIX=5]="DATA_MATRIX",C[C.EAN_8=6]="EAN_8",C[C.EAN_13=7]="EAN_13",C[C.ITF=8]="ITF",C[C.MAXICODE=9]="MAXICODE",C[C.PDF_417=10]="PDF_417",C[C.QR_CODE=11]="QR_CODE",C[C.RSS_14=12]="RSS_14",C[C.RSS_EXPANDED=13]="RSS_EXPANDED",C[C.UPC_A=14]="UPC_A",C[C.UPC_E=15]="UPC_E",C[C.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ye||(ye={}));var fe=ye,Pe;(function(C){C[C.OTHER=0]="OTHER",C[C.ORIENTATION=1]="ORIENTATION",C[C.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",C[C.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",C[C.ISSUE_NUMBER=4]="ISSUE_NUMBER",C[C.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",C[C.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",C[C.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",C[C.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",C[C.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",C[C.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Pe||(Pe={}));var je=Pe;class Me{constructor(e,n,r,i,a=-1,o=-1){this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Be{exp(e){return this.expTable[e]}log(e){if(e===0)throw new j;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class Qe{constructor(e,n){if(n.length===0)throw new j;this.field=e;const r=n.length;if(r>1&&n[0]===0){let i=1;for(;i<r&&n[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),ie.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let r;if(e===1){r=0;for(let o=0,u=n.length;o!==u;o++){const h=n[o];r=Be.addOrSubtract(r,h)}return r}r=n[0];const i=n.length,a=this.field;for(let o=1;o<i;o++)r=Be.addOrSubtract(a.multiply(e,r),n[o]);return r}addOrSubtract(e){if(!this.field.equals(e.field))throw new j("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,r=e.coefficients;if(n.length>r.length){const o=n;n=r,r=o}let i=new Int32Array(r.length);const a=r.length-n.length;ie.arraycopy(r,0,i,0,a);for(let o=a;o<r.length;o++)i[o]=Be.addOrSubtract(n[o-a],r[o]);return new Qe(this.field,i)}multiply(e){if(!this.field.equals(e.field))throw new j("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,r=n.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),u=this.field;for(let h=0;h<r;h++){const g=n[h];for(let b=0;b<a;b++)o[h+b]=Be.addOrSubtract(o[h+b],u.multiply(g,i[b]))}return new Qe(u,o)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,r=this.field,i=new Int32Array(n),a=this.coefficients;for(let o=0;o<n;o++)i[o]=r.multiply(a[o],e);return new Qe(r,i)}multiplyByMonomial(e,n){if(e<0)throw new j;if(n===0)return this.field.getZero();const r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field;for(let u=0;u<i;u++)a[u]=o.multiply(r[u],n);return new Qe(o,a)}divide(e){if(!this.field.equals(e.field))throw new j("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new j("Divide by 0");const n=this.field;let r=n.getZero(),i=this;const a=e.getCoefficient(e.getDegree()),o=n.inverse(a);for(;i.getDegree()>=e.getDegree()&&!i.isZero();){const u=i.getDegree()-e.getDegree(),h=n.multiply(i.getCoefficient(i.getDegree()),o),g=e.multiplyByMonomial(u,h),b=n.buildMonomial(u,h);r=r.addOrSubtract(b),i=i.addOrSubtract(g)}return[r,i]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){const i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class sr extends A{}sr.kind="ArithmeticException";class at extends Be{constructor(e,n,r){super(),this.primitive=e,this.size=n,this.generatorBase=r;const i=new Int32Array(n);let a=1;for(let u=0;u<n;u++)i[u]=a,a*=2,a>=n&&(a^=e,a&=n-1);this.expTable=i;const o=new Int32Array(n);for(let u=0;u<n-1;u++)o[i[u]]=u;this.logTable=o,this.zero=new Qe(this,Int32Array.from([0])),this.one=new Qe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new j;if(n===0)return this.zero;const r=new Int32Array(e+1);return r[0]=n,new Qe(this,r)}inverse(e){if(e===0)throw new sr;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+oe.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}at.AZTEC_DATA_12=new at(4201,4096,1),at.AZTEC_DATA_10=new at(1033,1024,1),at.AZTEC_DATA_6=new at(67,64,1),at.AZTEC_PARAM=new at(19,16,1),at.QR_CODE_FIELD_256=new at(285,256,0),at.DATA_MATRIX_FIELD_256=new at(301,256,1),at.AZTEC_DATA_8=at.DATA_MATRIX_FIELD_256,at.MAXICODE_FIELD_64=at.AZTEC_DATA_6;class Gn extends A{}Gn.kind="ReedSolomonException";class vn extends A{}vn.kind="IllegalStateException";class Rn{constructor(e){this.field=e}decode(e,n){const r=this.field,i=new Qe(r,e),a=new Int32Array(n);let o=!0;for(let _=0;_<n;_++){const L=i.evaluateAt(r.exp(_+r.getGeneratorBase()));a[a.length-1-_]=L,L!==0&&(o=!1)}if(o)return;const u=new Qe(r,a),h=this.runEuclideanAlgorithm(r.buildMonomial(n,1),u,n),g=h[0],b=h[1],E=this.findErrorLocations(g),k=this.findErrorMagnitudes(b,E);for(let _=0;_<E.length;_++){const L=e.length-1-r.log(E[_]);if(L<0)throw new Gn("Bad error location");e[L]=at.addOrSubtract(e[L],k[_])}}runEuclideanAlgorithm(e,n,r){if(e.getDegree()<n.getDegree()){const _=e;e=n,n=_}const i=this.field;let a=e,o=n,u=i.getZero(),h=i.getOne();for(;o.getDegree()>=(r/2|0);){let _=a,L=u;if(a=o,u=h,a.isZero())throw new Gn("r_{i-1} was zero");o=_;let U=i.getZero();const V=a.getCoefficient(a.getDegree()),J=i.inverse(V);for(;o.getDegree()>=a.getDegree()&&!o.isZero();){const Ce=o.getDegree()-a.getDegree(),Ae=i.multiply(o.getCoefficient(o.getDegree()),J);U=U.addOrSubtract(i.buildMonomial(Ce,Ae)),o=o.addOrSubtract(a.multiplyByMonomial(Ce,Ae))}if(h=U.multiply(u).addOrSubtract(L),o.getDegree()>=a.getDegree())throw new vn("Division algorithm failed to reduce polynomial?")}const g=h.getCoefficient(0);if(g===0)throw new Gn("sigmaTilde(0) was zero");const b=i.inverse(g),E=h.multiplyScalar(b),k=o.multiplyScalar(b);return[E,k]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const r=new Int32Array(n);let i=0;const a=this.field;for(let o=1;o<a.getSize()&&i<n;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==n)throw new Gn("Error locator degree does not match number of roots");return r}findErrorMagnitudes(e,n){const r=n.length,i=new Int32Array(r),a=this.field;for(let o=0;o<r;o++){const u=a.inverse(n[o]);let h=1;for(let g=0;g<r;g++)if(o!==g){const b=a.multiply(n[g],u),E=(b&1)===0?b|1:b&-2;h=a.multiply(h,E)}i[o]=a.multiply(e.evaluateAt(u),a.inverse(h)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],u))}return i}}var Dt;(function(C){C[C.UPPER=0]="UPPER",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.DIGIT=3]="DIGIT",C[C.PUNCT=4]="PUNCT",C[C.BINARY=5]="BINARY"})(Dt||(Dt={}));class vt{decode(e){this.ddata=e;let n=e.getBits(),r=this.extractBits(n),i=this.correctBits(r),a=vt.convertBoolArrayToByteArray(i),o=vt.getEncodedData(i),u=new Me(a,o,null,null);return u.setNumBits(i.length),u}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,r=Dt.UPPER,i=Dt.UPPER,a="",o=0;for(;o<n;)if(i===Dt.BINARY){if(n-o<5)break;let u=vt.readCode(e,o,5);if(o+=5,u===0){if(n-o<11)break;u=vt.readCode(e,o,11)+31,o+=11}for(let h=0;h<u;h++){if(n-o<8){o=n;break}const g=vt.readCode(e,o,8);a+=ne.castAsNonUtf8Char(g),o+=8}i=r}else{let u=i===Dt.DIGIT?4:5;if(n-o<u)break;let h=vt.readCode(e,o,u);o+=u;let g=vt.getCharacter(i,h);g.startsWith("CTRL_")?(r=i,i=vt.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(a+=g,i=r)}return a}static getTable(e){switch(e){case"L":return Dt.LOWER;case"P":return Dt.PUNCT;case"M":return Dt.MIXED;case"D":return Dt.DIGIT;case"B":return Dt.BINARY;default:return Dt.UPPER}}static getCharacter(e,n){switch(e){case Dt.UPPER:return vt.UPPER_TABLE[n];case Dt.LOWER:return vt.LOWER_TABLE[n];case Dt.MIXED:return vt.MIXED_TABLE[n];case Dt.PUNCT:return vt.PUNCT_TABLE[n];case Dt.DIGIT:return vt.DIGIT_TABLE[n];default:throw new vn("Bad table")}}correctBits(e){let n,r;this.ddata.getNbLayers()<=2?(r=6,n=at.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=at.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=at.AZTEC_DATA_10):(r=12,n=at.AZTEC_DATA_12);let i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new G;let o=e.length%r,u=new Int32Array(a);for(let k=0;k<a;k++,o+=r)u[k]=vt.readCode(e,o,r);try{new Rn(n).decode(u,a-i)}catch(k){throw new G(k)}let h=(1<<r)-1,g=0;for(let k=0;k<i;k++){let _=u[k];if(_===0||_===h)throw new G;(_===1||_===h-1)&&g++}let b=new Array(i*r-g),E=0;for(let k=0;k<i;k++){let _=u[k];if(_===1||_===h-1)b.fill(_>1,E,E+r-1),E+=r-1;else for(let L=r-1;L>=0;--L)b[E++]=(_&1<<L)!==0}return b}extractBits(e){let n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,n));if(n)for(let u=0;u<a.length;u++)a[u]=u;else{let u=i+1+2*oe.truncDivision(oe.truncDivision(i,2)-1,15),h=i/2,g=oe.truncDivision(u,2);for(let b=0;b<h;b++){let E=b+oe.truncDivision(b,15);a[h-b-1]=g-E-1,a[h+b]=g+E+1}}for(let u=0,h=0;u<r;u++){let g=(r-u)*4+(n?9:12),b=u*2,E=i-1-b;for(let k=0;k<g;k++){let _=k*2;for(let L=0;L<2;L++)o[h+_+L]=e.get(a[b+L],a[b+k]),o[h+2*g+_+L]=e.get(a[b+k],a[E-L]),o[h+4*g+_+L]=e.get(a[E-L],a[E-k]),o[h+6*g+_+L]=e.get(a[E-k],a[b+L])}h+=g*8}return o}static readCode(e,n,r){let i=0;for(let a=n;a<n+r;a++)i<<=1,e[a]&&(i|=1);return i}static readByte(e,n){let r=e.length-n;return r>=8?vt.readCode(e,n,8):vt.readCode(e,n,r)<<8-r}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let r=0;r<n.length;r++)n[r]=vt.readByte(e,8*r);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}vt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],vt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],vt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],vt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],vt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ut{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,r,i){const a=e-r,o=n-i;return Math.sqrt(a*a+o*o)}static sum(e){let n=0;for(let r=0,i=e.length;r!==i;r++){const a=e[r];n+=a}return n}}class Sr{static floatToIntBits(e){return e}}Sr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Le{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Le){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*Sr.floatToIntBits(this.x)+Sr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]);let a,o,u;if(r>=n&&r>=i?(o=e[0],a=e[1],u=e[2]):i>=r&&i>=n?(o=e[1],a=e[0],u=e[2]):(o=e[2],a=e[0],u=e[1]),this.crossProductZ(a,o,u)<0){const h=a;a=u,u=h}e[0]=a,e[1]=o,e[2]=u}static distance(e,n){return ut.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,r){const i=n.x,a=n.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)}}class es{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Ui extends es{constructor(e,n,r,i,a){super(e,n),this.compact=r,this.nbDatablocks=i,this.nbLayers=a}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ir{constructor(e,n,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=ir.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);const a=n/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new B}detect(){let e=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,u=!1,h=!1,g=!1,b=!1,E=!1;const k=this.width,_=this.height;for(;o;){o=!1;let L=!0;for(;(L||!h)&&n<k;)L=this.containsBlackPoint(r,i,n,!1),L?(n++,o=!0,h=!0):h||n++;if(n>=k){a=!0;break}let U=!0;for(;(U||!g)&&i<_;)U=this.containsBlackPoint(e,n,i,!0),U?(i++,o=!0,g=!0):g||i++;if(i>=_){a=!0;break}let V=!0;for(;(V||!b)&&e>=0;)V=this.containsBlackPoint(r,i,e,!1),V?(e--,o=!0,b=!0):b||e--;if(e<0){a=!0;break}let J=!0;for(;(J||!E)&&r>=0;)J=this.containsBlackPoint(e,n,r,!0),J?(r--,o=!0,E=!0):E||r--;if(r<0){a=!0;break}o&&(u=!0)}if(!a&&u){const L=n-e;let U=null;for(let Ae=1;U===null&&Ae<L;Ae++)U=this.getBlackPointOnSegment(e,i-Ae,e+Ae,i);if(U==null)throw new B;let V=null;for(let Ae=1;V===null&&Ae<L;Ae++)V=this.getBlackPointOnSegment(e,r+Ae,e+Ae,r);if(V==null)throw new B;let J=null;for(let Ae=1;J===null&&Ae<L;Ae++)J=this.getBlackPointOnSegment(n,r+Ae,n-Ae,r);if(J==null)throw new B;let Ce=null;for(let Ae=1;Ce===null&&Ae<L;Ae++)Ce=this.getBlackPointOnSegment(n,i-Ae,n-Ae,i);if(Ce==null)throw new B;return this.centerEdges(Ce,U,J,V)}else throw new B}getBlackPointOnSegment(e,n,r,i){const a=ut.round(ut.distance(e,n,r,i)),o=(r-e)/a,u=(i-n)/a,h=this.image;for(let g=0;g<a;g++){const b=ut.round(e+g*o),E=ut.round(n+g*u);if(h.get(b,E))return new Le(b,E)}return null}centerEdges(e,n,r,i){const a=e.getX(),o=e.getY(),u=n.getX(),h=n.getY(),g=r.getX(),b=r.getY(),E=i.getX(),k=i.getY(),_=ir.CORR;return a<this.width/2?[new Le(E-_,k+_),new Le(u+_,h+_),new Le(g-_,b-_),new Le(a+_,o-_)]:[new Le(E+_,k+_),new Le(u+_,h-_),new Le(g-_,b+_),new Le(a-_,o-_)]}containsBlackPoint(e,n,r,i){const a=this.image;if(i){for(let o=e;o<=n;o++)if(a.get(o,r))return!0}else for(let o=e;o<=n;o++)if(a.get(r,o))return!0;return!1}}ir.INIT_SIZE=10,ir.CORR=1;class si{static checkAndNudgePoints(e,n){const r=e.getWidth(),i=e.getHeight();let a=!0;for(let o=0;o<n.length&&a;o+=2){const u=Math.floor(n[o]),h=Math.floor(n[o+1]);if(u<-1||u>r||h<-1||h>i)throw new B;a=!1,u===-1?(n[o]=0,a=!0):u===r&&(n[o]=r-1,a=!0),h===-1?(n[o+1]=0,a=!0):h===i&&(n[o+1]=i-1,a=!0)}a=!0;for(let o=n.length-2;o>=0&&a;o-=2){const u=Math.floor(n[o]),h=Math.floor(n[o+1]);if(u<-1||u>r||h<-1||h>i)throw new B;a=!1,u===-1?(n[o]=0,a=!0):u===r&&(n[o]=r-1,a=!0),h===-1?(n[o+1]=0,a=!0):h===i&&(n[o+1]=i-1,a=!0)}}}class On{constructor(e,n,r,i,a,o,u,h,g){this.a11=e,this.a21=n,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=u,this.a23=h,this.a33=g}static quadrilateralToQuadrilateral(e,n,r,i,a,o,u,h,g,b,E,k,_,L,U,V){const J=On.quadrilateralToSquare(e,n,r,i,a,o,u,h);return On.squareToQuadrilateral(g,b,E,k,_,L,U,V).times(J)}transformPoints(e){const n=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,u=this.a22,h=this.a23,g=this.a31,b=this.a32,E=this.a33;for(let k=0;k<n;k+=2){const _=e[k],L=e[k+1],U=a*_+h*L+E;e[k]=(r*_+o*L+g)/U,e[k+1]=(i*_+u*L+b)/U}}transformPointsWithValues(e,n){const r=this.a11,i=this.a12,a=this.a13,o=this.a21,u=this.a22,h=this.a23,g=this.a31,b=this.a32,E=this.a33,k=e.length;for(let _=0;_<k;_++){const L=e[_],U=n[_],V=a*L+h*U+E;e[_]=(r*L+o*U+g)/V,n[_]=(i*L+u*U+b)/V}}static squareToQuadrilateral(e,n,r,i,a,o,u,h){const g=e-r+a-u,b=n-i+o-h;if(g===0&&b===0)return new On(r-e,a-r,e,i-n,o-i,n,0,0,1);{const E=r-a,k=u-a,_=i-o,L=h-o,U=E*L-k*_,V=(g*L-k*b)/U,J=(E*b-g*_)/U;return new On(r-e+V*r,u-e+J*u,e,i-n+V*i,h-n+J*h,n,V,J,1)}}static quadrilateralToSquare(e,n,r,i,a,o,u,h){return On.squareToQuadrilateral(e,n,r,i,a,o,u,h).buildAdjoint()}buildAdjoint(){return new On(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new On(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class ii extends si{sampleGrid(e,n,r,i,a,o,u,h,g,b,E,k,_,L,U,V,J,Ce,Ae){const be=On.quadrilateralToQuadrilateral(i,a,o,u,h,g,b,E,k,_,L,U,V,J,Ce,Ae);return this.sampleGridWithTransform(e,n,r,be)}sampleGridWithTransform(e,n,r,i){if(n<=0||r<=0)throw new B;const a=new Se(n,r),o=new Float32Array(2*n);for(let u=0;u<r;u++){const h=o.length,g=u+.5;for(let b=0;b<h;b+=2)o[b]=b/2+.5,o[b+1]=g;i.transformPoints(o),si.checkAndNudgePoints(e,o);try{for(let b=0;b<h;b+=2)e.get(Math.floor(o[b]),Math.floor(o[b+1]))&&a.set(b/2,u)}catch{throw new B}}return a}}class Vn{static setGridSampler(e){Vn.gridSampler=e}static getInstance(){return Vn.gridSampler}}Vn.gridSampler=new ii;class cn{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new Le(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ts{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){let o=r[0];r[0]=r[2],r[2]=o}this.extractParameters(r);let i=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),a=this.getMatrixCornerPoints(r);return new Ui(i,a,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new B;let n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);let i=0;for(let o=0;o<4;o++){let u=r[(this.shift+o)%4];this.compact?(i<<=7,i+=u>>1&127):(i<<=10,i+=(u>>2&992)+(u>>1&31))}let a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)}getRotation(e,n){let r=0;e.forEach((i,a,o)=>{let u=(i>>n-2<<1)+(i&1);r=(r<<3)+u}),r=((r&1)<<11)+(r>>1);for(let i=0;i<4;i++)if(oe.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new B}getCorrectedParameterData(e,n){let r,i;n?(r=7,i=2):(r=10,i=4);let a=r-i,o=new Int32Array(r);for(let h=r-1;h>=0;--h)o[h]=e&15,e>>=4;try{new Rn(at.AZTEC_PARAM).decode(o,a)}catch{throw new B}let u=0;for(let h=0;h<i;h++)u=(u<<4)+o[h];return u}getBullsEyeCorners(e){let n=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let E=this.getFirstDifferent(n,o,1,-1),k=this.getFirstDifferent(r,o,1,1),_=this.getFirstDifferent(i,o,-1,1),L=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){let U=this.distancePoint(L,E)*this.nbCenterLayers/(this.distancePoint(a,n)*(this.nbCenterLayers+2));if(U<.75||U>1.25||!this.isWhiteOrBlackRectangle(E,k,_,L))break}n=E,r=k,i=_,a=L,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new B;this.compact=this.nbCenterLayers===5;let u=new Le(n.getX()+.5,n.getY()-.5),h=new Le(r.getX()+.5,r.getY()+.5),g=new Le(i.getX()-.5,i.getY()+.5),b=new Le(a.getX()-.5,a.getY()-.5);return this.expandSquare([u,h,g,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,r,i;try{let u=new ir(this.image).detect();e=u[0],n=u[1],r=u[2],i=u[3]}catch{let h=this.image.getWidth()/2,g=this.image.getHeight()/2;e=this.getFirstDifferent(new cn(h+7,g-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new cn(h+7,g+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new cn(h-7,g+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new cn(h-7,g-7),!1,-1,-1).toResultPoint()}let a=ut.round((e.getX()+i.getX()+n.getX()+r.getX())/4),o=ut.round((e.getY()+i.getY()+n.getY()+r.getY())/4);try{let u=new ir(this.image,15,a,o).detect();e=u[0],n=u[1],r=u[2],i=u[3]}catch{e=this.getFirstDifferent(new cn(a+7,o-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new cn(a+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new cn(a-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new cn(a-7,o-7),!1,-1,-1).toResultPoint()}return a=ut.round((e.getX()+i.getX()+n.getX()+r.getX())/4),o=ut.round((e.getY()+i.getY()+n.getY()+r.getY())/4),new cn(a,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,r,i,a){let o=Vn.getInstance(),u=this.getDimension(),h=u/2-this.nbCenterLayers,g=u/2+this.nbCenterLayers;return o.sampleGrid(e,u,u,h,h,g,h,g,g,h,g,n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())}sampleLine(e,n,r){let i=0,a=this.distanceResultPoint(e,n),o=a/r,u=e.getX(),h=e.getY(),g=o*(n.getX()-e.getX())/a,b=o*(n.getY()-e.getY())/a;for(let E=0;E<r;E++)this.image.get(ut.round(u+E*g),ut.round(h+E*b))&&(i|=1<<r-E-1);return i}isWhiteOrBlackRectangle(e,n,r,i){let a=3;e=new cn(e.getX()-a,e.getY()+a),n=new cn(n.getX()-a,n.getY()-a),r=new cn(r.getX()+a,r.getY()-a),i=new cn(i.getX()+a,i.getY()+a);let o=this.getColor(i,e);if(o===0)return!1;let u=this.getColor(e,n);return u!==o||(u=this.getColor(n,r),u!==o)?!1:(u=this.getColor(r,i),u===o)}getColor(e,n){let r=this.distancePoint(e,n),i=(n.getX()-e.getX())/r,a=(n.getY()-e.getY())/r,o=0,u=e.getX(),h=e.getY(),g=this.image.get(e.getX(),e.getY()),b=Math.ceil(r);for(let k=0;k<b;k++)u+=i,h+=a,this.image.get(ut.round(u),ut.round(h))!==g&&o++;let E=o/r;return E>.1&&E<.9?0:E<=.1===g?1:-1}getFirstDifferent(e,n,r,i){let a=e.getX()+r,o=e.getY()+i;for(;this.isValid(a,o)&&this.image.get(a,o)===n;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===n;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===n;)o+=i;return o-=i,new cn(a,o)}expandSquare(e,n,r){let i=r/(2*n),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),u=(e[0].getX()+e[2].getX())/2,h=(e[0].getY()+e[2].getY())/2,g=new Le(u+i*a,h+i*o),b=new Le(u-i*a,h-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),u=(e[1].getX()+e[3].getX())/2,h=(e[1].getY()+e[3].getY())/2;let E=new Le(u+i*a,h+i*o),k=new Le(u-i*a,h-i*o);return[g,E,b,k]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=ut.round(e.getX()),r=ut.round(e.getY());return this.isValid(n,r)}distancePoint(e,n){return ut.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return ut.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(oe.truncDivision(this.nbLayers-4,8)+1)+15}}class kr{decode(e,n=null){let r=null,i=new ts(e.getBlackMatrix()),a=null,o=null;try{let b=i.detectMirror(!1);a=b.getPoints(),this.reportFoundResultPoints(n,a),o=new vt().decode(b)}catch(b){r=b}if(o==null)try{let b=i.detectMirror(!0);a=b.getPoints(),this.reportFoundResultPoints(n,a),o=new vt().decode(b)}catch(b){throw r??b}let u=new _e(o.getText(),o.getRawBytes(),o.getNumBits(),a,fe.AZTEC,ie.currentTimeMillis()),h=o.getByteSegments();h!=null&&u.putMetadata(je.BYTE_SEGMENTS,h);let g=o.getECLevel();return g!=null&&u.putMetadata(je.ERROR_CORRECTION_LEVEL,g),u}reportFoundResultPoints(e,n){if(e!=null){let r=e.get(he.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach((i,a,o)=>{r.foundPossibleResultPoint(i)})}}reset(){}}class Yl extends ke{constructor(e=500){super(new kr,e)}}class Pt{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(he.TRY_HARDER)===!0&&e.isRotateSupported()){const a=e.rotateCounterClockwise(),o=this.doDecode(a,n),u=o.getResultMetadata();let h=270;u!==null&&u.get(je.ORIENTATION)===!0&&(h=h+u.get(je.ORIENTATION)%360),o.putMetadata(je.ORIENTATION,h);const g=o.getResultPoints();if(g!==null){const b=a.getHeight();for(let E=0;E<g.length;E++)g[E]=new Le(b-g[E].getY()-1,g[E].getX())}return o}else throw new B}}reset(){}doDecode(e,n){const r=e.getWidth(),i=e.getHeight();let a=new xe(r);const o=n&&n.get(he.TRY_HARDER)===!0,u=Math.max(1,i>>(o?8:5));let h;o?h=i:h=15;const g=Math.trunc(i/2);for(let b=0;b<h;b++){const E=Math.trunc((b+1)/2),k=(b&1)===0,_=g+u*(k?E:-E);if(_<0||_>=i)break;try{a=e.getBlackRow(_,a)}catch{continue}for(let L=0;L<2;L++){if(L===1&&(a.reverse(),n&&n.get(he.NEED_RESULT_POINT_CALLBACK)===!0)){const U=new Map;n.forEach((V,J)=>U.set(J,V)),U.delete(he.NEED_RESULT_POINT_CALLBACK),n=U}try{const U=this.decodeRow(_,a,n);if(L===1){U.putMetadata(je.ORIENTATION,180);const V=U.getResultPoints();V!==null&&(V[0]=new Le(r-V[0].getX()-1,V[0].getY()),V[1]=new Le(r-V[1].getX()-1,V[1].getY()))}return U}catch{}}}throw new B}static recordPattern(e,n,r){const i=r.length;for(let g=0;g<i;g++)r[g]=0;const a=e.getSize();if(n>=a)throw new B;let o=!e.get(n),u=0,h=n;for(;h<a;){if(e.get(h)!==o)r[u]++;else{if(++u===i)break;r[u]=1,o=!o}h++}if(!(u===i||u===i-1&&h===a))throw new B}static recordPatternInReverse(e,n,r){let i=r.length,a=e.get(n);for(;n>0&&i>=0;)e.get(--n)!==a&&(i--,a=!a);if(i>=0)throw new B;Pt.recordPattern(e,n+1,r)}static patternMatchVariance(e,n,r){const i=e.length;let a=0,o=0;for(let g=0;g<i;g++)a+=e[g],o+=n[g];if(a<o)return Number.POSITIVE_INFINITY;const u=a/o;r*=u;let h=0;for(let g=0;g<i;g++){const b=e[g],E=n[g]*u,k=b>E?b-E:E-b;if(k>r)return Number.POSITIVE_INFINITY;h+=k}return h/a}}class Te extends Pt{static findStartPattern(e){const n=e.getSize(),r=e.getNextSet(0);let i=0,a=Int32Array.from([0,0,0,0,0,0]),o=r,u=!1;const h=6;for(let g=r;g<n;g++)if(e.get(g)!==u)a[i]++;else{if(i===h-1){let b=Te.MAX_AVG_VARIANCE,E=-1;for(let k=Te.CODE_START_A;k<=Te.CODE_START_C;k++){const _=Pt.patternMatchVariance(a,Te.CODE_PATTERNS[k],Te.MAX_INDIVIDUAL_VARIANCE);_<b&&(b=_,E=k)}if(E>=0&&e.isRange(Math.max(0,o-(g-o)/2),o,!1))return Int32Array.from([o,g,E]);o+=a[0]+a[1],a=a.slice(2,a.length-1),a[i-1]=0,a[i]=0,i--}else i++;a[i]=1,u=!u}throw new B}static decodeCode(e,n,r){Pt.recordPattern(e,r,n);let i=Te.MAX_AVG_VARIANCE,a=-1;for(let o=0;o<Te.CODE_PATTERNS.length;o++){const u=Te.CODE_PATTERNS[o],h=this.patternMatchVariance(n,u,Te.MAX_INDIVIDUAL_VARIANCE);h<i&&(i=h,a=o)}if(a>=0)return a;throw new B}decodeRow(e,n,r){const i=r&&r.get(he.ASSUME_GS1)===!0,a=Te.findStartPattern(n),o=a[2];let u=0;const h=new Uint8Array(20);h[u++]=o;let g;switch(o){case Te.CODE_START_A:g=Te.CODE_CODE_A;break;case Te.CODE_START_B:g=Te.CODE_CODE_B;break;case Te.CODE_START_C:g=Te.CODE_CODE_C;break;default:throw new G}let b=!1,E=!1,k="",_=a[0],L=a[1];const U=Int32Array.from([0,0,0,0,0,0]);let V=0,J=0,Ce=o,Ae=0,be=!0,lt=!1,et=!1;for(;!b;){const br=E;switch(E=!1,V=J,J=Te.decodeCode(n,U,L),h[u++]=J,J!==Te.CODE_STOP&&(be=!0),J!==Te.CODE_STOP&&(Ae++,Ce+=Ae*J),_=L,L+=U.reduce((hs,la)=>hs+la,0),J){case Te.CODE_START_A:case Te.CODE_START_B:case Te.CODE_START_C:throw new G}switch(g){case Te.CODE_CODE_A:if(J<64)et===lt?k+=String.fromCharCode(32+J):k+=String.fromCharCode(32+J+128),et=!1;else if(J<96)et===lt?k+=String.fromCharCode(J-64):k+=String.fromCharCode(J+64),et=!1;else switch(J!==Te.CODE_STOP&&(be=!1),J){case Te.CODE_FNC_1:i&&(k.length===0?k+="]C1":k+="");break;case Te.CODE_FNC_2:case Te.CODE_FNC_3:break;case Te.CODE_FNC_4_A:!lt&&et?(lt=!0,et=!1):lt&&et?(lt=!1,et=!1):et=!0;break;case Te.CODE_SHIFT:E=!0,g=Te.CODE_CODE_B;break;case Te.CODE_CODE_B:g=Te.CODE_CODE_B;break;case Te.CODE_CODE_C:g=Te.CODE_CODE_C;break;case Te.CODE_STOP:b=!0;break}break;case Te.CODE_CODE_B:if(J<96)et===lt?k+=String.fromCharCode(32+J):k+=String.fromCharCode(32+J+128),et=!1;else switch(J!==Te.CODE_STOP&&(be=!1),J){case Te.CODE_FNC_1:i&&(k.length===0?k+="]C1":k+="");break;case Te.CODE_FNC_2:case Te.CODE_FNC_3:break;case Te.CODE_FNC_4_B:!lt&&et?(lt=!0,et=!1):lt&&et?(lt=!1,et=!1):et=!0;break;case Te.CODE_SHIFT:E=!0,g=Te.CODE_CODE_A;break;case Te.CODE_CODE_A:g=Te.CODE_CODE_A;break;case Te.CODE_CODE_C:g=Te.CODE_CODE_C;break;case Te.CODE_STOP:b=!0;break}break;case Te.CODE_CODE_C:if(J<100)J<10&&(k+="0"),k+=J;else switch(J!==Te.CODE_STOP&&(be=!1),J){case Te.CODE_FNC_1:i&&(k.length===0?k+="]C1":k+="");break;case Te.CODE_CODE_A:g=Te.CODE_CODE_A;break;case Te.CODE_CODE_B:g=Te.CODE_CODE_B;break;case Te.CODE_STOP:b=!0;break}break}br&&(g=g===Te.CODE_CODE_A?Te.CODE_CODE_B:Te.CODE_CODE_A)}const An=L-_;if(L=n.getNextUnset(L),!n.isRange(L,Math.min(n.getSize(),L+(L-_)/2),!1))throw new B;if(Ce-=Ae*V,Ce%103!==V)throw new re;const Jn=k.length;if(Jn===0)throw new B;Jn>0&&be&&(g===Te.CODE_CODE_C?k=k.substring(0,Jn-2):k=k.substring(0,Jn-1));const Kt=(a[1]+a[0])/2,yt=_+An/2,Bt=h.length,yn=new Uint8Array(Bt);for(let br=0;br<Bt;br++)yn[br]=h[br];const Hr=[new Le(Kt,e),new Le(yt,e)];return new _e(k,yn,0,Hr,fe.CODE_128,new Date().getTime())}}Te.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Te.MAX_AVG_VARIANCE=.25,Te.MAX_INDIVIDUAL_VARIANCE=.7,Te.CODE_SHIFT=98,Te.CODE_CODE_C=99,Te.CODE_CODE_B=100,Te.CODE_CODE_A=101,Te.CODE_FNC_1=102,Te.CODE_FNC_2=97,Te.CODE_FNC_3=96,Te.CODE_FNC_4_A=101,Te.CODE_FNC_4_B=100,Te.CODE_START_A=103,Te.CODE_START_B=104,Te.CODE_START_C=105,Te.CODE_STOP=106;class Xt extends Pt{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,r){let i=this.counters;i.fill(0),this.decodeRowResult="";let a=Xt.findAsteriskPattern(n,i),o=n.getNextSet(a[1]),u=n.getSize(),h,g;do{Xt.recordPattern(n,o,i);let U=Xt.toNarrowWidePattern(i);if(U<0)throw new B;h=Xt.patternToChar(U),this.decodeRowResult+=h,g=o;for(let V of i)o+=V;o=n.getNextSet(o)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b=0;for(let U of i)b+=U;let E=o-g-b;if(o!==u&&E*2<b)throw new B;if(this.usingCheckDigit){let U=this.decodeRowResult.length-1,V=0;for(let J=0;J<U;J++)V+=Xt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(J));if(this.decodeRowResult.charAt(U)!==Xt.ALPHABET_STRING.charAt(V%43))throw new re;this.decodeRowResult=this.decodeRowResult.substring(0,U)}if(this.decodeRowResult.length===0)throw new B;let k;this.extendedMode?k=Xt.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let _=(a[1]+a[0])/2,L=g+b/2;return new _e(k,null,0,[new Le(_,e),new Le(L,e)],fe.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let r=e.getSize(),i=e.getNextSet(0),a=0,o=i,u=!1,h=n.length;for(let g=i;g<r;g++)if(e.get(g)!==u)n[a]++;else{if(a===h-1){if(this.toNarrowWidePattern(n)===Xt.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((g-o)/2)),o,!1))return[o,g];o+=n[0]+n[1],n.copyWithin(0,2,2+a-1),n[a-1]=0,n[a]=0,a--}else a++;n[a]=1,u=!u}throw new B}static toNarrowWidePattern(e){let n=e.length,r=0,i;do{let a=2147483647;for(let h of e)h<a&&h>r&&(a=h);r=a,i=0;let o=0,u=0;for(let h=0;h<n;h++){let g=e[h];g>r&&(u|=1<<n-1-h,i++,o+=g)}if(i===3){for(let h=0;h<n&&i>0;h++){let g=e[h];if(g>r&&(i--,g*2>=o))return-1}return u}}while(i>3);return-1}static patternToChar(e){for(let n=0;n<Xt.CHARACTER_ENCODINGS.length;n++)if(Xt.CHARACTER_ENCODINGS[n]===e)return Xt.ALPHABET_STRING.charAt(n);if(e===Xt.ASTERISK_ENCODING)return"*";throw new B}static decodeExtended(e){let n=e.length,r="";for(let i=0;i<n;i++){let a=e.charAt(i);if(a==="+"||a==="$"||a==="%"||a==="/"){let o=e.charAt(i+1),u="\0";switch(a){case"+":if(o>="A"&&o<="Z")u=String.fromCharCode(o.charCodeAt(0)+32);else throw new G;break;case"$":if(o>="A"&&o<="Z")u=String.fromCharCode(o.charCodeAt(0)-64);else throw new G;break;case"%":if(o>="A"&&o<="E")u=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")u=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")u=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")u=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")u="\0";else if(o==="V")u="@";else if(o==="W")u="`";else if(o==="X"||o==="Y"||o==="Z")u="";else throw new G;break;case"/":if(o>="A"&&o<="O")u=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")u=":";else throw new G;break}r+=u,i++}else r+=a}return r}}Xt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Xt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Xt.ASTERISK_ENCODING=148;class pt extends Pt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,r){let i=this.decodeStart(n),a=this.decodeEnd(n),o=new K;pt.decodeMiddle(n,i[1],a[0],o);let u=o.toString(),h=null;r!=null&&(h=r.get(he.ALLOWED_LENGTHS)),h==null&&(h=pt.DEFAULT_ALLOWED_LENGTHS);let g=u.length,b=!1,E=0;for(let L of h){if(g===L){b=!0;break}L>E&&(E=L)}if(!b&&g>E&&(b=!0),!b)throw new G;const k=[new Le(i[1],e),new Le(a[0],e)];return new _e(u,null,0,k,fe.ITF,new Date().getTime())}static decodeMiddle(e,n,r,i){let a=new Int32Array(10),o=new Int32Array(5),u=new Int32Array(5);for(a.fill(0),o.fill(0),u.fill(0);n<r;){Pt.recordPattern(e,n,a);for(let g=0;g<5;g++){let b=2*g;o[g]=a[b],u[g]=a[b+1]}let h=pt.decodeDigit(o);i.append(h.toString()),h=this.decodeDigit(u),i.append(h.toString()),a.forEach(function(g){n+=g})}}decodeStart(e){let n=pt.skipWhiteSpace(e),r=pt.findGuardPattern(e,n,pt.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r}validateQuietZone(e,n){let r=this.narrowLineWidth*10;r=r<n?r:n;for(let i=n-1;r>0&&i>=0&&!e.get(i);i--)r--;if(r!==0)throw new B}static skipWhiteSpace(e){const n=e.getSize(),r=e.getNextSet(0);if(r===n)throw new B;return r}decodeEnd(e){e.reverse();try{let n=pt.skipWhiteSpace(e),r;try{r=pt.findGuardPattern(e,n,pt.END_PATTERN_REVERSED[0])}catch(a){a instanceof B&&(r=pt.findGuardPattern(e,n,pt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);let i=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-i,r}finally{e.reverse()}}static findGuardPattern(e,n,r){let i=r.length,a=new Int32Array(i),o=e.getSize(),u=!1,h=0,g=n;a.fill(0);for(let b=n;b<o;b++)if(e.get(b)!==u)a[h]++;else{if(h===i-1){if(Pt.patternMatchVariance(a,r,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return[g,b];g+=a[0]+a[1],ie.arraycopy(a,2,a,0,h-1),a[h-1]=0,a[h]=0,h--}else h++;a[h]=1,u=!u}throw new B}static decodeDigit(e){let n=pt.MAX_AVG_VARIANCE,r=-1,i=pt.PATTERNS.length;for(let a=0;a<i;a++){let o=pt.PATTERNS[a],u=Pt.patternMatchVariance(e,o,pt.MAX_INDIVIDUAL_VARIANCE);u<n?(n=u,r=a):u===n&&(r=-1)}if(r>=0)return r%10;throw new B}}pt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],pt.MAX_AVG_VARIANCE=.38,pt.MAX_INDIVIDUAL_VARIANCE=.5,pt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],pt.START_PATTERN=Int32Array.from([1,1,1,1]),pt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class St extends Pt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,r,i=0,a=Int32Array.from([0,0,0]);for(;!n;){a=Int32Array.from([0,0,0]),r=St.findGuardPattern(e,i,!1,this.START_END_PATTERN,a);let o=r[0];i=r[1];let u=o-(i-o);u>=0&&(n=e.isRange(u,o,!1))}return r}static checkChecksum(e){return St.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let r=parseInt(e.charAt(n-1),10);return St.getStandardUPCEANChecksum(e.substring(0,n-1))===r}static getStandardUPCEANChecksum(e){let n=e.length,r=0;for(let i=n-1;i>=0;i-=2){let a=e.charAt(i).charCodeAt(0)-48;if(a<0||a>9)throw new G;r+=a}r*=3;for(let i=n-2;i>=0;i-=2){let a=e.charAt(i).charCodeAt(0)-48;if(a<0||a>9)throw new G;r+=a}return(1e3-r)%10}static decodeEnd(e,n){return St.findGuardPattern(e,n,!1,St.START_END_PATTERN,new Int32Array(St.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,r,i){return this.findGuardPattern(e,n,r,i,new Int32Array(i.length))}static findGuardPattern(e,n,r,i,a){let o=e.getSize();n=r?e.getNextUnset(n):e.getNextSet(n);let u=0,h=n,g=i.length,b=r;for(let E=n;E<o;E++)if(e.get(E)!==b)a[u]++;else{if(u===g-1){if(Pt.patternMatchVariance(a,i,St.MAX_INDIVIDUAL_VARIANCE)<St.MAX_AVG_VARIANCE)return Int32Array.from([h,E]);h+=a[0]+a[1];let k=a.slice(2,a.length-1);for(let _=0;_<u-1;_++)a[_]=k[_];a[u-1]=0,a[u]=0,u--}else u++;a[u]=1,b=!b}throw new B}static decodeDigit(e,n,r,i){this.recordPattern(e,r,n);let a=this.MAX_AVG_VARIANCE,o=-1,u=i.length;for(let h=0;h<u;h++){let g=i[h],b=Pt.patternMatchVariance(n,g,St.MAX_INDIVIDUAL_VARIANCE);b<a&&(a=b,o=h)}if(o>=0)return o;throw new B}}St.MAX_AVG_VARIANCE=.48,St.MAX_INDIVIDUAL_VARIANCE=.7,St.START_END_PATTERN=Int32Array.from([1,1,1]),St.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),St.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),St.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Lr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,r){let i=this.decodeRowStringBuffer,a=this.decodeMiddle(n,r,i),o=i.toString(),u=Lr.parseExtensionString(o),h=[new Le((r[0]+r[1])/2,e),new Le(a,e)],g=new _e(o,null,0,h,fe.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&g.putAllMetadata(u),g}decodeMiddle(e,n,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o=n[1],u=0;for(let g=0;g<5&&o<a;g++){let b=St.decodeDigit(e,i,o,St.L_AND_G_PATTERNS);r+=String.fromCharCode(48+b%10);for(let E of i)o+=E;b>=10&&(u|=1<<4-g),g!==4&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(r.length!==5)throw new B;let h=this.determineCheckDigit(u);if(Lr.extensionChecksum(r.toString())!==h)throw new B;return o}static extensionChecksum(e){let n=e.length,r=0;for(let i=n-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(let i=n-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new B}static parseExtensionString(e){if(e.length!==5)return null;let n=Lr.parseExtension5String(e);return n==null?null:new Map([[je.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return n+i+"."+o}}class _s{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,r){let i=this.decodeRowStringBuffer,a=this.decodeMiddle(n,r,i),o=i.toString(),u=_s.parseExtensionString(o),h=[new Le((r[0]+r[1])/2,e),new Le(a,e)],g=new _e(o,null,0,h,fe.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&g.putAllMetadata(u),g}decodeMiddle(e,n,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o=n[1],u=0;for(let h=0;h<2&&o<a;h++){let g=St.decodeDigit(e,i,o,St.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);for(let b of i)o+=b;g>=10&&(u|=1<<1-h),h!==1&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(r.length!==2)throw new B;if(parseInt(r.toString())%4!==u)throw new B;return o}static parseExtensionString(e){return e.length!==2?null:new Map([[je.ISSUE_NUMBER,parseInt(e)]])}}class ai{static decodeRow(e,n,r){let i=St.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Lr().decodeRow(e,n,i)}catch{return new _s().decodeRow(e,n,i)}}}ai.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ot extends St{constructor(){super(),this.decodeRowStringBuffer="",ot.L_AND_G_PATTERNS=ot.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=ot.L_PATTERNS[e-10],r=new Int32Array(n.length);for(let i=0;i<n.length;i++)r[i]=n[n.length-i-1];ot.L_AND_G_PATTERNS[e]=r}}decodeRow(e,n,r){let i=ot.findStartGuardPattern(n),a=r==null?null:r.get(he.NEED_RESULT_POINT_CALLBACK);if(a!=null){const be=new Le((i[0]+i[1])/2,e);a.foundPossibleResultPoint(be)}let o=this.decodeMiddle(n,i,this.decodeRowStringBuffer),u=o.rowOffset,h=o.resultString;if(a!=null){const be=new Le(u,e);a.foundPossibleResultPoint(be)}let g=this.decodeEnd(n,u);if(a!=null){const be=new Le((g[0]+g[1])/2,e);a.foundPossibleResultPoint(be)}let b=g[1],E=b+(b-g[0]);if(E>=n.getSize()||!n.isRange(b,E,!1))throw new B;let k=h.toString();if(k.length<8)throw new G;if(!ot.checkChecksum(k))throw new re;let _=(i[1]+i[0])/2,L=(g[1]+g[0])/2,U=this.getBarcodeFormat(),V=[new Le(_,e),new Le(L,e)],J=new _e(k,null,0,V,U,new Date().getTime()),Ce=0;try{let be=ai.decodeRow(e,n,g[1]);J.putMetadata(je.UPC_EAN_EXTENSION,be.getText()),J.putAllMetadata(be.getResultMetadata()),J.addResultPoints(be.getResultPoints()),Ce=be.getText().length}catch{}let Ae=r==null?null:r.get(he.ALLOWED_EAN_EXTENSIONS);if(Ae!=null){let be=!1;for(let lt in Ae)if(Ce.toString()===lt){be=!0;break}if(!be)throw new B}return J}decodeEnd(e,n){return ot.findGuardPattern(e,n,!1,ot.START_END_PATTERN,new Int32Array(ot.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return ot.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let r=parseInt(e.charAt(n-1),10);return ot.getStandardUPCEANChecksum(e.substring(0,n-1))===r}static getStandardUPCEANChecksum(e){let n=e.length,r=0;for(let i=n-1;i>=0;i-=2){let a=e.charAt(i).charCodeAt(0)-48;if(a<0||a>9)throw new G;r+=a}r*=3;for(let i=n-2;i>=0;i-=2){let a=e.charAt(i).charCodeAt(0)-48;if(a<0||a>9)throw new G;r+=a}return(1e3-r)%10}}class Dn extends ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o=n[1],u=0;for(let g=0;g<6&&o<a;g++){let b=ot.decodeDigit(e,i,o,ot.L_AND_G_PATTERNS);r+=String.fromCharCode(48+b%10);for(let E of i)o+=E;b>=10&&(u|=1<<5-g)}r=Dn.determineFirstDigit(r,u),o=ot.findGuardPattern(e,o,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<6&&o<a;g++){let b=ot.decodeDigit(e,i,o,ot.L_PATTERNS);r+=String.fromCharCode(48+b);for(let E of i)o+=E}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return fe.EAN_13}static determineFirstDigit(e,n){for(let r=0;r<10;r++)if(n===this.FIRST_DIGIT_ENCODINGS[r])return e=String.fromCharCode(48+r)+e,e;throw new B}}Dn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Wi extends ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,r){const i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o=n[1];for(let h=0;h<4&&o<a;h++){let g=ot.decodeDigit(e,i,o,ot.L_PATTERNS);r+=String.fromCharCode(48+g);for(let b of i)o+=b}o=ot.findGuardPattern(e,o,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0))[1];for(let h=0;h<4&&o<a;h++){let g=ot.decodeDigit(e,i,o,ot.L_PATTERNS);r+=String.fromCharCode(48+g);for(let b of i)o+=b}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return fe.EAN_8}}class zi extends ot{constructor(){super(...arguments),this.ean13Reader=new Dn}getBarcodeFormat(){return fe.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,r))}decodeMiddle(e,n,r){return this.ean13Reader.decodeMiddle(e,n,r)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let r=new _e(n.substring(1),null,null,e.getResultPoints(),fe.UPC_A);return e.getResultMetadata()!=null&&r.putAllMetadata(e.getResultMetadata()),r}else throw new B}reset(){this.ean13Reader.reset()}}class Pn extends ot{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,r){const i=this.decodeMiddleCounters.map(g=>g);i[0]=0,i[1]=0,i[2]=0,i[3]=0;const a=e.getSize();let o=n[1],u=0;for(let g=0;g<6&&o<a;g++){const b=Pn.decodeDigit(e,i,o,Pn.L_AND_G_PATTERNS);r+=String.fromCharCode(48+b%10);for(let E of i)o+=E;b>=10&&(u|=1<<5-g)}let h=Pn.determineNumSysAndCheckDigit(r,u);return{rowOffset:o,resultString:h}}decodeEnd(e,n){return Pn.findGuardPatternWithoutCounters(e,n,!0,Pn.MIDDLE_END_PATTERN)}checkChecksum(e){return ot.checkChecksum(Pn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let r=0;r<=1;r++)for(let i=0;i<10;i++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][i]){let a=String.fromCharCode(48+r),o=String.fromCharCode(48+i);return a+e+o}throw B.getNotFoundInstance()}getBarcodeFormat(){return fe.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(a=>a.charCodeAt(0)),r=new K;r.append(e.charAt(0));let i=n[5];switch(i){case 0:case 1:case 2:r.appendChars(n,0,2),r.append(i),r.append("0000"),r.appendChars(n,2,3);break;case 3:r.appendChars(n,0,3),r.append("00000"),r.appendChars(n,3,2);break;case 4:r.appendChars(n,0,4),r.append("00000"),r.append(n[4]);break;default:r.appendChars(n,0,5),r.append("0000"),r.append(i);break}return e.length>=8&&r.append(e.charAt(7)),r.toString()}}Pn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class li extends Pt{constructor(e){super();let n=e==null?null:e.get(he.POSSIBLE_FORMATS),r=[];v(n)?(r.push(new Dn),r.push(new zi),r.push(new Wi),r.push(new Pn)):(n.indexOf(fe.EAN_13)>-1&&r.push(new Dn),n.indexOf(fe.UPC_A)>-1&&r.push(new zi),n.indexOf(fe.EAN_8)>-1&&r.push(new Wi),n.indexOf(fe.UPC_E)>-1&&r.push(new Pn)),this.readers=r}decodeRow(e,n,r){for(let i of this.readers)try{const a=i.decodeRow(e,n,r),o=a.getBarcodeFormat()===fe.EAN_13&&a.getText().charAt(0)==="0",u=r==null?null:r.get(he.POSSIBLE_FORMATS),h=u==null||u.includes(fe.UPC_A);if(o&&h){const g=a.getRawBytes(),b=new _e(a.getText().substring(1),g,g?g.length:null,a.getResultPoints(),fe.UPC_A);return b.putAllMetadata(a.getResultMetadata()),b}return a}catch{}throw new B}reset(){for(let e of this.readers)e.reset()}}class tn extends Pt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let r=0;r<n.length;r++)if(Pt.patternMatchVariance(e,n[r],tn.MAX_INDIVIDUAL_VARIANCE)<tn.MAX_AVG_VARIANCE)return r;throw new B}static count(e){return ut.sum(new Int32Array(e))}static increment(e,n){let r=0,i=n[0];for(let a=1;a<e.length;a++)n[a]>i&&(i=n[a],r=a);e[r]++}static decrement(e,n){let r=0,i=n[0];for(let a=1;a<e.length;a++)n[a]<i&&(i=n[a],r=a);e[r]--}static isFinderPattern(e){let n=e[0]+e[1],r=n+e[2]+e[3],i=n/r;if(i>=tn.MIN_FINDER_PATTERN_RATIO&&i<=tn.MAX_FINDER_PATTERN_RATIO){let a=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;for(let u of e)u>o&&(o=u),u<a&&(a=u);return o<10*a}return!1}}tn.MAX_AVG_VARIANCE=.2,tn.MAX_INDIVIDUAL_VARIANCE=.45,tn.MIN_FINDER_PATTERN_RATIO=9.5/12,tn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Ir{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Ir))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class js{constructor(e,n,r,i,a){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Le(r,a)),this.resultPoints.push(new Le(i,a))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof js))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class Nn{constructor(){}static getRSSvalue(e,n,r){let i=0;for(let h of e)i+=h;let a=0,o=0,u=e.length;for(let h=0;h<u-1;h++){let g;for(g=1,o|=1<<h;g<e[h];g++,o&=~(1<<h)){let b=Nn.combins(i-g-1,u-h-2);if(r&&o===0&&i-g-(u-h-1)>=u-h-1&&(b-=Nn.combins(i-g-(u-h),u-h-2)),u-h-1>1){let E=0;for(let k=i-g-(u-h-2);k>n;k--)E+=Nn.combins(i-g-k-1,u-h-3);b-=E*(u-1-h)}else i-g>n&&b--;a+=b}i-=g}return a}static combins(e,n){let r,i;e-n>n?(i=n,r=e-n):(i=e-n,r=n);let a=1,o=1;for(let u=e;u>r;u--)a*=u,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a}}class Hi{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let r=12*n,i=new xe(r),a=0,u=e[0].getRightChar().getValue();for(let h=11;h>=0;--h)(u&1<<h)!=0&&i.set(a),a++;for(let h=1;h<e.length;++h){let g=e[h],b=g.getLeftChar().getValue();for(let E=11;E>=0;--E)(b&1<<E)!=0&&i.set(a),a++;if(g.getRightChar()!=null){let E=g.getRightChar().getValue();for(let k=11;k>=0;--k)(E&1<<k)!=0&&i.set(a),a++}}return i}}class Xn{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Gi{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class $t extends Gi{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===$t.FNC1}}$t.FNC1="$";class ar extends Gi{constructor(e,n,r){super(e),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class gn extends Gi{constructor(e,n,r){if(super(e),n<0||n>10||r<0||r>10)throw new G;this.firstDigit=n,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===gn.FNC1}isSecondDigitFNC1(){return this.secondDigit===gn.FNC1}isAnyFNC1(){return this.firstDigit===gn.FNC1||this.secondDigit===gn.FNC1}}gn.FNC1=10;class Oe{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new B;let n=e.substring(0,2);for(let a of Oe.TWO_DIGIT_DATA_LENGTH)if(a[0]===n)return a[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(2,a[2],e):Oe.processFixedAI(2,a[1],e);if(e.length<3)throw new B;let r=e.substring(0,3);for(let a of Oe.THREE_DIGIT_DATA_LENGTH)if(a[0]===r)return a[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(3,a[2],e):Oe.processFixedAI(3,a[1],e);for(let a of Oe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(a[0]===r)return a[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(4,a[2],e):Oe.processFixedAI(4,a[1],e);if(e.length<4)throw new B;let i=e.substring(0,4);for(let a of Oe.FOUR_DIGIT_DATA_LENGTH)if(a[0]===i)return a[1]===Oe.VARIABLE_LENGTH?Oe.processVariableAI(4,a[2],e):Oe.processFixedAI(4,a[1],e);throw new B}static processFixedAI(e,n,r){if(r.length<e)throw new B;let i=r.substring(0,e);if(r.length<e+n)throw new B;let a=r.substring(e,e+n),o=r.substring(e+n),u="("+i+")"+a,h=Oe.parseFieldsInGeneralPurpose(o);return h==null?u:u+h}static processVariableAI(e,n,r){let i=r.substring(0,e),a;r.length<e+n?a=r.length:a=e+n;let o=r.substring(e,a),u=r.substring(a),h="("+i+")"+o,g=Oe.parseFieldsInGeneralPurpose(u);return g==null?h:h+g}}Oe.VARIABLE_LENGTH=[],Oe.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Oe.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Oe.VARIABLE_LENGTH,20],["22",Oe.VARIABLE_LENGTH,29],["30",Oe.VARIABLE_LENGTH,8],["37",Oe.VARIABLE_LENGTH,8],["90",Oe.VARIABLE_LENGTH,30],["91",Oe.VARIABLE_LENGTH,30],["92",Oe.VARIABLE_LENGTH,30],["93",Oe.VARIABLE_LENGTH,30],["94",Oe.VARIABLE_LENGTH,30],["95",Oe.VARIABLE_LENGTH,30],["96",Oe.VARIABLE_LENGTH,30],["97",Oe.VARIABLE_LENGTH,3],["98",Oe.VARIABLE_LENGTH,30],["99",Oe.VARIABLE_LENGTH,30]],Oe.THREE_DIGIT_DATA_LENGTH=[["240",Oe.VARIABLE_LENGTH,30],["241",Oe.VARIABLE_LENGTH,30],["242",Oe.VARIABLE_LENGTH,6],["250",Oe.VARIABLE_LENGTH,30],["251",Oe.VARIABLE_LENGTH,30],["253",Oe.VARIABLE_LENGTH,17],["254",Oe.VARIABLE_LENGTH,20],["400",Oe.VARIABLE_LENGTH,30],["401",Oe.VARIABLE_LENGTH,30],["402",17],["403",Oe.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Oe.VARIABLE_LENGTH,20],["421",Oe.VARIABLE_LENGTH,15],["422",3],["423",Oe.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Oe.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Oe.VARIABLE_LENGTH,15],["391",Oe.VARIABLE_LENGTH,18],["392",Oe.VARIABLE_LENGTH,15],["393",Oe.VARIABLE_LENGTH,18],["703",Oe.VARIABLE_LENGTH,30]],Oe.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Oe.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Oe.VARIABLE_LENGTH,20],["8003",Oe.VARIABLE_LENGTH,30],["8004",Oe.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Oe.VARIABLE_LENGTH,30],["8008",Oe.VARIABLE_LENGTH,12],["8018",18],["8020",Oe.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Oe.VARIABLE_LENGTH,70],["8200",Oe.VARIABLE_LENGTH,70]];class ns{constructor(e){this.buffer=new K,this.information=e}decodeAllCodes(e,n){let r=n,i=null;do{let a=this.decodeGeneralPurposeField(r,i),o=Oe.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let a=this.extractNumericValueFromBitArray(e,4);return a===0?new gn(this.information.getSize(),gn.FNC1,gn.FNC1):new gn(this.information.getSize(),a-1,gn.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),r=(n-8)/11,i=(n-8)%11;return new gn(e+7,r,i)}extractNumericValueFromBitArray(e,n){return ns.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,r){let i=0;for(let a=0;a<r;++a)e.get(n+a)&&(i|=1<<r-a-1);return i}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let r=this.parseBlocks();return r!=null&&r.isRemaining()?new ar(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new ar(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let r=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(r!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new ar(this.current.getPosition(),this.buffer.toString()):n=new ar(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Xn(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new ar(this.current.getPosition(),this.buffer.toString());return new Xn(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Xn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new ar(this.current.getPosition(),this.buffer.toString());return new Xn(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Xn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new ar(this.current.getPosition(),this.buffer.toString());return new Xn(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Xn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new $t(e+5,$t.FNC1);if(n>=5&&n<15)return new $t(e+5,"0"+(n-5));let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new $t(e+7,""+(r+1));if(r>=90&&r<116)return new $t(e+7,""+(r+7));let i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new G}return new $t(e+8,a)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new $t(e+5,$t.FNC1);if(n>=5&&n<15)return new $t(e+5,"0"+(n-5));let r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new $t(e+6,""+(r+33));let i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new vn("Decoding invalid alphanumeric value: "+r)}return new $t(e+6,i)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class Vi{constructor(e){this.information=e,this.generalDecoder=new ns(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Cn extends Vi{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let r=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,r)}encodeCompressedGtinWithoutAI(e,n,r){for(let i=0;i<4;++i){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);a/100===0&&e.append("0"),a/10===0&&e.append("0"),e.append(a)}Cn.appendCheckDigit(e,r)}static appendCheckDigit(e,n){let r=0;for(let i=0;i<13;i++){let a=e.charAt(i+n).charCodeAt(0)-48;r+=(i&1)===0?3*a:a}r=10-r%10,r===10&&(r=0),e.append(r)}}Cn.GTIN_SIZE=40;class Bn extends Cn{constructor(e){super(e)}parseInformation(){let e=new K;e.append("(01)");let n=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(Bn.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,Bn.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,Bn.HEADER_SIZE+44)}}Bn.HEADER_SIZE=4;class Ms extends Vi{constructor(e){super(e)}parseInformation(){let e=new K;return this.getGeneralDecoder().decodeAllCodes(e,Ms.HEADER_SIZE)}}Ms.HEADER_SIZE=5;class Os extends Cn{constructor(e){super(e)}encodeCompressedWeight(e,n,r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,r);this.addWeightCode(e,i);let a=this.checkWeight(i),o=1e5;for(let u=0;u<5;++u)a/o===0&&e.append("0"),o/=10;e.append(a)}}class lr extends Os{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=lr.HEADER_SIZE+Os.GTIN_SIZE+lr.WEIGHT_SIZE)throw new B;let e=new K;return this.encodeCompressedGtin(e,lr.HEADER_SIZE),this.encodeCompressedWeight(e,lr.HEADER_SIZE+Os.GTIN_SIZE,lr.WEIGHT_SIZE),e.toString()}}lr.HEADER_SIZE=5,lr.WEIGHT_SIZE=15;class Oa extends lr{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class Da extends lr{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Zn extends Cn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Zn.HEADER_SIZE+Cn.GTIN_SIZE)throw new B;let e=new K;this.encodeCompressedGtin(e,Zn.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Zn.HEADER_SIZE+Cn.GTIN_SIZE,Zn.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(Zn.HEADER_SIZE+Cn.GTIN_SIZE+Zn.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()}}Zn.HEADER_SIZE=8,Zn.LAST_DIGIT_SIZE=2;class un extends Cn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<un.HEADER_SIZE+Cn.GTIN_SIZE)throw new B;let e=new K;this.encodeCompressedGtin(e,un.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+Cn.GTIN_SIZE,un.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+Cn.GTIN_SIZE+un.LAST_DIGIT_SIZE,un.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);let i=this.getGeneralDecoder().decodeGeneralPurposeField(un.HEADER_SIZE+Cn.GTIN_SIZE+un.LAST_DIGIT_SIZE+un.FIRST_THREE_DIGITS_SIZE,null);return e.append(i.getNewString()),e.toString()}}un.HEADER_SIZE=8,un.LAST_DIGIT_SIZE=2,un.FIRST_THREE_DIGITS_SIZE=10;class kt extends Os{constructor(e,n,r){super(e),this.dateCode=r,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=kt.HEADER_SIZE+kt.GTIN_SIZE+kt.WEIGHT_SIZE+kt.DATE_SIZE)throw new B;let e=new K;return this.encodeCompressedGtin(e,kt.HEADER_SIZE),this.encodeCompressedWeight(e,kt.HEADER_SIZE+kt.GTIN_SIZE,kt.WEIGHT_SIZE),this.encodeCompressedDate(e,kt.HEADER_SIZE+kt.GTIN_SIZE+kt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(n,kt.DATE_SIZE);if(r==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let i=r%32;r/=32;let a=r%12+1;r/=12;let o=r;o/10==0&&e.append("0"),e.append(o),a/10==0&&e.append("0"),e.append(a),i/10==0&&e.append("0"),e.append(i)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}kt.HEADER_SIZE=8,kt.WEIGHT_SIZE=20,kt.DATE_SIZE=16;function Pa(C){try{if(C.get(1))return new Bn(C);if(!C.get(2))return new Ms(C);switch(ns.extractNumericValueFromBitArray(C,1,4)){case 4:return new Oa(C);case 5:return new Da(C)}switch(ns.extractNumericValueFromBitArray(C,1,5)){case 12:return new Zn(C);case 13:return new un(C)}switch(ns.extractNumericValueFromBitArray(C,1,7)){case 56:return new kt(C,"310","11");case 57:return new kt(C,"320","11");case 58:return new kt(C,"310","13");case 59:return new kt(C,"320","13");case 60:return new kt(C,"310","15");case 61:return new kt(C,"320","15");case 62:return new kt(C,"310","17");case 63:return new kt(C,"320","17")}}catch(e){throw console.log(e),new vn("unknown decoder: "+C)}}class wt{constructor(e,n,r,i){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=i}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof wt?wt.equalsOrNull(e.leftchar,n.leftchar)&&wt.equalsOrNull(e.rightchar,n.rightchar)&&wt.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:wt.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Xi{constructor(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof Xi?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let r;return e.forEach((i,a)=>{n.forEach(o=>{i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}}class ge extends tn{constructor(e){super(...arguments),this.pairs=new Array(ge.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,r){this.pairs.length=0,this.startFromEven=!1;try{return ge.constructResult(this.decodeRow2pairs(e,n))}catch(i){this.verbose&&console.log(i)}return this.pairs.length=0,this.startFromEven=!0,ge.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(a){if(a instanceof B){if(!this.pairs.length)throw new B;r=!0}}if(this.checkChecksum())return this.pairs;let i;if(this.rows.length?i=!0:i=!1,this.storeRow(e,!1),i){let a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new B}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(r){this.verbose&&console.log(r)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let r=n;r<this.rows.length;r++){let i=this.rows[r];this.pairs.length=0;for(let o of e)this.pairs.push(o.getPairs());if(this.pairs.push(i.getPairs()),!ge.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let a=new Array(e);a.push(i);try{return this.checkRows(a,r+1)}catch(o){this.verbose&&console.log(o)}}throw new B}static isValidSequence(e){for(let n of ge.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let r=!0;for(let i=0;i<e.length;i++)if(e[i].getFinderPattern().getValue()!=n[i]){r=!1;break}if(r)return!0}return!1}storeRow(e,n){let r=0,i=!1,a=!1;for(;r<this.rows.length;){let o=this.rows[r];if(o.getRowNumber()>e){a=o.isEquivalent(this.pairs);break}i=o.isEquivalent(this.pairs),r++}a||i||ge.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new Xi(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let r of n)if(r.getPairs().length!==e.length){for(let i of r.getPairs())for(let a of e)if(wt.equals(i,a))break}}static isPartialRow(e,n){for(let r of n){let i=!0;for(let a of e){let o=!1;for(let u of r.getPairs())if(a.equals(u)){o=!0;break}if(!o){i=!1;break}}if(i)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=Hi.buildBitArray(e),i=Pa(n).parseInformation(),a=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),u=[a[0],a[1],o[0],o[1]];return new _e(i,null,null,u,fe.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),r=e.getRightChar();if(r==null)return!1;let i=r.getChecksumPortion(),a=2;for(let u=1;u<this.pairs.size();++u){let h=this.pairs.get(u);i+=h.getLeftChar().getChecksumPortion(),a++;let g=h.getRightChar();g!=null&&(i+=g.getChecksumPortion(),a++)}return i%=211,211*(a-4)+i==n.getValue()}static getNextSecondBar(e,n){let r;return e.get(n)?(r=e.getNextUnset(n),r=e.getNextSet(r)):(r=e.getNextSet(n),r=e.getNextUnset(r)),r}retrieveNextPair(e,n,r){let i=n.length%2==0;this.startFromEven&&(i=!i);let a,o=!0,u=-1;do this.findNextPair(e,n,u),a=this.parseFoundFinderPattern(e,r,i),a==null?u=ge.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);let h=this.decodeDataCharacter(e,a,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new B;let g;try{g=this.decodeDataCharacter(e,a,i,!1)}catch(b){g=null,this.verbose&&console.log(b)}return new wt(h,g,a,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,r){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o;r>=0?o=r:this.isEmptyPair(n)?o=0:o=n[n.length-1].getFinderPattern().getStartEnd()[1];let u=n.length%2!=0;this.startFromEven&&(u=!u);let h=!1;for(;o<a&&(h=!e.get(o),!!h);)o++;let g=0,b=o;for(let E=o;E<a;E++)if(e.get(E)!=h)i[g]++;else{if(g==3){if(u&&ge.reverseCounters(i),ge.isFinderPattern(i)){this.startEnd[0]=b,this.startEnd[1]=E;return}u&&ge.reverseCounters(i),b+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,g--}else g++;i[g]=1,h=!h}throw new B}static reverseCounters(e){let n=e.length;for(let r=0;r<n/2;++r){let i=e[r];e[r]=e[n-r-1],e[n-r-1]=i}}parseFoundFinderPattern(e,n,r){let i,a,o;if(r){let g=this.startEnd[0]-1;for(;g>=0&&!e.get(g);)g--;g++,i=this.startEnd[0]-g,a=g,o=this.startEnd[1]}else a=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),i=o-this.startEnd[1];let u=this.getDecodeFinderCounters();ie.arraycopy(u,0,u,1,u.length-1),u[0]=i;let h;try{h=this.parseFinderValue(u,ge.FINDER_PATTERNS)}catch{return null}return new js(h,[a,o],a,o,n)}decodeDataCharacter(e,n,r,i){let a=this.getDataCharacterCounters();for(let yt=0;yt<a.length;yt++)a[yt]=0;if(i)ge.recordPatternInReverse(e,n.getStartEnd()[0],a);else{ge.recordPattern(e,n.getStartEnd()[1],a);for(let yt=0,Bt=a.length-1;yt<Bt;yt++,Bt--){let yn=a[yt];a[yt]=a[Bt],a[Bt]=yn}}let o=17,u=ut.sum(new Int32Array(a))/o,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(u-h)/h>.3)throw new B;let g=this.getOddCounts(),b=this.getEvenCounts(),E=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let yt=0;yt<a.length;yt++){let Bt=1*a[yt]/u,yn=Bt+.5;if(yn<1){if(Bt<.3)throw new B;yn=1}else if(yn>8){if(Bt>8.7)throw new B;yn=8}let Hr=yt/2;(yt&1)==0?(g[Hr]=yn,E[Hr]=Bt-yn):(b[Hr]=yn,k[Hr]=Bt-yn)}this.adjustOddEvenCounts(o);let _=4*n.getValue()+(r?0:2)+(i?0:1)-1,L=0,U=0;for(let yt=g.length-1;yt>=0;yt--){if(ge.isNotA1left(n,r,i)){let Bt=ge.WEIGHTS[_][2*yt];U+=g[yt]*Bt}L+=g[yt]}let V=0;for(let yt=b.length-1;yt>=0;yt--)if(ge.isNotA1left(n,r,i)){let Bt=ge.WEIGHTS[_][2*yt+1];V+=b[yt]*Bt}let J=U+V;if((L&1)!=0||L>13||L<4)throw new B;let Ce=(13-L)/2,Ae=ge.SYMBOL_WIDEST[Ce],be=9-Ae,lt=Nn.getRSSvalue(g,Ae,!0),et=Nn.getRSSvalue(b,be,!1),An=ge.EVEN_TOTAL_SUBSET[Ce],Jn=ge.GSUM[Ce],Kt=lt*An+et+Jn;return new Ir(Kt,J)}static isNotA1left(e,n,r){return!(e.getValue()==0&&n&&r)}adjustOddEvenCounts(e){let n=ut.sum(new Int32Array(this.getOddCounts())),r=ut.sum(new Int32Array(this.getEvenCounts())),i=!1,a=!1;n>13?a=!0:n<4&&(i=!0);let o=!1,u=!1;r>13?u=!0:r<4&&(o=!0);let h=n+r-e,g=(n&1)==1,b=(r&1)==0;if(h==1)if(g){if(b)throw new B;a=!0}else{if(!b)throw new B;u=!0}else if(h==-1)if(g){if(b)throw new B;i=!0}else{if(!b)throw new B;o=!0}else if(h==0){if(g){if(!b)throw new B;n<r?(i=!0,u=!0):(a=!0,o=!0)}else if(b)throw new B}else throw new B;if(i){if(a)throw new B;ge.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&ge.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(u)throw new B;ge.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&ge.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ge.SYMBOL_WIDEST=[7,5,4,3,1],ge.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ge.GSUM=[0,348,1388,2948,3988],ge.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ge.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ge.FINDER_PAT_A=0,ge.FINDER_PAT_B=1,ge.FINDER_PAT_C=2,ge.FINDER_PAT_D=3,ge.FINDER_PAT_E=4,ge.FINDER_PAT_F=5,ge.FINDER_PATTERN_SEQUENCES=[[ge.FINDER_PAT_A,ge.FINDER_PAT_A],[ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B],[ge.FINDER_PAT_A,ge.FINDER_PAT_C,ge.FINDER_PAT_B,ge.FINDER_PAT_D],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_C],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_D,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_D],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_E],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F]],ge.MAX_PAIRS=11;class Ba extends Ir{constructor(e,n,r){super(e,n),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Et extends tn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,r){const i=this.decodePair(n,!1,e,r);Et.addOrTally(this.possibleLeftPairs,i),n.reverse();let a=this.decodePair(n,!0,e,r);Et.addOrTally(this.possibleRightPairs,a),n.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1){for(let u of this.possibleRightPairs)if(u.getCount()>1&&Et.checkChecksum(o,u))return Et.constructResult(o,u)}throw new B}static addOrTally(e,n){if(n==null)return;let r=!1;for(let i of e)if(i.getValue()===n.getValue()){i.incrementCount(),r=!0;break}r||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let r=4537077*e.getValue()+n.getValue(),i=new String(r).toString(),a=new K;for(let g=13-i.length;g>0;g--)a.append("0");a.append(i);let o=0;for(let g=0;g<13;g++){let b=a.charAt(g).charCodeAt(0)-48;o+=(g&1)===0?3*b:b}o=10-o%10,o===10&&(o=0),a.append(o.toString());let u=e.getFinderPattern().getResultPoints(),h=n.getFinderPattern().getResultPoints();return new _e(a.toString(),null,0,[u[0],u[1],h[0],h[1]],fe.RSS_14,new Date().getTime())}static checkChecksum(e,n){let r=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,i=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,r===i}decodePair(e,n,r,i){try{let a=this.findFinderPattern(e,n),o=this.parseFoundFinderPattern(e,r,n,a),u=i==null?null:i.get(he.NEED_RESULT_POINT_CALLBACK);if(u!=null){let b=(a[0]+a[1])/2;n&&(b=e.getSize()-1-b),u.foundPossibleResultPoint(new Le(b,r))}let h=this.decodeDataCharacter(e,o,!0),g=this.decodeDataCharacter(e,o,!1);return new Ba(1597*h.getValue()+g.getValue(),h.getChecksumPortion()+4*g.getChecksumPortion(),o)}catch{return null}}decodeDataCharacter(e,n,r){let i=this.getDataCharacterCounters();for(let V=0;V<i.length;V++)i[V]=0;if(r)Pt.recordPatternInReverse(e,n.getStartEnd()[0],i);else{Pt.recordPattern(e,n.getStartEnd()[1]+1,i);for(let V=0,J=i.length-1;V<J;V++,J--){let Ce=i[V];i[V]=i[J],i[J]=Ce}}let a=r?16:15,o=ut.sum(new Int32Array(i))/a,u=this.getOddCounts(),h=this.getEvenCounts(),g=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let V=0;V<i.length;V++){let J=i[V]/o,Ce=Math.floor(J+.5);Ce<1?Ce=1:Ce>8&&(Ce=8);let Ae=Math.floor(V/2);(V&1)===0?(u[Ae]=Ce,g[Ae]=J-Ce):(h[Ae]=Ce,b[Ae]=J-Ce)}this.adjustOddEvenCounts(r,a);let E=0,k=0;for(let V=u.length-1;V>=0;V--)k*=9,k+=u[V],E+=u[V];let _=0,L=0;for(let V=h.length-1;V>=0;V--)_*=9,_+=h[V],L+=h[V];let U=k+3*_;if(r){if((E&1)!==0||E>12||E<4)throw new B;let V=(12-E)/2,J=Et.OUTSIDE_ODD_WIDEST[V],Ce=9-J,Ae=Nn.getRSSvalue(u,J,!1),be=Nn.getRSSvalue(h,Ce,!0),lt=Et.OUTSIDE_EVEN_TOTAL_SUBSET[V],et=Et.OUTSIDE_GSUM[V];return new Ir(Ae*lt+be+et,U)}else{if((L&1)!==0||L>10||L<4)throw new B;let V=(10-L)/2,J=Et.INSIDE_ODD_WIDEST[V],Ce=9-J,Ae=Nn.getRSSvalue(u,J,!0),be=Nn.getRSSvalue(h,Ce,!1),lt=Et.INSIDE_ODD_TOTAL_SUBSET[V],et=Et.INSIDE_GSUM[V];return new Ir(be*lt+Ae+et,U)}}findFinderPattern(e,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),a=!1,o=0;for(;o<i&&(a=!e.get(o),n!==a);)o++;let u=0,h=o;for(let g=o;g<i;g++)if(e.get(g)!==a)r[u]++;else{if(u===3){if(tn.isFinderPattern(r))return[h,g];h+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,u--}else u++;r[u]=1,a=!a}throw new B}parseFoundFinderPattern(e,n,r,i){let a=e.get(i[0]),o=i[0]-1;for(;o>=0&&a!==e.get(o);)o--;o++;const u=i[0]-o,h=this.getDecodeFinderCounters(),g=new Int32Array(h.length);ie.arraycopy(h,0,g,1,h.length-1),g[0]=u;const b=this.parseFinderValue(g,Et.FINDER_PATTERNS);let E=o,k=i[1];return r&&(E=e.getSize()-1-E,k=e.getSize()-1-k),new js(b,[o,i[1]],E,k,n)}adjustOddEvenCounts(e,n){let r=ut.sum(new Int32Array(this.getOddCounts())),i=ut.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1,u=!1,h=!1;e?(r>12?o=!0:r<4&&(a=!0),i>12?h=!0:i<4&&(u=!0)):(r>11?o=!0:r<5&&(a=!0),i>10?h=!0:i<4&&(u=!0));let g=r+i-n,b=(r&1)===(e?1:0),E=(i&1)===1;if(g===1)if(b){if(E)throw new B;o=!0}else{if(!E)throw new B;h=!0}else if(g===-1)if(b){if(E)throw new B;a=!0}else{if(!E)throw new B;u=!0}else if(g===0){if(b){if(!E)throw new B;r<i?(a=!0,h=!0):(o=!0,u=!0)}else if(E)throw new B}else throw new B;if(a){if(o)throw new B;tn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&tn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new B;tn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&tn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Et.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Et.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Et.OUTSIDE_GSUM=[0,161,961,2015,2715],Et.INSIDE_GSUM=[0,336,1036,1516],Et.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Et.INSIDE_ODD_WIDEST=[2,4,6,8],Et.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class rs extends Pt{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const r=e?e.get(he.POSSIBLE_FORMATS):null,i=e&&e.get(he.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;r?((r.includes(fe.EAN_13)||r.includes(fe.UPC_A)||r.includes(fe.EAN_8)||r.includes(fe.UPC_E))&&this.readers.push(new li(e)),r.includes(fe.CODE_39)&&this.readers.push(new Xt(i)),r.includes(fe.CODE_128)&&this.readers.push(new Te),r.includes(fe.ITF)&&this.readers.push(new pt),r.includes(fe.RSS_14)&&this.readers.push(new Et),r.includes(fe.RSS_EXPANDED)&&this.readers.push(new ge(this.verbose))):(this.readers.push(new li(e)),this.readers.push(new Xt),this.readers.push(new li(e)),this.readers.push(new Te),this.readers.push(new pt),this.readers.push(new Et),this.readers.push(new ge(this.verbose)))}decodeRow(e,n,r){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,n,r)}catch{}throw new B}reset(){this.readers.forEach(e=>e.reset())}}class La extends ke{constructor(e=500,n){super(new rs(n),e,n)}}class ft{constructor(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class rt{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class dt{constructor(e,n,r,i,a,o){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;let u=0;const h=o.getECCodewords(),g=o.getECBlocks();for(let b of g)u+=b.getCount()*(b.getDataCodewords()+h);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if((e&1)!==0||(n&1)!==0)throw new G;for(let r of dt.VERSIONS)if(r.symbolSizeRows===e&&r.symbolSizeColumns===n)return r;throw new G}toString(){return""+this.versionNumber}static buildVersions(){return[new dt(1,10,10,8,8,new ft(5,new rt(1,3))),new dt(2,12,12,10,10,new ft(7,new rt(1,5))),new dt(3,14,14,12,12,new ft(10,new rt(1,8))),new dt(4,16,16,14,14,new ft(12,new rt(1,12))),new dt(5,18,18,16,16,new ft(14,new rt(1,18))),new dt(6,20,20,18,18,new ft(18,new rt(1,22))),new dt(7,22,22,20,20,new ft(20,new rt(1,30))),new dt(8,24,24,22,22,new ft(24,new rt(1,36))),new dt(9,26,26,24,24,new ft(28,new rt(1,44))),new dt(10,32,32,14,14,new ft(36,new rt(1,62))),new dt(11,36,36,16,16,new ft(42,new rt(1,86))),new dt(12,40,40,18,18,new ft(48,new rt(1,114))),new dt(13,44,44,20,20,new ft(56,new rt(1,144))),new dt(14,48,48,22,22,new ft(68,new rt(1,174))),new dt(15,52,52,24,24,new ft(42,new rt(2,102))),new dt(16,64,64,14,14,new ft(56,new rt(2,140))),new dt(17,72,72,16,16,new ft(36,new rt(4,92))),new dt(18,80,80,18,18,new ft(48,new rt(4,114))),new dt(19,88,88,20,20,new ft(56,new rt(4,144))),new dt(20,96,96,22,22,new ft(68,new rt(4,174))),new dt(21,104,104,24,24,new ft(56,new rt(6,136))),new dt(22,120,120,18,18,new ft(68,new rt(6,175))),new dt(23,132,132,20,20,new ft(62,new rt(8,163))),new dt(24,144,144,22,22,new ft(62,new rt(8,156),new rt(2,155))),new dt(25,8,18,6,16,new ft(7,new rt(1,5))),new dt(26,8,32,6,14,new ft(11,new rt(1,10))),new dt(27,12,26,10,24,new ft(14,new rt(1,16))),new dt(28,12,36,10,16,new ft(18,new rt(1,22))),new dt(29,16,36,14,16,new ft(24,new rt(1,32))),new dt(30,16,48,14,22,new ft(28,new rt(1,49)))]}}dt.VERSIONS=dt.buildVersions();class _n{constructor(e){const n=e.getHeight();if(n<8||n>144||(n&1)!==0)throw new G;this.version=_n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Se(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),r=e.getWidth();return dt.getVersionForDimensions(n,r)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,r=4,i=0;const a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let u=!1,h=!1,g=!1,b=!1;do if(r===a&&i===0&&!u)e[n++]=this.readCorner1(a,o)&255,r-=2,i+=2,u=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!h)e[n++]=this.readCorner2(a,o)&255,r-=2,i+=2,h=!0;else if(r===a+4&&i===2&&(o&7)===0&&!g)e[n++]=this.readCorner3(a,o)&255,r-=2,i+=2,g=!0;else if(r===a-2&&i===0&&(o&7)===4&&!b)e[n++]=this.readCorner4(a,o)&255,r-=2,i+=2,b=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(n!==this.version.getTotalCodewords())throw new G;return e}readModule(e,n,r,i){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,r,i){let a=0;return this.readModule(e-2,n-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,n-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,n-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,n-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,n,r,i)&&(a|=1),a<<=1,this.readModule(e,n-2,r,i)&&(a|=1),a<<=1,this.readModule(e,n-1,r,i)&&(a|=1),a<<=1,this.readModule(e,n,r,i)&&(a|=1),a}readCorner1(e,n){let r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r}readCorner2(e,n){let r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r}readCorner3(e,n){let r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r}readCorner4(e,n){let r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new j("Dimension of bitMatrix must match the version size");const i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=n/i|0,u=r/a|0,h=o*i,g=u*a,b=new Se(g,h);for(let E=0;E<o;++E){const k=E*i;for(let _=0;_<u;++_){const L=_*a;for(let U=0;U<i;++U){const V=E*(i+2)+1+U,J=k+U;for(let Ce=0;Ce<a;++Ce){const Ae=_*(a+2)+1+Ce;if(e.get(Ae,V)){const be=L+Ce;b.set(be,J)}}}}}return b}}class Zi{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const r=n.getECBlocks();let i=0;const a=r.getECBlocks();for(let U of a)i+=U.getCount();const o=new Array(i);let u=0;for(let U of a)for(let V=0;V<U.getCount();V++){const J=U.getDataCodewords(),Ce=r.getECCodewords()+J;o[u++]=new Zi(J,new Uint8Array(Ce))}const g=o[0].codewords.length-r.getECCodewords(),b=g-1;let E=0;for(let U=0;U<b;U++)for(let V=0;V<u;V++)o[V].codewords[U]=e[E++];const k=n.getVersionNumber()===24,_=k?8:u;for(let U=0;U<_;U++)o[U].codewords[g-1]=e[E++];const L=o[0].codewords.length;for(let U=g;U<L;U++)for(let V=0;V<u;V++){const J=k?(V+8)%u:V,Ce=k&&J>7?U-1:U;o[J].codewords[Ce]=e[E++]}if(E!==e.length)throw new j;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Yi{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new j(""+e);let n=0,r=this.bitOffset,i=this.byteOffset;const a=this.bytes;if(r>0){const o=8-r,u=e<o?e:o,h=o-u,g=255>>8-u<<h;n=(a[i]&g)>>h,e-=u,r+=u,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)n=n<<8|a[i]&255,i++,e-=8;if(e>0){const o=8-e,u=255>>o<<o;n=n<<e|(a[i]&u)>>o,r+=e}}return this.bitOffset=r,this.byteOffset=i,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Zt;(function(C){C[C.PAD_ENCODE=0]="PAD_ENCODE",C[C.ASCII_ENCODE=1]="ASCII_ENCODE",C[C.C40_ENCODE=2]="C40_ENCODE",C[C.TEXT_ENCODE=3]="TEXT_ENCODE",C[C.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",C[C.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",C[C.BASE256_ENCODE=6]="BASE256_ENCODE"})(Zt||(Zt={}));class Yn{static decode(e){const n=new Yi(e),r=new K,i=new K,a=new Array;let o=Zt.ASCII_ENCODE;do if(o===Zt.ASCII_ENCODE)o=this.decodeAsciiSegment(n,r,i);else{switch(o){case Zt.C40_ENCODE:this.decodeC40Segment(n,r);break;case Zt.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case Zt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case Zt.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case Zt.BASE256_ENCODE:this.decodeBase256Segment(n,r,a);break;default:throw new G}o=Zt.ASCII_ENCODE}while(o!==Zt.PAD_ENCODE&&n.available()>0);return i.length()>0&&r.append(i.toString()),new Me(e,r.toString(),a.length===0?null:a,null)}static decodeAsciiSegment(e,n,r){let i=!1;do{let a=e.readBits(8);if(a===0)throw new G;if(a<=128)return i&&(a+=128),n.append(String.fromCharCode(a-1)),Zt.ASCII_ENCODE;if(a===129)return Zt.PAD_ENCODE;if(a<=229){const o=a-130;o<10&&n.append("0"),n.append(""+o)}else switch(a){case 230:return Zt.C40_ENCODE;case 231:return Zt.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return Zt.ANSIX12_ENCODE;case 239:return Zt.TEXT_ENCODE;case 240:return Zt.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new G;break}}while(e.available()>0);return Zt.ASCII_ENCODE}static decodeC40Segment(e,n){let r=!1;const i=[];let a=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(let u=0;u<3;u++){const h=i[u];switch(a){case 0:if(h<3)a=h+1;else if(h<this.C40_BASIC_SET_CHARS.length){const g=this.C40_BASIC_SET_CHARS[h];r?(n.append(String.fromCharCode(g.charCodeAt(0)+128)),r=!1):n.append(g)}else throw new G;break;case 1:r?(n.append(String.fromCharCode(h+128)),r=!1):n.append(String.fromCharCode(h)),a=0;break;case 2:if(h<this.C40_SHIFT2_SET_CHARS.length){const g=this.C40_SHIFT2_SET_CHARS[h];r?(n.append(String.fromCharCode(g.charCodeAt(0)+128)),r=!1):n.append(g)}else switch(h){case 27:n.append("");break;case 30:r=!0;break;default:throw new G}a=0;break;case 3:r?(n.append(String.fromCharCode(h+224)),r=!1):n.append(String.fromCharCode(h+96)),a=0;break;default:throw new G}}}while(e.available()>0)}static decodeTextSegment(e,n){let r=!1,i=[],a=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(let u=0;u<3;u++){const h=i[u];switch(a){case 0:if(h<3)a=h+1;else if(h<this.TEXT_BASIC_SET_CHARS.length){const g=this.TEXT_BASIC_SET_CHARS[h];r?(n.append(String.fromCharCode(g.charCodeAt(0)+128)),r=!1):n.append(g)}else throw new G;break;case 1:r?(n.append(String.fromCharCode(h+128)),r=!1):n.append(String.fromCharCode(h)),a=0;break;case 2:if(h<this.TEXT_SHIFT2_SET_CHARS.length){const g=this.TEXT_SHIFT2_SET_CHARS[h];r?(n.append(String.fromCharCode(g.charCodeAt(0)+128)),r=!1):n.append(g)}else switch(h){case 27:n.append("");break;case 30:r=!0;break;default:throw new G}a=0;break;case 3:if(h<this.TEXT_SHIFT3_SET_CHARS.length){const g=this.TEXT_SHIFT3_SET_CHARS[h];r?(n.append(String.fromCharCode(g.charCodeAt(0)+128)),r=!1):n.append(g),a=0}else throw new G;break;default:throw new G}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const r=[];do{if(e.available()===8)return;const i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(let a=0;a<3;a++){const o=r[a];switch(o){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(o<14)n.append(String.fromCharCode(o+44));else if(o<40)n.append(String.fromCharCode(o+51));else throw new G;break}}}while(e.available()>0)}static parseTwoBytes(e,n,r){let i=(e<<8)+n-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let r=0;r<4;r++){let i=e.readBits(6);if(i===31){const a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),n.append(String.fromCharCode(i))}}while(e.available()>0)}static decodeBase256Segment(e,n,r){let i=1+e.getByteOffset();const a=this.unrandomize255State(e.readBits(8),i++);let o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new G;const u=new Uint8Array(o);for(let h=0;h<o;h++){if(e.available()<8)throw new G;u[h]=this.unrandomize255State(e.readBits(8),i++)}r.push(u);try{n.append(Xe.decode(u,ne.ISO88591))}catch(h){throw new vn("Platform does not support required encoding: "+h.message)}}static unrandomize255State(e,n){const r=149*n%255+1,i=e-r;return i>=0?i:i+256}}Yn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Yn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Yn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Yn.TEXT_SHIFT2_SET_CHARS=Yn.C40_SHIFT2_SET_CHARS,Yn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class oi{constructor(){this.rsDecoder=new Rn(at.DATA_MATRIX_FIELD_256)}decode(e){const n=new _n(e),r=n.getVersion(),i=n.readCodewords(),a=Zi.getDataBlocks(i,r);let o=0;for(let g of a)o+=g.getNumDataCodewords();const u=new Uint8Array(o),h=a.length;for(let g=0;g<h;g++){const b=a[g],E=b.getCodewords(),k=b.getNumDataCodewords();this.correctErrors(E,k);for(let _=0;_<k;_++)u[_*h+g]=E[_]}return Yn.decode(u)}correctErrors(e,n){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new re}for(let i=0;i<n;i++)e[i]=r[i]}}class At{constructor(e){this.image=e,this.rectangleDetector=new ir(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new B;n=this.shiftToModuleCenter(n);const r=n[0],i=n[1],a=n[2],o=n[3];let u=this.transitionsBetween(r,o)+1,h=this.transitionsBetween(a,o)+1;(u&1)===1&&(u+=1),(h&1)===1&&(h+=1),4*u<7*h&&4*h<7*u&&(u=h=Math.max(u,h));let g=At.sampleGrid(this.image,r,i,a,o,u,h);return new es(g,[r,i,a,o])}static shiftPoint(e,n,r){let i=(n.getX()-e.getX())/(r+1),a=(n.getY()-e.getY())/(r+1);return new Le(e.getX()+i,e.getY()+a)}static moveAway(e,n,r){let i=e.getX(),a=e.getY();return i<n?i-=1:i+=1,a<r?a-=1:a+=1,new Le(i,a)}detectSolid1(e){let n=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(n,r),u=this.transitionsBetween(r,i),h=this.transitionsBetween(i,a),g=this.transitionsBetween(a,n),b=o,E=[a,n,r,i];return b>u&&(b=u,E[0]=n,E[1]=r,E[2]=i,E[3]=a),b>h&&(b=h,E[0]=r,E[1]=i,E[2]=a,E[3]=n),b>g&&(E[0]=i,E[1]=a,E[2]=n,E[3]=r),E}detectSolid2(e){let n=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(n,a),u=At.shiftPoint(r,i,(o+1)*4),h=At.shiftPoint(i,r,(o+1)*4),g=this.transitionsBetween(u,n),b=this.transitionsBetween(h,a);return g<b?(e[0]=n,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=n),e}correctTopRight(e){let n=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(n,a),u=this.transitionsBetween(r,a),h=At.shiftPoint(n,r,(u+1)*4),g=At.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(h,a),u=this.transitionsBetween(g,a);let b=new Le(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),E=new Le(a.getX()+(n.getX()-r.getX())/(u+1),a.getY()+(n.getY()-r.getY())/(u+1));if(!this.isValid(b))return this.isValid(E)?E:null;if(!this.isValid(E))return b;let k=this.transitionsBetween(h,b)+this.transitionsBetween(g,b),_=this.transitionsBetween(h,E)+this.transitionsBetween(g,E);return k>_?b:E}shiftToModuleCenter(e){let n=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(n,a)+1,u=this.transitionsBetween(i,a)+1,h=At.shiftPoint(n,r,u*4),g=At.shiftPoint(i,r,o*4);o=this.transitionsBetween(h,a)+1,u=this.transitionsBetween(g,a)+1,(o&1)===1&&(o+=1),(u&1)===1&&(u+=1);let b=(n.getX()+r.getX()+i.getX()+a.getX())/4,E=(n.getY()+r.getY()+i.getY()+a.getY())/4;n=At.moveAway(n,b,E),r=At.moveAway(r,b,E),i=At.moveAway(i,b,E),a=At.moveAway(a,b,E);let k,_;return h=At.shiftPoint(n,r,u*4),h=At.shiftPoint(h,a,o*4),k=At.shiftPoint(r,n,u*4),k=At.shiftPoint(k,i,o*4),g=At.shiftPoint(i,a,u*4),g=At.shiftPoint(g,r,o*4),_=At.shiftPoint(a,i,u*4),_=At.shiftPoint(_,n,o*4),[h,k,g,_]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,r,i,a,o,u){return Vn.getInstance().sampleGrid(e,o,u,.5,.5,o-.5,.5,o-.5,u-.5,.5,u-.5,n.getX(),n.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())}transitionsBetween(e,n){let r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(n.getX()),o=Math.trunc(n.getY()),u=Math.abs(o-i)>Math.abs(a-r);if(u){let U=r;r=i,i=U,U=a,a=o,o=U}let h=Math.abs(a-r),g=Math.abs(o-i),b=-h/2,E=i<o?1:-1,k=r<a?1:-1,_=0,L=this.image.get(u?i:r,u?r:i);for(let U=r,V=i;U!==a;U+=k){let J=this.image.get(u?V:U,u?U:V);if(J!==L&&(_++,L=J),b+=g,b>0){if(V===o)break;V+=E,b-=h}}return _}}class Kn{constructor(){this.decoder=new oi}decode(e,n=null){let r,i;if(n!=null&&n.has(he.PURE_BARCODE)){const g=Kn.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(g),i=Kn.NO_POINTS}else{const g=new At(e.getBlackMatrix()).detect();r=this.decoder.decode(g.getBits()),i=g.getPoints()}const a=r.getRawBytes(),o=new _e(r.getText(),a,8*a.length,i,fe.DATA_MATRIX,ie.currentTimeMillis()),u=r.getByteSegments();u!=null&&o.putMetadata(je.BYTE_SEGMENTS,u);const h=r.getECLevel();return h!=null&&o.putMetadata(je.ERROR_CORRECTION_LEVEL,h),o}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new B;const i=this.moduleSize(n,e);let a=n[1];const o=r[1];let u=n[0];const g=(r[0]-u+1)/i,b=(o-a+1)/i;if(g<=0||b<=0)throw new B;const E=i/2;a+=E,u+=E;const k=new Se(g,b);for(let _=0;_<b;_++){const L=a+_*i;for(let U=0;U<g;U++)e.get(u+U*i,L)&&k.set(U,_)}return k}static moduleSize(e,n){const r=n.getWidth();let i=e[0];const a=e[1];for(;i<r&&n.get(i,a);)i++;if(i===r)throw new B;const o=i-e[0];if(o===0)throw new B;return o}}Kn.NO_POINTS=[];class Kl extends ke{constructor(e=500){super(new Kn,e)}}var ss;(function(C){C[C.L=0]="L",C[C.M=1]="M",C[C.Q=2]="Q",C[C.H=3]="H"})(ss||(ss={}));class bt{constructor(e,n,r){this.value=e,this.stringValue=n,this.bits=r,bt.FOR_BITS.set(r,this),bt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return bt.L;case"M":return bt.M;case"Q":return bt.Q;case"H":return bt.H;default:throw new P(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof bt))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=bt.FOR_BITS.size)throw new j;return bt.FOR_BITS.get(e)}}bt.FOR_BITS=new Map,bt.FOR_VALUE=new Map,bt.L=new bt(ss.L,"L",1),bt.M=new bt(ss.M,"M",0),bt.Q=new bt(ss.Q,"Q",3),bt.H=new bt(ss.H,"H",2);class nn{constructor(e){this.errorCorrectionLevel=bt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return oe.bitCount(e^n)}static decodeFormatInformation(e,n){const r=nn.doDecodeFormatInformation(e,n);return r!==null?r:nn.doDecodeFormatInformation(e^nn.FORMAT_INFO_MASK_QR,n^nn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let r=Number.MAX_SAFE_INTEGER,i=0;for(const a of nn.FORMAT_INFO_DECODE_LOOKUP){const o=a[0];if(o===e||o===n)return new nn(a[1]);let u=nn.numBitsDiffering(e,o);u<r&&(i=a[1],r=u),e!==n&&(u=nn.numBitsDiffering(n,o),u<r&&(i=a[1],r=u))}return r<=3?new nn(i):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof nn))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}nn.FORMAT_INFO_MASK_QR=21522,nn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Z{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const r of n)e+=r.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class R{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ge{constructor(e,n,...r){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=r;let i=0;const a=r[0].getECCodewordsPerBlock(),o=r[0].getECBlocks();for(const u of o)i+=u.getCount()*(u.getDataCodewords()+a);this.totalCodewords=i}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new G;try{return this.getVersionForNumber((e-17)/4)}catch{throw new G}}static getVersionForNumber(e){if(e<1||e>40)throw new j;return Ge.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,r=0;for(let i=0;i<Ge.VERSION_DECODE_INFO.length;i++){const a=Ge.VERSION_DECODE_INFO[i];if(a===e)return Ge.getVersionForNumber(i+7);const o=nn.numBitsDiffering(e,a);o<n&&(r=i+7,n=o)}return n<=3?Ge.getVersionForNumber(r):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new Se(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const r=this.alignmentPatternCenters.length;for(let i=0;i<r;i++){const a=this.alignmentPatternCenters[i]-2;for(let o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||n.setRegion(this.alignmentPatternCenters[o]-2,a,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}Ge.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ge.VERSIONS=[new Ge(1,new Int32Array(0),new Z(7,new R(1,19)),new Z(10,new R(1,16)),new Z(13,new R(1,13)),new Z(17,new R(1,9))),new Ge(2,Int32Array.from([6,18]),new Z(10,new R(1,34)),new Z(16,new R(1,28)),new Z(22,new R(1,22)),new Z(28,new R(1,16))),new Ge(3,Int32Array.from([6,22]),new Z(15,new R(1,55)),new Z(26,new R(1,44)),new Z(18,new R(2,17)),new Z(22,new R(2,13))),new Ge(4,Int32Array.from([6,26]),new Z(20,new R(1,80)),new Z(18,new R(2,32)),new Z(26,new R(2,24)),new Z(16,new R(4,9))),new Ge(5,Int32Array.from([6,30]),new Z(26,new R(1,108)),new Z(24,new R(2,43)),new Z(18,new R(2,15),new R(2,16)),new Z(22,new R(2,11),new R(2,12))),new Ge(6,Int32Array.from([6,34]),new Z(18,new R(2,68)),new Z(16,new R(4,27)),new Z(24,new R(4,19)),new Z(28,new R(4,15))),new Ge(7,Int32Array.from([6,22,38]),new Z(20,new R(2,78)),new Z(18,new R(4,31)),new Z(18,new R(2,14),new R(4,15)),new Z(26,new R(4,13),new R(1,14))),new Ge(8,Int32Array.from([6,24,42]),new Z(24,new R(2,97)),new Z(22,new R(2,38),new R(2,39)),new Z(22,new R(4,18),new R(2,19)),new Z(26,new R(4,14),new R(2,15))),new Ge(9,Int32Array.from([6,26,46]),new Z(30,new R(2,116)),new Z(22,new R(3,36),new R(2,37)),new Z(20,new R(4,16),new R(4,17)),new Z(24,new R(4,12),new R(4,13))),new Ge(10,Int32Array.from([6,28,50]),new Z(18,new R(2,68),new R(2,69)),new Z(26,new R(4,43),new R(1,44)),new Z(24,new R(6,19),new R(2,20)),new Z(28,new R(6,15),new R(2,16))),new Ge(11,Int32Array.from([6,30,54]),new Z(20,new R(4,81)),new Z(30,new R(1,50),new R(4,51)),new Z(28,new R(4,22),new R(4,23)),new Z(24,new R(3,12),new R(8,13))),new Ge(12,Int32Array.from([6,32,58]),new Z(24,new R(2,92),new R(2,93)),new Z(22,new R(6,36),new R(2,37)),new Z(26,new R(4,20),new R(6,21)),new Z(28,new R(7,14),new R(4,15))),new Ge(13,Int32Array.from([6,34,62]),new Z(26,new R(4,107)),new Z(22,new R(8,37),new R(1,38)),new Z(24,new R(8,20),new R(4,21)),new Z(22,new R(12,11),new R(4,12))),new Ge(14,Int32Array.from([6,26,46,66]),new Z(30,new R(3,115),new R(1,116)),new Z(24,new R(4,40),new R(5,41)),new Z(20,new R(11,16),new R(5,17)),new Z(24,new R(11,12),new R(5,13))),new Ge(15,Int32Array.from([6,26,48,70]),new Z(22,new R(5,87),new R(1,88)),new Z(24,new R(5,41),new R(5,42)),new Z(30,new R(5,24),new R(7,25)),new Z(24,new R(11,12),new R(7,13))),new Ge(16,Int32Array.from([6,26,50,74]),new Z(24,new R(5,98),new R(1,99)),new Z(28,new R(7,45),new R(3,46)),new Z(24,new R(15,19),new R(2,20)),new Z(30,new R(3,15),new R(13,16))),new Ge(17,Int32Array.from([6,30,54,78]),new Z(28,new R(1,107),new R(5,108)),new Z(28,new R(10,46),new R(1,47)),new Z(28,new R(1,22),new R(15,23)),new Z(28,new R(2,14),new R(17,15))),new Ge(18,Int32Array.from([6,30,56,82]),new Z(30,new R(5,120),new R(1,121)),new Z(26,new R(9,43),new R(4,44)),new Z(28,new R(17,22),new R(1,23)),new Z(28,new R(2,14),new R(19,15))),new Ge(19,Int32Array.from([6,30,58,86]),new Z(28,new R(3,113),new R(4,114)),new Z(26,new R(3,44),new R(11,45)),new Z(26,new R(17,21),new R(4,22)),new Z(26,new R(9,13),new R(16,14))),new Ge(20,Int32Array.from([6,34,62,90]),new Z(28,new R(3,107),new R(5,108)),new Z(26,new R(3,41),new R(13,42)),new Z(30,new R(15,24),new R(5,25)),new Z(28,new R(15,15),new R(10,16))),new Ge(21,Int32Array.from([6,28,50,72,94]),new Z(28,new R(4,116),new R(4,117)),new Z(26,new R(17,42)),new Z(28,new R(17,22),new R(6,23)),new Z(30,new R(19,16),new R(6,17))),new Ge(22,Int32Array.from([6,26,50,74,98]),new Z(28,new R(2,111),new R(7,112)),new Z(28,new R(17,46)),new Z(30,new R(7,24),new R(16,25)),new Z(24,new R(34,13))),new Ge(23,Int32Array.from([6,30,54,78,102]),new Z(30,new R(4,121),new R(5,122)),new Z(28,new R(4,47),new R(14,48)),new Z(30,new R(11,24),new R(14,25)),new Z(30,new R(16,15),new R(14,16))),new Ge(24,Int32Array.from([6,28,54,80,106]),new Z(30,new R(6,117),new R(4,118)),new Z(28,new R(6,45),new R(14,46)),new Z(30,new R(11,24),new R(16,25)),new Z(30,new R(30,16),new R(2,17))),new Ge(25,Int32Array.from([6,32,58,84,110]),new Z(26,new R(8,106),new R(4,107)),new Z(28,new R(8,47),new R(13,48)),new Z(30,new R(7,24),new R(22,25)),new Z(30,new R(22,15),new R(13,16))),new Ge(26,Int32Array.from([6,30,58,86,114]),new Z(28,new R(10,114),new R(2,115)),new Z(28,new R(19,46),new R(4,47)),new Z(28,new R(28,22),new R(6,23)),new Z(30,new R(33,16),new R(4,17))),new Ge(27,Int32Array.from([6,34,62,90,118]),new Z(30,new R(8,122),new R(4,123)),new Z(28,new R(22,45),new R(3,46)),new Z(30,new R(8,23),new R(26,24)),new Z(30,new R(12,15),new R(28,16))),new Ge(28,Int32Array.from([6,26,50,74,98,122]),new Z(30,new R(3,117),new R(10,118)),new Z(28,new R(3,45),new R(23,46)),new Z(30,new R(4,24),new R(31,25)),new Z(30,new R(11,15),new R(31,16))),new Ge(29,Int32Array.from([6,30,54,78,102,126]),new Z(30,new R(7,116),new R(7,117)),new Z(28,new R(21,45),new R(7,46)),new Z(30,new R(1,23),new R(37,24)),new Z(30,new R(19,15),new R(26,16))),new Ge(30,Int32Array.from([6,26,52,78,104,130]),new Z(30,new R(5,115),new R(10,116)),new Z(28,new R(19,47),new R(10,48)),new Z(30,new R(15,24),new R(25,25)),new Z(30,new R(23,15),new R(25,16))),new Ge(31,Int32Array.from([6,30,56,82,108,134]),new Z(30,new R(13,115),new R(3,116)),new Z(28,new R(2,46),new R(29,47)),new Z(30,new R(42,24),new R(1,25)),new Z(30,new R(23,15),new R(28,16))),new Ge(32,Int32Array.from([6,34,60,86,112,138]),new Z(30,new R(17,115)),new Z(28,new R(10,46),new R(23,47)),new Z(30,new R(10,24),new R(35,25)),new Z(30,new R(19,15),new R(35,16))),new Ge(33,Int32Array.from([6,30,58,86,114,142]),new Z(30,new R(17,115),new R(1,116)),new Z(28,new R(14,46),new R(21,47)),new Z(30,new R(29,24),new R(19,25)),new Z(30,new R(11,15),new R(46,16))),new Ge(34,Int32Array.from([6,34,62,90,118,146]),new Z(30,new R(13,115),new R(6,116)),new Z(28,new R(14,46),new R(23,47)),new Z(30,new R(44,24),new R(7,25)),new Z(30,new R(59,16),new R(1,17))),new Ge(35,Int32Array.from([6,30,54,78,102,126,150]),new Z(30,new R(12,121),new R(7,122)),new Z(28,new R(12,47),new R(26,48)),new Z(30,new R(39,24),new R(14,25)),new Z(30,new R(22,15),new R(41,16))),new Ge(36,Int32Array.from([6,24,50,76,102,128,154]),new Z(30,new R(6,121),new R(14,122)),new Z(28,new R(6,47),new R(34,48)),new Z(30,new R(46,24),new R(10,25)),new Z(30,new R(2,15),new R(64,16))),new Ge(37,Int32Array.from([6,28,54,80,106,132,158]),new Z(30,new R(17,122),new R(4,123)),new Z(28,new R(29,46),new R(14,47)),new Z(30,new R(49,24),new R(10,25)),new Z(30,new R(24,15),new R(46,16))),new Ge(38,Int32Array.from([6,32,58,84,110,136,162]),new Z(30,new R(4,122),new R(18,123)),new Z(28,new R(13,46),new R(32,47)),new Z(30,new R(48,24),new R(14,25)),new Z(30,new R(42,15),new R(32,16))),new Ge(39,Int32Array.from([6,26,54,82,110,138,166]),new Z(30,new R(20,117),new R(4,118)),new Z(28,new R(40,47),new R(7,48)),new Z(30,new R(43,24),new R(22,25)),new Z(30,new R(10,15),new R(67,16))),new Ge(40,Int32Array.from([6,30,58,86,114,142,170]),new Z(30,new R(19,118),new R(6,119)),new Z(28,new R(18,47),new R(31,48)),new Z(30,new R(34,24),new R(34,25)),new Z(30,new R(20,15),new R(61,16)))];var Wt;(function(C){C[C.DATA_MASK_000=0]="DATA_MASK_000",C[C.DATA_MASK_001=1]="DATA_MASK_001",C[C.DATA_MASK_010=2]="DATA_MASK_010",C[C.DATA_MASK_011=3]="DATA_MASK_011",C[C.DATA_MASK_100=4]="DATA_MASK_100",C[C.DATA_MASK_101=5]="DATA_MASK_101",C[C.DATA_MASK_110=6]="DATA_MASK_110",C[C.DATA_MASK_111=7]="DATA_MASK_111"})(Wt||(Wt={}));class st{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let r=0;r<n;r++)for(let i=0;i<n;i++)this.isMasked(r,i)&&e.flip(i,r)}}st.values=new Map([[Wt.DATA_MASK_000,new st(Wt.DATA_MASK_000,(C,e)=>(C+e&1)===0)],[Wt.DATA_MASK_001,new st(Wt.DATA_MASK_001,(C,e)=>(C&1)===0)],[Wt.DATA_MASK_010,new st(Wt.DATA_MASK_010,(C,e)=>e%3===0)],[Wt.DATA_MASK_011,new st(Wt.DATA_MASK_011,(C,e)=>(C+e)%3===0)],[Wt.DATA_MASK_100,new st(Wt.DATA_MASK_100,(C,e)=>(Math.floor(C/2)+Math.floor(e/3)&1)===0)],[Wt.DATA_MASK_101,new st(Wt.DATA_MASK_101,(C,e)=>C*e%6===0)],[Wt.DATA_MASK_110,new st(Wt.DATA_MASK_110,(C,e)=>C*e%6<3)],[Wt.DATA_MASK_111,new st(Wt.DATA_MASK_111,(C,e)=>(C+e+C*e%3&1)===0)]]);class Fa{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new G;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let a=0;a<6;a++)e=this.copyBit(a,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let a=5;a>=0;a--)e=this.copyBit(8,a,e);const n=this.bitMatrix.getHeight();let r=0;const i=n-7;for(let a=n-1;a>=i;a--)r=this.copyBit(8,a,r);for(let a=n-8;a<n;a++)r=this.copyBit(a,8,r);if(this.parsedFormatInfo=nn.decodeFormatInformation(e,r),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new G}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Ge.getVersionForNumber(n);let r=0;const i=e-11;for(let o=5;o>=0;o--)for(let u=e-9;u>=i;u--)r=this.copyBit(u,o,r);let a=Ge.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(let o=5;o>=0;o--)for(let u=e-9;u>=i;u--)r=this.copyBit(o,u,r);if(a=Ge.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new G}copyBit(e,n,r){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?r<<1|1:r<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),r=st.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);const a=n.buildFunctionPattern();let o=!0;const u=new Uint8Array(n.getTotalCodewords());let h=0,g=0,b=0;for(let E=i-1;E>0;E-=2){E===6&&E--;for(let k=0;k<i;k++){const _=o?i-1-k:k;for(let L=0;L<2;L++)a.get(E-L,_)||(b++,g<<=1,this.bitMatrix.get(E-L,_)&&(g|=1),b===8&&(u[h++]=g,b=0,g=0))}o=!o}if(h!==n.getTotalCodewords())throw new G;return u}remask(){if(this.parsedFormatInfo===null)return;const e=st.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,r=e.getWidth();n<r;n++)for(let i=n+1,a=e.getHeight();i<a;i++)e.get(n,i)!==e.get(i,n)&&(e.flip(i,n),e.flip(n,i))}}class ci{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,r){if(e.length!==n.getTotalCodewords())throw new j;const i=n.getECBlocksForLevel(r);let a=0;const o=i.getECBlocks();for(const L of o)a+=L.getCount();const u=new Array(a);let h=0;for(const L of o)for(let U=0;U<L.getCount();U++){const V=L.getDataCodewords(),J=i.getECCodewordsPerBlock()+V;u[h++]=new ci(V,new Uint8Array(J))}const g=u[0].codewords.length;let b=u.length-1;for(;b>=0&&u[b].codewords.length!==g;)b--;b++;const E=g-i.getECCodewordsPerBlock();let k=0;for(let L=0;L<E;L++)for(let U=0;U<h;U++)u[U].codewords[L]=e[k++];for(let L=b;L<h;L++)u[L].codewords[E]=e[k++];const _=u[0].codewords.length;for(let L=E;L<_;L++)for(let U=0;U<h;U++){const V=U<b?L:L+1;u[U].codewords[V]=e[k++]}return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var En;(function(C){C[C.TERMINATOR=0]="TERMINATOR",C[C.NUMERIC=1]="NUMERIC",C[C.ALPHANUMERIC=2]="ALPHANUMERIC",C[C.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",C[C.BYTE=4]="BYTE",C[C.ECI=5]="ECI",C[C.KANJI=6]="KANJI",C[C.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",C[C.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",C[C.HANZI=9]="HANZI"})(En||(En={}));class Ve{constructor(e,n,r,i){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,Ve.FOR_BITS.set(i,this),Ve.FOR_VALUE.set(e,this)}static forBits(e){const n=Ve.FOR_BITS.get(e);if(n===void 0)throw new j;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Ve))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}Ve.FOR_BITS=new Map,Ve.FOR_VALUE=new Map,Ve.TERMINATOR=new Ve(En.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ve.NUMERIC=new Ve(En.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ve.ALPHANUMERIC=new Ve(En.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ve.STRUCTURED_APPEND=new Ve(En.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ve.BYTE=new Ve(En.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ve.ECI=new Ve(En.ECI,"ECI",Int32Array.from([0,0,0]),7),Ve.KANJI=new Ve(En.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ve.FNC1_FIRST_POSITION=new Ve(En.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ve.FNC1_SECOND_POSITION=new Ve(En.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ve.HANZI=new Ve(En.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class It{static decode(e,n,r,i){const a=new Yi(e);let o=new K;const u=new Array;let h=-1,g=-1;try{let b=null,E=!1,k;do{if(a.available()<4)k=Ve.TERMINATOR;else{const _=a.readBits(4);k=Ve.forBits(_)}switch(k){case Ve.TERMINATOR:break;case Ve.FNC1_FIRST_POSITION:case Ve.FNC1_SECOND_POSITION:E=!0;break;case Ve.STRUCTURED_APPEND:if(a.available()<16)throw new G;h=a.readBits(8),g=a.readBits(8);break;case Ve.ECI:const _=It.parseECIValue(a);if(b=de.getCharacterSetECIByValue(_),b===null)throw new G;break;case Ve.HANZI:const L=a.readBits(4),U=a.readBits(k.getCharacterCountBits(n));L===It.GB2312_SUBSET&&It.decodeHanziSegment(a,o,U);break;default:const V=a.readBits(k.getCharacterCountBits(n));switch(k){case Ve.NUMERIC:It.decodeNumericSegment(a,o,V);break;case Ve.ALPHANUMERIC:It.decodeAlphanumericSegment(a,o,V,E);break;case Ve.BYTE:It.decodeByteSegment(a,o,V,b,u,i);break;case Ve.KANJI:It.decodeKanjiSegment(a,o,V);break;default:throw new G}break}}while(k!==Ve.TERMINATOR)}catch{throw new G}return new Me(e,o.toString(),u.length===0?null:u,r===null?null:r.toString(),h,g)}static decodeHanziSegment(e,n,r){if(r*13>e.available())throw new G;const i=new Uint8Array(2*r);let a=0;for(;r>0;){const o=e.readBits(13);let u=o/96<<8&4294967295|o%96;u<959?u+=41377:u+=42657,i[a]=u>>8&255,i[a+1]=u&255,a+=2,r--}try{n.append(Xe.decode(i,ne.GB2312))}catch(o){throw new G(o)}}static decodeKanjiSegment(e,n,r){if(r*13>e.available())throw new G;const i=new Uint8Array(2*r);let a=0;for(;r>0;){const o=e.readBits(13);let u=o/192<<8&4294967295|o%192;u<7936?u+=33088:u+=49472,i[a]=u>>8,i[a+1]=u,a+=2,r--}try{n.append(Xe.decode(i,ne.SHIFT_JIS))}catch(o){throw new G(o)}}static decodeByteSegment(e,n,r,i,a,o){if(8*r>e.available())throw new G;const u=new Uint8Array(r);for(let g=0;g<r;g++)u[g]=e.readBits(8);let h;i===null?h=ne.guessEncoding(u,o):h=i.getName();try{n.append(Xe.decode(u,h))}catch(g){throw new G(g)}a.push(u)}static toAlphaNumericChar(e){if(e>=It.ALPHANUMERIC_CHARS.length)throw new G;return It.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,r,i){const a=n.length();for(;r>1;){if(e.available()<11)throw new G;const o=e.readBits(11);n.append(It.toAlphaNumericChar(Math.floor(o/45))),n.append(It.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new G;n.append(It.toAlphaNumericChar(e.readBits(6)))}if(i)for(let o=a;o<n.length();o++)n.charAt(o)==="%"&&(o<n.length()-1&&n.charAt(o+1)==="%"?n.deleteCharAt(o+1):n.setCharAt(o,""))}static decodeNumericSegment(e,n,r){for(;r>=3;){if(e.available()<10)throw new G;const i=e.readBits(10);if(i>=1e3)throw new G;n.append(It.toAlphaNumericChar(Math.floor(i/100))),n.append(It.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(It.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new G;const i=e.readBits(7);if(i>=100)throw new G;n.append(It.toAlphaNumericChar(Math.floor(i/10))),n.append(It.toAlphaNumericChar(i%10))}else if(r===1){if(e.available()<4)throw new G;const i=e.readBits(4);if(i>=10)throw new G;n.append(It.toAlphaNumericChar(i))}}static parseECIValue(e){const n=e.readBits(8);if((n&128)===0)return n&127;if((n&192)===128){const r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){const r=e.readBits(16);return(n&31)<<16&4294967295|r}throw new G}}It.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",It.GB2312_SUBSET=1;class Ki{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class qi{constructor(){this.rsDecoder=new Rn(at.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(Se.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const r=new Fa(e);let i=null;try{return this.decodeBitMatrixParser(r,n)}catch(a){i=a}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const a=this.decodeBitMatrixParser(r,n);return a.setOther(new Ki(!0)),a}catch(a){throw i!==null?i:a}}decodeBitMatrixParser(e,n){const r=e.readVersion(),i=e.readFormatInformation().getErrorCorrectionLevel(),a=e.readCodewords(),o=ci.getDataBlocks(a,r,i);let u=0;for(const b of o)u+=b.getNumDataCodewords();const h=new Uint8Array(u);let g=0;for(const b of o){const E=b.getCodewords(),k=b.getNumDataCodewords();this.correctErrors(E,k);for(let _=0;_<k;_++)h[g++]=E[_]}return It.decode(h,r,i,n)}correctErrors(e,n){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new re}for(let i=0;i<n;i++)e[i]=r[i]}}class is extends Le{constructor(e,n,r){super(e,n),this.estimatedModuleSize=r}aboutEquals(e,n,r){if(Math.abs(n-this.getY())<=e&&Math.abs(r-this.getX())<=e){const i=Math.abs(e-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1}combineEstimate(e,n,r){const i=(this.getX()+n)/2,a=(this.getY()+e)/2,o=(this.estimatedModuleSize+r)/2;return new is(i,a,o)}}class qn{constructor(e,n,r,i,a,o,u){this.image=e,this.startX=n,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,r=this.width,i=e+r,a=this.startY+n/2,o=new Int32Array(3),u=this.image;for(let h=0;h<n;h++){const g=a+((h&1)===0?Math.floor((h+1)/2):-Math.floor((h+1)/2));o[0]=0,o[1]=0,o[2]=0;let b=e;for(;b<i&&!u.get(b,g);)b++;let E=0;for(;b<i;){if(u.get(b,g))if(E===1)o[1]++;else if(E===2){if(this.foundPatternCross(o)){const k=this.handlePossibleCenter(o,g,b);if(k!==null)return k}o[0]=o[2],o[1]=1,o[2]=0,E=1}else o[++E]++;else E===1&&E++,o[E]++;b++}if(this.foundPatternCross(o)){const k=this.handlePossibleCenter(o,g,i);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new B}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,r=n/2;for(let i=0;i<3;i++)if(Math.abs(n-e[i])>=r)return!1;return!0}crossCheckVertical(e,n,r,i){const a=this.image,o=a.getHeight(),u=this.crossCheckStateCount;u[0]=0,u[1]=0,u[2]=0;let h=e;for(;h>=0&&a.get(n,h)&&u[1]<=r;)u[1]++,h--;if(h<0||u[1]>r)return NaN;for(;h>=0&&!a.get(n,h)&&u[0]<=r;)u[0]++,h--;if(u[0]>r)return NaN;for(h=e+1;h<o&&a.get(n,h)&&u[1]<=r;)u[1]++,h++;if(h===o||u[1]>r)return NaN;for(;h<o&&!a.get(n,h)&&u[2]<=r;)u[2]++,h++;if(u[2]>r)return NaN;const g=u[0]+u[1]+u[2];return 5*Math.abs(g-i)>=2*i?NaN:this.foundPatternCross(u)?qn.centerFromEnd(u,h):NaN}handlePossibleCenter(e,n,r){const i=e[0]+e[1]+e[2],a=qn.centerFromEnd(e,r),o=this.crossCheckVertical(n,a,2*e[1],i);if(!isNaN(o)){const u=(e[0]+e[1]+e[2])/3;for(const g of this.possibleCenters)if(g.aboutEquals(u,o,a))return g.combineEstimate(o,a,u);const h=new is(a,o,u);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null}}class or extends Le{constructor(e,n,r,i){super(e,n),this.estimatedModuleSize=r,this.count=i,i===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,r){if(Math.abs(n-this.getY())<=e&&Math.abs(r-this.getX())<=e){const i=Math.abs(e-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1}combineEstimate(e,n,r){const i=this.count+1,a=(this.count*this.getX()+n)/i,o=(this.count*this.getY()+e)/i,u=(this.count*this.estimatedModuleSize+r)/i;return new or(a,o,u,i)}}class Tr{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Mt{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(he.TRY_HARDER)!==void 0,r=e!=null&&e.get(he.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth();let u=Math.floor(3*a/(4*Mt.MAX_MODULES));(u<Mt.MIN_SKIP||n)&&(u=Mt.MIN_SKIP);let h=!1;const g=new Int32Array(5);for(let E=u-1;E<a&&!h;E+=u){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;let k=0;for(let _=0;_<o;_++)if(i.get(_,E))(k&1)===1&&k++,g[k]++;else if((k&1)===0)if(k===4)if(Mt.foundPatternCross(g)){if(this.handlePossibleCenter(g,E,_,r)===!0)if(u=2,this.hasSkipped===!0)h=this.haveMultiplyConfirmedCenters();else{const U=this.findRowSkip();U>g[2]&&(E+=U-g[2]-u,_=o-1)}else{g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,k=3;continue}k=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,k=3;else g[++k]++;else g[k]++;Mt.foundPatternCross(g)&&this.handlePossibleCenter(g,E,o,r)===!0&&(u=g[0],this.hasSkipped&&(h=this.haveMultiplyConfirmedCenters()))}const b=this.selectBestPatterns();return Le.orderBestPatterns(b),new Tr(b)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let a=0;a<5;a++){const o=e[a];if(o===0)return!1;n+=o}if(n<7)return!1;const r=n/7,i=r/2;return Math.abs(r-e[0])<i&&Math.abs(r-e[1])<i&&Math.abs(3*r-e[2])<3*i&&Math.abs(r-e[3])<i&&Math.abs(r-e[4])<i}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,r,i){const a=this.getCrossCheckStateCount();let o=0;const u=this.image;for(;e>=o&&n>=o&&u.get(n-o,e-o);)a[2]++,o++;if(e<o||n<o)return!1;for(;e>=o&&n>=o&&!u.get(n-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||n<o||a[1]>r)return!1;for(;e>=o&&n>=o&&u.get(n-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;const h=u.getHeight(),g=u.getWidth();for(o=1;e+o<h&&n+o<g&&u.get(n+o,e+o);)a[2]++,o++;if(e+o>=h||n+o>=g)return!1;for(;e+o<h&&n+o<g&&!u.get(n+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=h||n+o>=g||a[3]>=r)return!1;for(;e+o<h&&n+o<g&&u.get(n+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;const b=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(b-i)<2*i&&Mt.foundPatternCross(a)}crossCheckVertical(e,n,r,i){const a=this.image,o=a.getHeight(),u=this.getCrossCheckStateCount();let h=e;for(;h>=0&&a.get(n,h);)u[2]++,h--;if(h<0)return NaN;for(;h>=0&&!a.get(n,h)&&u[1]<=r;)u[1]++,h--;if(h<0||u[1]>r)return NaN;for(;h>=0&&a.get(n,h)&&u[0]<=r;)u[0]++,h--;if(u[0]>r)return NaN;for(h=e+1;h<o&&a.get(n,h);)u[2]++,h++;if(h===o)return NaN;for(;h<o&&!a.get(n,h)&&u[3]<r;)u[3]++,h++;if(h===o||u[3]>=r)return NaN;for(;h<o&&a.get(n,h)&&u[4]<r;)u[4]++,h++;if(u[4]>=r)return NaN;const g=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(g-i)>=2*i?NaN:Mt.foundPatternCross(u)?Mt.centerFromEnd(u,h):NaN}crossCheckHorizontal(e,n,r,i){const a=this.image,o=a.getWidth(),u=this.getCrossCheckStateCount();let h=e;for(;h>=0&&a.get(h,n);)u[2]++,h--;if(h<0)return NaN;for(;h>=0&&!a.get(h,n)&&u[1]<=r;)u[1]++,h--;if(h<0||u[1]>r)return NaN;for(;h>=0&&a.get(h,n)&&u[0]<=r;)u[0]++,h--;if(u[0]>r)return NaN;for(h=e+1;h<o&&a.get(h,n);)u[2]++,h++;if(h===o)return NaN;for(;h<o&&!a.get(h,n)&&u[3]<r;)u[3]++,h++;if(h===o||u[3]>=r)return NaN;for(;h<o&&a.get(h,n)&&u[4]<r;)u[4]++,h++;if(u[4]>=r)return NaN;const g=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(g-i)>=i?NaN:Mt.foundPatternCross(u)?Mt.centerFromEnd(u,h):NaN}handlePossibleCenter(e,n,r,i){const a=e[0]+e[1]+e[2]+e[3]+e[4];let o=Mt.centerFromEnd(e,r),u=this.crossCheckVertical(n,Math.floor(o),e[2],a);if(!isNaN(u)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(u),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(u),Math.floor(o),e[2],a)))){const h=a/7;let g=!1;const b=this.possibleCenters;for(let E=0,k=b.length;E<k;E++){const _=b[E];if(_.aboutEquals(h,u,o)){b[E]=_.combineEstimate(u,o,h),g=!0;break}}if(!g){const E=new or(o,u,h);b.push(E),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(E)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const r of this.possibleCenters)if(r.getCount()>=Mt.CENTER_QUORUM)if(n==null)n=r;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-r.getX())-Math.abs(n.getY()-r.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const r=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=Mt.CENTER_QUORUM&&(e++,n+=o.getEstimatedModuleSize());if(e<3)return!1;const i=n/r;let a=0;for(const o of this.possibleCenters)a+=Math.abs(o.getEstimatedModuleSize()-i);return a<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new B;const n=this.possibleCenters;let r;if(e>3){let i=0,a=0;for(const h of this.possibleCenters){const g=h.getEstimatedModuleSize();i+=g,a+=g*g}r=i/e;let o=Math.sqrt(a/e-r*r);n.sort((h,g)=>{const b=Math.abs(g.getEstimatedModuleSize()-r),E=Math.abs(h.getEstimatedModuleSize()-r);return b<E?-1:b>E?1:0});const u=Math.max(.2*r,o);for(let h=0;h<n.length&&n.length>3;h++){const g=n[h];Math.abs(g.getEstimatedModuleSize()-r)>u&&(n.splice(h,1),h--)}}if(n.length>3){let i=0;for(const a of n)i+=a.getEstimatedModuleSize();r=i/n.length,n.sort((a,o)=>{if(o.getCount()===a.getCount()){const u=Math.abs(o.getEstimatedModuleSize()-r),h=Math.abs(a.getEstimatedModuleSize()-r);return u<h?1:u>h?-1:0}else return o.getCount()-a.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}Mt.CENTER_QUORUM=2,Mt.MIN_SKIP=3,Mt.MAX_MODULES=57;class pr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(he.NEED_RESULT_POINT_CALLBACK);const r=new Mt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(r)}processFinderPatternInfo(e){const n=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(n,r,i);if(a<1)throw new B("No pattern found in proccess finder.");const o=pr.computeDimension(n,r,i,a),u=Ge.getProvisionalVersionForDimension(o),h=u.getDimensionForVersion()-7;let g=null;if(u.getAlignmentPatternCenters().length>0){const _=r.getX()-n.getX()+i.getX(),L=r.getY()-n.getY()+i.getY(),U=1-3/h,V=Math.floor(n.getX()+U*(_-n.getX())),J=Math.floor(n.getY()+U*(L-n.getY()));for(let Ce=4;Ce<=16;Ce<<=1)try{g=this.findAlignmentInRegion(a,V,J,Ce);break}catch(Ae){if(!(Ae instanceof B))throw Ae}}const b=pr.createTransform(n,r,i,g,o),E=pr.sampleGrid(this.image,b,o);let k;return g===null?k=[i,n,r]:k=[i,n,r,g],new es(E,k)}static createTransform(e,n,r,i,a){const o=a-3.5;let u,h,g,b;return i!==null?(u=i.getX(),h=i.getY(),g=o-3,b=g):(u=n.getX()-e.getX()+r.getX(),h=n.getY()-e.getY()+r.getY(),g=o,b=o),On.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,g,b,3.5,o,e.getX(),e.getY(),n.getX(),n.getY(),u,h,r.getX(),r.getY())}static sampleGrid(e,n,r){return Vn.getInstance().sampleGridWithTransform(e,r,r,n)}static computeDimension(e,n,r,i){const a=ut.round(Le.distance(e,n)/i),o=ut.round(Le.distance(e,r)/i);let u=Math.floor((a+o)/2)+7;switch(u&3){case 0:u++;break;case 2:u--;break;case 3:throw new B("Dimensions could be not found.")}return u}calculateModuleSize(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2}calculateModuleSizeOneWay(e,n){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,r,i){let a=this.sizeOfBlackWhiteBlackRun(e,n,r,i),o=1,u=e-(r-e);u<0?(o=e/(e-u),u=0):u>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(u-e),u=this.image.getWidth()-1);let h=Math.floor(n-(i-n)*o);return o=1,h<0?(o=n/(n-h),h=0):h>=this.image.getHeight()&&(o=(this.image.getHeight()-1-n)/(h-n),h=this.image.getHeight()-1),u=Math.floor(e+(u-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,n,u,h),a-1}sizeOfBlackWhiteBlackRun(e,n,r,i){const a=Math.abs(i-n)>Math.abs(r-e);if(a){let _=e;e=n,n=_,_=r,r=i,i=_}const o=Math.abs(r-e),u=Math.abs(i-n);let h=-o/2;const g=e<r?1:-1,b=n<i?1:-1;let E=0;const k=r+g;for(let _=e,L=n;_!==k;_+=g){const U=a?L:_,V=a?_:L;if(E===1===this.image.get(U,V)){if(E===2)return ut.distance(_,L,e,n);E++}if(h+=u,h>0){if(L===i)break;L+=b,h-=o}}return E===2?ut.distance(r+g,i,e,n):NaN}findAlignmentInRegion(e,n,r,i){const a=Math.floor(i*e),o=Math.max(0,n-a),u=Math.min(this.image.getWidth()-1,n+a);if(u-o<e*3)throw new B("Alignment top exceeds estimated module size.");const h=Math.max(0,r-a),g=Math.min(this.image.getHeight()-1,r+a);if(g-h<e*3)throw new B("Alignment bottom exceeds estimated module size.");return new qn(this.image,o,h,u-o,g-h,e,this.resultPointCallback).find()}}class mn{constructor(){this.decoder=new qi}getDecoder(){return this.decoder}decode(e,n){let r,i;if(n!=null&&n.get(he.PURE_BARCODE)!==void 0){const h=mn.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(h,n),i=mn.NO_POINTS}else{const h=new pr(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(h.getBits(),n),i=h.getPoints()}r.getOther()instanceof Ki&&r.getOther().applyMirroredCorrection(i);const a=new _e(r.getText(),r.getRawBytes(),void 0,i,fe.QR_CODE,void 0),o=r.getByteSegments();o!==null&&a.putMetadata(je.BYTE_SEGMENTS,o);const u=r.getECLevel();return u!==null&&a.putMetadata(je.ERROR_CORRECTION_LEVEL,u),r.hasStructuredAppend()&&(a.putMetadata(je.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(je.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new B;const i=this.moduleSize(n,e);let a=n[1],o=r[1],u=n[0],h=r[0];if(u>=h||a>=o)throw new B;if(o-a!==h-u&&(h=u+(o-a),h>=e.getWidth()))throw new B;const g=Math.round((h-u+1)/i),b=Math.round((o-a+1)/i);if(g<=0||b<=0)throw new B;if(b!==g)throw new B;const E=Math.floor(i/2);a+=E,u+=E;const k=u+Math.floor((g-1)*i)-h;if(k>0){if(k>E)throw new B;u-=k}const _=a+Math.floor((b-1)*i)-o;if(_>0){if(_>E)throw new B;a-=_}const L=new Se(g,b);for(let U=0;U<b;U++){const V=a+Math.floor(U*i);for(let J=0;J<g;J++)e.get(u+Math.floor(J*i),V)&&L.set(J,U)}return L}static moduleSize(e,n){const r=n.getHeight(),i=n.getWidth();let a=e[0],o=e[1],u=!0,h=0;for(;a<i&&o<r;){if(u!==n.get(a,o)){if(++h===5)break;u=!u}a++,o++}if(a===i||o===r)throw new B;return(a-e[0])/7}}mn.NO_POINTS=new Array;class qe{PDF417Common(){}static getBitCountSum(e){return ut.sum(e)}static toIntArray(e){if(e==null||!e.length)return qe.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let r=0;for(const i of e)n[r++]=i;return n}static getCodeword(e){const n=ce.binarySearch(qe.SYMBOL_TABLE,e&262143);return n<0?-1:(qe.CODEWORD_TABLE[n]-1)%qe.NUMBER_OF_CODEWORDS}}qe.NUMBER_OF_CODEWORDS=929,qe.MAX_CODEWORDS_IN_BARCODE=qe.NUMBER_OF_CODEWORDS-1,qe.MIN_ROWS_IN_BARCODE=3,qe.MAX_ROWS_IN_BARCODE=90,qe.MODULES_IN_CODEWORD=17,qe.MODULES_IN_STOP_PATTERN=18,qe.BARS_IN_MODULE=8,qe.EMPTY_INT_ARRAY=new Int32Array([]),qe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),qe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ua{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class $e{static detectMultiple(e,n,r){let i=e.getBlackMatrix(),a=$e.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=$e.detect(r,i)),new Ua(i,a)}static detect(e,n){const r=new Array;let i=0,a=0,o=!1;for(;i<n.getHeight();){const u=$e.findVertices(n,i,a);if(u[0]==null&&u[3]==null){if(!o)break;o=!1,a=0;for(const h of r)h[1]!=null&&(i=Math.trunc(Math.max(i,h[1].getY()))),h[3]!=null&&(i=Math.max(i,Math.trunc(h[3].getY())));i+=$e.ROW_STEP;continue}if(o=!0,r.push(u),!e)break;u[2]!=null?(a=Math.trunc(u[2].getX()),i=Math.trunc(u[2].getY())):(a=Math.trunc(u[4].getX()),i=Math.trunc(u[4].getY()))}return r}static findVertices(e,n,r){const i=e.getHeight(),a=e.getWidth(),o=new Array(8);return $e.copyToResult(o,$e.findRowsWithPattern(e,i,a,n,r,$e.START_PATTERN),$e.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),n=Math.trunc(o[4].getY())),$e.copyToResult(o,$e.findRowsWithPattern(e,i,a,n,r,$e.STOP_PATTERN),$e.INDEXES_STOP_PATTERN),o}static copyToResult(e,n,r){for(let i=0;i<r.length;i++)e[r[i]]=n[i]}static findRowsWithPattern(e,n,r,i,a,o){const u=new Array(4);let h=!1;const g=new Int32Array(o.length);for(;i<n;i+=$e.ROW_STEP){let E=$e.findGuardPattern(e,a,i,r,!1,o,g);if(E!=null){for(;i>0;){const k=$e.findGuardPattern(e,a,--i,r,!1,o,g);if(k!=null)E=k;else{i++;break}}u[0]=new Le(E[0],i),u[1]=new Le(E[1],i),h=!0;break}}let b=i+1;if(h){let E=0,k=Int32Array.from([Math.trunc(u[0].getX()),Math.trunc(u[1].getX())]);for(;b<n;b++){const _=$e.findGuardPattern(e,k[0],b,r,!1,o,g);if(_!=null&&Math.abs(k[0]-_[0])<$e.MAX_PATTERN_DRIFT&&Math.abs(k[1]-_[1])<$e.MAX_PATTERN_DRIFT)k=_,E=0;else{if(E>$e.SKIPPED_ROW_COUNT_MAX)break;E++}}b-=E+1,u[2]=new Le(k[0],b),u[3]=new Le(k[1],b)}return b-i<$e.BARCODE_MIN_HEIGHT&&ce.fill(u,null),u}static findGuardPattern(e,n,r,i,a,o,u){ce.fillWithin(u,0,u.length,0);let h=n,g=0;for(;e.get(h,r)&&h>0&&g++<$e.MAX_PIXEL_DRIFT;)h--;let b=h,E=0,k=o.length;for(let _=a;b<i;b++)if(e.get(b,r)!==_)u[E]++;else{if(E===k-1){if($e.patternMatchVariance(u,o,$e.MAX_INDIVIDUAL_VARIANCE)<$e.MAX_AVG_VARIANCE)return new Int32Array([h,b]);h+=u[0]+u[1],ie.arraycopy(u,2,u,0,E-1),u[E-1]=0,u[E]=0,E--}else E++;u[E]=1,_=!_}return E===k-1&&$e.patternMatchVariance(u,o,$e.MAX_INDIVIDUAL_VARIANCE)<$e.MAX_AVG_VARIANCE?new Int32Array([h,b-1]):null}static patternMatchVariance(e,n,r){let i=e.length,a=0,o=0;for(let g=0;g<i;g++)a+=e[g],o+=n[g];if(a<o)return 1/0;let u=a/o;r*=u;let h=0;for(let g=0;g<i;g++){let b=e[g],E=n[g]*u,k=b>E?b-E:E-b;if(k>r)return 1/0;h+=k}return h/a}}$e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),$e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),$e.MAX_AVG_VARIANCE=.42,$e.MAX_INDIVIDUAL_VARIANCE=.8,$e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),$e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),$e.MAX_PIXEL_DRIFT=3,$e.MAX_PATTERN_DRIFT=5,$e.SKIPPED_ROW_COUNT_MAX=25,$e.ROW_STEP=5,$e.BARCODE_MIN_HEIGHT=10;class rn{constructor(e,n){if(n.length===0)throw new j;this.field=e;let r=n.length;if(r>1&&n[0]===0){let i=1;for(;i<r&&n[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),ie.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let i=0;for(let a of this.coefficients)i=this.field.add(i,a);return i}let n=this.coefficients[0],r=this.coefficients.length;for(let i=1;i<r;i++)n=this.field.add(this.field.multiply(e,n),this.coefficients[i]);return n}add(e){if(!this.field.equals(e.field))throw new j("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,r=e.coefficients;if(n.length>r.length){let o=n;n=r,r=o}let i=new Int32Array(r.length),a=r.length-n.length;ie.arraycopy(r,0,i,0,a);for(let o=a;o<r.length;o++)i[o]=this.field.add(n[o-a],r[o]);return new rn(this.field,i)}subtract(e){if(!this.field.equals(e.field))throw new j("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof rn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new j("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new rn(this.field,new Int32Array([0]));let n=this.coefficients,r=n.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1);for(let u=0;u<r;u++){let h=n[u];for(let g=0;g<a;g++)o[u+g]=this.field.add(o[u+g],this.field.multiply(h,i[g]))}return new rn(this.field,o)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new rn(this.field,n)}multiplyScalar(e){if(e===0)return new rn(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,r=new Int32Array(n);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new rn(this.field,r)}multiplyByMonomial(e,n){if(e<0)throw new j;if(n===0)return new rn(this.field,new Int32Array([0]));let r=this.coefficients.length,i=new Int32Array(r+e);for(let a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],n);return new rn(this.field,i)}toString(){let e=new K;for(let n=this.getDegree();n>=0;n--){let r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class Wa{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new j;return this.logTable[e]}inverse(e){if(e===0)throw new sr;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class as extends Wa{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let r=1;for(let i=0;i<e;i++)this.expTable[i]=r,r=r*n%e;for(let i=0;i<e-1;i++)this.logTable[this.expTable[i]]=i;this.zero=new rn(this,new Int32Array([0])),this.one=new rn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new j;if(n===0)return this.zero;let r=new Int32Array(e+1);return r[0]=n,new rn(this,r)}}as.PDF417_GF=new as(qe.NUMBER_OF_CODEWORDS,3);class Qi{constructor(){this.field=as.PDF417_GF}decode(e,n,r){let i=new rn(this.field,e),a=new Int32Array(n),o=!1;for(let L=n;L>0;L--){let U=i.evaluateAt(this.field.exp(L));a[n-L]=U,U!==0&&(o=!0)}if(!o)return 0;let u=this.field.getOne();if(r!=null)for(const L of r){let U=this.field.exp(e.length-1-L),V=new rn(this.field,new Int32Array([this.field.subtract(0,U),1]));u=u.multiply(V)}let h=new rn(this.field,a),g=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),h,n),b=g[0],E=g[1],k=this.findErrorLocations(b),_=this.findErrorMagnitudes(E,b,k);for(let L=0;L<k.length;L++){let U=e.length-1-this.field.log(k[L]);if(U<0)throw re.getChecksumInstance();e[U]=this.field.subtract(e[U],_[L])}return k.length}runEuclideanAlgorithm(e,n,r){if(e.getDegree()<n.getDegree()){let k=e;e=n,n=k}let i=e,a=n,o=this.field.getZero(),u=this.field.getOne();for(;a.getDegree()>=Math.round(r/2);){let k=i,_=o;if(i=a,o=u,i.isZero())throw re.getChecksumInstance();a=k;let L=this.field.getZero(),U=i.getCoefficient(i.getDegree()),V=this.field.inverse(U);for(;a.getDegree()>=i.getDegree()&&!a.isZero();){let J=a.getDegree()-i.getDegree(),Ce=this.field.multiply(a.getCoefficient(a.getDegree()),V);L=L.add(this.field.buildMonomial(J,Ce)),a=a.subtract(i.multiplyByMonomial(J,Ce))}u=L.multiply(o).subtract(_).negative()}let h=u.getCoefficient(0);if(h===0)throw re.getChecksumInstance();let g=this.field.inverse(h),b=u.multiply(g),E=a.multiply(g);return[b,E]}findErrorLocations(e){let n=e.getDegree(),r=new Int32Array(n),i=0;for(let a=1;a<this.field.getSize()&&i<n;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==n)throw re.getChecksumInstance();return r}findErrorMagnitudes(e,n,r){let i=n.getDegree(),a=new Int32Array(i);for(let g=1;g<=i;g++)a[i-g]=this.field.multiply(g,n.getCoefficient(g));let o=new rn(this.field,a),u=r.length,h=new Int32Array(u);for(let g=0;g<u;g++){let b=this.field.inverse(r[g]),E=this.field.subtract(0,e.evaluateAt(b)),k=this.field.inverse(o.evaluateAt(b));h[g]=this.field.multiply(E,k)}return h}}class Fr{constructor(e,n,r,i,a){e instanceof Fr?this.constructor_2(e):this.constructor_1(e,n,r,i,a)}constructor_1(e,n,r,i,a){const o=n==null||r==null,u=i==null||a==null;if(o&&u)throw new B;o?(n=new Le(0,i.getY()),r=new Le(0,a.getY())):u&&(i=new Le(e.getWidth()-1,n.getY()),a=new Le(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(n.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new Fr(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,r){let i=this.topLeft,a=this.bottomLeft,o=this.topRight,u=this.bottomRight;if(e>0){let h=r?this.topLeft:this.topRight,g=Math.trunc(h.getY()-e);g<0&&(g=0);let b=new Le(h.getX(),g);r?i=b:o=b}if(n>0){let h=r?this.bottomLeft:this.bottomRight,g=Math.trunc(h.getY()+n);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);let b=new Le(h.getX(),g);r?a=b:u=b}return new Fr(this.image,i,a,o,u)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ds{constructor(e,n,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class yr{constructor(){this.buffer=""}static form(e,n){let r=-1;function i(o,u,h,g,b,E){if(o==="%%")return"%";if(n[++r]===void 0)return;o=g?parseInt(g.substr(1)):void 0;let k=b?parseInt(b.substr(1)):void 0,_;switch(E){case"s":_=n[r];break;case"c":_=n[r][0];break;case"f":_=parseFloat(n[r]).toFixed(o);break;case"p":_=parseFloat(n[r]).toPrecision(o);break;case"e":_=parseFloat(n[r]).toExponential(o);break;case"x":_=parseInt(n[r]).toString(k||16);break;case"d":_=parseFloat(parseInt(n[r],k||10).toPrecision(o)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(k);let L=parseInt(h),U=h&&h[0]+""=="0"?"0":" ";for(;_.length<L;)_=u!==void 0?_+U:U+_;return _}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)}format(e,...n){this.buffer+=yr.form(e,n)}toString(){return this.buffer}}class cr{constructor(e){this.boundingBox=new Fr(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let r=1;r<cr.MAX_NEARBY_DISTANCE;r++){let i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(n=this.codewords[i],n!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(n=this.codewords[i],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new yr;let n=0;for(const r of this.codewords){if(r==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,r.getRowNumber(),r.getValue())}return e.toString()}}cr.MAX_NEARBY_DISTANCE=5;class Rr{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[r,i]of this.values.entries()){const a={getKey:()=>r,getValue:()=>i};a.getValue()>e?(e=a.getValue(),n=[],n.push(a.getKey())):a.getValue()===e&&n.push(a.getKey())}return qe.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class za extends cr{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=-1,g=1,b=0;for(let E=o;E<u;E++){if(n[E]==null)continue;let k=n[E],_=k.getRowNumber()-h;if(_===0)b++;else if(_===1)g=Math.max(g,b),b=1,h=k.getRowNumber();else if(_<0||k.getRowNumber()>=e.getRowCount()||_>E)n[E]=null;else{let L;g>2?L=(g-2)*_:L=_;let U=L>=E;for(let V=1;V<=L&&!U;V++)U=n[E-V]!=null;U?n[E]=null:(h=k.getRowNumber(),b=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let r of this.getCodewords())if(r!=null){let i=r.getRowNumber();if(i>=n.length)continue;n[i]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.getCodewords(),h=-1;for(let g=a;g<o;g++){if(u[g]==null)continue;let b=u[g];b.setRowNumberAsRowIndicatorColumn();let E=b.getRowNumber()-h;E===0||(E===1?h=b.getRowNumber():b.getRowNumber()>=e.getRowCount()?u[g]=null:h=b.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new Rr,r=new Rr,i=new Rr,a=new Rr;for(let u of e){if(u==null)continue;u.setRowNumberAsRowIndicatorColumn();let h=u.getValue()%30,g=u.getRowNumber();switch(this._isLeft||(g+=2),g%3){case 0:r.setValue(h*3+1);break;case 1:a.setValue(h/3),i.setValue(h%3);break;case 2:n.setValue(h+1);break}}if(n.getValue().length===0||r.getValue().length===0||i.getValue().length===0||a.getValue().length===0||n.getValue()[0]<1||r.getValue()[0]+i.getValue()[0]<qe.MIN_ROWS_IN_BARCODE||r.getValue()[0]+i.getValue()[0]>qe.MAX_ROWS_IN_BARCODE)return null;let o=new Ds(n.getValue()[0],r.getValue()[0],i.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,n){for(let r=0;r<e.length;r++){let i=e[r];if(e[r]==null)continue;let a=i.getValue()%30,o=i.getRowNumber();if(o>n.getRowCount()){e[r]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:a*3+1!==n.getRowCountUpperPart()&&(e[r]=null);break;case 1:(Math.trunc(a/3)!==n.getErrorCorrectionLevel()||a%3!==n.getRowCountLowerPart())&&(e[r]=null);break;case 2:a+1!==n.getColumnCount()&&(e[r]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Ps{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=qe.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let r=this.detectionResultColumns[n].getCodewords();for(let i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(n,i,r))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(let i=1;i<=this.barcodeColumnCount;i++){let a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<n.length;r++){if(n[r]==null)continue;let i=n[r].getRowNumber(),a=0;for(let o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){let u=this.detectionResultColumns[o].getCodewords()[r];u!=null&&(a=Ps.adjustRowNumberIfValid(i,a,u),u.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let r=0;r<n.length;r++){if(n[r]==null)continue;let i=n[r].getRowNumber(),a=0;for(let o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){let u=this.detectionResultColumns[o].getCodewords()[r];u!=null&&(a=Ps.adjustRowNumberIfValid(i,a,u),u.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,r){if(!this.detectionResultColumns[e-1])return;let i=r[n],a=this.detectionResultColumns[e-1].getCodewords(),o=a;this.detectionResultColumns[e+1]!=null&&(o=this.detectionResultColumns[e+1].getCodewords());let u=new Array(14);u[2]=a[n],u[3]=o[n],n>0&&(u[0]=r[n-1],u[4]=a[n-1],u[5]=o[n-1]),n>1&&(u[8]=r[n-2],u[10]=a[n-2],u[11]=o[n-2]),n<r.length-1&&(u[1]=r[n+1],u[6]=a[n+1],u[7]=o[n+1]),n<r.length-2&&(u[9]=r[n+2],u[12]=a[n+2],u[13]=o[n+2]);for(let h of u)if(Ps.adjustRowNumber(i,h))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new yr;for(let r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(let i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){n.format("    |   ");continue}let a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){n.format("    |   ");continue}n.format(" %3d|%3d",a.getRowNumber(),a.getValue())}n.format("%n")}return n.toString()}}class Ur{constructor(e,n,r,i){this.rowNumber=Ur.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Ur.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Ur.BARCODE_ROW_UNKNOWN=-1;class sn{static initialize(){for(let e=0;e<qe.SYMBOL_TABLE.length;e++){let n=qe.SYMBOL_TABLE[e],r=n&1;for(let i=0;i<qe.BARS_IN_MODULE;i++){let a=0;for(;(n&1)===r;)a+=1,n>>=1;r=n&1,sn.RATIOS_TABLE[e]||(sn.RATIOS_TABLE[e]=new Array(qe.BARS_IN_MODULE)),sn.RATIOS_TABLE[e][qe.BARS_IN_MODULE-i-1]=Math.fround(a/qe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=sn.getDecodedCodewordValue(sn.sampleBitCounts(e));return n!==-1?n:sn.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=ut.sum(e),r=new Int32Array(qe.BARS_IN_MODULE),i=0,a=0;for(let o=0;o<qe.MODULES_IN_CODEWORD;o++){let u=n/(2*qe.MODULES_IN_CODEWORD)+o*n/qe.MODULES_IN_CODEWORD;a+e[i]<=u&&(a+=e[i],i++),r[i]++}return r}static getDecodedCodewordValue(e){let n=sn.getBitValue(e);return qe.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let r=0;r<e.length;r++)for(let i=0;i<e[r];i++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=ut.sum(e),r=new Array(qe.BARS_IN_MODULE);if(n>1)for(let o=0;o<r.length;o++)r[o]=Math.fround(e[o]/n);let i=Sr.MAX_VALUE,a=-1;this.bSymbolTableReady||sn.initialize();for(let o=0;o<sn.RATIOS_TABLE.length;o++){let u=0,h=sn.RATIOS_TABLE[o];for(let g=0;g<qe.BARS_IN_MODULE;g++){let b=Math.fround(h[g]-r[g]);if(u+=Math.fround(b*b),u>=i)break}u<i&&(i=u,a=qe.SYMBOL_TABLE[o])}return a}}sn.bSymbolTableReady=!1,sn.RATIOS_TABLE=new Array(qe.SYMBOL_TABLE.length).map(C=>new Array(qe.BARS_IN_MODULE));class ui{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Ji{static parseLong(e,n=void 0){return parseInt(e,n)}}class wr extends A{}wr.kind="NullPointerException";class $i{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,r){if(e==null)throw new wr;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new ae;if(r===0)return;for(let i=0;i<r;i++)this.write(e[n+i])}flush(){}close(){}}class di extends A{}class Ha extends $i{constructor(e=32){if(super(),this.count=0,e<0)throw new j("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let r=this.buf.length<<1;if(r-e<0&&(r=e),r<0){if(e<0)throw new di;r=oe.MAX_VALUE}this.buf=ce.copyOfUint8Array(this.buf,r)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,r){if(n<0||n>e.length||r<0||n+r-e.length>0)throw new ae;this.ensureCapacity(this.count+r),ie.arraycopy(e,n,this.buf,this.count,r),this.count+=r}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ce.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var xt;(function(C){C[C.ALPHA=0]="ALPHA",C[C.LOWER=1]="LOWER",C[C.MIXED=2]="MIXED",C[C.PUNCT=3]="PUNCT",C[C.ALPHA_SHIFT=4]="ALPHA_SHIFT",C[C.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(xt||(xt={}));function Bs(){if(typeof window<"u")return window.BigInt||null;if(typeof Ul<"u")return Ul.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Ls;function zt(C){if(typeof Ls>"u"&&(Ls=Bs()),Ls===null)throw new Error("BigInt is not supported!");return Ls(C)}function ls(){let C=[];C[0]=zt(1);let e=zt(900);C[1]=e;for(let n=2;n<16;n++)C[n]=C[n-1]*e;return C}class ${static decode(e,n){let r=new K(""),i=de.ISO8859_1;r.enableDecoding(i);let a=1,o=e[a++],u=new ui;for(;a<e[0];){switch(o){case $.TEXT_COMPACTION_MODE_LATCH:a=$.textCompaction(e,a,r);break;case $.BYTE_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH_6:a=$.byteCompaction(o,e,i,a,r);break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case $.NUMERIC_COMPACTION_MODE_LATCH:a=$.numericCompaction(e,a,r);break;case $.ECI_CHARSET:de.getCharacterSetECIByValue(e[a++]);break;case $.ECI_GENERAL_PURPOSE:a+=2;break;case $.ECI_USER_DEFINED:a++;break;case $.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=$.decodeMacroBlock(e,a,u);break;case $.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case $.MACRO_PDF417_TERMINATOR:throw new G;default:a--,a=$.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw G.getFormatInstance()}if(r.length()===0)throw G.getFormatInstance();let h=new Me(null,r.toString(),null,n);return h.setOther(u),h}static decodeMacroBlock(e,n,r){if(n+$.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw G.getFormatInstance();let i=new Int32Array($.NUMBER_OF_SEQUENCE_CODEWORDS);for(let u=0;u<$.NUMBER_OF_SEQUENCE_CODEWORDS;u++,n++)i[u]=e[n];r.setSegmentIndex(oe.parseInt($.decodeBase900toBase10(i,$.NUMBER_OF_SEQUENCE_CODEWORDS)));let a=new K;n=$.textCompaction(e,n,a),r.setFileId(a.toString());let o=-1;for(e[n]===$.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=n+1);n<e[0];)switch(e[n]){case $.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case $.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let u=new K;n=$.textCompaction(e,n+1,u),r.setFileName(u.toString());break;case $.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let h=new K;n=$.textCompaction(e,n+1,h),r.setSender(h.toString());break;case $.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let g=new K;n=$.textCompaction(e,n+1,g),r.setAddressee(g.toString());break;case $.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let b=new K;n=$.numericCompaction(e,n+1,b),r.setSegmentCount(oe.parseInt(b.toString()));break;case $.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let E=new K;n=$.numericCompaction(e,n+1,E),r.setTimestamp(Ji.parseLong(E.toString()));break;case $.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new K;n=$.numericCompaction(e,n+1,k),r.setChecksum(oe.parseInt(k.toString()));break;case $.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let _=new K;n=$.numericCompaction(e,n+1,_),r.setFileSize(Ji.parseLong(_.toString()));break;default:throw G.getFormatInstance()}break;case $.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw G.getFormatInstance()}if(o!==-1){let u=n-o;r.isLastSegment()&&u--,r.setOptionalData(ce.copyOfRange(e,o,o+u))}return n}static textCompaction(e,n,r){let i=new Int32Array((e[0]-n)*2),a=new Int32Array((e[0]-n)*2),o=0,u=!1;for(;n<e[0]&&!u;){let h=e[n++];if(h<$.TEXT_COMPACTION_MODE_LATCH)i[o]=h/30,i[o+1]=h%30,o+=2;else switch(h){case $.TEXT_COMPACTION_MODE_LATCH:i[o++]=$.TEXT_COMPACTION_MODE_LATCH;break;case $.BYTE_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH_6:case $.NUMERIC_COMPACTION_MODE_LATCH:case $.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case $.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case $.MACRO_PDF417_TERMINATOR:n--,u=!0;break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=$.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,h=e[n++],a[o]=h,o++;break}}return $.decodeTextCompaction(i,a,o,r),n}static decodeTextCompaction(e,n,r,i){let a=xt.ALPHA,o=xt.ALPHA,u=0;for(;u<r;){let h=e[u],g="";switch(a){case xt.ALPHA:if(h<26)g=String.fromCharCode(65+h);else switch(h){case 26:g=" ";break;case $.LL:a=xt.LOWER;break;case $.ML:a=xt.MIXED;break;case $.PS:o=a,a=xt.PUNCT_SHIFT;break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case $.TEXT_COMPACTION_MODE_LATCH:a=xt.ALPHA;break}break;case xt.LOWER:if(h<26)g=String.fromCharCode(97+h);else switch(h){case 26:g=" ";break;case $.AS:o=a,a=xt.ALPHA_SHIFT;break;case $.ML:a=xt.MIXED;break;case $.PS:o=a,a=xt.PUNCT_SHIFT;break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case $.TEXT_COMPACTION_MODE_LATCH:a=xt.ALPHA;break}break;case xt.MIXED:if(h<$.PL)g=$.MIXED_CHARS[h];else switch(h){case $.PL:a=xt.PUNCT;break;case 26:g=" ";break;case $.LL:a=xt.LOWER;break;case $.AL:a=xt.ALPHA;break;case $.PS:o=a,a=xt.PUNCT_SHIFT;break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case $.TEXT_COMPACTION_MODE_LATCH:a=xt.ALPHA;break}break;case xt.PUNCT:if(h<$.PAL)g=$.PUNCT_CHARS[h];else switch(h){case $.PAL:a=xt.ALPHA;break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case $.TEXT_COMPACTION_MODE_LATCH:a=xt.ALPHA;break}break;case xt.ALPHA_SHIFT:if(a=o,h<26)g=String.fromCharCode(65+h);else switch(h){case 26:g=" ";break;case $.TEXT_COMPACTION_MODE_LATCH:a=xt.ALPHA;break}break;case xt.PUNCT_SHIFT:if(a=o,h<$.PAL)g=$.PUNCT_CHARS[h];else switch(h){case $.PAL:a=xt.ALPHA;break;case $.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case $.TEXT_COMPACTION_MODE_LATCH:a=xt.ALPHA;break}break}g!==""&&i.append(g),u++}}static byteCompaction(e,n,r,i,a){let o=new Ha,u=0,h=0,g=!1;switch(e){case $.BYTE_COMPACTION_MODE_LATCH:let b=new Int32Array(6),E=n[i++];for(;i<n[0]&&!g;)switch(b[u++]=E,h=900*h+E,E=n[i++],E){case $.TEXT_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH:case $.NUMERIC_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH_6:case $.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case $.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case $.MACRO_PDF417_TERMINATOR:i--,g=!0;break;default:if(u%5===0&&u>0){for(let k=0;k<6;++k)o.write(Number(zt(h)>>zt(8*(5-k))));h=0,u=0}break}i===n[0]&&E<$.TEXT_COMPACTION_MODE_LATCH&&(b[u++]=E);for(let k=0;k<u;k++)o.write(b[k]);break;case $.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!g;){let k=n[i++];if(k<$.TEXT_COMPACTION_MODE_LATCH)u++,h=900*h+k;else switch(k){case $.TEXT_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH:case $.NUMERIC_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH_6:case $.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case $.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case $.MACRO_PDF417_TERMINATOR:i--,g=!0;break}if(u%5===0&&u>0){for(let _=0;_<6;++_)o.write(Number(zt(h)>>zt(8*(5-_))));h=0,u=0}}break}return a.append(Xe.decode(o.toByteArray(),r)),i}static numericCompaction(e,n,r){let i=0,a=!1,o=new Int32Array($.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!a;){let u=e[n++];if(n===e[0]&&(a=!0),u<$.TEXT_COMPACTION_MODE_LATCH)o[i]=u,i++;else switch(u){case $.TEXT_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH:case $.BYTE_COMPACTION_MODE_LATCH_6:case $.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case $.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case $.MACRO_PDF417_TERMINATOR:n--,a=!0;break}(i%$.MAX_NUMERIC_CODEWORDS===0||u===$.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append($.decodeBase900toBase10(o,i)),i=0)}return n}static decodeBase900toBase10(e,n){let r=zt(0);for(let a=0;a<n;a++)r+=$.EXP900[n-a-1]*zt(e[a]);let i=r.toString();if(i.charAt(0)!=="1")throw new G;return i.substring(1)}}$.TEXT_COMPACTION_MODE_LATCH=900,$.BYTE_COMPACTION_MODE_LATCH=901,$.NUMERIC_COMPACTION_MODE_LATCH=902,$.BYTE_COMPACTION_MODE_LATCH_6=924,$.ECI_USER_DEFINED=925,$.ECI_GENERAL_PURPOSE=926,$.ECI_CHARSET=927,$.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,$.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,$.MACRO_PDF417_TERMINATOR=922,$.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,$.MAX_NUMERIC_CODEWORDS=15,$.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,$.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,$.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,$.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,$.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,$.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,$.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,$.PL=25,$.LL=27,$.AS=27,$.ML=28,$.AL=28,$.PS=29,$.PAL=29,$.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,$.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",$.EXP900=Bs()?ls():[],$.NUMBER_OF_SEQUENCE_CODEWORDS=2;class tt{constructor(){}static decode(e,n,r,i,a,o,u){let h=new Fr(e,n,r,i,a),g=null,b=null,E;for(let L=!0;;L=!1){if(n!=null&&(g=tt.getRowIndicatorColumn(e,h,n,!0,o,u)),i!=null&&(b=tt.getRowIndicatorColumn(e,h,i,!1,o,u)),E=tt.merge(g,b),E==null)throw B.getNotFoundInstance();let U=E.getBoundingBox();if(L&&U!=null&&(U.getMinY()<h.getMinY()||U.getMaxY()>h.getMaxY()))h=U;else break}E.setBoundingBox(h);let k=E.getBarcodeColumnCount()+1;E.setDetectionResultColumn(0,g),E.setDetectionResultColumn(k,b);let _=g!=null;for(let L=1;L<=k;L++){let U=_?L:k-L;if(E.getDetectionResultColumn(U)!==void 0)continue;let V;U===0||U===k?V=new za(h,U===0):V=new cr(h),E.setDetectionResultColumn(U,V);let J=-1,Ce=J;for(let Ae=h.getMinY();Ae<=h.getMaxY();Ae++){if(J=tt.getStartColumn(E,U,Ae,_),J<0||J>h.getMaxX()){if(Ce===-1)continue;J=Ce}let be=tt.detectCodeword(e,h.getMinX(),h.getMaxX(),_,J,Ae,o,u);be!=null&&(V.setCodeword(Ae,be),Ce=J,o=Math.min(o,be.getWidth()),u=Math.max(u,be.getWidth()))}}return tt.createDecoderResult(E)}static merge(e,n){if(e==null&&n==null)return null;let r=tt.getBarcodeMetadata(e,n);if(r==null)return null;let i=Fr.merge(tt.adjustBoundingBox(e),tt.adjustBoundingBox(n));return new Ps(r,i)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let r=tt.getMax(n),i=0;for(let u of n)if(i+=r-u,u>0)break;let a=e.getCodewords();for(let u=0;i>0&&a[u]==null;u++)i--;let o=0;for(let u=n.length-1;u>=0&&(o+=r-n[u],!(n[u]>0));u--);for(let u=a.length-1;o>0&&a[u]==null;u--)o--;return e.getBoundingBox().addMissingRows(i,o,e.isLeft())}static getMax(e){let n=-1;for(let r of e)n=Math.max(n,r);return n}static getBarcodeMetadata(e,n){let r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let i;return n==null||(i=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r}static getRowIndicatorColumn(e,n,r,i,a,o){let u=new za(n,i);for(let h=0;h<2;h++){let g=h===0?1:-1,b=Math.trunc(Math.trunc(r.getX()));for(let E=Math.trunc(Math.trunc(r.getY()));E<=n.getMaxY()&&E>=n.getMinY();E+=g){let k=tt.detectCodeword(e,0,e.getWidth(),i,b,E,a,o);k!=null&&(u.setCodeword(E,k),i?b=k.getStartX():b=k.getEndX())}}return u}static adjustCodewordCount(e,n){let r=n[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-tt.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>qe.MAX_CODEWORDS_IN_BARCODE)throw B.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)}static createDecoderResult(e){let n=tt.createBarcodeMatrix(e);tt.adjustCodewordCount(e,n);let r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array;for(let h=0;h<e.getBarcodeRowCount();h++)for(let g=0;g<e.getBarcodeColumnCount();g++){let b=n[h][g+1].getValue(),E=h*e.getBarcodeColumnCount()+g;b.length===0?r.push(E):b.length===1?i[E]=b[0]:(o.push(E),a.push(b))}let u=new Array(a.length);for(let h=0;h<u.length;h++)u[h]=a[h];return tt.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,qe.toIntArray(r),qe.toIntArray(o),u)}static createDecoderResultFromAmbiguousValues(e,n,r,i,a){let o=new Int32Array(i.length),u=100;for(;u-- >0;){for(let h=0;h<o.length;h++)n[i[h]]=a[h][o[h]];try{return tt.decodeCodewords(n,e,r)}catch(h){if(!(h instanceof re))throw h}if(o.length===0)throw re.getChecksumInstance();for(let h=0;h<o.length;h++)if(o[h]<a[h].length-1){o[h]++;break}else if(o[h]=0,h===o.length-1)throw re.getChecksumInstance()}throw re.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let i=0;i<n.length;i++)for(let a=0;a<n[i].length;a++)n[i][a]=new Rr;let r=0;for(let i of e.getDetectionResultColumns()){if(i!=null){for(let a of i.getCodewords())if(a!=null){let o=a.getRowNumber();if(o>=0){if(o>=n.length)continue;n[o][r].setValue(a.getValue())}}}r++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,r,i){let a=i?1:-1,o=null;if(tt.isValidBarcodeColumn(e,n-a)&&(o=e.getDetectionResultColumn(n-a).getCodeword(r)),o!=null)return i?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(n).getCodewordNearby(r),o!=null)return i?o.getStartX():o.getEndX();if(tt.isValidBarcodeColumn(e,n-a)&&(o=e.getDetectionResultColumn(n-a).getCodewordNearby(r)),o!=null)return i?o.getEndX():o.getStartX();let u=0;for(;tt.isValidBarcodeColumn(e,n-a);){n-=a;for(let h of e.getDetectionResultColumn(n).getCodewords())if(h!=null)return(i?h.getEndX():h.getStartX())+a*u*(h.getEndX()-h.getStartX());u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,r,i,a,o,u,h){a=tt.adjustCodewordStartColumn(e,n,r,i,a,o);let g=tt.getModuleBitCount(e,n,r,i,a,o);if(g==null)return null;let b,E=ut.sum(g);if(i)b=a+E;else{for(let L=0;L<g.length/2;L++){let U=g[L];g[L]=g[g.length-1-L],g[g.length-1-L]=U}b=a,a=b-E}if(!tt.checkCodewordSkew(E,u,h))return null;let k=sn.getDecodedValue(g),_=qe.getCodeword(k);return _===-1?null:new Ur(a,b,tt.getCodewordBucketNumber(k),_)}static getModuleBitCount(e,n,r,i,a,o){let u=a,h=new Int32Array(8),g=0,b=i?1:-1,E=i;for(;(i?u<r:u>=n)&&g<h.length;)e.get(u,o)===E?(h[g]++,u+=b):(g++,E=!E);return g===h.length||u===(i?r:n)&&g===h.length-1?h:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,r,i,a,o){let u=a,h=i?-1:1;for(let g=0;g<2;g++){for(;(i?u>=n:u<r)&&i===e.get(u,o);){if(Math.abs(a-u)>tt.CODEWORD_SKEW_SIZE)return a;u+=h}h=-h,i=!i}return u}static checkCodewordSkew(e,n,r){return n-tt.CODEWORD_SKEW_SIZE<=e&&e<=r+tt.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,r){if(e.length===0)throw G.getFormatInstance();let i=1<<n+1,a=tt.correctErrors(e,r,i);tt.verifyCodewordCount(e,i);let o=$.decode(e,""+n);return o.setErrorsCorrected(a),o.setErasures(r.length),o}static correctErrors(e,n,r){if(n!=null&&n.length>r/2+tt.MAX_ERRORS||r<0||r>tt.MAX_EC_CODEWORDS)throw re.getChecksumInstance();return tt.errorCorrection.decode(e,r,n)}static verifyCodewordCount(e,n){if(e.length<4)throw G.getFormatInstance();let r=e[0];if(r>e.length)throw G.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw G.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),r=0,i=n.length-1;for(;!((e&1)!==r&&(r=e&1,i--,i<0));)n[i]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return tt.getCodewordBucketNumber(tt.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new yr;for(let r=0;r<e.length;r++){n.format("Row %2d: ",r);for(let i=0;i<e[r].length;i++){let a=e[r][i];a.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}n.format("%n")}return n.toString()}}tt.CODEWORD_SKEW_SIZE=2,tt.MAX_ERRORS=3,tt.MAX_EC_CODEWORDS=512,tt.errorCorrection=new Qi;class an{decode(e,n=null){let r=an.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw B.getNotFoundInstance();return r[0]}decodeMultiple(e,n=null){try{return an.decode(e,n,!0)}catch(r){throw r instanceof G||r instanceof re?B.getNotFoundInstance():r}}static decode(e,n,r){const i=new Array,a=$e.detectMultiple(e,n,r);for(const o of a.getPoints()){const u=tt.decode(a.getBits(),o[4],o[5],o[6],o[7],an.getMinCodewordWidth(o),an.getMaxCodewordWidth(o)),h=new _e(u.getText(),u.getRawBytes(),void 0,o,fe.PDF_417);h.putMetadata(je.ERROR_CORRECTION_LEVEL,u.getECLevel());const g=u.getOther();g!=null&&h.putMetadata(je.PDF417_EXTRA_METADATA,g),i.push(h)}return i.map(o=>o)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?oe.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(an.getMaxWidth(e[0],e[4]),an.getMaxWidth(e[6],e[2])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN),Math.max(an.getMaxWidth(e[1],e[5]),an.getMaxWidth(e[7],e[3])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(an.getMinWidth(e[0],e[4]),an.getMinWidth(e[6],e[2])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN),Math.min(an.getMinWidth(e[1],e[5]),an.getMinWidth(e[7],e[3])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN)))}reset(){}}class os extends A{}os.kind="ReaderException";class hi{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!v(e)&&e.get(he.TRY_HARDER)===!0,r=v(e)?null:e.get(he.POSSIBLE_FORMATS),i=new Array;if(!v(r)){const a=r.some(o=>o===fe.UPC_A||o===fe.UPC_E||o===fe.EAN_13||o===fe.EAN_8||o===fe.CODABAR||o===fe.CODE_39||o===fe.CODE_93||o===fe.CODE_128||o===fe.ITF||o===fe.RSS_14||o===fe.RSS_EXPANDED);a&&!n&&i.push(new rs(e,this.verbose)),r.includes(fe.QR_CODE)&&i.push(new mn),r.includes(fe.DATA_MATRIX)&&i.push(new Kn),r.includes(fe.AZTEC)&&i.push(new kr),r.includes(fe.PDF_417)&&i.push(new an),a&&n&&i.push(new rs(e,this.verbose))}i.length===0&&(n||i.push(new rs(e,this.verbose)),i.push(new mn),i.push(new Kn),i.push(new kr),i.push(new an),n&&i.push(new rs(e,this.verbose))),this.readers=i}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new os("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(r){if(r instanceof os)continue}throw new B("No MultiFormat Readers were able to detect the code.")}}class Fs extends ke{constructor(e=null,n=500){const r=new hi;r.setHints(e),super(r,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class fi extends ke{constructor(e=500){super(new an,e)}}class Ga extends ke{constructor(e=500){super(new mn,e)}}var ea;(function(C){C[C.ERROR_CORRECTION=0]="ERROR_CORRECTION",C[C.CHARACTER_SET=1]="CHARACTER_SET",C[C.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",C[C.MIN_SIZE=3]="MIN_SIZE",C[C.MAX_SIZE=4]="MAX_SIZE",C[C.MARGIN=5]="MARGIN",C[C.PDF417_COMPACT=6]="PDF417_COMPACT",C[C.PDF417_COMPACTION=7]="PDF417_COMPACTION",C[C.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",C[C.AZTEC_LAYERS=9]="AZTEC_LAYERS",C[C.QR_VERSION=10]="QR_VERSION"})(ea||(ea={}));var Yt=ea;class ta{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Qe(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let r=n[n.length-1];const i=this.field;for(let a=n.length;a<=e;a++){const o=r.multiply(new Qe(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));n.push(o),r=o}}return n[e]}encode(e,n){if(n===0)throw new j("No error correction bytes");const r=e.length-n;if(r<=0)throw new j("No data bytes provided");const i=this.buildGenerator(n),a=new Int32Array(r);ie.arraycopy(e,0,a,0,r);let o=new Qe(this.field,a);o=o.multiplyByMonomial(n,1);const h=o.divide(i)[1].getCoefficients(),g=n-h.length;for(let b=0;b<g;b++)e[r+b]=0;ie.arraycopy(h,0,e,r+g,h.length)}}class Tt{constructor(){}static applyMaskPenaltyRule1(e){return Tt.applyMaskPenaltyRule1Internal(e,!0)+Tt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const r=e.getArray(),i=e.getWidth(),a=e.getHeight();for(let o=0;o<a-1;o++){const u=r[o];for(let h=0;h<i-1;h++){const g=u[h];g===u[h+1]&&g===r[o+1][h]&&g===r[o+1][h+1]&&n++}}return Tt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const r=e.getArray(),i=e.getWidth(),a=e.getHeight();for(let o=0;o<a;o++)for(let u=0;u<i;u++){const h=r[o];u+6<i&&h[u]===1&&h[u+1]===0&&h[u+2]===1&&h[u+3]===1&&h[u+4]===1&&h[u+5]===0&&h[u+6]===1&&(Tt.isWhiteHorizontal(h,u-4,u)||Tt.isWhiteHorizontal(h,u+7,u+11))&&n++,o+6<a&&r[o][u]===1&&r[o+1][u]===0&&r[o+2][u]===1&&r[o+3][u]===1&&r[o+4][u]===1&&r[o+5][u]===0&&r[o+6][u]===1&&(Tt.isWhiteVertical(r,u,o-4,o)||Tt.isWhiteVertical(r,u,o+7,o+11))&&n++}return n*Tt.N3}static isWhiteHorizontal(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(e[i]===1)return!1;return!0}static isWhiteVertical(e,n,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(let a=r;a<i;a++)if(e[a][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const r=e.getArray(),i=e.getWidth(),a=e.getHeight();for(let h=0;h<a;h++){const g=r[h];for(let b=0;b<i;b++)g[b]===1&&n++}const o=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-o)*10/o)*Tt.N4}static getDataMaskBit(e,n,r){let i,a;switch(e){case 0:i=r+n&1;break;case 1:i=r&1;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:a=r*n,i=(a&1)+a%3;break;case 6:a=r*n,i=(a&1)+a%3&1;break;case 7:a=r*n,i=a%3+(r+n&1)&1;break;default:throw new j("Invalid mask pattern: "+e)}return i===0}static applyMaskPenaltyRule1Internal(e,n){let r=0;const i=n?e.getHeight():e.getWidth(),a=n?e.getWidth():e.getHeight(),o=e.getArray();for(let u=0;u<i;u++){let h=0,g=-1;for(let b=0;b<a;b++){const E=n?o[u][b]:o[b][u];E===g?h++:(h>=5&&(r+=Tt.N1+(h-5)),h=1,g=E)}h>=5&&(r+=Tt.N1+(h-5))}return r}}Tt.N1=3,Tt.N2=3,Tt.N3=40,Tt.N4=10;class xi{constructor(e,n){this.width=e,this.height=n;const r=new Array(n);for(let i=0;i!==n;i++)r[i]=new Uint8Array(e);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,r){this.bytes[n][e]=r}setBoolean(e,n,r){this.bytes[n][e]=r?1:0}clear(e){for(const n of this.bytes)ce.fill(n,e)}equals(e){if(!(e instanceof xi))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let r=0,i=this.height;r<i;++r){const a=this.bytes[r],o=n.bytes[r];for(let u=0,h=this.width;u<h;++u)if(a[u]!==o[u])return!1}return!0}toString(){const e=new K;for(let n=0,r=this.height;n<r;++n){const i=this.bytes[n];for(let a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Wr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new K;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Wr.NUM_MASK_PATTERNS}}Wr.NUM_MASK_PATTERNS=8;class Nt extends A{}Nt.kind="WriterException";class Ze{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,r,i,a){Ze.clearMatrix(a),Ze.embedBasicPatterns(r,a),Ze.embedTypeInfo(n,i,a),Ze.maybeEmbedVersionInfo(r,a),Ze.embedDataBits(e,i,a)}static embedBasicPatterns(e,n){Ze.embedPositionDetectionPatternsAndSeparators(n),Ze.embedDarkDotAtLeftBottomCorner(n),Ze.maybeEmbedPositionAdjustmentPatterns(e,n),Ze.embedTimingPatterns(n)}static embedTypeInfo(e,n,r){const i=new xe;Ze.makeTypeInfoBits(e,n,i);for(let a=0,o=i.getSize();a<o;++a){const u=i.get(i.getSize()-1-a),h=Ze.TYPE_INFO_COORDINATES[a],g=h[0],b=h[1];if(r.setBoolean(g,b,u),a<8){const E=r.getWidth()-a-1;r.setBoolean(E,8,u)}else{const k=r.getHeight()-7+(a-8);r.setBoolean(8,k,u)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const r=new xe;Ze.makeVersionInfoBits(e,r);let i=17;for(let a=0;a<6;++a)for(let o=0;o<3;++o){const u=r.get(i);i--,n.setBoolean(a,n.getHeight()-11+o,u),n.setBoolean(n.getHeight()-11+o,a,u)}}static embedDataBits(e,n,r){let i=0,a=-1,o=r.getWidth()-1,u=r.getHeight()-1;for(;o>0;){for(o===6&&(o-=1);u>=0&&u<r.getHeight();){for(let h=0;h<2;++h){const g=o-h;if(!Ze.isEmpty(r.get(g,u)))continue;let b;i<e.getSize()?(b=e.get(i),++i):b=!1,n!==255&&Tt.getDataMaskBit(n,g,u)&&(b=!b),r.setBoolean(g,u,b)}u+=a}a=-a,u+=a,o-=2}if(i!==e.getSize())throw new Nt("Not all bits consumed: "+i+"/"+e.getSize())}static findMSBSet(e){return 32-oe.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new j("0 polynomial");const r=Ze.findMSBSet(n);for(e<<=r-1;Ze.findMSBSet(e)>=r;)e^=n<<Ze.findMSBSet(e)-r;return e}static makeTypeInfoBits(e,n,r){if(!Wr.isValidMaskPattern(n))throw new Nt("Invalid mask pattern");const i=e.getBits()<<3|n;r.appendBits(i,5);const a=Ze.calculateBCHCode(i,Ze.TYPE_INFO_POLY);r.appendBits(a,10);const o=new xe;if(o.appendBits(Ze.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Nt("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const r=Ze.calculateBCHCode(e.getVersionNumber(),Ze.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new Nt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const r=(n+1)%2;Ze.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),Ze.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Nt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,r){for(let i=0;i<8;++i){if(!Ze.isEmpty(r.get(e+i,n)))throw new Nt;r.setNumber(e+i,n,0)}}static embedVerticalSeparationPattern(e,n,r){for(let i=0;i<7;++i){if(!Ze.isEmpty(r.get(e,n+i)))throw new Nt;r.setNumber(e,n+i,0)}}static embedPositionAdjustmentPattern(e,n,r){for(let i=0;i<5;++i){const a=Ze.POSITION_ADJUSTMENT_PATTERN[i];for(let o=0;o<5;++o)r.setNumber(e+o,n+i,a[o])}}static embedPositionDetectionPattern(e,n,r){for(let i=0;i<7;++i){const a=Ze.POSITION_DETECTION_PATTERN[i];for(let o=0;o<7;++o)r.setNumber(e+o,n+i,a[o])}}static embedPositionDetectionPatternsAndSeparators(e){const n=Ze.POSITION_DETECTION_PATTERN[0].length;Ze.embedPositionDetectionPattern(0,0,e),Ze.embedPositionDetectionPattern(e.getWidth()-n,0,e),Ze.embedPositionDetectionPattern(0,e.getWidth()-n,e);const r=8;Ze.embedHorizontalSeparationPattern(0,r-1,e),Ze.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),Ze.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);const i=7;Ze.embedVerticalSeparationPattern(i,0,e),Ze.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),Ze.embedVerticalSeparationPattern(i,e.getHeight()-i,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const r=e.getVersionNumber()-1,i=Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let a=0,o=i.length;a!==o;a++){const u=i[a];if(u>=0)for(let h=0;h!==o;h++){const g=i[h];g>=0&&Ze.isEmpty(n.get(g,u))&&Ze.embedPositionAdjustmentPattern(g-2,u-2,n)}}}}Ze.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ze.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ze.VERSION_INFO_POLY=7973,Ze.TYPE_INFO_POLY=1335,Ze.TYPE_INFO_MASK_PATTERN=21522;class ql{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ct{constructor(){}static calculateMaskPenalty(e){return Tt.applyMaskPenaltyRule1(e)+Tt.applyMaskPenaltyRule2(e)+Tt.applyMaskPenaltyRule3(e)+Tt.applyMaskPenaltyRule4(e)}static encode(e,n,r=null){let i=Ct.DEFAULT_BYTE_MODE_ENCODING;const a=r!==null&&r.get(Yt.CHARACTER_SET)!==void 0;a&&(i=r.get(Yt.CHARACTER_SET).toString());const o=this.chooseMode(e,i),u=new xe;if(o===Ve.BYTE&&(a||Ct.DEFAULT_BYTE_MODE_ENCODING!==i)){const Ae=de.getCharacterSetECIByName(i);Ae!==void 0&&this.appendECI(Ae,u)}this.appendModeInfo(o,u);const h=new xe;this.appendBytes(e,o,h,i);let g;if(r!==null&&r.get(Yt.QR_VERSION)!==void 0){const Ae=Number.parseInt(r.get(Yt.QR_VERSION).toString(),10);g=Ge.getVersionForNumber(Ae);const be=this.calculateBitsNeeded(o,u,h,g);if(!this.willFit(be,g,n))throw new Nt("Data too big for requested version")}else g=this.recommendVersion(n,o,u,h);const b=new xe;b.appendBitArray(u);const E=o===Ve.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(E,g,o,b),b.appendBitArray(h);const k=g.getECBlocksForLevel(n),_=g.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(_,b);const L=this.interleaveWithECBytes(b,g.getTotalCodewords(),_,k.getNumBlocks()),U=new Wr;U.setECLevel(n),U.setMode(o),U.setVersion(g);const V=g.getDimensionForVersion(),J=new xi(V,V),Ce=this.chooseMaskPattern(L,n,g,J);return U.setMaskPattern(Ce),Ze.buildMatrix(L,n,g,Ce,J),U.setMatrix(J),U}static recommendVersion(e,n,r,i){const a=this.calculateBitsNeeded(n,r,i,Ge.getVersionForNumber(1)),o=this.chooseVersion(a,e),u=this.calculateBitsNeeded(n,r,i,o);return this.chooseVersion(u,e)}static calculateBitsNeeded(e,n,r,i){return n.getSize()+e.getCharacterCountBits(i)+r.getSize()}static getAlphanumericCode(e){return e<Ct.ALPHANUMERIC_TABLE.length?Ct.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(de.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Ve.KANJI;let r=!1,i=!1;for(let a=0,o=e.length;a<o;++a){const u=e.charAt(a);if(Ct.isDigit(u))r=!0;else if(this.getAlphanumericCode(u.charCodeAt(0))!==-1)i=!0;else return Ve.BYTE}return i?Ve.ALPHANUMERIC:r?Ve.NUMERIC:Ve.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=Xe.encode(e,de.SJIS)}catch{return!1}const r=n.length;if(r%2!==0)return!1;for(let i=0;i<r;i+=2){const a=n[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0}static chooseMaskPattern(e,n,r,i){let a=Number.MAX_SAFE_INTEGER,o=-1;for(let u=0;u<Wr.NUM_MASK_PATTERNS;u++){Ze.buildMatrix(e,n,r,u,i);let h=this.calculateMaskPenalty(i);h<a&&(a=h,o=u)}return o}static chooseVersion(e,n){for(let r=1;r<=40;r++){const i=Ge.getVersionForNumber(r);if(Ct.willFit(e,i,n))return i}throw new Nt("Data too big")}static willFit(e,n,r){const i=n.getTotalCodewords(),o=n.getECBlocksForLevel(r).getTotalECCodewords(),u=i-o,h=(e+7)/8;return u>=h}static terminateBits(e,n){const r=e*8;if(n.getSize()>r)throw new Nt("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(let o=0;o<4&&n.getSize()<r;++o)n.appendBit(!1);const i=n.getSize()&7;if(i>0)for(let o=i;o<8;o++)n.appendBit(!1);const a=e-n.getSizeInBytes();for(let o=0;o<a;++o)n.appendBits((o&1)===0?236:17,8);if(n.getSize()!==r)throw new Nt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,r,i,a,o){if(i>=r)throw new Nt("Block ID too large");const u=e%r,h=r-u,g=Math.floor(e/r),b=g+1,E=Math.floor(n/r),k=E+1,_=g-E,L=b-k;if(_!==L)throw new Nt("EC bytes mismatch");if(r!==h+u)throw new Nt("RS blocks mismatch");if(e!==(E+_)*h+(k+L)*u)throw new Nt("Total bytes mismatch");i<h?(a[0]=E,o[0]=_):(a[0]=k,o[0]=L)}static interleaveWithECBytes(e,n,r,i){if(e.getSizeInBytes()!==r)throw new Nt("Number of bits and data bytes does not match");let a=0,o=0,u=0;const h=new Array;for(let b=0;b<i;++b){const E=new Int32Array(1),k=new Int32Array(1);Ct.getNumDataBytesAndNumECBytesForBlockID(n,r,i,b,E,k);const _=E[0],L=new Uint8Array(_);e.toBytes(8*a,L,0,_);const U=Ct.generateECBytes(L,k[0]);h.push(new ql(L,U)),o=Math.max(o,_),u=Math.max(u,U.length),a+=E[0]}if(r!==a)throw new Nt("Data bytes does not match offset");const g=new xe;for(let b=0;b<o;++b)for(const E of h){const k=E.getDataBytes();b<k.length&&g.appendBits(k[b],8)}for(let b=0;b<u;++b)for(const E of h){const k=E.getErrorCorrectionBytes();b<k.length&&g.appendBits(k[b],8)}if(n!==g.getSizeInBytes())throw new Nt("Interleaving error: "+n+" and "+g.getSizeInBytes()+" differ.");return g}static generateECBytes(e,n){const r=e.length,i=new Int32Array(r+n);for(let o=0;o<r;o++)i[o]=e[o]&255;new ta(at.QR_CODE_FIELD_256).encode(i,n);const a=new Uint8Array(n);for(let o=0;o<n;o++)a[o]=i[r+o];return a}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,r,i){const a=r.getCharacterCountBits(n);if(e>=1<<a)throw new Nt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)}static appendBytes(e,n,r,i){switch(n){case Ve.NUMERIC:Ct.appendNumericBytes(e,r);break;case Ve.ALPHANUMERIC:Ct.appendAlphanumericBytes(e,r);break;case Ve.BYTE:Ct.append8BitBytes(e,r,i);break;case Ve.KANJI:Ct.appendKanjiBytes(e,r);break;default:throw new Nt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=Ct.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const r=e.length;let i=0;for(;i<r;){const a=Ct.getDigit(e.charAt(i));if(i+2<r){const o=Ct.getDigit(e.charAt(i+1)),u=Ct.getDigit(e.charAt(i+2));n.appendBits(a*100+o*10+u,10),i+=3}else if(i+1<r){const o=Ct.getDigit(e.charAt(i+1));n.appendBits(a*10+o,7),i+=2}else n.appendBits(a,4),i++}}static appendAlphanumericBytes(e,n){const r=e.length;let i=0;for(;i<r;){const a=Ct.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Nt;if(i+1<r){const o=Ct.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Nt;n.appendBits(a*45+o,11),i+=2}else n.appendBits(a,6),i++}}static append8BitBytes(e,n,r){let i;try{i=Xe.encode(e,r)}catch(a){throw new Nt(a)}for(let a=0,o=i.length;a!==o;a++){const u=i[a];n.appendBits(u,8)}}static appendKanjiBytes(e,n){let r;try{r=Xe.encode(e,de.SJIS)}catch(a){throw new Nt(a)}const i=r.length;for(let a=0;a<i;a+=2){const o=r[a]&255,u=r[a+1]&255,h=o<<8&4294967295|u;let g=-1;if(h>=33088&&h<=40956?g=h-33088:h>=57408&&h<=60351&&(g=h-49472),g===-1)throw new Nt("Invalid byte sequence");const b=(g>>8)*192+(g&255);n.appendBits(b,13)}}static appendECI(e,n){n.appendBits(Ve.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}Ct.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ct.DEFAULT_BYTE_MODE_ENCODING=de.UTF8.getName();class zr{write(e,n,r,i=null){if(e.length===0)throw new j("Found empty contents");if(n<0||r<0)throw new j("Requested dimensions are too small: "+n+"x"+r);let a=bt.L,o=zr.QUIET_ZONE_SIZE;i!==null&&(i.get(Yt.ERROR_CORRECTION)!==void 0&&(a=bt.fromString(i.get(Yt.ERROR_CORRECTION).toString())),i.get(Yt.MARGIN)!==void 0&&(o=Number.parseInt(i.get(Yt.MARGIN).toString(),10)));const u=Ct.encode(e,a,i);return this.renderResult(u,n,r,o)}writeToDom(e,n,r,i,a=null){typeof e=="string"&&(e=document.querySelector(e));const o=this.write(n,r,i,a);e&&e.appendChild(o)}renderResult(e,n,r,i){const a=e.getMatrix();if(a===null)throw new vn;const o=a.getWidth(),u=a.getHeight(),h=o+i*2,g=u+i*2,b=Math.max(n,h),E=Math.max(r,g),k=Math.min(Math.floor(b/h),Math.floor(E/g)),_=Math.floor((b-o*k)/2),L=Math.floor((E-u*k)/2),U=this.createSVGElement(b,E);for(let V=0,J=L;V<u;V++,J+=k)for(let Ce=0,Ae=_;Ce<o;Ce++,Ae+=k)if(a.get(Ce,V)===1){const be=this.createSvgRectElement(Ae,J,k,k);U.appendChild(be)}return U}createSVGElement(e,n){const r=document.createElementNS(zr.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",n.toString()),r}createSvgRectElement(e,n,r,i){const a=document.createElementNS(zr.SVG_NS,"rect");return a.setAttributeNS(null,"x",e.toString()),a.setAttributeNS(null,"y",n.toString()),a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",i.toString()),a.setAttributeNS(null,"fill","#000000"),a}}zr.QUIET_ZONE_SIZE=4,zr.SVG_NS="http://www.w3.org/2000/svg";class cs{encode(e,n,r,i,a){if(e.length===0)throw new j("Found empty contents");if(n!==fe.QR_CODE)throw new j("Can only encode QR_CODE, but got "+n);if(r<0||i<0)throw new j(`Requested dimensions are too small: ${r}x${i}`);let o=bt.L,u=cs.QUIET_ZONE_SIZE;a!==null&&(a.get(Yt.ERROR_CORRECTION)!==void 0&&(o=bt.fromString(a.get(Yt.ERROR_CORRECTION).toString())),a.get(Yt.MARGIN)!==void 0&&(u=Number.parseInt(a.get(Yt.MARGIN).toString(),10)));const h=Ct.encode(e,o,a);return cs.renderResult(h,r,i,u)}static renderResult(e,n,r,i){const a=e.getMatrix();if(a===null)throw new vn;const o=a.getWidth(),u=a.getHeight(),h=o+i*2,g=u+i*2,b=Math.max(n,h),E=Math.max(r,g),k=Math.min(Math.floor(b/h),Math.floor(E/g)),_=Math.floor((b-o*k)/2),L=Math.floor((E-u*k)/2),U=new Se(b,E);for(let V=0,J=L;V<u;V++,J+=k)for(let Ce=0,Ae=_;Ce<o;Ce++,Ae+=k)a.get(Ce,V)===1&&U.setRegion(Ae,J,k,k);return U}}cs.QUIET_ZONE_SIZE=4;class Ql{encode(e,n,r,i,a){let o;if(n===fe.QR_CODE)o=new cs;else throw new j("No encoder available for format "+n);return o.encode(e,n,r,i,a)}}class ur extends le{constructor(e,n,r,i,a,o,u,h){if(super(o,u),this.yuvData=e,this.dataWidth=n,this.dataHeight=r,this.left=i,this.top=a,i+o>n||a+u>r)throw new j("Crop rectangle does not fit within image data.");h&&this.reverseHorizontal(o,u)}getRow(e,n){if(e<0||e>=this.getHeight())throw new j("Requested row is outside the image: "+e);const r=this.getWidth();(n==null||n.length<r)&&(n=new Uint8ClampedArray(r));const i=(e+this.top)*this.dataWidth+this.left;return ie.arraycopy(this.yuvData,i,n,0,r),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const r=e*n,i=new Uint8ClampedArray(r);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return ie.arraycopy(this.yuvData,a,i,0,r),i;for(let o=0;o<n;o++){const u=o*e;ie.arraycopy(this.yuvData,a,i,u,e),a+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,n,r,i){return new ur(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,r,i,!1)}renderThumbnail(){const e=this.getWidth()/ur.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/ur.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*n),i=this.yuvData;let a=this.top*this.dataWidth+this.left;for(let o=0;o<n;o++){const u=o*e;for(let h=0;h<e;h++){const g=i[a+h*ur.THUMBNAIL_SCALE_FACTOR]&255;r[u+h]=4278190080|g*65793}a+=this.dataWidth*ur.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/ur.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ur.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const r=this.yuvData;for(let i=0,a=this.top*this.dataWidth+this.left;i<n;i++,a+=this.dataWidth){const o=a+e/2;for(let u=a,h=a+e-1;u<o;u++,h--){const g=r[u];r[u]=r[h],r[h]=g}}}invert(){return new X(this)}}ur.THUMBNAIL_SCALE_FACTOR=2;class Us extends le{constructor(e,n,r,i,a,o,u){if(super(n,r),this.dataWidth=i,this.dataHeight=a,this.left=o,this.top=u,e.BYTES_PER_ELEMENT===4){const h=n*r,g=new Uint8ClampedArray(h);for(let b=0;b<h;b++){const E=e[b],k=E>>16&255,_=E>>7&510,L=E&255;g[b]=(k+_+L)/4&255}this.luminances=g}else this.luminances=e;if(i===void 0&&(this.dataWidth=n),a===void 0&&(this.dataHeight=r),o===void 0&&(this.left=0),u===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+r>this.dataHeight)throw new j("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new j("Requested row is outside the image: "+e);const r=this.getWidth();(n==null||n.length<r)&&(n=new Uint8ClampedArray(r));const i=(e+this.top)*this.dataWidth+this.left;return ie.arraycopy(this.luminances,i,n,0,r),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const r=e*n,i=new Uint8ClampedArray(r);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return ie.arraycopy(this.luminances,a,i,0,r),i;for(let o=0;o<n;o++){const u=o*e;ie.arraycopy(this.luminances,a,i,u,e),a+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,n,r,i){return new Us(this.luminances,r,i,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new X(this)}}class Va extends de{static forName(e){return this.getCharacterSetECIByName(e)}}class na{}na.ISO_8859_1=de.ISO8859_1;class Xa{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class ra{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class Jl{constructor(e){this.previous=e}getPrevious(){return this.previous}}class us extends Jl{constructor(e,n,r){super(e),this.value=n,this.bitCount=r}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new us(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new us(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+oe.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class sa extends us{constructor(e,n,r){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=r}appendTo(e,n){for(let r=0;r<this.binaryShiftByteCount;r++)(r===0||r===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):r===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+r],8)}addBinaryShift(e,n){return new sa(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function $l(C,e,n){return new sa(C,e,n)}function Ws(C,e,n){return new us(C,e,n)}const eo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],_r=0,ds=1,dn=2,Za=3,Qn=4,Ya=new us(null,0,0),gi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ka(C){for(let e of C)ce.fill(e,-1);return C[_r][Qn]=0,C[ds][Qn]=0,C[ds][_r]=28,C[Za][Qn]=0,C[dn][Qn]=0,C[dn][_r]=15,C}const ia=Ka(ce.createInt32Array(6,6));class pn{constructor(e,n,r,i){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=i}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let r=this.bitCount,i=this.token;if(e!==this.mode){let o=gi[this.mode][e];i=Ws(i,o&65535,o>>16),r+=o>>16}let a=e===dn?4:5;return i=Ws(i,n,a),new pn(i,e,0,r+a)}shiftAndAppend(e,n){let r=this.token,i=this.mode===dn?4:5;return r=Ws(r,ia[this.mode][e],i),r=Ws(r,n,5),new pn(r,this.mode,0,this.bitCount+i+5)}addBinaryShiftChar(e){let n=this.token,r=this.mode,i=this.bitCount;if(this.mode===Qn||this.mode===dn){let u=gi[r][_r];n=Ws(n,u&65535,u>>16),i+=u>>16,r=_r}let a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new pn(n,r,this.binaryShiftByteCount+1,i+a);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=$l(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new pn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(gi[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=pn.calculateBinaryShiftCost(e)-pn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())n.unshift(i);let r=new xe;for(const i of n)i.appendTo(r,e);return r}toString(){return ne.format("%s bits=%d bytes=%d",eo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}pn.INITIAL_STATE=new pn(Ya,_r,0,0);function to(C){const e=ne.getCharCode(" "),n=ne.getCharCode("."),r=ne.getCharCode(",");C[_r][e]=1;const i=ne.getCharCode("Z"),a=ne.getCharCode("A");for(let k=a;k<=i;k++)C[_r][k]=k-a+2;C[ds][e]=1;const o=ne.getCharCode("z"),u=ne.getCharCode("a");for(let k=u;k<=o;k++)C[ds][k]=k-u+2;C[dn][e]=1;const h=ne.getCharCode("9"),g=ne.getCharCode("0");for(let k=g;k<=h;k++)C[dn][k]=k-g+2;C[dn][r]=12,C[dn][n]=13;const b=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<b.length;k++)C[Za][ne.getCharCode(b[k])]=k;const E=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<E.length;k++)ne.getCharCode(E[k])>0&&(C[Qn][ne.getCharCode(E[k])]=k);return C}const aa=to(ce.createInt32Array(5,256));class zs{constructor(e){this.text=e}encode(){const e=ne.getCharCode(" "),n=ne.getCharCode(`
`);let r=ra.singletonList(pn.INITIAL_STATE);for(let a=0;a<this.text.length;a++){let o,u=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case ne.getCharCode("\r"):o=u===n?2:0;break;case ne.getCharCode("."):o=u===e?3:0;break;case ne.getCharCode(","):o=u===e?4:0;break;case ne.getCharCode(":"):o=u===e?5:0;break;default:o=0}o>0?(r=zs.updateStateListForPair(r,a,o),a++):r=this.updateStateListForChar(r,a)}return ra.min(r,(a,o)=>a.getBitCount()-o.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const r=[];for(let i of e)this.updateStateForChar(i,n,r);return zs.simplifyStates(r)}updateStateForChar(e,n,r){let i=this.text[n]&255,a=aa[e.getMode()][i]>0,o=null;for(let u=0;u<=Qn;u++){let h=aa[u][i];if(h>0){if(o==null&&(o=e.endBinaryShift(n)),!a||u===e.getMode()||u===dn){const g=o.latchAndAppend(u,h);r.push(g)}if(!a&&ia[e.getMode()][u]>=0){const g=o.shiftAndAppend(u,h);r.push(g)}}}if(e.getBinaryShiftByteCount()>0||aa[e.getMode()][i]===0){let u=e.addBinaryShiftChar(n);r.push(u)}}static updateStateListForPair(e,n,r){const i=[];for(let a of e)this.updateStateForPair(a,n,r,i);return this.simplifyStates(i)}static updateStateForPair(e,n,r,i){let a=e.endBinaryShift(n);if(i.push(a.latchAndAppend(Qn,r)),e.getMode()!==Qn&&i.push(a.shiftAndAppend(Qn,r)),r===3||r===4){let o=a.latchAndAppend(dn,16-r).latchAndAppend(dn,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){let o=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);i.push(o)}}static simplifyStates(e){let n=[];for(const r of e){let i=!0;for(const a of n){if(a.isBetterThanOrEqualTo(r)){i=!1;break}r.isBetterThanOrEqualTo(a)&&(n=n.filter(o=>o!==a))}i&&n.push(r)}return n}}class ht{constructor(){}static encodeBytes(e){return ht.encode(e,ht.DEFAULT_EC_PERCENT,ht.DEFAULT_AZTEC_LAYERS)}static encode(e,n,r){let i=new zs(e).encode(),a=oe.truncDivision(i.getSize()*n,100)+11,o=i.getSize()+a,u,h,g,b,E;if(r!==ht.DEFAULT_AZTEC_LAYERS){if(u=r<0,h=Math.abs(r),h>(u?ht.MAX_NB_BITS_COMPACT:ht.MAX_NB_BITS))throw new j(ne.format("Illegal value %s for layers",r));g=ht.totalBitsInLayer(h,u),b=ht.WORD_SIZE[h];let be=g-g%b;if(E=ht.stuffBits(i,b),E.getSize()+a>be)throw new j("Data to large for user specified layer");if(u&&E.getSize()>b*64)throw new j("Data to large for user specified layer")}else{b=0,E=null;for(let be=0;;be++){if(be>ht.MAX_NB_BITS)throw new j("Data too large for an Aztec code");if(u=be<=3,h=u?be+1:be,g=ht.totalBitsInLayer(h,u),o>g)continue;(E==null||b!==ht.WORD_SIZE[h])&&(b=ht.WORD_SIZE[h],E=ht.stuffBits(i,b));let lt=g-g%b;if(!(u&&E.getSize()>b*64)&&E.getSize()+a<=lt)break}}let k=ht.generateCheckWords(E,g,b),_=E.getSize()/b,L=ht.generateModeMessage(u,h,_),U=(u?11:14)+h*4,V=new Int32Array(U),J;if(u){J=U;for(let be=0;be<V.length;be++)V[be]=be}else{J=U+1+2*oe.truncDivision(oe.truncDivision(U,2)-1,15);let be=oe.truncDivision(U,2),lt=oe.truncDivision(J,2);for(let et=0;et<be;et++){let An=et+oe.truncDivision(et,15);V[be-et-1]=lt-An-1,V[be+et]=lt+An+1}}let Ce=new Se(J);for(let be=0,lt=0;be<h;be++){let et=(h-be)*4+(u?9:12);for(let An=0;An<et;An++){let Jn=An*2;for(let Kt=0;Kt<2;Kt++)k.get(lt+Jn+Kt)&&Ce.set(V[be*2+Kt],V[be*2+An]),k.get(lt+et*2+Jn+Kt)&&Ce.set(V[be*2+An],V[U-1-be*2-Kt]),k.get(lt+et*4+Jn+Kt)&&Ce.set(V[U-1-be*2-Kt],V[U-1-be*2-An]),k.get(lt+et*6+Jn+Kt)&&Ce.set(V[U-1-be*2-An],V[be*2+Kt])}lt+=et*8}if(ht.drawModeMessage(Ce,u,J,L),u)ht.drawBullsEye(Ce,oe.truncDivision(J,2),5);else{ht.drawBullsEye(Ce,oe.truncDivision(J,2),7);for(let be=0,lt=0;be<oe.truncDivision(U,2)-1;be+=15,lt+=16)for(let et=oe.truncDivision(J,2)&1;et<J;et+=2)Ce.set(oe.truncDivision(J,2)-lt,et),Ce.set(oe.truncDivision(J,2)+lt,et),Ce.set(et,oe.truncDivision(J,2)-lt),Ce.set(et,oe.truncDivision(J,2)+lt)}let Ae=new Xa;return Ae.setCompact(u),Ae.setSize(J),Ae.setLayers(h),Ae.setCodeWords(_),Ae.setMatrix(Ce),Ae}static drawBullsEye(e,n,r){for(let i=0;i<r;i+=2)for(let a=n-i;a<=n+i;a++)e.set(a,n-i),e.set(a,n+i),e.set(n-i,a),e.set(n+i,a);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)}static generateModeMessage(e,n,r){let i=new xe;return e?(i.appendBits(n-1,2),i.appendBits(r-1,6),i=ht.generateCheckWords(i,28,4)):(i.appendBits(n-1,5),i.appendBits(r-1,11),i=ht.generateCheckWords(i,40,4)),i}static drawModeMessage(e,n,r,i){let a=oe.truncDivision(r,2);if(n)for(let o=0;o<7;o++){let u=a-3+o;i.get(o)&&e.set(u,a-5),i.get(o+7)&&e.set(a+5,u),i.get(20-o)&&e.set(u,a+5),i.get(27-o)&&e.set(a-5,u)}else for(let o=0;o<10;o++){let u=a-5+o+oe.truncDivision(o,5);i.get(o)&&e.set(u,a-7),i.get(o+10)&&e.set(a+7,u),i.get(29-o)&&e.set(u,a+7),i.get(39-o)&&e.set(a-7,u)}}static generateCheckWords(e,n,r){let i=e.getSize()/r,a=new ta(ht.getGF(r)),o=oe.truncDivision(n,r),u=ht.bitsToWords(e,r,o);a.encode(u,o-i);let h=n%r,g=new xe;g.appendBits(0,h);for(const b of Array.from(u))g.appendBits(b,r);return g}static bitsToWords(e,n,r){let i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/n;a<o;a++){let u=0;for(let h=0;h<n;h++)u|=e.get(a*n+h)?1<<n-h-1:0;i[a]=u}return i}static getGF(e){switch(e){case 4:return at.AZTEC_PARAM;case 6:return at.AZTEC_DATA_6;case 8:return at.AZTEC_DATA_8;case 10:return at.AZTEC_DATA_10;case 12:return at.AZTEC_DATA_12;default:throw new j("Unsupported word size "+e)}}static stuffBits(e,n){let r=new xe,i=e.getSize(),a=(1<<n)-2;for(let o=0;o<i;o+=n){let u=0;for(let h=0;h<n;h++)(o+h>=i||e.get(o+h))&&(u|=1<<n-1-h);(u&a)===a?(r.appendBits(u&a,n),o--):(u&a)===0?(r.appendBits(u|1,n),o--):r.appendBits(u,n)}return r}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}ht.DEFAULT_EC_PERCENT=33,ht.DEFAULT_AZTEC_LAYERS=0,ht.MAX_NB_BITS=32,ht.MAX_NB_BITS_COMPACT=4,ht.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Hs{encode(e,n,r,i){return this.encodeWithHints(e,n,r,i,null)}encodeWithHints(e,n,r,i,a){let o=na.ISO_8859_1,u=ht.DEFAULT_EC_PERCENT,h=ht.DEFAULT_AZTEC_LAYERS;return a!=null&&(a.has(Yt.CHARACTER_SET)&&(o=Va.forName(a.get(Yt.CHARACTER_SET).toString())),a.has(Yt.ERROR_CORRECTION)&&(u=oe.parseInt(a.get(Yt.ERROR_CORRECTION).toString())),a.has(Yt.AZTEC_LAYERS)&&(h=oe.parseInt(a.get(Yt.AZTEC_LAYERS).toString()))),Hs.encodeLayers(e,n,r,i,o,u,h)}static encodeLayers(e,n,r,i,a,o,u){if(n!==fe.AZTEC)throw new j("Can only encode AZTEC, but got "+n);let h=ht.encode(ne.getBytes(e,a),o,u);return Hs.renderResult(h,r,i)}static renderResult(e,n,r){let i=e.getMatrix();if(i==null)throw new vn;let a=i.getWidth(),o=i.getHeight(),u=Math.max(n,a),h=Math.max(r,o),g=Math.min(u/a,h/o),b=(u-a*g)/2,E=(h-o*g)/2,k=new Se(u,h);for(let _=0,L=E;_<o;_++,L+=g)for(let U=0,V=b;U<a;U++,V+=g)i.get(U,_)&&k.setRegion(V,L,g,g);return k}}x.AbstractExpandedDecoder=Vi,x.ArgumentException=P,x.ArithmeticException=sr,x.AztecCode=Xa,x.AztecCodeReader=kr,x.AztecCodeWriter=Hs,x.AztecDecoder=vt,x.AztecDetector=ts,x.AztecDetectorResult=Ui,x.AztecEncoder=ht,x.AztecHighLevelEncoder=zs,x.AztecPoint=cn,x.BarcodeFormat=fe,x.Binarizer=ee,x.BinaryBitmap=se,x.BitArray=xe,x.BitMatrix=Se,x.BitSource=Yi,x.BrowserAztecCodeReader=Yl,x.BrowserBarcodeReader=La,x.BrowserCodeReader=ke,x.BrowserDatamatrixCodeReader=Kl,x.BrowserMultiFormatReader=Fs,x.BrowserPDF417Reader=fi,x.BrowserQRCodeReader=Ga,x.BrowserQRCodeSvgWriter=zr,x.CharacterSetECI=de,x.ChecksumException=re,x.Code128Reader=Te,x.Code39Reader=Xt,x.DataMatrixDecodedBitStreamParser=Yn,x.DataMatrixReader=Kn,x.DecodeHintType=he,x.DecoderResult=Me,x.DefaultGridSampler=ii,x.DetectorResult=es,x.EAN13Reader=Dn,x.EncodeHintType=Yt,x.Exception=A,x.FormatException=G,x.GenericGF=at,x.GenericGFPoly=Qe,x.GlobalHistogramBinarizer=me,x.GridSampler=si,x.GridSamplerInstance=Vn,x.HTMLCanvasElementLuminanceSource=z,x.HybridBinarizer=q,x.ITFReader=pt,x.IllegalArgumentException=j,x.IllegalStateException=vn,x.InvertedLuminanceSource=X,x.LuminanceSource=le,x.MathUtils=ut,x.MultiFormatOneDReader=rs,x.MultiFormatReader=hi,x.MultiFormatWriter=Ql,x.NotFoundException=B,x.OneDReader=Pt,x.PDF417DecodedBitStreamParser=$,x.PDF417DecoderErrorCorrection=Qi,x.PDF417Reader=an,x.PDF417ResultMetadata=ui,x.PerspectiveTransform=On,x.PlanarYUVLuminanceSource=ur,x.QRCodeByteMatrix=xi,x.QRCodeDataMask=st,x.QRCodeDecodedBitStreamParser=It,x.QRCodeDecoderErrorCorrectionLevel=bt,x.QRCodeDecoderFormatInformation=nn,x.QRCodeEncoder=Ct,x.QRCodeEncoderQRCode=Wr,x.QRCodeMaskUtil=Tt,x.QRCodeMatrixUtil=Ze,x.QRCodeMode=Ve,x.QRCodeReader=mn,x.QRCodeVersion=Ge,x.QRCodeWriter=cs,x.RGBLuminanceSource=Us,x.RSS14Reader=Et,x.RSSExpandedReader=ge,x.ReaderException=os,x.ReedSolomonDecoder=Rn,x.ReedSolomonEncoder=ta,x.ReedSolomonException=Gn,x.Result=_e,x.ResultMetadataType=je,x.ResultPoint=Le,x.StringUtils=ne,x.UnsupportedOperationException=nt,x.VideoInputDevice=D,x.WhiteRectangleDetector=ir,x.WriterException=Nt,x.ZXingArrays=ce,x.ZXingCharset=Va,x.ZXingInteger=oe,x.ZXingStandardCharsets=na,x.ZXingStringBuilder=K,x.ZXingStringEncoding=Xe,x.ZXingSystem=ie,x.createAbstractExpandedDecoder=Pa,Object.defineProperty(x,"__esModule",{value:!0})}))})(Ra,Ra.exports)),Ra.exports}var Ut=rh();const sh=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Hd=(function(){function f(p,x,v){if(this.formatMap=new Map([[Fe.QR_CODE,Ut.BarcodeFormat.QR_CODE],[Fe.AZTEC,Ut.BarcodeFormat.AZTEC],[Fe.CODABAR,Ut.BarcodeFormat.CODABAR],[Fe.CODE_39,Ut.BarcodeFormat.CODE_39],[Fe.CODE_93,Ut.BarcodeFormat.CODE_93],[Fe.CODE_128,Ut.BarcodeFormat.CODE_128],[Fe.DATA_MATRIX,Ut.BarcodeFormat.DATA_MATRIX],[Fe.MAXICODE,Ut.BarcodeFormat.MAXICODE],[Fe.ITF,Ut.BarcodeFormat.ITF],[Fe.EAN_13,Ut.BarcodeFormat.EAN_13],[Fe.EAN_8,Ut.BarcodeFormat.EAN_8],[Fe.PDF_417,Ut.BarcodeFormat.PDF_417],[Fe.RSS_14,Ut.BarcodeFormat.RSS_14],[Fe.RSS_EXPANDED,Ut.BarcodeFormat.RSS_EXPANDED],[Fe.UPC_A,Ut.BarcodeFormat.UPC_A],[Fe.UPC_E,Ut.BarcodeFormat.UPC_E],[Fe.UPC_EAN_EXTENSION,Ut.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!sh)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=x,this.logger=v;var N=this.createZXingFormats(p),w=new Map;w.set(Ut.DecodeHintType.POSSIBLE_FORMATS,N),w.set(Ut.DecodeHintType.TRY_HARDER,!1),this.hints=w}return f.prototype.decodeAsync=function(p){var x=this;return new Promise(function(v,N){try{v(x.decode(p))}catch(w){N(w)}})},f.prototype.decode=function(p){var x=new Ut.MultiFormatReader(this.verbose,this.hints),v=new Ut.HTMLCanvasElementLuminanceSource(p),N=new Ut.BinaryBitmap(new Ut.HybridBinarizer(v)),w=x.decode(N);return{text:w.text,format:x0.create(this.toHtml5QrcodeSupportedFormats(w.format)),debugData:this.createDebugData()}},f.prototype.createReverseFormatMap=function(){var p=new Map;return this.formatMap.forEach(function(x,v,N){p.set(x,v)}),p},f.prototype.toHtml5QrcodeSupportedFormats=function(p){if(!this.reverseFormatMap.has(p))throw"reverseFormatMap doesn't have ".concat(p);return this.reverseFormatMap.get(p)},f.prototype.createZXingFormats=function(p){for(var x=[],v=0,N=p;v<N.length;v++){var w=N[v];this.formatMap.has(w)?x.push(this.formatMap.get(w)):this.logger.logError("".concat(w," is not supported by")+"ZXingHtml5QrcodeShim")}return x},f.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},f})(),ih=function(f,p,x,v){function N(w){return w instanceof x?w:new x(function(I){I(w)})}return new(x||(x=Promise))(function(w,I){function M(P){try{A(v.next(P))}catch(j){I(j)}}function T(P){try{A(v.throw(P))}catch(j){I(j)}}function A(P){P.done?w(P.value):N(P.value).then(M,T)}A((v=v.apply(f,p||[])).next())})},ah=function(f,p){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,N,w,I;return I={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(A){return function(P){return T([A,P])}}function T(A){if(v)throw new TypeError("Generator is already executing.");for(;I&&(I=0,A[0]&&(x=0)),x;)try{if(v=1,N&&(w=A[0]&2?N.return:A[0]?N.throw||((w=N.return)&&w.call(N),0):N.next)&&!(w=w.call(N,A[1])).done)return w;switch(N=0,w&&(A=[A[0]&2,w.value]),A[0]){case 0:case 1:w=A;break;case 4:return x.label++,{value:A[1],done:!1};case 5:x.label++,N=A[1],A=[0];continue;case 7:A=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(A[0]===6||A[0]===2)){x=0;continue}if(A[0]===3&&(!w||A[1]>w[0]&&A[1]<w[3])){x.label=A[1];break}if(A[0]===6&&x.label<w[1]){x.label=w[1],w=A;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(A);break}w[2]&&x.ops.pop(),x.trys.pop();continue}A=p.call(f,x)}catch(P){A=[6,P],N=0}finally{v=w=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},Gd=(function(){function f(p,x,v){if(this.formatMap=new Map([[Fe.QR_CODE,"qr_code"],[Fe.AZTEC,"aztec"],[Fe.CODABAR,"codabar"],[Fe.CODE_39,"code_39"],[Fe.CODE_93,"code_93"],[Fe.CODE_128,"code_128"],[Fe.DATA_MATRIX,"data_matrix"],[Fe.ITF,"itf"],[Fe.EAN_13,"ean_13"],[Fe.EAN_8,"ean_8"],[Fe.PDF_417,"pdf417"],[Fe.UPC_A,"upc_a"],[Fe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!f.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=x,this.logger=v;var N=this.createBarcodeDetectorFormats(p);if(this.detector=new BarcodeDetector(N),!this.detector)throw"BarcodeDetector detector not supported"}return f.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var p=new BarcodeDetector({formats:["qr_code"]});return typeof p<"u"},f.prototype.decodeAsync=function(p){return ih(this,void 0,void 0,function(){var x,v;return ah(this,function(N){switch(N.label){case 0:return[4,this.detector.detect(p)];case 1:if(x=N.sent(),!x||x.length===0)throw"No barcode or QR code detected.";return v=this.selectLargestBarcode(x),[2,{text:v.rawValue,format:x0.create(this.toHtml5QrcodeSupportedFormats(v.format)),debugData:this.createDebugData()}]}})})},f.prototype.selectLargestBarcode=function(p){for(var x=null,v=0,N=0,w=p;N<w.length;N++){var I=w[N],M=I.boundingBox.width*I.boundingBox.height;M>v&&(v=M,x=I)}if(!x)throw"No largest barcode found";return x},f.prototype.createBarcodeDetectorFormats=function(p){for(var x=[],v=0,N=p;v<N.length;v++){var w=N[v];this.formatMap.has(w)?x.push(this.formatMap.get(w)):this.logger.warn("".concat(w," is not supported by")+"BarcodeDetectorDelegate")}return{formats:x}},f.prototype.toHtml5QrcodeSupportedFormats=function(p){if(!this.reverseFormatMap.has(p))throw"reverseFormatMap doesn't have ".concat(p);return this.reverseFormatMap.get(p)},f.prototype.createReverseFormatMap=function(){var p=new Map;return this.formatMap.forEach(function(x,v,N){p.set(x,v)}),p},f.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},f})(),Vd=function(f,p,x,v){function N(w){return w instanceof x?w:new x(function(I){I(w)})}return new(x||(x=Promise))(function(w,I){function M(P){try{A(v.next(P))}catch(j){I(j)}}function T(P){try{A(v.throw(P))}catch(j){I(j)}}function A(P){P.done?w(P.value):N(P.value).then(M,T)}A((v=v.apply(f,p||[])).next())})},Xd=function(f,p){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,N,w,I;return I={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(A){return function(P){return T([A,P])}}function T(A){if(v)throw new TypeError("Generator is already executing.");for(;I&&(I=0,A[0]&&(x=0)),x;)try{if(v=1,N&&(w=A[0]&2?N.return:A[0]?N.throw||((w=N.return)&&w.call(N),0):N.next)&&!(w=w.call(N,A[1])).done)return w;switch(N=0,w&&(A=[A[0]&2,w.value]),A[0]){case 0:case 1:w=A;break;case 4:return x.label++,{value:A[1],done:!1};case 5:x.label++,N=A[1],A=[0];continue;case 7:A=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(A[0]===6||A[0]===2)){x=0;continue}if(A[0]===3&&(!w||A[1]>w[0]&&A[1]<w[3])){x.label=A[1];break}if(A[0]===6&&x.label<w[1]){x.label=w[1],w=A;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(A);break}w[2]&&x.ops.pop(),x.trys.pop();continue}A=p.call(f,x)}catch(P){A=[6,P],N=0}finally{v=w=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},lh=(function(){function f(p,x,v,N){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=v,x&&Gd.isSupported()?(this.primaryDecoder=new Gd(p,v,N),this.secondaryDecoder=new Hd(p,v,N)):this.primaryDecoder=new Hd(p,v,N)}return f.prototype.decodeAsync=function(p){return Vd(this,void 0,void 0,function(){var x;return Xd(this,function(v){switch(v.label){case 0:x=performance.now(),v.label=1;case 1:return v.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(p)];case 2:return[2,v.sent()];case 3:return this.possiblyLogPerformance(x),[7];case 4:return[2]}})})},f.prototype.decodeRobustlyAsync=function(p){return Vd(this,void 0,void 0,function(){var x,v;return Xd(this,function(N){switch(N.label){case 0:x=performance.now(),N.label=1;case 1:return N.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(p)];case 2:return[2,N.sent()];case 3:if(v=N.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(p)];throw v;case 4:return this.possiblyLogPerformance(x),[7];case 5:return[2]}})})},f.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},f.prototype.possiblyLogPerformance=function(p){if(this.verbose){var x=performance.now()-p;this.executionResults.push(x),this.executions++,this.possiblyFlushPerformanceReport()}},f.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var p=0,x=0,v=this.executionResults;x<v.length;x++){var N=v[x];p+=N}var w=p/this.executionResults.length;console.log("".concat(w," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},f})(),_c=(function(){var f=function(p,x){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,N){v.__proto__=N}||function(v,N){for(var w in N)Object.prototype.hasOwnProperty.call(N,w)&&(v[w]=N[w])},f(p,x)};return function(p,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");f(p,x);function v(){this.constructor=p}p.prototype=x===null?Object.create(x):(v.prototype=x.prototype,new v)}})(),Vl=function(f,p,x,v){function N(w){return w instanceof x?w:new x(function(I){I(w)})}return new(x||(x=Promise))(function(w,I){function M(P){try{A(v.next(P))}catch(j){I(j)}}function T(P){try{A(v.throw(P))}catch(j){I(j)}}function A(P){P.done?w(P.value):N(P.value).then(M,T)}A((v=v.apply(f,p||[])).next())})},Xl=function(f,p){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,N,w,I;return I={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(A){return function(P){return T([A,P])}}function T(A){if(v)throw new TypeError("Generator is already executing.");for(;I&&(I=0,A[0]&&(x=0)),x;)try{if(v=1,N&&(w=A[0]&2?N.return:A[0]?N.throw||((w=N.return)&&w.call(N),0):N.next)&&!(w=w.call(N,A[1])).done)return w;switch(N=0,w&&(A=[A[0]&2,w.value]),A[0]){case 0:case 1:w=A;break;case 4:return x.label++,{value:A[1],done:!1};case 5:x.label++,N=A[1],A=[0];continue;case 7:A=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(A[0]===6||A[0]===2)){x=0;continue}if(A[0]===3&&(!w||A[1]>w[0]&&A[1]<w[3])){x.label=A[1];break}if(A[0]===6&&x.label<w[1]){x.label=w[1],w=A;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(A);break}w[2]&&x.ops.pop(),x.trys.pop();continue}A=p.call(f,x)}catch(P){A=[6,P],N=0}finally{v=w=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},m0=(function(){function f(p,x){this.name=p,this.track=x}return f.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},f.prototype.apply=function(p){var x={};x[this.name]=p;var v={advanced:[x]};return this.track.applyConstraints(v)},f.prototype.value=function(){var p=this.track.getSettings();if(this.name in p){var x=p[this.name];return x}return null},f})(),oh=(function(f){_c(p,f);function p(x,v){return f.call(this,x,v)||this}return p.prototype.min=function(){return this.getCapabilities().min},p.prototype.max=function(){return this.getCapabilities().max},p.prototype.step=function(){return this.getCapabilities().step},p.prototype.apply=function(x){var v={};v[this.name]=x;var N={advanced:[v]};return this.track.applyConstraints(N)},p.prototype.getCapabilities=function(){this.failIfNotSupported();var x=this.track.getCapabilities(),v=x[this.name];return{min:v.min,max:v.max,step:v.step}},p.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},p})(m0),ch=(function(f){_c(p,f);function p(x){return f.call(this,"zoom",x)||this}return p})(oh),uh=(function(f){_c(p,f);function p(x){return f.call(this,"torch",x)||this}return p})(m0),dh=(function(){function f(p){this.track=p}return f.prototype.zoomFeature=function(){return new ch(this.track)},f.prototype.torchFeature=function(){return new uh(this.track)},f})(),hh=(function(){function f(p,x,v){this.isClosed=!1,this.parentElement=p,this.mediaStream=x,this.callbacks=v,this.surface=this.createVideoElement(this.parentElement.clientWidth),p.append(this.surface)}return f.prototype.createVideoElement=function(p){var x=document.createElement("video");return x.style.width="".concat(p,"px"),x.style.display="block",x.muted=!0,x.setAttribute("muted","true"),x.playsInline=!0,x},f.prototype.setupSurface=function(){var p=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var x=function(){var v=p.surface.clientWidth,N=p.surface.clientHeight;p.callbacks.onRenderSurfaceReady(v,N),p.surface.removeEventListener("playing",x)};this.surface.addEventListener("playing",x),this.surface.srcObject=this.mediaStream,this.surface.play()},f.create=function(p,x,v,N){return Vl(this,void 0,void 0,function(){var w,I;return Xl(this,function(M){switch(M.label){case 0:return w=new f(p,x,N),v.aspectRatio?(I={aspectRatio:v.aspectRatio},[4,w.getFirstTrackOrFail().applyConstraints(I)]):[3,2];case 1:M.sent(),M.label=2;case 2:return w.setupSurface(),[2,w]}})})},f.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},f.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},f.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},f.prototype.resume=function(p){this.failIfClosed();var x=this,v=function(){setTimeout(p,200),x.surface.removeEventListener("playing",v)};this.surface.addEventListener("playing",v),this.surface.play()},f.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},f.prototype.getSurface=function(){return this.failIfClosed(),this.surface},f.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},f.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},f.prototype.applyVideoConstraints=function(p){return Vl(this,void 0,void 0,function(){return Xl(this,function(x){if("aspectRatio"in p)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(p)]})})},f.prototype.close=function(){if(this.isClosed)return Promise.resolve();var p=this;return new Promise(function(x,v){var N=p.mediaStream.getVideoTracks(),w=N.length,I=0;p.mediaStream.getVideoTracks().forEach(function(M){p.mediaStream.removeTrack(M),M.stop(),++I,I>=w&&(p.isClosed=!0,p.parentElement.removeChild(p.surface),x())})})},f.prototype.getCapabilities=function(){return new dh(this.getFirstTrackOrFail())},f})(),fh=(function(){function f(p){this.mediaStream=p}return f.prototype.render=function(p,x,v){return Vl(this,void 0,void 0,function(){return Xl(this,function(N){return[2,hh.create(p,this.mediaStream,x,v)]})})},f.create=function(p){return Vl(this,void 0,void 0,function(){var x,v;return Xl(this,function(N){switch(N.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return x={audio:!1,video:p},[4,navigator.mediaDevices.getUserMedia(x)];case 1:return v=N.sent(),[2,new f(v)]}})})},f})(),Zd=function(f,p,x,v){function N(w){return w instanceof x?w:new x(function(I){I(w)})}return new(x||(x=Promise))(function(w,I){function M(P){try{A(v.next(P))}catch(j){I(j)}}function T(P){try{A(v.throw(P))}catch(j){I(j)}}function A(P){P.done?w(P.value):N(P.value).then(M,T)}A((v=v.apply(f,p||[])).next())})},Yd=function(f,p){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,N,w,I;return I={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(A){return function(P){return T([A,P])}}function T(A){if(v)throw new TypeError("Generator is already executing.");for(;I&&(I=0,A[0]&&(x=0)),x;)try{if(v=1,N&&(w=A[0]&2?N.return:A[0]?N.throw||((w=N.return)&&w.call(N),0):N.next)&&!(w=w.call(N,A[1])).done)return w;switch(N=0,w&&(A=[A[0]&2,w.value]),A[0]){case 0:case 1:w=A;break;case 4:return x.label++,{value:A[1],done:!1};case 5:x.label++,N=A[1],A=[0];continue;case 7:A=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(A[0]===6||A[0]===2)){x=0;continue}if(A[0]===3&&(!w||A[1]>w[0]&&A[1]<w[3])){x.label=A[1];break}if(A[0]===6&&x.label<w[1]){x.label=w[1],w=A;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(A);break}w[2]&&x.ops.pop(),x.trys.pop();continue}A=p.call(f,x)}catch(P){A=[6,P],N=0}finally{v=w=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},xh=(function(){function f(){}return f.failIfNotSupported=function(){return Zd(this,void 0,void 0,function(){return Yd(this,function(p){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new f]})})},f.prototype.create=function(p){return Zd(this,void 0,void 0,function(){return Yd(this,function(x){return[2,fh.create(p)]})})},f})(),gh=function(f,p,x,v){function N(w){return w instanceof x?w:new x(function(I){I(w)})}return new(x||(x=Promise))(function(w,I){function M(P){try{A(v.next(P))}catch(j){I(j)}}function T(P){try{A(v.throw(P))}catch(j){I(j)}}function A(P){P.done?w(P.value):N(P.value).then(M,T)}A((v=v.apply(f,p||[])).next())})},mh=function(f,p){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,N,w,I;return I={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(A){return function(P){return T([A,P])}}function T(A){if(v)throw new TypeError("Generator is already executing.");for(;I&&(I=0,A[0]&&(x=0)),x;)try{if(v=1,N&&(w=A[0]&2?N.return:A[0]?N.throw||((w=N.return)&&w.call(N),0):N.next)&&!(w=w.call(N,A[1])).done)return w;switch(N=0,w&&(A=[A[0]&2,w.value]),A[0]){case 0:case 1:w=A;break;case 4:return x.label++,{value:A[1],done:!1};case 5:x.label++,N=A[1],A=[0];continue;case 7:A=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(A[0]===6||A[0]===2)){x=0;continue}if(A[0]===3&&(!w||A[1]>w[0]&&A[1]<w[3])){x.label=A[1];break}if(A[0]===6&&x.label<w[1]){x.label=w[1],w=A;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(A);break}w[2]&&x.ops.pop(),x.trys.pop();continue}A=p.call(f,x)}catch(P){A=[6,P],N=0}finally{v=w=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},ph=(function(){function f(){}return f.retrieve=function(){if(navigator.mediaDevices)return f.getCamerasFromMediaDevices();var p=MediaStreamTrack;return MediaStreamTrack&&p.getSources?f.getCamerasFromMediaStreamTrack():f.rejectWithError()},f.rejectWithError=function(){var p=Oi.unableToQuerySupportedDevices();return f.isHttpsOrLocalhost()||(p=Oi.insecureContextCameraQueryError()),Promise.reject(p)},f.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var p=location.host.split(":")[0];return p==="127.0.0.1"||p==="localhost"},f.getCamerasFromMediaDevices=function(){return gh(this,void 0,void 0,function(){var p,x,v,N,w,I,M;return mh(this,function(T){switch(T.label){case 0:return p=function(A){for(var P=A.getVideoTracks(),j=0,se=P;j<se.length;j++){var re=se[j];re.enabled=!1,re.stop(),A.removeTrack(re)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return x=T.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(v=T.sent(),N=[],w=0,I=v;w<I.length;w++)M=I[w],M.kind==="videoinput"&&N.push({id:M.deviceId,label:M.label});return p(x),[2,N]}})})},f.getCamerasFromMediaStreamTrack=function(){return new Promise(function(p,x){var v=function(w){for(var I=[],M=0,T=w;M<T.length;M++){var A=T[M];A.kind==="video"&&I.push({id:A.id,label:A.label})}p(I)},N=MediaStreamTrack;N.getSources(v)})},f})(),Gt;(function(f){f[f.UNKNOWN=0]="UNKNOWN",f[f.NOT_STARTED=1]="NOT_STARTED",f[f.SCANNING=2]="SCANNING",f[f.PAUSED=3]="PAUSED"})(Gt||(Gt={}));var yh=(function(){function f(){this.state=Gt.NOT_STARTED,this.onGoingTransactionNewState=Gt.UNKNOWN}return f.prototype.directTransition=function(p){this.failIfTransitionOngoing(),this.validateTransition(p),this.state=p},f.prototype.startTransition=function(p){return this.failIfTransitionOngoing(),this.validateTransition(p),this.onGoingTransactionNewState=p,this},f.prototype.execute=function(){if(this.onGoingTransactionNewState===Gt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var p=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Gt.UNKNOWN,this.directTransition(p)},f.prototype.cancel=function(){if(this.onGoingTransactionNewState===Gt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Gt.UNKNOWN},f.prototype.getState=function(){return this.state},f.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Gt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},f.prototype.validateTransition=function(p){switch(this.state){case Gt.UNKNOWN:throw"Transition from unknown is not allowed";case Gt.NOT_STARTED:this.failIfNewStateIs(p,[Gt.PAUSED]);break;case Gt.SCANNING:break;case Gt.PAUSED:break}},f.prototype.failIfNewStateIs=function(p,x){for(var v=0,N=x;v<N.length;v++){var w=N[v];if(p===w)throw"Cannot transition from ".concat(this.state," to ").concat(p)}},f})(),wh=(function(){function f(p){this.stateManager=p}return f.prototype.startTransition=function(p){return this.stateManager.startTransition(p)},f.prototype.directTransition=function(p){this.stateManager.directTransition(p)},f.prototype.getState=function(){return this.stateManager.getState()},f.prototype.canScanFile=function(){return this.stateManager.getState()===Gt.NOT_STARTED},f.prototype.isScanning=function(){return this.stateManager.getState()!==Gt.NOT_STARTED},f.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Gt.SCANNING},f.prototype.isPaused=function(){return this.stateManager.getState()===Gt.PAUSED},f})(),bh=(function(){function f(){}return f.create=function(){return new wh(new yh)},f})(),vh=(function(){var f=function(p,x){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,N){v.__proto__=N}||function(v,N){for(var w in N)Object.prototype.hasOwnProperty.call(N,w)&&(v[w]=N[w])},f(p,x)};return function(p,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");f(p,x);function v(){this.constructor=p}p.prototype=x===null?Object.create(x):(v.prototype=x.prototype,new v)}})(),rr=(function(f){vh(p,f);function p(){return f!==null&&f.apply(this,arguments)||this}return p.DEFAULT_WIDTH=300,p.DEFAULT_WIDTH_OFFSET=2,p.FILE_SCAN_MIN_HEIGHT=300,p.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,p.MIN_QR_BOX_SIZE=50,p.SHADED_LEFT=1,p.SHADED_RIGHT=2,p.SHADED_TOP=3,p.SHADED_BOTTOM=4,p.SHADED_REGION_ELEMENT_ID="qr-shaded-region",p.VERBOSE=!1,p.BORDER_SHADER_DEFAULT_COLOR="#ffffff",p.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",p})($1),Nh=(function(){function f(p,x){this.logger=x,this.fps=rr.SCAN_DEFAULT_FPS,p?(p.fps&&(this.fps=p.fps),this.disableFlip=p.disableFlip===!0,this.qrbox=p.qrbox,this.aspectRatio=p.aspectRatio,this.videoConstraints=p.videoConstraints):this.disableFlip=rr.DEFAULT_DISABLE_FLIP}return f.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?g0.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},f.prototype.isShadedBoxEnabled=function(){return!Jr(this.qrbox)},f.create=function(p,x){return new f(p,x)},f})(),Kd=(function(){function f(p,x){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(p))throw"HTML Element with id=".concat(p," not found");this.elementId=p,this.verbose=!1;var v;typeof x=="boolean"?this.verbose=x===!0:x&&(v=x,this.verbose=v.verbose===!0,v.experimentalFeatures),this.logger=new th(this.verbose),this.qrcode=new lh(this.getSupportedFormats(x),this.getUseBarCodeDetectorIfSupported(v),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=bh.create()}return f.prototype.start=function(p,x,v,N){var w=this;if(!p)throw"cameraIdOrConfig is required";if(!v||typeof v!="function")throw"qrCodeSuccessCallback is required and should be a function.";var I;N?I=N:I=this.verbose?this.logger.log:function(){};var M=Nh.create(x,this.logger);this.clearElement();var T=!1;M.videoConstraints&&(M.isMediaStreamConstraintsValid()?T=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var A=T,P=document.getElementById(this.elementId);P.clientWidth?P.clientWidth:rr.DEFAULT_WIDTH,P.style.position="relative",this.shouldScan=!0,this.element=P;var j=this,se=this.stateManagerProxy.startTransition(Gt.SCANNING);return new Promise(function(re,ee){var ie=A?M.videoConstraints:j.createVideoConstraints(p);if(!ie){se.cancel(),ee("videoConstraints should be defined");return}var ae={};(!A||M.aspectRatio)&&(ae.aspectRatio=M.aspectRatio);var ue={onRenderSurfaceReady:function(ce,oe){j.setupUi(ce,oe,M),j.isScanning=!0,j.foreverScan(M,v,I)}};xh.failIfNotSupported().then(function(ce){ce.create(ie).then(function(oe){return oe.render(w.element,ae,ue).then(function(xe){j.renderedCamera=xe,se.execute(),re(null)}).catch(function(xe){se.cancel(),ee(xe)})}).catch(function(oe){se.cancel(),ee(Oi.errorGettingUserMedia(oe))})}).catch(function(ce){se.cancel(),ee(Oi.cameraStreamingNotSupported())})})},f.prototype.pause=function(p){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Gt.PAUSED),this.showPausedState(),(Jr(p)||p!==!0)&&(p=!1),p&&this.renderedCamera&&this.renderedCamera.pause()},f.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var p=this,x=function(){p.stateManagerProxy.directTransition(Gt.SCANNING),p.hidePausedState()};if(!this.renderedCamera.isPaused()){x();return}this.renderedCamera.resume(function(){x()})},f.prototype.getState=function(){return this.stateManagerProxy.getState()},f.prototype.stop=function(){var p=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var x=this.stateManagerProxy.startTransition(Gt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var v=function(){if(p.element){var w=document.getElementById(rr.SHADED_REGION_ELEMENT_ID);w&&p.element.removeChild(w)}},N=this;return this.renderedCamera.close().then(function(){return N.renderedCamera=null,N.element&&(N.element.removeChild(N.canvasElement),N.canvasElement=null),v(),N.qrRegion&&(N.qrRegion=null),N.context&&(N.context=null),x.execute(),N.hidePausedState(),N.isScanning=!1,Promise.resolve()})},f.prototype.scanFile=function(p,x){return this.scanFileV2(p,x).then(function(v){return v.decodedText})},f.prototype.scanFileV2=function(p,x){var v=this;if(!p||!(p instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Jr(x)&&(x=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(N,w){v.possiblyCloseLastScanImageFile(),v.clearElement(),v.lastScanImageFile=URL.createObjectURL(p);var I=new Image;I.onload=function(){var M=I.width,T=I.height,A=document.getElementById(v.elementId),P=A.clientWidth?A.clientWidth:rr.DEFAULT_WIDTH,j=Math.max(A.clientHeight?A.clientHeight:T,rr.FILE_SCAN_MIN_HEIGHT),se=v.computeCanvasDrawConfig(M,T,P,j);if(x){var re=v.createCanvasElement(P,j,"qr-canvas-visible");re.style.display="inline-block",A.appendChild(re);var ee=re.getContext("2d");if(!ee)throw"Unable to get 2d context from canvas";ee.canvas.width=P,ee.canvas.height=j,ee.drawImage(I,0,0,M,T,se.x,se.y,se.width,se.height)}var ie=rr.FILE_SCAN_HIDDEN_CANVAS_PADDING,ae=Math.max(I.width,se.width),ue=Math.max(I.height,se.height),ce=ae+2*ie,oe=ue+2*ie,xe=v.createCanvasElement(ce,oe);A.appendChild(xe);var Ee=xe.getContext("2d");if(!Ee)throw"Unable to get 2d context from canvas";Ee.canvas.width=ce,Ee.canvas.height=oe,Ee.drawImage(I,0,0,M,T,ie,ie,ae,ue);try{v.qrcode.decodeRobustlyAsync(xe).then(function(he){N(Wd.createFromQrcodeResult(he))}).catch(w)}catch(he){w("QR code parse error, error = ".concat(he))}},I.onerror=w,I.onabort=w,I.onstalled=w,I.onsuspend=w,I.src=URL.createObjectURL(p)})},f.prototype.clear=function(){this.clearElement()},f.getCameras=function(){return ph.retrieve()},f.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},f.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},f.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},f.prototype.applyVideoConstraints=function(p){if(p){if(!g0.isMediaStreamConstraintsValid(p,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(p)},f.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},f.prototype.getSupportedFormats=function(p){var x=[Fe.QR_CODE,Fe.AZTEC,Fe.CODABAR,Fe.CODE_39,Fe.CODE_93,Fe.CODE_128,Fe.DATA_MATRIX,Fe.MAXICODE,Fe.ITF,Fe.EAN_13,Fe.EAN_8,Fe.PDF_417,Fe.RSS_14,Fe.RSS_EXPANDED,Fe.UPC_A,Fe.UPC_E,Fe.UPC_EAN_EXTENSION];if(!p||typeof p=="boolean"||!p.formatsToSupport)return x;if(!Array.isArray(p.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(p.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var v=[],N=0,w=p.formatsToSupport;N<w.length;N++){var I=w[N];J1(I)?v.push(I):this.logger.warn("Invalid format: ".concat(I," passed in config, ignoring."))}if(v.length===0)throw"None of formatsToSupport match supported values.";return v},f.prototype.getUseBarCodeDetectorIfSupported=function(p){if(Jr(p))return!0;if(!Jr(p.useBarCodeDetectorIfSupported))return p.useBarCodeDetectorIfSupported!==!1;if(Jr(p.experimentalFeatures))return!0;var x=p.experimentalFeatures;return Jr(x.useBarCodeDetectorIfSupported)?!0:x.useBarCodeDetectorIfSupported!==!1},f.prototype.validateQrboxSize=function(p,x,v){var N=this,w=v.qrbox;this.validateQrboxConfig(w);var I=this.toQrdimensions(p,x,w),M=function(A){if(A<rr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(rr.MIN_QR_BOX_SIZE,"px.")},T=function(A){return A>p&&(N.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),A=p),A};M(I.width),M(I.height),I.width=T(I.width)},f.prototype.validateQrboxConfig=function(p){if(typeof p!="number"&&typeof p!="function"&&(p.width===void 0||p.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},f.prototype.toQrdimensions=function(p,x,v){if(typeof v=="number")return{width:v,height:v};if(typeof v=="function")try{return v(p,x)}catch(N){throw new Error("qrbox config was passed as a function but it failed with unknown error"+N)}return v},f.prototype.setupUi=function(p,x,v){v.isShadedBoxEnabled()&&this.validateQrboxSize(p,x,v);var N=Jr(v.qrbox)?{width:p,height:x}:v.qrbox;this.validateQrboxConfig(N);var w=this.toQrdimensions(p,x,N);w.height>x&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var I=v.isShadedBoxEnabled()&&w.height<=x,M={x:0,y:0,width:p,height:x},T=I?this.getShadedRegionBounds(p,x,w):M,A=this.createCanvasElement(T.width,T.height),P={willReadFrequently:!0},j=A.getContext("2d",P);j.canvas.width=T.width,j.canvas.height=T.height,this.element.append(A),I&&this.possiblyInsertShadingElement(this.element,p,x,w),this.createScannerPausedUiElement(this.element),this.qrRegion=T,this.context=j,this.canvasElement=A},f.prototype.createScannerPausedUiElement=function(p){var x=document.createElement("div");x.innerText=Oi.scannerPaused(),x.style.display="none",x.style.position="absolute",x.style.top="0px",x.style.zIndex="1",x.style.background="rgba(9, 9, 9, 0.46)",x.style.color="#FFECEC",x.style.textAlign="center",x.style.width="100%",p.appendChild(x),this.scannerPausedUiElement=x},f.prototype.scanContext=function(p,x){var v=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(N){return p(N.text,Wd.createFromQrcodeResult(N)),v.possiblyUpdateShaders(!0),!0}).catch(function(N){v.possiblyUpdateShaders(!1);var w=Oi.codeParseError(N);return x(w,eh.createFrom(w)),!1})},f.prototype.foreverScan=function(p,x,v){var N=this;if(this.shouldScan&&this.renderedCamera){var w=this.renderedCamera.getSurface(),I=w.videoWidth/w.clientWidth,M=w.videoHeight/w.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var T=this.qrRegion.width*I,A=this.qrRegion.height*M,P=this.qrRegion.x*I,j=this.qrRegion.y*M;this.context.drawImage(w,P,j,T,A,0,0,this.qrRegion.width,this.qrRegion.height);var se=function(){N.foreverScanTimeout=setTimeout(function(){N.foreverScan(p,x,v)},N.getTimeoutFps(p.fps))};this.scanContext(x,v).then(function(re){!re&&p.disableFlip!==!0?(N.context.translate(N.context.canvas.width,0),N.context.scale(-1,1),N.scanContext(x,v).finally(function(){se()})):se()}).catch(function(re){N.logger.logError("Error happend while scanning context",re),se()})}},f.prototype.createVideoConstraints=function(p){if(typeof p=="string")return{deviceId:{exact:p}};if(typeof p=="object"){var x="facingMode",v="deviceId",N={user:!0,environment:!0},w="exact",I=function(ee){if(ee in N)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(ee,"'")},M=Object.keys(p);if(M.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(M.length," keys");var T=Object.keys(p)[0];if(T!==x&&T!==v)throw"Only '".concat(x,"' and '").concat(v,"' ")+" are supported for 'cameraIdOrConfig'";if(T===x){var A=p.facingMode;if(typeof A=="string"){if(I(A))return{facingMode:A}}else if(typeof A=="object")if(w in A){if(I(A["".concat(w)]))return{facingMode:{exact:A["".concat(w)]}}}else throw"'facingMode' should be string or object with"+" ".concat(w," as key.");else{var P=typeof A;throw"Invalid type of 'facingMode' = ".concat(P)}}else{var j=p.deviceId;if(typeof j=="string")return{deviceId:j};if(typeof j=="object"){if(w in j)return{deviceId:{exact:j["".concat(w)]}};throw"'deviceId' should be string or object with"+" ".concat(w," as key.")}else{var se=typeof j;throw"Invalid type of 'deviceId' = ".concat(se)}}}var re=typeof p;throw"Invalid type of 'cameraIdOrConfig' = ".concat(re)},f.prototype.computeCanvasDrawConfig=function(p,x,v,N){if(p<=v&&x<=N){var w=(v-p)/2,I=(N-x)/2;return{x:w,y:I,width:p,height:x}}else{var M=p,T=x;return p>v&&(x=v/p*x,p=v),x>N&&(p=N/x*p,x=N),this.logger.log("Image downsampled from "+"".concat(M,"X").concat(T)+" to ".concat(p,"X").concat(x,".")),this.computeCanvasDrawConfig(p,x,v,N)}},f.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var p=document.getElementById(this.elementId);p&&(p.innerHTML="")},f.prototype.possiblyUpdateShaders=function(p){this.qrMatch!==p&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(x){x.style.backgroundColor=p?rr.BORDER_SHADER_MATCH_COLOR:rr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=p)},f.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},f.prototype.createCanvasElement=function(p,x,v){var N=p,w=x,I=document.createElement("canvas");return I.style.width="".concat(N,"px"),I.style.height="".concat(w,"px"),I.style.display="none",I.id=Jr(v)?"qr-canvas":v,I},f.prototype.getShadedRegionBounds=function(p,x,v){if(v.width>p||v.height>x)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(p-v.width)/2,y:(x-v.height)/2,width:v.width,height:v.height}},f.prototype.possiblyInsertShadingElement=function(p,x,v,N){if(!(x-N.width<1||v-N.height<1)){var w=document.createElement("div");w.style.position="absolute";var I=(x-N.width)/2,M=(v-N.height)/2;if(w.style.borderLeft="".concat(I,"px solid rgba(0, 0, 0, 0.48)"),w.style.borderRight="".concat(I,"px solid rgba(0, 0, 0, 0.48)"),w.style.borderTop="".concat(M,"px solid rgba(0, 0, 0, 0.48)"),w.style.borderBottom="".concat(M,"px solid rgba(0, 0, 0, 0.48)"),w.style.boxSizing="border-box",w.style.top="0px",w.style.bottom="0px",w.style.left="0px",w.style.right="0px",w.id="".concat(rr.SHADED_REGION_ELEMENT_ID),x-N.width<11||v-N.height<11)this.hasBorderShaders=!1;else{var T=5,A=40;this.insertShaderBorders(w,A,T,-T,null,0,!0),this.insertShaderBorders(w,A,T,-T,null,0,!1),this.insertShaderBorders(w,A,T,null,-T,0,!0),this.insertShaderBorders(w,A,T,null,-T,0,!1),this.insertShaderBorders(w,T,A+T,-T,null,-T,!0),this.insertShaderBorders(w,T,A+T,null,-T,-T,!0),this.insertShaderBorders(w,T,A+T,-T,null,-T,!1),this.insertShaderBorders(w,T,A+T,null,-T,-T,!1),this.hasBorderShaders=!0}p.append(w)}},f.prototype.insertShaderBorders=function(p,x,v,N,w,I,M){var T=document.createElement("div");T.style.position="absolute",T.style.backgroundColor=rr.BORDER_SHADER_DEFAULT_COLOR,T.style.width="".concat(x,"px"),T.style.height="".concat(v,"px"),N!==null&&(T.style.top="".concat(N,"px")),w!==null&&(T.style.bottom="".concat(w,"px")),M?T.style.left="".concat(I,"px"):T.style.right="".concat(I,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(T),p.appendChild(T)},f.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},f.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},f.prototype.getTimeoutFps=function(p){return 1e3/p},f})(),qd;(function(f){f[f.STATUS_DEFAULT=0]="STATUS_DEFAULT",f[f.STATUS_SUCCESS=1]="STATUS_SUCCESS",f[f.STATUS_WARNING=2]="STATUS_WARNING",f[f.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(qd||(qd={}));function Ch({isOpen:f,onScan:p,onClose:x}){const v=Re.useRef(null),N=Re.useRef(null),[w,I]=Re.useState(!1),[M,T]=Re.useState(null),[A,P]=Re.useState(!1),[j,se]=Re.useState(""),[re,ee]=Re.useState(null),[ie,ae]=Re.useState([]),ue=Re.useCallback(async()=>{try{const he=await Kd.getCameras();ae(he);const G=he.find(pe=>pe.label.toLowerCase().includes("back")||pe.label.toLowerCase().includes("rear")||pe.label.toLowerCase().includes("environment"));return ee(G?.id||he[0]?.id),he}catch(he){return console.error("Error getting cameras:",he),T("Unable to access camera. Please grant camera permissions."),[]}},[]),ce=Re.useCallback(async()=>{if(!(!v.current||N.current))try{T(null),I(!1);const he=ie.length>0?ie:await ue();if(he.length===0){T("No cameras found. Please connect a camera or use manual entry."),P(!0);return}const G=re||he[0]?.id,pe=new Kd("barcode-scanner-region");N.current=pe,await pe.start(G,{fps:15,qrbox:{width:300,height:120},aspectRatio:1.777,formatsToSupport:[0,1,2,3,4,5,6,7,8,9,10,11]},de=>{navigator.vibrate&&navigator.vibrate(100),oe(),p(de)},de=>{}),I(!0)}catch(he){console.error("Scanner start error:",he),T(he.message||"Failed to start camera. Please try manual entry."),P(!0)}},[re,ie,ue,p]),oe=Re.useCallback(async()=>{if(N.current){try{await N.current.stop(),N.current.clear()}catch(he){console.error("Error stopping scanner:",he)}N.current=null}I(!1)},[]),xe=Re.useCallback(()=>{j.trim()&&(oe(),p(j.trim()),se(""),P(!1))},[j,p,oe]),Ee=Re.useCallback(async()=>{if(ie.length<=1)return;const G=(ie.findIndex(de=>de.id===re)+1)%ie.length,pe=ie[G].id;await oe(),ee(pe)},[ie,re,oe]);return Re.useEffect(()=>(f?ce():(oe(),P(!1),se(""),T(null)),()=>{oe()}),[f]),Re.useEffect(()=>{f&&re&&!A&&ce()},[re]),f?l.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-900/90",children:[l.jsx("button",{onClick:x,className:"p-2 rounded-full bg-dark-800/80 hover:bg-dark-700",children:l.jsx(Zl,{className:"w-6 h-6 text-white"})}),l.jsx("span",{className:"text-white font-medium",children:"Scan Barcode"}),l.jsx("div",{className:"flex gap-2",children:ie.length>1&&l.jsx("button",{onClick:Ee,className:"p-2 rounded-full bg-dark-800/80 hover:bg-dark-700",children:l.jsx(u0,{className:"w-6 h-6 text-white"})})})]}),l.jsxs("div",{className:"flex-1 relative flex items-center justify-center bg-black",children:[l.jsx("div",{id:"barcode-scanner-region",ref:v,className:"w-full h-full",style:{minHeight:"300px"}}),w&&l.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:l.jsxs("div",{className:"relative w-72 h-40 border-2 border-accent-primary/50 rounded-lg",children:[l.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-l-4 border-t-4 border-accent-primary rounded-tl-lg"}),l.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-r-4 border-t-4 border-accent-primary rounded-tr-lg"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-l-4 border-b-4 border-accent-primary rounded-bl-lg"}),l.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-r-4 border-b-4 border-accent-primary rounded-br-lg"})]})})]}),l.jsx("div",{className:"p-6 bg-dark-900",children:A?l.jsxs("div",{className:"text-center",children:[M&&l.jsx("p",{className:"text-amber-400 text-sm mb-3",children:M}),l.jsx("div",{className:"flex gap-2 mb-3",children:l.jsx("input",{type:"text",value:j,onChange:he=>se(he.target.value),onKeyDown:he=>he.key==="Enter"&&xe(),placeholder:"Enter barcode number",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 text-center text-lg tracking-wider",autoFocus:!0,inputMode:"numeric",pattern:"[0-9]*"})}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:()=>{P(!1),se(""),T(null),ce()},className:"flex-1 px-4 py-3 bg-dark-700 text-white rounded-lg font-medium",children:"Back to Camera"}),l.jsx("button",{onClick:xe,disabled:!j.trim(),className:"flex-1 px-4 py-3 bg-accent-primary text-white rounded-lg font-medium disabled:opacity-50",children:"Search"})]})]}):M?l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-red-400 mb-4",children:M}),l.jsxs("div",{className:"flex gap-2 justify-center",children:[l.jsx("button",{onClick:()=>{T(null),ce()},className:"px-6 py-3 bg-accent-primary text-white rounded-lg font-medium",children:"Try Again"}),l.jsxs("button",{onClick:()=>P(!0),className:"px-6 py-3 bg-dark-700 text-white rounded-lg font-medium flex items-center gap-2",children:[l.jsx(Pd,{className:"w-4 h-4"}),"Enter Manually"]})]})]}):l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-white text-lg mb-2",children:w?"Position barcode within frame":"Starting camera..."}),l.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Works with UPC, EAN, QR codes, and most product barcodes"}),l.jsxs("button",{onClick:()=>P(!0),className:"text-accent-primary text-sm flex items-center gap-1 mx-auto",children:[l.jsx(Pd,{className:"w-4 h-4"}),"Enter barcode manually"]})]})})]}):null}const Eh=(f,p,x,v)=>{const N=10*f+6.25*p-5*x;return v==="male"?N+5:N-161};function Ah(f){const{trainingHistory:p,yearsTraining:x,currentTrainingDays:v}=f;let N=0;p==="consistent"?N+=40:p==="some"?N+=20:N+=5;const w=parseFloat(x)||0;N+=Math.min(w*3.5,35);const I=parseInt(v)||0;return N+=Math.min(I*4,25),N>=86?{level:"elite",score:N,multiplier:1.4}:N>=61?{level:"advanced",score:N,multiplier:1.2}:N>=31?{level:"intermediate",score:N,multiplier:1}:{level:"beginner",score:N,multiplier:.8}}function Sh(f){const{raceDate:p,aestheticGoalDate:x,targetDate:v,strengthGoalDate:N,programType:w,programSubtype:I}=f;let M=null;if(p?M=new Date(p):x?M=new Date(x):N?M=new Date(N):v&&(M=new Date(v)),M){const j=Math.ceil((M-new Date)/(1e3*60*60*24*7));return j>52?{totalWeeks:52,weeksUntilGoal:j}:j<4?{totalWeeks:4,weeksUntilGoal:j}:{totalWeeks:j,weeksUntilGoal:j}}return{totalWeeks:{endurance:{marathon:16,triathlon:20,running:12,cycling:12,swimming:12},strength:{powerlifting:12,olympic:16,strongman:12},aesthetic:{hypertrophy:12,"lean-muscle":16,recomp:16},fatloss:{aggressive:8,moderate:12,slow:16}}[w]?.[I]||12,weeksUntilGoal:null}}function kh(f,p,x){const v=[],w=p==="endurance"&&["running","marathon","triathlon","cycling"].includes(x)?Math.min(3,Math.floor(f*.1)+1):0,I=f-w,M=5;let T=0;for(;T<I;){const A=Math.floor(T/M);if(T%M===4)v.push("Deload");else{const j=Math.ceil(I/M);A===0?v.push("Base"):A>=j-1&&T>=I-4?v.push("Peak"):v.push("Build")}T++}for(let A=0;A<w;A++)v.push("Taper");return v}const Qd={"5k":{factor:1,miles:3.1},"10k":{factor:2.09,miles:6.2},half:{factor:4.65,miles:13.1},full:{factor:9.8,miles:26.2},ultra:{factor:22,miles:50}};function p0(f){if(!f)return 0;const p=f.split(":").map(Number);return p.length===3?p[0]*60+p[1]+p[2]/60:p.length===2?p[0]+p[1]/60:0}function Ih(f,p,x){const v=Qd[p]?.miles||6.2,N=Qd[x]?.miles||26.2,w=p0(f);return w<=0?null:w*Math.pow(N/v,1.06)/N}function Th(f,p,x=null,v=null){const w={"5k":3.1,"10k":6.2,half:13.1,full:26.2,ultra:50}[p]||26.2;let I=null,M=null;x&&v&&(M=Ih(x,v,p));const T=p0(f);T>0&&(I=T/w);const A=M||I;return A?{goalPace:nr(I||A),currentPace:M?nr(M):null,easyPace:nr(A+1.5)+" - "+nr(A+2),tempoPace:nr(A+.25)+" - "+nr(A+.5),intervalPace:nr(A-.5)+" - "+nr(A-.25),longRunPace:nr(A+1)+" - "+nr(A+1.5),recoveryPace:nr(A+2)+" - "+nr(A+2.5)}:{goalPace:"8:00/mi",currentPace:null,easyPace:"9:30-10:00/mi",tempoPace:"7:00-7:30/mi",intervalPace:"6:30-7:00/mi",longRunPace:"8:30-9:00/mi",recoveryPace:"10:00-10:30/mi"}}function nr(f){const p=Math.floor(f),x=Math.round((f-p)*60);return`${p}:${x.toString().padStart(2,"0")}/mi`}function Rh(f,p,x){const{level:v}=x,N={"5k":{min:25,max:40},"10k":{min:30,max:50},half:{min:35,max:55},full:{min:40,max:70},ultra:{min:50,max:80}},w=N[f]||N.full;let I=(w.min+w.max)/2;if(p){const M=parseFloat(p)||9;M<7?I=w.max:M<8?I=w.max*.9:M<9?I=(w.min+w.max)/2:I=w.min*1.1}return v==="elite"?I*=1.1:v==="advanced"?I*=1:v==="intermediate"?I*=.9:I*=.8,Math.round(I)}function _h(f,p,x,v,N=null,w=null,I=null){let T=N;(!T||T<=0)&&(T=Math.round(p*.5)),T=Math.min(T,Math.round(p*.8));const P={"5k":10,"10k":15,half:20,full:25,ultra:30}[w]||15;if(T=Math.max(T,P),v==="Taper"){const re=x===f?.4:x===f-1?.5:.75;return Math.round(p*re)}if(v==="Deload"){const re=Math.min(T*Math.pow(1.1,x-1),p);return Math.round(re*.65)}const j=x;let se=T*Math.pow(1+.1,j-1);return se=Math.min(se,p),Math.round(se)}function jh(f,p,x){const v=parseFloat(f)||10,{level:N}=x;return Math.min(v,N==="elite"?22:N==="advanced"?20:18)}const Jd={2:{strength:[{name:"Full Body A",focus:["legs","chest","back"]},{name:"Full Body B",focus:["legs","shoulders","back"]}],aesthetic:[{name:"Upper Body",focus:["chest","back","shoulders","arms"]},{name:"Lower Body",focus:["legs","glutes","core"]}]},3:{strength:[{name:"Squat Day",focus:["legs","core"]},{name:"Bench Day",focus:["chest","shoulders","triceps"]},{name:"Deadlift Day",focus:["posterior","back","biceps"]}],aesthetic:[{name:"Push",focus:["chest","shoulders","triceps"]},{name:"Pull",focus:["back","biceps","rear-delts"]},{name:"Legs",focus:["legs","glutes","core"]}]},4:{strength:[{name:"Heavy Squat",focus:["legs","core"]},{name:"Heavy Bench",focus:["chest","shoulders","triceps"]},{name:"Heavy Deadlift",focus:["posterior","back"]},{name:"Volume Upper",focus:["shoulders","chest","arms"]}],aesthetic:[{name:"Upper Push",focus:["chest","shoulders","triceps"]},{name:"Lower",focus:["legs","glutes"]},{name:"Upper Pull",focus:["back","biceps","rear-delts"]},{name:"Arms + Shoulders",focus:["shoulders","biceps","triceps"]}]},5:{strength:[{name:"Competition Squat",focus:["legs"]},{name:"Competition Bench",focus:["chest","triceps"]},{name:"Competition Deadlift",focus:["posterior","back"]},{name:"Volume Squat",focus:["legs","core"]},{name:"Volume Bench",focus:["shoulders","chest","arms"]}],aesthetic:[{name:"Chest + Triceps",focus:["chest","triceps"]},{name:"Back + Biceps",focus:["back","biceps"]},{name:"Shoulders + Rear Delts",focus:["shoulders","rear-delts"]},{name:"Legs",focus:["legs","glutes"]},{name:"Arms + Weak Points",focus:["biceps","triceps","core"]}]},6:{strength:[{name:"Heavy Squat",focus:["legs"]},{name:"Heavy Bench",focus:["chest","triceps"]},{name:"Heavy Deadlift",focus:["posterior","back"]},{name:"Speed Squat",focus:["legs","core"]},{name:"Speed Bench",focus:["chest","shoulders"]},{name:"Back + Arms",focus:["back","biceps","triceps"]}],aesthetic:[{name:"Push A (Heavy)",focus:["chest","shoulders","triceps"]},{name:"Pull A (Heavy)",focus:["back","biceps"]},{name:"Legs A (Quad Focus)",focus:["legs","glutes"]},{name:"Push B (Volume)",focus:["chest","shoulders","triceps"]},{name:"Pull B (Volume)",focus:["back","rear-delts","biceps"]},{name:"Legs B (Posterior)",focus:["legs","core"]}]}},Mi={running:{2:["Easy Run","Long Run"],3:["Easy Run","Tempo Run","Long Run"],4:["Easy Run","Tempo Run","Intervals","Long Run"],5:["Easy Run","Tempo Run","Recovery Run","Intervals","Long Run"],6:["Easy Run","Tempo Run","Easy Run","Intervals","Recovery Run","Long Run"]},triathlon:{5:["Swim + Strength","Bike Intervals + Strength","Run + Strength","Swim + Run","Long Brick"],6:["Swim + Strength","Bike Intervals","Run + Strength","Swim + Easy Ride","Run Tempo + Strength","Long Brick"],7:["Swim + Strength","Bike Intervals","Run + Strength","Swim AM / Run PM","Bike + Strength","Run Tempo","Long Brick"]}};function Ia(f,p,x,v,N="full"){const w=[],{multiplier:I,level:M}=x,T=p?.6:1,A=[{name:"Single-Leg Romanian Deadlift",sets:Math.round(3*T),reps:"8-10 each leg",rpe:6,rest:"60s",notes:"Focus on hip stability, not weight. Light dumbbells only.",progression:"Master balance before adding weight. This is injury prevention."},{name:"Bulgarian Split Squat",sets:Math.round(3*T),reps:"10-12 each leg",rpe:6,rest:"60s",notes:"Control descent, drive through front heel. Build single-leg strength.",progression:"Add 5lbs every 2-3 weeks when form is solid."},{name:"Lateral Band Walks",sets:3,reps:"15 each direction",rpe:5,rest:"30s",notes:"Keep tension on band throughout. Glute med activation.",progression:"Use heavier band as it becomes easy."},{name:"Clamshells",sets:3,reps:"15-20 each side",rpe:5,rest:"30s",notes:"External hip rotation. Critical for knee health in running.",progression:"Add resistance band when bodyweight is easy."}],P=[{name:"Dead Bug",sets:3,reps:"10 each side",rpe:5,rest:"45s",notes:"Keep lower back pressed to floor. Anti-extension strength.",progression:"Slow the movement, add holds at end range."},{name:"Pallof Press",sets:3,reps:"10 each side",rpe:6,rest:"45s",notes:"Anti-rotation core work. Essential for swim and run.",progression:"Increase cable weight or add iso holds."},{name:"Side Plank",sets:2,reps:"30-45s each side",rpe:6,rest:"30s",notes:"Hip elevated, straight line from head to feet.",progression:"Add hip dips or raise top leg."},{name:"Bird Dog",sets:3,reps:"8 each side with 3s hold",rpe:5,rest:"45s",notes:"Opposite arm/leg extension with neutral spine.",progression:"Add resistance band around foot."}],j=[{name:"Band Pull-Aparts",sets:3,reps:"15-20",rpe:5,rest:"30s",notes:"Squeeze shoulder blades together. Rotator cuff health.",progression:"Essential for swim shoulder health - never skip."},{name:"External Rotation (Cable/Band)",sets:2,reps:"15 each arm",rpe:5,rest:"30s",notes:"Elbow pinned to side, rotate out. Swim-specific prehab.",progression:"Keep light - this is prehab, not strength training."},{name:"Face Pulls",sets:3,reps:"15",rpe:5,rest:"30s",notes:"Pull to face, external rotate at end. Rear delt & rotator cuff.",progression:"Keep light - focus on squeeze at end range."}];switch(N){case"hip":w.push(...A),w.push(P[0]);break;case"core":w.push(...P),w.push(A[2]);break;case"prehab":w.push(...j),w.push(P[0]),w.push(A[2]);break;default:w.push(...A),w.push(...P.slice(0,3)),w.push(...j.slice(0,2)),(M==="advanced"||M==="elite")&&w.push(P[3]);break}return w}function Mh(f,p,x,v,N,w,I){const{level:M}=v;switch(p==="Taper"||p==="Peak"||p.includes("Build"),f){case"Swim + Run":return{name:"Swim / Run Double",duration:90,exercises:[{name:"Swim - Technique Focus",sets:1,reps:x?"1500m":"2000-2500m",pace:"CSS pace (threshold)",heartRateZone:"Zone 2-3",rpe:6,rest:"N/A",notes:"Focus on catch and pull technique. Include drill work.",progression:`Week ${w}: Build swim volume gradually.`},{name:"Run - Easy/Moderate",sets:1,reps:x?"30 min":"45-60 min",pace:N?.easyPace||"9:00-9:30/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy effort. Recovery between sessions.",progression:"Separate by 4-6 hours if possible."}]};case"Swim AM / Run PM":return{name:"AM Swim / PM Run",duration:105,exercises:[{name:"Morning Swim",sets:1,reps:M==="elite"?"3000-3500m":"2000-2500m",pace:"Mixed: warm up + main set + cool down",heartRateZone:"Zone 2-4",rpe:7,rest:"N/A",notes:"Main set at CSS pace. Include 4x100 at race pace.",progression:`Week ${w}: Focus on stroke efficiency.`},{name:"Evening Run",sets:1,reps:x?"40 min":"50-60 min",pace:N?.easyPace||"9:00/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy effort, focus on cadence and form.",progression:"Build run fitness off swim fatigue."}]};case"Bike Intervals":case"Bike":return{name:"Bike Intervals",duration:x?60:75,exercises:[{name:"Bike Interval Session",sets:x?3:M==="elite"?6:5,reps:"5 min @ FTP",pace:"FTP (Functional Threshold Power)",heartRateZone:"Zone 4",rpe:8,rest:"2 min easy spin",notes:"Maintain steady power throughout interval. Cadence 85-95.",progression:`Week ${w}: Add 1 interval every 2 weeks.`}]};case"Swim + Strength":return{name:"Swim + Injury Prevention",duration:75,exercises:[{name:"Technique Swim",sets:1,reps:"1500-2000m",pace:"Easy-moderate",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Drill-focused: catch-up drill, fingertip drag, 6-kick switch.",progression:"Quality over quantity on strength days."}],strengthSession:Ia(p,x,v)};case"Run Tempo":return{name:"Tempo Run",duration:60,exercises:[{name:"Warm-up",sets:1,reps:"1.5 miles",pace:N?.easyPace||"9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include strides at end of warm-up."},{name:"Tempo",sets:1,reps:x?"15 min":M==="elite"?"30 min":"20-25 min",pace:N?.tempoPace||"7:30/mi",heartRateZone:"Zone 3-4",rpe:7,rest:"N/A",notes:"Comfortably hard. Should be able to speak in short sentences.",progression:`Week ${w}: Extend tempo duration by 2-3 min/week.`},{name:"Cool-down",sets:1,reps:"1 mile",pace:N?.recoveryPace||"10:00/mi",heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog + stretching."}]};case"Long Bike/Run Brick":case"Long Brick":case"Long Ride + Run Brick":const T=M==="elite"?3:M==="advanced"?2.5:2,A=M==="elite"?6:M==="advanced"?5:4;return{name:"Long Brick Session",duration:T*60+45,exercises:[{name:"Long Ride",sets:1,reps:`${x?T-.5:T} hours`,pace:"Aerobic (Zone 2)",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Practice race nutrition: 60-90g carbs/hour. Last 20 min at race pace.",progression:`Week ${w}: Key session. Build bike endurance.`},{name:"Brick Run (off bike)",sets:1,reps:`${x?A-1:A} miles`,pace:"Start easy, settle into race pace",heartRateZone:"Zone 2-3",rpe:6,rest:"N/A",notes:"T2 practice. Quick transition, find your legs.",progression:"Critical for race-day leg turnover."}]};case"Swim + Easy Ride":return{name:"Swim + Easy Ride",duration:90,exercises:[{name:"Swim - Aerobic",sets:1,reps:"2000-2500m",pace:"Easy-moderate",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Continuous swim, focus on bilateral breathing."},{name:"Easy Spin",sets:1,reps:"45-60 min",pace:"Recovery",heartRateZone:"Zone 1-2",rpe:4,rest:"N/A",notes:"Active recovery. High cadence, low power."}]};case"Easy Run":return{name:"Easy Run",duration:45,exercises:[{name:"Easy Run",sets:1,reps:x?"30 min":"45 min",pace:N?.easyPace||"9:00-9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Truly easy. Recovery run.",progression:"Keep easy days easy."}]};case"Bike Intervals + Strength":return{name:"Bike Intervals + Strength",duration:90,exercises:[{name:"Bike Interval Session",sets:x?3:M==="elite"?6:5,reps:"5 min @ FTP",pace:"FTP (Functional Threshold Power)",heartRateZone:"Zone 4",rpe:8,rest:"2 min easy spin",notes:"Quality intervals. Maintain power throughout.",progression:`Week ${w}: Key bike session.`}],strengthSession:Ia(p,x,v,w,"core")};case"Run + Strength":return{name:"Run + Strength",duration:85,exercises:[{name:"Easy-Moderate Run",sets:1,reps:x?"35 min":"45-50 min",pace:N?.easyPace||"9:00/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Comfortable effort. Focus on form and cadence.",progression:`Week ${w}: Build aerobic base.`}],strengthSession:Ia(p,x,v,w,"hip")};case"Bike + Strength":return{name:"Bike + Strength",duration:80,exercises:[{name:"Easy Aerobic Ride",sets:1,reps:x?"45 min":"60 min",pace:"Aerobic (Zone 2)",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy spinning. Active recovery ride with strength after.",progression:"Keep intensity low to allow for PM strength."}],strengthSession:Ia(p,x,v,w,"full")};case"Run Tempo + Strength":return{name:"Run Tempo + Strength",duration:95,exercises:[{name:"Warm-up",sets:1,reps:"1 mile",pace:N?.easyPace||"9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Easy jog with strides."},{name:"Tempo",sets:1,reps:x?"12 min":M==="elite"?"25 min":"18-20 min",pace:N?.tempoPace||"7:30/mi",heartRateZone:"Zone 3-4",rpe:7,rest:"N/A",notes:"Comfortably hard. Shorter than standalone tempo to allow for strength.",progression:`Week ${w}: Quality over quantity.`},{name:"Cool-down",sets:1,reps:"0.5 miles",pace:N?.recoveryPace||"10:00/mi",heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog."}],strengthSession:Ia(p,x,v,w,"prehab")};default:return{name:f,duration:60,exercises:[{name:f,sets:1,reps:"60 min",rpe:6,rest:"N/A",notes:"Moderate effort."}]}}}function Sc(f){return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][f]}function Oh(f){const p={2:[0,3],3:[0,2,4],4:[0,1,3,4],5:[0,1,2,4,5],6:[0,1,2,3,4,5],7:[0,1,2,3,4,5,6]};return p[f]||p[4]}function y0(f,p,x,v,N,w=[]){const I=[],M=v?.level||"intermediate",T=v?.multiplier||1,P=(x?.5:p==="Build"?1.1:1)*T,j=x?5:M==="elite"?9:M==="advanced"?8.5:M==="intermediate"?8:7,se=Math.floor((N-1)/4),re=ae=>M==="elite"?ae.replace(/(\d+)-(\d+)/,(ue,ce,oe)=>`${Math.max(1,parseInt(ce)-2)}-${parseInt(oe)-2}`):M==="advanced"?ae.replace(/(\d+)-(\d+)/,(ue,ce,oe)=>`${Math.max(1,parseInt(ce)-1)}-${parseInt(oe)-1}`):ae,ee=ae=>{const ce={"Back Squat":"squat","Bench Press":"bench",Deadlift:"deadlift","Overhead Press":"ohp","Barbell Row":"row"}[ae];return w.find(oe=>oe.id===ce)},ie=(ae,ue,ce)=>{if(!ae)return null;const oe=parseFloat(ae),Ee=1/(1+.0333*(parseInt(ue.split("-")[1])||parseInt(ue))),he=(10-ce)*.03;return Math.round(oe*Ee*(1-he)/5)*5};if(f.includes("legs")||f.includes("Squat")){const ae=ee("Back Squat"),ue=re(p==="Peak"?"1-3":p==="Build"?"3-5":"5-8"),ce=ie(ae?.current,ue,j);I.push({name:"Back Squat",sets:Math.round(5*P),reps:ue,rpe:j,rest:M==="elite"?"4-5 min":"3-4 min",notes:M==="elite"?"Competition depth, pause at bottom":"Control descent, drive through heels",startingWeight:ce?`~${ce}lbs`:null,current1RM:ae?.current?`${ae.current}lbs`:null,target1RM:ae?.target?`${ae.target}lbs`:null,progression:ae?.current?`Week ${N}: Start ~${ce}lbs (${Math.round(ce/ae.current*100)}% of 1RM). Target: ${ae.target}lbs. Add 5lbs when all reps hit at RPE ${j}`:`Week ${N}: +${se*5}lbs from starting weight. Add 5lbs when all reps hit at RPE ${j}`}),(M==="advanced"||M==="elite")&&I.push({name:"Pause Squat",sets:Math.round(3*P),reps:"3-5",rpe:j-1,rest:"3-4 min",notes:"2-3 second pause in the hole",progression:"Accessory: increase when main squat increases"})}if(f.includes("chest")||f.includes("Bench")){const ae=ee("Bench Press"),ue=re(p==="Peak"?"1-3":p==="Build"?"3-5":"5-8"),ce=ie(ae?.current,ue,j);I.push({name:"Bench Press",sets:Math.round(5*P),reps:ue,rpe:j,rest:M==="elite"?"4-5 min":"3-4 min",notes:M==="elite"?"Competition pause, leg drive, tight arch":"Arch back, retract scapula",startingWeight:ce?`~${ce}lbs`:null,current1RM:ae?.current?`${ae.current}lbs`:null,target1RM:ae?.target?`${ae.target}lbs`:null,progression:ae?.current?`Week ${N}: Start ~${ce}lbs (${Math.round(ce/ae.current*100)}% of 1RM). Target: ${ae.target}lbs. Add 2.5lbs when all reps hit at RPE ${j}`:`Week ${N}: +${se*2.5}lbs from starting weight. Add 2.5lbs when all reps hit at RPE ${j}`}),(M==="advanced"||M==="elite")&&I.push({name:"Close-Grip Bench",sets:Math.round(4*P),reps:"4-6",rpe:j-1,rest:"3 min",notes:"Tricep focus, elbows tucked",progression:"Keep ~70% of competition bench"})}if(f.includes("posterior")||f.includes("Deadlift")){const ae=ee("Deadlift"),ue=re(p==="Peak"?"1-2":p==="Build"?"2-4":"4-6"),ce=ie(ae?.current,ue,j);I.push({name:"Deadlift",sets:Math.round(4*P),reps:ue,rpe:j,rest:M==="elite"?"5-6 min":"4-5 min",notes:M==="elite"?"Competition setup, maximal brace":"Brace core, hinge at hips",startingWeight:ce?`~${ce}lbs`:null,current1RM:ae?.current?`${ae.current}lbs`:null,target1RM:ae?.target?`${ae.target}lbs`:null,progression:ae?.current?`Week ${N}: Start ~${ce}lbs (${Math.round(ce/ae.current*100)}% of 1RM). Target: ${ae.target}lbs. Add 5-10lbs when all reps hit at RPE ${j}`:`Week ${N}: +${se*10}lbs from starting weight. Add 5-10lbs when all reps hit at RPE ${j}`}),(M==="advanced"||M==="elite")&&I.push({name:"Deficit Deadlift",sets:Math.round(3*P),reps:"3-5",rpe:j-1,rest:"4 min",notes:"2-3 inch deficit, focus on speed off floor",progression:"Keep at 80-85% of comp deadlift"})}return(f.includes("shoulders")||f.includes("OHP"))&&I.push({name:"Overhead Press",sets:Math.round(4*P),reps:re(p==="Peak"?"3-5":"5-8"),rpe:j,rest:"2-3 min",notes:"Squeeze glutes, press straight up",progression:`Week ${N}: +${se*2.5}lbs. Add 2.5lbs when all reps complete`}),f.includes("back")&&(I.push({name:"Barbell Row",sets:Math.round(4*P),reps:M==="elite"?"4-6":"6-8",rpe:j-1,rest:"2-3 min",notes:M==="elite"?"Explosive pull, controlled negative":"Pull to lower chest, squeeze at top",progression:"Add 5lbs every 2 weeks when form stays solid"}),I.push({name:"Weighted Pull-ups",sets:Math.round(4*P),reps:M==="elite"?"5-8":"6-10",rpe:j-1,rest:"2-3 min",notes:"Add weight as needed, full ROM",progression:"Add 2.5-5lbs when hitting top of rep range"})),f.includes("triceps")&&I.push({name:M==="elite"?"JM Press":"Tricep Pushdowns",sets:Math.round(3*P),reps:"8-12",rpe:7,rest:"90s",notes:M==="elite"?"Bench accessory, lockout strength":"Keep elbows pinned",progression:"Add reps first (812), then add 5lbs and reset to 8 reps"}),f.includes("biceps")&&I.push({name:"Barbell Curls",sets:Math.round(3*P),reps:"8-12",rpe:7,rest:"90s",notes:"Full range of motion, no swinging",progression:"Add reps first (812), then add 5lbs and reset to 8 reps"}),f.includes("core")&&I.push({name:"Hanging Leg Raises",sets:Math.round(3*P),reps:M==="elite"?"12-15":"10-12",rpe:7,rest:"60s",notes:"Control the movement, no swinging",progression:"Add weight (hold DB) when hitting 15 reps"}),I}function jc(f,p,x,v,N){const w=[],I=v?.level||"intermediate",M=v?.multiplier||1,A=(x?.5:p==="Build"?1.15:1)*M,P=x?5:I==="elite"?9:I==="advanced"?8.5:8,j=(N-1)%4+1,se=j-1;return f.includes("chest")&&(w.push({name:"Bench Press",sets:Math.round(4*A),reps:`${8+se}-${10+se}`,rpe:P,rest:"2-3 min",notes:"Focus on chest contraction",progression:`Week ${j}/4: Base reps. Add 5lbs at week 4 if all reps hit`}),w.push({name:"Incline Dumbbell Press",sets:Math.round(4*A),reps:`${8+se}-${12+se}`,rpe:P-1,rest:"90s",notes:"30-45 degree incline, control the negative",progression:"Progressive overload: reps  weight  reps"}),w.push({name:"Cable Chest Fly",sets:Math.round(3*A),reps:"12-15",rpe:7,rest:"60s",notes:"Squeeze hard at contraction",progression:"Isolation: focus on mind-muscle connection over weight"}),(I==="advanced"||I==="elite")&&w.push({name:"Weighted Dips",sets:Math.round(3*A),reps:"8-12",rpe:8,rest:"2 min",notes:"Lean forward for chest emphasis",progression:"Add 5lbs when hitting 12 reps"})),f.includes("back")&&(w.push({name:"Weighted Pull-ups",sets:Math.round(4*A),reps:`${6+Math.floor(se/2)}-${10+Math.floor(se/2)}`,rpe:P,rest:"2-3 min",notes:"Full stretch at bottom, chin over bar",progression:"Add 2.5lbs when hitting top of rep range consistently"}),w.push({name:"Barbell Row",sets:Math.round(4*A),reps:`${6+se}-${10+se}`,rpe:P-1,rest:"2 min",notes:"Squeeze lats at top",progression:"Add 5lbs when form stays solid at top reps"}),w.push({name:"Lat Pulldown",sets:Math.round(3*A),reps:"10-12",rpe:7,rest:"90s",notes:"Drive elbows down, chest up",progression:"Focus on stretch and contraction over weight"}),w.push({name:"Seated Cable Row",sets:Math.round(3*A),reps:"10-12",rpe:7,rest:"90s",notes:"Pull to lower chest, squeeze",progression:"Add weight when form is solid"})),f.includes("shoulders")&&(w.push({name:"Overhead Press",sets:Math.round(4*A),reps:I==="elite"?"5-8":"8-10",rpe:P,rest:"2-3 min",notes:"Strict form, no leg drive",progression:"Add 2.5lbs when all reps completed"}),w.push({name:"Lateral Raises",sets:Math.round(4*A),reps:"12-15",rpe:7,rest:"60s",notes:"Lead with elbows, control the negative",progression:"Add 1 rep per week, then increase weight"}),(I==="advanced"||I==="elite")&&w.push({name:"Cable Lateral Raises",sets:3,reps:"15-20",rpe:8,rest:"45s",notes:"Constant tension, squeeze at top",progression:"Drop sets on final set for extra stimulus"})),(f.includes("legs")||f.includes("glutes"))&&(w.push({name:"Back Squat",sets:Math.round(4*A),reps:I==="elite"?"5-8":"8-10",rpe:P,rest:"3 min",notes:"ATG depth if mobility allows",progression:"Add 5lbs when all reps completed at target RPE"}),w.push({name:"Romanian Deadlift",sets:Math.round(4*A),reps:"8-12",rpe:P-1,rest:"2 min",notes:"Feel the hamstring stretch",progression:"Add 5lbs when form is solid at 12 reps"}),w.push({name:"Leg Press",sets:Math.round(3*A),reps:"10-15",rpe:8,rest:"2 min",notes:"Full range of motion",progression:"Volume work: push the reps before weight"}),w.push({name:"Leg Curls",sets:Math.round(3*A),reps:"12-15",rpe:7,rest:"60s",notes:"Squeeze at top, slow negative",progression:"Focus on contraction quality"}),w.push({name:"Standing Calf Raises",sets:Math.round(4*A),reps:"12-15",rpe:8,rest:"60s",notes:"Full stretch at bottom, pause at top",progression:"Calves respond to frequency - hit 3x/week if lagging"})),f.includes("biceps")&&(w.push({name:"Barbell Curls",sets:Math.round(3*A),reps:"8-12",rpe:8,rest:"90s",notes:"No swinging, squeeze at top",progression:"Add reps first, then weight"}),w.push({name:"Hammer Curls",sets:Math.round(3*A),reps:"10-12",rpe:7,rest:"60s",notes:"Control throughout",progression:"Brachialis focus - great for arm thickness"})),f.includes("triceps")&&(w.push({name:"Tricep Pushdowns",sets:Math.round(3*A),reps:"10-12",rpe:8,rest:"90s",notes:"Lock out at bottom",progression:"Add weight when 12 reps is easy"}),w.push({name:"Overhead Tricep Extension",sets:Math.round(3*A),reps:"12-15",rpe:7,rest:"60s",notes:"Feel the stretch at bottom",progression:"Long head focus - crucial for tricep size"})),f.includes("rear-delts")&&w.push({name:"Face Pulls",sets:Math.round(4*A),reps:"15-20",rpe:7,rest:"60s",notes:"External rotation at top",progression:"Health exercise: keep light, focus on form"}),f.includes("core")&&w.push({name:"Hanging Leg Raises",sets:3,reps:"12-15",rpe:8,rest:"60s",notes:"Control the movement",progression:"Add weight (hold DB) when hitting 15 reps"}),w}function w0(f,p,x,v,N,w,I,M,T=null,A=null){const{multiplier:P,level:j}=N,re=(w?.goalPace||"").match(/(\d+):(\d+)/),ee=re?parseFloat(re[1])+parseFloat(re[2])/60:null,ie=Rh(A,ee,N),ae=v?Math.round(v*1.15):ie,ue=Math.max(ie,ae),ce=_h(M,ue,I,p,v,A,N),oe=jh(T,I,N),xe=p==="Taper"?.6:p==="Peak"?1.1:p.includes("Build")?1:.85;switch(f){case"Easy Run":{const Ee=Math.round(ce*.2*xe*10)/10;return{name:"Easy Run",duration:Math.round(Ee*10),exercises:[{name:"Easy Run",sets:1,reps:`${Ee} miles`,pace:w.easyPace,heartRateZone:"Zone 2 (65-75% max HR)",rpe:4,rest:"N/A",notes:"Should be able to hold a conversation. If breathing hard, slow down.",progression:`Week ${I}: ${Ee} mi. Max 5% increase per week.`}]}}case"Tempo Run":{const he=Math.round(ce*.15*xe*10)/10,G=1;return{name:"Tempo Run",duration:Math.round((1.5+he+G)*9),exercises:[{name:"Warm-up",sets:1,reps:`${1.5} miles`,pace:w.easyPace,heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include 4x100m strides at end"},{name:"Tempo",sets:1,reps:`${he} miles`,pace:w.tempoPace,heartRateZone:"Zone 3-4 (80-88% max HR)",rpe:7,rest:"N/A",notes:"Comfortably hard - can speak in short sentences only",progression:`Week ${I}: ${he} mi tempo. Lactate threshold training.`},{name:"Cool-down",sets:1,reps:`${G} miles`,pace:w.recoveryPace,heartRateZone:"Zone 1-2",rpe:3,rest:"N/A",notes:"Very easy, let HR come down"}]}}case"Intervals":{const Ee=j==="elite"?8:j==="advanced"?6:5,he=j==="elite"?"800m":"400m",G=x?Math.floor(Ee/2):p==="Peak"?Ee+2:Ee;return{name:"Interval Training",duration:55,exercises:[{name:"Warm-up",sets:1,reps:"1.5 miles",pace:w.easyPace,heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include dynamic stretches and 4x100m strides"},{name:`${he} Repeats`,sets:G,reps:he,pace:w.intervalPace,heartRateZone:"Zone 4-5 (88-95% max HR)",rpe:9,rest:j==="elite"?"2:00 jog":"1:30 jog",notes:`Consistent pace each rep. Target ${w.intervalPace}`,progression:`Week ${I}: ${G}x${he}. Add 1 rep every 2-3 weeks.`},{name:"Cool-down",sets:1,reps:"1 mile",pace:w.recoveryPace,heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog + static stretching"}]}}case"Long Run":{const Ee=Math.round(ce*.3*xe*10)/10,he=j==="elite"?22:j==="advanced"?20:18,G=Math.min(Ee,oe,he);return{name:"Long Run",duration:Math.round(G*9.5),exercises:[{name:"Long Run",sets:1,reps:`${G} miles`,pace:w.longRunPace,heartRateZone:"Zone 2 (start)  Zone 3 (finish)",rpe:6,rest:"N/A",notes:p==="Peak"?`Practice race nutrition. Last 3mi at ${w.goalPace} (goal pace)`:"Practice race nutrition. Keep even effort throughout.",progression:`Week ${I}: ${G} mi. Current cap: ${oe}mi (increases ~1mi/2wks). Peak: ${he}mi.`}]}}case"Recovery Run":return{name:"Recovery Run",duration:30,exercises:[{name:"Recovery Run",sets:1,reps:"3-4 miles",pace:w.recoveryPace,heartRateZone:"Zone 1 (60-65% max HR)",rpe:3,rest:"N/A",notes:"Truly easy. This should feel almost too slow. Promotes recovery.",progression:"Keep consistent - dont increase recovery run distance"}]};default:return{name:f,duration:45,exercises:[{name:f,sets:1,reps:"45 min",rpe:6,rest:"N/A",notes:"Moderate steady effort"}]}}}function Dh(f,p,x,v,N){const w=[],{multiplier:I,level:M}=v;w.push({name:M==="elite"?"EMOM Circuit":"HIIT Circuit",sets:x?2:Math.round(4*I),reps:M==="elite"?"45s work / 15s rest":"30s work / 30s rest",rpe:9,rest:"2 min between rounds",notes:M==="elite"?"Burpees, box jumps, KB swings, battle ropes":"Max effort during work intervals",progression:`Week ${N}: Add 1 round every 2 weeks`});const T=jc(f,p,x,v,N);return w.push(...T.slice(0,4)),x||w.push({name:M==="elite"?"Assault Bike":"Incline Walk",sets:1,reps:M==="elite"?"10 min intervals":"15-20 min",rpe:M==="elite"?8:5,rest:"N/A",notes:M==="elite"?"30s sprint / 30s recovery":"10-12% incline, 3.0-3.5 mph",progression:"Add 5 min per week or increase intensity"}),w}function $d(f){return["Tempo Run","Intervals","Long Run","Interval Training"].includes(f)}function Ph(f,p,x,v,N,w,I,M,T,A,P,j,se,re,ee){const ie=[],ae=N[f]||N[4],ue=ae.map((ne,K)=>({runType:ne,isHard:$d(ne),isLongRun:ne==="Long Run",dayIndex:K})),ce=ue.findIndex(ne=>ne.isLongRun),oe=3,xe=[],Ee=[];ue.forEach((ne,K)=>{const Se=ce!==-1&&K===ce-1;v&&!ne.isHard&&!Se&&!ne.isLongRun&&xe.push(K)});const he={2:[0,3],3:[0,2,4],4:[0,1,3,4],5:[0,1,2,4,5],6:[0,1,2,3,4,5],7:[0,1,2,3,4,5,6]},G=he[f]||he[4],pe=[];for(let ne=0;ne<7;ne++){const K=ce!==-1&&G.indexOf(ne)===ce-1;!(G.indexOf(ne)!==-1&&G.indexOf(ne)<ae.length)&&!K&&pe.push(ne)}const de=xe.length,nt=Math.max(0,oe-de);for(let ne=0;ne<nt&&ne<pe.length;ne++)Ee.push(pe[ne]);xe.length+Ee.length<oe&&v&&ue.forEach((ne,K)=>{xe.length+Ee.length>=oe||!xe.includes(K)&&!ne.isLongRun&&xe.push(K)});for(let ne=0;ne<7;ne++){const K=G.indexOf(ne),Se=K!==-1,B=Sc(ne);if(!Se){ie.push({day:ne+1,dayName:B,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const me=[],q=K<ae.length?ae[K]:null;if(q){const le=w0(q,M,T,j,I,w,A,P,se,ee);me.push({time:"AM",type:"endurance",focus:q,duration:le.duration,exercises:le.exercises});const X=$d(q),z=ce!==-1&&K===ce-1;if(v&&!X&&!z&&x==="strength"){const D=K%2===0?["chest","shoulders","triceps"]:["back","biceps","core"],W=jc(D,M,!0,I,A).slice(0,4);me.push({time:"PM",type:"strength",focus:"Supplemental Strength",duration:35,exercises:W,notes:"Keep intensity moderate - recovery is priority"})}}else if(Ee.includes(ne)){const X=y0(["legs","core","posterior"],M,T,I,A,re);me.push({time:"ANY",type:"strength",focus:"Full Body Strength",duration:I.level==="elite"?75:60,exercises:X,notes:"Primary strength day - can push intensity"})}ie.push({day:ne+1,dayName:B,name:me.map(le=>le.focus).join(" / ")||"Active Recovery",isRestDay:me.length===0,isDeload:T,sessions:me})}return ie}function Bh(f){f||(console.error("generateProgram called with no formData"),f={});let{programType:p="strength",programSubtype:x="powerlifting",desiredTrainingDays:v=4,enableHybrid:N=!1,secondaryProgramType:w="",allowDoubleDays:I=!1,currentWeeklyMileage:M=0,longestRecentRun:T=0,vacations:A=[],targetFinishHours:P="",targetFinishMinutes:j="",targetFinishSeconds:se="",raceDistance:re="",baselineRaceDistance:ee="",baselineTimeHours:ie="",baselineTimeMinutes:ae="",baselineTimeSeconds:ue="",strengthGoals:ce=[],programStartDate:oe=""}=f;v=parseInt(v)||4,v<2&&(v=2),v>7&&(v=7);const xe=x==="triathlon";xe&&(N=!0,w="strength",I=!0,v<5&&(v=5));const Ee=Ah(f),{totalWeeks:he,weeksUntilGoal:G}=Sh(f),pe=kh(he,p,x),de=Oh(v),nt=[P,j,se].filter(Boolean).join(":"),Xe=[ie,ae,ue].filter(Boolean).join(":"),ne=Th(nt,re,Xe,ee),K=parseFloat(M)||null,Se=parseFloat(T)||null;let B="aesthetic";p==="strength"&&(B="strength");const me=Jd[Math.min(v,6)]?.[B]||Jd[4][B],q=pe[0]||"Base",le=1,X=q==="Deload"||q==="Taper";let z=[];if(xe){const W=Mi.triathlon[v]||Mi.triathlon[5],ke={4:[0,2,4,5],5:[0,1,3,4,5],6:[0,1,2,4,5,6],7:[0,1,2,3,4,5,6]},_e=ke[v]||ke[5];for(let ye=0;ye<7;ye++){const fe=_e.indexOf(ye),Pe=fe!==-1,je=Sc(ye);if(!Pe){z.push({day:ye+1,dayName:je,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const Me=W[fe]||"Easy Run",Be=Mh(Me,q,X,Ee,ne,le),Qe=[];if(Me.includes("Strength")){const sr=Be.strengthSession||[],at=Me.toLowerCase().includes("swim"),Gn=Me.toLowerCase().includes("bike");Me.toLowerCase().includes("run")||Me.toLowerCase().includes("tempo");const vn=Be.exercises.filter(Rn=>!Rn.name.toLowerCase().includes("strength")&&!Rn.name.toLowerCase().includes("prevention"));if(vn.length>0){const Rn=at?"swim":Gn?"bike":"run",Dt=at?"Technique Swim":Me.includes("Intervals")?"Bike Intervals":Me.includes("Tempo")?"Tempo Run":Gn?"Easy Bike":"Easy-Moderate Run";Qe.push({time:"AM",type:Rn,focus:Dt,duration:Math.round(Be.duration*.55),exercises:vn})}if(sr.length>0){const Rn=Me.includes("Swim")?"Full Injury Prevention":Me.includes("Run + Strength")?"Hip & Glute Stability":Me.includes("Bike + Strength")?"Core & Stability":Me.includes("Tempo")?"Prehab & Mobility":"Core & Stability";Qe.push({time:"PM",type:"strength",focus:Rn,duration:35,exercises:sr,notes:"Triathlon injury prevention: NOT hypertrophy. Focus on stability & resilience."})}}else Me.includes("/")||Me.includes("+")?Be.exercises.length>=2?(Qe.push({time:"AM",type:Be.exercises[0].name.toLowerCase().includes("swim")?"swim":Be.exercises[0].name.toLowerCase().includes("bike")?"bike":"run",focus:Be.exercises[0].name,duration:Math.round(Be.duration*.5),exercises:[Be.exercises[0]]}),Qe.push({time:"PM",type:Be.exercises[1].name.toLowerCase().includes("swim")?"swim":Be.exercises[1].name.toLowerCase().includes("bike")?"bike":"run",focus:Be.exercises[1].name,duration:Math.round(Be.duration*.5),exercises:[Be.exercises[1]]})):Qe.push({time:"ANY",type:"triathlon",focus:Me,duration:Be.duration,exercises:Be.exercises}):Me.includes("Brick")?Qe.push({time:"AM",type:"brick",focus:"Long Brick",duration:Be.duration,exercises:Be.exercises,notes:"Key session: practice race transitions"}):Qe.push({time:"ANY",type:Me.toLowerCase().includes("swim")?"swim":Me.toLowerCase().includes("bike")?"bike":"run",focus:Me,duration:Be.duration,exercises:Be.exercises});z.push({day:ye+1,dayName:je,name:Qe.map(sr=>sr.focus).join(" / "),isRestDay:!1,isDeload:X,sessions:Qe})}}else if(N&&p==="endurance"&&(w==="strength"||w==="aesthetic")){const W=x==="triathlon"?Mi.triathlon:Mi.running;z=Ph(v,p,w,I,W,ne,Ee,q,X,le,he,K,Se,ce,re)}else for(let W=0;W<7;W++){const ke=de.includes(W),_e=Sc(W);if(!ke){z.push({day:W+1,dayName:_e,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const ye=de.indexOf(W),fe=me.length>0?ye%me.length:0,Pe=me[fe]||{name:"Full Body",focus:["legs","chest","back"]},je=[];if(p==="endurance"){const Be=(x==="triathlon"?Mi.triathlon:Mi.running)[v]?.[ye]||"Easy Run",Qe=w0(Be,q,X,K,Ee,ne,le,he,Se,re);je.push({time:"AM",type:"endurance",focus:Be,duration:Qe.duration,exercises:Qe.exercises})}else if(p==="strength"){const Me=y0(Pe.focus,q,X,Ee,le,ce);je.push({time:"ANY",type:"strength",focus:Pe.name,duration:Ee?.level==="elite"?90:75,exercises:Me})}else if(p==="aesthetic"){const Me=jc(Pe.focus,q,X,Ee,le);je.push({time:"ANY",type:"hypertrophy",focus:Pe.name,duration:Ee?.level==="elite"?75:60,exercises:Me})}else if(p==="fatloss"){const Me=Dh(Pe.focus,q,X,Ee,le);je.push({time:"ANY",type:"metabolic",focus:Pe.name,duration:50,exercises:Me})}N&&w==="endurance"&&I&&je.push({time:"PM",type:"endurance",focus:"Easy Run",duration:30,exercises:[{name:"Easy Run",sets:1,reps:"30 min",pace:ne?.recoveryPace||"10:00-10:30/mi",heartRateZone:"Zone 1-2",rpe:4,rest:"N/A",notes:"Recovery pace only - prioritize strength recovery"}]}),z.push({day:W+1,dayName:_e,name:je.map(Me=>Me.focus).join(" / "),isRestDay:!1,isDeload:X,sessions:je})}return{name:Lh(p,x,Ee.level),description:`${Ee.level.charAt(0).toUpperCase()+Ee.level.slice(1)}-level ${p} program with ${he}-week periodization. Max 5% weekly volume increase.`,mesocycleWeeks:he,totalWeeks:he,currentWeek:1,currentPhase:pe[0],phases:pe,athleteLevel:Ee.level,athleteScore:Ee.score,primaryGoal:p,primarySubtype:x,secondaryGoal:w||null,secondarySubtype:f.secondarySubtype||null,isHybrid:N||!1,allowDoubleDays:I||!1,daysPerWeek:v,vacations:A,weeksUntilGoal:G,baseline:{endurance:p==="endurance"?{currentMileage:K,longestRecentRun:Se,referenceRace:ee?{distance:ee,time:Xe}:null}:null,strength:p==="strength"?{lifts:ce.filter(W=>W.current).map(W=>({exercise:W.label,current1RM:parseFloat(W.current),target1RM:parseFloat(W.target)}))}:null},paces:p==="endurance"?ne:null,generatedAt:new Date().toISOString(),startDate:oe||new Date().toISOString().split("T")[0],weeklySchedule:z,progressionRules:{strengthIncrease:Ee.level==="elite"?"Micro-load 1-2.5lbs when RPE allows. Prioritize technical consistency.":"Add 2.5-5lbs per week when all reps completed at target RPE.",volumeIncrease:"Add 1 set per exercise every 2-3 weeks during Build phase.",mileageIncrease:"Max 5% weekly mileage increase. Never more.",deloadProtocol:`Every ${Ee.level==="elite"?"3rd":"4th"} week: 50% volume, maintain intensity at RPE 6-7.`},dynamicAdjustments:{missedWorkouts:"Program will auto-adjust if workouts are missed.",nutritionTracking:"Calorie targets adjust based on progress.",goalTracking:"Weekly check-ins to ensure you stay on track."}}}function Lh(f,p,x){const v=x==="elite"?"Elite ":x==="advanced"?"Advanced ":"";return{endurance:{running:`${v}Running Program`,marathon:`${v}Marathon Prep`,cycling:`${v}Cycling Performance`,swimming:`${v}Swim Program`,triathlon:`${v}Triathlon Builder`},strength:{powerlifting:`${v}Powerlifting Protocol`,olympic:`${v}Olympic Lifting`,strongman:`${v}Strongman Training`},aesthetic:{hypertrophy:`${v}Hypertrophy Program`,"lean-muscle":`${v}Lean Gains`,recomp:`${v}Body Recomposition`},fatloss:{aggressive:`${v}Rapid Fat Loss`,moderate:`${v}Sustainable Shred`,slow:`${v}Gradual Cut`}}[f]?.[p]||`${v}${f.charAt(0).toUpperCase()+f.slice(1)} Program`}const Fh=[{id:"squat",label:"Back Squat"},{id:"bench",label:"Bench Press"},{id:"deadlift",label:"Deadlift"},{id:"ohp",label:"Overhead Press"},{id:"row",label:"Barbell Row"}];function Uh(){return new Date().toISOString().split("T")[0]}function Wh({strengthGoals:f,strengthGoalDate:p,onUpdateGoal:x,onUpdateDate:v}){const N=f&&f.length>0?f:Fh.map(w=>({id:w.id,label:w.label,current:"",target:""}));return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:" Strength Goals"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Enter your current and target weights for main lifts (in lbs)"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Goal Date"}),l.jsx("input",{type:"date",value:p||"",min:Uh(),onChange:w=>v(w.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"When do you want to hit these numbers? (Minimum 8-12 weeks recommended)"})]}),N.map(w=>l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[l.jsx("span",{className:"text-white font-medium block mb-2",children:w.label}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("input",{type:"number",value:w.current||"",onChange:I=>x(w.id,"current",I.target.value),placeholder:"Current 1RM",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Current"})]}),l.jsxs("div",{children:[l.jsx("input",{type:"number",value:w.target||"",onChange:I=>x(w.id,"target",I.target.value),placeholder:"Target 1RM",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Target"})]})]})]},w.id))]})}class zh extends Re.Component{constructor(p){super(p),this.state={hasError:!1,error:null}}static getDerivedStateFromError(p){return{hasError:!0,error:p}}componentDidCatch(p,x){console.error("Setup Wizard Error:",p),console.error("Error Info:",x),console.error("Component Stack:",x?.componentStack)}render(){return this.state.hasError?l.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center p-6",children:l.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 max-w-md text-center",children:[l.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Something went wrong"}),l.jsx("p",{className:"text-gray-400 mb-4",children:this.state.error?.message||"An unexpected error occurred"}),l.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"px-6 py-3 bg-accent-primary text-white rounded-lg font-medium",children:"Reload"})]})}):this.props.children}}const ks=()=>new Date().toISOString().split("T")[0],e0=[{id:1,title:"Personal Info",icon:f0},{id:2,title:"Body Stats",icon:d0},{id:3,title:"Primary Goal",icon:Br},{id:4,title:"Goal Details",icon:ni},{id:5,title:"Time Off",icon:F1},{id:6,title:"Generate",icon:h0}],Di=[{id:"endurance",title:"Endurance",description:"Cardiovascular training - running, cycling, swimming",icon:"",subtypes:[{id:"running",label:"Running (Race Training)"},{id:"cycling",label:"Cycling"},{id:"swimming",label:"Swimming"},{id:"triathlon",label:"Triathlon"}]},{id:"strength",title:"Strength",description:"Build maximal strength and power",icon:"",subtypes:[{id:"powerlifting",label:"Powerlifting"},{id:"olympic",label:"Olympic Lifting"},{id:"strongman",label:"Strongman"}]},{id:"aesthetic",title:"Aesthetic",description:"Physique focused - muscle building and body composition",icon:"",subtypes:[{id:"hypertrophy",label:"Hypertrophy/Bodybuilding"},{id:"lean-muscle",label:"Lean Muscle Building"},{id:"recomp",label:"Body Recomposition"}]}],Hh=[{id:"5k",label:"5K",miles:3.1},{id:"10k",label:"10K",miles:6.2},{id:"half",label:"Half Marathon",miles:13.1},{id:"full",label:"Full Marathon",miles:26.2},{id:"ultra",label:"Ultra Marathon",miles:null,requiresDistance:!0}],Gh=[{id:"5k",label:"5K"},{id:"10k",label:"10K"},{id:"half",label:"Half Marathon"},{id:"full",label:"Full Marathon"}],Vh=[{id:"sprint",label:"Sprint",description:"750m swim, 20km bike, 5km run"},{id:"olympic",label:"Olympic",description:"1.5km swim, 40km bike, 10km run"},{id:"half-iron",label:"Half Ironman (70.3)",description:"1.9km swim, 90km bike, 21.1km run"},{id:"full-iron",label:"Ironman",description:"3.8km swim, 180km bike, 42.2km run"}],t0=[{id:"squat",label:"Back Squat"},{id:"bench",label:"Bench Press"},{id:"deadlift",label:"Deadlift"},{id:"ohp",label:"Overhead Press"},{id:"row",label:"Barbell Row"}],Xh=()=>{const f={name:"Test User",age:30,sex:"male",weight:180,weightUnit:"lbs",heightFeet:5,heightInches:10,heightUnit:"imperial",programType:"endurance",programSubtype:"running",desiredTrainingDays:5,yearsTraining:3,trainingHistory:"consistent",raceDistance:"half",raceDate:new Date(Date.now()+7776e6).toISOString().split("T")[0],nutritionGoal:"maintain",weightKg:81.6,heightCm:177.8,bmr:1882,tdee:3200,macros:{calories:3200,protein:180,carbs:400,fat:100}},p={name:"Test Running Program",type:"endurance",subtype:"running",primaryGoal:"endurance",currentWeek:1,currentPhase:"Base",mesocycleWeeks:14,daysPerWeek:5,programStartDate:new Date().toISOString().split("T")[0],weeklySchedule:[{day:1,dayName:"Monday",name:"Easy Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Easy Run",duration:40,exercises:[{name:"Easy Run",sets:1,reps:"40 min",pace:"9:30-10:00/mi",rpe:5}]}]},{day:2,dayName:"Tuesday",name:"Intervals",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Intervals",duration:45,exercises:[{name:"Speed Work",sets:6,reps:"400m",pace:"7:30/mi",rpe:8}]}]},{day:3,dayName:"Wednesday",name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]},{day:4,dayName:"Thursday",name:"Tempo Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Tempo",duration:50,exercises:[{name:"Tempo Run",sets:1,reps:"4 mi",pace:"8:15/mi",rpe:7}]}]},{day:5,dayName:"Friday",name:"Easy Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Easy Run",duration:35,exercises:[{name:"Recovery Run",sets:1,reps:"30 min",pace:"10:00/mi",rpe:4}]}]},{day:6,dayName:"Saturday",name:"Long Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Long Run",duration:90,exercises:[{name:"Long Run",sets:1,reps:"10 mi",pace:"9:45/mi",rpe:6}]}]},{day:7,dayName:"Sunday",name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]}]};return{profile:f,program:p}};function Zh({onComplete:f}){const{user:p,signInWithGoogle:x,isAuthenticated:v,isConfigured:N}=o0(),[w,I]=Re.useState(1),[M,T]=Re.useState(!1),[A,P]=Re.useState(null),[j,se]=Re.useState(0),re=Re.useRef(null),[ee,ie]=Re.useState({name:"",age:"",sex:"male",weight:"",weightUnit:"lbs",heightFeet:"",heightInches:"",heightUnit:"imperial",heightCm:"",bodyFatPercent:"",currentTrainingDays:3,trainingHistory:"some",yearsTraining:1,programType:"",programSubtype:"",desiredTrainingDays:4,raceDistance:"",ultraDistance:"",triathlonDistance:"",targetFinishTime:"",targetFinishHours:"",targetFinishMinutes:"",targetFinishSeconds:"",raceDate:"",currentWeeklyMileage:"",currentPace:"",baselineRaceDistance:"",baselineTimeHours:"",baselineTimeMinutes:"",baselineTimeSeconds:"",longestRecentRun:"",strengthGoals:t0.map(K=>({id:K.id,label:K.label,current:"",target:""})),strengthGoalDate:"",currentBodyFat:"",targetBodyFat:"",aestheticGoalDate:"",targetWeight:"",targetDate:"",weeklyWeightChange:.5,enableHybrid:!1,secondaryProgramType:"",secondarySubtype:"",allowDoubleDays:!1,sessionDuration:60,equipment:"full",programStartDate:"",nutritionGoal:"maintain",vacations:[]}),ae=(K,Se)=>{ie(B=>({...B,[K]:Se}))},ue=(K,Se,B)=>{const q=(ee.strengthGoals||[]).map(le=>le.id===K?{...le,[Se]:B}:le);ae("strengthGoals",q)};Re.useEffect(()=>{p&&!ee.name&&ae("name",p.user_metadata?.full_name||p.email?.split("@")[0]||"")},[p]);const ce=()=>{w<6&&I(K=>K+1)},oe=()=>{w>1&&I(K=>K-1)},xe=()=>{const K={id:Date.now(),name:"",startDate:"",endDate:""};ae("vacations",[...ee.vacations,K])},Ee=(K,Se,B)=>{const me=ee.vacations.map(q=>q.id===K?{...q,[Se]:B}:q);ae("vacations",me)},he=K=>{ae("vacations",ee.vacations.filter(Se=>Se.id!==K))},G=()=>{if(ee.heightUnit==="metric")return parseFloat(ee.heightCm)||0;const K=parseFloat(ee.heightFeet)||0,Se=parseFloat(ee.heightInches)||0;return(K*12+Se)*2.54},pe=async()=>{T(!0);const K={...ee,programType:ee.programType||"strength",programSubtype:ee.programSubtype||"powerlifting",desiredTrainingDays:parseInt(ee.desiredTrainingDays)||4,strengthGoals:ee.strengthGoals||t0.map(W=>({id:W.id,label:W.label,current:"",target:""}))},Se=K.weightUnit==="lbs"?parseFloat(K.weight)*.453592:parseFloat(K.weight),B=G(),me=Eh(Se,B,parseInt(K.age),K.sex),q=Yh(K.desiredTrainingDays),le=Math.round(me*q),X=Kh(le,K,parseFloat(K.weight)),z={...K,weightKg:Se,heightCm:B,bmr:me,tdee:le,macros:X};let D=null;try{console.log("Calling API with profile:",K.programType,K.programSubtype);const W=await fetch("/api/generate-program",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:K,macros:X,bmr:me,tdee:le})});if(!W.ok){const ke=await W.text();throw console.error("API error response:",ke),new Error(`API error: ${W.status}`)}D=await W.json(),console.log("API returned program:",D?.name)}catch(W){console.error("Error calling API, using fallback:",W),D=n0(K)}(!D||typeof D!="object")&&(console.error("Invalid program after generation, creating minimal fallback"),D=n0(K)),D={...D,primaryGoal:D.primaryGoal||K.programType,primarySubtype:D.primarySubtype||K.programSubtype,daysPerWeek:D.daysPerWeek||K.desiredTrainingDays,weeklySchedule:D.weeklySchedule||[]};try{f({profile:z,program:D})}catch(W){console.error("Error in onComplete:",W),T(!1),alert("Error saving program. Please try again.")}},de=()=>{switch(w){case 1:return ee.name&&ee.age&&ee.sex;case 2:const K=ee.weight,Se=ee.heightUnit==="metric"?ee.heightCm:ee.heightFeet&&ee.heightInches;return K&&Se;case 3:return ee.programType&&ee.programSubtype&&ee.desiredTrainingDays;case 4:return nt();case 5:return!0;default:return!0}},nt=()=>{if(ee.programType==="endurance")return ee.programSubtype==="running"?ee.raceDistance&&ee.raceDate:ee.programSubtype==="triathlon"?ee.triathlonDistance&&ee.raceDate:!0;if(ee.programType==="strength"){const K=ee.strengthGoals||[];if(!K.some(X=>X.current&&X.target)||!ee.strengthGoalDate)return P(null),!1;const B=new Date,me=new Date(ee.strengthGoalDate),q=Math.max(1,Math.ceil((me-B)/(1e3*60*60*24*7))),le=[];if(K.forEach(X=>{if(X.current&&X.target){const z=parseFloat(X.current),W=parseFloat(X.target)-z,ke=W/q;ke>10&&le.push({lift:X.label,weeklyIncrease:ke.toFixed(1),totalIncrease:W,weeks:q})}}),le.length>0){const X=le.map(z=>`${z.lift}: ${z.totalIncrease}lbs in ${z.weeks} weeks = ${z.weeklyIncrease}lbs/week`).join(`
`);return P(`Your strength goals are not realistic. A maximum of ~10lbs/week 1RM increase is possible with optimal training.

${X}

Please extend your goal date or reduce your targets.`),!1}return P(null),!0}return ee.programType==="aesthetic"?ee.targetBodyFat:ee.programType==="fatloss"?ee.targetWeight:!0},Xe=K=>{K.preventDefault(),re.current&&clearTimeout(re.current);const Se=j+1;se(Se),Se>=5?(se(0),ne()):re.current=setTimeout(()=>se(0),3e3)},ne=Re.useCallback(()=>{if(window.confirm("Enter test mode? This will create a mock profile for testing.")){const K=Xh();f(K)}},[f]);return Re.useEffect(()=>{const K=Se=>{Se.ctrlKey&&Se.shiftKey&&Se.key==="T"&&(Se.preventDefault(),ne())};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[ne]),l.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col",children:[l.jsxs("header",{className:"px-6 pt-8 pb-4",children:[l.jsx("h1",{className:"font-display text-3xl font-bold tracking-tight gradient-text cursor-pointer select-none",onClick:Xe,onTouchEnd:Xe,children:"MOTUS"}),l.jsx("p",{className:"text-text-secondary text-sm mt-1",children:"Build your personalized program"}),j>=3&&l.jsxs("p",{className:"text-accent-primary text-xs mt-1 animate-pulse",children:[5-j," more taps for test mode..."]}),l.jsx("p",{className:"text-gray-600 text-xs mt-1 hidden sm:block",children:"Tip: Press Ctrl+Shift+T for test mode"})]}),l.jsx("div",{className:"px-6 py-4",children:l.jsx("div",{className:"flex items-center justify-between mb-2",children:e0.map((K,Se)=>l.jsxs(a0.Fragment,{children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:`
                    w-10 h-10 rounded-xl flex items-center justify-center
                    transition-all duration-300
                    ${w>=K.id?"bg-accent-primary text-dark-900":w===K.id-1?"bg-dark-700 text-text-secondary border border-dark-500":"bg-dark-800 text-dark-400"}
                  `,children:l.jsx(K.icon,{className:`w-5 h-5 ${w>=K.id?"stroke-[2.5]":""}`})}),l.jsx("span",{className:`text-xs mt-1.5 hidden sm:block font-medium ${w>=K.id?"text-accent-primary":"text-dark-400"}`,children:K.title})]}),Se<e0.length-1&&l.jsx("div",{className:`flex-1 h-0.5 mx-2 transition-all duration-300 rounded-full ${w>K.id?"bg-accent-primary":"bg-dark-700"}`})]},K.id))})}),l.jsxs("div",{className:"flex-1 px-6 py-6 overflow-y-auto",children:[w===1&&l.jsx(qh,{formData:ee,updateFormData:ae,user:p,signInWithGoogle:x,isAuthenticated:v,isConfigured:N}),w===2&&l.jsx(Qh,{formData:ee,updateFormData:ae}),w===3&&l.jsx(Jh,{formData:ee,updateFormData:ae}),w===4&&l.jsx($h,{formData:ee,updateFormData:ae,updateStrengthGoal:ue,strengthGoalError:A}),w===5&&l.jsx(ef,{formData:ee,addVacation:xe,updateVacation:Ee,removeVacation:he}),w===6&&l.jsx(tf,{formData:ee,isGenerating:M,onGenerate:pe})]}),l.jsxs("div",{className:"px-6 py-5 border-t border-dark-700 flex justify-between bg-dark-900/95 backdrop-blur-sm",children:[l.jsxs(Vt,{variant:"ghost",onClick:oe,disabled:w===1,className:"min-w-[100px]",children:[l.jsx(ja,{className:"w-5 h-5 mr-1"}),"Back"]}),w<6?l.jsxs(Vt,{onClick:ce,disabled:!de(),className:"min-w-[100px]",children:["Next",l.jsx(Bi,{className:"w-5 h-5 ml-1"})]}):null]})]})}function Yh(f){return f<=1?1.2:f<=2?1.375:f<=3?1.55:f<=5?1.725:1.9}function Kh(f,p,x){let v,N,w,I;switch(p.nutritionGoal){case"maintain":v=f,N=Math.round(x*.8);break;case"recomp":v=f,N=Math.round(x*1);break;case"lose":const A=p.weeklyWeightChange*500;v=Math.round(f-A),N=Math.round(x*1);break;case"gain":const P=p.weeklyWeightChange*500;v=Math.round(f+P),N=Math.round(x*.9);break;default:v=f,N=Math.round(x*.8)}const M=N*4,T=v-M;return I=Math.round(T*.35/9),w=Math.round(T*.65/4),{calories:v,protein:N,carbs:w,fat:I}}function qh({formData:f,updateFormData:p,user:x,signInWithGoogle:v,isAuthenticated:N,isConfigured:w}){const[I,M]=Re.useState(!1),[T,A]=Re.useState(null),P=async()=>{M(!0),A(null);try{const{error:j}=await v();j&&(console.error("Sign in error:",j),A(j.message||"Failed to sign in. Please try again."))}catch(j){console.error("Unexpected sign in error:",j),A("An unexpected error occurred. Please try again.")}M(!1)};return l.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Let's get to know you"}),l.jsx("p",{className:"text-gray-400",children:"Tell us about yourself to personalize your experience."})]}),w&&l.jsx("div",{className:"p-4 bg-dark-800 rounded-xl border border-dark-600",children:N?l.jsxs("div",{className:"flex items-center gap-3",children:[x?.user_metadata?.avatar_url&&l.jsx("img",{src:x.user_metadata.avatar_url,alt:"Profile",className:"w-10 h-10 rounded-full"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-white font-medium",children:x?.user_metadata?.full_name||x?.email}),l.jsxs("p",{className:"text-xs text-green-400 flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Signed in  Data syncs across devices"]})]})]}):l.jsxs("div",{children:[l.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Sign in to sync your data across all your devices"}),T&&l.jsxs("div",{className:"mb-3 p-3 bg-red-900/30 border border-red-700 rounded-lg",children:[l.jsx("p",{className:"text-sm text-red-400",children:T}),l.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Note: Google sign-in requires proper Supabase configuration. You can skip this and use the app offline."})]}),l.jsxs("button",{onClick:P,disabled:I,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white text-gray-800 font-medium rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),I?"Signing in...":"Continue with Google"]})]})}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Your Name"}),l.jsx("input",{type:"text",value:f.name,onChange:j=>p("name",j.target.value),placeholder:"Enter your name",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Age"}),l.jsx("input",{type:"number",value:f.age,onChange:j=>p("age",j.target.value),placeholder:"Enter your age",min:"16",max:"100",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Sex"}),l.jsx("div",{className:"flex gap-4",children:["male","female"].map(j=>l.jsx("button",{onClick:()=>p("sex",j),className:`flex-1 py-3 px-4 rounded-lg border transition-all ${f.sex===j?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400 hover:border-gray-400"}`,children:j.charAt(0).toUpperCase()+j.slice(1)},j))})]})]})]})}function Qh({formData:f,updateFormData:p}){return l.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Body Measurements"}),l.jsx("p",{className:"text-gray-400",children:"Help us understand your current fitness level."})]}),l.jsxs("div",{className:"space-y-5",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weight"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"number",value:f.weight,onChange:x=>p("weight",x.target.value),placeholder:"Enter weight",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"}),l.jsxs("select",{value:f.weightUnit,onChange:x=>p("weightUnit",x.target.value),className:"px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[l.jsx("option",{value:"lbs",children:"lbs"}),l.jsx("option",{value:"kg",children:"kg"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Height"}),l.jsxs("div",{className:"flex gap-2 mb-2",children:[l.jsx("button",{onClick:()=>p("heightUnit","imperial"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${f.heightUnit==="imperial"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"ft / in"}),l.jsx("button",{onClick:()=>p("heightUnit","metric"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${f.heightUnit==="metric"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"cm"})]}),f.heightUnit==="imperial"?l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"number",value:f.heightFeet,onChange:x=>p("heightFeet",x.target.value),placeholder:"Feet",min:"3",max:"8",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),l.jsx("input",{type:"number",value:f.heightInches,onChange:x=>p("heightInches",x.target.value),placeholder:"Inches",min:"0",max:"11",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}):l.jsx("input",{type:"number",value:f.heightCm,onChange:x=>p("heightCm",x.target.value),placeholder:"Height in cm",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Body Fat % ",l.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),l.jsx("input",{type:"number",value:f.bodyFatPercent,onChange:x=>p("bodyFatPercent",x.target.value),placeholder:"e.g., 20",min:"5",max:"50",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),l.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Training History"}),l.jsxs("div",{className:"mb-5",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["How many days per week have you been training? ",l.jsxs("span",{className:"text-accent-primary font-bold",children:[f.currentTrainingDays," days"]})]}),l.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Average over the last 30 days"}),l.jsx("input",{type:"range",min:"0",max:"7",step:"1",value:f.currentTrainingDays,onChange:x=>p("currentTrainingDays",parseInt(x.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),l.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[0,1,2,3,4,5,6,7].map(x=>l.jsx("span",{children:x},x))})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"How consistent has your training been?"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"none",label:"New to Training",desc:"Just starting out"},{id:"some",label:"Some Experience",desc:"On and off"},{id:"consistent",label:"Consistent",desc:"Regular routine"}].map(x=>l.jsxs("button",{onClick:()=>p("trainingHistory",x.id),className:`p-3 rounded-lg border text-center ${f.trainingHistory===x.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[l.jsx("span",{className:"text-white text-sm font-medium block",children:x.label}),l.jsx("span",{className:"text-xs text-gray-400",children:x.desc})]},x.id))})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Years of training experience: ",l.jsxs("span",{className:"text-accent-primary font-bold",children:[f.yearsTraining," ",f.yearsTraining===1?"year":"years"]})]}),l.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:f.yearsTraining,onChange:x=>p("yearsTraining",parseInt(x.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsx("span",{children:"New"}),l.jsx("span",{children:"5 yrs"}),l.jsx("span",{children:"10+ yrs"})]})]})]})]})]})}function Jh({formData:f,updateFormData:p}){const x=Di.find(v=>v.id===f.programType);return l.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"What's your primary goal?"}),l.jsx("p",{className:"text-gray-400",children:"Choose your main training focus."})]}),l.jsx("div",{className:"grid grid-cols-2 gap-4",children:Di.map(v=>l.jsxs("button",{onClick:()=>{p("programType",v.id),p("programSubtype",""),(v.id==="strength"||v.id==="aesthetic")&&(p("enableHybrid",!1),p("secondaryProgramType",""),p("secondarySubtype",""),p("allowDoubleDays",!1)),v.id==="aesthetic"&&p("nutritionGoal","recomp")},className:`p-4 rounded-xl border text-left transition-all ${f.programType===v.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500 hover:border-gray-400"}`,children:[l.jsx("span",{className:"text-3xl mb-2 block",children:v.icon}),l.jsx("h3",{className:"text-lg font-semibold text-white",children:v.title}),l.jsx("p",{className:"text-sm text-gray-400 mt-1",children:v.description})]},v.id))}),x&&l.jsxs("div",{className:"mt-6",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Select your specific focus:"}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:x.subtypes.map(v=>l.jsx("button",{onClick:()=>p("programSubtype",v.id),className:`px-4 py-3 rounded-lg border text-sm transition-all ${f.programSubtype===v.id?"bg-accent-secondary/20 border-accent-secondary text-white":"bg-dark-700 border-dark-500 text-gray-400 hover:border-gray-400"}`,children:v.label},v.id))})]}),f.programSubtype&&l.jsxs("div",{className:"mt-6 p-4 bg-dark-800 rounded-xl border border-dark-600",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["How many days per week do you want to workout? ",l.jsxs("span",{className:"text-accent-primary font-bold",children:[f.desiredTrainingDays," days"]})]}),l.jsx("input",{type:"range",min:"2",max:"7",step:"1",value:f.desiredTrainingDays,onChange:v=>p("desiredTrainingDays",parseInt(v.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),l.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[2,3,4,5,6,7].map(v=>l.jsx("span",{children:v},v))})]}),f.programSubtype==="triathlon"&&l.jsx("div",{className:"mt-6 p-4 bg-accent-primary/10 rounded-xl border border-accent-primary/30",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-2xl",children:""}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-accent-primary font-semibold mb-1",children:"Triathlon Program Includes:"}),l.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[l.jsx("li",{children:" Swim, Bike, Run periodization with brick workouts"}),l.jsx("li",{children:" Double & triple day sessions built in"}),l.jsx("li",{children:" Injury prevention strength work (not hypertrophy)"}),l.jsx("li",{children:" Race-specific taper and nutrition timing"})]}),l.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Based on professional triathlon training methodology. Minimum 5 training days recommended."})]})]})}),f.programSubtype&&f.programType==="endurance"&&f.programSubtype!=="triathlon"&&l.jsxs("div",{className:"mt-6 p-4 bg-dark-800 rounded-xl border border-dark-600",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-medium",children:"Enable Hybrid Training?"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Add a secondary goal to your program"})]}),l.jsx("button",{onClick:()=>p("enableHybrid",!f.enableHybrid),className:`w-14 h-8 rounded-full transition-all ${f.enableHybrid?"bg-accent-primary":"bg-dark-600"}`,children:l.jsx("div",{className:`w-6 h-6 rounded-full bg-white transition-all ${f.enableHybrid?"translate-x-7":"translate-x-1"}`})})]}),f.enableHybrid&&l.jsxs("div",{className:"space-y-4 pt-4 border-t border-dark-600",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Secondary Program Type"}),l.jsxs("select",{value:f.secondaryProgramType,onChange:v=>{p("secondaryProgramType",v.target.value),p("secondarySubtype","")},className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[l.jsx("option",{value:"",children:"Select..."}),Di.filter(v=>v.id!==f.programType).map(v=>l.jsxs("option",{value:v.id,children:[v.icon," ",v.title]},v.id))]})]}),f.secondaryProgramType&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Secondary Focus"}),l.jsxs("select",{value:f.secondarySubtype,onChange:v=>p("secondarySubtype",v.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[l.jsx("option",{value:"",children:"Select..."}),Di.find(v=>v.id===f.secondaryProgramType)?.subtypes?.filter(v=>v.id!=="triathlon")?.map(v=>l.jsx("option",{value:v.id,children:v.label},v.id))]})]}),l.jsxs("div",{className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg",children:[l.jsx("input",{type:"checkbox",id:"doubleDays",checked:f.allowDoubleDays,onChange:v=>p("allowDoubleDays",v.target.checked),className:"w-5 h-5 rounded border-dark-500 text-accent-primary focus:ring-accent-primary"}),l.jsxs("label",{htmlFor:"doubleDays",className:"text-sm text-gray-300",children:[l.jsx("span",{className:"font-medium text-white",children:"Allow double days"}),l.jsx("br",{}),l.jsx("span",{className:"text-gray-400",children:"AM: Primary goal  PM: Secondary goal"})]})]})]})]})]})}function $h({formData:f,updateFormData:p,updateStrengthGoal:x,strengthGoalError:v}){const N=f||{},w=N.programType||"",I=N.programSubtype||"";if(w==="strength")return l.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Goal Details"}),l.jsx("p",{className:"text-gray-400",children:"Help us tailor your program to your specific targets."})]}),l.jsx(Wh,{strengthGoals:N.strengthGoals,strengthGoalDate:N.strengthGoalDate,onUpdateGoal:x,onUpdateDate:T=>p("strengthGoalDate",T)}),v&&l.jsxs("div",{className:"mt-4 p-4 bg-red-900/20 border border-red-700 rounded-xl",children:[l.jsx("h4",{className:"text-red-400 font-semibold mb-2",children:"Unrealistic Goals Detected"}),l.jsx("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:v})]}),l.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Program Start Date"}),l.jsx("input",{type:"date",value:N.programStartDate||"",min:ks(),onChange:T=>p("programStartDate",T.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Leave blank to start today"})]}),l.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Nutrition Goal"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"maintain",label:"Maintain",desc:"Keep current weight"},{id:"recomp",label:"Recomp",desc:"Lose fat, keep muscle"},{id:"lose",label:"Lose Weight",desc:"Calorie deficit"},{id:"gain",label:"Gain Weight",desc:"Calorie surplus"}].map(T=>l.jsxs("button",{onClick:()=>p("nutritionGoal",T.id),className:`p-3 rounded-lg border text-left ${N.nutritionGoal===T.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[l.jsx("span",{className:"text-white font-medium",children:T.label}),l.jsx("p",{className:"text-xs text-gray-400",children:T.desc})]},T.id))})]})]});const M=()=>{if(w==="endurance")return I==="marathon"||I==="running"?l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:" Race Details"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Distance"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Hh.map(T=>l.jsx("button",{onClick:()=>p("raceDistance",T.id),className:`py-3 px-2 rounded-lg border text-sm ${f.raceDistance===T.id?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:T.label},T.id))}),f.raceDistance==="ultra"&&l.jsxs("div",{className:"mt-3",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ultra Distance (miles)"}),l.jsx("input",{type:"number",value:f.ultraDistance||"",onChange:T=>p("ultraDistance",T.target.value),placeholder:"e.g., 50, 100",min:"30",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Common distances: 50K (31mi), 50mi, 100K (62mi), 100mi"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Date"}),l.jsx("input",{type:"date",value:f.raceDate,min:ks(),onChange:T=>p("raceDate",T.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Finish Time"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsxs("div",{children:[l.jsx("input",{type:"number",value:f.targetFinishHours,onChange:T=>p("targetFinishHours",T.target.value),placeholder:"Hours",min:"0",max:"24",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),l.jsxs("div",{children:[l.jsx("input",{type:"number",value:f.targetFinishMinutes,onChange:T=>p("targetFinishMinutes",T.target.value),placeholder:"Min",min:"0",max:"59",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Minutes"})]}),l.jsxs("div",{children:[l.jsx("input",{type:"number",value:f.targetFinishSeconds,onChange:T=>p("targetFinishSeconds",T.target.value),placeholder:"Sec",min:"0",max:"59",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Seconds"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Weekly Mileage"}),l.jsx("input",{type:"number",value:f.currentWeeklyMileage,onChange:T=>p("currentWeeklyMileage",T.target.value),placeholder:"e.g., 20",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),l.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[l.jsx("h4",{className:"text-md font-semibold text-white mb-2",children:" Current Fitness Baseline"}),l.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Enter a recent race or time trial so we can calculate your training paces accurately."}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reference Race Distance"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:Gh.map(T=>l.jsx("button",{onClick:()=>p("baselineRaceDistance",T.id),className:`py-2 px-2 rounded-lg border text-sm ${f.baselineRaceDistance===T.id?"bg-accent-secondary border-accent-secondary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:T.label},T.id))})]}),f.baselineRaceDistance&&l.jsxs("div",{className:"mb-4",children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Your Best Recent ",f.baselineRaceDistance.toUpperCase()," Time"]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsxs("div",{children:[l.jsx("input",{type:"number",value:f.baselineTimeHours,onChange:T=>p("baselineTimeHours",T.target.value),placeholder:"Hr",min:"0",max:"10",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),l.jsxs("div",{children:[l.jsx("input",{type:"number",value:f.baselineTimeMinutes,onChange:T=>p("baselineTimeMinutes",T.target.value),placeholder:"Min",min:"0",max:"59",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Min"})]}),l.jsxs("div",{children:[l.jsx("input",{type:"number",value:f.baselineTimeSeconds,onChange:T=>p("baselineTimeSeconds",T.target.value),placeholder:"Sec",min:"0",max:"59",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Sec"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Longest Run in Past Month (miles)"}),l.jsx("input",{type:"number",value:f.longestRecentRun,onChange:T=>p("longestRecentRun",T.target.value),placeholder:"e.g., 10",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]})]})]}):I==="triathlon"?l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:" Triathlon Details"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Distance"}),l.jsx("div",{className:"space-y-2",children:Vh.map(T=>l.jsxs("button",{onClick:()=>p("triathlonDistance",T.id),className:`w-full p-3 rounded-lg border text-left ${f.triathlonDistance===T.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[l.jsx("span",{className:"text-white font-medium",children:T.label}),l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:T.description})]},T.id))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Date"}),l.jsx("input",{type:"date",value:f.raceDate,min:ks(),onChange:T=>p("raceDate",T.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Finish Time"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsxs("div",{children:[l.jsx("input",{type:"number",value:f.targetFinishHours,onChange:T=>p("targetFinishHours",T.target.value),placeholder:"Hours",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),l.jsxs("div",{children:[l.jsx("input",{type:"number",value:f.targetFinishMinutes,onChange:T=>p("targetFinishMinutes",T.target.value),placeholder:"Min",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Minutes"})]}),l.jsxs("div",{children:[l.jsx("input",{type:"number",value:f.targetFinishSeconds,onChange:T=>p("targetFinishSeconds",T.target.value),placeholder:"Sec",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),l.jsx("span",{className:"text-xs text-gray-500",children:"Seconds"})]})]})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:" Endurance Goals"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Set your performance targets"}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Event Date (Optional)"}),l.jsx("input",{type:"date",value:f.raceDate,min:ks(),onChange:T=>p("raceDate",T.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weekly Training Volume Goal"}),l.jsx("input",{type:"text",value:f.currentWeeklyMileage,onChange:T=>p("currentWeeklyMileage",T.target.value),placeholder:"e.g., 100 miles, 10 hours",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]})]});if(w==="aesthetic"){const T=parseFloat(f.bodyFatPercent)||0,A=parseFloat(f.targetBodyFat)||0,P=T-A;return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:" Physique Goals"}),l.jsx("p",{className:"text-sm text-gray-400",children:"Set your body composition targets"}),f.bodyFatPercent&&l.jsx("div",{className:"p-3 bg-dark-700/50 rounded-lg border border-dark-600",children:l.jsxs("p",{className:"text-sm text-gray-400",children:["Current Body Fat: ",l.jsxs("span",{className:"text-white font-medium",children:[f.bodyFatPercent,"%"]})]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Body Fat %"}),l.jsx("input",{type:"number",value:f.targetBodyFat,onChange:j=>p("targetBodyFat",j.target.value),placeholder:"e.g., 12",min:"5",max:"50",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: 10-15% for men, 18-24% for women for a lean physique"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Date (Optional)"}),l.jsx("input",{type:"date",value:f.aestheticGoalDate,min:ks(),onChange:j=>p("aestheticGoalDate",j.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),T>0&&A>0&&P>0&&l.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:l.jsxs("p",{className:"text-white",children:[" You're looking to reduce body fat by"," ",l.jsxs("span",{className:"text-accent-primary font-bold",children:[P.toFixed(1),"%"]})]})})]})}if(w==="fatloss"){const T=parseFloat(f.weight)||0,A=parseFloat(f.targetWeight)||T,P=T-A,j=P/f.weeklyWeightChange;return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h3",{className:"text-lg font-semibold text-white",children:" Fat Loss Goals"}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Target Weight (",f.weightUnit,")"]}),l.jsx("input",{type:"number",value:f.targetWeight,onChange:se=>p("targetWeight",se.target.value),placeholder:"Enter target weight",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Weekly Weight Loss Rate: ",f.weeklyWeightChange," lbs/week"]}),l.jsx("input",{type:"range",min:"0.25",max:"1",step:"0.25",value:f.weeklyWeightChange,onChange:se=>p("weeklyWeightChange",parseFloat(se.target.value)),className:"w-full"}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[l.jsx("span",{children:"Slow (0.25)"}),l.jsx("span",{children:"Moderate (0.5)"}),l.jsx("span",{children:"Aggressive (1.0)"})]})]}),P>0&&l.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:l.jsxs("p",{className:"text-white",children:[" At this rate, you'll reach your goal in approximately"," ",l.jsxs("span",{className:"text-accent-primary font-bold",children:[Math.ceil(j)," weeks"]})]})})]})}return null};return l.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Goal Details"}),l.jsx("p",{className:"text-gray-400",children:"Help us tailor your program to your specific targets."})]}),M(),v&&w==="strength"&&l.jsxs("div",{className:"mt-4 p-4 bg-accent-danger/10 border border-accent-danger/30 rounded-xl",children:[l.jsxs("h4",{className:"text-accent-danger font-semibold mb-2 flex items-center gap-2",children:[l.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Unrealistic Goals Detected"]}),l.jsx("p",{className:"text-sm text-text-secondary whitespace-pre-line",children:v}),l.jsx("p",{className:"text-xs text-text-muted mt-3",children:"MOTUS cannot produce a plan with unrealistic goals. Please adjust your targets or extend your timeline."})]}),l.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Program Start Date"}),l.jsx("p",{className:"text-sm text-text-secondary mb-3",children:"When would you like to begin your program?"}),l.jsx("input",{type:"date",value:f.programStartDate,min:ks(),onChange:T=>p("programStartDate",T.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),l.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Leave blank to start today"})]}),l.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[l.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Nutrition Goal"}),w==="aesthetic"?l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"p-4 bg-accent-primary/20 border border-accent-primary rounded-lg",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-white font-medium",children:"Body Recomposition"}),l.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-primary/30 text-accent-primary rounded",children:"Optimal for Aesthetics"})]}),l.jsx("p",{className:"text-sm text-gray-300",children:"Simultaneously lose fat while building/maintaining muscle through strategic nutrition timing and macros."})]}),l.jsx("div",{className:"p-3 bg-dark-700 rounded-lg",children:l.jsxs("p",{className:"text-xs text-gray-400",children:[l.jsx("strong",{className:"text-gray-300",children:"Recomp Strategy:"})," Eat at maintenance calories with high protein (1g/lb bodyweight). Slight deficit on rest days, slight surplus on training days. This approach maximizes muscle retention while losing fat."]})})]}):l.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"maintain",label:"Maintain",desc:"Keep current weight"},{id:"recomp",label:"Recomp",desc:"Lose fat, keep muscle"},{id:"lose",label:"Lose Weight",desc:"Calorie deficit"},{id:"gain",label:"Gain Weight",desc:"Calorie surplus"}].map(T=>l.jsxs("button",{onClick:()=>p("nutritionGoal",T.id),className:`p-3 rounded-lg border text-left ${f.nutritionGoal===T.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[l.jsx("span",{className:"text-white font-medium",children:T.label}),l.jsx("p",{className:"text-xs text-gray-400",children:T.desc})]},T.id))}),w!=="aesthetic"&&f.nutritionGoal==="recomp"&&l.jsx("div",{className:"mt-3 p-3 bg-dark-700 rounded-lg",children:l.jsxs("p",{className:"text-xs text-gray-400",children:[l.jsx("strong",{className:"text-gray-300",children:"Recomp Strategy:"})," Eat at maintenance with high protein (1g/lb bodyweight). Slight deficit on rest days, slight surplus on training days."]})})]})]})}function ef({formData:f,addVacation:p,updateVacation:x,removeVacation:v}){return l.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Vacations & Time Off"}),l.jsx("p",{className:"text-gray-400",children:"Add planned time off so we can align deload weeks and adjust your program."})]}),f.vacations.length>0&&l.jsx("div",{className:"space-y-3",children:f.vacations.map((N,w)=>l.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg border border-dark-600",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsxs("span",{className:"text-sm text-gray-400",children:["Trip #",w+1]}),l.jsx("button",{onClick:()=>v(N.id),className:"p-1 text-gray-500 hover:text-accent-danger",children:l.jsx(Ma,{className:"w-4 h-4"})})]}),l.jsx("input",{type:"text",value:N.name,onChange:I=>x(N.id,"name",I.target.value),placeholder:"Trip name",className:"w-full px-3 py-2 mb-3 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-text-muted",children:"Start Date"}),l.jsx("input",{type:"date",value:N.startDate,min:ks(),onChange:I=>x(N.id,"startDate",I.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-text-muted",children:"End Date"}),l.jsx("input",{type:"date",value:N.endDate,min:N.startDate||ks(),onChange:I=>x(N.id,"endDate",I.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"})]})]})]},N.id))}),l.jsxs("button",{onClick:p,className:"w-full p-4 border-2 border-dashed border-dark-500 rounded-lg hover:border-accent-primary transition-colors flex items-center justify-center gap-2 text-gray-400 hover:text-white",children:[l.jsx(Fi,{className:"w-5 h-5"}),"Add Time Off"]})]})}function tf({formData:f,isGenerating:p,onGenerate:x}){const v=Di.find(I=>I.id===f.programType),N=v?.subtypes.find(I=>I.id===f.programSubtype),w=()=>{if(f.programType==="endurance"&&f.raceDate){const I=new Date(f.raceDate),T=Math.ceil((I-new Date)/(10080*60*1e3)),A=[f.targetFinishHours,f.targetFinishMinutes,f.targetFinishSeconds].filter(Boolean).join(":");return`${T} weeks to race day${A?`  Target: ${A}`:""}`}return f.programType==="strength"?`${(f.strengthGoals||[]).filter(M=>M.target).length} lift targets set`:f.programType==="aesthetic"&&f.targetBodyFat?`Target: ${f.targetBodyFat}% body fat`:f.programType==="fatloss"&&f.targetWeight?`~${Math.ceil((parseFloat(f.weight)-parseFloat(f.targetWeight))/f.weeklyWeightChange)} weeks to ${f.targetWeight} ${f.weightUnit}`:"Ongoing optimization"};return l.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Ready to Generate"}),l.jsx("p",{className:"text-gray-400",children:"Your AI-powered program will be optimized for your goals."})]}),l.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 space-y-4",children:[l.jsx("h3",{className:"font-semibold text-white",children:"Your Profile Summary"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400",children:"Name"}),l.jsx("p",{className:"text-white font-medium",children:f.name})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400",children:"Stats"}),l.jsxs("p",{className:"text-white font-medium",children:[f.weight," ",f.weightUnit,"  ",f.heightFeet,"'",f.heightInches,'"']})]})]}),l.jsx("hr",{className:"border-dark-600"}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400 text-sm",children:"Primary Goal"}),l.jsxs("p",{className:"text-white font-medium",children:[v?.icon," ",v?.title,": ",N?.label]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400 text-sm",children:"Goal"}),l.jsx("p",{className:"text-accent-primary font-medium",children:w()})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400 text-sm",children:"Training Schedule"}),l.jsxs("p",{className:"text-white font-medium",children:[f.desiredTrainingDays," days/week"]})]}),f.enableHybrid&&f.secondaryProgramType&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400 text-sm",children:"Secondary Goal"}),l.jsxs("p",{className:"text-white font-medium",children:[Di.find(I=>I.id===f.secondaryProgramType)?.icon," ",f.secondarySubtype]})]}),l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-400 text-sm",children:"Program Features"}),l.jsxs("ul",{className:"text-sm text-white mt-1 space-y-1",children:[l.jsx("li",{children:" Auto-periodization (Base  Build  Peak)"}),l.jsx("li",{children:" Progressive overload built-in"}),l.jsx("li",{children:" Deload weeks every 5 weeks"}),l.jsx("li",{children:" Dynamic adjustments based on progress"})]})]})]}),l.jsx(Vt,{fullWidth:!0,size:"lg",onClick:x,disabled:p,className:p?"animate-pulse":"",children:p?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"animate-spin mr-2",children:""}),"Generating Your Program..."]}):l.jsxs(l.Fragment,{children:[l.jsx(h0,{className:"w-5 h-5 mr-2"}),"Generate My Program"]})})]})}function n0(f){try{console.log("Generating fallback program with formData:",f);const p=Bh(f);if(!p||!p.weeklySchedule)throw console.error("Fallback program generation returned invalid program:",p),new Error("Invalid program generated");return p}catch(p){return console.error("Error in generateFallbackProgram:",p),{name:`${f.programType||"Fitness"} Program`,description:"Your personalized training program",mesocycleWeeks:4,currentWeek:1,currentPhase:"Base",phases:["Base","Build","Peak","Deload"],primaryGoal:f.programType||"strength",primarySubtype:f.programSubtype||"general",daysPerWeek:f.desiredTrainingDays||4,weeklySchedule:[{day:1,dayName:"Monday",name:"Training Day 1",isRestDay:!1,isDeload:!1,sessions:[]},{day:2,dayName:"Tuesday",name:"Training Day 2",isRestDay:!1,isDeload:!1,sessions:[]},{day:3,dayName:"Wednesday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]},{day:4,dayName:"Thursday",name:"Training Day 3",isRestDay:!1,isDeload:!1,sessions:[]},{day:5,dayName:"Friday",name:"Training Day 4",isRestDay:!1,isDeload:!1,sessions:[]},{day:6,dayName:"Saturday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]},{day:7,dayName:"Sunday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]}],generatedAt:new Date().toISOString(),error:"Program generation failed - using minimal template"}}}function nf(f){return l.jsx(zh,{children:l.jsx(Zh,{...f})})}const rf={running_easy:8,running_moderate:10,running_hard:12.5,running_sprint:15,cycling_easy:6,cycling_moderate:8,cycling_hard:12,swimming_easy:6,swimming_moderate:8,swimming_hard:10,walking:3.5,hiking:6,elliptical:5,rowing:7,jump_rope:11,stair_climbing:9,strength_light:3,strength_moderate:5,strength_vigorous:6,bodyweight:4,hiit:8,circuit_training:8,crossfit:8,yoga:2.5,pilates:3,stretching:2,rest:1},sf={marathon:"running_moderate",running:"running_moderate",cycling:"cycling_moderate",swimming:"swimming_moderate",triathlon:"running_moderate",cardio:"elliptical",strength:"strength_moderate",bodybuilding:"strength_moderate",olympic:"strength_vigorous",bodyweight:"bodyweight",maintenance:"strength_light",hiit:"hiit",wellness:"strength_light",mobility:"yoga",functional:"circuit_training",active:"walking"};function _a(f,p,x,v=7){const N=f*.453592;let w=sf[p]||"strength_moderate",I=rf[w]||5;const M=.85+(v-6)*.075;I*=M;const T=x/60;return Math.round(I*N*T)}function Mc(f,p="moderate",x=0){const N={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[p]||1.55,w=Math.round(f*N),I=w+x;return{bmr:Math.round(f),neat:Math.round(w-f),workoutCalories:x,totalDailyBurn:I,remaining:I}}function af(f,p,x=[],v=[],N=150){const{totalDailyBurn:w}=Mc(f,p,0),I=x.reduce((T,A)=>T+_a(N,A.type,A.duration,A.rpe||7),0),M=v.reduce((T,A)=>T+_a(N,A.type,A.duration||60,7),0);return w+I+M}function lf({profile:f,program:p,meals:x,workouts:v,todaysMeals:N,todaysWorkouts:w,onLogMeal:I,onLogWorkout:M,onViewProgram:T,onViewNutrition:A}){const{macros:P,bmr:j,tdee:se}=f,re=f.weightUnit==="kg"?f.weight/.453592:parseFloat(f.weight),ee=N.reduce((q,le)=>({calories:q.calories+(le.calories||0),protein:q.protein+(le.protein||0),carbs:q.carbs+(le.carbs||0),fat:q.fat+(le.fat||0)}),{calories:0,protein:0,carbs:0,fat:0}),ie=w.reduce((q,le)=>q+_a(re,le.type||p?.primarySubtype||"strength",le.duration||60,le.overallRpe||7),0),ae=p?.startDate?new Date(p.startDate):null;ae&&ae.setHours(0,0,0,0);const ue=new Date;ue.setHours(0,0,0,0);const ce=!ae||ae<=ue,oe=ae&&ae.getTime()===ue.getTime(),xe=ae?Math.ceil((ae-ue)/(1e3*60*60*24)):0,Ee=()=>{if(!p)return null;const{primaryGoal:q,primarySubtype:le,paces:X,baseline:z}=p;if(q==="endurance")return X?.goalPace?`Your goal: ${X.goalPace} pace for ${le}`:`Building your ${le} endurance`;if(q==="strength"&&z?.strength?.lifts?.length>0){const D=z.strength.lifts[0];return`Your goal: ${D.exercise} from ${D.current1RM}lbs  ${D.target1RM}lbs`}return q==="aesthetic"?`Building lean muscle with ${p.daysPerWeek} training days/week`:`${p.totalWeeks} weeks of structured training ahead`},he=new Date().getDay()||7,G=ce?p?.weeklySchedule?.find(q=>q.day===he):null,pe=G?.sessions||[],de=w.map(q=>q.sessionTime),nt=pe.filter(q=>!de.includes(q.time)),Xe=ce&&G&&!G.isRestDay,ne=!Xe,K=af(j||1800,f.activityLevel||"moderate",w.map(q=>({type:q.type||p?.primarySubtype,duration:q.duration,rpe:q.overallRpe})),Xe?nt.map(q=>({type:q.type||p?.primarySubtype,duration:q.duration})):[],re),Se=Mc(j||1800,f.activityLevel,Xe?ie:0),B=Xe?nt.reduce((q,le)=>q+_a(re,le.type||p?.primarySubtype,le.duration||60,7),0):0,me=ee.calories-K;return l.jsxs("div",{className:"min-h-screen bg-dark-900 pb-24",children:[l.jsx("header",{className:"px-6 pt-8 pb-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-text-muted text-sm font-medium uppercase tracking-wider mb-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),l.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:f.name?.split(" ")[0]||"Athlete"})]}),l.jsx("div",{className:"flex items-center gap-3",children:l.jsxs("div",{className:"text-right",children:[l.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider",children:"Week"}),l.jsx("p",{className:"text-xl font-display font-bold text-accent-primary",children:p?.currentWeek||1})]})})]})}),l.jsxs("div",{className:"px-6 space-y-5",children:[l.jsx(Qt,{hover:!0,onClick:A,className:"overflow-hidden",children:l.jsxs(Jt,{className:"p-0",children:[l.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-dark-600",children:[l.jsxs("h2",{className:"font-semibold text-white flex items-center gap-2",children:[l.jsx(Li,{className:"w-5 h-5 text-accent-primary"}),"Energy Balance"]}),l.jsx(Bi,{className:"w-5 h-5 text-dark-400"})]}),l.jsxs("div",{className:"grid grid-cols-3 divide-x divide-dark-600",children:[l.jsxs("div",{className:"p-4 text-center",children:[l.jsx(Is,{className:"w-5 h-5 text-accent-danger mx-auto mb-2"}),l.jsx("p",{className:"font-display text-2xl font-bold text-white",children:Se.totalDailyBurn}),l.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mt-1",children:"Burned"})]}),l.jsxs("div",{className:"p-4 text-center bg-dark-700/50",children:[l.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mb-2",children:"Net"}),l.jsxs("p",{className:`font-display text-3xl font-bold ${me<0?"text-accent-success":"text-accent-primary"}`,children:[me>0?"+":"",me]}),l.jsx("p",{className:"text-xs text-text-muted mt-1",children:"kcal"})]}),l.jsxs("div",{className:"p-4 text-center",children:[l.jsx(ri,{className:"w-5 h-5 text-accent-success mx-auto mb-2"}),l.jsx("p",{className:"font-display text-2xl font-bold text-white",children:ee.calories}),l.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mt-1",children:"Eaten"})]})]}),l.jsxs("div",{className:"px-5 py-4 space-y-3 border-t border-dark-600",children:[l.jsx(vc,{label:"Protein",current:ee.protein,target:P.protein,color:"primary"}),l.jsx(vc,{label:"Carbs",current:ee.carbs,target:P.carbs,color:"warning"}),l.jsx(vc,{label:"Fat",current:ee.fat,target:P.fat,color:"secondary"})]}),l.jsx("div",{className:"px-5 py-3 bg-dark-700/30 border-t border-dark-600",children:l.jsxs("p",{className:"text-xs text-text-muted leading-relaxed",children:[l.jsx("span",{className:"text-accent-primary font-medium",children:"TDEE Estimate:"})," Based on your physiology (BMR: ",Math.round(j||1800)," kcal) + activity level",Xe?` + today's workout burn (~${B+ie} kcal)`:"",".",ne&&l.jsx("span",{className:"text-gray-500",children:" No workout scheduled today."})," ","These macros are optimized for your ",l.jsx("span",{className:"text-white",children:f?.nutritionGoal||"performance"})," goal."]})})]})}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs(Vt,{variant:"secondary",onClick:I,className:"py-4",children:[l.jsx(ri,{className:"w-5 h-5 mr-2"}),"Log Meal"]}),l.jsxs(Vt,{variant:"secondary",onClick:M,className:"py-4",children:[l.jsx(ni,{className:"w-5 h-5 mr-2"}),"Log Workout"]})]}),l.jsx(Qt,{children:l.jsxs(Jt,{className:"p-0",children:[l.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-dark-600",children:[l.jsxs("h2",{className:"font-semibold text-white flex items-center gap-2",children:[l.jsx(ni,{className:"w-5 h-5 text-accent-primary"}),"Today's Training"]}),ie>0&&l.jsxs("span",{className:"text-sm text-text-muted",children:[l.jsx(Li,{className:"w-4 h-4 inline mr-1 text-accent-danger"}),ie," kcal"]})]}),l.jsx("div",{className:"p-5",children:oe?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-accent-primary/30 to-accent-secondary/30 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-accent-primary animate-pulse",children:l.jsx("span",{className:"text-5xl",children:""})}),l.jsx("h3",{className:"font-display text-2xl font-bold text-accent-primary mb-2",children:"Today is the Day!"}),l.jsxs("p",{className:"text-white font-semibold mb-3",children:["Week 1 of your ",p?.totalWeeks,"-week journey begins now"]}),l.jsx("p",{className:"text-sm text-text-secondary max-w-xs mx-auto",children:Ee()})]}),l.jsx("div",{className:"bg-gradient-to-r from-accent-success/10 to-accent-primary/10 rounded-xl p-4 border border-accent-success/30",children:l.jsxs("p",{className:"text-center text-sm text-text-secondary",children:[l.jsx("span",{className:"text-accent-success font-semibold",children:"Stay the course"})," and this program will get you to your goal. Trust the process, show up every day, and the results will follow."]})}),G&&!G.isRestDay&&l.jsxs(Vt,{variant:"primary",className:"w-full",onClick:T,children:[l.jsx(Ld,{className:"w-4 h-4 mr-2"}),"Start Your First Workout"]})]}):!ce&&ae?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center py-4",children:[l.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-accent-primary/20 to-accent-secondary/20 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-accent-primary/30",children:l.jsx("span",{className:"text-4xl",children:""})}),l.jsxs("p",{className:"font-display text-3xl font-bold text-accent-primary mb-1",children:[xe," ",xe===1?"Day":"Days"]}),l.jsx("p",{className:"text-sm text-text-muted mb-2",children:"until your program begins"}),l.jsxs("p",{className:"text-white font-semibold",children:["Starting ",ae.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]})]}),l.jsxs("div",{className:"bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-xl p-4 border border-accent-primary/20",children:[l.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[l.jsx(Is,{className:"w-4 h-4 text-accent-primary"}),"Prepare for Success"]}),l.jsxs("ul",{className:"space-y-3 text-sm",children:[l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:"Stock up on nutrition"}),l.jsx("p",{className:"text-text-muted",children:"Prepare your meals and snacks for week 1"})]})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:"Get quality sleep"}),l.jsx("p",{className:"text-text-muted",children:"Aim for 8+ hours to start fresh"})]})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:"Review your program"}),l.jsx("p",{className:"text-text-muted",children:"Familiarize yourself with week 1 workouts"})]})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-lg",children:""}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:"Set your intentions"}),l.jsx("p",{className:"text-text-muted",children:"Visualize your goals and commit fully"})]})]})]})]}),l.jsxs(Vt,{variant:"secondary",className:"w-full",onClick:T,children:[l.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Preview Your Program"]})]}):G&&!G.isRestDay?l.jsx("div",{className:"space-y-3",children:G.sessions?.map((q,le)=>{const X=w.some(D=>D.sessionTime===q.time),z=_a(re,q.type||p?.primarySubtype,q.duration||60,7);return l.jsxs("div",{className:`p-4 rounded-xl border transition-all ${X?"bg-accent-success/5 border-accent-success/20":"bg-dark-700 border-dark-600 hover:border-dark-500"}`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${q.time==="AM"?"bg-accent-primary/10 text-accent-primary":"bg-blue-500/10 text-blue-400"}`,children:q.time}),l.jsx("span",{className:"font-medium text-white",children:q.focus}),X&&l.jsx("span",{className:"text-accent-success text-sm",children:" Done"})]}),l.jsxs("span",{className:"text-sm text-text-muted",children:["~",z," kcal"]})]}),l.jsxs("p",{className:"text-sm text-text-secondary mb-3",children:[q.duration," min  ",q.exercises?.length||0," exercises"]}),!X&&l.jsxs(Vt,{variant:"primary",size:"sm",className:"w-full",onClick:T,children:[l.jsx(Ld,{className:"w-4 h-4 mr-2"}),"Start Workout"]})]},le)})}):l.jsxs("div",{className:"text-center py-8",children:[l.jsx("div",{className:"w-16 h-16 bg-dark-700 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-3xl",children:""})}),l.jsx("p",{className:"font-semibold text-white mb-1",children:"Rest Day"}),l.jsx("p",{className:"text-sm text-text-muted",children:"Recovery is when gains happen"})]})})]})}),l.jsx(Q1,{profile:f,program:p}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx(Qt,{children:l.jsxs(Jt,{className:"text-center py-5",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-primary/10 rounded-xl flex items-center justify-center mx-auto mb-3",children:l.jsx(Br,{className:"w-6 h-6 text-accent-primary"})}),l.jsx("p",{className:"font-display text-xl font-bold text-white",children:p?.currentPhase||"Base"}),l.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider mt-1",children:"Phase"})]})}),l.jsx(Qt,{children:l.jsxs(Jt,{className:"text-center py-5",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-success/10 rounded-xl flex items-center justify-center mx-auto mb-3",children:l.jsx(Rs,{className:"w-6 h-6 text-accent-success"})}),l.jsxs("p",{className:"font-display text-xl font-bold text-white",children:[w.length,"/",pe.length||0]}),l.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider mt-1",children:"Complete"})]})})]}),l.jsx(q1,{profile:f,program:p,meals:x,workouts:v,todaysMeals:N,todaysWorkouts:w}),l.jsx(Qt,{hover:!0,onClick:T,children:l.jsxs(Jt,{children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsxs("p",{className:"text-xs text-accent-primary uppercase tracking-wider font-semibold mb-1",children:[p?.isHybrid&&"Hybrid  ",p?.athleteLevel||"Intermediate"]}),l.jsx("h3",{className:"font-semibold text-white text-lg",children:p?.name||"Your Program"}),l.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:["Week ",p?.currentWeek||1," of ",p?.mesocycleWeeks||4]})]}),l.jsx("div",{className:"w-10 h-10 bg-dark-700 rounded-xl flex items-center justify-center",children:l.jsx(Ts,{className:"w-5 h-5 text-text-secondary"})})]}),l.jsx("div",{className:"mt-4",children:l.jsx(Pi,{value:p?.currentWeek||1,max:p?.mesocycleWeeks||4,color:"primary",size:"sm"})})]})})]})]})}function vc({label:f,current:p,target:x,color:v}){const N=p>x;return l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-xs text-text-muted uppercase tracking-wide w-16",children:f}),l.jsx("div",{className:"flex-1",children:l.jsx(Pi,{value:p,max:x,color:N?"danger":v,size:"xs"})}),l.jsxs("span",{className:`text-sm tabular-nums ${N?"text-accent-danger":"text-white"}`,children:[p,l.jsxs("span",{className:"text-text-muted",children:["/",x,"g"]})]})]})}const of=["","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],cf=(f,p,x,v,N)=>{if(!f||p===1)return f;const w=v?.[p-1]||"Base";v?.[p-2];const I=w==="Deload"||w==="Taper";return f.map(M=>{if(M.isRestDay)return{...M};const T=M.sessions?.map(A=>{const P=A.exercises?.map(j=>{let se={...j};if(I)j.sets&&typeof j.sets=="number"&&(se.sets=Math.max(2,Math.floor(j.sets*.6))),j.rpe&&(se.rpe=Math.max(5,j.rpe-2));else if(w==="Peak")j.rpe&&(se.rpe=Math.min(10,j.rpe+.5));else if(w.includes("Build")){const re=w==="Build 2"?1.15:1.08;j.sets&&typeof j.sets=="number"&&(se.sets=Math.round(j.sets*re))}return se.progression=j.progression?.replace(/Week \d+/g,`Week ${p}`),se});return{...A,exercises:P}});return{...M,sessions:T,isDeload:I}})},uf=(f,p,x,v)=>{const N=x?.[f-1]||"Base",w=f>1?x?.[f-2]:null,I=w&&w!==N,M=N==="Deload"||N==="Taper",T=[];if(I&&T.push({type:"phase",icon:"",text:`New phase: ${w}  ${N}`}),M)T.push({type:"deload",icon:"",text:"Reduced volume (60%) - focus on recovery"});else if(N==="Peak"){let P="Peak intensity training";v?.primaryGoal==="endurance"?P="Peak intensity - race simulation workouts":v?.primaryGoal==="strength"?P="Peak intensity - test maxes and competition prep":v?.primaryGoal==="aesthetic"&&(P="Peak intensity - maximum pump and definition"),T.push({type:"peak",icon:"",text:P})}else N.includes("Build")&&f>1&&T.push({type:"progression",icon:"",text:"Volume increases ~5% from last week"});if(v?.primaryGoal==="endurance"){const P=v?.baseline?.endurance?.currentMileage||20,j=v?.athleteLevel==="elite"?60:50;let se;M?se=Math.round(P*Math.pow(1.05,f-2)*.7):N==="Taper"?se=Math.round(j*.6):se=Math.min(Math.round(P*Math.pow(1.05,f-1)),j),T.push({type:"mileage",icon:"",text:`Target mileage: ~${se} miles`})}const A={1:"Establish baseline, focus on form",2:"Build consistency, dial in paces",3:"First small volume increase",4:"Recovery week - let adaptations settle"};return f<=4&&A[f]&&T.push({type:"goal",icon:"",text:A[f]}),{weekNumber:f,totalWeeks:p,phase:N,changes:T,isDeload:M}},df=f=>{const p=f?.primaryGoal||"aesthetic",x=[{icon:"",title:"Stretching & Mobility",description:"15-20 min of dynamic stretching or yoga",detail:"Focus on areas worked yesterday"},{icon:"",title:"Light Walk",description:"20-30 min easy walk outdoors",detail:"Promotes blood flow without stress"},{icon:"",title:"Hydration",description:"Drink 3-4L water with electrolytes",detail:"Sodium, potassium, magnesium for recovery",priority:!0},{icon:"",title:"Sleep",description:"Get 8+ hours of quality sleep",detail:"Most recovery happens during deep sleep",priority:!0},{icon:"",title:"Nutrition",description:"Eat at maintenance or slight surplus",detail:"Prioritize protein (1g/lb) for repair",priority:!0}];return p==="endurance"?[...x,{icon:"",title:"Cold Therapy",description:"10-15 min ice bath or cold shower",detail:"Reduces inflammation from high mileage"},{icon:"",title:"Foam Rolling",description:"10 min on calves, quads, IT band",detail:"Breaks up adhesions, improves mobility"},{icon:"",title:"Compression",description:"Wear compression socks/sleeves",detail:"Promotes circulation and reduces swelling"}]:p==="strength"?[...x,{icon:"",title:"Sauna",description:"15-20 min at 170-190F",detail:"Increases blood flow, promotes recovery"},{icon:"",title:"Self-Massage",description:"Lacrosse ball on tight areas",detail:"Target shoulders, hips, and back"},{icon:"",title:"Contrast Therapy",description:"3 min hot / 1 min cold, repeat 3x",detail:"Flushes metabolic waste from muscles"}]:p==="aesthetic"?[...x,{icon:"",title:"Sauna",description:"15-20 min for recovery",detail:"Also supports fat loss through heat exposure"},{icon:"",title:"Yoga Flow",description:"20-30 min gentle yoga",detail:"Mind-muscle connection, flexibility"}]:p==="fatloss"?[...x,{icon:"",title:"LISS Cardio",description:"30-45 min walk or light bike",detail:"Burns extra calories without cortisol spike"},{icon:"",title:"Cold Exposure",description:"2-5 min cold shower",detail:"Activates brown fat, boosts metabolism"}]:x};function hf({program:f,completedWorkouts:p,onCompleteExercise:x,onCompleteSession:v,onUpdateExerciseLog:N,onBack:w}){const[I,M]=Re.useState(1),[T,A]=Re.useState(0),[P,j]=Re.useState(f?.currentWeek||1),[se,re]=Re.useState(null),[ee,ie]=Re.useState({sets:"",reps:"",weight:"",notes:""}),ae=f?.totalWeeks||f?.mesocycleWeeks||12,ue=f?.phases||[],ce=f?.startDate?new Date(f.startDate):new Date;ce.getDay();const oe=z=>{const D=new Date(ce);return D.setDate(D.getDate()+(z-1)*7),D},xe=z=>{const D=oe(P),W=z-1,ke=new Date(D);return ke.setDate(ke.getDate()+W),ke},Ee=z=>z.toLocaleDateString("en-US",{month:"short",day:"numeric"}),he=()=>{const z=oe(P),D=new Date(z);return D.setDate(D.getDate()+6),`${Ee(z)}  ${Ee(D)}`},G=Re.useMemo(()=>P===1||P===f?.currentWeek?f?.weeklySchedule:cf(f?.weeklySchedule,P,ae,ue),[P,f?.weeklySchedule,ae,ue]),pe=G?.find(z=>z.day===I),de=Re.useMemo(()=>uf(P,ae,ue,f),[P,ae,ue,f]),nt=(z,D)=>P!==f?.currentWeek?!1:p.some(W=>W.day===I&&W.sessionIndex===z&&W.completedExercises?.includes(D)),Xe=(z,D)=>p.find(ke=>ke.day===I&&ke.sessionIndex===z)?.exerciseLogs?.[D]||null,ne=z=>{const D=pe?.sessions?.[z];return D?.exercises?D.exercises.every((W,ke)=>nt(z,ke)):!1},K=(z,D,W)=>{const ke=Xe(z,D);re({sessionIdx:z,exIdx:D}),ie({sets:ke?.sets||W.sets||"",reps:ke?.reps||W.reps||"",weight:ke?.weight||W.startingWeight||"",notes:ke?.notes||""})},Se=()=>{se&&N&&N(I,se.sessionIdx,se.exIdx,ee),re(null),ie({sets:"",reps:"",weight:"",notes:""})},B=z=>{v&&v(I,z)},me=P>1,q=P<ae,le=P>(f?.currentWeek||1);P<(f?.currentWeek||1);const X=df(f);return l.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[l.jsx("header",{className:"px-6 py-4 bg-dark-800 border-b border-dark-700",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("button",{onClick:w,className:"p-2 rounded-lg hover:bg-dark-700",children:l.jsx(ja,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"text-xl font-bold text-white",children:f?.name||"Your Program"}),l.jsxs("p",{className:"text-gray-400 text-sm",children:[f?.currentPhase," Phase"]})]})]})}),l.jsxs("div",{className:"px-6 py-3 bg-dark-800/50 border-b border-dark-700",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("button",{onClick:()=>me&&j(z=>z-1),disabled:!me,className:`p-2 rounded-lg ${me?"hover:bg-dark-700 text-white":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(ja,{className:"w-5 h-5"})}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Ts,{className:"w-5 h-5 text-accent-primary"}),l.jsxs("div",{className:"text-center",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-lg font-bold text-white",children:["Week ",P]}),l.jsxs("span",{className:"text-gray-400 text-sm",children:[" of ",ae]}),P===f?.currentWeek&&l.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-primary rounded-full text-white",children:"Current"}),le&&l.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-secondary/50 rounded-full text-accent-secondary",children:"Preview"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:he()})]})]}),l.jsx("button",{onClick:()=>q&&j(z=>z+1),disabled:!q,className:`p-2 rounded-lg ${q?"hover:bg-dark-700 text-white":"text-gray-600 cursor-not-allowed"}`,children:l.jsx(Bi,{className:"w-5 h-5"})})]}),l.jsx("div",{className:"flex gap-1 mt-2 overflow-x-auto pb-1 scrollbar-thin",children:Array.from({length:ae},(z,D)=>D+1).map(z=>{const D=ue[z-1]||"Base",W={Base:{bg:"bg-blue-500/20",text:"text-blue-400",selected:"bg-blue-500"},Build:{bg:"bg-orange-500/20",text:"text-orange-400",selected:"bg-orange-500"},"Build 1":{bg:"bg-orange-500/20",text:"text-orange-400",selected:"bg-orange-500"},"Build 2":{bg:"bg-red-500/20",text:"text-red-400",selected:"bg-red-500"},Peak:{bg:"bg-purple-500/20",text:"text-purple-400",selected:"bg-purple-500"},Taper:{bg:"bg-cyan-500/20",text:"text-cyan-400",selected:"bg-cyan-500"},Deload:{bg:"bg-green-500/20",text:"text-green-400",selected:"bg-green-500"}},ke=W[D]||W.Base,_e=z===P,ye=z===f?.currentWeek,fe=z<(f?.currentWeek||1);return l.jsx("button",{onClick:()=>j(z),className:`px-2 py-1 text-xs rounded-lg min-w-[28px] transition-all ${_e?`${ke.selected} text-white font-medium`:ye?`${ke.bg} ${ke.text} ring-1 ring-current`:fe?"bg-dark-600/50 text-gray-500":`${ke.bg} ${ke.text} hover:opacity-80`}`,title:`Week ${z}: ${D}`,children:z},z)})}),l.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 text-[10px]",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Base"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Build"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Deload"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),"Peak"]}),l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"w-2 h-2 rounded-full bg-cyan-500"}),"Taper"]})]})]}),de.changes.length>0&&l.jsxs("div",{className:"px-6 py-3 bg-dark-800/30 border-b border-dark-700",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(Rs,{className:"w-4 h-4 text-accent-secondary"}),l.jsxs("span",{className:"text-sm font-medium text-white",children:["Week ",P," Focus"]}),l.jsx("span",{className:"px-2 py-0.5 text-xs bg-dark-600 rounded-full text-gray-300",children:de.phase})]}),l.jsx("div",{className:"flex flex-wrap gap-2",children:de.changes.map((z,D)=>l.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-lg text-xs ${z.type==="deload"?"bg-green-500/20 text-green-400":z.type==="peak"?"bg-red-500/20 text-red-400":z.type==="phase"?"bg-accent-primary/20 text-accent-primary":"bg-dark-600 text-gray-300"}`,children:[l.jsx("span",{children:z.icon}),l.jsx("span",{children:z.text})]},D))})]}),le&&l.jsxs("div",{className:"mx-6 mt-3 p-3 bg-accent-secondary/10 border border-accent-secondary/30 rounded-lg flex items-start gap-2",children:[l.jsx(Cc,{className:"w-4 h-4 text-accent-secondary mt-0.5 flex-shrink-0"}),l.jsxs("div",{className:"text-sm",children:[l.jsx("span",{className:"text-accent-secondary font-medium",children:"Preview Mode:"}),l.jsx("span",{className:"text-gray-400 ml-1",children:"This is a projected schedule. Actual workouts may adjust based on your progress."})]})]}),l.jsx("div",{className:"px-6 py-4 overflow-x-auto",children:l.jsx("div",{className:"flex gap-2 min-w-max",children:[1,2,3,4,5,6,7].map(z=>{const D=G?.find(Pe=>Pe.day===z),W=D?.isRestDay,ke=I===z,_e=D?.isDeload,ye=xe(z),fe=ye.toDateString()===new Date().toDateString();return l.jsxs("button",{onClick:()=>M(z),className:`flex flex-col items-center px-3 py-2 rounded-xl min-w-[64px] transition-all ${ke?"bg-accent-primary text-white":fe?"bg-accent-primary/20 text-accent-primary ring-1 ring-accent-primary/50":_e?"bg-green-500/10 text-green-400 hover:bg-green-500/20":"bg-dark-700 text-gray-400 hover:bg-dark-600"} ${W&&!ke&&!fe?"opacity-50":""}`,children:[l.jsx("span",{className:"text-xs font-medium",children:of[z]}),l.jsx("span",{className:`text-[10px] ${ke?"text-white/80":fe?"text-accent-primary/80":"text-gray-500"}`,children:ye.getDate()}),l.jsx("span",{className:"text-lg font-bold mt-0.5",children:W?"":_e?"":""})]},z)})})}),l.jsx("div",{className:"px-6 py-4",children:pe?.isRestDay?l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"text-center py-6",children:[l.jsx("span",{className:"text-5xl mb-3 block",children:""}),l.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:"Active Recovery Day"}),l.jsx("p",{className:"text-gray-400 text-sm",children:"Recovery is when adaptation happens. Make the most of it."})]}),l.jsxs("div",{className:"bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 rounded-xl p-4 border border-accent-primary/30",children:[l.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[l.jsx(O1,{className:"w-5 h-5 text-accent-primary"}),"Recovery Essentials"]}),l.jsx("div",{className:"space-y-3",children:X.filter(z=>z.priority).map((z,D)=>l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-xl",children:z.icon}),l.jsxs("div",{children:[l.jsx("p",{className:"text-white font-medium",children:z.title}),l.jsx("p",{className:"text-sm text-gray-300",children:z.description})]})]},D))})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold mb-3",children:"Recommended Activities"}),l.jsx("div",{className:"grid gap-3",children:X.filter(z=>!z.priority).map((z,D)=>l.jsx(Qt,{children:l.jsxs(Jt,{className:"flex items-start gap-3",children:[l.jsx("span",{className:"text-2xl",children:z.icon}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"text-white font-medium",children:z.title}),l.jsx("p",{className:"text-sm text-gray-400",children:z.description}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:z.detail})]})]})},D))})]}),l.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-dark-600",children:[l.jsx("h3",{className:"text-white font-semibold mb-2",children:" Pro Tips"}),l.jsxs("ul",{className:"text-sm text-gray-400 space-y-2",children:[l.jsx("li",{children:" Avoid intense exercise - save it for training days"}),l.jsx("li",{children:" Listen to your body - if you feel sore, prioritize sleep"}),l.jsx("li",{children:" Mental recovery matters too - take time to destress"}),l.jsx("li",{children:" Prep meals for the week to stay on track"})]})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-lg font-semibold text-white",children:pe?.name}),pe?.sessions?.map((z,D)=>l.jsxs(Qt,{children:[l.jsx("button",{onClick:()=>A(T===D?-1:D),className:"w-full",children:l.jsx(Jt,{children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${z.time==="AM"?"bg-yellow-500/20":z.time==="PM"?"bg-blue-500/20":"bg-purple-500/20"}`,children:l.jsx("span",{className:"text-2xl",children:z.type==="strength"||z.type==="hypertrophy"?"":z.type==="endurance"?"":""})}),l.jsxs("div",{className:"text-left",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[(z.time==="AM"||z.time==="PM")&&l.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${z.time==="AM"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:z.time}),l.jsx("h3",{className:"font-semibold text-white",children:z.focus})]}),l.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-400",children:[l.jsxs("span",{className:"flex items-center gap-1",children:[l.jsx(Rc,{className:"w-4 h-4"}),z.duration," min"]}),l.jsxs("span",{children:[z.exercises?.length," exercises"]})]})]})]}),l.jsx(Bi,{className:`w-5 h-5 text-gray-400 transition-transform ${T===D?"rotate-90":""}`})]})})}),T===D&&l.jsxs("div",{className:"px-5 pb-5 space-y-3",children:[l.jsx("hr",{className:"border-dark-600"}),z.exercises?.map((W,ke)=>{const _e=nt(D,ke),ye=Xe(D,ke),fe=se?.sessionIdx===D&&se?.exIdx===ke;return l.jsx("div",{className:`p-4 rounded-lg border ${_e?"bg-accent-success/10 border-accent-success/30":"bg-dark-700 border-dark-600"}`,children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("h4",{className:"font-medium text-white",children:W.name}),_e&&l.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-accent-success/20 rounded-full",children:[l.jsx(Pr,{className:"w-3 h-3 text-accent-success"}),l.jsx("span",{className:"text-xs text-accent-success font-medium",children:"Done"})]})]}),fe?l.jsxs("div",{className:"mt-3 space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Sets"}),l.jsx("input",{type:"text",value:ee.sets,onChange:Pe=>ie({...ee,sets:Pe.target.value}),placeholder:W.sets||"Sets",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Reps"}),l.jsx("input",{type:"text",value:ee.reps,onChange:Pe=>ie({...ee,reps:Pe.target.value}),placeholder:W.reps||"Reps",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Weight"}),l.jsx("input",{type:"text",value:ee.weight,onChange:Pe=>ie({...ee,weight:Pe.target.value}),placeholder:W.startingWeight||"Weight",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Notes (optional)"}),l.jsx("input",{type:"text",value:ee.notes,onChange:Pe=>ie({...ee,notes:Pe.target.value}),placeholder:"How did it feel? Any adjustments?",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:Se,className:"flex items-center gap-1 px-3 py-1.5 bg-accent-success text-white rounded-lg text-sm font-medium hover:bg-accent-success/80",children:[l.jsx(W1,{className:"w-4 h-4"}),"Save"]}),l.jsxs("button",{onClick:()=>re(null),className:"flex items-center gap-1 px-3 py-1.5 bg-dark-600 text-gray-400 rounded-lg text-sm hover:bg-dark-500",children:[l.jsx(Zl,{className:"w-4 h-4"}),"Cancel"]})]})]}):l.jsxs(l.Fragment,{children:[ye&&l.jsxs("div",{className:"mt-2 p-2 bg-accent-primary/10 rounded-lg border border-accent-primary/20",children:[l.jsx("span",{className:"text-xs text-accent-primary font-medium",children:"Logged: "}),l.jsxs("span",{className:"text-sm text-white",children:[ye.sets&&`${ye.sets} sets`,ye.reps&&`  ${ye.reps}`,ye.weight&&` @ ${ye.weight}`]}),ye.notes&&l.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:['"',ye.notes,'"']})]}),l.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-sm",children:[W.sets&&l.jsxs("span",{className:"text-gray-400",children:[l.jsx("span",{className:"text-white font-medium",children:W.sets})," sets"]}),W.reps&&l.jsx("span",{className:"text-gray-400",children:l.jsx("span",{className:"text-white font-medium",children:W.reps})}),W.startingWeight&&l.jsxs("span",{className:"text-gray-400",children:["Target ",l.jsx("span",{className:"text-accent-primary font-medium",children:W.startingWeight})]}),W.rpe&&l.jsxs("span",{className:"text-gray-400",children:["RPE ",l.jsx("span",{className:"text-accent-warning font-medium",children:W.rpe})]}),W.pace&&l.jsxs("span",{className:"text-gray-400",children:["Pace ",l.jsx("span",{className:"text-accent-primary font-medium",children:W.pace})]}),W.heartRateZone&&l.jsxs("span",{className:"text-gray-400",children:["Zone ",l.jsx("span",{className:"text-red-400 font-medium",children:W.heartRateZone})]}),W.rest&&l.jsxs("span",{className:"text-gray-400",children:["Rest ",l.jsx("span",{className:"text-white",children:W.rest})]})]}),(W.current1RM||W.target1RM)&&l.jsxs("div",{className:"flex gap-4 mt-2 text-xs",children:[W.current1RM&&l.jsxs("span",{className:"text-gray-500",children:["Current 1RM: ",l.jsx("span",{className:"text-gray-300",children:W.current1RM})]}),W.target1RM&&l.jsxs("span",{className:"text-gray-500",children:["Target 1RM: ",l.jsx("span",{className:"text-accent-secondary",children:W.target1RM})]})]}),W.notes&&l.jsxs("p",{className:"mt-2 text-sm text-gray-500 italic",children:[" ",W.notes]}),W.progression&&l.jsxs("p",{className:"mt-1 text-xs text-accent-secondary",children:[" ",W.progression]})]})]}),l.jsxs("div",{className:"flex items-center gap-1",children:[!fe&&P===f?.currentWeek&&l.jsx("button",{onClick:()=>K(D,ke,W),className:"p-2 rounded-lg text-gray-500 hover:text-accent-primary hover:bg-dark-600 transition-colors",title:"Log actual performance",children:l.jsx(L1,{className:"w-5 h-5"})}),!fe&&l.jsx("button",{onClick:()=>x(I,D,ke),className:`p-2 rounded-lg transition-colors ${_e?"text-accent-success":"text-gray-500 hover:text-white hover:bg-dark-600"}`,title:_e?"Mark incomplete":"Mark complete",children:_e?l.jsx(Pr,{className:"w-6 h-6"}):l.jsx(M1,{className:"w-6 h-6"})})]})]})},ke)}),ne(D)?l.jsxs("div",{className:"mt-4 p-3 bg-accent-success/20 rounded-lg border border-accent-success/30 text-center",children:[l.jsx(Pr,{className:"w-5 h-5 text-accent-success inline mr-2"}),l.jsx("span",{className:"text-accent-success font-medium",children:"Session Complete!"})]}):l.jsxs(Vt,{fullWidth:!0,variant:"success",className:"mt-4",onClick:()=>B(D),children:[l.jsx(Is,{className:"w-4 h-4 mr-2"}),"Complete All Exercises"]})]})]},D))]})})]})}function ff({profile:f,meals:p,workouts:x,onLogMeal:v,onDeleteMeal:N,onBack:w}){const[I,M]=Re.useState(new Date),[T,A]=Re.useState(!1),{macros:P,bmr:j,tdee:se}=f,re=f.weightUnit==="kg"?f.weight/.453592:parseFloat(f.weight),ee=I.toISOString().split("T")[0],ie=p.filter(G=>G.loggedAt?.startsWith(ee)||G.createdAt?.startsWith(ee)),ae=x.filter(G=>G.loggedAt?.startsWith(ee)||G.completedAt?.startsWith(ee)),ue=ie.reduce((G,pe)=>({calories:G.calories+(pe.calories||0),protein:G.protein+(pe.protein||0),carbs:G.carbs+(pe.carbs||0),fat:G.fat+(pe.fat||0),fiber:G.fiber+(pe.fiber||0),sugar:G.sugar+(pe.sugar||0),sodium:G.sodium+(pe.sodium||0)}),{calories:0,protein:0,carbs:0,fat:0,fiber:0,sugar:0,sodium:0}),ce=ae.reduce((G,pe)=>G+(pe.caloriesBurned||200),0),oe=Mc(j||1800,f.activityLevel,ce),xe=xf(f,oe.totalDailyBurn),Ee=G=>{const pe=new Date(I);pe.setDate(pe.getDate()+G),M(pe)},he=I.toISOString().split("T")[0]===new Date().toISOString().split("T")[0];return l.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[l.jsxs("header",{className:"px-6 py-5 bg-dark-800 border-b border-dark-700",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[w&&l.jsx("button",{onClick:w,className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:l.jsx(ja,{className:"w-5 h-5 text-white"})}),l.jsx("div",{children:l.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.jsx(Li,{className:"w-6 h-6 text-accent-warning"}),"Nutrition"]})})]}),l.jsxs(Vt,{size:"sm",onClick:v,children:[l.jsx(Fi,{className:"w-4 h-4 mr-1"}),"Log Meal"]})]}),l.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4",children:[l.jsx("button",{onClick:()=>Ee(-1),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:l.jsx(ja,{className:"w-5 h-5 text-gray-400"})}),l.jsx("div",{className:"text-center",children:l.jsx("p",{className:"text-white font-medium",children:he?"Today":I.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})}),l.jsx("button",{onClick:()=>Ee(1),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",disabled:he,children:l.jsx(Bi,{className:`w-5 h-5 ${he?"text-gray-600":"text-gray-400"}`})})]})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsx(Qt,{children:l.jsxs(Jt,{children:[l.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[l.jsxs("div",{className:"text-center",children:[l.jsx(Is,{className:"w-5 h-5 text-accent-danger mx-auto mb-1"}),l.jsx("p",{className:"text-xl font-bold text-white",children:oe.totalDailyBurn}),l.jsx("p",{className:"text-xs text-gray-400",children:"Burned"})]}),l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Net"}),l.jsxs("p",{className:`text-2xl font-bold ${ue.calories-oe.totalDailyBurn<0?"text-accent-success":"text-accent-warning"}`,children:[ue.calories-oe.totalDailyBurn>0?"+":"",ue.calories-oe.totalDailyBurn]})]}),l.jsxs("div",{className:"text-center",children:[l.jsx(Br,{className:"w-5 h-5 text-accent-success mx-auto mb-1"}),l.jsx("p",{className:"text-xl font-bold text-white",children:ue.calories}),l.jsx("p",{className:"text-xs text-gray-400",children:"Consumed"})]})]}),l.jsx("div",{className:"h-px bg-dark-600 my-4"}),l.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[l.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[l.jsx("p",{className:"text-gray-400",children:"BMR"}),l.jsx("p",{className:"text-white font-medium",children:oe.bmr})]}),l.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[l.jsx("p",{className:"text-gray-400",children:"Activity"}),l.jsx("p",{className:"text-white font-medium",children:oe.neat})]}),l.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[l.jsx("p",{className:"text-gray-400",children:"Workouts"}),l.jsx("p",{className:"text-white font-medium",children:ce})]})]})]})}),l.jsx(Qt,{children:l.jsxs(Jt,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[l.jsx(Br,{className:"w-5 h-5 text-accent-primary"}),"Recommended Intake"]}),l.jsxs("span",{className:"text-xs text-gray-400 px-2 py-1 bg-dark-700 rounded",children:[f.nutritionGoal==="maintain"&&"Maintain",f.nutritionGoal==="recomp"&&"Recomp",f.nutritionGoal==="lose"&&"Weight Loss",f.nutritionGoal==="gain"&&"Weight Gain"]})]}),l.jsx("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-lg mb-4",children:l.jsxs("div",{className:"text-center",children:[l.jsx("p",{className:"text-3xl font-bold text-white",children:xe.calories}),l.jsx("p",{className:"text-sm text-gray-400",children:"Recommended daily calories"})]})}),l.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[l.jsxs("p",{className:"text-lg font-bold text-accent-success",children:[xe.protein,"g"]}),l.jsx("p",{className:"text-xs text-gray-400",children:"Protein"}),l.jsxs("p",{className:"text-xs text-gray-500",children:[xe.proteinPerLb,"g/lb"]})]}),l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[l.jsxs("p",{className:"text-lg font-bold text-accent-warning",children:[xe.carbs,"g"]}),l.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[l.jsxs("p",{className:"text-lg font-bold text-accent-secondary",children:[xe.fat,"g"]}),l.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3 flex items-start gap-1",children:[l.jsx(P1,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),"Based on your ",f.nutritionGoal," goal and estimated ",oe.totalDailyBurn," daily calorie burn"]})]})}),l.jsx(Qt,{children:l.jsxs(Jt,{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-lg font-semibold text-white",children:"Today's Macros"}),l.jsx("button",{onClick:()=>A(!T),className:"text-sm text-accent-primary",children:T?"Simple View":"Detailed View"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx(Nc,{label:"Protein",current:ue.protein,target:xe.protein,color:"success",calories:ue.protein*4}),l.jsx(Nc,{label:"Carbohydrates",current:ue.carbs,target:xe.carbs,color:"warning",calories:ue.carbs*4}),l.jsx(Nc,{label:"Fat",current:ue.fat,target:xe.fat,color:"secondary",calories:ue.fat*9})]}),T&&l.jsxs("div",{className:"mt-6 pt-4 border-t border-dark-600",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-3",children:"Additional Nutrients"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx(zl,{label:"Fiber",value:ue.fiber,target:30,unit:"g"}),l.jsx(zl,{label:"Sugar",value:ue.sugar,target:50,unit:"g",warn:!0}),l.jsx(zl,{label:"Sodium",value:ue.sodium,target:2300,unit:"mg",warn:!0}),l.jsx(zl,{label:"Water",value:Math.round(re*.5),target:Math.round(re*.67),unit:"oz"})]})]}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-600",children:[l.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Calorie Distribution"}),l.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden bg-dark-600",children:[l.jsx("div",{className:"bg-accent-success",style:{width:`${ue.calories>0?ue.protein*4/ue.calories*100:0}%`}}),l.jsx("div",{className:"bg-accent-warning",style:{width:`${ue.calories>0?ue.carbs*4/ue.calories*100:0}%`}}),l.jsx("div",{className:"bg-accent-secondary",style:{width:`${ue.calories>0?ue.fat*9/ue.calories*100:0}%`}})]}),l.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[l.jsxs("span",{children:["P: ",ue.calories>0?Math.round(ue.protein*4/ue.calories*100):0,"%"]}),l.jsxs("span",{children:["C: ",ue.calories>0?Math.round(ue.carbs*4/ue.calories*100):0,"%"]}),l.jsxs("span",{children:["F: ",ue.calories>0?Math.round(ue.fat*9/ue.calories*100):0,"%"]})]})]})]})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-3",children:["Meals (",ie.length,")"]}),ie.length>0?l.jsx("div",{className:"space-y-3",children:ie.map(G=>l.jsx(Qt,{children:l.jsx(Jt,{className:"p-4",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-medium text-white",children:G.name||"Meal"}),l.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 mt-2 text-sm",children:[l.jsxs("span",{className:"text-white font-medium",children:[G.calories," kcal"]}),l.jsxs("span",{className:"text-accent-success",children:["P: ",G.protein,"g"]}),l.jsxs("span",{className:"text-accent-warning",children:["C: ",G.carbs,"g"]}),l.jsxs("span",{className:"text-accent-secondary",children:["F: ",G.fat,"g"]})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(G.loggedAt||G.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),G.screenshot&&l.jsx("img",{src:G.screenshot,alt:"Meal",className:"w-14 h-14 object-cover rounded-lg ml-3"}),l.jsx("button",{onClick:()=>N&&N(G.id),className:"p-2 text-gray-500 hover:text-accent-danger ml-2",children:l.jsx(Ma,{className:"w-4 h-4"})})]})})},G.id))}):l.jsx(Qt,{children:l.jsxs(Jt,{className:"text-center py-8",children:[l.jsx("span",{className:"text-4xl mb-2 block",children:""}),l.jsx("p",{className:"text-gray-400",children:"No meals logged yet"}),l.jsxs(Vt,{variant:"secondary",size:"sm",className:"mt-4",onClick:v,children:[l.jsx(Fi,{className:"w-4 h-4 mr-1"}),"Log Your First Meal"]})]})})]})]})]})}function xf(f,p){const x=f.weightUnit==="kg"?f.weight/.453592:parseFloat(f.weight);let v,N,w;switch(f.nutritionGoal){case"maintain":v=p,w=.8,N=Math.round(x*w);break;case"recomp":v=p,w=1,N=Math.round(x*w);break;case"lose":const P=(f.weeklyWeightChange||.5)*500;v=Math.round(p-P),w=1,N=Math.round(x*w);break;case"gain":const j=(f.weeklyWeightChange||.5)*500;v=Math.round(p+j),w=.9,N=Math.round(x*w);break;default:v=p,w=.8,N=Math.round(x*w)}const I=N*4,M=v-I,T=Math.round(M*.3/9),A=Math.round(M*.7/4);return{calories:v,protein:N,proteinPerLb:w,carbs:A,fat:T}}function Nc({label:f,current:p,target:x,color:v,calories:N}){const w=p>x;return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[l.jsx("span",{className:"text-gray-400",children:f}),l.jsxs("div",{className:"text-right",children:[l.jsxs("span",{className:`font-medium ${w?"text-accent-danger":"text-white"}`,children:[p,"g"]}),l.jsxs("span",{className:"text-gray-500",children:[" / ",x,"g"]}),l.jsxs("span",{className:"text-gray-600 text-xs ml-2",children:["(",N," kcal)"]})]})]}),l.jsx(Pi,{value:p,max:x,color:w?"danger":v,size:"sm"})]})}function zl({label:f,value:p,target:x,unit:v,warn:N=!1}){const w=p/x*100,I=p>x;return l.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[l.jsxs("div",{className:"flex justify-between text-xs",children:[l.jsx("span",{className:"text-gray-400",children:f}),l.jsxs("span",{className:`font-medium ${N&&I?"text-accent-danger":"text-white"}`,children:[p,v]})]}),l.jsx("div",{className:"mt-1 h-1 bg-dark-600 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full rounded-full ${N&&I?"bg-accent-danger":"bg-accent-primary"}`,style:{width:`${Math.min(w,100)}%`}})})]})}function gf({profile:f,program:p,meals:x,workouts:v}){const N=new Date,w=new Date(N);w.setDate(N.getDate()-N.getDay()),w.setHours(0,0,0,0);const I=x.filter(re=>new Date(re.loggedAt||re.createdAt)>=w),M=v.filter(re=>new Date(re.loggedAt||re.completedAt)>=w),T=I.length?Math.round(I.reduce((re,ee)=>re+(ee.calories||0),0)/Math.min(7,I.length)):0,A=I.length?Math.round(I.reduce((re,ee)=>re+(ee.protein||0),0)/Math.min(7,I.length)):0,P=f.daysPerWeek||4,j=Math.min(Math.round(M.length/P*100),100),se=M.reduce((re,ee)=>re+(ee.exercises?.reduce((ie,ae)=>ie+(parseInt(ae.sets)||0),0)||0),0);return l.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[l.jsxs("header",{className:"px-6 py-5 bg-dark-800 border-b border-dark-700",children:[l.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[l.jsx(Ic,{className:"w-6 h-6 text-accent-primary"}),"Stats & Progress"]}),l.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"This week's overview"})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(Qt,{children:l.jsxs(Jt,{className:"text-center",children:[l.jsx(ni,{className:"w-8 h-8 text-accent-primary mx-auto mb-2"}),l.jsx("div",{className:"text-3xl font-bold text-white",children:M.length}),l.jsx("p",{className:"text-sm text-gray-400",children:"Workouts"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["of ",P," planned"]})]})}),l.jsx(Qt,{children:l.jsxs(Jt,{className:"text-center",children:[l.jsx(Br,{className:"w-8 h-8 text-accent-success mx-auto mb-2"}),l.jsxs("div",{className:"text-3xl font-bold text-white",children:[j,"%"]}),l.jsx("p",{className:"text-sm text-gray-400",children:"Adherence"})]})})]}),l.jsx(Qt,{children:l.jsxs(Jt,{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(Rs,{className:"w-5 h-5 text-accent-primary"}),"Training Progress"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Program Week"}),l.jsxs("span",{className:"text-white font-medium",children:[p?.currentWeek||1," of ",p?.mesocycleWeeks||4]})]}),l.jsx(Pi,{value:p?.currentWeek||1,max:p?.mesocycleWeeks||4,color:"primary"}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:se}),l.jsx("p",{className:"text-xs text-gray-400",children:"Weekly Sets"})]}),l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:M.length>0?Math.round(M.reduce((re,ee)=>re+(ee.duration||0),0)/M.length):0}),l.jsx("p",{className:"text-xs text-gray-400",children:"Avg Duration"})]})]})]})]})}),l.jsx(Qt,{children:l.jsxs(Jt,{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(Li,{className:"w-5 h-5 text-accent-warning"}),"Nutrition Averages"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsx("span",{className:"text-gray-400",children:"Avg Daily Calories"}),l.jsxs("span",{className:"text-white",children:[T," / ",f.macros?.calories]})]}),l.jsx(Pi,{value:T,max:f.macros?.calories||2e3,color:T>(f.macros?.calories||2e3)?"danger":"warning",size:"sm"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between mb-1",children:[l.jsx("span",{className:"text-gray-400",children:"Avg Daily Protein"}),l.jsxs("span",{className:"text-white",children:[A,"g / ",f.macros?.protein,"g"]})]}),l.jsx(Pi,{value:A,max:f.macros?.protein||150,color:"success",size:"sm"})]}),l.jsxs("div",{className:"pt-2 text-sm text-gray-500",children:["Based on ",I.length," logged meals"]})]})]})}),l.jsx(Qt,{children:l.jsxs(Jt,{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(Ts,{className:"w-5 h-5 text-accent-secondary"}),"Mesocycle Progress"]}),l.jsx("div",{className:"flex gap-2",children:p?.phases?.map((re,ee)=>{const ie=re===p.currentPhase,ae=p.phases.indexOf(p.currentPhase)>ee;return l.jsx("div",{className:`flex-1 p-3 rounded-lg text-center text-sm ${ie?"bg-accent-primary text-white":ae?"bg-accent-success/20 text-accent-success":"bg-dark-700 text-gray-500"}`,children:re},re)})})]})})]})]})}const mf=f=>!f||f<1?"Beginner":f<2?"Novice":f<4?"Intermediate":f<7?"Advanced":"Expert",pf=f=>f?f.charAt(0).toUpperCase()+f.slice(1):"";function yf({profile:f,program:p,onResetSetup:x}){const{macros:v}=f,N={strength:" Strength",bodybuilding:" Bodybuilding",endurance:" Endurance",fatloss:" Fat Loss",marathon:" Marathon",general:" General"};return l.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[l.jsx("header",{className:"px-6 py-8 bg-gradient-to-b from-accent-primary/20 to-dark-900",children:l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"w-20 h-20 bg-accent-primary rounded-full flex items-center justify-center",children:l.jsx("span",{className:"text-3xl",children:f.name?f.name.charAt(0).toUpperCase():""})}),l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-white",children:f.name||"Athlete"}),l.jsxs("p",{className:"text-gray-400",children:[mf(f.yearsTraining)," Level"]})]})]})}),l.jsxs("div",{className:"px-6 py-4 space-y-4",children:[l.jsx(Qt,{children:l.jsxs(Jt,{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(d0,{className:"w-5 h-5 text-accent-secondary"}),"Body Stats"]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:f.weight}),l.jsx("p",{className:"text-xs text-gray-400",children:f.weightUnit||"lbs"})]}),l.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:f.heightUnit==="metric"?f.heightCm:`${f.heightFeet}'${f.heightInches}"`}),l.jsx("p",{className:"text-xs text-gray-400",children:f.heightUnit==="metric"?"cm":"imperial"})]}),l.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:f.age}),l.jsx("p",{className:"text-xs text-gray-400",children:"years"})]})]})]})}),l.jsx(Qt,{children:l.jsxs(Jt,{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(Li,{className:"w-5 h-5 text-accent-warning"}),"Daily Nutrition Targets"]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[l.jsx("p",{className:"text-3xl font-bold text-white",children:v?.calories}),l.jsx("p",{className:"text-sm text-gray-400",children:"Calories"})]}),l.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[l.jsxs("p",{className:"text-3xl font-bold text-accent-success",children:[v?.protein,"g"]}),l.jsx("p",{className:"text-sm text-gray-400",children:"Protein"})]}),l.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[l.jsxs("p",{className:"text-3xl font-bold text-accent-warning",children:[v?.carbs,"g"]}),l.jsx("p",{className:"text-sm text-gray-400",children:"Carbs"})]}),l.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[l.jsxs("p",{className:"text-3xl font-bold text-accent-secondary",children:[v?.fat,"g"]}),l.jsx("p",{className:"text-sm text-gray-400",children:"Fat"})]})]}),l.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["TDEE: ",f.tdee," kcal/day  BMR: ",f.bmr," kcal/day"]})]})}),l.jsx(Qt,{children:l.jsxs(Jt,{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(Br,{className:"w-5 h-5 text-accent-primary"}),"Training Goals"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[l.jsx("span",{className:"text-gray-400",children:"Primary"}),l.jsx("span",{className:"text-white font-medium",children:N[f.programSubtype]||pf(f.programType)})]}),f.enableHybrid&&f.secondaryProgramType&&l.jsxs("div",{className:"flex items-center justify-between p-3 bg-accent-primary/10 border border-accent-primary/30 rounded-lg",children:[l.jsx("span",{className:"text-accent-primary",children:"Hybrid"}),l.jsxs("span",{className:"text-white",children:[" ",f.allowDoubleDays?"AM/PM Splits":"Alternating"]})]})]})]})}),l.jsx(Qt,{children:l.jsxs(Jt,{children:[l.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[l.jsx(Ts,{className:"w-5 h-5 text-accent-secondary"}),"Current Program"]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Program"}),l.jsx("span",{className:"text-white",children:p?.name||"Custom"})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Week"}),l.jsxs("span",{className:"text-white",children:[p?.currentWeek," of ",p?.mesocycleWeeks]})]}),l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-gray-400",children:"Phase"}),l.jsx("span",{className:"text-white",children:p?.currentPhase})]})]})]})}),l.jsx("div",{className:"pt-4",children:l.jsxs(Vt,{variant:"secondary",fullWidth:!0,onClick:x,children:[l.jsx(U1,{className:"w-4 h-4 mr-2"}),"Reset & Start Over"]})}),l.jsx("p",{className:"text-center text-xs text-gray-600 pt-4",children:"MOTUS v1.0  Powered by Claude AI"})]})]})}const b0="https://world.openfoodfacts.org/api/v2",r0={g:1,gram:1,grams:1,kg:1e3,oz:28.3495,ounce:28.3495,ounces:28.3495,lb:453.592,pound:453.592,pounds:453.592,ml:1,milliliter:1,milliliters:1,l:1e3,liter:1e3,liters:1e3,"fl oz":29.5735,"fluid ounce":29.5735,"fluid ounces":29.5735,cup:236.588,cups:236.588,tbsp:14.787,tablespoon:14.787,tablespoons:14.787,tsp:4.929,teaspoon:4.929,teaspoons:4.929,pint:473.176,quart:946.353,gallon:3785.41},wf=[{label:"Serving",value:"serving",icon:""},{label:"Gram (g)",value:"g",icon:""},{label:"Ounce (oz)",value:"oz",icon:""},{label:"Cup",value:"cup",icon:""},{label:"Tablespoon",value:"tbsp",icon:""},{label:"Teaspoon",value:"tsp",icon:""},{label:"Fluid Oz",value:"fl oz",icon:""},{label:"mL",value:"ml",icon:""},{label:"Piece",value:"piece",icon:""},{label:"Slice",value:"slice",icon:""},{label:"Container",value:"container",icon:""}];function v0(f,p,x){const v=p.toLowerCase(),N=x.toLowerCase();if(v===N)return f;const w=r0[v],I=r0[N];return!w||!I?(console.warn(`Unknown unit conversion: ${p} to ${x}`),f):f*w/I}async function bf(f){try{const x=await(await fetch(`${b0}/product/${f}.json`)).json();if(x.status!==1||!x.product)return{success:!1,error:"Product not found"};const v=x.product,N=v.nutriments||{},w=v.serving_size||"100g",I=N0(w);return{success:!0,product:{barcode:f,name:v.product_name||v.product_name_en||"Unknown Product",brand:v.brands||"",image:v.image_front_small_url||v.image_url||null,servingSize:w,servingSizeGrams:I,per100g:{calories:Math.round(N["energy-kcal_100g"]||N.energy_100g/4.184||0),protein:Math.round((N.proteins_100g||0)*10)/10,carbs:Math.round((N.carbohydrates_100g||0)*10)/10,fat:Math.round((N.fat_100g||0)*10)/10,fiber:Math.round((N.fiber_100g||0)*10)/10,sugar:Math.round((N.sugars_100g||0)*10)/10,sodium:Math.round(N.sodium_100g*1e3||0)},perServing:{calories:Math.round(N["energy-kcal_serving"]||(N["energy-kcal_100g"]||0)*I/100),protein:Math.round((N.proteins_serving||(N.proteins_100g||0)*I/100)*10)/10,carbs:Math.round((N.carbohydrates_serving||(N.carbohydrates_100g||0)*I/100)*10)/10,fat:Math.round((N.fat_serving||(N.fat_100g||0)*I/100)*10)/10},categories:v.categories||"",ingredients:v.ingredients_text||v.ingredients_text_en||"",allergens:v.allergens||"",nutriscore:v.nutriscore_grade||null}}}catch(p){return console.error("Error fetching product:",p),{success:!1,error:"Failed to fetch product data"}}}async function vf(f,p=1){try{const v=await(await fetch(`${b0}/search?search_terms=${encodeURIComponent(f)}&page=${p}&page_size=20&fields=code,product_name,brands,image_front_small_url,nutriments,serving_size`)).json();return v.products?{success:!0,products:v.products.map(w=>{const I=w.nutriments||{},M=w.serving_size||"100g",T=N0(M);return{barcode:w.code,name:w.product_name||"Unknown Product",brand:w.brands||"",image:w.image_front_small_url||null,servingSize:M,servingSizeGrams:T,perServing:{calories:Math.round((I["energy-kcal_100g"]||0)*T/100),protein:Math.round((I.proteins_100g||0)*T/100*10)/10,carbs:Math.round((I.carbohydrates_100g||0)*T/100*10)/10,fat:Math.round((I.fat_100g||0)*T/100*10)/10},per100g:{calories:Math.round(I["energy-kcal_100g"]||0),protein:Math.round((I.proteins_100g||0)*10)/10,carbs:Math.round((I.carbohydrates_100g||0)*10)/10,fat:Math.round((I.fat_100g||0)*10)/10}}}).filter(w=>w.name!=="Unknown Product"),totalCount:v.count||0,page:v.page||1}:{success:!1,error:"No products found",products:[]}}catch(x){return console.error("Error searching products:",x),{success:!1,error:"Failed to search products",products:[]}}}function N0(f){if(!f)return 100;const p=f.match(/(\d+\.?\d*)\s*(g|ml|oz|cup|tbsp|tsp)?/i);if(p){const x=parseFloat(p[1]),v=(p[2]||"g").toLowerCase();return v0(x,v,"g")}return 100}function Nf(f,p,x){if(!f||!f.per100g)return null;let v;x==="serving"?(v=f.servingSizeGrams||100,v*=p):x==="piece"||x==="slice"||x==="container"?v=(f.servingSizeGrams||100)*p:v=v0(p,x,"g");const N=v/100;return{calories:Math.round(f.per100g.calories*N),protein:Math.round(f.per100g.protein*N*10)/10,carbs:Math.round(f.per100g.carbs*N*10)/10,fat:Math.round(f.per100g.fat*N*10)/10,fiber:f.per100g.fiber?Math.round(f.per100g.fiber*N*10)/10:null,sugar:f.per100g.sugar?Math.round(f.per100g.sugar*N*10)/10:null,grams:Math.round(v)}}const Cf=[{id:"egg",name:"Egg (large)",brand:"Generic",servingSize:"1 large (50g)",servingSizeGrams:50,per100g:{calories:143,protein:12.6,carbs:.7,fat:9.5},perServing:{calories:72,protein:6.3,carbs:.4,fat:4.8}},{id:"chicken_breast",name:"Chicken Breast (cooked)",brand:"Generic",servingSize:"3 oz (85g)",servingSizeGrams:85,per100g:{calories:165,protein:31,carbs:0,fat:3.6},perServing:{calories:140,protein:26,carbs:0,fat:3.1}},{id:"rice_white",name:"White Rice (cooked)",brand:"Generic",servingSize:"1 cup (158g)",servingSizeGrams:158,per100g:{calories:130,protein:2.7,carbs:28,fat:.3},perServing:{calories:205,protein:4.3,carbs:44.2,fat:.4}},{id:"oats",name:"Oatmeal (dry)",brand:"Generic",servingSize:"1/2 cup (40g)",servingSizeGrams:40,per100g:{calories:389,protein:16.9,carbs:66,fat:6.9},perServing:{calories:156,protein:6.8,carbs:26.4,fat:2.8}},{id:"banana",name:"Banana (medium)",brand:"Generic",servingSize:"1 medium (118g)",servingSizeGrams:118,per100g:{calories:89,protein:1.1,carbs:23,fat:.3},perServing:{calories:105,protein:1.3,carbs:27,fat:.4}},{id:"apple",name:"Apple (medium)",brand:"Generic",servingSize:"1 medium (182g)",servingSizeGrams:182,per100g:{calories:52,protein:.3,carbs:14,fat:.2},perServing:{calories:95,protein:.5,carbs:25,fat:.3}},{id:"greek_yogurt",name:"Greek Yogurt (plain)",brand:"Generic",servingSize:"1 cup (227g)",servingSizeGrams:227,per100g:{calories:59,protein:10,carbs:3.6,fat:.7},perServing:{calories:134,protein:23,carbs:8.2,fat:1.6}},{id:"almonds",name:"Almonds",brand:"Generic",servingSize:"1 oz (28g)",servingSizeGrams:28,per100g:{calories:579,protein:21,carbs:22,fat:50},perServing:{calories:162,protein:6,carbs:6,fat:14}},{id:"salmon",name:"Salmon (cooked)",brand:"Generic",servingSize:"3 oz (85g)",servingSizeGrams:85,per100g:{calories:208,protein:20,carbs:0,fat:13},perServing:{calories:177,protein:17,carbs:0,fat:11}},{id:"broccoli",name:"Broccoli (cooked)",brand:"Generic",servingSize:"1 cup (156g)",servingSizeGrams:156,per100g:{calories:35,protein:2.4,carbs:7,fat:.4},perServing:{calories:55,protein:3.7,carbs:11,fat:.6}},{id:"avocado",name:"Avocado",brand:"Generic",servingSize:"1/2 avocado (68g)",servingSizeGrams:68,per100g:{calories:160,protein:2,carbs:9,fat:15},perServing:{calories:109,protein:1.4,carbs:6,fat:10}},{id:"protein_shake",name:"Protein Shake (whey)",brand:"Generic",servingSize:"1 scoop (30g)",servingSizeGrams:30,per100g:{calories:400,protein:80,carbs:10,fat:5},perServing:{calories:120,protein:24,carbs:3,fat:1.5}}];function Ef({isOpen:f,onClose:p,onSave:x}){const[v,N]=Re.useState("main"),[w,I]=Re.useState(!1),[M,T]=Re.useState(null),[A,P]=Re.useState([]),[j,se]=Re.useState(""),[re,ee]=Re.useState([]),[ie,ae]=Re.useState(null),[ue,ce]=Re.useState("1"),[oe,xe]=Re.useState("serving"),[Ee,he]=Re.useState(null),[G,pe]=Re.useState(""),[de,nt]=Re.useState("");Re.useEffect(()=>{f||(N("main"),P([]),se(""),ee([]),ae(null),ce("1"),xe("serving"),T(null),pe(""),nt(""))},[f]),Re.useEffect(()=>{if(ie){const X=parseFloat(ue)||0,z=Nf(ie,X,oe);he(z)}},[ie,ue,oe]);const Xe=async X=>{N("main"),I(!0),T(null);try{const z=await bf(X);z.success?(ae(z.product),ce("1"),xe(z.product.servingSize||"serving"),N("product")):T(`Product not found for barcode: ${X}`)}catch{T("Failed to fetch product. Please try again.")}finally{I(!1)}},ne=async()=>{if(j.trim()){I(!0),T(null);try{const X=await vf(j);X.success?(ee(X.products),X.products.length===0&&T("No products found. Try a different search term.")):T("Search failed. Please try again.")}catch{T("Search failed. Please try again.")}finally{I(!1)}}},K=X=>{ae(X),ce("1"),xe(X.servingSize||"serving"),N("product")},Se=()=>{if(!ie||!Ee)return;const X={id:Date.now(),name:ie.name,brand:ie.brand,barcode:ie.barcode,amount:parseFloat(ue)||1,unit:oe,...Ee};P([...A,X]),ae(null),he(null),N("main")},B=X=>{P(A.filter(z=>z.id!==X))},me=A.reduce((X,z)=>({calories:X.calories+(z.calories||0),protein:X.protein+(z.protein||0),carbs:X.carbs+(z.carbs||0),fat:X.fat+(z.fat||0)}),{calories:0,protein:0,carbs:0,fat:0}),q=()=>{if(A.length===0)return;const X={name:de||`Meal (${A.length} items)`,items:A,calories:Math.round(me.calories),protein:Math.round(me.protein*10)/10,carbs:Math.round(me.carbs*10)/10,fat:Math.round(me.fat*10)/10,loggedAt:new Date().toISOString()};x(X),p()},le=()=>{G.trim()&&Xe(G.trim())};return v==="scanner"?l.jsx(Ch,{isOpen:!0,onScan:Xe,onClose:()=>N("main")}):v==="product"&&ie?l.jsx(Hl,{isOpen:f,onClose:()=>N("main"),title:"Add Food",size:"md",children:l.jsxs("div",{className:"space-y-5",children:[l.jsxs("div",{className:"flex gap-4",children:[ie.image?l.jsx("img",{src:ie.image,alt:ie.name,className:"w-20 h-20 rounded-lg object-cover bg-dark-700"}):l.jsx("div",{className:"w-20 h-20 rounded-lg bg-dark-700 flex items-center justify-center",children:l.jsx(ri,{className:"w-8 h-8 text-gray-500"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-white",children:ie.name}),ie.brand&&l.jsx("p",{className:"text-sm text-gray-400",children:ie.brand}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Serving: ",ie.servingSize]})]})]}),l.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl space-y-4",children:[l.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Serving Size"}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Amount"}),l.jsx("input",{type:"number",value:ue,onChange:X=>ce(X.target.value),min:"0.1",step:"0.1",className:"w-full px-4 py-3 bg-dark-600 border border-dark-500 rounded-lg text-white text-lg font-medium focus:border-accent-primary focus:outline-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Unit"}),l.jsx("select",{value:oe,onChange:X=>xe(X.target.value),className:"w-full px-4 py-3 bg-dark-600 border border-dark-500 rounded-lg text-white focus:border-accent-primary focus:outline-none appearance-none",children:wf.map(X=>l.jsxs("option",{value:X.value,children:[X.icon," ",X.label]},X.value))})]})]}),l.jsx("div",{className:"flex gap-2 flex-wrap",children:[.5,1,1.5,2].map(X=>l.jsxs("button",{onClick:()=>ce(X.toString()),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${parseFloat(ue)===X?"bg-accent-primary text-white":"bg-dark-600 text-gray-400 hover:bg-dark-500"}`,children:[X," ",oe==="serving"?"serving":oe]},X))})]}),Ee&&l.jsx("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-xl border border-accent-primary/20",children:l.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-2xl font-bold text-white",children:Ee.calories}),l.jsx("p",{className:"text-xs text-gray-400",children:"Calories"})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-2xl font-bold text-accent-primary",children:[Ee.protein,"g"]}),l.jsx("p",{className:"text-xs text-gray-400",children:"Protein"})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-2xl font-bold text-accent-warning",children:[Ee.carbs,"g"]}),l.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-2xl font-bold text-accent-secondary",children:[Ee.fat,"g"]}),l.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(Vt,{variant:"secondary",onClick:()=>N("main"),fullWidth:!0,children:"Cancel"}),l.jsxs(Vt,{onClick:Se,fullWidth:!0,disabled:!Ee,children:[l.jsx(Fi,{className:"w-4 h-4 mr-2"}),"Add to Meal"]})]})]})}):v==="search"?l.jsx(Hl,{isOpen:f,onClose:()=>N("main"),title:"Search Food",size:"md",children:l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex-1 relative",children:[l.jsx(Ec,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),l.jsx("input",{type:"text",value:j,onChange:X=>se(X.target.value),onKeyPress:X=>X.key==="Enter"&&ne(),placeholder:"Search foods...",className:"w-full pl-10 pr-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white focus:border-accent-primary focus:outline-none",autoFocus:!0})]}),l.jsx(Vt,{onClick:ne,disabled:w,children:w?l.jsx(Bd,{className:"w-5 h-5 animate-spin"}):"Search"})]}),M&&l.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2",children:[l.jsx(Cc,{className:"w-5 h-5 text-red-400"}),l.jsx("span",{className:"text-sm text-red-400",children:M})]}),l.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:re.map((X,z)=>l.jsxs("button",{onClick:()=>K(X),className:"w-full p-3 bg-dark-700 rounded-lg flex items-center gap-3 hover:bg-dark-600 transition-colors text-left",children:[X.image?l.jsx("img",{src:X.image,alt:"",className:"w-12 h-12 rounded-lg object-cover"}):l.jsx("div",{className:"w-12 h-12 rounded-lg bg-dark-600 flex items-center justify-center",children:l.jsx(ri,{className:"w-5 h-5 text-gray-500"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-white font-medium truncate",children:X.name}),X.brand&&l.jsx("p",{className:"text-xs text-gray-500 truncate",children:X.brand}),l.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[X.perServing.calories," cal  ",X.perServing.protein,"g P"]})]}),l.jsx(Tc,{className:"w-5 h-5 text-gray-500 rotate-[-90deg]"})]},z))}),re.length===0&&!w&&l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Common Foods"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:Cf.slice(0,8).map(X=>l.jsxs("button",{onClick:()=>K(X),className:"p-3 bg-dark-700 rounded-lg text-left hover:bg-dark-600 transition-colors",children:[l.jsx("p",{className:"text-sm text-white truncate",children:X.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:[X.perServing.calories," cal"]})]},X.id))})]}),l.jsx(Vt,{variant:"secondary",onClick:()=>N("main"),fullWidth:!0,children:"Back"})]})}):l.jsx(Hl,{isOpen:f,onClose:p,title:"Log Meal",size:"md",children:l.jsxs("div",{className:"space-y-5",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:()=>N("scanner"),className:"p-4 bg-gradient-to-br from-accent-primary/20 to-accent-primary/5 border border-accent-primary/30 rounded-xl flex flex-col items-center gap-2 hover:border-accent-primary/50 transition-colors",children:[l.jsx("div",{className:"w-12 h-12 bg-accent-primary/20 rounded-full flex items-center justify-center",children:l.jsx(_1,{className:"w-6 h-6 text-accent-primary"})}),l.jsx("span",{className:"text-white font-medium",children:"Scan Barcode"}),l.jsx("span",{className:"text-xs text-gray-400",children:"Point at product"})]}),l.jsxs("button",{onClick:()=>N("search"),className:"p-4 bg-dark-700 border border-dark-500 rounded-xl flex flex-col items-center gap-2 hover:border-dark-400 transition-colors",children:[l.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-full flex items-center justify-center",children:l.jsx(Ec,{className:"w-6 h-6 text-gray-400"})}),l.jsx("span",{className:"text-white font-medium",children:"Search Food"}),l.jsx("span",{className:"text-xs text-gray-400",children:"Browse database"})]})]}),l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[l.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Or enter barcode manually:"}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:G,onChange:X=>pe(X.target.value),placeholder:"Enter barcode number...",className:"flex-1 px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm focus:border-accent-primary focus:outline-none"}),l.jsx(Vt,{size:"sm",onClick:le,disabled:!G.trim()||w,children:w?l.jsx(Bd,{className:"w-4 h-4 animate-spin"}):"Look up"})]})]}),M&&l.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2",children:[l.jsx(Cc,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),l.jsx("span",{className:"text-sm text-red-400",children:M}),l.jsx("button",{onClick:()=>T(null),className:"ml-auto",children:l.jsx(Zl,{className:"w-4 h-4 text-red-400"})})]}),A.length>0&&l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center justify-between",children:[l.jsxs("span",{children:["Food Items (",A.length,")"]}),l.jsxs("span",{className:"text-accent-primary",children:[Math.round(me.calories)," cal"]})]}),l.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:A.map(X=>l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg flex items-center justify-between",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"text-white text-sm font-medium truncate",children:X.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:[X.amount," ",X.unit,"  ",X.calories," cal  ",X.protein,"g P"]})]}),l.jsx("button",{onClick:()=>B(X.id),className:"p-2 text-gray-500 hover:text-red-400 transition-colors",children:l.jsx(Ma,{className:"w-4 h-4"})})]},X.id))}),l.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-success/10 to-accent-primary/10 rounded-xl border border-accent-success/20",children:[l.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Meal Totals"}),l.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-xl font-bold text-white",children:Math.round(me.calories)}),l.jsx("p",{className:"text-xs text-gray-400",children:"cal"})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-xl font-bold text-accent-primary",children:[Math.round(me.protein),"g"]}),l.jsx("p",{className:"text-xs text-gray-400",children:"protein"})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-xl font-bold text-accent-warning",children:[Math.round(me.carbs),"g"]}),l.jsx("p",{className:"text-xs text-gray-400",children:"carbs"})]}),l.jsxs("div",{children:[l.jsxs("p",{className:"text-xl font-bold text-accent-secondary",children:[Math.round(me.fat),"g"]}),l.jsx("p",{className:"text-xs text-gray-400",children:"fat"})]})]})]})]}),A.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Meal Type (optional)"}),l.jsx("div",{className:"flex gap-2 flex-wrap",children:["Breakfast","Lunch","Dinner","Snack","Pre-workout","Post-workout"].map(X=>l.jsx("button",{onClick:()=>nt(de===X?"":X),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${de===X?"bg-accent-primary text-white":"bg-dark-700 border border-dark-500 text-gray-300 hover:border-accent-primary"}`,children:X},X))})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(Vt,{variant:"secondary",onClick:p,fullWidth:!0,children:"Cancel"}),l.jsxs(Vt,{onClick:q,fullWidth:!0,disabled:A.length===0,children:[l.jsx(Pr,{className:"w-4 h-4 mr-2"}),"Log Meal"]})]})]})})}const s0=["Ab Wheel Rollout","Arnold Press","Back Extension","Band Pull Apart","Barbell Bent Over Row","Barbell Curl","Barbell Hip Thrust","Barbell Lunge","Barbell Row","Barbell Shrug","Barbell Squat","Battle Ropes","Bench Dip","Bench Press","Bent Over Dumbbell Row","Bicycle Crunch","Bird Dog","Box Jump","Bulgarian Split Squat","Burpee","Cable Crossover","Cable Crunch","Cable Face Pull","Cable Fly","Cable Kickback","Cable Lateral Raise","Cable Pull Through","Cable Row","Cable Tricep Extension","Cable Woodchop","Calf Press","Calf Raise","Chest Dip","Chest Fly","Chin Up","Clean","Clean and Jerk","Close Grip Bench Press","Concentration Curl","Crunch","Dead Bug","Deadlift","Decline Bench Press","Decline Crunch","Deficit Deadlift","Dip","Dumbbell Bench Press","Dumbbell Bulgarian Split Squat","Dumbbell Curl","Dumbbell Fly","Dumbbell Front Raise","Dumbbell Lateral Raise","Dumbbell Lunge","Dumbbell Overhead Press","Dumbbell Pullover","Dumbbell Romanian Deadlift","Dumbbell Row","Dumbbell Shrug","Dumbbell Squat","Dumbbell Step Up","Dumbbell Tricep Extension","EZ Bar Curl","EZ Bar Skull Crusher","Face Pull","Farmer's Walk","Floor Press","Front Raise","Front Squat","Glute Bridge","Goblet Squat","Good Morning","Hack Squat","Hammer Curl","Hanging Knee Raise","Hanging Leg Raise","High Pull","Hip Abduction","Hip Adduction","Hip Thrust","Incline Bench Press","Incline Dumbbell Curl","Incline Dumbbell Fly","Incline Dumbbell Press","Inverted Row","Jump Rope","Jump Squat","Kettlebell Clean","Kettlebell Snatch","Kettlebell Swing","Kettlebell Turkish Get Up","Kneeling Cable Crunch","Landmine Press","Landmine Row","Lat Pulldown","Lateral Raise","Leg Curl","Leg Extension","Leg Press","Leg Raise","Lunges","Lying Leg Curl","Lying Tricep Extension","Machine Chest Press","Machine Fly","Machine Row","Machine Shoulder Press","Medicine Ball Slam","Military Press","Mountain Climber","Muscle Up","Overhead Press","Overhead Squat","Pallof Press","Pause Squat","Pec Deck","Pendlay Row","Pistol Squat","Plank","Power Clean","Preacher Curl","Press Up","Pull Up","Push Press","Push Up","Rack Pull","Rear Delt Fly","Reverse Crunch","Reverse Fly","Reverse Grip Lat Pulldown","Reverse Lunge","Romanian Deadlift","Rope Climb","Rope Tricep Pushdown","Rowing Machine","Russian Twist","Seated Cable Row","Seated Calf Raise","Seated Dumbbell Press","Seated Leg Curl","Shoulder Press","Side Bend","Side Plank","Single Arm Dumbbell Row","Single Leg Deadlift","Single Leg Squat","Sissy Squat","Sit Up","Skull Crusher","Sled Push","Smith Machine Squat","Snatch","Spider Curl","Split Squat","Squat","Standing Calf Raise","Step Up","Stiff Leg Deadlift","Sumo Deadlift","Sumo Squat","Superman","T-Bar Row","Thruster","Toe Touch","Trap Bar Deadlift","Tricep Dip","Tricep Kickback","Tricep Pushdown","Upright Row","V-Up","Walking Lunge","Wall Ball","Wide Grip Lat Pulldown","Wide Grip Pull Up","Wrist Curl","Zercher Squat","Zottman Curl"];function Af({isOpen:f,onClose:p,onSave:x,program:v}){const[N,w]=Re.useState("strength"),[I,M]=Re.useState(""),[T,A]=Re.useState("AM"),[P,j]=Re.useState([]),[se,re]=Re.useState(""),[ee,ie]=Re.useState("7"),[ae,ue]=Re.useState(null),[ce,oe]=Re.useState(null),[xe,Ee]=Re.useState(null),[he,G]=Re.useState(""),pe=Re.useRef(null),de=B=>{const me=B.target.files[0];if(me){const q=new FileReader;q.onload=le=>oe(le.target.result),q.readAsDataURL(me)}},nt=()=>{j([...P,{id:Date.now(),name:"",sets:"",reps:"",weight:""}]),Ee(null),G("")},Xe=(B,me,q)=>{j(P.map(le=>le.id===B?{...le,[me]:q}:le)),me==="name"&&(Ee(null),G(""))},ne=B=>j(P.filter(me=>me.id!==B)),K=()=>he?s0.filter(B=>B.toLowerCase().includes(he.toLowerCase())):s0,Se=()=>{x({type:N,duration:parseInt(I)||0,sessionTime:T,exercises:P.filter(B=>B.name),notes:se,screenshot:ce,overallRpe:parseInt(ee),day:new Date().getDay()||7,loggedAt:new Date().toISOString()}),w("strength"),M(""),A("AM"),j([]),re(""),ie("7"),ue(null),oe(null),Ee(null),G(""),p()};return l.jsx(Hl,{isOpen:f,onClose:p,title:"Log Workout",size:"lg",children:l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Type"}),l.jsx("div",{className:"flex gap-2",children:["strength","cardio","hiit"].map(B=>l.jsxs("button",{onClick:()=>w(B),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${N===B?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:[B==="strength"?"":B==="cardio"?"":""," ",B.charAt(0).toUpperCase()+B.slice(1)]},B))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Session"}),l.jsx("div",{className:"flex gap-2",children:["AM","PM"].map(B=>l.jsxs("button",{onClick:()=>A(B),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${T===B?B==="AM"?"bg-yellow-500/20 border-yellow-500 text-yellow-400":"bg-blue-500/20 border-blue-500 text-blue-400":"bg-dark-700 border-dark-500 text-gray-400"}`,children:[B==="AM"?"":""," ",B]},B))})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsx(Z1,{label:"Duration (min)",type:"number",value:I,onChange:B=>M(B.target.value),placeholder:"60"}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"RPE"}),l.jsx("select",{value:ee,onChange:B=>ie(B.target.value),className:"w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[6,7,8,9,10].map(B=>l.jsxs("option",{value:B,children:["RPE ",B]},B))})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Exercises"}),l.jsxs(Vt,{variant:"ghost",size:"sm",onClick:nt,children:[l.jsx(Fi,{className:"w-4 h-4 mr-1"}),"Add"]})]}),P.length>0?l.jsx("div",{className:"space-y-3",children:P.map((B,me)=>l.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg border border-dark-600",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsxs("span",{className:"text-sm text-gray-500",children:["#",me+1]}),l.jsxs("div",{className:"flex-1 relative",children:[l.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-sm cursor-pointer hover:border-dark-400",onClick:()=>{Ee(xe===B.id?null:B.id),G(B.name||"")},children:[l.jsx("span",{className:B.name?"text-white":"text-gray-500",children:B.name||"Select exercise..."}),l.jsx(Tc,{className:"w-4 h-4 text-gray-400"})]}),xe===B.id&&l.jsxs("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 bg-dark-700 border border-dark-500 rounded-lg shadow-xl max-h-60 overflow-hidden",children:[l.jsx("div",{className:"p-2 border-b border-dark-600",children:l.jsxs("div",{className:"relative",children:[l.jsx(Ec,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),l.jsx("input",{type:"text",value:he,onChange:q=>G(q.target.value),placeholder:"Type to search...",className:"w-full pl-8 pr-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500 focus:outline-none focus:border-accent-primary",autoFocus:!0,onClick:q=>q.stopPropagation()})]})}),l.jsx("div",{className:"max-h-48 overflow-y-auto",children:K().length>0?K().map(q=>l.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-white hover:bg-dark-600 transition-colors",onClick:le=>{le.stopPropagation(),Xe(B.id,"name",q)},children:q},q)):l.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500",children:['No matches. Use custom name: "',he,'"',l.jsxs("button",{className:"block w-full mt-2 px-3 py-1.5 bg-accent-primary/20 text-accent-primary rounded text-xs",onClick:q=>{q.stopPropagation(),Xe(B.id,"name",he)},children:['Use "',he,'"']})]})})]})]}),l.jsx("button",{onClick:()=>ne(B.id),className:"p-1.5 text-gray-500 hover:text-accent-danger",children:l.jsx(Ma,{className:"w-4 h-4"})})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[l.jsx("input",{type:"number",value:B.sets,onChange:q=>Xe(B.id,"sets",q.target.value),placeholder:"Sets",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"}),l.jsx("input",{type:"text",value:B.reps,onChange:q=>Xe(B.id,"reps",q.target.value),placeholder:"Reps",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"}),l.jsx("input",{type:"text",value:B.weight,onChange:q=>Xe(B.id,"weight",q.target.value),placeholder:"Weight",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"})]})]},B.id))}):l.jsxs("div",{className:"p-6 text-center bg-dark-700 rounded-lg border border-dashed border-dark-500",children:[l.jsx(ni,{className:"w-8 h-8 text-gray-600 mx-auto mb-2"}),l.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add" to track exercises'})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Screenshot (Optional)"}),l.jsx("input",{ref:pe,type:"file",accept:"image/*",onChange:de,className:"hidden"}),ce?l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:ce,alt:"Preview",className:"w-full h-40 object-cover rounded-lg"}),l.jsx("button",{onClick:()=>oe(null),className:"absolute top-2 right-2 p-2 bg-dark-900/80 rounded-lg",children:l.jsx(Ma,{className:"w-4 h-4 text-white"})})]}):l.jsxs("button",{onClick:()=>pe.current?.click(),className:"w-full p-6 border-2 border-dashed border-dark-500 rounded-lg hover:border-accent-primary flex flex-col items-center gap-2",children:[l.jsx(u0,{className:"w-6 h-6 text-gray-400"}),l.jsx("span",{className:"text-sm text-gray-400",children:"Upload screenshot"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx(Vt,{variant:"secondary",onClick:p,fullWidth:!0,children:"Cancel"}),l.jsxs(Vt,{onClick:Se,fullWidth:!0,children:[l.jsx(Fi,{className:"w-4 h-4 mr-2"}),"Log Workout"]})]})]})})}function Ta(f,p){const[x,v]=Re.useState(()=>{try{const w=window.localStorage.getItem(f);return w?JSON.parse(w):p}catch{return p}});return[x,w=>{try{const I=w instanceof Function?w(x):w;v(I),window.localStorage.setItem(f,JSON.stringify(I))}catch(I){console.error(I)}}]}const $r=async()=>null,Sf=async f=>(await $r(),localStorage.setItem("motus_profile",JSON.stringify(f)),{data:f,error:null}),kf=async()=>{await $r();{const f=localStorage.getItem("motus_profile");return{data:f?JSON.parse(f):null,error:null}}},If=async f=>(await $r(),localStorage.setItem("motus_program",JSON.stringify(f)),{data:f,error:null}),Tf=async()=>{await $r();{const f=localStorage.getItem("motus_program");return{data:f?JSON.parse(f):null,error:null}}},Rf=async f=>(await $r(),localStorage.setItem("motus_meals",JSON.stringify(f)),{data:f,error:null}),_f=async()=>{await $r();{const f=localStorage.getItem("motus_meals");return{data:f?JSON.parse(f):[],error:null}}},jf=async f=>(await $r(),localStorage.setItem("motus_workouts",JSON.stringify(f)),{data:f,error:null}),Mf=async()=>{await $r();{const f=localStorage.getItem("motus_workouts");return{data:f?JSON.parse(f):[],error:null}}},Of=async()=>{await $r()};function Df(){const{user:f,loading:p,isAuthenticated:x}=o0(),[v,N]=Ta("motus_profile",null),[w,I]=Ta("motus_program",null),[M,T]=Ta("motus_meals",[]),[A,P]=Ta("motus_workouts",[]),[j,se]=Ta("motus_completed",[]),[re,ee]=Re.useState("dashboard"),[ie,ae]=Re.useState(!1),[ue,ce]=Re.useState(!1),[oe,xe]=Re.useState(!1),[Ee,he]=Re.useState(!0),[G,pe]=Re.useState(!0);Re.useEffect(()=>{p||(async()=>{pe(!0),x&&await Of();const[fe,Pe,je,Me]=await Promise.all([kf(),Tf(),_f(),Mf()]);fe.data&&N(fe.data),Pe.data&&I(Pe.data),je.data&&T(je.data),Me.data&&P(Me.data),fe.data&&Pe.data?(xe(!0),he(!1)):localStorage.getItem("motus_has_visited")&&he(!1),pe(!1)})()},[x,p]);const de=async ye=>{N(ye),await Sf(ye)},nt=async ye=>{I(ye),await If(ye)},Xe=async ye=>{T(ye),await Rf(ye)},ne=async ye=>{P(ye),await jf(ye)},K=async ye=>{await de(ye.profile),await nt(ye.program),xe(!0)},Se=async ye=>{const fe=[...M,{...ye,id:Date.now()}];await Xe(fe),ae(!1)},B=async ye=>{const fe=M.filter(Pe=>Pe.id!==ye);await Xe(fe)},me=async ye=>{const fe=[...A,{...ye,id:Date.now()}];await ne(fe),ce(!1)},q=(ye,fe,Pe)=>{const je=j.find(Me=>Me.day===ye&&Me.sessionIndex===fe);if(je)if(je.completedExercises.includes(Pe)){const Me=j.map(Be=>Be.day===ye&&Be.sessionIndex===fe?{...Be,completedExercises:Be.completedExercises.filter(Qe=>Qe!==Pe)}:Be);se(Me)}else{const Me=j.map(Be=>Be.day===ye&&Be.sessionIndex===fe?{...Be,completedExercises:[...Be.completedExercises,Pe]}:Be);se(Me)}else se([...j,{day:ye,sessionIndex:fe,completedExercises:[Pe]}])},le=(ye,fe)=>{const Pe=w?.weeklySchedule?.find(Be=>Be.day===ye)?.sessions?.[fe];if(!Pe?.exercises)return;const je=Pe.exercises.map((Be,Qe)=>Qe);if(j.find(Be=>Be.day===ye&&Be.sessionIndex===fe)){const Be=j.map(Qe=>Qe.day===ye&&Qe.sessionIndex===fe?{...Qe,completedExercises:je}:Qe);se(Be)}else se([...j,{day:ye,sessionIndex:fe,completedExercises:je,exerciseLogs:{}}])},X=(ye,fe,Pe,je)=>{if(j.find(Be=>Be.day===ye&&Be.sessionIndex===fe)){const Be=j.map(Qe=>Qe.day===ye&&Qe.sessionIndex===fe?{...Qe,exerciseLogs:{...Qe.exerciseLogs,[Pe]:je},completedExercises:Qe.completedExercises.includes(Pe)?Qe.completedExercises:[...Qe.completedExercises,Pe]}:Qe);se(Be)}else se([...j,{day:ye,sessionIndex:fe,completedExercises:[Pe],exerciseLogs:{[Pe]:je}}])},z=async()=>{window.confirm("Are you sure you want to reset? All your data will be lost.")&&(await de(null),await nt(null),await Xe([]),await ne([]),se([]),xe(!1),ee("dashboard"))};if(p||G)return l.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-12 h-12 border-4 border-accent-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),l.jsx("p",{className:"text-gray-400",children:"Loading your data..."})]})});const D=new Date().toISOString().split("T")[0],W=M.filter(ye=>(ye.loggedAt||ye.createdAt)?.startsWith(D)),ke=A.filter(ye=>(ye.loggedAt||ye.completedAt)?.startsWith(D)),_e=()=>{localStorage.setItem("motus_has_visited","true"),he(!1)};return Ee&&!oe?l.jsx(G1,{onGetStarted:_e}):oe?l.jsxs("div",{className:"min-h-screen bg-dark-900",children:[re==="dashboard"&&l.jsx(lf,{profile:v,program:w,meals:M,workouts:A,todaysMeals:W,todaysWorkouts:ke,onLogMeal:()=>ae(!0),onLogWorkout:()=>ce(!0),onViewProgram:()=>ee("program"),onViewNutrition:()=>ee("nutrition")}),re==="program"&&l.jsx(hf,{program:w,completedWorkouts:j,onCompleteExercise:q,onCompleteSession:le,onUpdateExerciseLog:X,onBack:()=>ee("dashboard")}),re==="nutrition"&&l.jsx(ff,{profile:v,meals:M,workouts:A,onLogMeal:()=>ae(!0),onDeleteMeal:B,onBack:()=>ee("dashboard")}),re==="stats"&&l.jsx(gf,{profile:v,program:w,meals:M,workouts:A}),re==="profile"&&l.jsx(yf,{profile:v,program:w,onResetSetup:z}),l.jsx(K1,{activeTab:re,onChange:ee}),l.jsx(Ef,{isOpen:ie,onClose:()=>ae(!1),onSave:Se}),l.jsx(Af,{isOpen:ue,onClose:()=>ce(!1),onSave:me,program:w})]}):l.jsx(nf,{onComplete:K})}function Pf(){return l.jsx(A1,{children:l.jsx(Df,{})})}C1.createRoot(document.getElementById("root")).render(l.jsx(a0.StrictMode,{children:l.jsx(Pf,{})}));
