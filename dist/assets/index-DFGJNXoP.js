(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))v(C);new MutationObserver(C=>{for(const w of C)if(w.type==="childList")for(const I of w.addedNodes)I.tagName==="LINK"&&I.rel==="modulepreload"&&v(I)}).observe(document,{childList:!0,subtree:!0});function x(C){const w={};return C.integrity&&(w.integrity=C.integrity),C.referrerPolicy&&(w.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?w.credentials="include":C.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function v(C){if(C.ep)return;C.ep=!0;const w=x(C);fetch(C.href,w)}})();var zl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x0(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var bc={exports:{}},Ia={},vc={exports:{}},ct={};var jd;function S1(){if(jd)return ct;jd=1;var f=Symbol.for("react.element"),m=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),I=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),j=Symbol.iterator;function $(D){return D===null||typeof D!="object"?null:(D=j&&D[j]||D["@@iterator"],typeof D=="function"?D:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,Z={};function oe(D,U,Ie){this.props=D,this.context=U,this.refs=Z,this.updater=Ie||V}oe.prototype.isReactComponent={},oe.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},oe.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function xe(){}xe.prototype=oe.prototype;function fe(D,U,Ie){this.props=D,this.context=U,this.refs=Z,this.updater=Ie||V}var ie=fe.prototype=new xe;ie.constructor=fe,z(ie,oe.prototype),ie.isPureReactComponent=!0;var ne=Array.isArray,be=Object.prototype.hasOwnProperty,de={current:null},X={key:!0,ref:!0,__self:!0,__source:!0};function me(D,U,Ie){var _e,ye={},he=null,Be=null;if(U!=null)for(_e in U.ref!==void 0&&(Be=U.ref),U.key!==void 0&&(he=""+U.key),U)be.call(U,_e)&&!X.hasOwnProperty(_e)&&(ye[_e]=U[_e]);var Me=arguments.length-2;if(Me===1)ye.children=Ie;else if(1<Me){for(var Oe=Array(Me),Le=0;Le<Me;Le++)Oe[Le]=arguments[Le+2];ye.children=Oe}if(D&&D.defaultProps)for(_e in Me=D.defaultProps,Me)ye[_e]===void 0&&(ye[_e]=Me[_e]);return{$$typeof:f,type:D,key:he,ref:Be,props:ye,_owner:de.current}}function ue(D,U){return{$$typeof:f,type:D.type,key:U,ref:D.ref,props:D.props,_owner:D._owner}}function Ae(D){return typeof D=="object"&&D!==null&&D.$$typeof===f}function Ue(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Ie){return U[Ie]})}var ee=/\/+/g;function Y(D,U){return typeof D=="object"&&D!==null&&D.key!=null?Ue(""+D.key):U.toString(36)}function Ce(D,U,Ie,_e,ye){var he=typeof D;(he==="undefined"||he==="boolean")&&(D=null);var Be=!1;if(D===null)Be=!0;else switch(he){case"string":case"number":Be=!0;break;case"object":switch(D.$$typeof){case f:case m:Be=!0}}if(Be)return Be=D,ye=ye(Be),D=_e===""?"."+Y(Be,0):_e,ne(ye)?(Ie="",D!=null&&(Ie=D.replace(ee,"$&/")+"/"),Ce(ye,U,Ie,"",function(Le){return Le})):ye!=null&&(Ae(ye)&&(ye=ue(ye,Ie+(!ye.key||Be&&Be.key===ye.key?"":(""+ye.key).replace(ee,"$&/")+"/")+D)),U.push(ye)),1;if(Be=0,_e=_e===""?".":_e+":",ne(D))for(var Me=0;Me<D.length;Me++){he=D[Me];var Oe=_e+Y(he,Me);Be+=Ce(he,U,Ie,Oe,ye)}else if(Oe=$(D),typeof Oe=="function")for(D=Oe.call(D),Me=0;!(he=D.next()).done;)he=he.value,Oe=_e+Y(he,Me++),Be+=Ce(he,U,Ie,Oe,ye);else if(he==="object")throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Be}function B(D,U,Ie){if(D==null)return D;var _e=[],ye=0;return Ce(D,_e,"","",function(he){return U.call(Ie,he,ye++)}),_e}function pe(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(Ie){(D._status===0||D._status===-1)&&(D._status=1,D._result=Ie)},function(Ie){(D._status===0||D._status===-1)&&(D._status=2,D._result=Ie)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var te={current:null},ce={transition:null},q={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:ce,ReactCurrentOwner:de};function H(){throw Error("act(...) is not supported in production builds of React.")}return ct.Children={map:B,forEach:function(D,U,Ie){B(D,function(){U.apply(this,arguments)},Ie)},count:function(D){var U=0;return B(D,function(){U++}),U},toArray:function(D){return B(D,function(U){return U})||[]},only:function(D){if(!Ae(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},ct.Component=oe,ct.Fragment=x,ct.Profiler=C,ct.PureComponent=fe,ct.StrictMode=v,ct.Suspense=_,ct.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=q,ct.act=H,ct.cloneElement=function(D,U,Ie){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var _e=z({},D.props),ye=D.key,he=D.ref,Be=D._owner;if(U!=null){if(U.ref!==void 0&&(he=U.ref,Be=de.current),U.key!==void 0&&(ye=""+U.key),D.type&&D.type.defaultProps)var Me=D.type.defaultProps;for(Oe in U)be.call(U,Oe)&&!X.hasOwnProperty(Oe)&&(_e[Oe]=U[Oe]===void 0&&Me!==void 0?Me[Oe]:U[Oe])}var Oe=arguments.length-2;if(Oe===1)_e.children=Ie;else if(1<Oe){Me=Array(Oe);for(var Le=0;Le<Oe;Le++)Me[Le]=arguments[Le+2];_e.children=Me}return{$$typeof:f,type:D.type,key:ye,ref:he,props:_e,_owner:Be}},ct.createContext=function(D){return D={$$typeof:I,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:w,_context:D},D.Consumer=D},ct.createElement=me,ct.createFactory=function(D){var U=me.bind(null,D);return U.type=D,U},ct.createRef=function(){return{current:null}},ct.forwardRef=function(D){return{$$typeof:M,render:D}},ct.isValidElement=Ae,ct.lazy=function(D){return{$$typeof:P,_payload:{_status:-1,_result:D},_init:pe}},ct.memo=function(D,U){return{$$typeof:N,type:D,compare:U===void 0?null:U}},ct.startTransition=function(D){var U=ce.transition;ce.transition={};try{D()}finally{ce.transition=U}},ct.unstable_act=H,ct.useCallback=function(D,U){return te.current.useCallback(D,U)},ct.useContext=function(D){return te.current.useContext(D)},ct.useDebugValue=function(){},ct.useDeferredValue=function(D){return te.current.useDeferredValue(D)},ct.useEffect=function(D,U){return te.current.useEffect(D,U)},ct.useId=function(){return te.current.useId()},ct.useImperativeHandle=function(D,U,Ie){return te.current.useImperativeHandle(D,U,Ie)},ct.useInsertionEffect=function(D,U){return te.current.useInsertionEffect(D,U)},ct.useLayoutEffect=function(D,U){return te.current.useLayoutEffect(D,U)},ct.useMemo=function(D,U){return te.current.useMemo(D,U)},ct.useReducer=function(D,U,Ie){return te.current.useReducer(D,U,Ie)},ct.useRef=function(D){return te.current.useRef(D)},ct.useState=function(D){return te.current.useState(D)},ct.useSyncExternalStore=function(D,U,Ie){return te.current.useSyncExternalStore(D,U,Ie)},ct.useTransition=function(){return te.current.useTransition()},ct.version="18.3.1",ct}var _d;function _c(){return _d||(_d=1,vc.exports=S1()),vc.exports}var Md;function A1(){if(Md)return Ia;Md=1;var f=_c(),m=Symbol.for("react.element"),x=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,C=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function I(M,_,N){var P,j={},$=null,V=null;N!==void 0&&($=""+N),_.key!==void 0&&($=""+_.key),_.ref!==void 0&&(V=_.ref);for(P in _)v.call(_,P)&&!w.hasOwnProperty(P)&&(j[P]=_[P]);if(M&&M.defaultProps)for(P in _=M.defaultProps,_)j[P]===void 0&&(j[P]=_[P]);return{$$typeof:m,type:M,key:$,ref:V,props:j,_owner:C.current}}return Ia.Fragment=x,Ia.jsx=I,Ia.jsxs=I,Ia}var Od;function k1(){return Od||(Od=1,bc.exports=A1()),bc.exports}var a=k1(),Re=_c();const g0=x0(Re);var Hl={},Nc={exports:{}},Hn={},Cc={exports:{}},Ec={};var Dd;function I1(){return Dd||(Dd=1,(function(f){function m(ce,q){var H=ce.length;ce.push(q);e:for(;0<H;){var D=H-1>>>1,U=ce[D];if(0<C(U,q))ce[D]=q,ce[H]=U,H=D;else break e}}function x(ce){return ce.length===0?null:ce[0]}function v(ce){if(ce.length===0)return null;var q=ce[0],H=ce.pop();if(H!==q){ce[0]=H;e:for(var D=0,U=ce.length,Ie=U>>>1;D<Ie;){var _e=2*(D+1)-1,ye=ce[_e],he=_e+1,Be=ce[he];if(0>C(ye,H))he<U&&0>C(Be,ye)?(ce[D]=Be,ce[he]=H,D=he):(ce[D]=ye,ce[_e]=H,D=_e);else if(he<U&&0>C(Be,H))ce[D]=Be,ce[he]=H,D=he;else break e}}return q}function C(ce,q){var H=ce.sortIndex-q.sortIndex;return H!==0?H:ce.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;f.unstable_now=function(){return w.now()}}else{var I=Date,M=I.now();f.unstable_now=function(){return I.now()-M}}var _=[],N=[],P=1,j=null,$=3,V=!1,z=!1,Z=!1,oe=typeof setTimeout=="function"?setTimeout:null,xe=typeof clearTimeout=="function"?clearTimeout:null,fe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ie(ce){for(var q=x(N);q!==null;){if(q.callback===null)v(N);else if(q.startTime<=ce)v(N),q.sortIndex=q.expirationTime,m(_,q);else break;q=x(N)}}function ne(ce){if(Z=!1,ie(ce),!z)if(x(_)!==null)z=!0,pe(be);else{var q=x(N);q!==null&&te(ne,q.startTime-ce)}}function be(ce,q){z=!1,Z&&(Z=!1,xe(me),me=-1),V=!0;var H=$;try{for(ie(q),j=x(_);j!==null&&(!(j.expirationTime>q)||ce&&!Ue());){var D=j.callback;if(typeof D=="function"){j.callback=null,$=j.priorityLevel;var U=D(j.expirationTime<=q);q=f.unstable_now(),typeof U=="function"?j.callback=U:j===x(_)&&v(_),ie(q)}else v(_);j=x(_)}if(j!==null)var Ie=!0;else{var _e=x(N);_e!==null&&te(ne,_e.startTime-q),Ie=!1}return Ie}finally{j=null,$=H,V=!1}}var de=!1,X=null,me=-1,ue=5,Ae=-1;function Ue(){return!(f.unstable_now()-Ae<ue)}function ee(){if(X!==null){var ce=f.unstable_now();Ae=ce;var q=!0;try{q=X(!0,ce)}finally{q?Y():(de=!1,X=null)}}else de=!1}var Y;if(typeof fe=="function")Y=function(){fe(ee)};else if(typeof MessageChannel<"u"){var Ce=new MessageChannel,B=Ce.port2;Ce.port1.onmessage=ee,Y=function(){B.postMessage(null)}}else Y=function(){oe(ee,0)};function pe(ce){X=ce,de||(de=!0,Y())}function te(ce,q){me=oe(function(){ce(f.unstable_now())},q)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(ce){ce.callback=null},f.unstable_continueExecution=function(){z||V||(z=!0,pe(be))},f.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<ce?Math.floor(1e3/ce):5},f.unstable_getCurrentPriorityLevel=function(){return $},f.unstable_getFirstCallbackNode=function(){return x(_)},f.unstable_next=function(ce){switch($){case 1:case 2:case 3:var q=3;break;default:q=$}var H=$;$=q;try{return ce()}finally{$=H}},f.unstable_pauseExecution=function(){},f.unstable_requestPaint=function(){},f.unstable_runWithPriority=function(ce,q){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var H=$;$=ce;try{return q()}finally{$=H}},f.unstable_scheduleCallback=function(ce,q,H){var D=f.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?D+H:D):H=D,ce){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=H+U,ce={id:P++,callback:q,priorityLevel:ce,startTime:H,expirationTime:U,sortIndex:-1},H>D?(ce.sortIndex=H,m(N,ce),x(_)===null&&ce===x(N)&&(Z?(xe(me),me=-1):Z=!0,te(ne,H-D))):(ce.sortIndex=U,m(_,ce),z||V||(z=!0,pe(be))),ce},f.unstable_shouldYield=Ue,f.unstable_wrapCallback=function(ce){var q=$;return function(){var H=$;$=q;try{return ce.apply(this,arguments)}finally{$=H}}}})(Ec)),Ec}var Pd;function T1(){return Pd||(Pd=1,Cc.exports=I1()),Cc.exports}var Bd;function R1(){if(Bd)return Hn;Bd=1;var f=_c(),m=T1();function x(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v=new Set,C={};function w(t,s){I(t,s),I(t+"Capture",s)}function I(t,s){for(C[t]=s,t=0;t<s.length;t++)v.add(s[t])}var M=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,N=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P={},j={};function $(t){return _.call(j,t)?!0:_.call(P,t)?!1:N.test(t)?j[t]=!0:(P[t]=!0,!1)}function V(t,s,c,d){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:c!==null?!c.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function z(t,s,c,d){if(s===null||typeof s>"u"||V(t,s,c,d))return!0;if(d)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Z(t,s,c,d,p,y,A){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=c,this.propertyName=t,this.type=s,this.sanitizeURL=y,this.removeEmptyString=A}var oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){oe[t]=new Z(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];oe[s]=new Z(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){oe[t]=new Z(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){oe[t]=new Z(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){oe[t]=new Z(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){oe[t]=new Z(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){oe[t]=new Z(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){oe[t]=new Z(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){oe[t]=new Z(t,5,!1,t.toLowerCase(),null,!1,!1)});var xe=/[\-:]([a-z])/g;function fe(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(xe,fe);oe[s]=new Z(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(xe,fe);oe[s]=new Z(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(xe,fe);oe[s]=new Z(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){oe[t]=new Z(t,1,!1,t.toLowerCase(),null,!1,!1)}),oe.xlinkHref=new Z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){oe[t]=new Z(t,1,!1,t.toLowerCase(),null,!0,!0)});function ie(t,s,c,d){var p=oe.hasOwnProperty(s)?oe[s]:null;(p!==null?p.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(z(s,c,p,d)&&(c=null),d||p===null?$(s)&&(c===null?t.removeAttribute(s):t.setAttribute(s,""+c)):p.mustUseProperty?t[p.propertyName]=c===null?p.type===3?!1:"":c:(s=p.attributeName,d=p.attributeNamespace,c===null?t.removeAttribute(s):(p=p.type,c=p===3||p===4&&c===!0?"":""+c,d?t.setAttributeNS(d,s,c):t.setAttribute(s,c))))}var ne=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,be=Symbol.for("react.element"),de=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),me=Symbol.for("react.strict_mode"),ue=Symbol.for("react.profiler"),Ae=Symbol.for("react.provider"),Ue=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),Ce=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),ce=Symbol.iterator;function q(t){return t===null||typeof t!="object"?null:(t=ce&&t[ce]||t["@@iterator"],typeof t=="function"?t:null)}var H=Object.assign,D;function U(t){if(D===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);D=s&&s[1]||""}return`
`+D+t}var Ie=!1;function _e(t,s){if(!t||Ie)return"";Ie=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(le){var d=le}Reflect.construct(t,[],s)}else{try{s.call()}catch(le){d=le}t.call(s.prototype)}else{try{throw Error()}catch(le){d=le}t()}}catch(le){if(le&&d&&typeof le.stack=="string"){for(var p=le.stack.split(`
`),y=d.stack.split(`
`),A=p.length-1,O=y.length-1;1<=A&&0<=O&&p[A]!==y[O];)O--;for(;1<=A&&0<=O;A--,O--)if(p[A]!==y[O]){if(A!==1||O!==1)do if(A--,O--,0>O||p[A]!==y[O]){var F=`
`+p[A].replace(" at new "," at ");return t.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",t.displayName)),F}while(1<=A&&0<=O);break}}}finally{Ie=!1,Error.prepareStackTrace=c}return(t=t?t.displayName||t.name:"")?U(t):""}function ye(t){switch(t.tag){case 5:return U(t.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return t=_e(t.type,!1),t;case 11:return t=_e(t.type.render,!1),t;case 1:return t=_e(t.type,!0),t;default:return""}}function he(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case X:return"Fragment";case de:return"Portal";case ue:return"Profiler";case me:return"StrictMode";case Y:return"Suspense";case Ce:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ue:return(t.displayName||"Context")+".Consumer";case Ae:return(t._context.displayName||"Context")+".Provider";case ee:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case B:return s=t.displayName||null,s!==null?s:he(t.type)||"Memo";case pe:s=t._payload,t=t._init;try{return he(t(s))}catch{}}return null}function Be(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return he(s);case 8:return s===me?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Me(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Oe(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Le(t){var s=Oe(t)?"checked":"value",c=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),d=""+t[s];if(!t.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return p.call(this)},set:function(A){d=""+A,y.call(this,A)}}),Object.defineProperty(t,s,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(A){d=""+A},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Je(t){t._valueTracker||(t._valueTracker=Le(t))}function sr(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return t&&(d=Oe(t)?t.checked?"true":"false":t.value),t=d,t!==c?(s.setValue(t),!0):!1}function at(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gn(t,s){var c=s.checked;return H({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??t._wrapperState.initialChecked})}function vn(t,s){var c=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;c=Me(s.value!=null?s.value:c),t._wrapperState={initialChecked:d,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Rn(t,s){s=s.checked,s!=null&&ie(t,"checked",s,!1)}function Dt(t,s){Rn(t,s);var c=Me(s.value),d=s.type;if(c!=null)d==="number"?(c===0&&t.value===""||t.value!=c)&&(t.value=""+c):t.value!==""+c&&(t.value=""+c);else if(d==="submit"||d==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?ut(t,s.type,c):s.hasOwnProperty("defaultValue")&&ut(t,s.type,Me(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function vt(t,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,c||s===t.value||(t.value=s),t.defaultValue=s}c=t.name,c!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,c!==""&&(t.name=c)}function ut(t,s,c){(s!=="number"||at(t.ownerDocument)!==t)&&(c==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+c&&(t.defaultValue=""+c))}var kr=Array.isArray;function Fe(t,s,c,d){if(t=t.options,s){s={};for(var p=0;p<c.length;p++)s["$"+c[p]]=!0;for(c=0;c<t.length;c++)p=s.hasOwnProperty("$"+t[c].value),t[c].selected!==p&&(t[c].selected=p),p&&d&&(t[c].defaultSelected=!0)}else{for(c=""+Me(c),s=null,p=0;p<t.length;p++){if(t[p].value===c){t[p].selected=!0,d&&(t[p].defaultSelected=!0);return}s!==null||t[p].disabled||(s=t[p])}s!==null&&(s.selected=!0)}}function ts(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(x(91));return H({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ui(t,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(x(92));if(kr(c)){if(1<c.length)throw Error(x(93));c=c[0]}s=c}s==null&&(s=""),c=s}t._wrapperState={initialValue:Me(c)}}function ir(t,s){var c=Me(s.value),d=Me(s.defaultValue);c!=null&&(c=""+c,c!==t.value&&(t.value=c),s.defaultValue==null&&t.defaultValue!==c&&(t.defaultValue=c)),d!=null&&(t.defaultValue=""+d)}function ii(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function On(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ai(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?On(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vn,cn=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,d,p){MSApp.execUnsafeLocalFunction(function(){return t(s,c,d,p)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Vn=Vn||document.createElement("div"),Vn.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Vn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function ns(t,s){if(s){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=s;return}}t.textContent=s}var Ir={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jl=["Webkit","ms","Moz","O"];Object.keys(Ir).forEach(function(t){Jl.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Ir[s]=Ir[t]})});function Pt(t,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||Ir.hasOwnProperty(t)&&Ir[t]?(""+s).trim():s+"px"}function je(t,s){t=t.style;for(var c in s)if(s.hasOwnProperty(c)){var d=c.indexOf("--")===0,p=Pt(c,s[c],d);c==="float"&&(c="cssFloat"),d?t.setProperty(c,p):t[c]=p}}var Xt=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pt(t,s){if(s){if(Xt[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(x(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(x(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(x(61))}if(s.style!=null&&typeof s.style!="object")throw Error(x(62))}}function At(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fr=null;function _s(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var li=null,ot=null,Dn=null;function zi(t){if(t=fa(t)){if(typeof li!="function")throw Error(x(280));var s=t.stateNode;s&&(s=rl(s),li(t.stateNode,t.type,s))}}function Hi(t){ot?Dn?Dn.push(t):Dn=[t]:ot=t}function Pn(){if(ot){var t=ot,s=Dn;if(Dn=ot=null,zi(t),s)for(t=0;t<s.length;t++)zi(s[t])}}function oi(t,s){return t(s)}function tn(){}var Tr=!1;function Ms(t,s,c){if(Tr)return t(s,c);Tr=!0;try{return oi(t,s,c)}finally{Tr=!1,(ot!==null||Dn!==null)&&(tn(),Pn())}}function Nn(t,s){var c=t.stateNode;if(c===null)return null;var d=rl(c);if(d===null)return null;c=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(x(231,s,typeof c));return c}var Gi=!1;if(M)try{var Xn={};Object.defineProperty(Xn,"passive",{get:function(){Gi=!0}}),window.addEventListener("test",Xn,Xn),window.removeEventListener("test",Xn,Xn)}catch{Gi=!1}function Vi(t,s,c,d,p,y,A,O,F){var le=Array.prototype.slice.call(arguments,3);try{s.apply(c,le)}catch(Ne){this.onError(Ne)}}var $t=!1,ar=null,gn=!1,De=null,rs={onError:function(t){$t=!0,ar=t}};function Xi(t,s,c,d,p,y,A,O,F){$t=!1,ar=null,Vi.apply(rs,arguments)}function Cn(t,s,c,d,p,y,A,O,F){if(Xi.apply(this,arguments),$t){if($t){var le=ar;$t=!1,ar=null}else throw Error(x(198));gn||(gn=!0,De=le)}}function Bn(t){var s=t,c=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(c=s.return),t=s.return;while(t)}return s.tag===3?c:null}function Os(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Ds(t){if(Bn(t)!==t)throw Error(x(188))}function lr(t){var s=t.alternate;if(!s){if(s=Bn(t),s===null)throw Error(x(188));return s!==t?null:t}for(var c=t,d=s;;){var p=c.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){c=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===c)return Ds(p),t;if(y===d)return Ds(p),s;y=y.sibling}throw Error(x(188))}if(c.return!==d.return)c=p,d=y;else{for(var A=!1,O=p.child;O;){if(O===c){A=!0,c=p,d=y;break}if(O===d){A=!0,d=p,c=y;break}O=O.sibling}if(!A){for(O=y.child;O;){if(O===c){A=!0,c=y,d=p;break}if(O===d){A=!0,d=y,c=p;break}O=O.sibling}if(!A)throw Error(x(189))}}if(c.alternate!==d)throw Error(x(190))}if(c.tag!==3)throw Error(x(188));return c.stateNode.current===c?t:s}function Pa(t){return t=lr(t),t!==null?Ba(t):null}function Ba(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Ba(t);if(s!==null)return s;t=t.sibling}return null}var Zn=m.unstable_scheduleCallback,un=m.unstable_cancelCallback,kt=m.unstable_shouldYield,La=m.unstable_requestPaint,wt=m.unstable_now,Zi=m.unstable_getCurrentPriorityLevel,ge=m.unstable_ImmediatePriority,Fa=m.unstable_UserBlockingPriority,Et=m.unstable_NormalPriority,ss=m.unstable_LowPriority,Wa=m.unstable_IdlePriority,ft=null,st=null;function dt(t){if(st&&typeof st.onCommitFiberRoot=="function")try{st.onCommitFiberRoot(ft,t,void 0,(t.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:Zt,Yi=Math.log,Ki=Math.LN2;function Zt(t){return t>>>=0,t===0?32:31-(Yi(t)/Ki|0)|0}var Yn=64,ci=4194304;function St(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kn(t,s){var c=t.pendingLanes;if(c===0)return 0;var d=0,p=t.suspendedLanes,y=t.pingedLanes,A=c&268435455;if(A!==0){var O=A&~p;O!==0?d=St(O):(y&=A,y!==0&&(d=St(y)))}else A=c&~p,A!==0?d=St(A):y!==0&&(d=St(y));if(d===0)return 0;if(s!==0&&s!==d&&(s&p)===0&&(p=d&-d,y=s&-s,p>=y||p===16&&(y&4194240)!==0))return s;if((d&4)!==0&&(d|=c&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=d;0<s;)c=31-jn(s),p=1<<c,d|=t[c],s&=~p;return d}function $l(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function is(t,s){for(var c=t.suspendedLanes,d=t.pingedLanes,p=t.expirationTimes,y=t.pendingLanes;0<y;){var A=31-jn(y),O=1<<A,F=p[A];F===-1?((O&c)===0||(O&d)!==0)&&(p[A]=$l(O,s)):F<=s&&(t.expiredLanes|=O),y&=~O}}function bt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function nn(){var t=Yn;return Yn<<=1,(Yn&4194240)===0&&(Yn=64),t}function Q(t){for(var s=[],c=0;31>c;c++)s.push(t);return s}function T(t,s,c){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-jn(s),t[s]=c}function Xe(t,s){var c=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var d=t.eventTimes;for(t=t.expirationTimes;0<c;){var p=31-jn(c),y=1<<p;s[p]=0,d[p]=-1,t[p]=-1,c&=~y}}function Ut(t,s){var c=t.entangledLanes|=s;for(t=t.entanglements;c;){var d=31-jn(c),p=1<<d;p&s|t[d]&s&&(t[d]|=s),c&=~p}}var it=0;function Ua(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ui,En,Ze,It,qi,Qi=!1,as=[],qn=null,or=null,Rr=null,Mt=new Map,pr=new Map,mn=[],Qe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function za(t,s){switch(t){case"focusin":case"focusout":qn=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":Mt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":pr.delete(s.pointerId)}}function et(t,s,c,d,p,y){return t===null||t.nativeEvent!==y?(t={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},s!==null&&(s=fa(s),s!==null&&En(s)),t):(t.eventSystemFlags|=d,s=t.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),t)}function rn(t,s,c,d,p){switch(s){case"focusin":return qn=et(qn,t,s,c,d,p),!0;case"dragenter":return or=et(or,t,s,c,d,p),!0;case"mouseover":return Rr=et(Rr,t,s,c,d,p),!0;case"pointerover":var y=p.pointerId;return Mt.set(y,et(Mt.get(y)||null,t,s,c,d,p)),!0;case"gotpointercapture":return y=p.pointerId,pr.set(y,et(pr.get(y)||null,t,s,c,d,p)),!0}return!1}function Ha(t){var s=Vs(t.target);if(s!==null){var c=Bn(s);if(c!==null){if(s=c.tag,s===13){if(s=Os(c),s!==null){t.blockedOn=s,qi(t.priority,function(){Ze(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ls(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var c=di(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(c===null){c=t.nativeEvent;var d=new c.constructor(c.type,c);Fr=d,c.target.dispatchEvent(d),Fr=null}else return s=fa(c),s!==null&&En(s),t.blockedOn=c,!1;s.shift()}return!0}function Ji(t,s,c){ls(t)&&c.delete(s)}function Wr(){Qi=!1,qn!==null&&ls(qn)&&(qn=null),or!==null&&ls(or)&&(or=null),Rr!==null&&ls(Rr)&&(Rr=null),Mt.forEach(Ji),pr.forEach(Ji)}function Ps(t,s){t.blockedOn===s&&(t.blockedOn=null,Qi||(Qi=!0,m.unstable_scheduleCallback(m.unstable_NormalPriority,Wr)))}function yr(t){function s(p){return Ps(p,t)}if(0<as.length){Ps(as[0],t);for(var c=1;c<as.length;c++){var d=as[c];d.blockedOn===t&&(d.blockedOn=null)}}for(qn!==null&&Ps(qn,t),or!==null&&Ps(or,t),Rr!==null&&Ps(Rr,t),Mt.forEach(s),pr.forEach(s),c=0;c<mn.length;c++)d=mn[c],d.blockedOn===t&&(d.blockedOn=null);for(;0<mn.length&&(c=mn[0],c.blockedOn===null);)Ha(c),c.blockedOn===null&&mn.shift()}var cr=ne.ReactCurrentBatchConfig,jr=!0;function Ga(t,s,c,d){var p=it,y=cr.transition;cr.transition=null;try{it=1,Ur(t,s,c,d)}finally{it=p,cr.transition=y}}function Bs(t,s,c,d){var p=it,y=cr.transition;cr.transition=null;try{it=4,Ur(t,s,c,d)}finally{it=p,cr.transition=y}}function Ur(t,s,c,d){if(jr){var p=di(t,s,c,d);if(p===null)co(t,s,d,sn,c),za(t,d);else if(rn(p,t,s,c,d))d.stopPropagation();else if(za(t,d),s&4&&-1<Qe.indexOf(t)){for(;p!==null;){var y=fa(p);if(y!==null&&ui(y),y=di(t,s,c,d),y===null&&co(t,s,d,sn,c),y===p)break;p=y}p!==null&&d.stopPropagation()}else co(t,s,d,null,c)}}var sn=null;function di(t,s,c,d){if(sn=null,t=_s(d),t=Vs(t),t!==null)if(s=Bn(t),s===null)t=null;else if(c=s.tag,c===13){if(t=Os(s),t!==null)return t;t=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return sn=t,null}function $i(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zi()){case ge:return 1;case Fa:return 4;case Et:case ss:return 16;case Wa:return 536870912;default:return 16}default:return 16}}var wr=null,ea=null,hi=null;function Va(){if(hi)return hi;var t,s=ea,c=s.length,d,p="value"in wr?wr.value:wr.textContent,y=p.length;for(t=0;t<c&&s[t]===p[t];t++);var A=c-t;for(d=1;d<=A&&s[c-d]===p[y-d];d++);return hi=p.slice(t,1<d?1-d:void 0)}function xt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ls(){return!0}function Fs(){return!1}function zt(t){function s(c,d,p,y,A){this._reactName=c,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=A,this.currentTarget=null;for(var O in t)t.hasOwnProperty(O)&&(c=t[O],this[O]=c?c(y):y[O]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ls:Fs,this.isPropagationStopped=Fs,this}return H(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),s}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ae=zt(os),nt=H({},os,{view:0,detail:0}),an=zt(nt),cs,fi,Ws,xi=H({},nt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Us,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ws&&(Ws&&t.type==="mousemove"?(cs=t.screenX-Ws.screenX,fi=t.screenY-Ws.screenY):fi=cs=0,Ws=t),cs)},movementY:function(t){return"movementY"in t?t.movementY:fi}}),Xa=zt(xi),ta=H({},xi,{dataTransfer:0}),Yt=zt(ta),na=H({},nt,{relatedTarget:0}),Tt=zt(na),gi=H({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),zr=zt(gi),Nt=H({},os,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ye=zt(Nt),eo=H({},os,{data:0}),Ct=zt(eo),Hr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},us={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},to={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ur(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=to[t])?!!s[t]:!1}function Us(){return ur}var Za=H({},nt,{key:function(t){if(t.key){var s=Hr[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=xt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?us[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Us,charCode:function(t){return t.type==="keypress"?xt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ra=zt(Za),Ya=H({},xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sa=zt(Ya),no=H({},nt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Us}),ds=zt(no),ia=H({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),ro=zt(ia),zs=H({},xi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),so=zt(zs),_r=[9,13,27,32],hs=M&&"CompositionEvent"in window,dn=null;M&&"documentMode"in document&&(dn=document.documentMode);var Ka=M&&"TextEvent"in window&&!dn,Qn=M&&(!hs||dn&&8<dn&&11>=dn),qa=" ",mi=!1;function Qa(t,s){switch(t){case"keyup":return _r.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aa(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pn=!1;function io(t,s){switch(t){case"compositionend":return aa(s);case"keypress":return s.which!==32?null:(mi=!0,qa);case"textInput":return t=s.data,t===qa&&mi?null:t;default:return null}}function la(t,s){if(pn)return t==="compositionend"||!hs&&Qa(t,s)?(t=Va(),hi=ea=wr=null,pn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Qn&&s.locale!=="ko"?null:s.data;default:return null}}var Hs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ht(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Hs[t.type]:s==="textarea"}function Gs(t,s,c,d){Hi(d),s=el(s,"onChange"),0<s.length&&(c=new ae("onChange","change",null,c,d),t.push({event:c,listeners:s}))}var E=null,e=null;function n(t){Zc(t,0)}function r(t){var s=wi(t);if(sr(s))return t}function i(t,s){if(t==="change")return s}var l=!1;if(M){var o;if(M){var u="oninput"in document;if(!u){var h=document.createElement("div");h.setAttribute("oninput","return;"),u=typeof h.oninput=="function"}o=u}else o=!1;l=o&&(!document.documentMode||9<document.documentMode)}function g(){E&&(E.detachEvent("onpropertychange",b),e=E=null)}function b(t){if(t.propertyName==="value"&&r(e)){var s=[];Gs(s,e,t,_s(t)),Ms(n,s)}}function S(t,s,c){t==="focusin"?(g(),E=s,e=c,E.attachEvent("onpropertychange",b)):t==="focusout"&&g()}function k(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return r(e)}function R(t,s){if(t==="click")return r(s)}function L(t,s){if(t==="input"||t==="change")return r(s)}function W(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var K=typeof Object.is=="function"?Object.is:W;function se(t,s){if(K(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var c=Object.keys(t),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var p=c[d];if(!_.call(s,p)||!K(t[p],s[p]))return!1}return!0}function Se(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ke(t,s){var c=Se(t);t=0;for(var d;c;){if(c.nodeType===3){if(d=t+c.textContent.length,t<=s&&d>=s)return{node:c,offset:s-t};t=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Se(c)}}function ve(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?ve(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function lt(){for(var t=window,s=at();s instanceof t.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)t=s.contentWindow;else break;s=at(t.document)}return s}function tt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Sn(t){var s=lt(),c=t.focusedElem,d=t.selectionRange;if(s!==c&&c&&c.ownerDocument&&ve(c.ownerDocument.documentElement,c)){if(d!==null&&tt(c)){if(s=d.start,t=d.end,t===void 0&&(t=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(t,c.value.length);else if(t=(s=c.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var p=c.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!t.extend&&y>d&&(p=d,d=y,y=p),p=ke(c,y);var A=ke(c,d);p&&A&&(t.rangeCount!==1||t.anchorNode!==p.node||t.anchorOffset!==p.offset||t.focusNode!==A.node||t.focusOffset!==A.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),t.removeAllRanges(),y>d?(t.addRange(s),t.extend(A.node,A.offset)):(s.setEnd(A.node,A.offset),t.addRange(s)))}}for(s=[],t=c;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)t=s[c],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Jn=M&&"documentMode"in document&&11>=document.documentMode,Kt=null,yt=null,Bt=null,yn=!1;function Gr(t,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;yn||Kt==null||Kt!==at(d)||(d=Kt,"selectionStart"in d&&tt(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Bt&&se(Bt,d)||(Bt=d,d=el(yt,"onSelect"),0<d.length&&(s=new ae("onSelect","select",null,s,c),t.push({event:s,listeners:d}),s.target=Kt)))}function br(t,s){var c={};return c[t.toLowerCase()]=s.toLowerCase(),c["Webkit"+t]="webkit"+s,c["Moz"+t]="moz"+s,c}var fs={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},oa={},Fc={};M&&(Fc=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function Ja(t){if(oa[t])return oa[t];if(!fs[t])return t;var s=fs[t],c;for(c in s)if(s.hasOwnProperty(c)&&c in Fc)return oa[t]=s[c];return t}var Wc=Ja("animationend"),Uc=Ja("animationiteration"),zc=Ja("animationstart"),Hc=Ja("transitionend"),Gc=new Map,Vc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(t,s){Gc.set(t,s),w(s,[t])}for(var ao=0;ao<Vc.length;ao++){var lo=Vc[ao],O0=lo.toLowerCase(),D0=lo[0].toUpperCase()+lo.slice(1);xs(O0,"on"+D0)}xs(Wc,"onAnimationEnd"),xs(Uc,"onAnimationIteration"),xs(zc,"onAnimationStart"),xs("dblclick","onDoubleClick"),xs("focusin","onFocus"),xs("focusout","onBlur"),xs(Hc,"onTransitionEnd"),I("onMouseEnter",["mouseout","mouseover"]),I("onMouseLeave",["mouseout","mouseover"]),I("onPointerEnter",["pointerout","pointerover"]),I("onPointerLeave",["pointerout","pointerover"]),w("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),w("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),w("onBeforeInput",["compositionend","keypress","textInput","paste"]),w("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),w("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),w("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ca));function Xc(t,s,c){var d=t.type||"unknown-event";t.currentTarget=c,Cn(d,s,void 0,t),t.currentTarget=null}function Zc(t,s){s=(s&4)!==0;for(var c=0;c<t.length;c++){var d=t[c],p=d.event;d=d.listeners;e:{var y=void 0;if(s)for(var A=d.length-1;0<=A;A--){var O=d[A],F=O.instance,le=O.currentTarget;if(O=O.listener,F!==y&&p.isPropagationStopped())break e;Xc(p,O,le),y=F}else for(A=0;A<d.length;A++){if(O=d[A],F=O.instance,le=O.currentTarget,O=O.listener,F!==y&&p.isPropagationStopped())break e;Xc(p,O,le),y=F}}}if(gn)throw t=De,gn=!1,De=null,t}function jt(t,s){var c=s[mo];c===void 0&&(c=s[mo]=new Set);var d=t+"__bubble";c.has(d)||(Yc(s,t,2,!1),c.add(d))}function oo(t,s,c){var d=0;s&&(d|=4),Yc(c,t,d,s)}var $a="_reactListening"+Math.random().toString(36).slice(2);function ua(t){if(!t[$a]){t[$a]=!0,v.forEach(function(c){c!=="selectionchange"&&(P0.has(c)||oo(c,!1,t),oo(c,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[$a]||(s[$a]=!0,oo("selectionchange",!1,s))}}function Yc(t,s,c,d){switch($i(s)){case 1:var p=Ga;break;case 4:p=Bs;break;default:p=Ur}c=p.bind(null,s,c,t),p=void 0,!Gi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),d?p!==void 0?t.addEventListener(s,c,{capture:!0,passive:p}):t.addEventListener(s,c,!0):p!==void 0?t.addEventListener(s,c,{passive:p}):t.addEventListener(s,c,!1)}function co(t,s,c,d,p){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var O=d.stateNode.containerInfo;if(O===p||O.nodeType===8&&O.parentNode===p)break;if(A===4)for(A=d.return;A!==null;){var F=A.tag;if((F===3||F===4)&&(F=A.stateNode.containerInfo,F===p||F.nodeType===8&&F.parentNode===p))return;A=A.return}for(;O!==null;){if(A=Vs(O),A===null)return;if(F=A.tag,F===5||F===6){d=y=A;continue e}O=O.parentNode}}d=d.return}Ms(function(){var le=y,Ne=_s(c),Ee=[];e:{var we=Gc.get(t);if(we!==void 0){var Pe=ae,He=t;switch(t){case"keypress":if(xt(c)===0)break e;case"keydown":case"keyup":Pe=ra;break;case"focusin":He="focus",Pe=Tt;break;case"focusout":He="blur",Pe=Tt;break;case"beforeblur":case"afterblur":Pe=Tt;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pe=Xa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pe=Yt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pe=ds;break;case Wc:case Uc:case zc:Pe=zr;break;case Hc:Pe=ro;break;case"scroll":Pe=an;break;case"wheel":Pe=so;break;case"copy":case"cut":case"paste":Pe=Ye;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pe=sa}var Ge=(s&4)!==0,qt=!Ge&&t==="scroll",J=Ge?we!==null?we+"Capture":null:we;Ge=[];for(var G=le,re;G!==null;){re=G;var Te=re.stateNode;if(re.tag===5&&Te!==null&&(re=Te,J!==null&&(Te=Nn(G,J),Te!=null&&Ge.push(da(G,Te,re)))),qt)break;G=G.return}0<Ge.length&&(we=new Pe(we,He,null,c,Ne),Ee.push({event:we,listeners:Ge}))}}if((s&7)===0){e:{if(we=t==="mouseover"||t==="pointerover",Pe=t==="mouseout"||t==="pointerout",we&&c!==Fr&&(He=c.relatedTarget||c.fromElement)&&(Vs(He)||He[Vr]))break e;if((Pe||we)&&(we=Ne.window===Ne?Ne:(we=Ne.ownerDocument)?we.defaultView||we.parentWindow:window,Pe?(He=c.relatedTarget||c.toElement,Pe=le,He=He?Vs(He):null,He!==null&&(qt=Bn(He),He!==qt||He.tag!==5&&He.tag!==6)&&(He=null)):(Pe=null,He=le),Pe!==He)){if(Ge=Xa,Te="onMouseLeave",J="onMouseEnter",G="mouse",(t==="pointerout"||t==="pointerover")&&(Ge=sa,Te="onPointerLeave",J="onPointerEnter",G="pointer"),qt=Pe==null?we:wi(Pe),re=He==null?we:wi(He),we=new Ge(Te,G+"leave",Pe,c,Ne),we.target=qt,we.relatedTarget=re,Te=null,Vs(Ne)===le&&(Ge=new Ge(J,G+"enter",He,c,Ne),Ge.target=re,Ge.relatedTarget=qt,Te=Ge),qt=Te,Pe&&He)t:{for(Ge=Pe,J=He,G=0,re=Ge;re;re=pi(re))G++;for(re=0,Te=J;Te;Te=pi(Te))re++;for(;0<G-re;)Ge=pi(Ge),G--;for(;0<re-G;)J=pi(J),re--;for(;G--;){if(Ge===J||J!==null&&Ge===J.alternate)break t;Ge=pi(Ge),J=pi(J)}Ge=null}else Ge=null;Pe!==null&&Kc(Ee,we,Pe,Ge,!1),He!==null&&qt!==null&&Kc(Ee,qt,He,Ge,!0)}}e:{if(we=le?wi(le):window,Pe=we.nodeName&&we.nodeName.toLowerCase(),Pe==="select"||Pe==="input"&&we.type==="file")var Ve=i;else if(ht(we))if(l)Ve=L;else{Ve=k;var Ke=S}else(Pe=we.nodeName)&&Pe.toLowerCase()==="input"&&(we.type==="checkbox"||we.type==="radio")&&(Ve=R);if(Ve&&(Ve=Ve(t,le))){Gs(Ee,Ve,c,Ne);break e}Ke&&Ke(t,we,le),t==="focusout"&&(Ke=we._wrapperState)&&Ke.controlled&&we.type==="number"&&ut(we,"number",we.value)}switch(Ke=le?wi(le):window,t){case"focusin":(ht(Ke)||Ke.contentEditable==="true")&&(Kt=Ke,yt=le,Bt=null);break;case"focusout":Bt=yt=Kt=null;break;case"mousedown":yn=!0;break;case"contextmenu":case"mouseup":case"dragend":yn=!1,Gr(Ee,c,Ne);break;case"selectionchange":if(Jn)break;case"keydown":case"keyup":Gr(Ee,c,Ne)}var qe;if(hs)e:{switch(t){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else pn?Qa(t,c)&&($e="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&($e="onCompositionStart");$e&&(Qn&&c.locale!=="ko"&&(pn||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&pn&&(qe=Va()):(wr=Ne,ea="value"in wr?wr.value:wr.textContent,pn=!0)),Ke=el(le,$e),0<Ke.length&&($e=new Ct($e,t,null,c,Ne),Ee.push({event:$e,listeners:Ke}),qe?$e.data=qe:(qe=aa(c),qe!==null&&($e.data=qe)))),(qe=Ka?io(t,c):la(t,c))&&(le=el(le,"onBeforeInput"),0<le.length&&(Ne=new Ct("onBeforeInput","beforeinput",null,c,Ne),Ee.push({event:Ne,listeners:le}),Ne.data=qe))}Zc(Ee,s)})}function da(t,s,c){return{instance:t,listener:s,currentTarget:c}}function el(t,s){for(var c=s+"Capture",d=[];t!==null;){var p=t,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Nn(t,c),y!=null&&d.unshift(da(t,y,p)),y=Nn(t,s),y!=null&&d.push(da(t,y,p))),t=t.return}return d}function pi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kc(t,s,c,d,p){for(var y=s._reactName,A=[];c!==null&&c!==d;){var O=c,F=O.alternate,le=O.stateNode;if(F!==null&&F===d)break;O.tag===5&&le!==null&&(O=le,p?(F=Nn(c,y),F!=null&&A.unshift(da(c,F,O))):p||(F=Nn(c,y),F!=null&&A.push(da(c,F,O)))),c=c.return}A.length!==0&&t.push({event:s,listeners:A})}var B0=/\r\n?/g,L0=/\u0000|\uFFFD/g;function qc(t){return(typeof t=="string"?t:""+t).replace(B0,`
`).replace(L0,"")}function tl(t,s,c){if(s=qc(s),qc(t)!==s&&c)throw Error(x(425))}function nl(){}var uo=null,ho=null;function fo(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var xo=typeof setTimeout=="function"?setTimeout:void 0,F0=typeof clearTimeout=="function"?clearTimeout:void 0,Qc=typeof Promise=="function"?Promise:void 0,W0=typeof queueMicrotask=="function"?queueMicrotask:typeof Qc<"u"?function(t){return Qc.resolve(null).then(t).catch(U0)}:xo;function U0(t){setTimeout(function(){throw t})}function go(t,s){var c=s,d=0;do{var p=c.nextSibling;if(t.removeChild(c),p&&p.nodeType===8)if(c=p.data,c==="/$"){if(d===0){t.removeChild(p),yr(s);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=p}while(c);yr(s)}function gs(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Jc(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return t;s--}else c==="/$"&&s++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),Mr="__reactFiber$"+yi,ha="__reactProps$"+yi,Vr="__reactContainer$"+yi,mo="__reactEvents$"+yi,z0="__reactListeners$"+yi,H0="__reactHandles$"+yi;function Vs(t){var s=t[Mr];if(s)return s;for(var c=t.parentNode;c;){if(s=c[Vr]||c[Mr]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(t=Jc(t);t!==null;){if(c=t[Mr])return c;t=Jc(t)}return s}t=c,c=t.parentNode}return null}function fa(t){return t=t[Mr]||t[Vr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(x(33))}function rl(t){return t[ha]||null}var po=[],bi=-1;function ms(t){return{current:t}}function _t(t){0>bi||(t.current=po[bi],po[bi]=null,bi--)}function Rt(t,s){bi++,po[bi]=t.current,t.current=s}var ps={},An=ms(ps),Ln=ms(!1),Xs=ps;function vi(t,s){var c=t.type.contextTypes;if(!c)return ps;var d=t.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in c)p[y]=s[y];return d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=p),p}function Fn(t){return t=t.childContextTypes,t!=null}function sl(){_t(Ln),_t(An)}function $c(t,s,c){if(An.current!==ps)throw Error(x(168));Rt(An,s),Rt(Ln,c)}function eu(t,s,c){var d=t.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return c;d=d.getChildContext();for(var p in d)if(!(p in s))throw Error(x(108,Be(t)||"Unknown",p));return H({},c,d)}function il(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ps,Xs=An.current,Rt(An,t),Rt(Ln,Ln.current),!0}function tu(t,s,c){var d=t.stateNode;if(!d)throw Error(x(169));c?(t=eu(t,s,Xs),d.__reactInternalMemoizedMergedChildContext=t,_t(Ln),_t(An),Rt(An,t)):_t(Ln),Rt(Ln,c)}var Xr=null,al=!1,yo=!1;function nu(t){Xr===null?Xr=[t]:Xr.push(t)}function G0(t){al=!0,nu(t)}function ys(){if(!yo&&Xr!==null){yo=!0;var t=0,s=it;try{var c=Xr;for(it=1;t<c.length;t++){var d=c[t];do d=d(!0);while(d!==null)}Xr=null,al=!1}catch(p){throw Xr!==null&&(Xr=Xr.slice(t+1)),Zn(ge,ys),p}finally{it=s,yo=!1}}return null}var Ni=[],Ci=0,ll=null,ol=0,dr=[],hr=0,Zs=null,Zr=1,Yr="";function Ys(t,s){Ni[Ci++]=ol,Ni[Ci++]=ll,ll=t,ol=s}function ru(t,s,c){dr[hr++]=Zr,dr[hr++]=Yr,dr[hr++]=Zs,Zs=t;var d=Zr;t=Yr;var p=32-jn(d)-1;d&=~(1<<p),c+=1;var y=32-jn(s)+p;if(30<y){var A=p-p%5;y=(d&(1<<A)-1).toString(32),d>>=A,p-=A,Zr=1<<32-jn(s)+p|c<<p|d,Yr=y+t}else Zr=1<<y|c<<p|d,Yr=t}function wo(t){t.return!==null&&(Ys(t,1),ru(t,1,0))}function bo(t){for(;t===ll;)ll=Ni[--Ci],Ni[Ci]=null,ol=Ni[--Ci],Ni[Ci]=null;for(;t===Zs;)Zs=dr[--hr],dr[hr]=null,Yr=dr[--hr],dr[hr]=null,Zr=dr[--hr],dr[hr]=null}var $n=null,er=null,Ot=!1,vr=null;function su(t,s){var c=mr(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=t,s=t.deletions,s===null?(t.deletions=[c],t.flags|=16):s.push(c)}function iu(t,s){switch(t.tag){case 5:var c=t.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,$n=t,er=gs(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,$n=t,er=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=Zs!==null?{id:Zr,overflow:Yr}:null,t.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=mr(18,null,null,0),c.stateNode=s,c.return=t,t.child=c,$n=t,er=null,!0):!1;default:return!1}}function vo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function No(t){if(Ot){var s=er;if(s){var c=s;if(!iu(t,s)){if(vo(t))throw Error(x(418));s=gs(c.nextSibling);var d=$n;s&&iu(t,s)?su(d,c):(t.flags=t.flags&-4097|2,Ot=!1,$n=t)}}else{if(vo(t))throw Error(x(418));t.flags=t.flags&-4097|2,Ot=!1,$n=t}}}function au(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$n=t}function cl(t){if(t!==$n)return!1;if(!Ot)return au(t),Ot=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!fo(t.type,t.memoizedProps)),s&&(s=er)){if(vo(t))throw lu(),Error(x(418));for(;s;)su(t,s),s=gs(s.nextSibling)}if(au(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(x(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"){if(s===0){er=gs(t.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}t=t.nextSibling}er=null}}else er=$n?gs(t.stateNode.nextSibling):null;return!0}function lu(){for(var t=er;t;)t=gs(t.nextSibling)}function Ei(){er=$n=null,Ot=!1}function Co(t){vr===null?vr=[t]:vr.push(t)}var V0=ne.ReactCurrentBatchConfig;function xa(t,s,c){if(t=c.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(x(309));var d=c.stateNode}if(!d)throw Error(x(147,t));var p=d,y=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(A){var O=p.refs;A===null?delete O[y]:O[y]=A},s._stringRef=y,s)}if(typeof t!="string")throw Error(x(284));if(!c._owner)throw Error(x(290,t))}return t}function ul(t,s){throw t=Object.prototype.toString.call(s),Error(x(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function ou(t){var s=t._init;return s(t._payload)}function cu(t){function s(J,G){if(t){var re=J.deletions;re===null?(J.deletions=[G],J.flags|=16):re.push(G)}}function c(J,G){if(!t)return null;for(;G!==null;)s(J,G),G=G.sibling;return null}function d(J,G){for(J=new Map;G!==null;)G.key!==null?J.set(G.key,G):J.set(G.index,G),G=G.sibling;return J}function p(J,G){return J=As(J,G),J.index=0,J.sibling=null,J}function y(J,G,re){return J.index=re,t?(re=J.alternate,re!==null?(re=re.index,re<G?(J.flags|=2,G):re):(J.flags|=2,G)):(J.flags|=1048576,G)}function A(J){return t&&J.alternate===null&&(J.flags|=2),J}function O(J,G,re,Te){return G===null||G.tag!==6?(G=xc(re,J.mode,Te),G.return=J,G):(G=p(G,re),G.return=J,G)}function F(J,G,re,Te){var Ve=re.type;return Ve===X?Ne(J,G,re.props.children,Te,re.key):G!==null&&(G.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===pe&&ou(Ve)===G.type)?(Te=p(G,re.props),Te.ref=xa(J,G,re),Te.return=J,Te):(Te=Ol(re.type,re.key,re.props,null,J.mode,Te),Te.ref=xa(J,G,re),Te.return=J,Te)}function le(J,G,re,Te){return G===null||G.tag!==4||G.stateNode.containerInfo!==re.containerInfo||G.stateNode.implementation!==re.implementation?(G=gc(re,J.mode,Te),G.return=J,G):(G=p(G,re.children||[]),G.return=J,G)}function Ne(J,G,re,Te,Ve){return G===null||G.tag!==7?(G=ni(re,J.mode,Te,Ve),G.return=J,G):(G=p(G,re),G.return=J,G)}function Ee(J,G,re){if(typeof G=="string"&&G!==""||typeof G=="number")return G=xc(""+G,J.mode,re),G.return=J,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case be:return re=Ol(G.type,G.key,G.props,null,J.mode,re),re.ref=xa(J,null,G),re.return=J,re;case de:return G=gc(G,J.mode,re),G.return=J,G;case pe:var Te=G._init;return Ee(J,Te(G._payload),re)}if(kr(G)||q(G))return G=ni(G,J.mode,re,null),G.return=J,G;ul(J,G)}return null}function we(J,G,re,Te){var Ve=G!==null?G.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Ve!==null?null:O(J,G,""+re,Te);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case be:return re.key===Ve?F(J,G,re,Te):null;case de:return re.key===Ve?le(J,G,re,Te):null;case pe:return Ve=re._init,we(J,G,Ve(re._payload),Te)}if(kr(re)||q(re))return Ve!==null?null:Ne(J,G,re,Te,null);ul(J,re)}return null}function Pe(J,G,re,Te,Ve){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return J=J.get(re)||null,O(G,J,""+Te,Ve);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case be:return J=J.get(Te.key===null?re:Te.key)||null,F(G,J,Te,Ve);case de:return J=J.get(Te.key===null?re:Te.key)||null,le(G,J,Te,Ve);case pe:var Ke=Te._init;return Pe(J,G,re,Ke(Te._payload),Ve)}if(kr(Te)||q(Te))return J=J.get(re)||null,Ne(G,J,Te,Ve,null);ul(G,Te)}return null}function He(J,G,re,Te){for(var Ve=null,Ke=null,qe=G,$e=G=0,xn=null;qe!==null&&$e<re.length;$e++){qe.index>$e?(xn=qe,qe=null):xn=qe.sibling;var mt=we(J,qe,re[$e],Te);if(mt===null){qe===null&&(qe=xn);break}t&&qe&&mt.alternate===null&&s(J,qe),G=y(mt,G,$e),Ke===null?Ve=mt:Ke.sibling=mt,Ke=mt,qe=xn}if($e===re.length)return c(J,qe),Ot&&Ys(J,$e),Ve;if(qe===null){for(;$e<re.length;$e++)qe=Ee(J,re[$e],Te),qe!==null&&(G=y(qe,G,$e),Ke===null?Ve=qe:Ke.sibling=qe,Ke=qe);return Ot&&Ys(J,$e),Ve}for(qe=d(J,qe);$e<re.length;$e++)xn=Pe(qe,J,$e,re[$e],Te),xn!==null&&(t&&xn.alternate!==null&&qe.delete(xn.key===null?$e:xn.key),G=y(xn,G,$e),Ke===null?Ve=xn:Ke.sibling=xn,Ke=xn);return t&&qe.forEach(function(ks){return s(J,ks)}),Ot&&Ys(J,$e),Ve}function Ge(J,G,re,Te){var Ve=q(re);if(typeof Ve!="function")throw Error(x(150));if(re=Ve.call(re),re==null)throw Error(x(151));for(var Ke=Ve=null,qe=G,$e=G=0,xn=null,mt=re.next();qe!==null&&!mt.done;$e++,mt=re.next()){qe.index>$e?(xn=qe,qe=null):xn=qe.sibling;var ks=we(J,qe,mt.value,Te);if(ks===null){qe===null&&(qe=xn);break}t&&qe&&ks.alternate===null&&s(J,qe),G=y(ks,G,$e),Ke===null?Ve=ks:Ke.sibling=ks,Ke=ks,qe=xn}if(mt.done)return c(J,qe),Ot&&Ys(J,$e),Ve;if(qe===null){for(;!mt.done;$e++,mt=re.next())mt=Ee(J,mt.value,Te),mt!==null&&(G=y(mt,G,$e),Ke===null?Ve=mt:Ke.sibling=mt,Ke=mt);return Ot&&Ys(J,$e),Ve}for(qe=d(J,qe);!mt.done;$e++,mt=re.next())mt=Pe(qe,J,$e,mt.value,Te),mt!==null&&(t&&mt.alternate!==null&&qe.delete(mt.key===null?$e:mt.key),G=y(mt,G,$e),Ke===null?Ve=mt:Ke.sibling=mt,Ke=mt);return t&&qe.forEach(function(E1){return s(J,E1)}),Ot&&Ys(J,$e),Ve}function qt(J,G,re,Te){if(typeof re=="object"&&re!==null&&re.type===X&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case be:e:{for(var Ve=re.key,Ke=G;Ke!==null;){if(Ke.key===Ve){if(Ve=re.type,Ve===X){if(Ke.tag===7){c(J,Ke.sibling),G=p(Ke,re.props.children),G.return=J,J=G;break e}}else if(Ke.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===pe&&ou(Ve)===Ke.type){c(J,Ke.sibling),G=p(Ke,re.props),G.ref=xa(J,Ke,re),G.return=J,J=G;break e}c(J,Ke);break}else s(J,Ke);Ke=Ke.sibling}re.type===X?(G=ni(re.props.children,J.mode,Te,re.key),G.return=J,J=G):(Te=Ol(re.type,re.key,re.props,null,J.mode,Te),Te.ref=xa(J,G,re),Te.return=J,J=Te)}return A(J);case de:e:{for(Ke=re.key;G!==null;){if(G.key===Ke)if(G.tag===4&&G.stateNode.containerInfo===re.containerInfo&&G.stateNode.implementation===re.implementation){c(J,G.sibling),G=p(G,re.children||[]),G.return=J,J=G;break e}else{c(J,G);break}else s(J,G);G=G.sibling}G=gc(re,J.mode,Te),G.return=J,J=G}return A(J);case pe:return Ke=re._init,qt(J,G,Ke(re._payload),Te)}if(kr(re))return He(J,G,re,Te);if(q(re))return Ge(J,G,re,Te);ul(J,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,G!==null&&G.tag===6?(c(J,G.sibling),G=p(G,re),G.return=J,J=G):(c(J,G),G=xc(re,J.mode,Te),G.return=J,J=G),A(J)):c(J,G)}return qt}var Si=cu(!0),uu=cu(!1),dl=ms(null),hl=null,Ai=null,Eo=null;function So(){Eo=Ai=hl=null}function Ao(t){var s=dl.current;_t(dl),t._currentValue=s}function ko(t,s,c){for(;t!==null;){var d=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),t===c)break;t=t.return}}function ki(t,s){hl=t,Eo=Ai=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(Wn=!0),t.firstContext=null)}function fr(t){var s=t._currentValue;if(Eo!==t)if(t={context:t,memoizedValue:s,next:null},Ai===null){if(hl===null)throw Error(x(308));Ai=t,hl.dependencies={lanes:0,firstContext:t}}else Ai=Ai.next=t;return s}var Ks=null;function Io(t){Ks===null?Ks=[t]:Ks.push(t)}function du(t,s,c,d){var p=s.interleaved;return p===null?(c.next=c,Io(s)):(c.next=p.next,p.next=c),s.interleaved=c,Kr(t,d)}function Kr(t,s){t.lanes|=s;var c=t.alternate;for(c!==null&&(c.lanes|=s),c=t,t=t.return;t!==null;)t.childLanes|=s,c=t.alternate,c!==null&&(c.childLanes|=s),c=t,t=t.return;return c.tag===3?c.stateNode:null}var ws=!1;function To(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hu(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qr(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function bs(t,s,c){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(gt&2)!==0){var p=d.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),d.pending=s,Kr(t,c)}return p=d.interleaved,p===null?(s.next=s,Io(d)):(s.next=p.next,p.next=s),d.interleaved=s,Kr(t,c)}function fl(t,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var d=s.lanes;d&=t.pendingLanes,c|=d,s.lanes=c,Ut(t,c)}}function fu(t,s){var c=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var p=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var A={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};y===null?p=y=A:y=y.next=A,c=c.next}while(c!==null);y===null?p=y=s:y=y.next=s}else p=y=s;c={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=s:t.next=s,c.lastBaseUpdate=s}function xl(t,s,c,d){var p=t.updateQueue;ws=!1;var y=p.firstBaseUpdate,A=p.lastBaseUpdate,O=p.shared.pending;if(O!==null){p.shared.pending=null;var F=O,le=F.next;F.next=null,A===null?y=le:A.next=le,A=F;var Ne=t.alternate;Ne!==null&&(Ne=Ne.updateQueue,O=Ne.lastBaseUpdate,O!==A&&(O===null?Ne.firstBaseUpdate=le:O.next=le,Ne.lastBaseUpdate=F))}if(y!==null){var Ee=p.baseState;A=0,Ne=le=F=null,O=y;do{var we=O.lane,Pe=O.eventTime;if((d&we)===we){Ne!==null&&(Ne=Ne.next={eventTime:Pe,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var He=t,Ge=O;switch(we=s,Pe=c,Ge.tag){case 1:if(He=Ge.payload,typeof He=="function"){Ee=He.call(Pe,Ee,we);break e}Ee=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Ge.payload,we=typeof He=="function"?He.call(Pe,Ee,we):He,we==null)break e;Ee=H({},Ee,we);break e;case 2:ws=!0}}O.callback!==null&&O.lane!==0&&(t.flags|=64,we=p.effects,we===null?p.effects=[O]:we.push(O))}else Pe={eventTime:Pe,lane:we,tag:O.tag,payload:O.payload,callback:O.callback,next:null},Ne===null?(le=Ne=Pe,F=Ee):Ne=Ne.next=Pe,A|=we;if(O=O.next,O===null){if(O=p.shared.pending,O===null)break;we=O,O=we.next,we.next=null,p.lastBaseUpdate=we,p.shared.pending=null}}while(!0);if(Ne===null&&(F=Ee),p.baseState=F,p.firstBaseUpdate=le,p.lastBaseUpdate=Ne,s=p.shared.interleaved,s!==null){p=s;do A|=p.lane,p=p.next;while(p!==s)}else y===null&&(p.shared.lanes=0);Js|=A,t.lanes=A,t.memoizedState=Ee}}function xu(t,s,c){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var d=t[s],p=d.callback;if(p!==null){if(d.callback=null,d=c,typeof p!="function")throw Error(x(191,p));p.call(d)}}}var ga={},Or=ms(ga),ma=ms(ga),pa=ms(ga);function qs(t){if(t===ga)throw Error(x(174));return t}function Ro(t,s){switch(Rt(pa,s),Rt(ma,t),Rt(Or,ga),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ai(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=ai(s,t)}_t(Or),Rt(Or,s)}function Ii(){_t(Or),_t(ma),_t(pa)}function gu(t){qs(pa.current);var s=qs(Or.current),c=ai(s,t.type);s!==c&&(Rt(ma,t),Rt(Or,c))}function jo(t){ma.current===t&&(_t(Or),_t(ma))}var Lt=ms(0);function gl(t){for(var s=t;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var _o=[];function Mo(){for(var t=0;t<_o.length;t++)_o[t]._workInProgressVersionPrimary=null;_o.length=0}var ml=ne.ReactCurrentDispatcher,Oo=ne.ReactCurrentBatchConfig,Qs=0,Ft=null,ln=null,hn=null,pl=!1,ya=!1,wa=0,X0=0;function kn(){throw Error(x(321))}function Do(t,s){if(s===null)return!1;for(var c=0;c<s.length&&c<t.length;c++)if(!K(t[c],s[c]))return!1;return!0}function Po(t,s,c,d,p,y){if(Qs=y,Ft=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ml.current=t===null||t.memoizedState===null?q0:Q0,t=c(d,p),ya){y=0;do{if(ya=!1,wa=0,25<=y)throw Error(x(301));y+=1,hn=ln=null,s.updateQueue=null,ml.current=J0,t=c(d,p)}while(ya)}if(ml.current=bl,s=ln!==null&&ln.next!==null,Qs=0,hn=ln=Ft=null,pl=!1,s)throw Error(x(300));return t}function Bo(){var t=wa!==0;return wa=0,t}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return hn===null?Ft.memoizedState=hn=t:hn=hn.next=t,hn}function xr(){if(ln===null){var t=Ft.alternate;t=t!==null?t.memoizedState:null}else t=ln.next;var s=hn===null?Ft.memoizedState:hn.next;if(s!==null)hn=s,ln=t;else{if(t===null)throw Error(x(310));ln=t,t={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},hn===null?Ft.memoizedState=hn=t:hn=hn.next=t}return hn}function ba(t,s){return typeof s=="function"?s(t):s}function Lo(t){var s=xr(),c=s.queue;if(c===null)throw Error(x(311));c.lastRenderedReducer=t;var d=ln,p=d.baseQueue,y=c.pending;if(y!==null){if(p!==null){var A=p.next;p.next=y.next,y.next=A}d.baseQueue=p=y,c.pending=null}if(p!==null){y=p.next,d=d.baseState;var O=A=null,F=null,le=y;do{var Ne=le.lane;if((Qs&Ne)===Ne)F!==null&&(F=F.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),d=le.hasEagerState?le.eagerState:t(d,le.action);else{var Ee={lane:Ne,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};F===null?(O=F=Ee,A=d):F=F.next=Ee,Ft.lanes|=Ne,Js|=Ne}le=le.next}while(le!==null&&le!==y);F===null?A=d:F.next=O,K(d,s.memoizedState)||(Wn=!0),s.memoizedState=d,s.baseState=A,s.baseQueue=F,c.lastRenderedState=d}if(t=c.interleaved,t!==null){p=t;do y=p.lane,Ft.lanes|=y,Js|=y,p=p.next;while(p!==t)}else p===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function Fo(t){var s=xr(),c=s.queue;if(c===null)throw Error(x(311));c.lastRenderedReducer=t;var d=c.dispatch,p=c.pending,y=s.memoizedState;if(p!==null){c.pending=null;var A=p=p.next;do y=t(y,A.action),A=A.next;while(A!==p);K(y,s.memoizedState)||(Wn=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),c.lastRenderedState=y}return[y,d]}function mu(){}function pu(t,s){var c=Ft,d=xr(),p=s(),y=!K(d.memoizedState,p);if(y&&(d.memoizedState=p,Wn=!0),d=d.queue,Wo(bu.bind(null,c,d,t),[t]),d.getSnapshot!==s||y||hn!==null&&hn.memoizedState.tag&1){if(c.flags|=2048,va(9,wu.bind(null,c,d,p,s),void 0,null),fn===null)throw Error(x(349));(Qs&30)!==0||yu(c,s,p)}return p}function yu(t,s,c){t.flags|=16384,t={getSnapshot:s,value:c},s=Ft.updateQueue,s===null?(s={lastEffect:null,stores:null},Ft.updateQueue=s,s.stores=[t]):(c=s.stores,c===null?s.stores=[t]:c.push(t))}function wu(t,s,c,d){s.value=c,s.getSnapshot=d,vu(s)&&Nu(t)}function bu(t,s,c){return c(function(){vu(s)&&Nu(t)})}function vu(t){var s=t.getSnapshot;t=t.value;try{var c=s();return!K(t,c)}catch{return!0}}function Nu(t){var s=Kr(t,1);s!==null&&Sr(s,t,1,-1)}function Cu(t){var s=Dr();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:t},s.queue=t,t=t.dispatch=K0.bind(null,Ft,t),[s.memoizedState,t]}function va(t,s,c,d){return t={tag:t,create:s,destroy:c,deps:d,next:null},s=Ft.updateQueue,s===null?(s={lastEffect:null,stores:null},Ft.updateQueue=s,s.lastEffect=t.next=t):(c=s.lastEffect,c===null?s.lastEffect=t.next=t:(d=c.next,c.next=t,t.next=d,s.lastEffect=t)),t}function Eu(){return xr().memoizedState}function yl(t,s,c,d){var p=Dr();Ft.flags|=t,p.memoizedState=va(1|s,c,void 0,d===void 0?null:d)}function wl(t,s,c,d){var p=xr();d=d===void 0?null:d;var y=void 0;if(ln!==null){var A=ln.memoizedState;if(y=A.destroy,d!==null&&Do(d,A.deps)){p.memoizedState=va(s,c,y,d);return}}Ft.flags|=t,p.memoizedState=va(1|s,c,y,d)}function Su(t,s){return yl(8390656,8,t,s)}function Wo(t,s){return wl(2048,8,t,s)}function Au(t,s){return wl(4,2,t,s)}function ku(t,s){return wl(4,4,t,s)}function Iu(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Tu(t,s,c){return c=c!=null?c.concat([t]):null,wl(4,4,Iu.bind(null,s,t),c)}function Uo(){}function Ru(t,s){var c=xr();s=s===void 0?null:s;var d=c.memoizedState;return d!==null&&s!==null&&Do(s,d[1])?d[0]:(c.memoizedState=[t,s],t)}function ju(t,s){var c=xr();s=s===void 0?null:s;var d=c.memoizedState;return d!==null&&s!==null&&Do(s,d[1])?d[0]:(t=t(),c.memoizedState=[t,s],t)}function _u(t,s,c){return(Qs&21)===0?(t.baseState&&(t.baseState=!1,Wn=!0),t.memoizedState=c):(K(c,s)||(c=nn(),Ft.lanes|=c,Js|=c,t.baseState=!0),s)}function Z0(t,s){var c=it;it=c!==0&&4>c?c:4,t(!0);var d=Oo.transition;Oo.transition={};try{t(!1),s()}finally{it=c,Oo.transition=d}}function Mu(){return xr().memoizedState}function Y0(t,s,c){var d=Es(t);if(c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},Ou(t))Du(s,c);else if(c=du(t,s,c,d),c!==null){var p=Mn();Sr(c,t,d,p),Pu(c,s,d)}}function K0(t,s,c){var d=Es(t),p={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Ou(t))Du(s,p);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var A=s.lastRenderedState,O=y(A,c);if(p.hasEagerState=!0,p.eagerState=O,K(O,A)){var F=s.interleaved;F===null?(p.next=p,Io(s)):(p.next=F.next,F.next=p),s.interleaved=p;return}}catch{}c=du(t,s,p,d),c!==null&&(p=Mn(),Sr(c,t,d,p),Pu(c,s,d))}}function Ou(t){var s=t.alternate;return t===Ft||s!==null&&s===Ft}function Du(t,s){ya=pl=!0;var c=t.pending;c===null?s.next=s:(s.next=c.next,c.next=s),t.pending=s}function Pu(t,s,c){if((c&4194240)!==0){var d=s.lanes;d&=t.pendingLanes,c|=d,s.lanes=c,Ut(t,c)}}var bl={readContext:fr,useCallback:kn,useContext:kn,useEffect:kn,useImperativeHandle:kn,useInsertionEffect:kn,useLayoutEffect:kn,useMemo:kn,useReducer:kn,useRef:kn,useState:kn,useDebugValue:kn,useDeferredValue:kn,useTransition:kn,useMutableSource:kn,useSyncExternalStore:kn,useId:kn,unstable_isNewReconciler:!1},q0={readContext:fr,useCallback:function(t,s){return Dr().memoizedState=[t,s===void 0?null:s],t},useContext:fr,useEffect:Su,useImperativeHandle:function(t,s,c){return c=c!=null?c.concat([t]):null,yl(4194308,4,Iu.bind(null,s,t),c)},useLayoutEffect:function(t,s){return yl(4194308,4,t,s)},useInsertionEffect:function(t,s){return yl(4,2,t,s)},useMemo:function(t,s){var c=Dr();return s=s===void 0?null:s,t=t(),c.memoizedState=[t,s],t},useReducer:function(t,s,c){var d=Dr();return s=c!==void 0?c(s):s,d.memoizedState=d.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},d.queue=t,t=t.dispatch=Y0.bind(null,Ft,t),[d.memoizedState,t]},useRef:function(t){var s=Dr();return t={current:t},s.memoizedState=t},useState:Cu,useDebugValue:Uo,useDeferredValue:function(t){return Dr().memoizedState=t},useTransition:function(){var t=Cu(!1),s=t[0];return t=Z0.bind(null,t[1]),Dr().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,c){var d=Ft,p=Dr();if(Ot){if(c===void 0)throw Error(x(407));c=c()}else{if(c=s(),fn===null)throw Error(x(349));(Qs&30)!==0||yu(d,s,c)}p.memoizedState=c;var y={value:c,getSnapshot:s};return p.queue=y,Su(bu.bind(null,d,y,t),[t]),d.flags|=2048,va(9,wu.bind(null,d,y,c,s),void 0,null),c},useId:function(){var t=Dr(),s=fn.identifierPrefix;if(Ot){var c=Yr,d=Zr;c=(d&~(1<<32-jn(d)-1)).toString(32)+c,s=":"+s+"R"+c,c=wa++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=X0++,s=":"+s+"r"+c.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Q0={readContext:fr,useCallback:Ru,useContext:fr,useEffect:Wo,useImperativeHandle:Tu,useInsertionEffect:Au,useLayoutEffect:ku,useMemo:ju,useReducer:Lo,useRef:Eu,useState:function(){return Lo(ba)},useDebugValue:Uo,useDeferredValue:function(t){var s=xr();return _u(s,ln.memoizedState,t)},useTransition:function(){var t=Lo(ba)[0],s=xr().memoizedState;return[t,s]},useMutableSource:mu,useSyncExternalStore:pu,useId:Mu,unstable_isNewReconciler:!1},J0={readContext:fr,useCallback:Ru,useContext:fr,useEffect:Wo,useImperativeHandle:Tu,useInsertionEffect:Au,useLayoutEffect:ku,useMemo:ju,useReducer:Fo,useRef:Eu,useState:function(){return Fo(ba)},useDebugValue:Uo,useDeferredValue:function(t){var s=xr();return ln===null?s.memoizedState=t:_u(s,ln.memoizedState,t)},useTransition:function(){var t=Fo(ba)[0],s=xr().memoizedState;return[t,s]},useMutableSource:mu,useSyncExternalStore:pu,useId:Mu,unstable_isNewReconciler:!1};function Nr(t,s){if(t&&t.defaultProps){s=H({},s),t=t.defaultProps;for(var c in t)s[c]===void 0&&(s[c]=t[c]);return s}return s}function zo(t,s,c,d){s=t.memoizedState,c=c(d,s),c=c==null?s:H({},s,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var vl={isMounted:function(t){return(t=t._reactInternals)?Bn(t)===t:!1},enqueueSetState:function(t,s,c){t=t._reactInternals;var d=Mn(),p=Es(t),y=qr(d,p);y.payload=s,c!=null&&(y.callback=c),s=bs(t,y,p),s!==null&&(Sr(s,t,p,d),fl(s,t,p))},enqueueReplaceState:function(t,s,c){t=t._reactInternals;var d=Mn(),p=Es(t),y=qr(d,p);y.tag=1,y.payload=s,c!=null&&(y.callback=c),s=bs(t,y,p),s!==null&&(Sr(s,t,p,d),fl(s,t,p))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var c=Mn(),d=Es(t),p=qr(c,d);p.tag=2,s!=null&&(p.callback=s),s=bs(t,p,d),s!==null&&(Sr(s,t,d,c),fl(s,t,d))}};function Bu(t,s,c,d,p,y,A){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,y,A):s.prototype&&s.prototype.isPureReactComponent?!se(c,d)||!se(p,y):!0}function Lu(t,s,c){var d=!1,p=ps,y=s.contextType;return typeof y=="object"&&y!==null?y=fr(y):(p=Fn(s)?Xs:An.current,d=s.contextTypes,y=(d=d!=null)?vi(t,p):ps),s=new s(c,y),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=vl,t.stateNode=s,s._reactInternals=t,d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=p,t.__reactInternalMemoizedMaskedChildContext=y),s}function Fu(t,s,c,d){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==t&&vl.enqueueReplaceState(s,s.state,null)}function Ho(t,s,c,d){var p=t.stateNode;p.props=c,p.state=t.memoizedState,p.refs={},To(t);var y=s.contextType;typeof y=="object"&&y!==null?p.context=fr(y):(y=Fn(s)?Xs:An.current,p.context=vi(t,y)),p.state=t.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(zo(t,s,y,c),p.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&vl.enqueueReplaceState(p,p.state,null),xl(t,c,p,d),p.state=t.memoizedState),typeof p.componentDidMount=="function"&&(t.flags|=4194308)}function Ti(t,s){try{var c="",d=s;do c+=ye(d),d=d.return;while(d);var p=c}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:t,source:s,stack:p,digest:null}}function Go(t,s,c){return{value:t,source:null,stack:c??null,digest:s??null}}function Vo(t,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var $0=typeof WeakMap=="function"?WeakMap:Map;function Wu(t,s,c){c=qr(-1,c),c.tag=3,c.payload={element:null};var d=s.value;return c.callback=function(){Il||(Il=!0,ac=d),Vo(t,s)},c}function Uu(t,s,c){c=qr(-1,c),c.tag=3;var d=t.type.getDerivedStateFromError;if(typeof d=="function"){var p=s.value;c.payload=function(){return d(p)},c.callback=function(){Vo(t,s)}}var y=t.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(c.callback=function(){Vo(t,s),typeof d!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var A=s.stack;this.componentDidCatch(s.value,{componentStack:A!==null?A:""})}),c}function zu(t,s,c){var d=t.pingCache;if(d===null){d=t.pingCache=new $0;var p=new Set;d.set(s,p)}else p=d.get(s),p===void 0&&(p=new Set,d.set(s,p));p.has(c)||(p.add(c),t=f1.bind(null,t,s,c),s.then(t,t))}function Hu(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Gu(t,s,c,d,p){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=qr(-1,1),s.tag=2,bs(c,s,1))),c.lanes|=1),t):(t.flags|=65536,t.lanes=p,t)}var e1=ne.ReactCurrentOwner,Wn=!1;function _n(t,s,c,d){s.child=t===null?uu(s,null,c,d):Si(s,t.child,c,d)}function Vu(t,s,c,d,p){c=c.render;var y=s.ref;return ki(s,p),d=Po(t,s,c,d,y,p),c=Bo(),t!==null&&!Wn?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~p,Qr(t,s,p)):(Ot&&c&&wo(s),s.flags|=1,_n(t,s,d,p),s.child)}function Xu(t,s,c,d,p){if(t===null){var y=c.type;return typeof y=="function"&&!fc(y)&&y.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=y,Zu(t,s,y,d,p)):(t=Ol(c.type,null,d,s,s.mode,p),t.ref=s.ref,t.return=s,s.child=t)}if(y=t.child,(t.lanes&p)===0){var A=y.memoizedProps;if(c=c.compare,c=c!==null?c:se,c(A,d)&&t.ref===s.ref)return Qr(t,s,p)}return s.flags|=1,t=As(y,d),t.ref=s.ref,t.return=s,s.child=t}function Zu(t,s,c,d,p){if(t!==null){var y=t.memoizedProps;if(se(y,d)&&t.ref===s.ref)if(Wn=!1,s.pendingProps=d=y,(t.lanes&p)!==0)(t.flags&131072)!==0&&(Wn=!0);else return s.lanes=t.lanes,Qr(t,s,p)}return Xo(t,s,c,d,p)}function Yu(t,s,c){var d=s.pendingProps,p=d.children,y=t!==null?t.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(ji,tr),tr|=c;else{if((c&1073741824)===0)return t=y!==null?y.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Rt(ji,tr),tr|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:c,Rt(ji,tr),tr|=d}else y!==null?(d=y.baseLanes|c,s.memoizedState=null):d=c,Rt(ji,tr),tr|=d;return _n(t,s,p,c),s.child}function Ku(t,s){var c=s.ref;(t===null&&c!==null||t!==null&&t.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function Xo(t,s,c,d,p){var y=Fn(c)?Xs:An.current;return y=vi(s,y),ki(s,p),c=Po(t,s,c,d,y,p),d=Bo(),t!==null&&!Wn?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~p,Qr(t,s,p)):(Ot&&d&&wo(s),s.flags|=1,_n(t,s,c,p),s.child)}function qu(t,s,c,d,p){if(Fn(c)){var y=!0;il(s)}else y=!1;if(ki(s,p),s.stateNode===null)Cl(t,s),Lu(s,c,d),Ho(s,c,d,p),d=!0;else if(t===null){var A=s.stateNode,O=s.memoizedProps;A.props=O;var F=A.context,le=c.contextType;typeof le=="object"&&le!==null?le=fr(le):(le=Fn(c)?Xs:An.current,le=vi(s,le));var Ne=c.getDerivedStateFromProps,Ee=typeof Ne=="function"||typeof A.getSnapshotBeforeUpdate=="function";Ee||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(O!==d||F!==le)&&Fu(s,A,d,le),ws=!1;var we=s.memoizedState;A.state=we,xl(s,d,A,p),F=s.memoizedState,O!==d||we!==F||Ln.current||ws?(typeof Ne=="function"&&(zo(s,c,Ne,d),F=s.memoizedState),(O=ws||Bu(s,c,O,d,we,F,le))?(Ee||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(s.flags|=4194308)):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=F),A.props=d,A.state=F,A.context=le,d=O):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{A=s.stateNode,hu(t,s),O=s.memoizedProps,le=s.type===s.elementType?O:Nr(s.type,O),A.props=le,Ee=s.pendingProps,we=A.context,F=c.contextType,typeof F=="object"&&F!==null?F=fr(F):(F=Fn(c)?Xs:An.current,F=vi(s,F));var Pe=c.getDerivedStateFromProps;(Ne=typeof Pe=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(O!==Ee||we!==F)&&Fu(s,A,d,F),ws=!1,we=s.memoizedState,A.state=we,xl(s,d,A,p);var He=s.memoizedState;O!==Ee||we!==He||Ln.current||ws?(typeof Pe=="function"&&(zo(s,c,Pe,d),He=s.memoizedState),(le=ws||Bu(s,c,le,d,we,He,F)||!1)?(Ne||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(d,He,F),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(d,He,F)),typeof A.componentDidUpdate=="function"&&(s.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof A.componentDidUpdate!="function"||O===t.memoizedProps&&we===t.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&we===t.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=He),A.props=d,A.state=He,A.context=F,d=le):(typeof A.componentDidUpdate!="function"||O===t.memoizedProps&&we===t.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&we===t.memoizedState||(s.flags|=1024),d=!1)}return Zo(t,s,c,d,y,p)}function Zo(t,s,c,d,p,y){Ku(t,s);var A=(s.flags&128)!==0;if(!d&&!A)return p&&tu(s,c,!1),Qr(t,s,y);d=s.stateNode,e1.current=s;var O=A&&typeof c.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,t!==null&&A?(s.child=Si(s,t.child,null,y),s.child=Si(s,null,O,y)):_n(t,s,O,y),s.memoizedState=d.state,p&&tu(s,c,!0),s.child}function Qu(t){var s=t.stateNode;s.pendingContext?$c(t,s.pendingContext,s.pendingContext!==s.context):s.context&&$c(t,s.context,!1),Ro(t,s.containerInfo)}function Ju(t,s,c,d,p){return Ei(),Co(p),s.flags|=256,_n(t,s,c,d),s.child}var Yo={dehydrated:null,treeContext:null,retryLane:0};function Ko(t){return{baseLanes:t,cachePool:null,transitions:null}}function $u(t,s,c){var d=s.pendingProps,p=Lt.current,y=!1,A=(s.flags&128)!==0,O;if((O=A)||(O=t!==null&&t.memoizedState===null?!1:(p&2)!==0),O?(y=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(p|=1),Rt(Lt,p&1),t===null)return No(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(A=d.children,t=d.fallback,y?(d=s.mode,y=s.child,A={mode:"hidden",children:A},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=A):y=Dl(A,d,0,null),t=ni(t,d,c,null),y.return=s,t.return=s,y.sibling=t,s.child=y,s.child.memoizedState=Ko(c),s.memoizedState=Yo,t):qo(s,A));if(p=t.memoizedState,p!==null&&(O=p.dehydrated,O!==null))return t1(t,s,A,d,O,p,c);if(y){y=d.fallback,A=s.mode,p=t.child,O=p.sibling;var F={mode:"hidden",children:d.children};return(A&1)===0&&s.child!==p?(d=s.child,d.childLanes=0,d.pendingProps=F,s.deletions=null):(d=As(p,F),d.subtreeFlags=p.subtreeFlags&14680064),O!==null?y=As(O,y):(y=ni(y,A,c,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,A=t.child.memoizedState,A=A===null?Ko(c):{baseLanes:A.baseLanes|c,cachePool:null,transitions:A.transitions},y.memoizedState=A,y.childLanes=t.childLanes&~c,s.memoizedState=Yo,d}return y=t.child,t=y.sibling,d=As(y,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=c),d.return=s,d.sibling=null,t!==null&&(c=s.deletions,c===null?(s.deletions=[t],s.flags|=16):c.push(t)),s.child=d,s.memoizedState=null,d}function qo(t,s){return s=Dl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function Nl(t,s,c,d){return d!==null&&Co(d),Si(s,t.child,null,c),t=qo(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function t1(t,s,c,d,p,y,A){if(c)return s.flags&256?(s.flags&=-257,d=Go(Error(x(422))),Nl(t,s,A,d)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(y=d.fallback,p=s.mode,d=Dl({mode:"visible",children:d.children},p,0,null),y=ni(y,p,A,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,(s.mode&1)!==0&&Si(s,t.child,null,A),s.child.memoizedState=Ko(A),s.memoizedState=Yo,y);if((s.mode&1)===0)return Nl(t,s,A,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var O=d.dgst;return d=O,y=Error(x(419)),d=Go(y,d,void 0),Nl(t,s,A,d)}if(O=(A&t.childLanes)!==0,Wn||O){if(d=fn,d!==null){switch(A&-A){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|A))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,Kr(t,p),Sr(d,t,p,-1))}return hc(),d=Go(Error(x(421))),Nl(t,s,A,d)}return p.data==="$?"?(s.flags|=128,s.child=t.child,s=x1.bind(null,t),p._reactRetry=s,null):(t=y.treeContext,er=gs(p.nextSibling),$n=s,Ot=!0,vr=null,t!==null&&(dr[hr++]=Zr,dr[hr++]=Yr,dr[hr++]=Zs,Zr=t.id,Yr=t.overflow,Zs=s),s=qo(s,d.children),s.flags|=4096,s)}function ed(t,s,c){t.lanes|=s;var d=t.alternate;d!==null&&(d.lanes|=s),ko(t.return,s,c)}function Qo(t,s,c,d,p){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=c,y.tailMode=p)}function td(t,s,c){var d=s.pendingProps,p=d.revealOrder,y=d.tail;if(_n(t,s,d.children,c),d=Lt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ed(t,c,s);else if(t.tag===19)ed(t,c,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}d&=1}if(Rt(Lt,d),(s.mode&1)===0)s.memoizedState=null;else switch(p){case"forwards":for(c=s.child,p=null;c!==null;)t=c.alternate,t!==null&&gl(t)===null&&(p=c),c=c.sibling;c=p,c===null?(p=s.child,s.child=null):(p=c.sibling,c.sibling=null),Qo(s,!1,p,c,y);break;case"backwards":for(c=null,p=s.child,s.child=null;p!==null;){if(t=p.alternate,t!==null&&gl(t)===null){s.child=p;break}t=p.sibling,p.sibling=c,c=p,p=t}Qo(s,!0,c,null,y);break;case"together":Qo(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Cl(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function Qr(t,s,c){if(t!==null&&(s.dependencies=t.dependencies),Js|=s.lanes,(c&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(x(153));if(s.child!==null){for(t=s.child,c=As(t,t.pendingProps),s.child=c,c.return=s;t.sibling!==null;)t=t.sibling,c=c.sibling=As(t,t.pendingProps),c.return=s;c.sibling=null}return s.child}function n1(t,s,c){switch(s.tag){case 3:Qu(s),Ei();break;case 5:gu(s);break;case 1:Fn(s.type)&&il(s);break;case 4:Ro(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,p=s.memoizedProps.value;Rt(dl,d._currentValue),d._currentValue=p;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Rt(Lt,Lt.current&1),s.flags|=128,null):(c&s.child.childLanes)!==0?$u(t,s,c):(Rt(Lt,Lt.current&1),t=Qr(t,s,c),t!==null?t.sibling:null);Rt(Lt,Lt.current&1);break;case 19:if(d=(c&s.childLanes)!==0,(t.flags&128)!==0){if(d)return td(t,s,c);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Rt(Lt,Lt.current),d)break;return null;case 22:case 23:return s.lanes=0,Yu(t,s,c)}return Qr(t,s,c)}var nd,Jo,rd,sd;nd=function(t,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},Jo=function(){},rd=function(t,s,c,d){var p=t.memoizedProps;if(p!==d){t=s.stateNode,qs(Or.current);var y=null;switch(c){case"input":p=Gn(t,p),d=Gn(t,d),y=[];break;case"select":p=H({},p,{value:void 0}),d=H({},d,{value:void 0}),y=[];break;case"textarea":p=ts(t,p),d=ts(t,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(t.onclick=nl)}pt(c,d);var A;c=null;for(le in p)if(!d.hasOwnProperty(le)&&p.hasOwnProperty(le)&&p[le]!=null)if(le==="style"){var O=p[le];for(A in O)O.hasOwnProperty(A)&&(c||(c={}),c[A]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(C.hasOwnProperty(le)?y||(y=[]):(y=y||[]).push(le,null));for(le in d){var F=d[le];if(O=p?.[le],d.hasOwnProperty(le)&&F!==O&&(F!=null||O!=null))if(le==="style")if(O){for(A in O)!O.hasOwnProperty(A)||F&&F.hasOwnProperty(A)||(c||(c={}),c[A]="");for(A in F)F.hasOwnProperty(A)&&O[A]!==F[A]&&(c||(c={}),c[A]=F[A])}else c||(y||(y=[]),y.push(le,c)),c=F;else le==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,O=O?O.__html:void 0,F!=null&&O!==F&&(y=y||[]).push(le,F)):le==="children"?typeof F!="string"&&typeof F!="number"||(y=y||[]).push(le,""+F):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(C.hasOwnProperty(le)?(F!=null&&le==="onScroll"&&jt("scroll",t),y||O===F||(y=[])):(y=y||[]).push(le,F))}c&&(y=y||[]).push("style",c);var le=y;(s.updateQueue=le)&&(s.flags|=4)}},sd=function(t,s,c,d){c!==d&&(s.flags|=4)};function Na(t,s){if(!Ot)switch(t.tailMode){case"hidden":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function In(t){var s=t.alternate!==null&&t.alternate.child===t.child,c=0,d=0;if(s)for(var p=t.child;p!==null;)c|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)c|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=d,t.childLanes=c,s}function r1(t,s,c){var d=s.pendingProps;switch(bo(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(s),null;case 1:return Fn(s.type)&&sl(),In(s),null;case 3:return d=s.stateNode,Ii(),_t(Ln),_t(An),Mo(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(t===null||t.child===null)&&(cl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,vr!==null&&(cc(vr),vr=null))),Jo(t,s),In(s),null;case 5:jo(s);var p=qs(pa.current);if(c=s.type,t!==null&&s.stateNode!=null)rd(t,s,c,d,p),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(x(166));return In(s),null}if(t=qs(Or.current),cl(s)){d=s.stateNode,c=s.type;var y=s.memoizedProps;switch(d[Mr]=s,d[ha]=y,t=(s.mode&1)!==0,c){case"dialog":jt("cancel",d),jt("close",d);break;case"iframe":case"object":case"embed":jt("load",d);break;case"video":case"audio":for(p=0;p<ca.length;p++)jt(ca[p],d);break;case"source":jt("error",d);break;case"img":case"image":case"link":jt("error",d),jt("load",d);break;case"details":jt("toggle",d);break;case"input":vn(d,y),jt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},jt("invalid",d);break;case"textarea":Ui(d,y),jt("invalid",d)}pt(c,y),p=null;for(var A in y)if(y.hasOwnProperty(A)){var O=y[A];A==="children"?typeof O=="string"?d.textContent!==O&&(y.suppressHydrationWarning!==!0&&tl(d.textContent,O,t),p=["children",O]):typeof O=="number"&&d.textContent!==""+O&&(y.suppressHydrationWarning!==!0&&tl(d.textContent,O,t),p=["children",""+O]):C.hasOwnProperty(A)&&O!=null&&A==="onScroll"&&jt("scroll",d)}switch(c){case"input":Je(d),vt(d,y,!0);break;case"textarea":Je(d),ii(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=nl)}d=p,s.updateQueue=d,d!==null&&(s.flags|=4)}else{A=p.nodeType===9?p:p.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=On(c)),t==="http://www.w3.org/1999/xhtml"?c==="script"?(t=A.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof d.is=="string"?t=A.createElement(c,{is:d.is}):(t=A.createElement(c),c==="select"&&(A=t,d.multiple?A.multiple=!0:d.size&&(A.size=d.size))):t=A.createElementNS(t,c),t[Mr]=s,t[ha]=d,nd(t,s,!1,!1),s.stateNode=t;e:{switch(A=At(c,d),c){case"dialog":jt("cancel",t),jt("close",t),p=d;break;case"iframe":case"object":case"embed":jt("load",t),p=d;break;case"video":case"audio":for(p=0;p<ca.length;p++)jt(ca[p],t);p=d;break;case"source":jt("error",t),p=d;break;case"img":case"image":case"link":jt("error",t),jt("load",t),p=d;break;case"details":jt("toggle",t),p=d;break;case"input":vn(t,d),p=Gn(t,d),jt("invalid",t);break;case"option":p=d;break;case"select":t._wrapperState={wasMultiple:!!d.multiple},p=H({},d,{value:void 0}),jt("invalid",t);break;case"textarea":Ui(t,d),p=ts(t,d),jt("invalid",t);break;default:p=d}pt(c,p),O=p;for(y in O)if(O.hasOwnProperty(y)){var F=O[y];y==="style"?je(t,F):y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&cn(t,F)):y==="children"?typeof F=="string"?(c!=="textarea"||F!=="")&&ns(t,F):typeof F=="number"&&ns(t,""+F):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(C.hasOwnProperty(y)?F!=null&&y==="onScroll"&&jt("scroll",t):F!=null&&ie(t,y,F,A))}switch(c){case"input":Je(t),vt(t,d,!1);break;case"textarea":Je(t),ii(t);break;case"option":d.value!=null&&t.setAttribute("value",""+Me(d.value));break;case"select":t.multiple=!!d.multiple,y=d.value,y!=null?Fe(t,!!d.multiple,y,!1):d.defaultValue!=null&&Fe(t,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(t.onclick=nl)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return In(s),null;case 6:if(t&&s.stateNode!=null)sd(t,s,t.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(x(166));if(c=qs(pa.current),qs(Or.current),cl(s)){if(d=s.stateNode,c=s.memoizedProps,d[Mr]=s,(y=d.nodeValue!==c)&&(t=$n,t!==null))switch(t.tag){case 3:tl(d.nodeValue,c,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tl(d.nodeValue,c,(t.mode&1)!==0)}y&&(s.flags|=4)}else d=(c.nodeType===9?c:c.ownerDocument).createTextNode(d),d[Mr]=s,s.stateNode=d}return In(s),null;case 13:if(_t(Lt),d=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ot&&er!==null&&(s.mode&1)!==0&&(s.flags&128)===0)lu(),Ei(),s.flags|=98560,y=!1;else if(y=cl(s),d!==null&&d.dehydrated!==null){if(t===null){if(!y)throw Error(x(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(x(317));y[Mr]=s}else Ei(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;In(s),y=!1}else vr!==null&&(cc(vr),vr=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=c,s):(d=d!==null,d!==(t!==null&&t.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(Lt.current&1)!==0?on===0&&(on=3):hc())),s.updateQueue!==null&&(s.flags|=4),In(s),null);case 4:return Ii(),Jo(t,s),t===null&&ua(s.stateNode.containerInfo),In(s),null;case 10:return Ao(s.type._context),In(s),null;case 17:return Fn(s.type)&&sl(),In(s),null;case 19:if(_t(Lt),y=s.memoizedState,y===null)return In(s),null;if(d=(s.flags&128)!==0,A=y.rendering,A===null)if(d)Na(y,!1);else{if(on!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(A=gl(t),A!==null){for(s.flags|=128,Na(y,!1),d=A.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=c,c=s.child;c!==null;)y=c,t=d,y.flags&=14680066,A=y.alternate,A===null?(y.childLanes=0,y.lanes=t,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=A.childLanes,y.lanes=A.lanes,y.child=A.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=A.memoizedProps,y.memoizedState=A.memoizedState,y.updateQueue=A.updateQueue,y.type=A.type,t=A.dependencies,y.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),c=c.sibling;return Rt(Lt,Lt.current&1|2),s.child}t=t.sibling}y.tail!==null&&wt()>_i&&(s.flags|=128,d=!0,Na(y,!1),s.lanes=4194304)}else{if(!d)if(t=gl(A),t!==null){if(s.flags|=128,d=!0,c=t.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),Na(y,!0),y.tail===null&&y.tailMode==="hidden"&&!A.alternate&&!Ot)return In(s),null}else 2*wt()-y.renderingStartTime>_i&&c!==1073741824&&(s.flags|=128,d=!0,Na(y,!1),s.lanes=4194304);y.isBackwards?(A.sibling=s.child,s.child=A):(c=y.last,c!==null?c.sibling=A:s.child=A,y.last=A)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=wt(),s.sibling=null,c=Lt.current,Rt(Lt,d?c&1|2:c&1),s):(In(s),null);case 22:case 23:return dc(),d=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(tr&1073741824)!==0&&(In(s),s.subtreeFlags&6&&(s.flags|=8192)):In(s),null;case 24:return null;case 25:return null}throw Error(x(156,s.tag))}function s1(t,s){switch(bo(s),s.tag){case 1:return Fn(s.type)&&sl(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Ii(),_t(Ln),_t(An),Mo(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return jo(s),null;case 13:if(_t(Lt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(x(340));Ei()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return _t(Lt),null;case 4:return Ii(),null;case 10:return Ao(s.type._context),null;case 22:case 23:return dc(),null;case 24:return null;default:return null}}var El=!1,Tn=!1,i1=typeof WeakSet=="function"?WeakSet:Set,ze=null;function Ri(t,s){var c=t.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d){Ht(t,s,d)}else c.current=null}function $o(t,s,c){try{c()}catch(d){Ht(t,s,d)}}var id=!1;function a1(t,s){if(uo=jr,t=lt(),tt(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var A=0,O=-1,F=-1,le=0,Ne=0,Ee=t,we=null;t:for(;;){for(var Pe;Ee!==c||p!==0&&Ee.nodeType!==3||(O=A+p),Ee!==y||d!==0&&Ee.nodeType!==3||(F=A+d),Ee.nodeType===3&&(A+=Ee.nodeValue.length),(Pe=Ee.firstChild)!==null;)we=Ee,Ee=Pe;for(;;){if(Ee===t)break t;if(we===c&&++le===p&&(O=A),we===y&&++Ne===d&&(F=A),(Pe=Ee.nextSibling)!==null)break;Ee=we,we=Ee.parentNode}Ee=Pe}c=O===-1||F===-1?null:{start:O,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(ho={focusedElem:t,selectionRange:c},jr=!1,ze=s;ze!==null;)if(s=ze,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ze=t;else for(;ze!==null;){s=ze;try{var He=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(He!==null){var Ge=He.memoizedProps,qt=He.memoizedState,J=s.stateNode,G=J.getSnapshotBeforeUpdate(s.elementType===s.type?Ge:Nr(s.type,Ge),qt);J.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var re=s.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(Te){Ht(s,s.return,Te)}if(t=s.sibling,t!==null){t.return=s.return,ze=t;break}ze=s.return}return He=id,id=!1,He}function Ca(t,s,c){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&t)===t){var y=p.destroy;p.destroy=void 0,y!==void 0&&$o(s,c,y)}p=p.next}while(p!==d)}}function Sl(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&t)===t){var d=c.create;c.destroy=d()}c=c.next}while(c!==s)}}function ec(t){var s=t.ref;if(s!==null){var c=t.stateNode;t.tag,t=c,typeof s=="function"?s(t):s.current=t}}function ad(t){var s=t.alternate;s!==null&&(t.alternate=null,ad(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Mr],delete s[ha],delete s[mo],delete s[z0],delete s[H0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ld(t){return t.tag===5||t.tag===3||t.tag===4}function od(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ld(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tc(t,s,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(t,s):c.insertBefore(t,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(t,c)):(s=c,s.appendChild(t)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=nl));else if(d!==4&&(t=t.child,t!==null))for(tc(t,s,c),t=t.sibling;t!==null;)tc(t,s,c),t=t.sibling}function nc(t,s,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,s?c.insertBefore(t,s):c.appendChild(t);else if(d!==4&&(t=t.child,t!==null))for(nc(t,s,c),t=t.sibling;t!==null;)nc(t,s,c),t=t.sibling}var wn=null,Cr=!1;function vs(t,s,c){for(c=c.child;c!==null;)cd(t,s,c),c=c.sibling}function cd(t,s,c){if(st&&typeof st.onCommitFiberUnmount=="function")try{st.onCommitFiberUnmount(ft,c)}catch{}switch(c.tag){case 5:Tn||Ri(c,s);case 6:var d=wn,p=Cr;wn=null,vs(t,s,c),wn=d,Cr=p,wn!==null&&(Cr?(t=wn,c=c.stateNode,t.nodeType===8?t.parentNode.removeChild(c):t.removeChild(c)):wn.removeChild(c.stateNode));break;case 18:wn!==null&&(Cr?(t=wn,c=c.stateNode,t.nodeType===8?go(t.parentNode,c):t.nodeType===1&&go(t,c),yr(t)):go(wn,c.stateNode));break;case 4:d=wn,p=Cr,wn=c.stateNode.containerInfo,Cr=!0,vs(t,s,c),wn=d,Cr=p;break;case 0:case 11:case 14:case 15:if(!Tn&&(d=c.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,A=y.destroy;y=y.tag,A!==void 0&&((y&2)!==0||(y&4)!==0)&&$o(c,s,A),p=p.next}while(p!==d)}vs(t,s,c);break;case 1:if(!Tn&&(Ri(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(O){Ht(c,s,O)}vs(t,s,c);break;case 21:vs(t,s,c);break;case 22:c.mode&1?(Tn=(d=Tn)||c.memoizedState!==null,vs(t,s,c),Tn=d):vs(t,s,c);break;default:vs(t,s,c)}}function ud(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var c=t.stateNode;c===null&&(c=t.stateNode=new i1),s.forEach(function(d){var p=g1.bind(null,t,d);c.has(d)||(c.add(d),d.then(p,p))})}}function Er(t,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var p=c[d];try{var y=t,A=s,O=A;e:for(;O!==null;){switch(O.tag){case 5:wn=O.stateNode,Cr=!1;break e;case 3:wn=O.stateNode.containerInfo,Cr=!0;break e;case 4:wn=O.stateNode.containerInfo,Cr=!0;break e}O=O.return}if(wn===null)throw Error(x(160));cd(y,A,p),wn=null,Cr=!1;var F=p.alternate;F!==null&&(F.return=null),p.return=null}catch(le){Ht(p,s,le)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)dd(s,t),s=s.sibling}function dd(t,s){var c=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Er(s,t),Pr(t),d&4){try{Ca(3,t,t.return),Sl(3,t)}catch(Ge){Ht(t,t.return,Ge)}try{Ca(5,t,t.return)}catch(Ge){Ht(t,t.return,Ge)}}break;case 1:Er(s,t),Pr(t),d&512&&c!==null&&Ri(c,c.return);break;case 5:if(Er(s,t),Pr(t),d&512&&c!==null&&Ri(c,c.return),t.flags&32){var p=t.stateNode;try{ns(p,"")}catch(Ge){Ht(t,t.return,Ge)}}if(d&4&&(p=t.stateNode,p!=null)){var y=t.memoizedProps,A=c!==null?c.memoizedProps:y,O=t.type,F=t.updateQueue;if(t.updateQueue=null,F!==null)try{O==="input"&&y.type==="radio"&&y.name!=null&&Rn(p,y),At(O,A);var le=At(O,y);for(A=0;A<F.length;A+=2){var Ne=F[A],Ee=F[A+1];Ne==="style"?je(p,Ee):Ne==="dangerouslySetInnerHTML"?cn(p,Ee):Ne==="children"?ns(p,Ee):ie(p,Ne,Ee,le)}switch(O){case"input":Dt(p,y);break;case"textarea":ir(p,y);break;case"select":var we=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var Pe=y.value;Pe!=null?Fe(p,!!y.multiple,Pe,!1):we!==!!y.multiple&&(y.defaultValue!=null?Fe(p,!!y.multiple,y.defaultValue,!0):Fe(p,!!y.multiple,y.multiple?[]:"",!1))}p[ha]=y}catch(Ge){Ht(t,t.return,Ge)}}break;case 6:if(Er(s,t),Pr(t),d&4){if(t.stateNode===null)throw Error(x(162));p=t.stateNode,y=t.memoizedProps;try{p.nodeValue=y}catch(Ge){Ht(t,t.return,Ge)}}break;case 3:if(Er(s,t),Pr(t),d&4&&c!==null&&c.memoizedState.isDehydrated)try{yr(s.containerInfo)}catch(Ge){Ht(t,t.return,Ge)}break;case 4:Er(s,t),Pr(t);break;case 13:Er(s,t),Pr(t),p=t.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(ic=wt())),d&4&&ud(t);break;case 22:if(Ne=c!==null&&c.memoizedState!==null,t.mode&1?(Tn=(le=Tn)||Ne,Er(s,t),Tn=le):Er(s,t),Pr(t),d&8192){if(le=t.memoizedState!==null,(t.stateNode.isHidden=le)&&!Ne&&(t.mode&1)!==0)for(ze=t,Ne=t.child;Ne!==null;){for(Ee=ze=Ne;ze!==null;){switch(we=ze,Pe=we.child,we.tag){case 0:case 11:case 14:case 15:Ca(4,we,we.return);break;case 1:Ri(we,we.return);var He=we.stateNode;if(typeof He.componentWillUnmount=="function"){d=we,c=we.return;try{s=d,He.props=s.memoizedProps,He.state=s.memoizedState,He.componentWillUnmount()}catch(Ge){Ht(d,c,Ge)}}break;case 5:Ri(we,we.return);break;case 22:if(we.memoizedState!==null){xd(Ee);continue}}Pe!==null?(Pe.return=we,ze=Pe):xd(Ee)}Ne=Ne.sibling}e:for(Ne=null,Ee=t;;){if(Ee.tag===5){if(Ne===null){Ne=Ee;try{p=Ee.stateNode,le?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(O=Ee.stateNode,F=Ee.memoizedProps.style,A=F!=null&&F.hasOwnProperty("display")?F.display:null,O.style.display=Pt("display",A))}catch(Ge){Ht(t,t.return,Ge)}}}else if(Ee.tag===6){if(Ne===null)try{Ee.stateNode.nodeValue=le?"":Ee.memoizedProps}catch(Ge){Ht(t,t.return,Ge)}}else if((Ee.tag!==22&&Ee.tag!==23||Ee.memoizedState===null||Ee===t)&&Ee.child!==null){Ee.child.return=Ee,Ee=Ee.child;continue}if(Ee===t)break e;for(;Ee.sibling===null;){if(Ee.return===null||Ee.return===t)break e;Ne===Ee&&(Ne=null),Ee=Ee.return}Ne===Ee&&(Ne=null),Ee.sibling.return=Ee.return,Ee=Ee.sibling}}break;case 19:Er(s,t),Pr(t),d&4&&ud(t);break;case 21:break;default:Er(s,t),Pr(t)}}function Pr(t){var s=t.flags;if(s&2){try{e:{for(var c=t.return;c!==null;){if(ld(c)){var d=c;break e}c=c.return}throw Error(x(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(ns(p,""),d.flags&=-33);var y=od(t);nc(t,y,p);break;case 3:case 4:var A=d.stateNode.containerInfo,O=od(t);tc(t,O,A);break;default:throw Error(x(161))}}catch(F){Ht(t,t.return,F)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function l1(t,s,c){ze=t,hd(t)}function hd(t,s,c){for(var d=(t.mode&1)!==0;ze!==null;){var p=ze,y=p.child;if(p.tag===22&&d){var A=p.memoizedState!==null||El;if(!A){var O=p.alternate,F=O!==null&&O.memoizedState!==null||Tn;O=El;var le=Tn;if(El=A,(Tn=F)&&!le)for(ze=p;ze!==null;)A=ze,F=A.child,A.tag===22&&A.memoizedState!==null?gd(p):F!==null?(F.return=A,ze=F):gd(p);for(;y!==null;)ze=y,hd(y),y=y.sibling;ze=p,El=O,Tn=le}fd(t)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,ze=y):fd(t)}}function fd(t){for(;ze!==null;){var s=ze;if((s.flags&8772)!==0){var c=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Tn||Sl(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Tn)if(c===null)d.componentDidMount();else{var p=s.elementType===s.type?c.memoizedProps:Nr(s.type,c.memoizedProps);d.componentDidUpdate(p,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&xu(s,y,d);break;case 3:var A=s.updateQueue;if(A!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}xu(s,A,c)}break;case 5:var O=s.stateNode;if(c===null&&s.flags&4){c=O;var F=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var le=s.alternate;if(le!==null){var Ne=le.memoizedState;if(Ne!==null){var Ee=Ne.dehydrated;Ee!==null&&yr(Ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}Tn||s.flags&512&&ec(s)}catch(we){Ht(s,s.return,we)}}if(s===t){ze=null;break}if(c=s.sibling,c!==null){c.return=s.return,ze=c;break}ze=s.return}}function xd(t){for(;ze!==null;){var s=ze;if(s===t){ze=null;break}var c=s.sibling;if(c!==null){c.return=s.return,ze=c;break}ze=s.return}}function gd(t){for(;ze!==null;){var s=ze;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{Sl(4,s)}catch(F){Ht(s,c,F)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var p=s.return;try{d.componentDidMount()}catch(F){Ht(s,p,F)}}var y=s.return;try{ec(s)}catch(F){Ht(s,y,F)}break;case 5:var A=s.return;try{ec(s)}catch(F){Ht(s,A,F)}}}catch(F){Ht(s,s.return,F)}if(s===t){ze=null;break}var O=s.sibling;if(O!==null){O.return=s.return,ze=O;break}ze=s.return}}var o1=Math.ceil,Al=ne.ReactCurrentDispatcher,rc=ne.ReactCurrentOwner,gr=ne.ReactCurrentBatchConfig,gt=0,fn=null,en=null,bn=0,tr=0,ji=ms(0),on=0,Ea=null,Js=0,kl=0,sc=0,Sa=null,Un=null,ic=0,_i=1/0,Jr=null,Il=!1,ac=null,Ns=null,Tl=!1,Cs=null,Rl=0,Aa=0,lc=null,jl=-1,_l=0;function Mn(){return(gt&6)!==0?wt():jl!==-1?jl:jl=wt()}function Es(t){return(t.mode&1)===0?1:(gt&2)!==0&&bn!==0?bn&-bn:V0.transition!==null?(_l===0&&(_l=nn()),_l):(t=it,t!==0||(t=window.event,t=t===void 0?16:$i(t.type)),t)}function Sr(t,s,c,d){if(50<Aa)throw Aa=0,lc=null,Error(x(185));T(t,c,d),((gt&2)===0||t!==fn)&&(t===fn&&((gt&2)===0&&(kl|=c),on===4&&Ss(t,bn)),zn(t,d),c===1&&gt===0&&(s.mode&1)===0&&(_i=wt()+500,al&&ys()))}function zn(t,s){var c=t.callbackNode;is(t,s);var d=Kn(t,t===fn?bn:0);if(d===0)c!==null&&un(c),t.callbackNode=null,t.callbackPriority=0;else if(s=d&-d,t.callbackPriority!==s){if(c!=null&&un(c),s===1)t.tag===0?G0(pd.bind(null,t)):nu(pd.bind(null,t)),W0(function(){(gt&6)===0&&ys()}),c=null;else{switch(Ua(d)){case 1:c=ge;break;case 4:c=Fa;break;case 16:c=Et;break;case 536870912:c=Wa;break;default:c=Et}c=Sd(c,md.bind(null,t))}t.callbackPriority=s,t.callbackNode=c}}function md(t,s){if(jl=-1,_l=0,(gt&6)!==0)throw Error(x(327));var c=t.callbackNode;if(Mi()&&t.callbackNode!==c)return null;var d=Kn(t,t===fn?bn:0);if(d===0)return null;if((d&30)!==0||(d&t.expiredLanes)!==0||s)s=Ml(t,d);else{s=d;var p=gt;gt|=2;var y=wd();(fn!==t||bn!==s)&&(Jr=null,_i=wt()+500,ei(t,s));do try{d1();break}catch(O){yd(t,O)}while(!0);So(),Al.current=y,gt=p,en!==null?s=0:(fn=null,bn=0,s=on)}if(s!==0){if(s===2&&(p=bt(t),p!==0&&(d=p,s=oc(t,p))),s===1)throw c=Ea,ei(t,0),Ss(t,d),zn(t,wt()),c;if(s===6)Ss(t,d);else{if(p=t.current.alternate,(d&30)===0&&!c1(p)&&(s=Ml(t,d),s===2&&(y=bt(t),y!==0&&(d=y,s=oc(t,y))),s===1))throw c=Ea,ei(t,0),Ss(t,d),zn(t,wt()),c;switch(t.finishedWork=p,t.finishedLanes=d,s){case 0:case 1:throw Error(x(345));case 2:ti(t,Un,Jr);break;case 3:if(Ss(t,d),(d&130023424)===d&&(s=ic+500-wt(),10<s)){if(Kn(t,0)!==0)break;if(p=t.suspendedLanes,(p&d)!==d){Mn(),t.pingedLanes|=t.suspendedLanes&p;break}t.timeoutHandle=xo(ti.bind(null,t,Un,Jr),s);break}ti(t,Un,Jr);break;case 4:if(Ss(t,d),(d&4194240)===d)break;for(s=t.eventTimes,p=-1;0<d;){var A=31-jn(d);y=1<<A,A=s[A],A>p&&(p=A),d&=~y}if(d=p,d=wt()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*o1(d/1960))-d,10<d){t.timeoutHandle=xo(ti.bind(null,t,Un,Jr),d);break}ti(t,Un,Jr);break;case 5:ti(t,Un,Jr);break;default:throw Error(x(329))}}}return zn(t,wt()),t.callbackNode===c?md.bind(null,t):null}function oc(t,s){var c=Sa;return t.current.memoizedState.isDehydrated&&(ei(t,s).flags|=256),t=Ml(t,s),t!==2&&(s=Un,Un=c,s!==null&&cc(s)),t}function cc(t){Un===null?Un=t:Un.push.apply(Un,t)}function c1(t){for(var s=t;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d=0;d<c.length;d++){var p=c[d],y=p.getSnapshot;p=p.value;try{if(!K(y(),p))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ss(t,s){for(s&=~sc,s&=~kl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var c=31-jn(s),d=1<<c;t[c]=-1,s&=~d}}function pd(t){if((gt&6)!==0)throw Error(x(327));Mi();var s=Kn(t,0);if((s&1)===0)return zn(t,wt()),null;var c=Ml(t,s);if(t.tag!==0&&c===2){var d=bt(t);d!==0&&(s=d,c=oc(t,d))}if(c===1)throw c=Ea,ei(t,0),Ss(t,s),zn(t,wt()),c;if(c===6)throw Error(x(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,ti(t,Un,Jr),zn(t,wt()),null}function uc(t,s){var c=gt;gt|=1;try{return t(s)}finally{gt=c,gt===0&&(_i=wt()+500,al&&ys())}}function $s(t){Cs!==null&&Cs.tag===0&&(gt&6)===0&&Mi();var s=gt;gt|=1;var c=gr.transition,d=it;try{if(gr.transition=null,it=1,t)return t()}finally{it=d,gr.transition=c,gt=s,(gt&6)===0&&ys()}}function dc(){tr=ji.current,_t(ji)}function ei(t,s){t.finishedWork=null,t.finishedLanes=0;var c=t.timeoutHandle;if(c!==-1&&(t.timeoutHandle=-1,F0(c)),en!==null)for(c=en.return;c!==null;){var d=c;switch(bo(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&sl();break;case 3:Ii(),_t(Ln),_t(An),Mo();break;case 5:jo(d);break;case 4:Ii();break;case 13:_t(Lt);break;case 19:_t(Lt);break;case 10:Ao(d.type._context);break;case 22:case 23:dc()}c=c.return}if(fn=t,en=t=As(t.current,null),bn=tr=s,on=0,Ea=null,sc=kl=Js=0,Un=Sa=null,Ks!==null){for(s=0;s<Ks.length;s++)if(c=Ks[s],d=c.interleaved,d!==null){c.interleaved=null;var p=d.next,y=c.pending;if(y!==null){var A=y.next;y.next=p,d.next=A}c.pending=d}Ks=null}return t}function yd(t,s){do{var c=en;try{if(So(),ml.current=bl,pl){for(var d=Ft.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}pl=!1}if(Qs=0,hn=ln=Ft=null,ya=!1,wa=0,rc.current=null,c===null||c.return===null){on=1,Ea=s,en=null;break}e:{var y=t,A=c.return,O=c,F=s;if(s=bn,O.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var le=F,Ne=O,Ee=Ne.tag;if((Ne.mode&1)===0&&(Ee===0||Ee===11||Ee===15)){var we=Ne.alternate;we?(Ne.updateQueue=we.updateQueue,Ne.memoizedState=we.memoizedState,Ne.lanes=we.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var Pe=Hu(A);if(Pe!==null){Pe.flags&=-257,Gu(Pe,A,O,y,s),Pe.mode&1&&zu(y,le,s),s=Pe,F=le;var He=s.updateQueue;if(He===null){var Ge=new Set;Ge.add(F),s.updateQueue=Ge}else He.add(F);break e}else{if((s&1)===0){zu(y,le,s),hc();break e}F=Error(x(426))}}else if(Ot&&O.mode&1){var qt=Hu(A);if(qt!==null){(qt.flags&65536)===0&&(qt.flags|=256),Gu(qt,A,O,y,s),Co(Ti(F,O));break e}}y=F=Ti(F,O),on!==4&&(on=2),Sa===null?Sa=[y]:Sa.push(y),y=A;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var J=Wu(y,F,s);fu(y,J);break e;case 1:O=F;var G=y.type,re=y.stateNode;if((y.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(Ns===null||!Ns.has(re)))){y.flags|=65536,s&=-s,y.lanes|=s;var Te=Uu(y,O,s);fu(y,Te);break e}}y=y.return}while(y!==null)}vd(c)}catch(Ve){s=Ve,en===c&&c!==null&&(en=c=c.return);continue}break}while(!0)}function wd(){var t=Al.current;return Al.current=bl,t===null?bl:t}function hc(){(on===0||on===3||on===2)&&(on=4),fn===null||(Js&268435455)===0&&(kl&268435455)===0||Ss(fn,bn)}function Ml(t,s){var c=gt;gt|=2;var d=wd();(fn!==t||bn!==s)&&(Jr=null,ei(t,s));do try{u1();break}catch(p){yd(t,p)}while(!0);if(So(),gt=c,Al.current=d,en!==null)throw Error(x(261));return fn=null,bn=0,on}function u1(){for(;en!==null;)bd(en)}function d1(){for(;en!==null&&!kt();)bd(en)}function bd(t){var s=Ed(t.alternate,t,tr);t.memoizedProps=t.pendingProps,s===null?vd(t):en=s,rc.current=null}function vd(t){var s=t;do{var c=s.alternate;if(t=s.return,(s.flags&32768)===0){if(c=r1(c,s,tr),c!==null){en=c;return}}else{if(c=s1(c,s),c!==null){c.flags&=32767,en=c;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{on=6,en=null;return}}if(s=s.sibling,s!==null){en=s;return}en=s=t}while(s!==null);on===0&&(on=5)}function ti(t,s,c){var d=it,p=gr.transition;try{gr.transition=null,it=1,h1(t,s,c,d)}finally{gr.transition=p,it=d}return null}function h1(t,s,c,d){do Mi();while(Cs!==null);if((gt&6)!==0)throw Error(x(327));c=t.finishedWork;var p=t.finishedLanes;if(c===null)return null;if(t.finishedWork=null,t.finishedLanes=0,c===t.current)throw Error(x(177));t.callbackNode=null,t.callbackPriority=0;var y=c.lanes|c.childLanes;if(Xe(t,y),t===fn&&(en=fn=null,bn=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Tl||(Tl=!0,Sd(Et,function(){return Mi(),null})),y=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||y){y=gr.transition,gr.transition=null;var A=it;it=1;var O=gt;gt|=4,rc.current=null,a1(t,c),dd(c,t),Sn(ho),jr=!!uo,ho=uo=null,t.current=c,l1(c),La(),gt=O,it=A,gr.transition=y}else t.current=c;if(Tl&&(Tl=!1,Cs=t,Rl=p),y=t.pendingLanes,y===0&&(Ns=null),dt(c.stateNode),zn(t,wt()),s!==null)for(d=t.onRecoverableError,c=0;c<s.length;c++)p=s[c],d(p.value,{componentStack:p.stack,digest:p.digest});if(Il)throw Il=!1,t=ac,ac=null,t;return(Rl&1)!==0&&t.tag!==0&&Mi(),y=t.pendingLanes,(y&1)!==0?t===lc?Aa++:(Aa=0,lc=t):Aa=0,ys(),null}function Mi(){if(Cs!==null){var t=Ua(Rl),s=gr.transition,c=it;try{if(gr.transition=null,it=16>t?16:t,Cs===null)var d=!1;else{if(t=Cs,Cs=null,Rl=0,(gt&6)!==0)throw Error(x(331));var p=gt;for(gt|=4,ze=t.current;ze!==null;){var y=ze,A=y.child;if((ze.flags&16)!==0){var O=y.deletions;if(O!==null){for(var F=0;F<O.length;F++){var le=O[F];for(ze=le;ze!==null;){var Ne=ze;switch(Ne.tag){case 0:case 11:case 15:Ca(8,Ne,y)}var Ee=Ne.child;if(Ee!==null)Ee.return=Ne,ze=Ee;else for(;ze!==null;){Ne=ze;var we=Ne.sibling,Pe=Ne.return;if(ad(Ne),Ne===le){ze=null;break}if(we!==null){we.return=Pe,ze=we;break}ze=Pe}}}var He=y.alternate;if(He!==null){var Ge=He.child;if(Ge!==null){He.child=null;do{var qt=Ge.sibling;Ge.sibling=null,Ge=qt}while(Ge!==null)}}ze=y}}if((y.subtreeFlags&2064)!==0&&A!==null)A.return=y,ze=A;else e:for(;ze!==null;){if(y=ze,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Ca(9,y,y.return)}var J=y.sibling;if(J!==null){J.return=y.return,ze=J;break e}ze=y.return}}var G=t.current;for(ze=G;ze!==null;){A=ze;var re=A.child;if((A.subtreeFlags&2064)!==0&&re!==null)re.return=A,ze=re;else e:for(A=G;ze!==null;){if(O=ze,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Sl(9,O)}}catch(Ve){Ht(O,O.return,Ve)}if(O===A){ze=null;break e}var Te=O.sibling;if(Te!==null){Te.return=O.return,ze=Te;break e}ze=O.return}}if(gt=p,ys(),st&&typeof st.onPostCommitFiberRoot=="function")try{st.onPostCommitFiberRoot(ft,t)}catch{}d=!0}return d}finally{it=c,gr.transition=s}}return!1}function Nd(t,s,c){s=Ti(c,s),s=Wu(t,s,1),t=bs(t,s,1),s=Mn(),t!==null&&(T(t,1,s),zn(t,s))}function Ht(t,s,c){if(t.tag===3)Nd(t,t,c);else for(;s!==null;){if(s.tag===3){Nd(s,t,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ns===null||!Ns.has(d))){t=Ti(c,t),t=Uu(s,t,1),s=bs(s,t,1),t=Mn(),s!==null&&(T(s,1,t),zn(s,t));break}}s=s.return}}function f1(t,s,c){var d=t.pingCache;d!==null&&d.delete(s),s=Mn(),t.pingedLanes|=t.suspendedLanes&c,fn===t&&(bn&c)===c&&(on===4||on===3&&(bn&130023424)===bn&&500>wt()-ic?ei(t,0):sc|=c),zn(t,s)}function Cd(t,s){s===0&&((t.mode&1)===0?s=1:(s=ci,ci<<=1,(ci&130023424)===0&&(ci=4194304)));var c=Mn();t=Kr(t,s),t!==null&&(T(t,s,c),zn(t,c))}function x1(t){var s=t.memoizedState,c=0;s!==null&&(c=s.retryLane),Cd(t,c)}function g1(t,s){var c=0;switch(t.tag){case 13:var d=t.stateNode,p=t.memoizedState;p!==null&&(c=p.retryLane);break;case 19:d=t.stateNode;break;default:throw Error(x(314))}d!==null&&d.delete(s),Cd(t,c)}var Ed;Ed=function(t,s,c){if(t!==null)if(t.memoizedProps!==s.pendingProps||Ln.current)Wn=!0;else{if((t.lanes&c)===0&&(s.flags&128)===0)return Wn=!1,n1(t,s,c);Wn=(t.flags&131072)!==0}else Wn=!1,Ot&&(s.flags&1048576)!==0&&ru(s,ol,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Cl(t,s),t=s.pendingProps;var p=vi(s,An.current);ki(s,c),p=Po(null,s,d,t,p,c);var y=Bo();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Fn(d)?(y=!0,il(s)):y=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,To(s),p.updater=vl,s.stateNode=p,p._reactInternals=s,Ho(s,d,t,c),s=Zo(null,s,d,!0,y,c)):(s.tag=0,Ot&&y&&wo(s),_n(null,s,p,c),s=s.child),s;case 16:d=s.elementType;e:{switch(Cl(t,s),t=s.pendingProps,p=d._init,d=p(d._payload),s.type=d,p=s.tag=p1(d),t=Nr(d,t),p){case 0:s=Xo(null,s,d,t,c);break e;case 1:s=qu(null,s,d,t,c);break e;case 11:s=Vu(null,s,d,t,c);break e;case 14:s=Xu(null,s,d,Nr(d.type,t),c);break e}throw Error(x(306,d,""))}return s;case 0:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Nr(d,p),Xo(t,s,d,p,c);case 1:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Nr(d,p),qu(t,s,d,p,c);case 3:e:{if(Qu(s),t===null)throw Error(x(387));d=s.pendingProps,y=s.memoizedState,p=y.element,hu(t,s),xl(s,d,null,c);var A=s.memoizedState;if(d=A.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){p=Ti(Error(x(423)),s),s=Ju(t,s,d,c,p);break e}else if(d!==p){p=Ti(Error(x(424)),s),s=Ju(t,s,d,c,p);break e}else for(er=gs(s.stateNode.containerInfo.firstChild),$n=s,Ot=!0,vr=null,c=uu(s,null,d,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Ei(),d===p){s=Qr(t,s,c);break e}_n(t,s,d,c)}s=s.child}return s;case 5:return gu(s),t===null&&No(s),d=s.type,p=s.pendingProps,y=t!==null?t.memoizedProps:null,A=p.children,fo(d,p)?A=null:y!==null&&fo(d,y)&&(s.flags|=32),Ku(t,s),_n(t,s,A,c),s.child;case 6:return t===null&&No(s),null;case 13:return $u(t,s,c);case 4:return Ro(s,s.stateNode.containerInfo),d=s.pendingProps,t===null?s.child=Si(s,null,d,c):_n(t,s,d,c),s.child;case 11:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Nr(d,p),Vu(t,s,d,p,c);case 7:return _n(t,s,s.pendingProps,c),s.child;case 8:return _n(t,s,s.pendingProps.children,c),s.child;case 12:return _n(t,s,s.pendingProps.children,c),s.child;case 10:e:{if(d=s.type._context,p=s.pendingProps,y=s.memoizedProps,A=p.value,Rt(dl,d._currentValue),d._currentValue=A,y!==null)if(K(y.value,A)){if(y.children===p.children&&!Ln.current){s=Qr(t,s,c);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var O=y.dependencies;if(O!==null){A=y.child;for(var F=O.firstContext;F!==null;){if(F.context===d){if(y.tag===1){F=qr(-1,c&-c),F.tag=2;var le=y.updateQueue;if(le!==null){le=le.shared;var Ne=le.pending;Ne===null?F.next=F:(F.next=Ne.next,Ne.next=F),le.pending=F}}y.lanes|=c,F=y.alternate,F!==null&&(F.lanes|=c),ko(y.return,c,s),O.lanes|=c;break}F=F.next}}else if(y.tag===10)A=y.type===s.type?null:y.child;else if(y.tag===18){if(A=y.return,A===null)throw Error(x(341));A.lanes|=c,O=A.alternate,O!==null&&(O.lanes|=c),ko(A,c,s),A=y.sibling}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}_n(t,s,p.children,c),s=s.child}return s;case 9:return p=s.type,d=s.pendingProps.children,ki(s,c),p=fr(p),d=d(p),s.flags|=1,_n(t,s,d,c),s.child;case 14:return d=s.type,p=Nr(d,s.pendingProps),p=Nr(d.type,p),Xu(t,s,d,p,c);case 15:return Zu(t,s,s.type,s.pendingProps,c);case 17:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Nr(d,p),Cl(t,s),s.tag=1,Fn(d)?(t=!0,il(s)):t=!1,ki(s,c),Lu(s,d,p),Ho(s,d,p,c),Zo(null,s,d,!0,t,c);case 19:return td(t,s,c);case 22:return Yu(t,s,c)}throw Error(x(156,s.tag))};function Sd(t,s){return Zn(t,s)}function m1(t,s,c,d){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(t,s,c,d){return new m1(t,s,c,d)}function fc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function p1(t){if(typeof t=="function")return fc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ee)return 11;if(t===B)return 14}return 2}function As(t,s){var c=t.alternate;return c===null?(c=mr(t.tag,s,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=s,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&14680064,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,s=t.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c}function Ol(t,s,c,d,p,y){var A=2;if(d=t,typeof t=="function")fc(t)&&(A=1);else if(typeof t=="string")A=5;else e:switch(t){case X:return ni(c.children,p,y,s);case me:A=8,p|=8;break;case ue:return t=mr(12,c,s,p|2),t.elementType=ue,t.lanes=y,t;case Y:return t=mr(13,c,s,p),t.elementType=Y,t.lanes=y,t;case Ce:return t=mr(19,c,s,p),t.elementType=Ce,t.lanes=y,t;case te:return Dl(c,p,y,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Ae:A=10;break e;case Ue:A=9;break e;case ee:A=11;break e;case B:A=14;break e;case pe:A=16,d=null;break e}throw Error(x(130,t==null?t:typeof t,""))}return s=mr(A,c,s,p),s.elementType=t,s.type=d,s.lanes=y,s}function ni(t,s,c,d){return t=mr(7,t,d,s),t.lanes=c,t}function Dl(t,s,c,d){return t=mr(22,t,d,s),t.elementType=te,t.lanes=c,t.stateNode={isHidden:!1},t}function xc(t,s,c){return t=mr(6,t,null,s),t.lanes=c,t}function gc(t,s,c){return s=mr(4,t.children!==null?t.children:[],t.key,s),s.lanes=c,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function y1(t,s,c,d,p){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Q(0),this.expirationTimes=Q(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function mc(t,s,c,d,p,y,A,O,F){return t=new y1(t,s,c,O,F),s===1?(s=1,y===!0&&(s|=8)):s=0,y=mr(3,null,null,s),t.current=y,y.stateNode=t,y.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},To(y),t}function w1(t,s,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:de,key:d==null?null:""+d,children:t,containerInfo:s,implementation:c}}function Ad(t){if(!t)return ps;t=t._reactInternals;e:{if(Bn(t)!==t||t.tag!==1)throw Error(x(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Fn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(x(171))}if(t.tag===1){var c=t.type;if(Fn(c))return eu(t,c,s)}return s}function kd(t,s,c,d,p,y,A,O,F){return t=mc(c,d,!0,t,p,y,A,O,F),t.context=Ad(null),c=t.current,d=Mn(),p=Es(c),y=qr(d,p),y.callback=s??null,bs(c,y,p),t.current.lanes=p,T(t,p,d),zn(t,d),t}function Pl(t,s,c,d){var p=s.current,y=Mn(),A=Es(p);return c=Ad(c),s.context===null?s.context=c:s.pendingContext=c,s=qr(y,A),s.payload={element:t},d=d===void 0?null:d,d!==null&&(s.callback=d),t=bs(p,s,A),t!==null&&(Sr(t,p,A,y),fl(t,p,A)),A}function Bl(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function Id(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<s?c:s}}function pc(t,s){Id(t,s),(t=t.alternate)&&Id(t,s)}function b1(){return null}var Td=typeof reportError=="function"?reportError:function(t){console.error(t)};function yc(t){this._internalRoot=t}Ll.prototype.render=yc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(x(409));Pl(t,s,null,null)},Ll.prototype.unmount=yc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;$s(function(){Pl(null,t,null,null)}),s[Vr]=null}};function Ll(t){this._internalRoot=t}Ll.prototype.unstable_scheduleHydration=function(t){if(t){var s=It();t={blockedOn:null,target:t,priority:s};for(var c=0;c<mn.length&&s!==0&&s<mn[c].priority;c++);mn.splice(c,0,t),c===0&&Ha(t)}};function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rd(){}function v1(t,s,c,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var le=Bl(A);y.call(le)}}var A=kd(s,d,t,0,null,!1,!1,"",Rd);return t._reactRootContainer=A,t[Vr]=A.current,ua(t.nodeType===8?t.parentNode:t),$s(),A}for(;p=t.lastChild;)t.removeChild(p);if(typeof d=="function"){var O=d;d=function(){var le=Bl(F);O.call(le)}}var F=mc(t,0,!1,null,null,!1,!1,"",Rd);return t._reactRootContainer=F,t[Vr]=F.current,ua(t.nodeType===8?t.parentNode:t),$s(function(){Pl(s,F,c,d)}),F}function Wl(t,s,c,d,p){var y=c._reactRootContainer;if(y){var A=y;if(typeof p=="function"){var O=p;p=function(){var F=Bl(A);O.call(F)}}Pl(s,A,t,p)}else A=v1(c,s,t,p,d);return Bl(A)}ui=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var c=St(s.pendingLanes);c!==0&&(Ut(s,c|1),zn(s,wt()),(gt&6)===0&&(_i=wt()+500,ys()))}break;case 13:$s(function(){var d=Kr(t,1);if(d!==null){var p=Mn();Sr(d,t,1,p)}}),pc(t,1)}},En=function(t){if(t.tag===13){var s=Kr(t,134217728);if(s!==null){var c=Mn();Sr(s,t,134217728,c)}pc(t,134217728)}},Ze=function(t){if(t.tag===13){var s=Es(t),c=Kr(t,s);if(c!==null){var d=Mn();Sr(c,t,s,d)}pc(t,s)}},It=function(){return it},qi=function(t,s){var c=it;try{return it=t,s()}finally{it=c}},li=function(t,s,c){switch(s){case"input":if(Dt(t,c),s=c.name,c.type==="radio"&&s!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==t&&d.form===t.form){var p=rl(d);if(!p)throw Error(x(90));sr(d),Dt(d,p)}}}break;case"textarea":ir(t,c);break;case"select":s=c.value,s!=null&&Fe(t,!!c.multiple,s,!1)}},oi=uc,tn=$s;var N1={usingClientEntryPoint:!1,Events:[fa,wi,rl,Hi,Pn,uc]},ka={findFiberByHostInstance:Vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C1={bundleType:ka.bundleType,version:ka.version,rendererPackageName:ka.rendererPackageName,rendererConfig:ka.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Pa(t),t===null?null:t.stateNode},findFiberByHostInstance:ka.findFiberByHostInstance||b1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ul.isDisabled&&Ul.supportsFiber)try{ft=Ul.inject(C1),st=Ul}catch{}}return Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N1,Hn.createPortal=function(t,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wc(s))throw Error(x(200));return w1(t,s,null,c)},Hn.createRoot=function(t,s){if(!wc(t))throw Error(x(299));var c=!1,d="",p=Td;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=mc(t,1,!1,null,null,c,!1,d,p),t[Vr]=s.current,ua(t.nodeType===8?t.parentNode:t),new yc(s)},Hn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(x(188)):(t=Object.keys(t).join(","),Error(x(268,t)));return t=Pa(s),t=t===null?null:t.stateNode,t},Hn.flushSync=function(t){return $s(t)},Hn.hydrate=function(t,s,c){if(!Fl(s))throw Error(x(200));return Wl(null,t,s,!0,c)},Hn.hydrateRoot=function(t,s,c){if(!wc(t))throw Error(x(405));var d=c!=null&&c.hydratedSources||null,p=!1,y="",A=Td;if(c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(A=c.onRecoverableError)),s=kd(s,null,t,1,c??null,p,!1,y,A),t[Vr]=s.current,ua(t),d)for(t=0;t<d.length;t++)c=d[t],p=c._getVersion,p=p(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,p]:s.mutableSourceEagerHydrationData.push(c,p);return new Ll(s)},Hn.render=function(t,s,c){if(!Fl(s))throw Error(x(200));return Wl(null,t,s,!1,c)},Hn.unmountComponentAtNode=function(t){if(!Fl(t))throw Error(x(40));return t._reactRootContainer?($s(function(){Wl(null,null,t,!1,function(){t._reactRootContainer=null,t[Vr]=null})}),!0):!1},Hn.unstable_batchedUpdates=uc,Hn.unstable_renderSubtreeIntoContainer=function(t,s,c,d){if(!Fl(c))throw Error(x(200));if(t==null||t._reactInternals===void 0)throw Error(x(38));return Wl(t,s,c,!1,d)},Hn.version="18.3.1-next-f1338f8080-20240426",Hn}var Ld;function j1(){if(Ld)return Nc.exports;Ld=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(m){console.error(m)}}return f(),Nc.exports=R1(),Nc.exports}var Fd;function _1(){if(Fd)return Hl;Fd=1;var f=j1();return Hl.createRoot=f.createRoot,Hl.hydrateRoot=f.hydrateRoot,Hl}var M1=_1();const O1=x0(M1);console.warn("Supabase credentials not found. Running in offline mode.");const D1=()=>!1,m0=Re.createContext({}),p0=()=>Re.useContext(m0);function P1({children:f}){const[m,x]=Re.useState(null),[v,C]=Re.useState(!0);Re.useEffect(()=>{{C(!1);return}},[]);const M={user:m,loading:v,signInWithGoogle:async()=>(console.error("Supabase not configured"),{error:{message:"Authentication not configured. Please check your Supabase credentials."}}),signOut:async()=>{},isAuthenticated:!!m,isConfigured:D1()};return a.jsx(m0.Provider,{value:M,children:f})}var B1={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const L1=f=>f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),rt=(f,m)=>{const x=Re.forwardRef(({color:v="currentColor",size:C=24,strokeWidth:w=2,absoluteStrokeWidth:I,className:M="",children:_,...N},P)=>Re.createElement("svg",{ref:P,...B1,width:C,height:C,stroke:v,strokeWidth:I?Number(w)*24/Number(C):w,className:["lucide",`lucide-${L1(f)}`,M].join(" "),...N},[...m.map(([j,$])=>Re.createElement(j,$)),...Array.isArray(_)?_:[_]]));return x.displayName=`${f}`,x};const F1=rt("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const Ic=rt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const y0=rt("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Wd=rt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const W1=rt("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);const Mc=rt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const U1=rt("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);const w0=rt("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);const z1=rt("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const Rs=rt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const b0=rt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const Br=rt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Oc=rt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Oa=rt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const Li=rt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const H1=rt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const G1=rt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Dc=rt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const ri=rt("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);const Fi=rt("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const V1=rt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const X1=rt("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const v0=rt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Ud=rt("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const Z1=rt("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const zd=rt("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Y1=rt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const K1=rt("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);const Hd=rt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const Wi=rt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const q1=rt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Q1=rt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const N0=rt("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Tc=rt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const J1=rt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const C0=rt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const Lr=rt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Da=rt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const js=rt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const E0=rt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const si=rt("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);const Ql=rt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Ts=rt("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),$1=[{icon:w0,title:"Intelligent Programming",description:"Periodized training blocks built from proven methodologies. Auto-regulated progression based on your actual performance data."},{icon:Lr,title:"Sport-Specific Periodization",description:"Whether you're peaking for a meet, racing a marathon, or training for a triathlonyour mesocycles are structured for your event."},{icon:si,title:"Performance Nutrition",description:"Macros calibrated to your training load and body composition goals. Nutrient timing aligned with your session schedule."},{icon:js,title:"Progressive Overload Engine",description:"Systematic volume and intensity progression with strategic deloads. No guesswork, no stalled progress."},{icon:F1,title:"Session Tracking",description:"Log sets, reps, RPE, and actual loads. Track deviations from prescribed work to inform future programming."},{icon:Mc,title:"Performance Analytics",description:"Volume load trends, strength curve analysis, and training density metrics. Data-driven decisions, not guesswork."}];function eh({onGetStarted:f}){return a.jsxs("div",{className:"min-h-screen bg-dark-950 text-white overflow-x-hidden",children:[a.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-dark-950/80 backdrop-blur-lg border-b border-dark-800",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-accent-primary to-accent-primaryHover rounded-xl flex items-center justify-center",children:a.jsx(Ts,{className:"w-6 h-6 text-dark-950"})}),a.jsx("span",{className:"text-2xl font-display font-bold tracking-tight",children:"MOTUS"})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[a.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors",children:"Features"}),a.jsx("a",{href:"#how-it-works",className:"text-gray-400 hover:text-white transition-colors",children:"How It Works"}),a.jsx("a",{href:"#programs",className:"text-gray-400 hover:text-white transition-colors",children:"Programs"})]}),a.jsx("button",{onClick:f,className:"px-5 py-2.5 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-semibold rounded-lg transition-all hover:scale-105",children:"Get Started"})]})}),a.jsxs("section",{className:"relative min-h-screen flex items-center justify-center pt-20 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-dark-950 via-dark-900 to-dark-950"}),a.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-accent-primary/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent-secondary/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute inset-0 opacity-5",children:a.jsx("div",{className:"h-full w-full",style:{backgroundImage:"linear-gradient(rgba(212,168,83,0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(212,168,83,0.3) 1px, transparent 1px)",backgroundSize:"50px 50px"}})}),a.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 text-center",children:[a.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-accent-primary/10 border border-accent-primary/30 rounded-full mb-8",children:[a.jsx(Ts,{className:"w-4 h-4 text-accent-primary"}),a.jsx("span",{className:"text-sm text-accent-primary font-medium",children:"Periodized Training + Precision Nutrition"})]}),a.jsxs("h1",{className:"text-5xl md:text-7xl lg:text-8xl font-display font-bold tracking-tight mb-6",children:[a.jsx("span",{className:"block",children:"TRAIN WITH"}),a.jsx("span",{className:"block bg-gradient-to-r from-accent-primary via-accent-primaryHover to-accent-secondary bg-clip-text text-transparent",children:"INTENT."})]}),a.jsxs("p",{className:"text-xl md:text-2xl text-gray-400 max-w-3xl mx-auto mb-10 leading-relaxed",children:["Structured programming for serious athletes. ",a.jsx("span",{className:"text-white font-medium",children:"Periodized workouts"}),","," ",a.jsx("span",{className:"text-white font-medium",children:"calibrated nutrition"}),", and"," ",a.jsx("span",{className:"text-white font-medium",children:"intelligent progression"}),"all in one platform."]}),a.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-16",children:a.jsxs("button",{onClick:f,className:"group px-8 py-4 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-bold text-lg rounded-xl transition-all hover:scale-105 flex items-center gap-2 shadow-lg shadow-accent-primary/25",children:["Build Your Program",a.jsx(Wd,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[a.jsx(Z1,{className:"w-5 h-5 text-accent-primary"}),a.jsx("span",{children:"Mesocycle-based periodization"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[a.jsx(Dc,{className:"w-5 h-5 text-accent-primary"}),a.jsx("span",{children:"Auto-regulated deloads"})]}),a.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[a.jsx(J1,{className:"w-5 h-5 text-accent-primary"}),a.jsx("span",{children:"Research-backed protocols"})]})]})]}),a.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce",children:a.jsx("div",{className:"w-6 h-10 border-2 border-gray-600 rounded-full flex items-start justify-center p-2",children:a.jsx("div",{className:"w-1.5 h-3 bg-accent-primary rounded-full animate-pulse"})})})]}),a.jsx("section",{className:"py-24 bg-dark-900",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center",children:[a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["You Know What You're Doing. ",a.jsx("span",{className:"text-accent-danger",children:"Your Tools Should Too."})]}),a.jsxs("div",{className:"space-y-4 text-gray-400",children:[a.jsxs("p",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Generic apps that don't understand periodization or peaking"]}),a.jsxs("p",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Nutrition trackers disconnected from your training load"]}),a.jsxs("p",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-accent-danger mt-1",children:""}),"No intelligent programmingjust random workouts"]}),a.jsxs("p",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Fragmented tools that don't talk to each other"]})]})]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["MOTUS Gets It. ",a.jsx("span",{className:"text-accent-success",children:"Built for Athletes."})]}),a.jsxs("div",{className:"space-y-4 text-gray-400",children:[a.jsxs("p",{className:"flex items-start gap-3",children:[a.jsx(Br,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"Proper periodization with base, build, peak, and taper phases"})]}),a.jsxs("p",{className:"flex items-start gap-3",children:[a.jsx(Br,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"Nutrition that scales with your training volume and intensity"})]}),a.jsxs("p",{className:"flex items-start gap-3",children:[a.jsx(Br,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"Progressive overload with strategic deload weeks built in"})]}),a.jsxs("p",{className:"flex items-start gap-3",children:[a.jsx(Br,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),a.jsx("span",{children:"One integrated platformworkouts, nutrition, and tracking"})]})]})]})]})})}),a.jsx("section",{id:"features",className:"py-24 bg-dark-950",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Built for ",a.jsx("span",{className:"text-accent-primary",children:"Performance"})]}),a.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Every feature designed around how serious athletes actually train."})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:$1.map((m,x)=>a.jsxs("div",{className:"group p-6 bg-dark-900 border border-dark-700 rounded-2xl hover:border-accent-primary/50 transition-all hover:-translate-y-1",children:[a.jsx("div",{className:"w-12 h-12 bg-accent-primary/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-accent-primary/20 transition-colors",children:a.jsx(m.icon,{className:"w-6 h-6 text-accent-primary"})}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:m.title}),a.jsx("p",{className:"text-gray-400",children:m.description})]},x))})]})}),a.jsx("section",{id:"how-it-works",className:"py-24 bg-dark-900",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Setup in ",a.jsx("span",{className:"text-accent-primary",children:"5 Minutes"})]}),a.jsx("p",{className:"text-xl text-gray-400",children:"Input your data. Get your program. Start training."})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{step:"01",title:"Define Your Goal",description:"Select your primary focusstrength, endurance, hypertrophy, or triathlon. Set your target event or timeline.",icon:Lr},{step:"02",title:"Input Your Baseline",description:"Current lifts, recent race times, training history. We need real numbers to build a real program.",icon:w0},{step:"03",title:"Execute & Track",description:"Follow your periodized program. Log your sessions. Let the system adjust based on your actual performance.",icon:js}].map((m,x)=>a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"text-7xl font-display font-bold text-dark-800 absolute -top-4 -left-2",children:m.step}),a.jsxs("div",{className:"relative bg-dark-800 border border-dark-700 rounded-2xl p-6 pt-12",children:[a.jsx("div",{className:"w-14 h-14 bg-accent-primary rounded-xl flex items-center justify-center mb-4",children:a.jsx(m.icon,{className:"w-7 h-7 text-dark-950"})}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:m.title}),a.jsx("p",{className:"text-gray-400",children:m.description})]}),x<2&&a.jsx("div",{className:"hidden md:block absolute top-1/2 -right-4 transform -translate-y-1/2",children:a.jsx(Li,{className:"w-8 h-8 text-dark-600"})})]},x))})]})}),a.jsx("section",{id:"programs",className:"py-24 bg-dark-950",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-16",children:[a.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Specialized ",a.jsx("span",{className:"text-accent-primary",children:"Programming"})]}),a.jsx("p",{className:"text-xl text-gray-400",children:"Structured training systems for your discipline"})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"Strength",subtitle:"Powerlifting & Strength Sport",description:"Periodized programming for squat, bench, and deadlift. Volume blocks, intensity blocks, and peaking protocols.",icon:"",color:"from-red-500/20 to-orange-500/20",border:"border-red-500/30"},{title:"Endurance",subtitle:"Running & Cycling",description:"5K to marathon and beyond. Pace-based training zones, mileage progression, and taper protocols.",icon:"",color:"from-blue-500/20 to-cyan-500/20",border:"border-blue-500/30"},{title:"Hypertrophy",subtitle:"Bodybuilding & Physique",description:"Volume-driven programming for muscle development. Progressive overload with strategic deloads.",icon:"",color:"from-purple-500/20 to-pink-500/20",border:"border-purple-500/30"},{title:"Triathlon",subtitle:"Swim  Bike  Run",description:"Multi-sport periodization with brick workouts and double days. Injury-prevention strength work built in.",icon:"",color:"from-accent-primary/20 to-yellow-500/20",border:"border-accent-primary/30"}].map((m,x)=>a.jsxs("div",{className:`p-6 rounded-2xl bg-gradient-to-br ${m.color} border ${m.border} hover:scale-105 transition-transform cursor-pointer`,children:[a.jsx("span",{className:"text-4xl mb-4 block",children:m.icon}),a.jsx("h3",{className:"text-xl font-bold mb-1",children:m.title}),a.jsx("p",{className:"text-accent-primary text-sm font-medium mb-3",children:m.subtitle}),a.jsx("p",{className:"text-gray-400 text-sm",children:m.description})]},x))})]})}),a.jsxs("section",{className:"py-24 bg-dark-900 relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent-primary/5 via-transparent to-accent-secondary/5"}),a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-px bg-gradient-to-r from-transparent via-accent-primary/50 to-transparent"}),a.jsxs("div",{className:"relative max-w-4xl mx-auto px-6 text-center",children:[a.jsxs("h2",{className:"text-4xl md:text-6xl font-display font-bold mb-6",children:["Stop Guessing. ",a.jsx("span",{className:"text-accent-primary",children:"Start Training."})]}),a.jsx("p",{className:"text-xl text-gray-400 mb-10 max-w-2xl mx-auto",children:"Your personalized program is 5 minutes away."}),a.jsxs("button",{onClick:f,className:"group px-10 py-5 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-bold text-xl rounded-xl transition-all hover:scale-105 flex items-center gap-3 mx-auto shadow-lg shadow-accent-primary/25",children:["Build My Program",a.jsx(Wd,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]})]})]}),a.jsx("footer",{className:"py-12 bg-dark-950 border-t border-dark-800",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-accent-primary to-accent-primaryHover rounded-lg flex items-center justify-center",children:a.jsx(Ts,{className:"w-5 h-5 text-dark-950"})}),a.jsx("span",{className:"text-xl font-display font-bold",children:"MOTUS"})]}),a.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"}),a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms"}),a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})]}),a.jsx("p",{className:"text-sm text-gray-500",children:" 2024 MOTUS. Train With Intent."})]})})})]})}const th={primary:"bg-accent-primary hover:bg-accent-primaryHover active:bg-accent-primaryMuted text-dark-900 font-semibold shadow-sm",secondary:"bg-dark-700 hover:bg-dark-600 text-white border border-dark-500 hover:border-dark-400",ghost:"bg-transparent hover:bg-dark-800 text-text-secondary hover:text-white",danger:"bg-accent-danger hover:bg-red-500 text-white",success:"bg-accent-success hover:bg-green-500 text-dark-900 font-semibold",outline:"bg-transparent border-2 border-accent-primary text-accent-primary hover:bg-accent-primary hover:text-dark-900"},nh={sm:"px-3 py-1.5 text-sm rounded-md",md:"px-5 py-2.5 text-sm rounded-lg",lg:"px-6 py-3 text-base rounded-lg",xl:"px-8 py-4 text-lg rounded-xl"};function Vt({children:f,variant:m="primary",size:x="md",disabled:v=!1,fullWidth:C=!1,onClick:w,type:I="button",className:M="",icon:_,iconPosition:N="left",...P}){return a.jsxs("button",{type:I,onClick:w,disabled:v,className:`
        ${th[m]}
        ${nh[x]}
        ${C?"w-full":""}
        ${v?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        font-medium tracking-wide
        transition-all duration-200
        focus:outline-none focus:ring-2 focus:ring-accent-primary/50 focus:ring-offset-2 focus:ring-offset-dark-900
        inline-flex items-center justify-center gap-2
        ${M}
      `,...P,children:[_&&N==="left"&&a.jsx("span",{className:"flex-shrink-0",children:_}),f,_&&N==="right"&&a.jsx("span",{className:"flex-shrink-0",children:_})]})}function Qt({children:f,className:m="",hover:x=!1,onClick:v,variant:C="default",padding:w=!0}){const I="rounded-xl transition-all duration-300",M={default:"bg-dark-800 border border-dark-600",elevated:"bg-dark-800 border border-dark-600 shadow-lg shadow-black/20",outlined:"bg-transparent border border-dark-500",solid:"bg-dark-700"},_=x?"hover:border-dark-400 hover:shadow-gold cursor-pointer":"";return a.jsx("div",{onClick:v,className:`
        ${I}
        ${M[C]}
        ${_}
        ${m}
      `,children:f})}function Jt({children:f,className:m=""}){return a.jsx("div",{className:`p-6 ${m}`,children:f})}function rh({label:f,type:m="text",value:x,onChange:v,placeholder:C,error:w,helper:I,disabled:M=!1,className:_="",size:N="md",...P}){const j={sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-base",lg:"px-5 py-4 text-lg"};return a.jsxs("div",{className:`space-y-2 ${_}`,children:[f&&a.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:f}),a.jsx("input",{type:m,value:x,onChange:v,placeholder:C,disabled:M,className:`
          w-full ${j[N]}
          bg-dark-700 border rounded-lg
          text-white placeholder-dark-400
          focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary
          hover:border-dark-400
          transition-colors duration-200
          ${w?"border-accent-danger focus:border-accent-danger focus:ring-accent-danger":"border-dark-600"}
          ${M?"opacity-50 cursor-not-allowed bg-dark-800":""}
        `,...P}),w&&a.jsxs("p",{className:"text-sm text-accent-danger flex items-center gap-1",children:[a.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),w]}),I&&!w&&a.jsx("p",{className:"text-sm text-text-muted",children:I})]})}function Zl({isOpen:f,onClose:m,title:x,children:v,size:C="md",showClose:w=!0}){const I=Re.useRef(null),M={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[90vw]"};return Re.useEffect(()=>{const _=N=>{N.key==="Escape"&&m()};return f&&(document.addEventListener("keydown",_),document.body.style.overflow="hidden",I.current?.focus()),()=>{document.removeEventListener("keydown",_),document.body.style.overflow="unset"}},[f,m]),f?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-dark-950/80 backdrop-blur-sm",onClick:m}),a.jsxs("div",{ref:I,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",tabIndex:-1,className:`
          relative w-full ${M[C]}
          bg-dark-800 rounded-2xl
          border border-dark-600
          shadow-2xl shadow-black/50
          animate-in fade-in zoom-in-95 duration-200
        `,children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-dark-600",children:[a.jsx("h2",{id:"modal-title",className:"text-xl font-semibold text-white tracking-tight",children:x}),w&&a.jsx("button",{onClick:m,className:"p-2 rounded-lg text-dark-400 hover:text-white hover:bg-dark-700 transition-colors","aria-label":"Close modal",children:a.jsx(Ql,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"px-6 py-5 max-h-[70vh] overflow-y-auto",children:v})]})]}):null}function Bi({value:f,max:m=100,color:x="primary",showLabel:v=!1,size:C="md",className:w=""}){const I=Math.min(Math.max(f/m*100,0),100),M={primary:"bg-accent-primary",secondary:"bg-text-secondary",success:"bg-accent-success",warning:"bg-accent-warning",danger:"bg-accent-danger",gold:"bg-gradient-to-r from-accent-primaryMuted via-accent-primary to-accent-primaryHover"},_={xs:"h-1",sm:"h-1.5",md:"h-2",lg:"h-3",xl:"h-4"};return a.jsxs("div",{className:`w-full ${w}`,children:[a.jsx("div",{className:`w-full bg-dark-700 rounded-full ${_[C]} overflow-hidden`,children:a.jsx("div",{className:`${M[x]} ${_[C]} rounded-full transition-all duration-500 ease-out`,style:{width:`${I}%`}})}),v&&a.jsxs("div",{className:"flex justify-between mt-1.5 text-sm",children:[a.jsx("span",{className:"text-text-secondary",children:f}),a.jsx("span",{className:"text-text-muted",children:m})]})]})}const sh=[{id:"dashboard",label:"Home",icon:X1},{id:"program",label:"Program",icon:Rs},{id:"nutrition",label:"Nutrition",icon:si},{id:"stats",label:"Stats",icon:Mc},{id:"profile",label:"Profile",icon:E0}];function ih({activeTab:f,onChange:m}){return a.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-dark-900/95 backdrop-blur-md border-t border-dark-700 px-2 pt-2 z-50",style:{paddingBottom:"max(0.5rem, env(safe-area-inset-bottom))"},children:a.jsx("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:sh.map(x=>{const v=f===x.id,C=x.icon;return a.jsxs("button",{onClick:()=>m(x.id),className:`
                flex flex-col items-center px-4 py-2 rounded-xl transition-all duration-200
                ${v?"text-accent-primary":"text-dark-400 hover:text-text-secondary"}
              `,children:[a.jsxs("div",{className:`
                relative p-1.5 rounded-lg transition-all duration-200
                ${v?"bg-accent-primary/10":""}
              `,children:[a.jsx(C,{className:`w-5 h-5 ${v?"stroke-[2.5]":"stroke-[1.5]"}`}),v&&a.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-accent-primary rounded-full"})]}),a.jsx("span",{className:`text-xs mt-1 ${v?"font-semibold":"font-medium"}`,children:x.label})]},x.id)})})})}function ah({profile:f,program:m,meals:x,workouts:v,todaysMeals:C,todaysWorkouts:w}){const I=()=>{let xe=null;if(f?.raceDate?xe=new Date(f.raceDate):f?.aestheticGoalDate?xe=new Date(f.aestheticGoalDate):f?.targetDate&&(xe=new Date(f.targetDate)),xe){const ie=xe-new Date,ne=Math.ceil(ie/(1e3*60*60*24));return ne>0?ne:null}return null},M=()=>{const xe=I(),fe=f?.programType||m?.primaryGoal,ie=f?.programSubtype||m?.primarySubtype,ne=m?.currentPhase||"Base",be=m?.currentWeek||1,de=m?.mesocycleWeeks||5;if(fe==="endurance"){if(ie==="marathon"||ie==="running"){const me=f?.raceDistance||"race";return xe?`Your ${me} is ${xe} days away! Every run gets you closer to the finish line. `:"Building your aerobic base. Consistency beats intensity at this stage!"}return ie==="triathlon"?xe?`${xe} days until race day! Swim, bike, run - you've got this! `:"Training all three disciplines builds an unstoppable athlete.":"Endurance is built one workout at a time. Keep moving forward!"}if(fe==="strength"){const me=f?.strengthGoals?.filter(ue=>ue.target)||[];return me.length>0?`${me.length} lift targets set. Progressive overload is your path to strength! `:`${ne} phase - building the foundation for serious strength gains.`}if(fe==="aesthetic"){const me=f?.targetBodyFat;return me?`Working toward ${me}% body fat. Trust the process - gains take time! `:"Sculpting takes patience. Your dedication will pay off!"}if(fe==="fatloss"){const me=f?.targetWeight;return me?`On track to ${me} ${f?.weightUnit||"lbs"}. Small daily wins add up! `:"Fat loss is a marathon, not a sprint. Stay consistent!"}return{Base:`Building your foundation in the ${ne} phase. This sets you up for success!`,Build:`${ne} phase - time to push your limits and grow stronger!`,Peak:`${ne} phase - you're at your strongest. Time to perform!`,Deload:"Recovery week - your body adapts and grows during rest. Embrace it!"}[ne]||`Week ${be} of ${de} - keep showing up!`},_=()=>{const xe=new Date().getDay()||7,fe=m?.weeklySchedule?.find(de=>de.day===xe),ie=fe?.isRestDay,ne=fe?.sessions||[],be=w?.length||0;return{isRestDay:ie,totalSessions:ne.length,completedSessions:be,sessionNames:ne.map(de=>de.focus).join(" + ")}},N=()=>{const xe=m?.daysPerWeek||f?.desiredTrainingDays||4,fe=new Date,ie=new Date(fe);ie.setDate(fe.getDate()-fe.getDay()+1);const ne=v?.filter(be=>{const de=new Date(be.loggedAt||be.completedAt);return de>=ie&&de<=fe})||[];return{completed:ne.length,target:xe,percentage:Math.min(ne.length/xe*100,100)}},P=()=>{const xe=f?.macros?.calories||f?.tdee||2e3,fe=C?.reduce((be,de)=>be+(de.calories||0),0)||0,ie=xe-fe,ne=fe/xe*100;return{consumed:fe,target:xe,remaining:Math.max(ie,0),percentOfTarget:ne,mealsLogged:C?.length||0}},j=()=>{const xe=m?.currentWeek||1,fe=m?.mesocycleWeeks||5;return{currentWeek:xe,totalWeeks:fe,percentage:xe/fe*100,phase:m?.currentPhase||"Base"}},$=I(),V=_(),z=N(),Z=P(),oe=j();return a.jsxs("div",{className:"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden",children:[a.jsx("div",{className:"px-4 py-3 border-b border-dark-600",children:a.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[a.jsx(Lr,{className:"w-5 h-5 text-accent-primary"}),"Daily Summary"]})}),a.jsxs("div",{className:"mx-4 mt-4 p-4 rounded-lg bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30",children:[$&&a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Rs,{className:"w-5 h-5 text-accent-primary"}),a.jsx("span",{className:"text-2xl font-bold text-white",children:$}),a.jsx("span",{className:"text-gray-300",children:"days to go"})]}),a.jsx("p",{className:"text-sm text-gray-200",children:M()})]}),a.jsxs("div",{className:"mx-4 mt-4 p-3 rounded-lg bg-dark-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ri,{className:"w-5 h-5 text-accent-secondary"}),a.jsx("span",{className:"text-white font-medium",children:"Today"})]}),V.isRestDay?a.jsx("span",{className:"text-gray-400",children:" Rest Day"}):a.jsxs("span",{className:"text-gray-300",children:[V.completedSessions,"/",V.totalSessions," sessions"]})]}),!V.isRestDay&&V.sessionNames&&a.jsx("p",{className:"text-sm text-gray-400 mt-1 ml-7",children:V.sessionNames})]}),a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[a.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[a.jsx(js,{className:"w-4 h-4"}),"This Week"]}),a.jsxs("span",{className:"text-white font-medium",children:[z.completed,"/",z.target," workouts"]})]}),a.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-500 bg-accent-primary",style:{width:`${z.percentage}%`}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[a.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[a.jsx(si,{className:"w-4 h-4"}),"Calories Today"]}),a.jsxs("span",{className:`font-medium ${Z.percentOfTarget>100?"text-orange-400":"text-green-400"}`,children:[Z.consumed.toLocaleString()," / ",Z.target.toLocaleString()]})]}),a.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${Z.percentOfTarget<=100?"bg-green-500":"bg-orange-500"}`,style:{width:`${Math.min(Z.percentOfTarget,100)}%`}})}),Z.remaining>0&&a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[Z.remaining," kcal remaining"]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[a.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[a.jsx(Fi,{className:"w-4 h-4"}),oe.phase," Phase"]}),a.jsxs("span",{className:"text-white font-medium",children:["Week ",oe.currentWeek," of ",oe.totalWeeks]})]}),a.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-accent-secondary rounded-full transition-all duration-500",style:{width:`${oe.percentage}%`}})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[a.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:v?.length||0}),a.jsx("p",{className:"text-xs text-gray-400",children:"Total Workouts"})]}),a.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:x?.length||0}),a.jsx("p",{className:"text-xs text-gray-400",children:"Meals Logged"})]})]})]})]})}function lh({profile:f,program:m}){const[x,v]=Re.useState(!0);if(!m)return null;const{name:C,description:w,totalWeeks:I,currentWeek:M,currentPhase:_,phases:N,athleteLevel:P,daysPerWeek:j,paces:$,baseline:V,progressionRules:z,primaryGoal:Z,primarySubtype:oe,secondaryGoal:xe,isHybrid:fe,allowDoubleDays:ie,weeksUntilGoal:ne}=m,be=()=>{if(!N||N.length===0)return[];const ee=[];let Y=null;return N.forEach((Ce,B)=>{const pe=B+1;!Y||Y.name!==Ce?(Y&&ee.push(Y),Y={name:Ce,startWeek:pe,endWeek:pe,weeks:1}):(Y.endWeek=pe,Y.weeks++)}),Y&&ee.push(Y),ee},de=ee=>{const Y={Base:{focus:"Building aerobic foundation & movement patterns",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Increasing volume & introducing intensity",intensity:"Moderate",icon:""},"Build 2":{focus:"Peak volume & race-specific workouts",intensity:"Moderate-High",icon:""},Build:{focus:"Increasing mileage & race-specific workouts",intensity:"Moderate-High",icon:""},Peak:{focus:"Sharpening fitness & race simulation",intensity:"High",icon:""},Taper:{focus:"Reducing volume for race readiness",intensity:"Low (recovery)",icon:""},Deload:{focus:"Active recovery & adaptation",intensity:"Low",icon:""}},Ce={Base:{focus:"Building movement patterns & work capacity",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Progressive overload & strength gains",intensity:"Moderate",icon:""},"Build 2":{focus:"Heavy singles & competition prep",intensity:"Moderate-High",icon:""},Build:{focus:"Progressive overload & strength gains",intensity:"Moderate-High",icon:""},Peak:{focus:"Testing maxes & competition preparation",intensity:"High",icon:""},Taper:{focus:"Reducing volume for max strength",intensity:"Low (maintain)",icon:""},Deload:{focus:"Active recovery & CNS restoration",intensity:"Low",icon:""}},B={Base:{focus:"Building mind-muscle connection & form",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Increasing volume & hypertrophy",intensity:"Moderate",icon:""},"Build 2":{focus:"Peak volume & maximum pump",intensity:"Moderate-High",icon:""},Build:{focus:"Progressive overload & muscle building",intensity:"Moderate-High",icon:""},Peak:{focus:"Maximum intensity & muscle definition",intensity:"High",icon:""},Taper:{focus:"Reducing fatigue for peak aesthetics",intensity:"Low (maintain)",icon:""},Deload:{focus:"Active recovery & muscle repair",intensity:"Low",icon:""}};let pe;return Z==="endurance"?pe=Y:Z==="strength"?pe=Ce:Z==="aesthetic"?pe=B:pe=Ce,pe[ee]||{focus:"Training adaptation",intensity:"Moderate",icon:""}},X=()=>{if(Z!=="endurance"||!V?.endurance)return null;const ee=V.endurance.currentMileage||20,Y=P==="elite"?60:P==="advanced"?50:40,Ce=[];let B=ee;for(let pe=1;pe<=I;pe++)(pe===1||pe===Math.floor(I*.25)||pe===Math.floor(I*.5)||pe===Math.floor(I*.75)||pe===I-2||pe===I)&&Ce.push({week:pe,mileage:Math.round(B)}),B=Math.min(B*1.05,Y);return{starting:ee,peak:Y,milestones:Ce}},me=()=>{const Y=(m.weeklySchedule||[]).filter(B=>!B.isRestDay),Ce=Y.reduce((B,pe)=>B+(pe.sessions?.reduce((te,ce)=>te+(ce.exercises?.length||0),0)||0),0);return{workoutDays:Y.length,totalExercises:Ce,avgExercisesPerDay:Math.round(Ce/Math.max(Y.length,1))}},ue=be(),Ae=X(),Ue=me();return a.jsxs("div",{className:"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden",children:[a.jsxs("button",{onClick:()=>v(!x),className:"w-full px-4 py-3 border-b border-dark-600 flex items-center justify-between hover:bg-dark-700 transition-colors",children:[a.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[a.jsx(W1,{className:"w-5 h-5 text-accent-primary"}),"Program Overview"]}),x?a.jsx(H1,{className:"w-5 h-5 text-gray-400"}):a.jsx(Oc,{className:"w-5 h-5 text-gray-400"})]}),x&&a.jsxs("div",{className:"p-4 space-y-5",children:[a.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30",children:[a.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:C}),a.jsx("p",{className:"text-sm text-gray-300",children:w}),a.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-xs",children:[a.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-full text-gray-300",children:[I," weeks"]}),a.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-full text-gray-300",children:[j," days/week"]}),a.jsxs("span",{className:"px-2 py-1 bg-accent-primary/30 rounded-full text-accent-primary",children:[P," level"]}),ne&&a.jsxs("span",{className:"px-2 py-1 bg-accent-secondary/30 rounded-full text-accent-secondary",children:[ne," weeks to race"]})]})]}),(fe||oe==="triathlon")&&a.jsxs("div",{className:"p-4 rounded-lg bg-dark-700 border border-dark-500",children:[a.jsxs("h5",{className:"text-sm font-medium text-white mb-3 flex items-center gap-2",children:[oe==="triathlon"?"":"",oe==="triathlon"?"Triathlon Training Structure":"Hybrid Program Structure"]}),a.jsx("div",{className:"space-y-3 text-sm",children:oe==="triathlon"?a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-gray-300",children:["This program combines ",a.jsx("span",{className:"text-cyan-400 font-medium",children:"swim"}),","," ",a.jsx("span",{className:"text-orange-400 font-medium",children:"bike"}),", and"," ",a.jsx("span",{className:"text-green-400 font-medium",children:"run"})," training with"," ",a.jsx("span",{className:"text-accent-primary font-medium",children:"injury prevention strength"})," work."]}),a.jsxs("ul",{className:"space-y-2 text-gray-400",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-accent-primary",children:""}),a.jsx("span",{children:"3 strength sessions/week (hip stability, core, shoulders)"})]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-accent-primary",children:""}),a.jsx("span",{children:"Double day sessions (AM cardio + PM strength)"})]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-accent-primary",children:""}),a.jsx("span",{children:"Brick workouts for race-day transitions"})]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-accent-primary",children:""}),a.jsx("span",{children:"Periodized build to peak race fitness"})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("p",{className:"text-gray-300",children:["This hybrid program balances ",a.jsx("span",{className:"text-accent-primary font-medium",children:Z})," training with ",a.jsx("span",{className:"text-accent-secondary font-medium",children:xe})," work for well-rounded athletic development."]}),a.jsxs("ul",{className:"space-y-2 text-gray-400",children:[a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-accent-primary",children:""}),a.jsxs("span",{children:["Minimum 3 ",xe," sessions strategically placed"]})]}),ie&&a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-accent-primary",children:""}),a.jsx("span",{children:"Double days on recovery/easy training days"})]}),a.jsxs("li",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-accent-primary",children:""}),a.jsx("span",{children:"Smart scheduling to avoid interference"})]})]})]})})]}),a.jsxs("div",{children:[a.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[a.jsx(Rs,{className:"w-4 h-4"}),"Training Phases"]}),a.jsx("div",{className:"space-y-2",children:ue.map((ee,Y)=>{const Ce=de(ee.name),B=ee.name===_,pe={Base:{border:"border-l-blue-500",bg:"bg-blue-500/5"},Build:{border:"border-l-orange-500",bg:"bg-orange-500/5"},"Build 1":{border:"border-l-orange-500",bg:"bg-orange-500/5"},"Build 2":{border:"border-l-red-500",bg:"bg-red-500/5"},Peak:{border:"border-l-purple-500",bg:"bg-purple-500/5"},Taper:{border:"border-l-cyan-500",bg:"bg-cyan-500/5"},Deload:{border:"border-l-green-500",bg:"bg-green-500/5"}},te=pe[ee.name]||pe.Base,ce=()=>{if(ee.weeks===1)return`Week ${ee.startWeek}`;if(ee.weeks<=3){const q=[];for(let H=ee.startWeek;H<=ee.endWeek;H++)q.push(H);return`Weeks ${q.join(", ")}`}else return`Weeks ${ee.startWeek}${ee.endWeek}`};return a.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${te.border} ${B?"bg-accent-primary/20 border border-l-4 border-accent-primary/50":`${te.bg} border border-dark-600`}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{children:Ce.icon}),a.jsx("span",{className:"font-medium text-white",children:ee.name}),B&&a.jsx("span",{className:"text-xs px-2 py-0.5 bg-accent-primary rounded-full text-white",children:"Current"})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("span",{className:"text-xs text-accent-primary font-medium",children:ce()}),a.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",ee.weeks," ",ee.weeks===1?"week":"weeks",")"]})]})]}),a.jsx("p",{className:"text-xs text-gray-400",children:Ce.focus}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Intensity: ",Ce.intensity]})]},Y)})})]}),Ae&&a.jsxs("div",{children:[a.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[a.jsx(js,{className:"w-4 h-4"}),"Weekly Mileage Progression"]}),a.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("span",{className:"text-gray-400 text-sm",children:"Start"}),a.jsx("span",{className:"text-gray-400 text-sm",children:"Peak"})]}),a.jsxs("div",{className:"relative h-8 bg-dark-600 rounded-full overflow-hidden",children:[a.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-accent-primary to-accent-secondary rounded-full",style:{width:`${Ae.starting/Ae.peak*100}%`}}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-3",children:[a.jsxs("span",{className:"text-xs font-medium text-white",children:[Ae.starting," mi"]}),a.jsxs("span",{className:"text-xs font-medium text-white",children:[Ae.peak," mi"]})]})]}),a.jsx("div",{className:"mt-3 grid grid-cols-3 gap-2 text-center",children:Ae.milestones.slice(0,3).map((ee,Y)=>a.jsxs("div",{className:"text-xs",children:[a.jsxs("span",{className:"text-gray-500",children:["Wk ",ee.week]}),a.jsxs("p",{className:"text-white font-medium",children:[ee.mileage," mi"]})]},Y))})]})]}),$&&a.jsxs("div",{children:[a.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[a.jsx(Ts,{className:"w-4 h-4"}),"Your Training Paces"]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{label:"Easy",pace:$.easyPace,zone:"Zone 2"},{label:"Tempo",pace:$.tempoPace,zone:"Zone 3-4"},{label:"Interval",pace:$.intervalPace,zone:"Zone 4-5"},{label:"Long Run",pace:$.longRunPace,zone:"Zone 2"}].map((ee,Y)=>a.jsxs("div",{className:"p-2 bg-dark-700 rounded-lg",children:[a.jsx("span",{className:"text-xs text-gray-400",children:ee.label}),a.jsx("p",{className:"text-sm font-medium text-white",children:ee.pace}),a.jsx("span",{className:"text-xs text-gray-500",children:ee.zone})]},Y))}),$.currentPace&&$.goalPace!==$.currentPace&&a.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Current: ",$.currentPace,"  Goal: ",$.goalPace]})]}),V?.strength?.lifts?.length>0&&a.jsxs("div",{children:[a.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[a.jsx(ri,{className:"w-4 h-4"}),"Your Lift Targets"]}),a.jsx("div",{className:"space-y-2",children:V.strength.lifts.map((ee,Y)=>a.jsxs("div",{className:"p-2 bg-dark-700 rounded-lg flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-white",children:ee.exercise}),a.jsxs("div",{className:"text-right",children:[a.jsxs("span",{className:"text-sm text-gray-400",children:[ee.current1RM,"lbs"]}),a.jsx("span",{className:"text-gray-500 mx-1",children:""}),a.jsxs("span",{className:"text-sm text-accent-secondary font-medium",children:[ee.target1RM,"lbs"]})]})]},Y))})]}),a.jsxs("div",{children:[a.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[a.jsx(Dc,{className:"w-4 h-4"}),"Weekly Structure"]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:Ue.workoutDays}),a.jsx("p",{className:"text-xs text-gray-400",children:"Workout Days"})]}),a.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:Ue.totalExercises}),a.jsx("p",{className:"text-xs text-gray-400",children:"Exercises/Week"})]}),a.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:7-Ue.workoutDays}),a.jsx("p",{className:"text-xs text-gray-400",children:"Rest Days"})]})]})]}),a.jsxs("div",{children:[a.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[a.jsx(Br,{className:"w-4 h-4"}),"Program Principles"]}),a.jsxs("div",{className:"space-y-2",children:[z&&a.jsxs(a.Fragment,{children:[z.mileageIncrease&&a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(y0,{className:"w-4 h-4 text-accent-warning mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-gray-300",children:z.mileageIncrease})]}),z.strengthIncrease&&a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(js,{className:"w-4 h-4 text-accent-success mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-gray-300",children:z.strengthIncrease})]}),z.deloadProtocol&&a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Br,{className:"w-4 h-4 text-accent-primary mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-gray-300",children:z.deloadProtocol})]})]}),a.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[a.jsx(Lr,{className:"w-4 h-4 text-accent-secondary mt-0.5 flex-shrink-0"}),a.jsx("span",{className:"text-gray-300",children:"RPE-based intensity to auto-regulate based on daily readiness"})]})]})]})]})]})}var We;(function(f){f[f.QR_CODE=0]="QR_CODE",f[f.AZTEC=1]="AZTEC",f[f.CODABAR=2]="CODABAR",f[f.CODE_39=3]="CODE_39",f[f.CODE_93=4]="CODE_93",f[f.CODE_128=5]="CODE_128",f[f.DATA_MATRIX=6]="DATA_MATRIX",f[f.MAXICODE=7]="MAXICODE",f[f.ITF=8]="ITF",f[f.EAN_13=9]="EAN_13",f[f.EAN_8=10]="EAN_8",f[f.PDF_417=11]="PDF_417",f[f.RSS_14=12]="RSS_14",f[f.RSS_EXPANDED=13]="RSS_EXPANDED",f[f.UPC_A=14]="UPC_A",f[f.UPC_E=15]="UPC_E",f[f.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(We||(We={}));var Gd=new Map([[We.QR_CODE,"QR_CODE"],[We.AZTEC,"AZTEC"],[We.CODABAR,"CODABAR"],[We.CODE_39,"CODE_39"],[We.CODE_93,"CODE_93"],[We.CODE_128,"CODE_128"],[We.DATA_MATRIX,"DATA_MATRIX"],[We.MAXICODE,"MAXICODE"],[We.ITF,"ITF"],[We.EAN_13,"EAN_13"],[We.EAN_8,"EAN_8"],[We.PDF_417,"PDF_417"],[We.RSS_14,"RSS_14"],[We.RSS_EXPANDED,"RSS_EXPANDED"],[We.UPC_A,"UPC_A"],[We.UPC_E,"UPC_E"],[We.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Vd;(function(f){f[f.UNKNOWN=0]="UNKNOWN",f[f.URL=1]="URL"})(Vd||(Vd={}));function oh(f){return Object.values(We).includes(f)}var Yl;(function(f){f[f.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",f[f.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Yl||(Yl={}));var ch=(function(){function f(){}return f.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",f.SCAN_DEFAULT_FPS=2,f.DEFAULT_DISABLE_FLIP=!1,f.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,f.DEFAULT_SUPPORTED_SCAN_TYPE=[Yl.SCAN_TYPE_CAMERA,Yl.SCAN_TYPE_FILE],f})(),S0=(function(){function f(m,x){this.format=m,this.formatName=x}return f.prototype.toString=function(){return this.formatName},f.create=function(m){if(!Gd.has(m))throw"".concat(m," not in html5QrcodeSupportedFormatsTextMap");return new f(m,Gd.get(m))},f})(),Xd=(function(){function f(){}return f.createFromText=function(m){var x={text:m};return{decodedText:m,result:x}},f.createFromQrcodeResult=function(m){return{decodedText:m.text,result:m}},f})(),Rc;(function(f){f[f.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",f[f.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",f[f.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Rc||(Rc={}));var uh=(function(){function f(){}return f.createFrom=function(m){return{errorMessage:m,type:Rc.UNKWOWN_ERROR}},f})(),dh=(function(){function f(m){this.verbose=m}return f.prototype.log=function(m){this.verbose&&console.log(m)},f.prototype.warn=function(m){this.verbose&&console.warn(m)},f.prototype.logError=function(m,x){(this.verbose||x===!0)&&console.error(m)},f.prototype.logErrors=function(m){if(m.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(m)},f})();function $r(f){return typeof f>"u"||f===null}var Di=(function(){function f(){}return f.codeParseError=function(m){return"QR code parse error, error = ".concat(m)},f.errorGettingUserMedia=function(m){return"Error getting userMedia, error = ".concat(m)},f.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},f.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},f.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},f.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},f.scannerPaused=function(){return"Scanner paused"},f})(),A0=(function(){function f(){}return f.isMediaStreamConstraintsValid=function(m,x){if(typeof m!="object"){var v=typeof m;return x.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(v,"."),!0),!1}for(var C=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],w=new Set(C),I=Object.keys(m),M=0,_=I;M<_.length;M++){var N=_[M];if(w.has(N))return x.logError("".concat(N," is not supported videoConstaints."),!0),!1}return!0},f})(),ja={exports:{}},hh=ja.exports,Zd;function fh(){return Zd||(Zd=1,(function(f,m){(function(x,v){v(m)})(hh,(function(x){function v(E){return E==null}var C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,e){E.__proto__=e}||function(E,e){for(var n in e)e.hasOwnProperty(n)&&(E[n]=e[n])};function w(E,e){C(E,e);function n(){this.constructor=E}E.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function I(E,e){var n=Object.setPrototypeOf;n?n(E,e):E.__proto__=e}function M(E,e){e===void 0&&(e=E.constructor);var n=Error.captureStackTrace;n&&n(E,e)}var _=(function(E){w(e,E);function e(n){var r=this.constructor,i=E.call(this,n)||this;return Object.defineProperty(i,"name",{value:r.name,enumerable:!1}),I(i,r.prototype),M(i),i}return e})(Error);class N extends _{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}N.kind="Exception";class P extends N{}P.kind="ArgumentException";class j extends N{}j.kind="IllegalArgumentException";class ${constructor(e){if(this.binarizer=e,e===null)throw new j("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,r,i){const l=this.binarizer.getLuminanceSource().crop(e,n,r,i);return new $(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new $(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new $(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class V extends N{static getChecksumInstance(){return new V}}V.kind="ChecksumException";class z{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class Z{static arraycopy(e,n,r,i,l){for(;l--;)r[i++]=e[n++]}static currentTimeMillis(){return Date.now()}}class oe extends N{}oe.kind="IndexOutOfBoundsException";class xe extends oe{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}xe.kind="ArrayIndexOutOfBoundsException";class fe{static fill(e,n){for(let r=0,i=e.length;r<i;r++)e[r]=n}static fillWithin(e,n,r,i){fe.rangeCheck(e.length,n,r);for(let l=n;l<r;l++)e[l]=i}static rangeCheck(e,n,r){if(n>r)throw new j("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new xe(n);if(r>e)throw new xe(r)}static asList(...e){return e}static create(e,n,r){return Array.from({length:e}).map(l=>Array.from({length:n}).fill(r))}static createInt32Array(e,n,r){return Array.from({length:e}).map(l=>Int32Array.from({length:n}).fill(r))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==n[r])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const r of e)n=31*n+r;return n}static fillUint8Array(e,n){for(let r=0;r!==e.length;r++)e[r]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)}static copyOfRange(e,n,r){const i=r-n,l=new Int32Array(i);return Z.arraycopy(e,n,l,0,i),l}static binarySearch(e,n,r){r===void 0&&(r=fe.numberComparator);let i=0,l=e.length-1;for(;i<=l;){const o=l+i>>1,u=r(n,e[o]);if(u>0)i=o+1;else if(u<0)l=o-1;else return o}return-i-1}static numberComparator(e,n){return e-n}}class ie{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}ie.MIN_VALUE_32_BITS=-2147483648,ie.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ne{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=ne.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=ne.makeArray(e);Z.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const r=this.bits;let i=Math.floor(e/32),l=r[i];l&=~((1<<(e&31))-1);const o=r.length;for(;l===0;){if(++i===o)return n;l=r[i]}const u=i*32+ie.numberOfTrailingZeros(l);return u>n?n:u}getNextUnset(e){const n=this.size;if(e>=n)return n;const r=this.bits;let i=Math.floor(e/32),l=~r[i];l&=~((1<<(e&31))-1);const o=r.length;for(;l===0;){if(++i===o)return n;l=~r[i]}const u=i*32+ie.numberOfTrailingZeros(l);return u>n?n:u}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new j;if(n===e)return;n--;const r=Math.floor(e/32),i=Math.floor(n/32),l=this.bits;for(let o=r;o<=i;o++){const u=o>r?0:e&31,g=(2<<(o<i?31:n&31))-(1<<u);l[o]|=g}}clear(){const e=this.bits.length,n=this.bits;for(let r=0;r<e;r++)n[r]=0}isRange(e,n,r){if(n<e||e<0||n>this.size)throw new j;if(n===e)return!0;n--;const i=Math.floor(e/32),l=Math.floor(n/32),o=this.bits;for(let u=i;u<=l;u++){const h=u>i?0:e&31,b=(2<<(u<l?31:n&31))-(1<<h)&4294967295;if((o[u]&b)!==(r?b:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new j("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let r=0;r<n;r++)this.appendBit(e.get(r))}xor(e){if(this.size!==e.size)throw new j("Sizes don't match");const n=this.bits;for(let r=0,i=n.length;r<i;r++)n[r]^=e.bits[r]}toBytes(e,n,r,i){for(let l=0;l<i;l++){let o=0;for(let u=0;u<8;u++)this.get(e)&&(o|=1<<7-u),e++;n[r+l]=o}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,i=this.bits;for(let l=0;l<r;l++){let o=i[l];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[n-l]=o}if(this.size!==r*32){const l=r*32-this.size;let o=e[0]>>>l;for(let u=1;u<r;u++){const h=e[u];o|=h<<32-l,e[u-1]=o,o=h>>>l}e[r-1]=o}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof ne))return!1;const n=e;return this.size===n.size&&fe.equals(this.bits,n.bits)}hashCode(){return 31*this.size+fe.hashCode(this.bits)}toString(){let e="";for(let n=0,r=this.size;n<r;n++)(n&7)===0&&(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new ne(this.size,this.bits.slice())}}var be;(function(E){E[E.OTHER=0]="OTHER",E[E.PURE_BARCODE=1]="PURE_BARCODE",E[E.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",E[E.TRY_HARDER=3]="TRY_HARDER",E[E.CHARACTER_SET=4]="CHARACTER_SET",E[E.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",E[E.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",E[E.ASSUME_GS1=7]="ASSUME_GS1",E[E.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",E[E.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",E[E.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(be||(be={}));var de=be;class X extends N{static getFormatInstance(){return new X}}X.kind="FormatException";var me;(function(E){E[E.Cp437=0]="Cp437",E[E.ISO8859_1=1]="ISO8859_1",E[E.ISO8859_2=2]="ISO8859_2",E[E.ISO8859_3=3]="ISO8859_3",E[E.ISO8859_4=4]="ISO8859_4",E[E.ISO8859_5=5]="ISO8859_5",E[E.ISO8859_6=6]="ISO8859_6",E[E.ISO8859_7=7]="ISO8859_7",E[E.ISO8859_8=8]="ISO8859_8",E[E.ISO8859_9=9]="ISO8859_9",E[E.ISO8859_10=10]="ISO8859_10",E[E.ISO8859_11=11]="ISO8859_11",E[E.ISO8859_13=12]="ISO8859_13",E[E.ISO8859_14=13]="ISO8859_14",E[E.ISO8859_15=14]="ISO8859_15",E[E.ISO8859_16=15]="ISO8859_16",E[E.SJIS=16]="SJIS",E[E.Cp1250=17]="Cp1250",E[E.Cp1251=18]="Cp1251",E[E.Cp1252=19]="Cp1252",E[E.Cp1256=20]="Cp1256",E[E.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",E[E.UTF8=22]="UTF8",E[E.ASCII=23]="ASCII",E[E.Big5=24]="Big5",E[E.GB18030=25]="GB18030",E[E.EUC_KR=26]="EUC_KR"})(me||(me={}));class ue{constructor(e,n,r,...i){this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=i,ue.VALUE_IDENTIFIER_TO_ECI.set(e,this),ue.NAME_TO_ECI.set(r,this);const l=this.values;for(let o=0,u=l.length;o!==u;o++){const h=l[o];ue.VALUES_TO_ECI.set(h,this)}for(const o of i)ue.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new X("incorect value");const n=ue.VALUES_TO_ECI.get(e);if(n===void 0)throw new X("incorect value");return n}static getCharacterSetECIByName(e){const n=ue.NAME_TO_ECI.get(e);if(n===void 0)throw new X("incorect value");return n}equals(e){if(!(e instanceof ue))return!1;const n=e;return this.getName()===n.getName()}}ue.VALUE_IDENTIFIER_TO_ECI=new Map,ue.VALUES_TO_ECI=new Map,ue.NAME_TO_ECI=new Map,ue.Cp437=new ue(me.Cp437,Int32Array.from([0,2]),"Cp437"),ue.ISO8859_1=new ue(me.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),ue.ISO8859_2=new ue(me.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),ue.ISO8859_3=new ue(me.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),ue.ISO8859_4=new ue(me.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),ue.ISO8859_5=new ue(me.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),ue.ISO8859_6=new ue(me.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),ue.ISO8859_7=new ue(me.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),ue.ISO8859_8=new ue(me.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),ue.ISO8859_9=new ue(me.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),ue.ISO8859_10=new ue(me.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),ue.ISO8859_11=new ue(me.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),ue.ISO8859_13=new ue(me.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),ue.ISO8859_14=new ue(me.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),ue.ISO8859_15=new ue(me.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),ue.ISO8859_16=new ue(me.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),ue.SJIS=new ue(me.SJIS,20,"SJIS","Shift_JIS"),ue.Cp1250=new ue(me.Cp1250,21,"Cp1250","windows-1250"),ue.Cp1251=new ue(me.Cp1251,22,"Cp1251","windows-1251"),ue.Cp1252=new ue(me.Cp1252,23,"Cp1252","windows-1252"),ue.Cp1256=new ue(me.Cp1256,24,"Cp1256","windows-1256"),ue.UnicodeBigUnmarked=new ue(me.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),ue.UTF8=new ue(me.UTF8,26,"UTF8","UTF-8"),ue.ASCII=new ue(me.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),ue.Big5=new ue(me.Big5,28,"Big5"),ue.GB18030=new ue(me.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),ue.EUC_KR=new ue(me.EUC_KR,30,"EUC_KR","EUC-KR");class Ae extends N{}Ae.kind="UnsupportedOperationException";class Ue{static decode(e,n){const r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)}static shouldDecodeOnFallback(e){return!Ue.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof ue?e:ue.getCharacterSetECIByName(e)}static decodeFallback(e,n){const r=this.encodingCharacterSet(n);if(Ue.isDecodeFallbackSupported(r)){let i="";for(let l=0,o=e.length;l<o;l++){let u=e[l].toString(16);u.length<2&&(u="0"+u),i+="%"+u}return decodeURIComponent(i)}if(r.equals(ue.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Ae(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(ue.UTF8)||e.equals(ue.ISO8859_1)||e.equals(ue.ASCII)}static encodeFallback(e){const r=btoa(unescape(encodeURIComponent(e))).split(""),i=[];for(let l=0;l<r.length;l++)i.push(r[l].charCodeAt(0));return new Uint8Array(i)}}class ee{static castAsNonUtf8Char(e,n=null){const r=n?n.getName():this.ISO88591;return Ue.decode(new Uint8Array([e]),r)}static guessEncoding(e,n){if(n!=null&&n.get(de.CHARACTER_SET)!==void 0)return n.get(de.CHARACTER_SET).toString();const r=e.length;let i=!0,l=!0,o=!0,u=0,h=0,g=0,b=0,S=0,k=0,R=0,L=0,W=0,K=0,se=0;const Se=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let ke=0;ke<r&&(i||l||o);ke++){const ve=e[ke]&255;o&&(u>0?(ve&128)===0?o=!1:u--:(ve&128)!==0&&((ve&64)===0?o=!1:(u++,(ve&32)===0?h++:(u++,(ve&16)===0?g++:(u++,(ve&8)===0?b++:o=!1))))),i&&(ve>127&&ve<160?i=!1:ve>159&&(ve<192||ve===215||ve===247)&&se++),l&&(S>0?ve<64||ve===127||ve>252?l=!1:S--:ve===128||ve===160||ve>239?l=!1:ve>160&&ve<224?(k++,L=0,R++,R>W&&(W=R)):ve>127?(S++,R=0,L++,L>K&&(K=L)):(R=0,L=0))}return o&&u>0&&(o=!1),l&&S>0&&(l=!1),o&&(Se||h+g+b>0)?ee.UTF8:l&&(ee.ASSUME_SHIFT_JIS||W>=3||K>=3)?ee.SHIFT_JIS:i&&l?W===2&&k===2||se*10>=r?ee.SHIFT_JIS:ee.ISO88591:i?ee.ISO88591:l?ee.SHIFT_JIS:o?ee.UTF8:ee.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let r=-1;function i(o,u,h,g,b,S){if(o==="%%")return"%";if(n[++r]===void 0)return;o=g?parseInt(g.substr(1)):void 0;let k=b?parseInt(b.substr(1)):void 0,R;switch(S){case"s":R=n[r];break;case"c":R=n[r][0];break;case"f":R=parseFloat(n[r]).toFixed(o);break;case"p":R=parseFloat(n[r]).toPrecision(o);break;case"e":R=parseFloat(n[r]).toExponential(o);break;case"x":R=parseInt(n[r]).toString(k||16);break;case"d":R=parseFloat(parseInt(n[r],k||10).toPrecision(o)).toFixed(0);break}R=typeof R=="object"?JSON.stringify(R):(+R).toString(k);let L=parseInt(h),W=h&&h[0]+""=="0"?"0":" ";for(;R.length<L;)R=u!==void 0?R+W:W+R;return R}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,i)}static getBytes(e,n){return Ue.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}ee.SHIFT_JIS=ue.SJIS.getName(),ee.GB2312="GB2312",ee.ISO88591=ue.ISO8859_1.getName(),ee.EUC_JP="EUC_JP",ee.UTF8=ue.UTF8.getName(),ee.PLATFORM_DEFAULT_ENCODING=ee.UTF8,ee.ASSUME_SHIFT_JIS=!1;class Y{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ee.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,r){for(let i=n;n<n+r;i++)this.append(e[i]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class Ce{constructor(e,n,r,i){if(this.width=e,this.height=n,this.rowSize=r,this.bits=i,n==null&&(n=e),this.height=n,e<1||n<1)throw new j("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,r=e[0].length,i=new Ce(r,n);for(let l=0;l<n;l++){const o=e[l];for(let u=0;u<r;u++)o[u]&&i.set(u,l)}return i}static parseFromString(e,n,r){if(e===null)throw new j("stringRepresentation cannot be null");const i=new Array(e.length);let l=0,o=0,u=-1,h=0,g=0;for(;g<e.length;)if(e.charAt(g)===`
`||e.charAt(g)==="\r"){if(l>o){if(u===-1)u=l-o;else if(l-o!==u)throw new j("row lengths do not match");o=l,h++}g++}else if(e.substring(g,g+n.length)===n)g+=n.length,i[l]=!0,l++;else if(e.substring(g,g+r.length)===r)g+=r.length,i[l]=!1,l++;else throw new j("illegal character encountered: "+e.substring(g));if(l>o){if(u===-1)u=l-o;else if(l-o!==u)throw new j("row lengths do not match");h++}const b=new Ce(u,h);for(let S=0;S<l;S++)i[S]&&b.set(Math.floor(S%u),Math.floor(S/u));return b}get(e,n){const r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0}set(e,n){const r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295}unset(e,n){const r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)}flip(e,n){const r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new j("input matrix dimensions do not match");const n=new ne(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits;for(let l=0,o=this.height;l<o;l++){const u=l*r,h=e.getRow(l,n).getBitArray();for(let g=0;g<r;g++)i[u+g]^=h[g]}}clear(){const e=this.bits,n=e.length;for(let r=0;r<n;r++)e[r]=0}setRegion(e,n,r,i){if(n<0||e<0)throw new j("Left and top must be nonnegative");if(i<1||r<1)throw new j("Height and width must be at least 1");const l=e+r,o=n+i;if(o>this.height||l>this.width)throw new j("The region must fit inside the matrix");const u=this.rowSize,h=this.bits;for(let g=n;g<o;g++){const b=g*u;for(let S=e;S<l;S++)h[b+Math.floor(S/32)]|=1<<(S&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new ne(this.width):n.clear();const r=this.rowSize,i=this.bits,l=e*r;for(let o=0;o<r;o++)n.setBulk(o*32,i[l+o]);return n}setRow(e,n){Z.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let r=new ne(e),i=new ne(e);for(let l=0,o=Math.floor((n+1)/2);l<o;l++)r=this.getRow(l,r),i=this.getRow(n-1-l,i),r.reverse(),i.reverse(),this.setRow(l,i),this.setRow(n-1-l,r)}getEnclosingRectangle(){const e=this.width,n=this.height,r=this.rowSize,i=this.bits;let l=e,o=n,u=-1,h=-1;for(let g=0;g<n;g++)for(let b=0;b<r;b++){const S=i[g*r+b];if(S!==0){if(g<o&&(o=g),g>h&&(h=g),b*32<l){let k=0;for(;(S<<31-k&4294967295)===0;)k++;b*32+k<l&&(l=b*32+k)}if(b*32+31>u){let k=31;for(;!(S>>>k);)k--;b*32+k>u&&(u=b*32+k)}}}return u<l||h<o?null:Int32Array.from([l,o,u-l+1,h-o+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let r=0;for(;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;const i=r/e;let l=r%e*32;const o=n[r];let u=0;for(;(o<<31-u&4294967295)===0;)u++;return l+=u,Int32Array.from([l,i])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let r=n.length-1;for(;r>=0&&n[r]===0;)r--;if(r<0)return null;const i=Math.floor(r/e);let l=Math.floor(r%e)*32;const o=n[r];let u=31;for(;!(o>>>u);)u--;return l+=u,Int32Array.from([l,i])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Ce))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&fe.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+fe.hashCode(this.bits),e}toString(e="X ",n="  ",r=`
`){return this.buildToString(e,n,r)}buildToString(e,n,r){let i=new Y;for(let l=0,o=this.height;l<o;l++){for(let u=0,h=this.width;u<h;u++)i.append(this.get(u,l)?e:n);i.append(r)}return i.toString()}clone(){return new Ce(this.width,this.height,this.rowSize,this.bits.slice())}}class B extends N{static getNotFoundInstance(){return new B}}B.kind="NotFoundException";class pe extends z{constructor(e){super(e),this.luminances=pe.EMPTY,this.buckets=new Int32Array(pe.LUMINANCE_BUCKETS)}getBlackRow(e,n){const r=this.getLuminanceSource(),i=r.getWidth();n==null||n.getSize()<i?n=new ne(i):n.clear(),this.initArrays(i);const l=r.getRow(e,this.luminances),o=this.buckets;for(let h=0;h<i;h++)o[(l[h]&255)>>pe.LUMINANCE_SHIFT]++;const u=pe.estimateBlackPoint(o);if(i<3)for(let h=0;h<i;h++)(l[h]&255)<u&&n.set(h);else{let h=l[0]&255,g=l[1]&255;for(let b=1;b<i-1;b++){const S=l[b+1]&255;(g*4-h-S)/2<u&&n.set(b),h=g,g=S}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),r=e.getHeight(),i=new Ce(n,r);this.initArrays(n);const l=this.buckets;for(let h=1;h<5;h++){const g=Math.floor(r*h/5),b=e.getRow(g,this.luminances),S=Math.floor(n*4/5);for(let k=Math.floor(n/5);k<S;k++){const R=b[k]&255;l[R>>pe.LUMINANCE_SHIFT]++}}const o=pe.estimateBlackPoint(l),u=e.getMatrix();for(let h=0;h<r;h++){const g=h*n;for(let b=0;b<n;b++)(u[g+b]&255)<o&&i.set(b,h)}return i}createBinarizer(e){return new pe(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let r=0;r<pe.LUMINANCE_BUCKETS;r++)n[r]=0}static estimateBlackPoint(e){const n=e.length;let r=0,i=0,l=0;for(let b=0;b<n;b++)e[b]>l&&(i=b,l=e[b]),e[b]>r&&(r=e[b]);let o=0,u=0;for(let b=0;b<n;b++){const S=b-i,k=e[b]*S*S;k>u&&(o=b,u=k)}if(i>o){const b=i;i=o,o=b}if(o-i<=n/16)throw new B;let h=o-1,g=-1;for(let b=o-1;b>i;b--){const S=b-i,k=S*S*(o-b)*(r-e[b]);k>g&&(h=b,g=k)}return h<<pe.LUMINANCE_SHIFT}}pe.LUMINANCE_BITS=5,pe.LUMINANCE_SHIFT=8-pe.LUMINANCE_BITS,pe.LUMINANCE_BUCKETS=1<<pe.LUMINANCE_BITS,pe.EMPTY=Uint8ClampedArray.from([0]);class te extends pe{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),r=e.getHeight();if(n>=te.MINIMUM_DIMENSION&&r>=te.MINIMUM_DIMENSION){const i=e.getMatrix();let l=n>>te.BLOCK_SIZE_POWER;(n&te.BLOCK_SIZE_MASK)!==0&&l++;let o=r>>te.BLOCK_SIZE_POWER;(r&te.BLOCK_SIZE_MASK)!==0&&o++;const u=te.calculateBlackPoints(i,l,o,n,r),h=new Ce(n,r);te.calculateThresholdForBlock(i,l,o,n,r,u,h),this.matrix=h}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new te(e)}static calculateThresholdForBlock(e,n,r,i,l,o,u){const h=l-te.BLOCK_SIZE,g=i-te.BLOCK_SIZE;for(let b=0;b<r;b++){let S=b<<te.BLOCK_SIZE_POWER;S>h&&(S=h);const k=te.cap(b,2,r-3);for(let R=0;R<n;R++){let L=R<<te.BLOCK_SIZE_POWER;L>g&&(L=g);const W=te.cap(R,2,n-3);let K=0;for(let Se=-2;Se<=2;Se++){const ke=o[k+Se];K+=ke[W-2]+ke[W-1]+ke[W]+ke[W+1]+ke[W+2]}const se=K/25;te.thresholdBlock(e,L,S,se,i,u)}}}static cap(e,n,r){return e<n?n:e>r?r:e}static thresholdBlock(e,n,r,i,l,o){for(let u=0,h=r*l+n;u<te.BLOCK_SIZE;u++,h+=l)for(let g=0;g<te.BLOCK_SIZE;g++)(e[h+g]&255)<=i&&o.set(n+g,r+u)}static calculateBlackPoints(e,n,r,i,l){const o=l-te.BLOCK_SIZE,u=i-te.BLOCK_SIZE,h=new Array(r);for(let g=0;g<r;g++){h[g]=new Int32Array(n);let b=g<<te.BLOCK_SIZE_POWER;b>o&&(b=o);for(let S=0;S<n;S++){let k=S<<te.BLOCK_SIZE_POWER;k>u&&(k=u);let R=0,L=255,W=0;for(let se=0,Se=b*i+k;se<te.BLOCK_SIZE;se++,Se+=i){for(let ke=0;ke<te.BLOCK_SIZE;ke++){const ve=e[Se+ke]&255;R+=ve,ve<L&&(L=ve),ve>W&&(W=ve)}if(W-L>te.MIN_DYNAMIC_RANGE)for(se++,Se+=i;se<te.BLOCK_SIZE;se++,Se+=i)for(let ke=0;ke<te.BLOCK_SIZE;ke++)R+=e[Se+ke]&255}let K=R>>te.BLOCK_SIZE_POWER*2;if(W-L<=te.MIN_DYNAMIC_RANGE&&(K=L/2,g>0&&S>0)){const se=(h[g-1][S]+2*h[g][S-1]+h[g-1][S-1])/4;L<se&&(K=se)}h[g][S]=K}}return h}}te.BLOCK_SIZE_POWER=3,te.BLOCK_SIZE=1<<te.BLOCK_SIZE_POWER,te.BLOCK_SIZE_MASK=te.BLOCK_SIZE-1,te.MINIMUM_DIMENSION=te.BLOCK_SIZE*5,te.MIN_DYNAMIC_RANGE=24;class ce{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,r,i){throw new Ae("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Ae("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Ae("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new Y;for(let r=0;r<this.height;r++){const i=this.getRow(r,e);for(let l=0;l<this.width;l++){const o=i[l]&255;let u;o<64?u="#":o<128?u="+":o<192?u=".":u=" ",n.append(u)}n.append(`
`)}return n.toString()}}class q extends ce{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const r=this.delegate.getRow(e,n),i=this.getWidth();for(let l=0;l<i;l++)r[l]=255-(r[l]&255);return r}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(n);for(let i=0;i<n;i++)r[i]=255-(e[i]&255);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,r,i){return new q(this.delegate.crop(e,n,r,i))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new q(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new q(this.delegate.rotateCounterClockwise45())}}class H extends ce{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=H.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return H.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,r){const i=new Uint8ClampedArray(n*r);for(let l=0,o=0,u=e.length;l<u;l+=4,o++){let h;if(e[l+3]===0)h=255;else{const b=e[l],S=e[l+1],k=e[l+2];h=306*b+601*S+117*k+512>>10}i[o]=h}return i}getRow(e,n){if(e<0||e>=this.getHeight())throw new j("Requested row is outside the image: "+e);const r=this.getWidth(),i=e*r;return n===null?n=this.buffer.slice(i,i+r):(n.length<r&&(n=new Uint8ClampedArray(r)),n.set(this.buffer.slice(i,i+r))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,r,i){return super.crop(e,n,r,i),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),r=n.getContext("2d"),i=e*H.DEGREE_TO_RADIANS,l=this.canvas.width,o=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(i))*l+Math.abs(Math.sin(i))*o),h=Math.ceil(Math.abs(Math.sin(i))*l+Math.abs(Math.cos(i))*o);return n.width=u,n.height=h,r.translate(u/2,h/2),r.rotate(i),r.drawImage(this.canvas,l/-2,o/-2),this.buffer=H.makeBufferFromCanvasImageData(n),this}invert(){return new q(this)}}H.DEGREE_TO_RADIANS=Math.PI/180;class D{constructor(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var U=(globalThis||zl||self||window||void 0)&&(globalThis||zl||self||window||void 0).__awaiter||function(E,e,n,r){function i(l){return l instanceof n?l:new n(function(o){o(l)})}return new(n||(n=Promise))(function(l,o){function u(b){try{g(r.next(b))}catch(S){o(S)}}function h(b){try{g(r.throw(b))}catch(S){o(S)}}function g(b){b.done?l(b.value):i(b.value).then(u,h)}g((r=r.apply(E,e||[])).next())})};class Ie{constructor(e,n=500,r){this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return U(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const r of e){const i=r.kind==="video"?"videoinput":r.kind;if(i!=="videoinput")continue;const l=r.deviceId||r.id,o=r.label||`Video device ${n.length+1}`,u=r.groupId,h={deviceId:l,label:o,kind:i,groupId:u};n.push(h)}return n})}getVideoInputDevices(){return U(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new D(n.deviceId,n.label))})}findDeviceById(e){return U(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(r=>r.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return U(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return U(this,void 0,void 0,function*(){this.reset();let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const i={video:r};return yield this.decodeOnceFromConstraints(i,n)})}decodeOnceFromConstraints(e,n){return U(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(r,n)})}decodeOnceFromStream(e,n){return U(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(e,n,r){return U(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,r)})}decodeFromVideoDevice(e,n,r){return U(this,void 0,void 0,function*(){let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const l={video:i};return yield this.decodeFromConstraints(l,n,r)})}decodeFromConstraints(e,n,r){return U(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(i,n,r)})}decodeFromStream(e,n,r){return U(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(i,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return U(this,void 0,void 0,function*(){const r=this.prepareVideoElement(n);return this.addVideoSource(r,e),this.videoElement=r,this.stream=e,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(e){return new Promise((n,r)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return U(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const r=document.getElementById(e);if(!r)throw new P(`element with id '${e}' not found`);if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new P(`element with id '${e}' must be an ${n} element`);return r}decodeFromImage(e,n){if(!e&&!n)throw new P("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new P("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,r){if(e===void 0&&n===void 0)throw new P("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)}decodeFromImageElement(e){if(!e)throw new P("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)}_decodeFromVideoElementSetup(e){if(!e)throw new P("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new P("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const r=this._decodeOnLoadImage(n);return n.src=e,r}decodeFromVideoUrl(e){if(!e)throw new P("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r}decodeFromVideoUrlContinuously(e,n){if(!e)throw new P("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,n);return r.src=e,i}_decodeOnLoadImage(e){return new Promise((n,r)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,r),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return U(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return U(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,r=!0){this._stopAsyncDecode=!1;const i=(l,o)=>{if(this._stopAsyncDecode){o(new B("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const u=this.decode(e);l(u)}catch(u){const h=n&&u instanceof B,b=(u instanceof V||u instanceof X)&&r;if(h||b)return setTimeout(i,this._timeBetweenDecodingAttempts,l,o);o(u)}};return new Promise((l,o)=>i(l,o))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const i=this.decode(e);n(i,null),setTimeout(r,this.timeBetweenScansMillis)}catch(i){n(null,i);const l=i instanceof V||i instanceof X,o=i instanceof B;(l||o)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,r){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,r=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),r=new H(n),i=new te(r);return new $(i)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const r=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=r}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=i+"px",n.width=r,n.height=i,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class _e{constructor(e,n,r=n==null?0:8*n.length,i,l,o=Z.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=i,this.format=l,this.timestamp=o,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=i,this.format=l,this.resultMetadata=null,o==null?this.timestamp=Z.currentTimeMillis():this.timestamp=o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const r=new Array(n.length+e.length);Z.arraycopy(n,0,r,0,n.length),Z.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ye;(function(E){E[E.AZTEC=0]="AZTEC",E[E.CODABAR=1]="CODABAR",E[E.CODE_39=2]="CODE_39",E[E.CODE_93=3]="CODE_93",E[E.CODE_128=4]="CODE_128",E[E.DATA_MATRIX=5]="DATA_MATRIX",E[E.EAN_8=6]="EAN_8",E[E.EAN_13=7]="EAN_13",E[E.ITF=8]="ITF",E[E.MAXICODE=9]="MAXICODE",E[E.PDF_417=10]="PDF_417",E[E.QR_CODE=11]="QR_CODE",E[E.RSS_14=12]="RSS_14",E[E.RSS_EXPANDED=13]="RSS_EXPANDED",E[E.UPC_A=14]="UPC_A",E[E.UPC_E=15]="UPC_E",E[E.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ye||(ye={}));var he=ye,Be;(function(E){E[E.OTHER=0]="OTHER",E[E.ORIENTATION=1]="ORIENTATION",E[E.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",E[E.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",E[E.ISSUE_NUMBER=4]="ISSUE_NUMBER",E[E.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",E[E.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",E[E.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",E[E.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",E[E.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",E[E.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Be||(Be={}));var Me=Be;class Oe{constructor(e,n,r,i,l=-1,o=-1){this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Le{exp(e){return this.expTable[e]}log(e){if(e===0)throw new j;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class Je{constructor(e,n){if(n.length===0)throw new j;this.field=e;const r=n.length;if(r>1&&n[0]===0){let i=1;for(;i<r&&n[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),Z.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let r;if(e===1){r=0;for(let o=0,u=n.length;o!==u;o++){const h=n[o];r=Le.addOrSubtract(r,h)}return r}r=n[0];const i=n.length,l=this.field;for(let o=1;o<i;o++)r=Le.addOrSubtract(l.multiply(e,r),n[o]);return r}addOrSubtract(e){if(!this.field.equals(e.field))throw new j("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,r=e.coefficients;if(n.length>r.length){const o=n;n=r,r=o}let i=new Int32Array(r.length);const l=r.length-n.length;Z.arraycopy(r,0,i,0,l);for(let o=l;o<r.length;o++)i[o]=Le.addOrSubtract(n[o-l],r[o]);return new Je(this.field,i)}multiply(e){if(!this.field.equals(e.field))throw new j("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,r=n.length,i=e.coefficients,l=i.length,o=new Int32Array(r+l-1),u=this.field;for(let h=0;h<r;h++){const g=n[h];for(let b=0;b<l;b++)o[h+b]=Le.addOrSubtract(o[h+b],u.multiply(g,i[b]))}return new Je(u,o)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,r=this.field,i=new Int32Array(n),l=this.coefficients;for(let o=0;o<n;o++)i[o]=r.multiply(l[o],e);return new Je(r,i)}multiplyByMonomial(e,n){if(e<0)throw new j;if(n===0)return this.field.getZero();const r=this.coefficients,i=r.length,l=new Int32Array(i+e),o=this.field;for(let u=0;u<i;u++)l[u]=o.multiply(r[u],n);return new Je(o,l)}divide(e){if(!this.field.equals(e.field))throw new j("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new j("Divide by 0");const n=this.field;let r=n.getZero(),i=this;const l=e.getCoefficient(e.getDegree()),o=n.inverse(l);for(;i.getDegree()>=e.getDegree()&&!i.isZero();){const u=i.getDegree()-e.getDegree(),h=n.multiply(i.getCoefficient(i.getDegree()),o),g=e.multiplyByMonomial(u,h),b=n.buildMonomial(u,h);r=r.addOrSubtract(b),i=i.addOrSubtract(g)}return[r,i]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){const i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class sr extends N{}sr.kind="ArithmeticException";class at extends Le{constructor(e,n,r){super(),this.primitive=e,this.size=n,this.generatorBase=r;const i=new Int32Array(n);let l=1;for(let u=0;u<n;u++)i[u]=l,l*=2,l>=n&&(l^=e,l&=n-1);this.expTable=i;const o=new Int32Array(n);for(let u=0;u<n-1;u++)o[i[u]]=u;this.logTable=o,this.zero=new Je(this,Int32Array.from([0])),this.one=new Je(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new j;if(n===0)return this.zero;const r=new Int32Array(e+1);return r[0]=n,new Je(this,r)}inverse(e){if(e===0)throw new sr;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ie.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}at.AZTEC_DATA_12=new at(4201,4096,1),at.AZTEC_DATA_10=new at(1033,1024,1),at.AZTEC_DATA_6=new at(67,64,1),at.AZTEC_PARAM=new at(19,16,1),at.QR_CODE_FIELD_256=new at(285,256,0),at.DATA_MATRIX_FIELD_256=new at(301,256,1),at.AZTEC_DATA_8=at.DATA_MATRIX_FIELD_256,at.MAXICODE_FIELD_64=at.AZTEC_DATA_6;class Gn extends N{}Gn.kind="ReedSolomonException";class vn extends N{}vn.kind="IllegalStateException";class Rn{constructor(e){this.field=e}decode(e,n){const r=this.field,i=new Je(r,e),l=new Int32Array(n);let o=!0;for(let R=0;R<n;R++){const L=i.evaluateAt(r.exp(R+r.getGeneratorBase()));l[l.length-1-R]=L,L!==0&&(o=!1)}if(o)return;const u=new Je(r,l),h=this.runEuclideanAlgorithm(r.buildMonomial(n,1),u,n),g=h[0],b=h[1],S=this.findErrorLocations(g),k=this.findErrorMagnitudes(b,S);for(let R=0;R<S.length;R++){const L=e.length-1-r.log(S[R]);if(L<0)throw new Gn("Bad error location");e[L]=at.addOrSubtract(e[L],k[R])}}runEuclideanAlgorithm(e,n,r){if(e.getDegree()<n.getDegree()){const R=e;e=n,n=R}const i=this.field;let l=e,o=n,u=i.getZero(),h=i.getOne();for(;o.getDegree()>=(r/2|0);){let R=l,L=u;if(l=o,u=h,l.isZero())throw new Gn("r_{i-1} was zero");o=R;let W=i.getZero();const K=l.getCoefficient(l.getDegree()),se=i.inverse(K);for(;o.getDegree()>=l.getDegree()&&!o.isZero();){const Se=o.getDegree()-l.getDegree(),ke=i.multiply(o.getCoefficient(o.getDegree()),se);W=W.addOrSubtract(i.buildMonomial(Se,ke)),o=o.addOrSubtract(l.multiplyByMonomial(Se,ke))}if(h=W.multiply(u).addOrSubtract(L),o.getDegree()>=l.getDegree())throw new vn("Division algorithm failed to reduce polynomial?")}const g=h.getCoefficient(0);if(g===0)throw new Gn("sigmaTilde(0) was zero");const b=i.inverse(g),S=h.multiplyScalar(b),k=o.multiplyScalar(b);return[S,k]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const r=new Int32Array(n);let i=0;const l=this.field;for(let o=1;o<l.getSize()&&i<n;o++)e.evaluateAt(o)===0&&(r[i]=l.inverse(o),i++);if(i!==n)throw new Gn("Error locator degree does not match number of roots");return r}findErrorMagnitudes(e,n){const r=n.length,i=new Int32Array(r),l=this.field;for(let o=0;o<r;o++){const u=l.inverse(n[o]);let h=1;for(let g=0;g<r;g++)if(o!==g){const b=l.multiply(n[g],u),S=(b&1)===0?b|1:b&-2;h=l.multiply(h,S)}i[o]=l.multiply(e.evaluateAt(u),l.inverse(h)),l.getGeneratorBase()!==0&&(i[o]=l.multiply(i[o],u))}return i}}var Dt;(function(E){E[E.UPPER=0]="UPPER",E[E.LOWER=1]="LOWER",E[E.MIXED=2]="MIXED",E[E.DIGIT=3]="DIGIT",E[E.PUNCT=4]="PUNCT",E[E.BINARY=5]="BINARY"})(Dt||(Dt={}));class vt{decode(e){this.ddata=e;let n=e.getBits(),r=this.extractBits(n),i=this.correctBits(r),l=vt.convertBoolArrayToByteArray(i),o=vt.getEncodedData(i),u=new Oe(l,o,null,null);return u.setNumBits(i.length),u}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,r=Dt.UPPER,i=Dt.UPPER,l="",o=0;for(;o<n;)if(i===Dt.BINARY){if(n-o<5)break;let u=vt.readCode(e,o,5);if(o+=5,u===0){if(n-o<11)break;u=vt.readCode(e,o,11)+31,o+=11}for(let h=0;h<u;h++){if(n-o<8){o=n;break}const g=vt.readCode(e,o,8);l+=ee.castAsNonUtf8Char(g),o+=8}i=r}else{let u=i===Dt.DIGIT?4:5;if(n-o<u)break;let h=vt.readCode(e,o,u);o+=u;let g=vt.getCharacter(i,h);g.startsWith("CTRL_")?(r=i,i=vt.getTable(g.charAt(5)),g.charAt(6)==="L"&&(r=i)):(l+=g,i=r)}return l}static getTable(e){switch(e){case"L":return Dt.LOWER;case"P":return Dt.PUNCT;case"M":return Dt.MIXED;case"D":return Dt.DIGIT;case"B":return Dt.BINARY;default:return Dt.UPPER}}static getCharacter(e,n){switch(e){case Dt.UPPER:return vt.UPPER_TABLE[n];case Dt.LOWER:return vt.LOWER_TABLE[n];case Dt.MIXED:return vt.MIXED_TABLE[n];case Dt.PUNCT:return vt.PUNCT_TABLE[n];case Dt.DIGIT:return vt.DIGIT_TABLE[n];default:throw new vn("Bad table")}}correctBits(e){let n,r;this.ddata.getNbLayers()<=2?(r=6,n=at.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=at.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=at.AZTEC_DATA_10):(r=12,n=at.AZTEC_DATA_12);let i=this.ddata.getNbDatablocks(),l=e.length/r;if(l<i)throw new X;let o=e.length%r,u=new Int32Array(l);for(let k=0;k<l;k++,o+=r)u[k]=vt.readCode(e,o,r);try{new Rn(n).decode(u,l-i)}catch(k){throw new X(k)}let h=(1<<r)-1,g=0;for(let k=0;k<i;k++){let R=u[k];if(R===0||R===h)throw new X;(R===1||R===h-1)&&g++}let b=new Array(i*r-g),S=0;for(let k=0;k<i;k++){let R=u[k];if(R===1||R===h-1)b.fill(R>1,S,S+r-1),S+=r-1;else for(let L=r-1;L>=0;--L)b[S++]=(R&1<<L)!==0}return b}extractBits(e){let n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(n?11:14)+r*4,l=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,n));if(n)for(let u=0;u<l.length;u++)l[u]=u;else{let u=i+1+2*ie.truncDivision(ie.truncDivision(i,2)-1,15),h=i/2,g=ie.truncDivision(u,2);for(let b=0;b<h;b++){let S=b+ie.truncDivision(b,15);l[h-b-1]=g-S-1,l[h+b]=g+S+1}}for(let u=0,h=0;u<r;u++){let g=(r-u)*4+(n?9:12),b=u*2,S=i-1-b;for(let k=0;k<g;k++){let R=k*2;for(let L=0;L<2;L++)o[h+R+L]=e.get(l[b+L],l[b+k]),o[h+2*g+R+L]=e.get(l[b+k],l[S-L]),o[h+4*g+R+L]=e.get(l[S-L],l[S-k]),o[h+6*g+R+L]=e.get(l[S-k],l[b+L])}h+=g*8}return o}static readCode(e,n,r){let i=0;for(let l=n;l<n+r;l++)i<<=1,e[l]&&(i|=1);return i}static readByte(e,n){let r=e.length-n;return r>=8?vt.readCode(e,n,8):vt.readCode(e,n,r)<<8-r}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let r=0;r<n.length;r++)n[r]=vt.readByte(e,8*r);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}vt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],vt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],vt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],vt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],vt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ut{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,r,i){const l=e-r,o=n-i;return Math.sqrt(l*l+o*o)}static sum(e){let n=0;for(let r=0,i=e.length;r!==i;r++){const l=e[r];n+=l}return n}}class kr{static floatToIntBits(e){return e}}kr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Fe{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Fe){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*kr.floatToIntBits(this.x)+kr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]);let l,o,u;if(r>=n&&r>=i?(o=e[0],l=e[1],u=e[2]):i>=r&&i>=n?(o=e[1],l=e[0],u=e[2]):(o=e[2],l=e[0],u=e[1]),this.crossProductZ(l,o,u)<0){const h=l;l=u,u=h}e[0]=l,e[1]=o,e[2]=u}static distance(e,n){return ut.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,r){const i=n.x,l=n.y;return(r.x-i)*(e.y-l)-(r.y-l)*(e.x-i)}}class ts{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Ui extends ts{constructor(e,n,r,i,l){super(e,n),this.compact=r,this.nbDatablocks=i,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ir{constructor(e,n,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=ir.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);const l=n/2|0;if(this.leftInit=r-l,this.rightInit=r+l,this.upInit=i-l,this.downInit=i+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new B}detect(){let e=this.leftInit,n=this.rightInit,r=this.upInit,i=this.downInit,l=!1,o=!0,u=!1,h=!1,g=!1,b=!1,S=!1;const k=this.width,R=this.height;for(;o;){o=!1;let L=!0;for(;(L||!h)&&n<k;)L=this.containsBlackPoint(r,i,n,!1),L?(n++,o=!0,h=!0):h||n++;if(n>=k){l=!0;break}let W=!0;for(;(W||!g)&&i<R;)W=this.containsBlackPoint(e,n,i,!0),W?(i++,o=!0,g=!0):g||i++;if(i>=R){l=!0;break}let K=!0;for(;(K||!b)&&e>=0;)K=this.containsBlackPoint(r,i,e,!1),K?(e--,o=!0,b=!0):b||e--;if(e<0){l=!0;break}let se=!0;for(;(se||!S)&&r>=0;)se=this.containsBlackPoint(e,n,r,!0),se?(r--,o=!0,S=!0):S||r--;if(r<0){l=!0;break}o&&(u=!0)}if(!l&&u){const L=n-e;let W=null;for(let ke=1;W===null&&ke<L;ke++)W=this.getBlackPointOnSegment(e,i-ke,e+ke,i);if(W==null)throw new B;let K=null;for(let ke=1;K===null&&ke<L;ke++)K=this.getBlackPointOnSegment(e,r+ke,e+ke,r);if(K==null)throw new B;let se=null;for(let ke=1;se===null&&ke<L;ke++)se=this.getBlackPointOnSegment(n,r+ke,n-ke,r);if(se==null)throw new B;let Se=null;for(let ke=1;Se===null&&ke<L;ke++)Se=this.getBlackPointOnSegment(n,i-ke,n-ke,i);if(Se==null)throw new B;return this.centerEdges(Se,W,se,K)}else throw new B}getBlackPointOnSegment(e,n,r,i){const l=ut.round(ut.distance(e,n,r,i)),o=(r-e)/l,u=(i-n)/l,h=this.image;for(let g=0;g<l;g++){const b=ut.round(e+g*o),S=ut.round(n+g*u);if(h.get(b,S))return new Fe(b,S)}return null}centerEdges(e,n,r,i){const l=e.getX(),o=e.getY(),u=n.getX(),h=n.getY(),g=r.getX(),b=r.getY(),S=i.getX(),k=i.getY(),R=ir.CORR;return l<this.width/2?[new Fe(S-R,k+R),new Fe(u+R,h+R),new Fe(g-R,b-R),new Fe(l+R,o-R)]:[new Fe(S+R,k+R),new Fe(u+R,h-R),new Fe(g-R,b+R),new Fe(l-R,o-R)]}containsBlackPoint(e,n,r,i){const l=this.image;if(i){for(let o=e;o<=n;o++)if(l.get(o,r))return!0}else for(let o=e;o<=n;o++)if(l.get(r,o))return!0;return!1}}ir.INIT_SIZE=10,ir.CORR=1;class ii{static checkAndNudgePoints(e,n){const r=e.getWidth(),i=e.getHeight();let l=!0;for(let o=0;o<n.length&&l;o+=2){const u=Math.floor(n[o]),h=Math.floor(n[o+1]);if(u<-1||u>r||h<-1||h>i)throw new B;l=!1,u===-1?(n[o]=0,l=!0):u===r&&(n[o]=r-1,l=!0),h===-1?(n[o+1]=0,l=!0):h===i&&(n[o+1]=i-1,l=!0)}l=!0;for(let o=n.length-2;o>=0&&l;o-=2){const u=Math.floor(n[o]),h=Math.floor(n[o+1]);if(u<-1||u>r||h<-1||h>i)throw new B;l=!1,u===-1?(n[o]=0,l=!0):u===r&&(n[o]=r-1,l=!0),h===-1?(n[o+1]=0,l=!0):h===i&&(n[o+1]=i-1,l=!0)}}}class On{constructor(e,n,r,i,l,o,u,h,g){this.a11=e,this.a21=n,this.a31=r,this.a12=i,this.a22=l,this.a32=o,this.a13=u,this.a23=h,this.a33=g}static quadrilateralToQuadrilateral(e,n,r,i,l,o,u,h,g,b,S,k,R,L,W,K){const se=On.quadrilateralToSquare(e,n,r,i,l,o,u,h);return On.squareToQuadrilateral(g,b,S,k,R,L,W,K).times(se)}transformPoints(e){const n=e.length,r=this.a11,i=this.a12,l=this.a13,o=this.a21,u=this.a22,h=this.a23,g=this.a31,b=this.a32,S=this.a33;for(let k=0;k<n;k+=2){const R=e[k],L=e[k+1],W=l*R+h*L+S;e[k]=(r*R+o*L+g)/W,e[k+1]=(i*R+u*L+b)/W}}transformPointsWithValues(e,n){const r=this.a11,i=this.a12,l=this.a13,o=this.a21,u=this.a22,h=this.a23,g=this.a31,b=this.a32,S=this.a33,k=e.length;for(let R=0;R<k;R++){const L=e[R],W=n[R],K=l*L+h*W+S;e[R]=(r*L+o*W+g)/K,n[R]=(i*L+u*W+b)/K}}static squareToQuadrilateral(e,n,r,i,l,o,u,h){const g=e-r+l-u,b=n-i+o-h;if(g===0&&b===0)return new On(r-e,l-r,e,i-n,o-i,n,0,0,1);{const S=r-l,k=u-l,R=i-o,L=h-o,W=S*L-k*R,K=(g*L-k*b)/W,se=(S*b-g*R)/W;return new On(r-e+K*r,u-e+se*u,e,i-n+K*i,h-n+se*h,n,K,se,1)}}static quadrilateralToSquare(e,n,r,i,l,o,u,h){return On.squareToQuadrilateral(e,n,r,i,l,o,u,h).buildAdjoint()}buildAdjoint(){return new On(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new On(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class ai extends ii{sampleGrid(e,n,r,i,l,o,u,h,g,b,S,k,R,L,W,K,se,Se,ke){const ve=On.quadrilateralToQuadrilateral(i,l,o,u,h,g,b,S,k,R,L,W,K,se,Se,ke);return this.sampleGridWithTransform(e,n,r,ve)}sampleGridWithTransform(e,n,r,i){if(n<=0||r<=0)throw new B;const l=new Ce(n,r),o=new Float32Array(2*n);for(let u=0;u<r;u++){const h=o.length,g=u+.5;for(let b=0;b<h;b+=2)o[b]=b/2+.5,o[b+1]=g;i.transformPoints(o),ii.checkAndNudgePoints(e,o);try{for(let b=0;b<h;b+=2)e.get(Math.floor(o[b]),Math.floor(o[b+1]))&&l.set(b/2,u)}catch{throw new B}}return l}}class Vn{static setGridSampler(e){Vn.gridSampler=e}static getInstance(){return Vn.gridSampler}}Vn.gridSampler=new ai;class cn{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new Fe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ns{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){let o=r[0];r[0]=r[2],r[2]=o}this.extractParameters(r);let i=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),l=this.getMatrixCornerPoints(r);return new Ui(i,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new B;let n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);let i=0;for(let o=0;o<4;o++){let u=r[(this.shift+o)%4];this.compact?(i<<=7,i+=u>>1&127):(i<<=10,i+=(u>>2&992)+(u>>1&31))}let l=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(e,n){let r=0;e.forEach((i,l,o)=>{let u=(i>>n-2<<1)+(i&1);r=(r<<3)+u}),r=((r&1)<<11)+(r>>1);for(let i=0;i<4;i++)if(ie.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new B}getCorrectedParameterData(e,n){let r,i;n?(r=7,i=2):(r=10,i=4);let l=r-i,o=new Int32Array(r);for(let h=r-1;h>=0;--h)o[h]=e&15,e>>=4;try{new Rn(at.AZTEC_PARAM).decode(o,l)}catch{throw new B}let u=0;for(let h=0;h<i;h++)u=(u<<4)+o[h];return u}getBullsEyeCorners(e){let n=e,r=e,i=e,l=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let S=this.getFirstDifferent(n,o,1,-1),k=this.getFirstDifferent(r,o,1,1),R=this.getFirstDifferent(i,o,-1,1),L=this.getFirstDifferent(l,o,-1,-1);if(this.nbCenterLayers>2){let W=this.distancePoint(L,S)*this.nbCenterLayers/(this.distancePoint(l,n)*(this.nbCenterLayers+2));if(W<.75||W>1.25||!this.isWhiteOrBlackRectangle(S,k,R,L))break}n=S,r=k,i=R,l=L,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new B;this.compact=this.nbCenterLayers===5;let u=new Fe(n.getX()+.5,n.getY()-.5),h=new Fe(r.getX()+.5,r.getY()+.5),g=new Fe(i.getX()-.5,i.getY()+.5),b=new Fe(l.getX()-.5,l.getY()-.5);return this.expandSquare([u,h,g,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,r,i;try{let u=new ir(this.image).detect();e=u[0],n=u[1],r=u[2],i=u[3]}catch{let h=this.image.getWidth()/2,g=this.image.getHeight()/2;e=this.getFirstDifferent(new cn(h+7,g-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new cn(h+7,g+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new cn(h-7,g+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new cn(h-7,g-7),!1,-1,-1).toResultPoint()}let l=ut.round((e.getX()+i.getX()+n.getX()+r.getX())/4),o=ut.round((e.getY()+i.getY()+n.getY()+r.getY())/4);try{let u=new ir(this.image,15,l,o).detect();e=u[0],n=u[1],r=u[2],i=u[3]}catch{e=this.getFirstDifferent(new cn(l+7,o-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new cn(l+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new cn(l-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new cn(l-7,o-7),!1,-1,-1).toResultPoint()}return l=ut.round((e.getX()+i.getX()+n.getX()+r.getX())/4),o=ut.round((e.getY()+i.getY()+n.getY()+r.getY())/4),new cn(l,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,r,i,l){let o=Vn.getInstance(),u=this.getDimension(),h=u/2-this.nbCenterLayers,g=u/2+this.nbCenterLayers;return o.sampleGrid(e,u,u,h,h,g,h,g,g,h,g,n.getX(),n.getY(),r.getX(),r.getY(),i.getX(),i.getY(),l.getX(),l.getY())}sampleLine(e,n,r){let i=0,l=this.distanceResultPoint(e,n),o=l/r,u=e.getX(),h=e.getY(),g=o*(n.getX()-e.getX())/l,b=o*(n.getY()-e.getY())/l;for(let S=0;S<r;S++)this.image.get(ut.round(u+S*g),ut.round(h+S*b))&&(i|=1<<r-S-1);return i}isWhiteOrBlackRectangle(e,n,r,i){let l=3;e=new cn(e.getX()-l,e.getY()+l),n=new cn(n.getX()-l,n.getY()-l),r=new cn(r.getX()+l,r.getY()-l),i=new cn(i.getX()+l,i.getY()+l);let o=this.getColor(i,e);if(o===0)return!1;let u=this.getColor(e,n);return u!==o||(u=this.getColor(n,r),u!==o)?!1:(u=this.getColor(r,i),u===o)}getColor(e,n){let r=this.distancePoint(e,n),i=(n.getX()-e.getX())/r,l=(n.getY()-e.getY())/r,o=0,u=e.getX(),h=e.getY(),g=this.image.get(e.getX(),e.getY()),b=Math.ceil(r);for(let k=0;k<b;k++)u+=i,h+=l,this.image.get(ut.round(u),ut.round(h))!==g&&o++;let S=o/r;return S>.1&&S<.9?0:S<=.1===g?1:-1}getFirstDifferent(e,n,r,i){let l=e.getX()+r,o=e.getY()+i;for(;this.isValid(l,o)&&this.image.get(l,o)===n;)l+=r,o+=i;for(l-=r,o-=i;this.isValid(l,o)&&this.image.get(l,o)===n;)l+=r;for(l-=r;this.isValid(l,o)&&this.image.get(l,o)===n;)o+=i;return o-=i,new cn(l,o)}expandSquare(e,n,r){let i=r/(2*n),l=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),u=(e[0].getX()+e[2].getX())/2,h=(e[0].getY()+e[2].getY())/2,g=new Fe(u+i*l,h+i*o),b=new Fe(u-i*l,h-i*o);l=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),u=(e[1].getX()+e[3].getX())/2,h=(e[1].getY()+e[3].getY())/2;let S=new Fe(u+i*l,h+i*o),k=new Fe(u-i*l,h-i*o);return[g,S,b,k]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=ut.round(e.getX()),r=ut.round(e.getY());return this.isValid(n,r)}distancePoint(e,n){return ut.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return ut.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ie.truncDivision(this.nbLayers-4,8)+1)+15}}class Ir{decode(e,n=null){let r=null,i=new ns(e.getBlackMatrix()),l=null,o=null;try{let b=i.detectMirror(!1);l=b.getPoints(),this.reportFoundResultPoints(n,l),o=new vt().decode(b)}catch(b){r=b}if(o==null)try{let b=i.detectMirror(!0);l=b.getPoints(),this.reportFoundResultPoints(n,l),o=new vt().decode(b)}catch(b){throw r??b}let u=new _e(o.getText(),o.getRawBytes(),o.getNumBits(),l,he.AZTEC,Z.currentTimeMillis()),h=o.getByteSegments();h!=null&&u.putMetadata(Me.BYTE_SEGMENTS,h);let g=o.getECLevel();return g!=null&&u.putMetadata(Me.ERROR_CORRECTION_LEVEL,g),u}reportFoundResultPoints(e,n){if(e!=null){let r=e.get(de.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach((i,l,o)=>{r.foundPossibleResultPoint(i)})}}reset(){}}class Jl extends Ie{constructor(e=500){super(new Ir,e)}}class Pt{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(de.TRY_HARDER)===!0&&e.isRotateSupported()){const l=e.rotateCounterClockwise(),o=this.doDecode(l,n),u=o.getResultMetadata();let h=270;u!==null&&u.get(Me.ORIENTATION)===!0&&(h=h+u.get(Me.ORIENTATION)%360),o.putMetadata(Me.ORIENTATION,h);const g=o.getResultPoints();if(g!==null){const b=l.getHeight();for(let S=0;S<g.length;S++)g[S]=new Fe(b-g[S].getY()-1,g[S].getX())}return o}else throw new B}}reset(){}doDecode(e,n){const r=e.getWidth(),i=e.getHeight();let l=new ne(r);const o=n&&n.get(de.TRY_HARDER)===!0,u=Math.max(1,i>>(o?8:5));let h;o?h=i:h=15;const g=Math.trunc(i/2);for(let b=0;b<h;b++){const S=Math.trunc((b+1)/2),k=(b&1)===0,R=g+u*(k?S:-S);if(R<0||R>=i)break;try{l=e.getBlackRow(R,l)}catch{continue}for(let L=0;L<2;L++){if(L===1&&(l.reverse(),n&&n.get(de.NEED_RESULT_POINT_CALLBACK)===!0)){const W=new Map;n.forEach((K,se)=>W.set(se,K)),W.delete(de.NEED_RESULT_POINT_CALLBACK),n=W}try{const W=this.decodeRow(R,l,n);if(L===1){W.putMetadata(Me.ORIENTATION,180);const K=W.getResultPoints();K!==null&&(K[0]=new Fe(r-K[0].getX()-1,K[0].getY()),K[1]=new Fe(r-K[1].getX()-1,K[1].getY()))}return W}catch{}}}throw new B}static recordPattern(e,n,r){const i=r.length;for(let g=0;g<i;g++)r[g]=0;const l=e.getSize();if(n>=l)throw new B;let o=!e.get(n),u=0,h=n;for(;h<l;){if(e.get(h)!==o)r[u]++;else{if(++u===i)break;r[u]=1,o=!o}h++}if(!(u===i||u===i-1&&h===l))throw new B}static recordPatternInReverse(e,n,r){let i=r.length,l=e.get(n);for(;n>0&&i>=0;)e.get(--n)!==l&&(i--,l=!l);if(i>=0)throw new B;Pt.recordPattern(e,n+1,r)}static patternMatchVariance(e,n,r){const i=e.length;let l=0,o=0;for(let g=0;g<i;g++)l+=e[g],o+=n[g];if(l<o)return Number.POSITIVE_INFINITY;const u=l/o;r*=u;let h=0;for(let g=0;g<i;g++){const b=e[g],S=n[g]*u,k=b>S?b-S:S-b;if(k>r)return Number.POSITIVE_INFINITY;h+=k}return h/l}}class je extends Pt{static findStartPattern(e){const n=e.getSize(),r=e.getNextSet(0);let i=0,l=Int32Array.from([0,0,0,0,0,0]),o=r,u=!1;const h=6;for(let g=r;g<n;g++)if(e.get(g)!==u)l[i]++;else{if(i===h-1){let b=je.MAX_AVG_VARIANCE,S=-1;for(let k=je.CODE_START_A;k<=je.CODE_START_C;k++){const R=Pt.patternMatchVariance(l,je.CODE_PATTERNS[k],je.MAX_INDIVIDUAL_VARIANCE);R<b&&(b=R,S=k)}if(S>=0&&e.isRange(Math.max(0,o-(g-o)/2),o,!1))return Int32Array.from([o,g,S]);o+=l[0]+l[1],l=l.slice(2,l.length-1),l[i-1]=0,l[i]=0,i--}else i++;l[i]=1,u=!u}throw new B}static decodeCode(e,n,r){Pt.recordPattern(e,r,n);let i=je.MAX_AVG_VARIANCE,l=-1;for(let o=0;o<je.CODE_PATTERNS.length;o++){const u=je.CODE_PATTERNS[o],h=this.patternMatchVariance(n,u,je.MAX_INDIVIDUAL_VARIANCE);h<i&&(i=h,l=o)}if(l>=0)return l;throw new B}decodeRow(e,n,r){const i=r&&r.get(de.ASSUME_GS1)===!0,l=je.findStartPattern(n),o=l[2];let u=0;const h=new Uint8Array(20);h[u++]=o;let g;switch(o){case je.CODE_START_A:g=je.CODE_CODE_A;break;case je.CODE_START_B:g=je.CODE_CODE_B;break;case je.CODE_START_C:g=je.CODE_CODE_C;break;default:throw new X}let b=!1,S=!1,k="",R=l[0],L=l[1];const W=Int32Array.from([0,0,0,0,0,0]);let K=0,se=0,Se=o,ke=0,ve=!0,lt=!1,tt=!1;for(;!b;){const br=S;switch(S=!1,K=se,se=je.decodeCode(n,W,L),h[u++]=se,se!==je.CODE_STOP&&(ve=!0),se!==je.CODE_STOP&&(ke++,Se+=ke*se),R=L,L+=W.reduce((fs,oa)=>fs+oa,0),se){case je.CODE_START_A:case je.CODE_START_B:case je.CODE_START_C:throw new X}switch(g){case je.CODE_CODE_A:if(se<64)tt===lt?k+=String.fromCharCode(32+se):k+=String.fromCharCode(32+se+128),tt=!1;else if(se<96)tt===lt?k+=String.fromCharCode(se-64):k+=String.fromCharCode(se+64),tt=!1;else switch(se!==je.CODE_STOP&&(ve=!1),se){case je.CODE_FNC_1:i&&(k.length===0?k+="]C1":k+="");break;case je.CODE_FNC_2:case je.CODE_FNC_3:break;case je.CODE_FNC_4_A:!lt&&tt?(lt=!0,tt=!1):lt&&tt?(lt=!1,tt=!1):tt=!0;break;case je.CODE_SHIFT:S=!0,g=je.CODE_CODE_B;break;case je.CODE_CODE_B:g=je.CODE_CODE_B;break;case je.CODE_CODE_C:g=je.CODE_CODE_C;break;case je.CODE_STOP:b=!0;break}break;case je.CODE_CODE_B:if(se<96)tt===lt?k+=String.fromCharCode(32+se):k+=String.fromCharCode(32+se+128),tt=!1;else switch(se!==je.CODE_STOP&&(ve=!1),se){case je.CODE_FNC_1:i&&(k.length===0?k+="]C1":k+="");break;case je.CODE_FNC_2:case je.CODE_FNC_3:break;case je.CODE_FNC_4_B:!lt&&tt?(lt=!0,tt=!1):lt&&tt?(lt=!1,tt=!1):tt=!0;break;case je.CODE_SHIFT:S=!0,g=je.CODE_CODE_A;break;case je.CODE_CODE_A:g=je.CODE_CODE_A;break;case je.CODE_CODE_C:g=je.CODE_CODE_C;break;case je.CODE_STOP:b=!0;break}break;case je.CODE_CODE_C:if(se<100)se<10&&(k+="0"),k+=se;else switch(se!==je.CODE_STOP&&(ve=!1),se){case je.CODE_FNC_1:i&&(k.length===0?k+="]C1":k+="");break;case je.CODE_CODE_A:g=je.CODE_CODE_A;break;case je.CODE_CODE_B:g=je.CODE_CODE_B;break;case je.CODE_STOP:b=!0;break}break}br&&(g=g===je.CODE_CODE_A?je.CODE_CODE_B:je.CODE_CODE_A)}const Sn=L-R;if(L=n.getNextUnset(L),!n.isRange(L,Math.min(n.getSize(),L+(L-R)/2),!1))throw new B;if(Se-=ke*K,Se%103!==K)throw new V;const Jn=k.length;if(Jn===0)throw new B;Jn>0&&ve&&(g===je.CODE_CODE_C?k=k.substring(0,Jn-2):k=k.substring(0,Jn-1));const Kt=(l[1]+l[0])/2,yt=R+Sn/2,Bt=h.length,yn=new Uint8Array(Bt);for(let br=0;br<Bt;br++)yn[br]=h[br];const Gr=[new Fe(Kt,e),new Fe(yt,e)];return new _e(k,yn,0,Gr,he.CODE_128,new Date().getTime())}}je.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],je.MAX_AVG_VARIANCE=.25,je.MAX_INDIVIDUAL_VARIANCE=.7,je.CODE_SHIFT=98,je.CODE_CODE_C=99,je.CODE_CODE_B=100,je.CODE_CODE_A=101,je.CODE_FNC_1=102,je.CODE_FNC_2=97,je.CODE_FNC_3=96,je.CODE_FNC_4_A=101,je.CODE_FNC_4_B=100,je.CODE_START_A=103,je.CODE_START_B=104,je.CODE_START_C=105,je.CODE_STOP=106;class Xt extends Pt{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,r){let i=this.counters;i.fill(0),this.decodeRowResult="";let l=Xt.findAsteriskPattern(n,i),o=n.getNextSet(l[1]),u=n.getSize(),h,g;do{Xt.recordPattern(n,o,i);let W=Xt.toNarrowWidePattern(i);if(W<0)throw new B;h=Xt.patternToChar(W),this.decodeRowResult+=h,g=o;for(let K of i)o+=K;o=n.getNextSet(o)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b=0;for(let W of i)b+=W;let S=o-g-b;if(o!==u&&S*2<b)throw new B;if(this.usingCheckDigit){let W=this.decodeRowResult.length-1,K=0;for(let se=0;se<W;se++)K+=Xt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(se));if(this.decodeRowResult.charAt(W)!==Xt.ALPHABET_STRING.charAt(K%43))throw new V;this.decodeRowResult=this.decodeRowResult.substring(0,W)}if(this.decodeRowResult.length===0)throw new B;let k;this.extendedMode?k=Xt.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let R=(l[1]+l[0])/2,L=g+b/2;return new _e(k,null,0,[new Fe(R,e),new Fe(L,e)],he.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let r=e.getSize(),i=e.getNextSet(0),l=0,o=i,u=!1,h=n.length;for(let g=i;g<r;g++)if(e.get(g)!==u)n[l]++;else{if(l===h-1){if(this.toNarrowWidePattern(n)===Xt.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((g-o)/2)),o,!1))return[o,g];o+=n[0]+n[1],n.copyWithin(0,2,2+l-1),n[l-1]=0,n[l]=0,l--}else l++;n[l]=1,u=!u}throw new B}static toNarrowWidePattern(e){let n=e.length,r=0,i;do{let l=2147483647;for(let h of e)h<l&&h>r&&(l=h);r=l,i=0;let o=0,u=0;for(let h=0;h<n;h++){let g=e[h];g>r&&(u|=1<<n-1-h,i++,o+=g)}if(i===3){for(let h=0;h<n&&i>0;h++){let g=e[h];if(g>r&&(i--,g*2>=o))return-1}return u}}while(i>3);return-1}static patternToChar(e){for(let n=0;n<Xt.CHARACTER_ENCODINGS.length;n++)if(Xt.CHARACTER_ENCODINGS[n]===e)return Xt.ALPHABET_STRING.charAt(n);if(e===Xt.ASTERISK_ENCODING)return"*";throw new B}static decodeExtended(e){let n=e.length,r="";for(let i=0;i<n;i++){let l=e.charAt(i);if(l==="+"||l==="$"||l==="%"||l==="/"){let o=e.charAt(i+1),u="\0";switch(l){case"+":if(o>="A"&&o<="Z")u=String.fromCharCode(o.charCodeAt(0)+32);else throw new X;break;case"$":if(o>="A"&&o<="Z")u=String.fromCharCode(o.charCodeAt(0)-64);else throw new X;break;case"%":if(o>="A"&&o<="E")u=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")u=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")u=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")u=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")u="\0";else if(o==="V")u="@";else if(o==="W")u="`";else if(o==="X"||o==="Y"||o==="Z")u="";else throw new X;break;case"/":if(o>="A"&&o<="O")u=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")u=":";else throw new X;break}r+=u,i++}else r+=l}return r}}Xt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Xt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Xt.ASTERISK_ENCODING=148;class pt extends Pt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,r){let i=this.decodeStart(n),l=this.decodeEnd(n),o=new Y;pt.decodeMiddle(n,i[1],l[0],o);let u=o.toString(),h=null;r!=null&&(h=r.get(de.ALLOWED_LENGTHS)),h==null&&(h=pt.DEFAULT_ALLOWED_LENGTHS);let g=u.length,b=!1,S=0;for(let L of h){if(g===L){b=!0;break}L>S&&(S=L)}if(!b&&g>S&&(b=!0),!b)throw new X;const k=[new Fe(i[1],e),new Fe(l[0],e)];return new _e(u,null,0,k,he.ITF,new Date().getTime())}static decodeMiddle(e,n,r,i){let l=new Int32Array(10),o=new Int32Array(5),u=new Int32Array(5);for(l.fill(0),o.fill(0),u.fill(0);n<r;){Pt.recordPattern(e,n,l);for(let g=0;g<5;g++){let b=2*g;o[g]=l[b],u[g]=l[b+1]}let h=pt.decodeDigit(o);i.append(h.toString()),h=this.decodeDigit(u),i.append(h.toString()),l.forEach(function(g){n+=g})}}decodeStart(e){let n=pt.skipWhiteSpace(e),r=pt.findGuardPattern(e,n,pt.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r}validateQuietZone(e,n){let r=this.narrowLineWidth*10;r=r<n?r:n;for(let i=n-1;r>0&&i>=0&&!e.get(i);i--)r--;if(r!==0)throw new B}static skipWhiteSpace(e){const n=e.getSize(),r=e.getNextSet(0);if(r===n)throw new B;return r}decodeEnd(e){e.reverse();try{let n=pt.skipWhiteSpace(e),r;try{r=pt.findGuardPattern(e,n,pt.END_PATTERN_REVERSED[0])}catch(l){l instanceof B&&(r=pt.findGuardPattern(e,n,pt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);let i=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-i,r}finally{e.reverse()}}static findGuardPattern(e,n,r){let i=r.length,l=new Int32Array(i),o=e.getSize(),u=!1,h=0,g=n;l.fill(0);for(let b=n;b<o;b++)if(e.get(b)!==u)l[h]++;else{if(h===i-1){if(Pt.patternMatchVariance(l,r,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return[g,b];g+=l[0]+l[1],Z.arraycopy(l,2,l,0,h-1),l[h-1]=0,l[h]=0,h--}else h++;l[h]=1,u=!u}throw new B}static decodeDigit(e){let n=pt.MAX_AVG_VARIANCE,r=-1,i=pt.PATTERNS.length;for(let l=0;l<i;l++){let o=pt.PATTERNS[l],u=Pt.patternMatchVariance(e,o,pt.MAX_INDIVIDUAL_VARIANCE);u<n?(n=u,r=l):u===n&&(r=-1)}if(r>=0)return r%10;throw new B}}pt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],pt.MAX_AVG_VARIANCE=.38,pt.MAX_INDIVIDUAL_VARIANCE=.5,pt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],pt.START_PATTERN=Int32Array.from([1,1,1,1]),pt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class At extends Pt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,r,i=0,l=Int32Array.from([0,0,0]);for(;!n;){l=Int32Array.from([0,0,0]),r=At.findGuardPattern(e,i,!1,this.START_END_PATTERN,l);let o=r[0];i=r[1];let u=o-(i-o);u>=0&&(n=e.isRange(u,o,!1))}return r}static checkChecksum(e){return At.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let r=parseInt(e.charAt(n-1),10);return At.getStandardUPCEANChecksum(e.substring(0,n-1))===r}static getStandardUPCEANChecksum(e){let n=e.length,r=0;for(let i=n-1;i>=0;i-=2){let l=e.charAt(i).charCodeAt(0)-48;if(l<0||l>9)throw new X;r+=l}r*=3;for(let i=n-2;i>=0;i-=2){let l=e.charAt(i).charCodeAt(0)-48;if(l<0||l>9)throw new X;r+=l}return(1e3-r)%10}static decodeEnd(e,n){return At.findGuardPattern(e,n,!1,At.START_END_PATTERN,new Int32Array(At.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,r,i){return this.findGuardPattern(e,n,r,i,new Int32Array(i.length))}static findGuardPattern(e,n,r,i,l){let o=e.getSize();n=r?e.getNextUnset(n):e.getNextSet(n);let u=0,h=n,g=i.length,b=r;for(let S=n;S<o;S++)if(e.get(S)!==b)l[u]++;else{if(u===g-1){if(Pt.patternMatchVariance(l,i,At.MAX_INDIVIDUAL_VARIANCE)<At.MAX_AVG_VARIANCE)return Int32Array.from([h,S]);h+=l[0]+l[1];let k=l.slice(2,l.length-1);for(let R=0;R<u-1;R++)l[R]=k[R];l[u-1]=0,l[u]=0,u--}else u++;l[u]=1,b=!b}throw new B}static decodeDigit(e,n,r,i){this.recordPattern(e,r,n);let l=this.MAX_AVG_VARIANCE,o=-1,u=i.length;for(let h=0;h<u;h++){let g=i[h],b=Pt.patternMatchVariance(n,g,At.MAX_INDIVIDUAL_VARIANCE);b<l&&(l=b,o=h)}if(o>=0)return o;throw new B}}At.MAX_AVG_VARIANCE=.48,At.MAX_INDIVIDUAL_VARIANCE=.7,At.START_END_PATTERN=Int32Array.from([1,1,1]),At.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),At.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),At.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Fr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,r){let i=this.decodeRowStringBuffer,l=this.decodeMiddle(n,r,i),o=i.toString(),u=Fr.parseExtensionString(o),h=[new Fe((r[0]+r[1])/2,e),new Fe(l,e)],g=new _e(o,null,0,h,he.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&g.putAllMetadata(u),g}decodeMiddle(e,n,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),o=n[1],u=0;for(let g=0;g<5&&o<l;g++){let b=At.decodeDigit(e,i,o,At.L_AND_G_PATTERNS);r+=String.fromCharCode(48+b%10);for(let S of i)o+=S;b>=10&&(u|=1<<4-g),g!==4&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(r.length!==5)throw new B;let h=this.determineCheckDigit(u);if(Fr.extensionChecksum(r.toString())!==h)throw new B;return o}static extensionChecksum(e){let n=e.length,r=0;for(let i=n-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(let i=n-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new B}static parseExtensionString(e){if(e.length!==5)return null;let n=Fr.parseExtension5String(e);return n==null?null:new Map([[Me.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let r=parseInt(e.substring(1)),i=(r/100).toString(),l=r%100,o=l<10?"0"+l:l.toString();return n+i+"."+o}}class _s{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,r){let i=this.decodeRowStringBuffer,l=this.decodeMiddle(n,r,i),o=i.toString(),u=_s.parseExtensionString(o),h=[new Fe((r[0]+r[1])/2,e),new Fe(l,e)],g=new _e(o,null,0,h,he.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&g.putAllMetadata(u),g}decodeMiddle(e,n,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),o=n[1],u=0;for(let h=0;h<2&&o<l;h++){let g=At.decodeDigit(e,i,o,At.L_AND_G_PATTERNS);r+=String.fromCharCode(48+g%10);for(let b of i)o+=b;g>=10&&(u|=1<<1-h),h!==1&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(r.length!==2)throw new B;if(parseInt(r.toString())%4!==u)throw new B;return o}static parseExtensionString(e){return e.length!==2?null:new Map([[Me.ISSUE_NUMBER,parseInt(e)]])}}class li{static decodeRow(e,n,r){let i=At.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Fr().decodeRow(e,n,i)}catch{return new _s().decodeRow(e,n,i)}}}li.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ot extends At{constructor(){super(),this.decodeRowStringBuffer="",ot.L_AND_G_PATTERNS=ot.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=ot.L_PATTERNS[e-10],r=new Int32Array(n.length);for(let i=0;i<n.length;i++)r[i]=n[n.length-i-1];ot.L_AND_G_PATTERNS[e]=r}}decodeRow(e,n,r){let i=ot.findStartGuardPattern(n),l=r==null?null:r.get(de.NEED_RESULT_POINT_CALLBACK);if(l!=null){const ve=new Fe((i[0]+i[1])/2,e);l.foundPossibleResultPoint(ve)}let o=this.decodeMiddle(n,i,this.decodeRowStringBuffer),u=o.rowOffset,h=o.resultString;if(l!=null){const ve=new Fe(u,e);l.foundPossibleResultPoint(ve)}let g=this.decodeEnd(n,u);if(l!=null){const ve=new Fe((g[0]+g[1])/2,e);l.foundPossibleResultPoint(ve)}let b=g[1],S=b+(b-g[0]);if(S>=n.getSize()||!n.isRange(b,S,!1))throw new B;let k=h.toString();if(k.length<8)throw new X;if(!ot.checkChecksum(k))throw new V;let R=(i[1]+i[0])/2,L=(g[1]+g[0])/2,W=this.getBarcodeFormat(),K=[new Fe(R,e),new Fe(L,e)],se=new _e(k,null,0,K,W,new Date().getTime()),Se=0;try{let ve=li.decodeRow(e,n,g[1]);se.putMetadata(Me.UPC_EAN_EXTENSION,ve.getText()),se.putAllMetadata(ve.getResultMetadata()),se.addResultPoints(ve.getResultPoints()),Se=ve.getText().length}catch{}let ke=r==null?null:r.get(de.ALLOWED_EAN_EXTENSIONS);if(ke!=null){let ve=!1;for(let lt in ke)if(Se.toString()===lt){ve=!0;break}if(!ve)throw new B}return se}decodeEnd(e,n){return ot.findGuardPattern(e,n,!1,ot.START_END_PATTERN,new Int32Array(ot.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return ot.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let r=parseInt(e.charAt(n-1),10);return ot.getStandardUPCEANChecksum(e.substring(0,n-1))===r}static getStandardUPCEANChecksum(e){let n=e.length,r=0;for(let i=n-1;i>=0;i-=2){let l=e.charAt(i).charCodeAt(0)-48;if(l<0||l>9)throw new X;r+=l}r*=3;for(let i=n-2;i>=0;i-=2){let l=e.charAt(i).charCodeAt(0)-48;if(l<0||l>9)throw new X;r+=l}return(1e3-r)%10}}class Dn extends ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),o=n[1],u=0;for(let g=0;g<6&&o<l;g++){let b=ot.decodeDigit(e,i,o,ot.L_AND_G_PATTERNS);r+=String.fromCharCode(48+b%10);for(let S of i)o+=S;b>=10&&(u|=1<<5-g)}r=Dn.determineFirstDigit(r,u),o=ot.findGuardPattern(e,o,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<6&&o<l;g++){let b=ot.decodeDigit(e,i,o,ot.L_PATTERNS);r+=String.fromCharCode(48+b);for(let S of i)o+=S}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return he.EAN_13}static determineFirstDigit(e,n){for(let r=0;r<10;r++)if(n===this.FIRST_DIGIT_ENCODINGS[r])return e=String.fromCharCode(48+r)+e,e;throw new B}}Dn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class zi extends ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,r){const i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),o=n[1];for(let h=0;h<4&&o<l;h++){let g=ot.decodeDigit(e,i,o,ot.L_PATTERNS);r+=String.fromCharCode(48+g);for(let b of i)o+=b}o=ot.findGuardPattern(e,o,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0))[1];for(let h=0;h<4&&o<l;h++){let g=ot.decodeDigit(e,i,o,ot.L_PATTERNS);r+=String.fromCharCode(48+g);for(let b of i)o+=b}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return he.EAN_8}}class Hi extends ot{constructor(){super(...arguments),this.ean13Reader=new Dn}getBarcodeFormat(){return he.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,r))}decodeMiddle(e,n,r){return this.ean13Reader.decodeMiddle(e,n,r)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let r=new _e(n.substring(1),null,null,e.getResultPoints(),he.UPC_A);return e.getResultMetadata()!=null&&r.putAllMetadata(e.getResultMetadata()),r}else throw new B}reset(){this.ean13Reader.reset()}}class Pn extends ot{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,r){const i=this.decodeMiddleCounters.map(g=>g);i[0]=0,i[1]=0,i[2]=0,i[3]=0;const l=e.getSize();let o=n[1],u=0;for(let g=0;g<6&&o<l;g++){const b=Pn.decodeDigit(e,i,o,Pn.L_AND_G_PATTERNS);r+=String.fromCharCode(48+b%10);for(let S of i)o+=S;b>=10&&(u|=1<<5-g)}let h=Pn.determineNumSysAndCheckDigit(r,u);return{rowOffset:o,resultString:h}}decodeEnd(e,n){return Pn.findGuardPatternWithoutCounters(e,n,!0,Pn.MIDDLE_END_PATTERN)}checkChecksum(e){return ot.checkChecksum(Pn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let r=0;r<=1;r++)for(let i=0;i<10;i++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][i]){let l=String.fromCharCode(48+r),o=String.fromCharCode(48+i);return l+e+o}throw B.getNotFoundInstance()}getBarcodeFormat(){return he.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(l=>l.charCodeAt(0)),r=new Y;r.append(e.charAt(0));let i=n[5];switch(i){case 0:case 1:case 2:r.appendChars(n,0,2),r.append(i),r.append("0000"),r.appendChars(n,2,3);break;case 3:r.appendChars(n,0,3),r.append("00000"),r.appendChars(n,3,2);break;case 4:r.appendChars(n,0,4),r.append("00000"),r.append(n[4]);break;default:r.appendChars(n,0,5),r.append("0000"),r.append(i);break}return e.length>=8&&r.append(e.charAt(7)),r.toString()}}Pn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Pn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class oi extends Pt{constructor(e){super();let n=e==null?null:e.get(de.POSSIBLE_FORMATS),r=[];v(n)?(r.push(new Dn),r.push(new Hi),r.push(new zi),r.push(new Pn)):(n.indexOf(he.EAN_13)>-1&&r.push(new Dn),n.indexOf(he.UPC_A)>-1&&r.push(new Hi),n.indexOf(he.EAN_8)>-1&&r.push(new zi),n.indexOf(he.UPC_E)>-1&&r.push(new Pn)),this.readers=r}decodeRow(e,n,r){for(let i of this.readers)try{const l=i.decodeRow(e,n,r),o=l.getBarcodeFormat()===he.EAN_13&&l.getText().charAt(0)==="0",u=r==null?null:r.get(de.POSSIBLE_FORMATS),h=u==null||u.includes(he.UPC_A);if(o&&h){const g=l.getRawBytes(),b=new _e(l.getText().substring(1),g,g?g.length:null,l.getResultPoints(),he.UPC_A);return b.putAllMetadata(l.getResultMetadata()),b}return l}catch{}throw new B}reset(){for(let e of this.readers)e.reset()}}class tn extends Pt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let r=0;r<n.length;r++)if(Pt.patternMatchVariance(e,n[r],tn.MAX_INDIVIDUAL_VARIANCE)<tn.MAX_AVG_VARIANCE)return r;throw new B}static count(e){return ut.sum(new Int32Array(e))}static increment(e,n){let r=0,i=n[0];for(let l=1;l<e.length;l++)n[l]>i&&(i=n[l],r=l);e[r]++}static decrement(e,n){let r=0,i=n[0];for(let l=1;l<e.length;l++)n[l]<i&&(i=n[l],r=l);e[r]--}static isFinderPattern(e){let n=e[0]+e[1],r=n+e[2]+e[3],i=n/r;if(i>=tn.MIN_FINDER_PATTERN_RATIO&&i<=tn.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;for(let u of e)u>o&&(o=u),u<l&&(l=u);return o<10*l}return!1}}tn.MAX_AVG_VARIANCE=.2,tn.MAX_INDIVIDUAL_VARIANCE=.45,tn.MIN_FINDER_PATTERN_RATIO=9.5/12,tn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Tr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Tr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ms{constructor(e,n,r,i,l){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Fe(r,l)),this.resultPoints.push(new Fe(i,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Ms))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class Nn{constructor(){}static getRSSvalue(e,n,r){let i=0;for(let h of e)i+=h;let l=0,o=0,u=e.length;for(let h=0;h<u-1;h++){let g;for(g=1,o|=1<<h;g<e[h];g++,o&=~(1<<h)){let b=Nn.combins(i-g-1,u-h-2);if(r&&o===0&&i-g-(u-h-1)>=u-h-1&&(b-=Nn.combins(i-g-(u-h),u-h-2)),u-h-1>1){let S=0;for(let k=i-g-(u-h-2);k>n;k--)S+=Nn.combins(i-g-k-1,u-h-3);b-=S*(u-1-h)}else i-g>n&&b--;l+=b}i-=g}return l}static combins(e,n){let r,i;e-n>n?(i=n,r=e-n):(i=e-n,r=n);let l=1,o=1;for(let u=e;u>r;u--)l*=u,o<=i&&(l/=o,o++);for(;o<=i;)l/=o,o++;return l}}class Gi{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let r=12*n,i=new ne(r),l=0,u=e[0].getRightChar().getValue();for(let h=11;h>=0;--h)(u&1<<h)!=0&&i.set(l),l++;for(let h=1;h<e.length;++h){let g=e[h],b=g.getLeftChar().getValue();for(let S=11;S>=0;--S)(b&1<<S)!=0&&i.set(l),l++;if(g.getRightChar()!=null){let S=g.getRightChar().getValue();for(let k=11;k>=0;--k)(S&1<<k)!=0&&i.set(l),l++}}return i}}class Xn{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Vi{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class $t extends Vi{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===$t.FNC1}}$t.FNC1="$";class ar extends Vi{constructor(e,n,r){super(e),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class gn extends Vi{constructor(e,n,r){if(super(e),n<0||n>10||r<0||r>10)throw new X;this.firstDigit=n,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===gn.FNC1}isSecondDigitFNC1(){return this.secondDigit===gn.FNC1}isAnyFNC1(){return this.firstDigit===gn.FNC1||this.secondDigit===gn.FNC1}}gn.FNC1=10;class De{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new B;let n=e.substring(0,2);for(let l of De.TWO_DIGIT_DATA_LENGTH)if(l[0]===n)return l[1]===De.VARIABLE_LENGTH?De.processVariableAI(2,l[2],e):De.processFixedAI(2,l[1],e);if(e.length<3)throw new B;let r=e.substring(0,3);for(let l of De.THREE_DIGIT_DATA_LENGTH)if(l[0]===r)return l[1]===De.VARIABLE_LENGTH?De.processVariableAI(3,l[2],e):De.processFixedAI(3,l[1],e);for(let l of De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===r)return l[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,l[2],e):De.processFixedAI(4,l[1],e);if(e.length<4)throw new B;let i=e.substring(0,4);for(let l of De.FOUR_DIGIT_DATA_LENGTH)if(l[0]===i)return l[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,l[2],e):De.processFixedAI(4,l[1],e);throw new B}static processFixedAI(e,n,r){if(r.length<e)throw new B;let i=r.substring(0,e);if(r.length<e+n)throw new B;let l=r.substring(e,e+n),o=r.substring(e+n),u="("+i+")"+l,h=De.parseFieldsInGeneralPurpose(o);return h==null?u:u+h}static processVariableAI(e,n,r){let i=r.substring(0,e),l;r.length<e+n?l=r.length:l=e+n;let o=r.substring(e,l),u=r.substring(l),h="("+i+")"+o,g=De.parseFieldsInGeneralPurpose(u);return g==null?h:h+g}}De.VARIABLE_LENGTH=[],De.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",De.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",De.VARIABLE_LENGTH,20],["22",De.VARIABLE_LENGTH,29],["30",De.VARIABLE_LENGTH,8],["37",De.VARIABLE_LENGTH,8],["90",De.VARIABLE_LENGTH,30],["91",De.VARIABLE_LENGTH,30],["92",De.VARIABLE_LENGTH,30],["93",De.VARIABLE_LENGTH,30],["94",De.VARIABLE_LENGTH,30],["95",De.VARIABLE_LENGTH,30],["96",De.VARIABLE_LENGTH,30],["97",De.VARIABLE_LENGTH,3],["98",De.VARIABLE_LENGTH,30],["99",De.VARIABLE_LENGTH,30]],De.THREE_DIGIT_DATA_LENGTH=[["240",De.VARIABLE_LENGTH,30],["241",De.VARIABLE_LENGTH,30],["242",De.VARIABLE_LENGTH,6],["250",De.VARIABLE_LENGTH,30],["251",De.VARIABLE_LENGTH,30],["253",De.VARIABLE_LENGTH,17],["254",De.VARIABLE_LENGTH,20],["400",De.VARIABLE_LENGTH,30],["401",De.VARIABLE_LENGTH,30],["402",17],["403",De.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",De.VARIABLE_LENGTH,20],["421",De.VARIABLE_LENGTH,15],["422",3],["423",De.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",De.VARIABLE_LENGTH,15],["391",De.VARIABLE_LENGTH,18],["392",De.VARIABLE_LENGTH,15],["393",De.VARIABLE_LENGTH,18],["703",De.VARIABLE_LENGTH,30]],De.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",De.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",De.VARIABLE_LENGTH,20],["8003",De.VARIABLE_LENGTH,30],["8004",De.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",De.VARIABLE_LENGTH,30],["8008",De.VARIABLE_LENGTH,12],["8018",18],["8020",De.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",De.VARIABLE_LENGTH,70],["8200",De.VARIABLE_LENGTH,70]];class rs{constructor(e){this.buffer=new Y,this.information=e}decodeAllCodes(e,n){let r=n,i=null;do{let l=this.decodeGeneralPurposeField(r,i),o=De.parseFieldsInGeneralPurpose(l.getNewString());if(o!=null&&e.append(o),l.isRemaining()?i=""+l.getRemainingValue():i=null,r===l.getNewPosition())break;r=l.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(e,4);return l===0?new gn(this.information.getSize(),gn.FNC1,gn.FNC1):new gn(this.information.getSize(),l-1,gn.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),r=(n-8)/11,i=(n-8)%11;return new gn(e+7,r,i)}extractNumericValueFromBitArray(e,n){return rs.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,r){let i=0;for(let l=0;l<r;++l)e.get(n+l)&&(i|=1<<r-l-1);return i}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let r=this.parseBlocks();return r!=null&&r.isRemaining()?new ar(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new ar(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let r=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(r!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new ar(this.current.getPosition(),this.buffer.toString()):n=new ar(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Xn(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new ar(this.current.getPosition(),this.buffer.toString());return new Xn(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Xn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new ar(this.current.getPosition(),this.buffer.toString());return new Xn(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Xn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new ar(this.current.getPosition(),this.buffer.toString());return new Xn(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Xn(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new $t(e+5,$t.FNC1);if(n>=5&&n<15)return new $t(e+5,"0"+(n-5));let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new $t(e+7,""+(r+1));if(r>=90&&r<116)return new $t(e+7,""+(r+7));let i=this.extractNumericValueFromBitArray(e,8),l;switch(i){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new X}return new $t(e+8,l)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new $t(e+5,$t.FNC1);if(n>=5&&n<15)return new $t(e+5,"0"+(n-5));let r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new $t(e+6,""+(r+33));let i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new vn("Decoding invalid alphanumeric value: "+r)}return new $t(e+6,i)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class Xi{constructor(e){this.information=e,this.generalDecoder=new rs(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Cn extends Xi{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let r=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,r)}encodeCompressedGtinWithoutAI(e,n,r){for(let i=0;i<4;++i){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*i,10);l/100===0&&e.append("0"),l/10===0&&e.append("0"),e.append(l)}Cn.appendCheckDigit(e,r)}static appendCheckDigit(e,n){let r=0;for(let i=0;i<13;i++){let l=e.charAt(i+n).charCodeAt(0)-48;r+=(i&1)===0?3*l:l}r=10-r%10,r===10&&(r=0),e.append(r)}}Cn.GTIN_SIZE=40;class Bn extends Cn{constructor(e){super(e)}parseInformation(){let e=new Y;e.append("(01)");let n=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(Bn.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,Bn.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,Bn.HEADER_SIZE+44)}}Bn.HEADER_SIZE=4;class Os extends Xi{constructor(e){super(e)}parseInformation(){let e=new Y;return this.getGeneralDecoder().decodeAllCodes(e,Os.HEADER_SIZE)}}Os.HEADER_SIZE=5;class Ds extends Cn{constructor(e){super(e)}encodeCompressedWeight(e,n,r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,r);this.addWeightCode(e,i);let l=this.checkWeight(i),o=1e5;for(let u=0;u<5;++u)l/o===0&&e.append("0"),o/=10;e.append(l)}}class lr extends Ds{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=lr.HEADER_SIZE+Ds.GTIN_SIZE+lr.WEIGHT_SIZE)throw new B;let e=new Y;return this.encodeCompressedGtin(e,lr.HEADER_SIZE),this.encodeCompressedWeight(e,lr.HEADER_SIZE+Ds.GTIN_SIZE,lr.WEIGHT_SIZE),e.toString()}}lr.HEADER_SIZE=5,lr.WEIGHT_SIZE=15;class Pa extends lr{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class Ba extends lr{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Zn extends Cn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Zn.HEADER_SIZE+Cn.GTIN_SIZE)throw new B;let e=new Y;this.encodeCompressedGtin(e,Zn.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Zn.HEADER_SIZE+Cn.GTIN_SIZE,Zn.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(Zn.HEADER_SIZE+Cn.GTIN_SIZE+Zn.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()}}Zn.HEADER_SIZE=8,Zn.LAST_DIGIT_SIZE=2;class un extends Cn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<un.HEADER_SIZE+Cn.GTIN_SIZE)throw new B;let e=new Y;this.encodeCompressedGtin(e,un.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+Cn.GTIN_SIZE,un.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(un.HEADER_SIZE+Cn.GTIN_SIZE+un.LAST_DIGIT_SIZE,un.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);let i=this.getGeneralDecoder().decodeGeneralPurposeField(un.HEADER_SIZE+Cn.GTIN_SIZE+un.LAST_DIGIT_SIZE+un.FIRST_THREE_DIGITS_SIZE,null);return e.append(i.getNewString()),e.toString()}}un.HEADER_SIZE=8,un.LAST_DIGIT_SIZE=2,un.FIRST_THREE_DIGITS_SIZE=10;class kt extends Ds{constructor(e,n,r){super(e),this.dateCode=r,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=kt.HEADER_SIZE+kt.GTIN_SIZE+kt.WEIGHT_SIZE+kt.DATE_SIZE)throw new B;let e=new Y;return this.encodeCompressedGtin(e,kt.HEADER_SIZE),this.encodeCompressedWeight(e,kt.HEADER_SIZE+kt.GTIN_SIZE,kt.WEIGHT_SIZE),this.encodeCompressedDate(e,kt.HEADER_SIZE+kt.GTIN_SIZE+kt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(n,kt.DATE_SIZE);if(r==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let i=r%32;r/=32;let l=r%12+1;r/=12;let o=r;o/10==0&&e.append("0"),e.append(o),l/10==0&&e.append("0"),e.append(l),i/10==0&&e.append("0"),e.append(i)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}kt.HEADER_SIZE=8,kt.WEIGHT_SIZE=20,kt.DATE_SIZE=16;function La(E){try{if(E.get(1))return new Bn(E);if(!E.get(2))return new Os(E);switch(rs.extractNumericValueFromBitArray(E,1,4)){case 4:return new Pa(E);case 5:return new Ba(E)}switch(rs.extractNumericValueFromBitArray(E,1,5)){case 12:return new Zn(E);case 13:return new un(E)}switch(rs.extractNumericValueFromBitArray(E,1,7)){case 56:return new kt(E,"310","11");case 57:return new kt(E,"320","11");case 58:return new kt(E,"310","13");case 59:return new kt(E,"320","13");case 60:return new kt(E,"310","15");case 61:return new kt(E,"320","15");case 62:return new kt(E,"310","17");case 63:return new kt(E,"320","17")}}catch(e){throw console.log(e),new vn("unknown decoder: "+E)}}class wt{constructor(e,n,r,i){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=i}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof wt?wt.equalsOrNull(e.leftchar,n.leftchar)&&wt.equalsOrNull(e.rightchar,n.rightchar)&&wt.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:wt.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Zi{constructor(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof Zi?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let r;return e.forEach((i,l)=>{n.forEach(o=>{i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}}class ge extends tn{constructor(e){super(...arguments),this.pairs=new Array(ge.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,r){this.pairs.length=0,this.startFromEven=!1;try{return ge.constructResult(this.decodeRow2pairs(e,n))}catch(i){this.verbose&&console.log(i)}return this.pairs.length=0,this.startFromEven=!0,ge.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(l){if(l instanceof B){if(!this.pairs.length)throw new B;r=!0}}if(this.checkChecksum())return this.pairs;let i;if(this.rows.length?i=!0:i=!1,this.storeRow(e,!1),i){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new B}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(r){this.verbose&&console.log(r)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let r=n;r<this.rows.length;r++){let i=this.rows[r];this.pairs.length=0;for(let o of e)this.pairs.push(o.getPairs());if(this.pairs.push(i.getPairs()),!ge.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(e);l.push(i);try{return this.checkRows(l,r+1)}catch(o){this.verbose&&console.log(o)}}throw new B}static isValidSequence(e){for(let n of ge.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let r=!0;for(let i=0;i<e.length;i++)if(e[i].getFinderPattern().getValue()!=n[i]){r=!1;break}if(r)return!0}return!1}storeRow(e,n){let r=0,i=!1,l=!1;for(;r<this.rows.length;){let o=this.rows[r];if(o.getRowNumber()>e){l=o.isEquivalent(this.pairs);break}i=o.isEquivalent(this.pairs),r++}l||i||ge.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new Zi(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let r of n)if(r.getPairs().length!==e.length){for(let i of r.getPairs())for(let l of e)if(wt.equals(i,l))break}}static isPartialRow(e,n){for(let r of n){let i=!0;for(let l of e){let o=!1;for(let u of r.getPairs())if(l.equals(u)){o=!0;break}if(!o){i=!1;break}}if(i)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=Gi.buildBitArray(e),i=La(n).parseInformation(),l=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),u=[l[0],l[1],o[0],o[1]];return new _e(i,null,null,u,he.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),r=e.getRightChar();if(r==null)return!1;let i=r.getChecksumPortion(),l=2;for(let u=1;u<this.pairs.size();++u){let h=this.pairs.get(u);i+=h.getLeftChar().getChecksumPortion(),l++;let g=h.getRightChar();g!=null&&(i+=g.getChecksumPortion(),l++)}return i%=211,211*(l-4)+i==n.getValue()}static getNextSecondBar(e,n){let r;return e.get(n)?(r=e.getNextUnset(n),r=e.getNextSet(r)):(r=e.getNextSet(n),r=e.getNextUnset(r)),r}retrieveNextPair(e,n,r){let i=n.length%2==0;this.startFromEven&&(i=!i);let l,o=!0,u=-1;do this.findNextPair(e,n,u),l=this.parseFoundFinderPattern(e,r,i),l==null?u=ge.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);let h=this.decodeDataCharacter(e,l,i,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new B;let g;try{g=this.decodeDataCharacter(e,l,i,!1)}catch(b){g=null,this.verbose&&console.log(b)}return new wt(h,g,l,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,r){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let l=e.getSize(),o;r>=0?o=r:this.isEmptyPair(n)?o=0:o=n[n.length-1].getFinderPattern().getStartEnd()[1];let u=n.length%2!=0;this.startFromEven&&(u=!u);let h=!1;for(;o<l&&(h=!e.get(o),!!h);)o++;let g=0,b=o;for(let S=o;S<l;S++)if(e.get(S)!=h)i[g]++;else{if(g==3){if(u&&ge.reverseCounters(i),ge.isFinderPattern(i)){this.startEnd[0]=b,this.startEnd[1]=S;return}u&&ge.reverseCounters(i),b+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,g--}else g++;i[g]=1,h=!h}throw new B}static reverseCounters(e){let n=e.length;for(let r=0;r<n/2;++r){let i=e[r];e[r]=e[n-r-1],e[n-r-1]=i}}parseFoundFinderPattern(e,n,r){let i,l,o;if(r){let g=this.startEnd[0]-1;for(;g>=0&&!e.get(g);)g--;g++,i=this.startEnd[0]-g,l=g,o=this.startEnd[1]}else l=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),i=o-this.startEnd[1];let u=this.getDecodeFinderCounters();Z.arraycopy(u,0,u,1,u.length-1),u[0]=i;let h;try{h=this.parseFinderValue(u,ge.FINDER_PATTERNS)}catch{return null}return new Ms(h,[l,o],l,o,n)}decodeDataCharacter(e,n,r,i){let l=this.getDataCharacterCounters();for(let yt=0;yt<l.length;yt++)l[yt]=0;if(i)ge.recordPatternInReverse(e,n.getStartEnd()[0],l);else{ge.recordPattern(e,n.getStartEnd()[1],l);for(let yt=0,Bt=l.length-1;yt<Bt;yt++,Bt--){let yn=l[yt];l[yt]=l[Bt],l[Bt]=yn}}let o=17,u=ut.sum(new Int32Array(l))/o,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(u-h)/h>.3)throw new B;let g=this.getOddCounts(),b=this.getEvenCounts(),S=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let yt=0;yt<l.length;yt++){let Bt=1*l[yt]/u,yn=Bt+.5;if(yn<1){if(Bt<.3)throw new B;yn=1}else if(yn>8){if(Bt>8.7)throw new B;yn=8}let Gr=yt/2;(yt&1)==0?(g[Gr]=yn,S[Gr]=Bt-yn):(b[Gr]=yn,k[Gr]=Bt-yn)}this.adjustOddEvenCounts(o);let R=4*n.getValue()+(r?0:2)+(i?0:1)-1,L=0,W=0;for(let yt=g.length-1;yt>=0;yt--){if(ge.isNotA1left(n,r,i)){let Bt=ge.WEIGHTS[R][2*yt];W+=g[yt]*Bt}L+=g[yt]}let K=0;for(let yt=b.length-1;yt>=0;yt--)if(ge.isNotA1left(n,r,i)){let Bt=ge.WEIGHTS[R][2*yt+1];K+=b[yt]*Bt}let se=W+K;if((L&1)!=0||L>13||L<4)throw new B;let Se=(13-L)/2,ke=ge.SYMBOL_WIDEST[Se],ve=9-ke,lt=Nn.getRSSvalue(g,ke,!0),tt=Nn.getRSSvalue(b,ve,!1),Sn=ge.EVEN_TOTAL_SUBSET[Se],Jn=ge.GSUM[Se],Kt=lt*Sn+tt+Jn;return new Tr(Kt,se)}static isNotA1left(e,n,r){return!(e.getValue()==0&&n&&r)}adjustOddEvenCounts(e){let n=ut.sum(new Int32Array(this.getOddCounts())),r=ut.sum(new Int32Array(this.getEvenCounts())),i=!1,l=!1;n>13?l=!0:n<4&&(i=!0);let o=!1,u=!1;r>13?u=!0:r<4&&(o=!0);let h=n+r-e,g=(n&1)==1,b=(r&1)==0;if(h==1)if(g){if(b)throw new B;l=!0}else{if(!b)throw new B;u=!0}else if(h==-1)if(g){if(b)throw new B;i=!0}else{if(!b)throw new B;o=!0}else if(h==0){if(g){if(!b)throw new B;n<r?(i=!0,u=!0):(l=!0,o=!0)}else if(b)throw new B}else throw new B;if(i){if(l)throw new B;ge.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&ge.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(u)throw new B;ge.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&ge.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ge.SYMBOL_WIDEST=[7,5,4,3,1],ge.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ge.GSUM=[0,348,1388,2948,3988],ge.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ge.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ge.FINDER_PAT_A=0,ge.FINDER_PAT_B=1,ge.FINDER_PAT_C=2,ge.FINDER_PAT_D=3,ge.FINDER_PAT_E=4,ge.FINDER_PAT_F=5,ge.FINDER_PATTERN_SEQUENCES=[[ge.FINDER_PAT_A,ge.FINDER_PAT_A],[ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B],[ge.FINDER_PAT_A,ge.FINDER_PAT_C,ge.FINDER_PAT_B,ge.FINDER_PAT_D],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_C],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_D,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_E,ge.FINDER_PAT_B,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_D],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_E],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F],[ge.FINDER_PAT_A,ge.FINDER_PAT_A,ge.FINDER_PAT_B,ge.FINDER_PAT_B,ge.FINDER_PAT_C,ge.FINDER_PAT_D,ge.FINDER_PAT_D,ge.FINDER_PAT_E,ge.FINDER_PAT_E,ge.FINDER_PAT_F,ge.FINDER_PAT_F]],ge.MAX_PAIRS=11;class Fa extends Tr{constructor(e,n,r){super(e,n),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Et extends tn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,r){const i=this.decodePair(n,!1,e,r);Et.addOrTally(this.possibleLeftPairs,i),n.reverse();let l=this.decodePair(n,!0,e,r);Et.addOrTally(this.possibleRightPairs,l),n.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1){for(let u of this.possibleRightPairs)if(u.getCount()>1&&Et.checkChecksum(o,u))return Et.constructResult(o,u)}throw new B}static addOrTally(e,n){if(n==null)return;let r=!1;for(let i of e)if(i.getValue()===n.getValue()){i.incrementCount(),r=!0;break}r||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let r=4537077*e.getValue()+n.getValue(),i=new String(r).toString(),l=new Y;for(let g=13-i.length;g>0;g--)l.append("0");l.append(i);let o=0;for(let g=0;g<13;g++){let b=l.charAt(g).charCodeAt(0)-48;o+=(g&1)===0?3*b:b}o=10-o%10,o===10&&(o=0),l.append(o.toString());let u=e.getFinderPattern().getResultPoints(),h=n.getFinderPattern().getResultPoints();return new _e(l.toString(),null,0,[u[0],u[1],h[0],h[1]],he.RSS_14,new Date().getTime())}static checkChecksum(e,n){let r=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,i=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,r===i}decodePair(e,n,r,i){try{let l=this.findFinderPattern(e,n),o=this.parseFoundFinderPattern(e,r,n,l),u=i==null?null:i.get(de.NEED_RESULT_POINT_CALLBACK);if(u!=null){let b=(l[0]+l[1])/2;n&&(b=e.getSize()-1-b),u.foundPossibleResultPoint(new Fe(b,r))}let h=this.decodeDataCharacter(e,o,!0),g=this.decodeDataCharacter(e,o,!1);return new Fa(1597*h.getValue()+g.getValue(),h.getChecksumPortion()+4*g.getChecksumPortion(),o)}catch{return null}}decodeDataCharacter(e,n,r){let i=this.getDataCharacterCounters();for(let K=0;K<i.length;K++)i[K]=0;if(r)Pt.recordPatternInReverse(e,n.getStartEnd()[0],i);else{Pt.recordPattern(e,n.getStartEnd()[1]+1,i);for(let K=0,se=i.length-1;K<se;K++,se--){let Se=i[K];i[K]=i[se],i[se]=Se}}let l=r?16:15,o=ut.sum(new Int32Array(i))/l,u=this.getOddCounts(),h=this.getEvenCounts(),g=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let K=0;K<i.length;K++){let se=i[K]/o,Se=Math.floor(se+.5);Se<1?Se=1:Se>8&&(Se=8);let ke=Math.floor(K/2);(K&1)===0?(u[ke]=Se,g[ke]=se-Se):(h[ke]=Se,b[ke]=se-Se)}this.adjustOddEvenCounts(r,l);let S=0,k=0;for(let K=u.length-1;K>=0;K--)k*=9,k+=u[K],S+=u[K];let R=0,L=0;for(let K=h.length-1;K>=0;K--)R*=9,R+=h[K],L+=h[K];let W=k+3*R;if(r){if((S&1)!==0||S>12||S<4)throw new B;let K=(12-S)/2,se=Et.OUTSIDE_ODD_WIDEST[K],Se=9-se,ke=Nn.getRSSvalue(u,se,!1),ve=Nn.getRSSvalue(h,Se,!0),lt=Et.OUTSIDE_EVEN_TOTAL_SUBSET[K],tt=Et.OUTSIDE_GSUM[K];return new Tr(ke*lt+ve+tt,W)}else{if((L&1)!==0||L>10||L<4)throw new B;let K=(10-L)/2,se=Et.INSIDE_ODD_WIDEST[K],Se=9-se,ke=Nn.getRSSvalue(u,se,!0),ve=Nn.getRSSvalue(h,Se,!1),lt=Et.INSIDE_ODD_TOTAL_SUBSET[K],tt=Et.INSIDE_GSUM[K];return new Tr(ve*lt+ke+tt,W)}}findFinderPattern(e,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),l=!1,o=0;for(;o<i&&(l=!e.get(o),n!==l);)o++;let u=0,h=o;for(let g=o;g<i;g++)if(e.get(g)!==l)r[u]++;else{if(u===3){if(tn.isFinderPattern(r))return[h,g];h+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,u--}else u++;r[u]=1,l=!l}throw new B}parseFoundFinderPattern(e,n,r,i){let l=e.get(i[0]),o=i[0]-1;for(;o>=0&&l!==e.get(o);)o--;o++;const u=i[0]-o,h=this.getDecodeFinderCounters(),g=new Int32Array(h.length);Z.arraycopy(h,0,g,1,h.length-1),g[0]=u;const b=this.parseFinderValue(g,Et.FINDER_PATTERNS);let S=o,k=i[1];return r&&(S=e.getSize()-1-S,k=e.getSize()-1-k),new Ms(b,[o,i[1]],S,k,n)}adjustOddEvenCounts(e,n){let r=ut.sum(new Int32Array(this.getOddCounts())),i=ut.sum(new Int32Array(this.getEvenCounts())),l=!1,o=!1,u=!1,h=!1;e?(r>12?o=!0:r<4&&(l=!0),i>12?h=!0:i<4&&(u=!0)):(r>11?o=!0:r<5&&(l=!0),i>10?h=!0:i<4&&(u=!0));let g=r+i-n,b=(r&1)===(e?1:0),S=(i&1)===1;if(g===1)if(b){if(S)throw new B;o=!0}else{if(!S)throw new B;h=!0}else if(g===-1)if(b){if(S)throw new B;l=!0}else{if(!S)throw new B;u=!0}else if(g===0){if(b){if(!S)throw new B;r<i?(l=!0,h=!0):(o=!0,u=!0)}else if(S)throw new B}else throw new B;if(l){if(o)throw new B;tn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&tn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new B;tn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&tn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Et.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Et.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Et.OUTSIDE_GSUM=[0,161,961,2015,2715],Et.INSIDE_GSUM=[0,336,1036,1516],Et.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Et.INSIDE_ODD_WIDEST=[2,4,6,8],Et.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ss extends Pt{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const r=e?e.get(de.POSSIBLE_FORMATS):null,i=e&&e.get(de.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;r?((r.includes(he.EAN_13)||r.includes(he.UPC_A)||r.includes(he.EAN_8)||r.includes(he.UPC_E))&&this.readers.push(new oi(e)),r.includes(he.CODE_39)&&this.readers.push(new Xt(i)),r.includes(he.CODE_128)&&this.readers.push(new je),r.includes(he.ITF)&&this.readers.push(new pt),r.includes(he.RSS_14)&&this.readers.push(new Et),r.includes(he.RSS_EXPANDED)&&this.readers.push(new ge(this.verbose))):(this.readers.push(new oi(e)),this.readers.push(new Xt),this.readers.push(new oi(e)),this.readers.push(new je),this.readers.push(new pt),this.readers.push(new Et),this.readers.push(new ge(this.verbose)))}decodeRow(e,n,r){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,n,r)}catch{}throw new B}reset(){this.readers.forEach(e=>e.reset())}}class Wa extends Ie{constructor(e=500,n){super(new ss(n),e,n)}}class ft{constructor(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class st{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class dt{constructor(e,n,r,i,l,o){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=l,this.ecBlocks=o;let u=0;const h=o.getECCodewords(),g=o.getECBlocks();for(let b of g)u+=b.getCount()*(b.getDataCodewords()+h);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if((e&1)!==0||(n&1)!==0)throw new X;for(let r of dt.VERSIONS)if(r.symbolSizeRows===e&&r.symbolSizeColumns===n)return r;throw new X}toString(){return""+this.versionNumber}static buildVersions(){return[new dt(1,10,10,8,8,new ft(5,new st(1,3))),new dt(2,12,12,10,10,new ft(7,new st(1,5))),new dt(3,14,14,12,12,new ft(10,new st(1,8))),new dt(4,16,16,14,14,new ft(12,new st(1,12))),new dt(5,18,18,16,16,new ft(14,new st(1,18))),new dt(6,20,20,18,18,new ft(18,new st(1,22))),new dt(7,22,22,20,20,new ft(20,new st(1,30))),new dt(8,24,24,22,22,new ft(24,new st(1,36))),new dt(9,26,26,24,24,new ft(28,new st(1,44))),new dt(10,32,32,14,14,new ft(36,new st(1,62))),new dt(11,36,36,16,16,new ft(42,new st(1,86))),new dt(12,40,40,18,18,new ft(48,new st(1,114))),new dt(13,44,44,20,20,new ft(56,new st(1,144))),new dt(14,48,48,22,22,new ft(68,new st(1,174))),new dt(15,52,52,24,24,new ft(42,new st(2,102))),new dt(16,64,64,14,14,new ft(56,new st(2,140))),new dt(17,72,72,16,16,new ft(36,new st(4,92))),new dt(18,80,80,18,18,new ft(48,new st(4,114))),new dt(19,88,88,20,20,new ft(56,new st(4,144))),new dt(20,96,96,22,22,new ft(68,new st(4,174))),new dt(21,104,104,24,24,new ft(56,new st(6,136))),new dt(22,120,120,18,18,new ft(68,new st(6,175))),new dt(23,132,132,20,20,new ft(62,new st(8,163))),new dt(24,144,144,22,22,new ft(62,new st(8,156),new st(2,155))),new dt(25,8,18,6,16,new ft(7,new st(1,5))),new dt(26,8,32,6,14,new ft(11,new st(1,10))),new dt(27,12,26,10,24,new ft(14,new st(1,16))),new dt(28,12,36,10,16,new ft(18,new st(1,22))),new dt(29,16,36,14,16,new ft(24,new st(1,32))),new dt(30,16,48,14,22,new ft(28,new st(1,49)))]}}dt.VERSIONS=dt.buildVersions();class jn{constructor(e){const n=e.getHeight();if(n<8||n>144||(n&1)!==0)throw new X;this.version=jn.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ce(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),r=e.getWidth();return dt.getVersionForDimensions(n,r)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,r=4,i=0;const l=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let u=!1,h=!1,g=!1,b=!1;do if(r===l&&i===0&&!u)e[n++]=this.readCorner1(l,o)&255,r-=2,i+=2,u=!0;else if(r===l-2&&i===0&&(o&3)!==0&&!h)e[n++]=this.readCorner2(l,o)&255,r-=2,i+=2,h=!0;else if(r===l+4&&i===2&&(o&7)===0&&!g)e[n++]=this.readCorner3(l,o)&255,r-=2,i+=2,g=!0;else if(r===l-2&&i===0&&(o&7)===4&&!b)e[n++]=this.readCorner4(l,o)&255,r-=2,i+=2,b=!0;else{do r<l&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,l,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[n++]=this.readUtah(r,i,l,o)&255),r+=2,i-=2;while(r<l&&i>=0);r+=3,i+=1}while(r<l||i<o);if(n!==this.version.getTotalCodewords())throw new X;return e}readModule(e,n,r,i){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,r,i){let l=0;return this.readModule(e-2,n-2,r,i)&&(l|=1),l<<=1,this.readModule(e-2,n-1,r,i)&&(l|=1),l<<=1,this.readModule(e-1,n-2,r,i)&&(l|=1),l<<=1,this.readModule(e-1,n-1,r,i)&&(l|=1),l<<=1,this.readModule(e-1,n,r,i)&&(l|=1),l<<=1,this.readModule(e,n-2,r,i)&&(l|=1),l<<=1,this.readModule(e,n-1,r,i)&&(l|=1),l<<=1,this.readModule(e,n,r,i)&&(l|=1),l}readCorner1(e,n){let r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r}readCorner2(e,n){let r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r}readCorner3(e,n){let r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r}readCorner4(e,n){let r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new j("Dimension of bitMatrix must match the version size");const i=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),o=n/i|0,u=r/l|0,h=o*i,g=u*l,b=new Ce(g,h);for(let S=0;S<o;++S){const k=S*i;for(let R=0;R<u;++R){const L=R*l;for(let W=0;W<i;++W){const K=S*(i+2)+1+W,se=k+W;for(let Se=0;Se<l;++Se){const ke=R*(l+2)+1+Se;if(e.get(ke,K)){const ve=L+Se;b.set(ve,se)}}}}}return b}}class Yi{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const r=n.getECBlocks();let i=0;const l=r.getECBlocks();for(let W of l)i+=W.getCount();const o=new Array(i);let u=0;for(let W of l)for(let K=0;K<W.getCount();K++){const se=W.getDataCodewords(),Se=r.getECCodewords()+se;o[u++]=new Yi(se,new Uint8Array(Se))}const g=o[0].codewords.length-r.getECCodewords(),b=g-1;let S=0;for(let W=0;W<b;W++)for(let K=0;K<u;K++)o[K].codewords[W]=e[S++];const k=n.getVersionNumber()===24,R=k?8:u;for(let W=0;W<R;W++)o[W].codewords[g-1]=e[S++];const L=o[0].codewords.length;for(let W=g;W<L;W++)for(let K=0;K<u;K++){const se=k?(K+8)%u:K,Se=k&&se>7?W-1:W;o[se].codewords[Se]=e[S++]}if(S!==e.length)throw new j;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ki{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new j(""+e);let n=0,r=this.bitOffset,i=this.byteOffset;const l=this.bytes;if(r>0){const o=8-r,u=e<o?e:o,h=o-u,g=255>>8-u<<h;n=(l[i]&g)>>h,e-=u,r+=u,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)n=n<<8|l[i]&255,i++,e-=8;if(e>0){const o=8-e,u=255>>o<<o;n=n<<e|(l[i]&u)>>o,r+=e}}return this.bitOffset=r,this.byteOffset=i,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Zt;(function(E){E[E.PAD_ENCODE=0]="PAD_ENCODE",E[E.ASCII_ENCODE=1]="ASCII_ENCODE",E[E.C40_ENCODE=2]="C40_ENCODE",E[E.TEXT_ENCODE=3]="TEXT_ENCODE",E[E.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",E[E.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",E[E.BASE256_ENCODE=6]="BASE256_ENCODE"})(Zt||(Zt={}));class Yn{static decode(e){const n=new Ki(e),r=new Y,i=new Y,l=new Array;let o=Zt.ASCII_ENCODE;do if(o===Zt.ASCII_ENCODE)o=this.decodeAsciiSegment(n,r,i);else{switch(o){case Zt.C40_ENCODE:this.decodeC40Segment(n,r);break;case Zt.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case Zt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case Zt.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case Zt.BASE256_ENCODE:this.decodeBase256Segment(n,r,l);break;default:throw new X}o=Zt.ASCII_ENCODE}while(o!==Zt.PAD_ENCODE&&n.available()>0);return i.length()>0&&r.append(i.toString()),new Oe(e,r.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(e,n,r){let i=!1;do{let l=e.readBits(8);if(l===0)throw new X;if(l<=128)return i&&(l+=128),n.append(String.fromCharCode(l-1)),Zt.ASCII_ENCODE;if(l===129)return Zt.PAD_ENCODE;if(l<=229){const o=l-130;o<10&&n.append("0"),n.append(""+o)}else switch(l){case 230:return Zt.C40_ENCODE;case 231:return Zt.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return Zt.ANSIX12_ENCODE;case 239:return Zt.TEXT_ENCODE;case 240:return Zt.EDIFACT_ENCODE;case 241:break;default:if(l!==254||e.available()!==0)throw new X;break}}while(e.available()>0);return Zt.ASCII_ENCODE}static decodeC40Segment(e,n){let r=!1;const i=[];let l=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(let u=0;u<3;u++){const h=i[u];switch(l){case 0:if(h<3)l=h+1;else if(h<this.C40_BASIC_SET_CHARS.length){const g=this.C40_BASIC_SET_CHARS[h];r?(n.append(String.fromCharCode(g.charCodeAt(0)+128)),r=!1):n.append(g)}else throw new X;break;case 1:r?(n.append(String.fromCharCode(h+128)),r=!1):n.append(String.fromCharCode(h)),l=0;break;case 2:if(h<this.C40_SHIFT2_SET_CHARS.length){const g=this.C40_SHIFT2_SET_CHARS[h];r?(n.append(String.fromCharCode(g.charCodeAt(0)+128)),r=!1):n.append(g)}else switch(h){case 27:n.append("");break;case 30:r=!0;break;default:throw new X}l=0;break;case 3:r?(n.append(String.fromCharCode(h+224)),r=!1):n.append(String.fromCharCode(h+96)),l=0;break;default:throw new X}}}while(e.available()>0)}static decodeTextSegment(e,n){let r=!1,i=[],l=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(let u=0;u<3;u++){const h=i[u];switch(l){case 0:if(h<3)l=h+1;else if(h<this.TEXT_BASIC_SET_CHARS.length){const g=this.TEXT_BASIC_SET_CHARS[h];r?(n.append(String.fromCharCode(g.charCodeAt(0)+128)),r=!1):n.append(g)}else throw new X;break;case 1:r?(n.append(String.fromCharCode(h+128)),r=!1):n.append(String.fromCharCode(h)),l=0;break;case 2:if(h<this.TEXT_SHIFT2_SET_CHARS.length){const g=this.TEXT_SHIFT2_SET_CHARS[h];r?(n.append(String.fromCharCode(g.charCodeAt(0)+128)),r=!1):n.append(g)}else switch(h){case 27:n.append("");break;case 30:r=!0;break;default:throw new X}l=0;break;case 3:if(h<this.TEXT_SHIFT3_SET_CHARS.length){const g=this.TEXT_SHIFT3_SET_CHARS[h];r?(n.append(String.fromCharCode(g.charCodeAt(0)+128)),r=!1):n.append(g),l=0}else throw new X;break;default:throw new X}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const r=[];do{if(e.available()===8)return;const i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(let l=0;l<3;l++){const o=r[l];switch(o){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(o<14)n.append(String.fromCharCode(o+44));else if(o<40)n.append(String.fromCharCode(o+51));else throw new X;break}}}while(e.available()>0)}static parseTwoBytes(e,n,r){let i=(e<<8)+n-1,l=Math.floor(i/1600);r[0]=l,i-=l*1600,l=Math.floor(i/40),r[1]=l,r[2]=i-l*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let r=0;r<4;r++){let i=e.readBits(6);if(i===31){const l=8-e.getBitOffset();l!==8&&e.readBits(l);return}(i&32)===0&&(i|=64),n.append(String.fromCharCode(i))}}while(e.available()>0)}static decodeBase256Segment(e,n,r){let i=1+e.getByteOffset();const l=this.unrandomize255State(e.readBits(8),i++);let o;if(l===0?o=e.available()/8|0:l<250?o=l:o=250*(l-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new X;const u=new Uint8Array(o);for(let h=0;h<o;h++){if(e.available()<8)throw new X;u[h]=this.unrandomize255State(e.readBits(8),i++)}r.push(u);try{n.append(Ue.decode(u,ee.ISO88591))}catch(h){throw new vn("Platform does not support required encoding: "+h.message)}}static unrandomize255State(e,n){const r=149*n%255+1,i=e-r;return i>=0?i:i+256}}Yn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Yn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Yn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Yn.TEXT_SHIFT2_SET_CHARS=Yn.C40_SHIFT2_SET_CHARS,Yn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ci{constructor(){this.rsDecoder=new Rn(at.DATA_MATRIX_FIELD_256)}decode(e){const n=new jn(e),r=n.getVersion(),i=n.readCodewords(),l=Yi.getDataBlocks(i,r);let o=0;for(let g of l)o+=g.getNumDataCodewords();const u=new Uint8Array(o),h=l.length;for(let g=0;g<h;g++){const b=l[g],S=b.getCodewords(),k=b.getNumDataCodewords();this.correctErrors(S,k);for(let R=0;R<k;R++)u[R*h+g]=S[R]}return Yn.decode(u)}correctErrors(e,n){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new V}for(let i=0;i<n;i++)e[i]=r[i]}}class St{constructor(e){this.image=e,this.rectangleDetector=new ir(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new B;n=this.shiftToModuleCenter(n);const r=n[0],i=n[1],l=n[2],o=n[3];let u=this.transitionsBetween(r,o)+1,h=this.transitionsBetween(l,o)+1;(u&1)===1&&(u+=1),(h&1)===1&&(h+=1),4*u<7*h&&4*h<7*u&&(u=h=Math.max(u,h));let g=St.sampleGrid(this.image,r,i,l,o,u,h);return new ts(g,[r,i,l,o])}static shiftPoint(e,n,r){let i=(n.getX()-e.getX())/(r+1),l=(n.getY()-e.getY())/(r+1);return new Fe(e.getX()+i,e.getY()+l)}static moveAway(e,n,r){let i=e.getX(),l=e.getY();return i<n?i-=1:i+=1,l<r?l-=1:l+=1,new Fe(i,l)}detectSolid1(e){let n=e[0],r=e[1],i=e[3],l=e[2],o=this.transitionsBetween(n,r),u=this.transitionsBetween(r,i),h=this.transitionsBetween(i,l),g=this.transitionsBetween(l,n),b=o,S=[l,n,r,i];return b>u&&(b=u,S[0]=n,S[1]=r,S[2]=i,S[3]=l),b>h&&(b=h,S[0]=r,S[1]=i,S[2]=l,S[3]=n),b>g&&(S[0]=i,S[1]=l,S[2]=n,S[3]=r),S}detectSolid2(e){let n=e[0],r=e[1],i=e[2],l=e[3],o=this.transitionsBetween(n,l),u=St.shiftPoint(r,i,(o+1)*4),h=St.shiftPoint(i,r,(o+1)*4),g=this.transitionsBetween(u,n),b=this.transitionsBetween(h,l);return g<b?(e[0]=n,e[1]=r,e[2]=i,e[3]=l):(e[0]=r,e[1]=i,e[2]=l,e[3]=n),e}correctTopRight(e){let n=e[0],r=e[1],i=e[2],l=e[3],o=this.transitionsBetween(n,l),u=this.transitionsBetween(r,l),h=St.shiftPoint(n,r,(u+1)*4),g=St.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(h,l),u=this.transitionsBetween(g,l);let b=new Fe(l.getX()+(i.getX()-r.getX())/(o+1),l.getY()+(i.getY()-r.getY())/(o+1)),S=new Fe(l.getX()+(n.getX()-r.getX())/(u+1),l.getY()+(n.getY()-r.getY())/(u+1));if(!this.isValid(b))return this.isValid(S)?S:null;if(!this.isValid(S))return b;let k=this.transitionsBetween(h,b)+this.transitionsBetween(g,b),R=this.transitionsBetween(h,S)+this.transitionsBetween(g,S);return k>R?b:S}shiftToModuleCenter(e){let n=e[0],r=e[1],i=e[2],l=e[3],o=this.transitionsBetween(n,l)+1,u=this.transitionsBetween(i,l)+1,h=St.shiftPoint(n,r,u*4),g=St.shiftPoint(i,r,o*4);o=this.transitionsBetween(h,l)+1,u=this.transitionsBetween(g,l)+1,(o&1)===1&&(o+=1),(u&1)===1&&(u+=1);let b=(n.getX()+r.getX()+i.getX()+l.getX())/4,S=(n.getY()+r.getY()+i.getY()+l.getY())/4;n=St.moveAway(n,b,S),r=St.moveAway(r,b,S),i=St.moveAway(i,b,S),l=St.moveAway(l,b,S);let k,R;return h=St.shiftPoint(n,r,u*4),h=St.shiftPoint(h,l,o*4),k=St.shiftPoint(r,n,u*4),k=St.shiftPoint(k,i,o*4),g=St.shiftPoint(i,l,u*4),g=St.shiftPoint(g,r,o*4),R=St.shiftPoint(l,i,u*4),R=St.shiftPoint(R,n,o*4),[h,k,g,R]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,r,i,l,o,u){return Vn.getInstance().sampleGrid(e,o,u,.5,.5,o-.5,.5,o-.5,u-.5,.5,u-.5,n.getX(),n.getY(),l.getX(),l.getY(),i.getX(),i.getY(),r.getX(),r.getY())}transitionsBetween(e,n){let r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),l=Math.trunc(n.getX()),o=Math.trunc(n.getY()),u=Math.abs(o-i)>Math.abs(l-r);if(u){let W=r;r=i,i=W,W=l,l=o,o=W}let h=Math.abs(l-r),g=Math.abs(o-i),b=-h/2,S=i<o?1:-1,k=r<l?1:-1,R=0,L=this.image.get(u?i:r,u?r:i);for(let W=r,K=i;W!==l;W+=k){let se=this.image.get(u?K:W,u?W:K);if(se!==L&&(R++,L=se),b+=g,b>0){if(K===o)break;K+=S,b-=h}}return R}}class Kn{constructor(){this.decoder=new ci}decode(e,n=null){let r,i;if(n!=null&&n.has(de.PURE_BARCODE)){const g=Kn.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(g),i=Kn.NO_POINTS}else{const g=new St(e.getBlackMatrix()).detect();r=this.decoder.decode(g.getBits()),i=g.getPoints()}const l=r.getRawBytes(),o=new _e(r.getText(),l,8*l.length,i,he.DATA_MATRIX,Z.currentTimeMillis()),u=r.getByteSegments();u!=null&&o.putMetadata(Me.BYTE_SEGMENTS,u);const h=r.getECLevel();return h!=null&&o.putMetadata(Me.ERROR_CORRECTION_LEVEL,h),o}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new B;const i=this.moduleSize(n,e);let l=n[1];const o=r[1];let u=n[0];const g=(r[0]-u+1)/i,b=(o-l+1)/i;if(g<=0||b<=0)throw new B;const S=i/2;l+=S,u+=S;const k=new Ce(g,b);for(let R=0;R<b;R++){const L=l+R*i;for(let W=0;W<g;W++)e.get(u+W*i,L)&&k.set(W,R)}return k}static moduleSize(e,n){const r=n.getWidth();let i=e[0];const l=e[1];for(;i<r&&n.get(i,l);)i++;if(i===r)throw new B;const o=i-e[0];if(o===0)throw new B;return o}}Kn.NO_POINTS=[];class $l extends Ie{constructor(e=500){super(new Kn,e)}}var is;(function(E){E[E.L=0]="L",E[E.M=1]="M",E[E.Q=2]="Q",E[E.H=3]="H"})(is||(is={}));class bt{constructor(e,n,r){this.value=e,this.stringValue=n,this.bits=r,bt.FOR_BITS.set(r,this),bt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return bt.L;case"M":return bt.M;case"Q":return bt.Q;case"H":return bt.H;default:throw new P(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof bt))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=bt.FOR_BITS.size)throw new j;return bt.FOR_BITS.get(e)}}bt.FOR_BITS=new Map,bt.FOR_VALUE=new Map,bt.L=new bt(is.L,"L",1),bt.M=new bt(is.M,"M",0),bt.Q=new bt(is.Q,"Q",3),bt.H=new bt(is.H,"H",2);class nn{constructor(e){this.errorCorrectionLevel=bt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return ie.bitCount(e^n)}static decodeFormatInformation(e,n){const r=nn.doDecodeFormatInformation(e,n);return r!==null?r:nn.doDecodeFormatInformation(e^nn.FORMAT_INFO_MASK_QR,n^nn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let r=Number.MAX_SAFE_INTEGER,i=0;for(const l of nn.FORMAT_INFO_DECODE_LOOKUP){const o=l[0];if(o===e||o===n)return new nn(l[1]);let u=nn.numBitsDiffering(e,o);u<r&&(i=l[1],r=u),e!==n&&(u=nn.numBitsDiffering(n,o),u<r&&(i=l[1],r=u))}return r<=3?new nn(i):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof nn))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}nn.FORMAT_INFO_MASK_QR=21522,nn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Q{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const r of n)e+=r.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class T{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Xe{constructor(e,n,...r){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=r;let i=0;const l=r[0].getECCodewordsPerBlock(),o=r[0].getECBlocks();for(const u of o)i+=u.getCount()*(u.getDataCodewords()+l);this.totalCodewords=i}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new X;try{return this.getVersionForNumber((e-17)/4)}catch{throw new X}}static getVersionForNumber(e){if(e<1||e>40)throw new j;return Xe.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,r=0;for(let i=0;i<Xe.VERSION_DECODE_INFO.length;i++){const l=Xe.VERSION_DECODE_INFO[i];if(l===e)return Xe.getVersionForNumber(i+7);const o=nn.numBitsDiffering(e,l);o<n&&(r=i+7,n=o)}return n<=3?Xe.getVersionForNumber(r):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new Ce(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const r=this.alignmentPatternCenters.length;for(let i=0;i<r;i++){const l=this.alignmentPatternCenters[i]-2;for(let o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||n.setRegion(this.alignmentPatternCenters[o]-2,l,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}Xe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Xe.VERSIONS=[new Xe(1,new Int32Array(0),new Q(7,new T(1,19)),new Q(10,new T(1,16)),new Q(13,new T(1,13)),new Q(17,new T(1,9))),new Xe(2,Int32Array.from([6,18]),new Q(10,new T(1,34)),new Q(16,new T(1,28)),new Q(22,new T(1,22)),new Q(28,new T(1,16))),new Xe(3,Int32Array.from([6,22]),new Q(15,new T(1,55)),new Q(26,new T(1,44)),new Q(18,new T(2,17)),new Q(22,new T(2,13))),new Xe(4,Int32Array.from([6,26]),new Q(20,new T(1,80)),new Q(18,new T(2,32)),new Q(26,new T(2,24)),new Q(16,new T(4,9))),new Xe(5,Int32Array.from([6,30]),new Q(26,new T(1,108)),new Q(24,new T(2,43)),new Q(18,new T(2,15),new T(2,16)),new Q(22,new T(2,11),new T(2,12))),new Xe(6,Int32Array.from([6,34]),new Q(18,new T(2,68)),new Q(16,new T(4,27)),new Q(24,new T(4,19)),new Q(28,new T(4,15))),new Xe(7,Int32Array.from([6,22,38]),new Q(20,new T(2,78)),new Q(18,new T(4,31)),new Q(18,new T(2,14),new T(4,15)),new Q(26,new T(4,13),new T(1,14))),new Xe(8,Int32Array.from([6,24,42]),new Q(24,new T(2,97)),new Q(22,new T(2,38),new T(2,39)),new Q(22,new T(4,18),new T(2,19)),new Q(26,new T(4,14),new T(2,15))),new Xe(9,Int32Array.from([6,26,46]),new Q(30,new T(2,116)),new Q(22,new T(3,36),new T(2,37)),new Q(20,new T(4,16),new T(4,17)),new Q(24,new T(4,12),new T(4,13))),new Xe(10,Int32Array.from([6,28,50]),new Q(18,new T(2,68),new T(2,69)),new Q(26,new T(4,43),new T(1,44)),new Q(24,new T(6,19),new T(2,20)),new Q(28,new T(6,15),new T(2,16))),new Xe(11,Int32Array.from([6,30,54]),new Q(20,new T(4,81)),new Q(30,new T(1,50),new T(4,51)),new Q(28,new T(4,22),new T(4,23)),new Q(24,new T(3,12),new T(8,13))),new Xe(12,Int32Array.from([6,32,58]),new Q(24,new T(2,92),new T(2,93)),new Q(22,new T(6,36),new T(2,37)),new Q(26,new T(4,20),new T(6,21)),new Q(28,new T(7,14),new T(4,15))),new Xe(13,Int32Array.from([6,34,62]),new Q(26,new T(4,107)),new Q(22,new T(8,37),new T(1,38)),new Q(24,new T(8,20),new T(4,21)),new Q(22,new T(12,11),new T(4,12))),new Xe(14,Int32Array.from([6,26,46,66]),new Q(30,new T(3,115),new T(1,116)),new Q(24,new T(4,40),new T(5,41)),new Q(20,new T(11,16),new T(5,17)),new Q(24,new T(11,12),new T(5,13))),new Xe(15,Int32Array.from([6,26,48,70]),new Q(22,new T(5,87),new T(1,88)),new Q(24,new T(5,41),new T(5,42)),new Q(30,new T(5,24),new T(7,25)),new Q(24,new T(11,12),new T(7,13))),new Xe(16,Int32Array.from([6,26,50,74]),new Q(24,new T(5,98),new T(1,99)),new Q(28,new T(7,45),new T(3,46)),new Q(24,new T(15,19),new T(2,20)),new Q(30,new T(3,15),new T(13,16))),new Xe(17,Int32Array.from([6,30,54,78]),new Q(28,new T(1,107),new T(5,108)),new Q(28,new T(10,46),new T(1,47)),new Q(28,new T(1,22),new T(15,23)),new Q(28,new T(2,14),new T(17,15))),new Xe(18,Int32Array.from([6,30,56,82]),new Q(30,new T(5,120),new T(1,121)),new Q(26,new T(9,43),new T(4,44)),new Q(28,new T(17,22),new T(1,23)),new Q(28,new T(2,14),new T(19,15))),new Xe(19,Int32Array.from([6,30,58,86]),new Q(28,new T(3,113),new T(4,114)),new Q(26,new T(3,44),new T(11,45)),new Q(26,new T(17,21),new T(4,22)),new Q(26,new T(9,13),new T(16,14))),new Xe(20,Int32Array.from([6,34,62,90]),new Q(28,new T(3,107),new T(5,108)),new Q(26,new T(3,41),new T(13,42)),new Q(30,new T(15,24),new T(5,25)),new Q(28,new T(15,15),new T(10,16))),new Xe(21,Int32Array.from([6,28,50,72,94]),new Q(28,new T(4,116),new T(4,117)),new Q(26,new T(17,42)),new Q(28,new T(17,22),new T(6,23)),new Q(30,new T(19,16),new T(6,17))),new Xe(22,Int32Array.from([6,26,50,74,98]),new Q(28,new T(2,111),new T(7,112)),new Q(28,new T(17,46)),new Q(30,new T(7,24),new T(16,25)),new Q(24,new T(34,13))),new Xe(23,Int32Array.from([6,30,54,78,102]),new Q(30,new T(4,121),new T(5,122)),new Q(28,new T(4,47),new T(14,48)),new Q(30,new T(11,24),new T(14,25)),new Q(30,new T(16,15),new T(14,16))),new Xe(24,Int32Array.from([6,28,54,80,106]),new Q(30,new T(6,117),new T(4,118)),new Q(28,new T(6,45),new T(14,46)),new Q(30,new T(11,24),new T(16,25)),new Q(30,new T(30,16),new T(2,17))),new Xe(25,Int32Array.from([6,32,58,84,110]),new Q(26,new T(8,106),new T(4,107)),new Q(28,new T(8,47),new T(13,48)),new Q(30,new T(7,24),new T(22,25)),new Q(30,new T(22,15),new T(13,16))),new Xe(26,Int32Array.from([6,30,58,86,114]),new Q(28,new T(10,114),new T(2,115)),new Q(28,new T(19,46),new T(4,47)),new Q(28,new T(28,22),new T(6,23)),new Q(30,new T(33,16),new T(4,17))),new Xe(27,Int32Array.from([6,34,62,90,118]),new Q(30,new T(8,122),new T(4,123)),new Q(28,new T(22,45),new T(3,46)),new Q(30,new T(8,23),new T(26,24)),new Q(30,new T(12,15),new T(28,16))),new Xe(28,Int32Array.from([6,26,50,74,98,122]),new Q(30,new T(3,117),new T(10,118)),new Q(28,new T(3,45),new T(23,46)),new Q(30,new T(4,24),new T(31,25)),new Q(30,new T(11,15),new T(31,16))),new Xe(29,Int32Array.from([6,30,54,78,102,126]),new Q(30,new T(7,116),new T(7,117)),new Q(28,new T(21,45),new T(7,46)),new Q(30,new T(1,23),new T(37,24)),new Q(30,new T(19,15),new T(26,16))),new Xe(30,Int32Array.from([6,26,52,78,104,130]),new Q(30,new T(5,115),new T(10,116)),new Q(28,new T(19,47),new T(10,48)),new Q(30,new T(15,24),new T(25,25)),new Q(30,new T(23,15),new T(25,16))),new Xe(31,Int32Array.from([6,30,56,82,108,134]),new Q(30,new T(13,115),new T(3,116)),new Q(28,new T(2,46),new T(29,47)),new Q(30,new T(42,24),new T(1,25)),new Q(30,new T(23,15),new T(28,16))),new Xe(32,Int32Array.from([6,34,60,86,112,138]),new Q(30,new T(17,115)),new Q(28,new T(10,46),new T(23,47)),new Q(30,new T(10,24),new T(35,25)),new Q(30,new T(19,15),new T(35,16))),new Xe(33,Int32Array.from([6,30,58,86,114,142]),new Q(30,new T(17,115),new T(1,116)),new Q(28,new T(14,46),new T(21,47)),new Q(30,new T(29,24),new T(19,25)),new Q(30,new T(11,15),new T(46,16))),new Xe(34,Int32Array.from([6,34,62,90,118,146]),new Q(30,new T(13,115),new T(6,116)),new Q(28,new T(14,46),new T(23,47)),new Q(30,new T(44,24),new T(7,25)),new Q(30,new T(59,16),new T(1,17))),new Xe(35,Int32Array.from([6,30,54,78,102,126,150]),new Q(30,new T(12,121),new T(7,122)),new Q(28,new T(12,47),new T(26,48)),new Q(30,new T(39,24),new T(14,25)),new Q(30,new T(22,15),new T(41,16))),new Xe(36,Int32Array.from([6,24,50,76,102,128,154]),new Q(30,new T(6,121),new T(14,122)),new Q(28,new T(6,47),new T(34,48)),new Q(30,new T(46,24),new T(10,25)),new Q(30,new T(2,15),new T(64,16))),new Xe(37,Int32Array.from([6,28,54,80,106,132,158]),new Q(30,new T(17,122),new T(4,123)),new Q(28,new T(29,46),new T(14,47)),new Q(30,new T(49,24),new T(10,25)),new Q(30,new T(24,15),new T(46,16))),new Xe(38,Int32Array.from([6,32,58,84,110,136,162]),new Q(30,new T(4,122),new T(18,123)),new Q(28,new T(13,46),new T(32,47)),new Q(30,new T(48,24),new T(14,25)),new Q(30,new T(42,15),new T(32,16))),new Xe(39,Int32Array.from([6,26,54,82,110,138,166]),new Q(30,new T(20,117),new T(4,118)),new Q(28,new T(40,47),new T(7,48)),new Q(30,new T(43,24),new T(22,25)),new Q(30,new T(10,15),new T(67,16))),new Xe(40,Int32Array.from([6,30,58,86,114,142,170]),new Q(30,new T(19,118),new T(6,119)),new Q(28,new T(18,47),new T(31,48)),new Q(30,new T(34,24),new T(34,25)),new Q(30,new T(20,15),new T(61,16)))];var Ut;(function(E){E[E.DATA_MASK_000=0]="DATA_MASK_000",E[E.DATA_MASK_001=1]="DATA_MASK_001",E[E.DATA_MASK_010=2]="DATA_MASK_010",E[E.DATA_MASK_011=3]="DATA_MASK_011",E[E.DATA_MASK_100=4]="DATA_MASK_100",E[E.DATA_MASK_101=5]="DATA_MASK_101",E[E.DATA_MASK_110=6]="DATA_MASK_110",E[E.DATA_MASK_111=7]="DATA_MASK_111"})(Ut||(Ut={}));class it{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let r=0;r<n;r++)for(let i=0;i<n;i++)this.isMasked(r,i)&&e.flip(i,r)}}it.values=new Map([[Ut.DATA_MASK_000,new it(Ut.DATA_MASK_000,(E,e)=>(E+e&1)===0)],[Ut.DATA_MASK_001,new it(Ut.DATA_MASK_001,(E,e)=>(E&1)===0)],[Ut.DATA_MASK_010,new it(Ut.DATA_MASK_010,(E,e)=>e%3===0)],[Ut.DATA_MASK_011,new it(Ut.DATA_MASK_011,(E,e)=>(E+e)%3===0)],[Ut.DATA_MASK_100,new it(Ut.DATA_MASK_100,(E,e)=>(Math.floor(E/2)+Math.floor(e/3)&1)===0)],[Ut.DATA_MASK_101,new it(Ut.DATA_MASK_101,(E,e)=>E*e%6===0)],[Ut.DATA_MASK_110,new it(Ut.DATA_MASK_110,(E,e)=>E*e%6<3)],[Ut.DATA_MASK_111,new it(Ut.DATA_MASK_111,(E,e)=>(E+e+E*e%3&1)===0)]]);class Ua{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new X;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let l=0;l<6;l++)e=this.copyBit(l,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let l=5;l>=0;l--)e=this.copyBit(8,l,e);const n=this.bitMatrix.getHeight();let r=0;const i=n-7;for(let l=n-1;l>=i;l--)r=this.copyBit(8,l,r);for(let l=n-8;l<n;l++)r=this.copyBit(l,8,r);if(this.parsedFormatInfo=nn.decodeFormatInformation(e,r),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new X}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return Xe.getVersionForNumber(n);let r=0;const i=e-11;for(let o=5;o>=0;o--)for(let u=e-9;u>=i;u--)r=this.copyBit(u,o,r);let l=Xe.decodeVersionInformation(r);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;r=0;for(let o=5;o>=0;o--)for(let u=e-9;u>=i;u--)r=this.copyBit(o,u,r);if(l=Xe.decodeVersionInformation(r),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new X}copyBit(e,n,r){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?r<<1|1:r<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),r=it.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);const l=n.buildFunctionPattern();let o=!0;const u=new Uint8Array(n.getTotalCodewords());let h=0,g=0,b=0;for(let S=i-1;S>0;S-=2){S===6&&S--;for(let k=0;k<i;k++){const R=o?i-1-k:k;for(let L=0;L<2;L++)l.get(S-L,R)||(b++,g<<=1,this.bitMatrix.get(S-L,R)&&(g|=1),b===8&&(u[h++]=g,b=0,g=0))}o=!o}if(h!==n.getTotalCodewords())throw new X;return u}remask(){if(this.parsedFormatInfo===null)return;const e=it.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,r=e.getWidth();n<r;n++)for(let i=n+1,l=e.getHeight();i<l;i++)e.get(n,i)!==e.get(i,n)&&(e.flip(i,n),e.flip(n,i))}}class ui{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,r){if(e.length!==n.getTotalCodewords())throw new j;const i=n.getECBlocksForLevel(r);let l=0;const o=i.getECBlocks();for(const L of o)l+=L.getCount();const u=new Array(l);let h=0;for(const L of o)for(let W=0;W<L.getCount();W++){const K=L.getDataCodewords(),se=i.getECCodewordsPerBlock()+K;u[h++]=new ui(K,new Uint8Array(se))}const g=u[0].codewords.length;let b=u.length-1;for(;b>=0&&u[b].codewords.length!==g;)b--;b++;const S=g-i.getECCodewordsPerBlock();let k=0;for(let L=0;L<S;L++)for(let W=0;W<h;W++)u[W].codewords[L]=e[k++];for(let L=b;L<h;L++)u[L].codewords[S]=e[k++];const R=u[0].codewords.length;for(let L=S;L<R;L++)for(let W=0;W<h;W++){const K=W<b?L:L+1;u[W].codewords[K]=e[k++]}return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var En;(function(E){E[E.TERMINATOR=0]="TERMINATOR",E[E.NUMERIC=1]="NUMERIC",E[E.ALPHANUMERIC=2]="ALPHANUMERIC",E[E.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",E[E.BYTE=4]="BYTE",E[E.ECI=5]="ECI",E[E.KANJI=6]="KANJI",E[E.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",E[E.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",E[E.HANZI=9]="HANZI"})(En||(En={}));class Ze{constructor(e,n,r,i){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=i,Ze.FOR_BITS.set(i,this),Ze.FOR_VALUE.set(e,this)}static forBits(e){const n=Ze.FOR_BITS.get(e);if(n===void 0)throw new j;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Ze))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}Ze.FOR_BITS=new Map,Ze.FOR_VALUE=new Map,Ze.TERMINATOR=new Ze(En.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ze.NUMERIC=new Ze(En.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ze.ALPHANUMERIC=new Ze(En.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ze.STRUCTURED_APPEND=new Ze(En.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ze.BYTE=new Ze(En.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ze.ECI=new Ze(En.ECI,"ECI",Int32Array.from([0,0,0]),7),Ze.KANJI=new Ze(En.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ze.FNC1_FIRST_POSITION=new Ze(En.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ze.FNC1_SECOND_POSITION=new Ze(En.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ze.HANZI=new Ze(En.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class It{static decode(e,n,r,i){const l=new Ki(e);let o=new Y;const u=new Array;let h=-1,g=-1;try{let b=null,S=!1,k;do{if(l.available()<4)k=Ze.TERMINATOR;else{const R=l.readBits(4);k=Ze.forBits(R)}switch(k){case Ze.TERMINATOR:break;case Ze.FNC1_FIRST_POSITION:case Ze.FNC1_SECOND_POSITION:S=!0;break;case Ze.STRUCTURED_APPEND:if(l.available()<16)throw new X;h=l.readBits(8),g=l.readBits(8);break;case Ze.ECI:const R=It.parseECIValue(l);if(b=ue.getCharacterSetECIByValue(R),b===null)throw new X;break;case Ze.HANZI:const L=l.readBits(4),W=l.readBits(k.getCharacterCountBits(n));L===It.GB2312_SUBSET&&It.decodeHanziSegment(l,o,W);break;default:const K=l.readBits(k.getCharacterCountBits(n));switch(k){case Ze.NUMERIC:It.decodeNumericSegment(l,o,K);break;case Ze.ALPHANUMERIC:It.decodeAlphanumericSegment(l,o,K,S);break;case Ze.BYTE:It.decodeByteSegment(l,o,K,b,u,i);break;case Ze.KANJI:It.decodeKanjiSegment(l,o,K);break;default:throw new X}break}}while(k!==Ze.TERMINATOR)}catch{throw new X}return new Oe(e,o.toString(),u.length===0?null:u,r===null?null:r.toString(),h,g)}static decodeHanziSegment(e,n,r){if(r*13>e.available())throw new X;const i=new Uint8Array(2*r);let l=0;for(;r>0;){const o=e.readBits(13);let u=o/96<<8&4294967295|o%96;u<959?u+=41377:u+=42657,i[l]=u>>8&255,i[l+1]=u&255,l+=2,r--}try{n.append(Ue.decode(i,ee.GB2312))}catch(o){throw new X(o)}}static decodeKanjiSegment(e,n,r){if(r*13>e.available())throw new X;const i=new Uint8Array(2*r);let l=0;for(;r>0;){const o=e.readBits(13);let u=o/192<<8&4294967295|o%192;u<7936?u+=33088:u+=49472,i[l]=u>>8,i[l+1]=u,l+=2,r--}try{n.append(Ue.decode(i,ee.SHIFT_JIS))}catch(o){throw new X(o)}}static decodeByteSegment(e,n,r,i,l,o){if(8*r>e.available())throw new X;const u=new Uint8Array(r);for(let g=0;g<r;g++)u[g]=e.readBits(8);let h;i===null?h=ee.guessEncoding(u,o):h=i.getName();try{n.append(Ue.decode(u,h))}catch(g){throw new X(g)}l.push(u)}static toAlphaNumericChar(e){if(e>=It.ALPHANUMERIC_CHARS.length)throw new X;return It.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,r,i){const l=n.length();for(;r>1;){if(e.available()<11)throw new X;const o=e.readBits(11);n.append(It.toAlphaNumericChar(Math.floor(o/45))),n.append(It.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new X;n.append(It.toAlphaNumericChar(e.readBits(6)))}if(i)for(let o=l;o<n.length();o++)n.charAt(o)==="%"&&(o<n.length()-1&&n.charAt(o+1)==="%"?n.deleteCharAt(o+1):n.setCharAt(o,""))}static decodeNumericSegment(e,n,r){for(;r>=3;){if(e.available()<10)throw new X;const i=e.readBits(10);if(i>=1e3)throw new X;n.append(It.toAlphaNumericChar(Math.floor(i/100))),n.append(It.toAlphaNumericChar(Math.floor(i/10)%10)),n.append(It.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new X;const i=e.readBits(7);if(i>=100)throw new X;n.append(It.toAlphaNumericChar(Math.floor(i/10))),n.append(It.toAlphaNumericChar(i%10))}else if(r===1){if(e.available()<4)throw new X;const i=e.readBits(4);if(i>=10)throw new X;n.append(It.toAlphaNumericChar(i))}}static parseECIValue(e){const n=e.readBits(8);if((n&128)===0)return n&127;if((n&192)===128){const r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){const r=e.readBits(16);return(n&31)<<16&4294967295|r}throw new X}}It.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",It.GB2312_SUBSET=1;class qi{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class Qi{constructor(){this.rsDecoder=new Rn(at.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(Ce.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const r=new Ua(e);let i=null;try{return this.decodeBitMatrixParser(r,n)}catch(l){i=l}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const l=this.decodeBitMatrixParser(r,n);return l.setOther(new qi(!0)),l}catch(l){throw i!==null?i:l}}decodeBitMatrixParser(e,n){const r=e.readVersion(),i=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),o=ui.getDataBlocks(l,r,i);let u=0;for(const b of o)u+=b.getNumDataCodewords();const h=new Uint8Array(u);let g=0;for(const b of o){const S=b.getCodewords(),k=b.getNumDataCodewords();this.correctErrors(S,k);for(let R=0;R<k;R++)h[g++]=S[R]}return It.decode(h,r,i,n)}correctErrors(e,n){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new V}for(let i=0;i<n;i++)e[i]=r[i]}}class as extends Fe{constructor(e,n,r){super(e,n),this.estimatedModuleSize=r}aboutEquals(e,n,r){if(Math.abs(n-this.getY())<=e&&Math.abs(r-this.getX())<=e){const i=Math.abs(e-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1}combineEstimate(e,n,r){const i=(this.getX()+n)/2,l=(this.getY()+e)/2,o=(this.estimatedModuleSize+r)/2;return new as(i,l,o)}}class qn{constructor(e,n,r,i,l,o,u){this.image=e,this.startX=n,this.startY=r,this.width=i,this.height=l,this.moduleSize=o,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,r=this.width,i=e+r,l=this.startY+n/2,o=new Int32Array(3),u=this.image;for(let h=0;h<n;h++){const g=l+((h&1)===0?Math.floor((h+1)/2):-Math.floor((h+1)/2));o[0]=0,o[1]=0,o[2]=0;let b=e;for(;b<i&&!u.get(b,g);)b++;let S=0;for(;b<i;){if(u.get(b,g))if(S===1)o[1]++;else if(S===2){if(this.foundPatternCross(o)){const k=this.handlePossibleCenter(o,g,b);if(k!==null)return k}o[0]=o[2],o[1]=1,o[2]=0,S=1}else o[++S]++;else S===1&&S++,o[S]++;b++}if(this.foundPatternCross(o)){const k=this.handlePossibleCenter(o,g,i);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new B}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,r=n/2;for(let i=0;i<3;i++)if(Math.abs(n-e[i])>=r)return!1;return!0}crossCheckVertical(e,n,r,i){const l=this.image,o=l.getHeight(),u=this.crossCheckStateCount;u[0]=0,u[1]=0,u[2]=0;let h=e;for(;h>=0&&l.get(n,h)&&u[1]<=r;)u[1]++,h--;if(h<0||u[1]>r)return NaN;for(;h>=0&&!l.get(n,h)&&u[0]<=r;)u[0]++,h--;if(u[0]>r)return NaN;for(h=e+1;h<o&&l.get(n,h)&&u[1]<=r;)u[1]++,h++;if(h===o||u[1]>r)return NaN;for(;h<o&&!l.get(n,h)&&u[2]<=r;)u[2]++,h++;if(u[2]>r)return NaN;const g=u[0]+u[1]+u[2];return 5*Math.abs(g-i)>=2*i?NaN:this.foundPatternCross(u)?qn.centerFromEnd(u,h):NaN}handlePossibleCenter(e,n,r){const i=e[0]+e[1]+e[2],l=qn.centerFromEnd(e,r),o=this.crossCheckVertical(n,l,2*e[1],i);if(!isNaN(o)){const u=(e[0]+e[1]+e[2])/3;for(const g of this.possibleCenters)if(g.aboutEquals(u,o,l))return g.combineEstimate(o,l,u);const h=new as(l,o,u);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null}}class or extends Fe{constructor(e,n,r,i){super(e,n),this.estimatedModuleSize=r,this.count=i,i===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,r){if(Math.abs(n-this.getY())<=e&&Math.abs(r-this.getX())<=e){const i=Math.abs(e-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1}combineEstimate(e,n,r){const i=this.count+1,l=(this.count*this.getX()+n)/i,o=(this.count*this.getY()+e)/i,u=(this.count*this.estimatedModuleSize+r)/i;return new or(l,o,u,i)}}class Rr{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Mt{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(de.TRY_HARDER)!==void 0,r=e!=null&&e.get(de.PURE_BARCODE)!==void 0,i=this.image,l=i.getHeight(),o=i.getWidth();let u=Math.floor(3*l/(4*Mt.MAX_MODULES));(u<Mt.MIN_SKIP||n)&&(u=Mt.MIN_SKIP);let h=!1;const g=new Int32Array(5);for(let S=u-1;S<l&&!h;S+=u){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;let k=0;for(let R=0;R<o;R++)if(i.get(R,S))(k&1)===1&&k++,g[k]++;else if((k&1)===0)if(k===4)if(Mt.foundPatternCross(g)){if(this.handlePossibleCenter(g,S,R,r)===!0)if(u=2,this.hasSkipped===!0)h=this.haveMultiplyConfirmedCenters();else{const W=this.findRowSkip();W>g[2]&&(S+=W-g[2]-u,R=o-1)}else{g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,k=3;continue}k=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,k=3;else g[++k]++;else g[k]++;Mt.foundPatternCross(g)&&this.handlePossibleCenter(g,S,o,r)===!0&&(u=g[0],this.hasSkipped&&(h=this.haveMultiplyConfirmedCenters()))}const b=this.selectBestPatterns();return Fe.orderBestPatterns(b),new Rr(b)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let l=0;l<5;l++){const o=e[l];if(o===0)return!1;n+=o}if(n<7)return!1;const r=n/7,i=r/2;return Math.abs(r-e[0])<i&&Math.abs(r-e[1])<i&&Math.abs(3*r-e[2])<3*i&&Math.abs(r-e[3])<i&&Math.abs(r-e[4])<i}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,r,i){const l=this.getCrossCheckStateCount();let o=0;const u=this.image;for(;e>=o&&n>=o&&u.get(n-o,e-o);)l[2]++,o++;if(e<o||n<o)return!1;for(;e>=o&&n>=o&&!u.get(n-o,e-o)&&l[1]<=r;)l[1]++,o++;if(e<o||n<o||l[1]>r)return!1;for(;e>=o&&n>=o&&u.get(n-o,e-o)&&l[0]<=r;)l[0]++,o++;if(l[0]>r)return!1;const h=u.getHeight(),g=u.getWidth();for(o=1;e+o<h&&n+o<g&&u.get(n+o,e+o);)l[2]++,o++;if(e+o>=h||n+o>=g)return!1;for(;e+o<h&&n+o<g&&!u.get(n+o,e+o)&&l[3]<r;)l[3]++,o++;if(e+o>=h||n+o>=g||l[3]>=r)return!1;for(;e+o<h&&n+o<g&&u.get(n+o,e+o)&&l[4]<r;)l[4]++,o++;if(l[4]>=r)return!1;const b=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(b-i)<2*i&&Mt.foundPatternCross(l)}crossCheckVertical(e,n,r,i){const l=this.image,o=l.getHeight(),u=this.getCrossCheckStateCount();let h=e;for(;h>=0&&l.get(n,h);)u[2]++,h--;if(h<0)return NaN;for(;h>=0&&!l.get(n,h)&&u[1]<=r;)u[1]++,h--;if(h<0||u[1]>r)return NaN;for(;h>=0&&l.get(n,h)&&u[0]<=r;)u[0]++,h--;if(u[0]>r)return NaN;for(h=e+1;h<o&&l.get(n,h);)u[2]++,h++;if(h===o)return NaN;for(;h<o&&!l.get(n,h)&&u[3]<r;)u[3]++,h++;if(h===o||u[3]>=r)return NaN;for(;h<o&&l.get(n,h)&&u[4]<r;)u[4]++,h++;if(u[4]>=r)return NaN;const g=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(g-i)>=2*i?NaN:Mt.foundPatternCross(u)?Mt.centerFromEnd(u,h):NaN}crossCheckHorizontal(e,n,r,i){const l=this.image,o=l.getWidth(),u=this.getCrossCheckStateCount();let h=e;for(;h>=0&&l.get(h,n);)u[2]++,h--;if(h<0)return NaN;for(;h>=0&&!l.get(h,n)&&u[1]<=r;)u[1]++,h--;if(h<0||u[1]>r)return NaN;for(;h>=0&&l.get(h,n)&&u[0]<=r;)u[0]++,h--;if(u[0]>r)return NaN;for(h=e+1;h<o&&l.get(h,n);)u[2]++,h++;if(h===o)return NaN;for(;h<o&&!l.get(h,n)&&u[3]<r;)u[3]++,h++;if(h===o||u[3]>=r)return NaN;for(;h<o&&l.get(h,n)&&u[4]<r;)u[4]++,h++;if(u[4]>=r)return NaN;const g=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(g-i)>=i?NaN:Mt.foundPatternCross(u)?Mt.centerFromEnd(u,h):NaN}handlePossibleCenter(e,n,r,i){const l=e[0]+e[1]+e[2]+e[3]+e[4];let o=Mt.centerFromEnd(e,r),u=this.crossCheckVertical(n,Math.floor(o),e[2],l);if(!isNaN(u)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(u),e[2],l),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(u),Math.floor(o),e[2],l)))){const h=l/7;let g=!1;const b=this.possibleCenters;for(let S=0,k=b.length;S<k;S++){const R=b[S];if(R.aboutEquals(h,u,o)){b[S]=R.combineEstimate(u,o,h),g=!0;break}}if(!g){const S=new or(o,u,h);b.push(S),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(S)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const r of this.possibleCenters)if(r.getCount()>=Mt.CENTER_QUORUM)if(n==null)n=r;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-r.getX())-Math.abs(n.getY()-r.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const r=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=Mt.CENTER_QUORUM&&(e++,n+=o.getEstimatedModuleSize());if(e<3)return!1;const i=n/r;let l=0;for(const o of this.possibleCenters)l+=Math.abs(o.getEstimatedModuleSize()-i);return l<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new B;const n=this.possibleCenters;let r;if(e>3){let i=0,l=0;for(const h of this.possibleCenters){const g=h.getEstimatedModuleSize();i+=g,l+=g*g}r=i/e;let o=Math.sqrt(l/e-r*r);n.sort((h,g)=>{const b=Math.abs(g.getEstimatedModuleSize()-r),S=Math.abs(h.getEstimatedModuleSize()-r);return b<S?-1:b>S?1:0});const u=Math.max(.2*r,o);for(let h=0;h<n.length&&n.length>3;h++){const g=n[h];Math.abs(g.getEstimatedModuleSize()-r)>u&&(n.splice(h,1),h--)}}if(n.length>3){let i=0;for(const l of n)i+=l.getEstimatedModuleSize();r=i/n.length,n.sort((l,o)=>{if(o.getCount()===l.getCount()){const u=Math.abs(o.getEstimatedModuleSize()-r),h=Math.abs(l.getEstimatedModuleSize()-r);return u<h?1:u>h?-1:0}else return o.getCount()-l.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}Mt.CENTER_QUORUM=2,Mt.MIN_SKIP=3,Mt.MAX_MODULES=57;class pr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(de.NEED_RESULT_POINT_CALLBACK);const r=new Mt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(r)}processFinderPatternInfo(e){const n=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),l=this.calculateModuleSize(n,r,i);if(l<1)throw new B("No pattern found in proccess finder.");const o=pr.computeDimension(n,r,i,l),u=Xe.getProvisionalVersionForDimension(o),h=u.getDimensionForVersion()-7;let g=null;if(u.getAlignmentPatternCenters().length>0){const R=r.getX()-n.getX()+i.getX(),L=r.getY()-n.getY()+i.getY(),W=1-3/h,K=Math.floor(n.getX()+W*(R-n.getX())),se=Math.floor(n.getY()+W*(L-n.getY()));for(let Se=4;Se<=16;Se<<=1)try{g=this.findAlignmentInRegion(l,K,se,Se);break}catch(ke){if(!(ke instanceof B))throw ke}}const b=pr.createTransform(n,r,i,g,o),S=pr.sampleGrid(this.image,b,o);let k;return g===null?k=[i,n,r]:k=[i,n,r,g],new ts(S,k)}static createTransform(e,n,r,i,l){const o=l-3.5;let u,h,g,b;return i!==null?(u=i.getX(),h=i.getY(),g=o-3,b=g):(u=n.getX()-e.getX()+r.getX(),h=n.getY()-e.getY()+r.getY(),g=o,b=o),On.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,g,b,3.5,o,e.getX(),e.getY(),n.getX(),n.getY(),u,h,r.getX(),r.getY())}static sampleGrid(e,n,r){return Vn.getInstance().sampleGridWithTransform(e,r,r,n)}static computeDimension(e,n,r,i){const l=ut.round(Fe.distance(e,n)/i),o=ut.round(Fe.distance(e,r)/i);let u=Math.floor((l+o)/2)+7;switch(u&3){case 0:u++;break;case 2:u--;break;case 3:throw new B("Dimensions could be not found.")}return u}calculateModuleSize(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2}calculateModuleSizeOneWay(e,n){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,r,i){let l=this.sizeOfBlackWhiteBlackRun(e,n,r,i),o=1,u=e-(r-e);u<0?(o=e/(e-u),u=0):u>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(u-e),u=this.image.getWidth()-1);let h=Math.floor(n-(i-n)*o);return o=1,h<0?(o=n/(n-h),h=0):h>=this.image.getHeight()&&(o=(this.image.getHeight()-1-n)/(h-n),h=this.image.getHeight()-1),u=Math.floor(e+(u-e)*o),l+=this.sizeOfBlackWhiteBlackRun(e,n,u,h),l-1}sizeOfBlackWhiteBlackRun(e,n,r,i){const l=Math.abs(i-n)>Math.abs(r-e);if(l){let R=e;e=n,n=R,R=r,r=i,i=R}const o=Math.abs(r-e),u=Math.abs(i-n);let h=-o/2;const g=e<r?1:-1,b=n<i?1:-1;let S=0;const k=r+g;for(let R=e,L=n;R!==k;R+=g){const W=l?L:R,K=l?R:L;if(S===1===this.image.get(W,K)){if(S===2)return ut.distance(R,L,e,n);S++}if(h+=u,h>0){if(L===i)break;L+=b,h-=o}}return S===2?ut.distance(r+g,i,e,n):NaN}findAlignmentInRegion(e,n,r,i){const l=Math.floor(i*e),o=Math.max(0,n-l),u=Math.min(this.image.getWidth()-1,n+l);if(u-o<e*3)throw new B("Alignment top exceeds estimated module size.");const h=Math.max(0,r-l),g=Math.min(this.image.getHeight()-1,r+l);if(g-h<e*3)throw new B("Alignment bottom exceeds estimated module size.");return new qn(this.image,o,h,u-o,g-h,e,this.resultPointCallback).find()}}class mn{constructor(){this.decoder=new Qi}getDecoder(){return this.decoder}decode(e,n){let r,i;if(n!=null&&n.get(de.PURE_BARCODE)!==void 0){const h=mn.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(h,n),i=mn.NO_POINTS}else{const h=new pr(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(h.getBits(),n),i=h.getPoints()}r.getOther()instanceof qi&&r.getOther().applyMirroredCorrection(i);const l=new _e(r.getText(),r.getRawBytes(),void 0,i,he.QR_CODE,void 0),o=r.getByteSegments();o!==null&&l.putMetadata(Me.BYTE_SEGMENTS,o);const u=r.getECLevel();return u!==null&&l.putMetadata(Me.ERROR_CORRECTION_LEVEL,u),r.hasStructuredAppend()&&(l.putMetadata(Me.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),l.putMetadata(Me.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),l}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new B;const i=this.moduleSize(n,e);let l=n[1],o=r[1],u=n[0],h=r[0];if(u>=h||l>=o)throw new B;if(o-l!==h-u&&(h=u+(o-l),h>=e.getWidth()))throw new B;const g=Math.round((h-u+1)/i),b=Math.round((o-l+1)/i);if(g<=0||b<=0)throw new B;if(b!==g)throw new B;const S=Math.floor(i/2);l+=S,u+=S;const k=u+Math.floor((g-1)*i)-h;if(k>0){if(k>S)throw new B;u-=k}const R=l+Math.floor((b-1)*i)-o;if(R>0){if(R>S)throw new B;l-=R}const L=new Ce(g,b);for(let W=0;W<b;W++){const K=l+Math.floor(W*i);for(let se=0;se<g;se++)e.get(u+Math.floor(se*i),K)&&L.set(se,W)}return L}static moduleSize(e,n){const r=n.getHeight(),i=n.getWidth();let l=e[0],o=e[1],u=!0,h=0;for(;l<i&&o<r;){if(u!==n.get(l,o)){if(++h===5)break;u=!u}l++,o++}if(l===i||o===r)throw new B;return(l-e[0])/7}}mn.NO_POINTS=new Array;class Qe{PDF417Common(){}static getBitCountSum(e){return ut.sum(e)}static toIntArray(e){if(e==null||!e.length)return Qe.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let r=0;for(const i of e)n[r++]=i;return n}static getCodeword(e){const n=fe.binarySearch(Qe.SYMBOL_TABLE,e&262143);return n<0?-1:(Qe.CODEWORD_TABLE[n]-1)%Qe.NUMBER_OF_CODEWORDS}}Qe.NUMBER_OF_CODEWORDS=929,Qe.MAX_CODEWORDS_IN_BARCODE=Qe.NUMBER_OF_CODEWORDS-1,Qe.MIN_ROWS_IN_BARCODE=3,Qe.MAX_ROWS_IN_BARCODE=90,Qe.MODULES_IN_CODEWORD=17,Qe.MODULES_IN_STOP_PATTERN=18,Qe.BARS_IN_MODULE=8,Qe.EMPTY_INT_ARRAY=new Int32Array([]),Qe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Qe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class za{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class et{static detectMultiple(e,n,r){let i=e.getBlackMatrix(),l=et.detect(r,i);return l.length||(i=i.clone(),i.rotate180(),l=et.detect(r,i)),new za(i,l)}static detect(e,n){const r=new Array;let i=0,l=0,o=!1;for(;i<n.getHeight();){const u=et.findVertices(n,i,l);if(u[0]==null&&u[3]==null){if(!o)break;o=!1,l=0;for(const h of r)h[1]!=null&&(i=Math.trunc(Math.max(i,h[1].getY()))),h[3]!=null&&(i=Math.max(i,Math.trunc(h[3].getY())));i+=et.ROW_STEP;continue}if(o=!0,r.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),i=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),i=Math.trunc(u[4].getY()))}return r}static findVertices(e,n,r){const i=e.getHeight(),l=e.getWidth(),o=new Array(8);return et.copyToResult(o,et.findRowsWithPattern(e,i,l,n,r,et.START_PATTERN),et.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),n=Math.trunc(o[4].getY())),et.copyToResult(o,et.findRowsWithPattern(e,i,l,n,r,et.STOP_PATTERN),et.INDEXES_STOP_PATTERN),o}static copyToResult(e,n,r){for(let i=0;i<r.length;i++)e[r[i]]=n[i]}static findRowsWithPattern(e,n,r,i,l,o){const u=new Array(4);let h=!1;const g=new Int32Array(o.length);for(;i<n;i+=et.ROW_STEP){let S=et.findGuardPattern(e,l,i,r,!1,o,g);if(S!=null){for(;i>0;){const k=et.findGuardPattern(e,l,--i,r,!1,o,g);if(k!=null)S=k;else{i++;break}}u[0]=new Fe(S[0],i),u[1]=new Fe(S[1],i),h=!0;break}}let b=i+1;if(h){let S=0,k=Int32Array.from([Math.trunc(u[0].getX()),Math.trunc(u[1].getX())]);for(;b<n;b++){const R=et.findGuardPattern(e,k[0],b,r,!1,o,g);if(R!=null&&Math.abs(k[0]-R[0])<et.MAX_PATTERN_DRIFT&&Math.abs(k[1]-R[1])<et.MAX_PATTERN_DRIFT)k=R,S=0;else{if(S>et.SKIPPED_ROW_COUNT_MAX)break;S++}}b-=S+1,u[2]=new Fe(k[0],b),u[3]=new Fe(k[1],b)}return b-i<et.BARCODE_MIN_HEIGHT&&fe.fill(u,null),u}static findGuardPattern(e,n,r,i,l,o,u){fe.fillWithin(u,0,u.length,0);let h=n,g=0;for(;e.get(h,r)&&h>0&&g++<et.MAX_PIXEL_DRIFT;)h--;let b=h,S=0,k=o.length;for(let R=l;b<i;b++)if(e.get(b,r)!==R)u[S]++;else{if(S===k-1){if(et.patternMatchVariance(u,o,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE)return new Int32Array([h,b]);h+=u[0]+u[1],Z.arraycopy(u,2,u,0,S-1),u[S-1]=0,u[S]=0,S--}else S++;u[S]=1,R=!R}return S===k-1&&et.patternMatchVariance(u,o,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE?new Int32Array([h,b-1]):null}static patternMatchVariance(e,n,r){let i=e.length,l=0,o=0;for(let g=0;g<i;g++)l+=e[g],o+=n[g];if(l<o)return 1/0;let u=l/o;r*=u;let h=0;for(let g=0;g<i;g++){let b=e[g],S=n[g]*u,k=b>S?b-S:S-b;if(k>r)return 1/0;h+=k}return h/l}}et.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),et.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),et.MAX_AVG_VARIANCE=.42,et.MAX_INDIVIDUAL_VARIANCE=.8,et.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),et.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),et.MAX_PIXEL_DRIFT=3,et.MAX_PATTERN_DRIFT=5,et.SKIPPED_ROW_COUNT_MAX=25,et.ROW_STEP=5,et.BARCODE_MIN_HEIGHT=10;class rn{constructor(e,n){if(n.length===0)throw new j;this.field=e;let r=n.length;if(r>1&&n[0]===0){let i=1;for(;i<r&&n[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),Z.arraycopy(n,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let i=0;for(let l of this.coefficients)i=this.field.add(i,l);return i}let n=this.coefficients[0],r=this.coefficients.length;for(let i=1;i<r;i++)n=this.field.add(this.field.multiply(e,n),this.coefficients[i]);return n}add(e){if(!this.field.equals(e.field))throw new j("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,r=e.coefficients;if(n.length>r.length){let o=n;n=r,r=o}let i=new Int32Array(r.length),l=r.length-n.length;Z.arraycopy(r,0,i,0,l);for(let o=l;o<r.length;o++)i[o]=this.field.add(n[o-l],r[o]);return new rn(this.field,i)}subtract(e){if(!this.field.equals(e.field))throw new j("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof rn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new j("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new rn(this.field,new Int32Array([0]));let n=this.coefficients,r=n.length,i=e.coefficients,l=i.length,o=new Int32Array(r+l-1);for(let u=0;u<r;u++){let h=n[u];for(let g=0;g<l;g++)o[u+g]=this.field.add(o[u+g],this.field.multiply(h,i[g]))}return new rn(this.field,o)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new rn(this.field,n)}multiplyScalar(e){if(e===0)return new rn(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,r=new Int32Array(n);for(let i=0;i<n;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new rn(this.field,r)}multiplyByMonomial(e,n){if(e<0)throw new j;if(n===0)return new rn(this.field,new Int32Array([0]));let r=this.coefficients.length,i=new Int32Array(r+e);for(let l=0;l<r;l++)i[l]=this.field.multiply(this.coefficients[l],n);return new rn(this.field,i)}toString(){let e=new Y;for(let n=this.getDegree();n>=0;n--){let r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class Ha{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new j;return this.logTable[e]}inverse(e){if(e===0)throw new sr;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class ls extends Ha{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let r=1;for(let i=0;i<e;i++)this.expTable[i]=r,r=r*n%e;for(let i=0;i<e-1;i++)this.logTable[this.expTable[i]]=i;this.zero=new rn(this,new Int32Array([0])),this.one=new rn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new j;if(n===0)return this.zero;let r=new Int32Array(e+1);return r[0]=n,new rn(this,r)}}ls.PDF417_GF=new ls(Qe.NUMBER_OF_CODEWORDS,3);class Ji{constructor(){this.field=ls.PDF417_GF}decode(e,n,r){let i=new rn(this.field,e),l=new Int32Array(n),o=!1;for(let L=n;L>0;L--){let W=i.evaluateAt(this.field.exp(L));l[n-L]=W,W!==0&&(o=!0)}if(!o)return 0;let u=this.field.getOne();if(r!=null)for(const L of r){let W=this.field.exp(e.length-1-L),K=new rn(this.field,new Int32Array([this.field.subtract(0,W),1]));u=u.multiply(K)}let h=new rn(this.field,l),g=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),h,n),b=g[0],S=g[1],k=this.findErrorLocations(b),R=this.findErrorMagnitudes(S,b,k);for(let L=0;L<k.length;L++){let W=e.length-1-this.field.log(k[L]);if(W<0)throw V.getChecksumInstance();e[W]=this.field.subtract(e[W],R[L])}return k.length}runEuclideanAlgorithm(e,n,r){if(e.getDegree()<n.getDegree()){let k=e;e=n,n=k}let i=e,l=n,o=this.field.getZero(),u=this.field.getOne();for(;l.getDegree()>=Math.round(r/2);){let k=i,R=o;if(i=l,o=u,i.isZero())throw V.getChecksumInstance();l=k;let L=this.field.getZero(),W=i.getCoefficient(i.getDegree()),K=this.field.inverse(W);for(;l.getDegree()>=i.getDegree()&&!l.isZero();){let se=l.getDegree()-i.getDegree(),Se=this.field.multiply(l.getCoefficient(l.getDegree()),K);L=L.add(this.field.buildMonomial(se,Se)),l=l.subtract(i.multiplyByMonomial(se,Se))}u=L.multiply(o).subtract(R).negative()}let h=u.getCoefficient(0);if(h===0)throw V.getChecksumInstance();let g=this.field.inverse(h),b=u.multiply(g),S=l.multiply(g);return[b,S]}findErrorLocations(e){let n=e.getDegree(),r=new Int32Array(n),i=0;for(let l=1;l<this.field.getSize()&&i<n;l++)e.evaluateAt(l)===0&&(r[i]=this.field.inverse(l),i++);if(i!==n)throw V.getChecksumInstance();return r}findErrorMagnitudes(e,n,r){let i=n.getDegree(),l=new Int32Array(i);for(let g=1;g<=i;g++)l[i-g]=this.field.multiply(g,n.getCoefficient(g));let o=new rn(this.field,l),u=r.length,h=new Int32Array(u);for(let g=0;g<u;g++){let b=this.field.inverse(r[g]),S=this.field.subtract(0,e.evaluateAt(b)),k=this.field.inverse(o.evaluateAt(b));h[g]=this.field.multiply(S,k)}return h}}class Wr{constructor(e,n,r,i,l){e instanceof Wr?this.constructor_2(e):this.constructor_1(e,n,r,i,l)}constructor_1(e,n,r,i,l){const o=n==null||r==null,u=i==null||l==null;if(o&&u)throw new B;o?(n=new Fe(0,i.getY()),r=new Fe(0,l.getY())):u&&(i=new Fe(e.getWidth()-1,n.getY()),l=new Fe(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=i,this.bottomRight=l,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),l.getX())),this.minY=Math.trunc(Math.min(n.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),l.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new Wr(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,r){let i=this.topLeft,l=this.bottomLeft,o=this.topRight,u=this.bottomRight;if(e>0){let h=r?this.topLeft:this.topRight,g=Math.trunc(h.getY()-e);g<0&&(g=0);let b=new Fe(h.getX(),g);r?i=b:o=b}if(n>0){let h=r?this.bottomLeft:this.bottomRight,g=Math.trunc(h.getY()+n);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);let b=new Fe(h.getX(),g);r?l=b:u=b}return new Wr(this.image,i,l,o,u)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ps{constructor(e,n,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class yr{constructor(){this.buffer=""}static form(e,n){let r=-1;function i(o,u,h,g,b,S){if(o==="%%")return"%";if(n[++r]===void 0)return;o=g?parseInt(g.substr(1)):void 0;let k=b?parseInt(b.substr(1)):void 0,R;switch(S){case"s":R=n[r];break;case"c":R=n[r][0];break;case"f":R=parseFloat(n[r]).toFixed(o);break;case"p":R=parseFloat(n[r]).toPrecision(o);break;case"e":R=parseFloat(n[r]).toExponential(o);break;case"x":R=parseInt(n[r]).toString(k||16);break;case"d":R=parseFloat(parseInt(n[r],k||10).toPrecision(o)).toFixed(0);break}R=typeof R=="object"?JSON.stringify(R):(+R).toString(k);let L=parseInt(h),W=h&&h[0]+""=="0"?"0":" ";for(;R.length<L;)R=u!==void 0?R+W:W+R;return R}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,i)}format(e,...n){this.buffer+=yr.form(e,n)}toString(){return this.buffer}}class cr{constructor(e){this.boundingBox=new Wr(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let r=1;r<cr.MAX_NEARBY_DISTANCE;r++){let i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(n=this.codewords[i],n!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(n=this.codewords[i],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new yr;let n=0;for(const r of this.codewords){if(r==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,r.getRowNumber(),r.getValue())}return e.toString()}}cr.MAX_NEARBY_DISTANCE=5;class jr{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[r,i]of this.values.entries()){const l={getKey:()=>r,getValue:()=>i};l.getValue()>e?(e=l.getValue(),n=[],n.push(l.getKey())):l.getValue()===e&&n.push(l.getKey())}return Qe.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class Ga extends cr{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),l=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=-1,g=1,b=0;for(let S=o;S<u;S++){if(n[S]==null)continue;let k=n[S],R=k.getRowNumber()-h;if(R===0)b++;else if(R===1)g=Math.max(g,b),b=1,h=k.getRowNumber();else if(R<0||k.getRowNumber()>=e.getRowCount()||R>S)n[S]=null;else{let L;g>2?L=(g-2)*R:L=R;let W=L>=S;for(let K=1;K<=L&&!W;K++)W=n[S-K]!=null;W?n[S]=null:(h=k.getRowNumber(),b=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let r of this.getCodewords())if(r!=null){let i=r.getRowNumber();if(i>=n.length)continue;n[i]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),i=this._isLeft?n.getBottomLeft():n.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),u=this.getCodewords(),h=-1;for(let g=l;g<o;g++){if(u[g]==null)continue;let b=u[g];b.setRowNumberAsRowIndicatorColumn();let S=b.getRowNumber()-h;S===0||(S===1?h=b.getRowNumber():b.getRowNumber()>=e.getRowCount()?u[g]=null:h=b.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new jr,r=new jr,i=new jr,l=new jr;for(let u of e){if(u==null)continue;u.setRowNumberAsRowIndicatorColumn();let h=u.getValue()%30,g=u.getRowNumber();switch(this._isLeft||(g+=2),g%3){case 0:r.setValue(h*3+1);break;case 1:l.setValue(h/3),i.setValue(h%3);break;case 2:n.setValue(h+1);break}}if(n.getValue().length===0||r.getValue().length===0||i.getValue().length===0||l.getValue().length===0||n.getValue()[0]<1||r.getValue()[0]+i.getValue()[0]<Qe.MIN_ROWS_IN_BARCODE||r.getValue()[0]+i.getValue()[0]>Qe.MAX_ROWS_IN_BARCODE)return null;let o=new Ps(n.getValue()[0],r.getValue()[0],i.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,n){for(let r=0;r<e.length;r++){let i=e[r];if(e[r]==null)continue;let l=i.getValue()%30,o=i.getRowNumber();if(o>n.getRowCount()){e[r]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:l*3+1!==n.getRowCountUpperPart()&&(e[r]=null);break;case 1:(Math.trunc(l/3)!==n.getErrorCorrectionLevel()||l%3!==n.getRowCountLowerPart())&&(e[r]=null);break;case 2:l+1!==n.getColumnCount()&&(e[r]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Bs{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=Qe.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let r=this.detectionResultColumns[n].getCodewords();for(let i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(n,i,r))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(let i=1;i<=this.barcodeColumnCount;i++){let l=this.detectionResultColumns[i].getCodewords()[r];l!=null&&(l.setRowNumber(e[r].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<n.length;r++){if(n[r]==null)continue;let i=n[r].getRowNumber(),l=0;for(let o=this.barcodeColumnCount+1;o>0&&l<this.ADJUST_ROW_NUMBER_SKIP;o--){let u=this.detectionResultColumns[o].getCodewords()[r];u!=null&&(l=Bs.adjustRowNumberIfValid(i,l,u),u.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let r=0;r<n.length;r++){if(n[r]==null)continue;let i=n[r].getRowNumber(),l=0;for(let o=1;o<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;o++){let u=this.detectionResultColumns[o].getCodewords()[r];u!=null&&(l=Bs.adjustRowNumberIfValid(i,l,u),u.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,r){if(!this.detectionResultColumns[e-1])return;let i=r[n],l=this.detectionResultColumns[e-1].getCodewords(),o=l;this.detectionResultColumns[e+1]!=null&&(o=this.detectionResultColumns[e+1].getCodewords());let u=new Array(14);u[2]=l[n],u[3]=o[n],n>0&&(u[0]=r[n-1],u[4]=l[n-1],u[5]=o[n-1]),n>1&&(u[8]=r[n-2],u[10]=l[n-2],u[11]=o[n-2]),n<r.length-1&&(u[1]=r[n+1],u[6]=l[n+1],u[7]=o[n+1]),n<r.length-2&&(u[9]=r[n+2],u[12]=l[n+2],u[13]=o[n+2]);for(let h of u)if(Bs.adjustRowNumber(i,h))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new yr;for(let r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(let i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){n.format("    |   ");continue}let l=this.detectionResultColumns[i].getCodewords()[r];if(l==null){n.format("    |   ");continue}n.format(" %3d|%3d",l.getRowNumber(),l.getValue())}n.format("%n")}return n.toString()}}class Ur{constructor(e,n,r,i){this.rowNumber=Ur.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Ur.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Ur.BARCODE_ROW_UNKNOWN=-1;class sn{static initialize(){for(let e=0;e<Qe.SYMBOL_TABLE.length;e++){let n=Qe.SYMBOL_TABLE[e],r=n&1;for(let i=0;i<Qe.BARS_IN_MODULE;i++){let l=0;for(;(n&1)===r;)l+=1,n>>=1;r=n&1,sn.RATIOS_TABLE[e]||(sn.RATIOS_TABLE[e]=new Array(Qe.BARS_IN_MODULE)),sn.RATIOS_TABLE[e][Qe.BARS_IN_MODULE-i-1]=Math.fround(l/Qe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=sn.getDecodedCodewordValue(sn.sampleBitCounts(e));return n!==-1?n:sn.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=ut.sum(e),r=new Int32Array(Qe.BARS_IN_MODULE),i=0,l=0;for(let o=0;o<Qe.MODULES_IN_CODEWORD;o++){let u=n/(2*Qe.MODULES_IN_CODEWORD)+o*n/Qe.MODULES_IN_CODEWORD;l+e[i]<=u&&(l+=e[i],i++),r[i]++}return r}static getDecodedCodewordValue(e){let n=sn.getBitValue(e);return Qe.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let r=0;r<e.length;r++)for(let i=0;i<e[r];i++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=ut.sum(e),r=new Array(Qe.BARS_IN_MODULE);if(n>1)for(let o=0;o<r.length;o++)r[o]=Math.fround(e[o]/n);let i=kr.MAX_VALUE,l=-1;this.bSymbolTableReady||sn.initialize();for(let o=0;o<sn.RATIOS_TABLE.length;o++){let u=0,h=sn.RATIOS_TABLE[o];for(let g=0;g<Qe.BARS_IN_MODULE;g++){let b=Math.fround(h[g]-r[g]);if(u+=Math.fround(b*b),u>=i)break}u<i&&(i=u,l=Qe.SYMBOL_TABLE[o])}return l}}sn.bSymbolTableReady=!1,sn.RATIOS_TABLE=new Array(Qe.SYMBOL_TABLE.length).map(E=>new Array(Qe.BARS_IN_MODULE));class di{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class $i{static parseLong(e,n=void 0){return parseInt(e,n)}}class wr extends N{}wr.kind="NullPointerException";class ea{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,r){if(e==null)throw new wr;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new oe;if(r===0)return;for(let i=0;i<r;i++)this.write(e[n+i])}flush(){}close(){}}class hi extends N{}class Va extends ea{constructor(e=32){if(super(),this.count=0,e<0)throw new j("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let r=this.buf.length<<1;if(r-e<0&&(r=e),r<0){if(e<0)throw new hi;r=ie.MAX_VALUE}this.buf=fe.copyOfUint8Array(this.buf,r)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,r){if(n<0||n>e.length||r<0||n+r-e.length>0)throw new oe;this.ensureCapacity(this.count+r),Z.arraycopy(e,n,this.buf,this.count,r),this.count+=r}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return fe.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var xt;(function(E){E[E.ALPHA=0]="ALPHA",E[E.LOWER=1]="LOWER",E[E.MIXED=2]="MIXED",E[E.PUNCT=3]="PUNCT",E[E.ALPHA_SHIFT=4]="ALPHA_SHIFT",E[E.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(xt||(xt={}));function Ls(){if(typeof window<"u")return window.BigInt||null;if(typeof zl<"u")return zl.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Fs;function zt(E){if(typeof Fs>"u"&&(Fs=Ls()),Fs===null)throw new Error("BigInt is not supported!");return Fs(E)}function os(){let E=[];E[0]=zt(1);let e=zt(900);E[1]=e;for(let n=2;n<16;n++)E[n]=E[n-1]*e;return E}class ae{static decode(e,n){let r=new Y(""),i=ue.ISO8859_1;r.enableDecoding(i);let l=1,o=e[l++],u=new di;for(;l<e[0];){switch(o){case ae.TEXT_COMPACTION_MODE_LATCH:l=ae.textCompaction(e,l,r);break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:l=ae.byteCompaction(o,e,i,l,r);break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[l++]);break;case ae.NUMERIC_COMPACTION_MODE_LATCH:l=ae.numericCompaction(e,l,r);break;case ae.ECI_CHARSET:ue.getCharacterSetECIByValue(e[l++]);break;case ae.ECI_GENERAL_PURPOSE:l+=2;break;case ae.ECI_USER_DEFINED:l++;break;case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=ae.decodeMacroBlock(e,l,u);break;case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:throw new X;default:l--,l=ae.textCompaction(e,l,r);break}if(l<e.length)o=e[l++];else throw X.getFormatInstance()}if(r.length()===0)throw X.getFormatInstance();let h=new Oe(null,r.toString(),null,n);return h.setOther(u),h}static decodeMacroBlock(e,n,r){if(n+ae.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw X.getFormatInstance();let i=new Int32Array(ae.NUMBER_OF_SEQUENCE_CODEWORDS);for(let u=0;u<ae.NUMBER_OF_SEQUENCE_CODEWORDS;u++,n++)i[u]=e[n];r.setSegmentIndex(ie.parseInt(ae.decodeBase900toBase10(i,ae.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new Y;n=ae.textCompaction(e,n,l),r.setFileId(l.toString());let o=-1;for(e[n]===ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=n+1);n<e[0];)switch(e[n]){case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let u=new Y;n=ae.textCompaction(e,n+1,u),r.setFileName(u.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let h=new Y;n=ae.textCompaction(e,n+1,h),r.setSender(h.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let g=new Y;n=ae.textCompaction(e,n+1,g),r.setAddressee(g.toString());break;case ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let b=new Y;n=ae.numericCompaction(e,n+1,b),r.setSegmentCount(ie.parseInt(b.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let S=new Y;n=ae.numericCompaction(e,n+1,S),r.setTimestamp($i.parseLong(S.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new Y;n=ae.numericCompaction(e,n+1,k),r.setChecksum(ie.parseInt(k.toString()));break;case ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let R=new Y;n=ae.numericCompaction(e,n+1,R),r.setFileSize($i.parseLong(R.toString()));break;default:throw X.getFormatInstance()}break;case ae.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw X.getFormatInstance()}if(o!==-1){let u=n-o;r.isLastSegment()&&u--,r.setOptionalData(fe.copyOfRange(e,o,o+u))}return n}static textCompaction(e,n,r){let i=new Int32Array((e[0]-n)*2),l=new Int32Array((e[0]-n)*2),o=0,u=!1;for(;n<e[0]&&!u;){let h=e[n++];if(h<ae.TEXT_COMPACTION_MODE_LATCH)i[o]=h/30,i[o+1]=h%30,o+=2;else switch(h){case ae.TEXT_COMPACTION_MODE_LATCH:i[o++]=ae.TEXT_COMPACTION_MODE_LATCH;break;case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:n--,u=!0;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,h=e[n++],l[o]=h,o++;break}}return ae.decodeTextCompaction(i,l,o,r),n}static decodeTextCompaction(e,n,r,i){let l=xt.ALPHA,o=xt.ALPHA,u=0;for(;u<r;){let h=e[u],g="";switch(l){case xt.ALPHA:if(h<26)g=String.fromCharCode(65+h);else switch(h){case 26:g=" ";break;case ae.LL:l=xt.LOWER;break;case ae.ML:l=xt.MIXED;break;case ae.PS:o=l,l=xt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case ae.TEXT_COMPACTION_MODE_LATCH:l=xt.ALPHA;break}break;case xt.LOWER:if(h<26)g=String.fromCharCode(97+h);else switch(h){case 26:g=" ";break;case ae.AS:o=l,l=xt.ALPHA_SHIFT;break;case ae.ML:l=xt.MIXED;break;case ae.PS:o=l,l=xt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case ae.TEXT_COMPACTION_MODE_LATCH:l=xt.ALPHA;break}break;case xt.MIXED:if(h<ae.PL)g=ae.MIXED_CHARS[h];else switch(h){case ae.PL:l=xt.PUNCT;break;case 26:g=" ";break;case ae.LL:l=xt.LOWER;break;case ae.AL:l=xt.ALPHA;break;case ae.PS:o=l,l=xt.PUNCT_SHIFT;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case ae.TEXT_COMPACTION_MODE_LATCH:l=xt.ALPHA;break}break;case xt.PUNCT:if(h<ae.PAL)g=ae.PUNCT_CHARS[h];else switch(h){case ae.PAL:l=xt.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case ae.TEXT_COMPACTION_MODE_LATCH:l=xt.ALPHA;break}break;case xt.ALPHA_SHIFT:if(l=o,h<26)g=String.fromCharCode(65+h);else switch(h){case 26:g=" ";break;case ae.TEXT_COMPACTION_MODE_LATCH:l=xt.ALPHA;break}break;case xt.PUNCT_SHIFT:if(l=o,h<ae.PAL)g=ae.PUNCT_CHARS[h];else switch(h){case ae.PAL:l=xt.ALPHA;break;case ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(n[u]);break;case ae.TEXT_COMPACTION_MODE_LATCH:l=xt.ALPHA;break}break}g!==""&&i.append(g),u++}}static byteCompaction(e,n,r,i,l){let o=new Va,u=0,h=0,g=!1;switch(e){case ae.BYTE_COMPACTION_MODE_LATCH:let b=new Int32Array(6),S=n[i++];for(;i<n[0]&&!g;)switch(b[u++]=S,h=900*h+S,S=n[i++],S){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:i--,g=!0;break;default:if(u%5===0&&u>0){for(let k=0;k<6;++k)o.write(Number(zt(h)>>zt(8*(5-k))));h=0,u=0}break}i===n[0]&&S<ae.TEXT_COMPACTION_MODE_LATCH&&(b[u++]=S);for(let k=0;k<u;k++)o.write(b[k]);break;case ae.BYTE_COMPACTION_MODE_LATCH_6:for(;i<n[0]&&!g;){let k=n[i++];if(k<ae.TEXT_COMPACTION_MODE_LATCH)u++,h=900*h+k;else switch(k){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.NUMERIC_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:i--,g=!0;break}if(u%5===0&&u>0){for(let R=0;R<6;++R)o.write(Number(zt(h)>>zt(8*(5-R))));h=0,u=0}}break}return l.append(Ue.decode(o.toByteArray(),r)),i}static numericCompaction(e,n,r){let i=0,l=!1,o=new Int32Array(ae.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!l;){let u=e[n++];if(n===e[0]&&(l=!0),u<ae.TEXT_COMPACTION_MODE_LATCH)o[i]=u,i++;else switch(u){case ae.TEXT_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH:case ae.BYTE_COMPACTION_MODE_LATCH_6:case ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ae.MACRO_PDF417_TERMINATOR:n--,l=!0;break}(i%ae.MAX_NUMERIC_CODEWORDS===0||u===ae.NUMERIC_COMPACTION_MODE_LATCH||l)&&i>0&&(r.append(ae.decodeBase900toBase10(o,i)),i=0)}return n}static decodeBase900toBase10(e,n){let r=zt(0);for(let l=0;l<n;l++)r+=ae.EXP900[n-l-1]*zt(e[l]);let i=r.toString();if(i.charAt(0)!=="1")throw new X;return i.substring(1)}}ae.TEXT_COMPACTION_MODE_LATCH=900,ae.BYTE_COMPACTION_MODE_LATCH=901,ae.NUMERIC_COMPACTION_MODE_LATCH=902,ae.BYTE_COMPACTION_MODE_LATCH_6=924,ae.ECI_USER_DEFINED=925,ae.ECI_GENERAL_PURPOSE=926,ae.ECI_CHARSET=927,ae.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ae.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ae.MACRO_PDF417_TERMINATOR=922,ae.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ae.MAX_NUMERIC_CODEWORDS=15,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ae.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ae.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ae.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ae.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ae.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ae.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ae.PL=25,ae.LL=27,ae.AS=27,ae.ML=28,ae.AL=28,ae.PS=29,ae.PAL=29,ae.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ae.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ae.EXP900=Ls()?os():[],ae.NUMBER_OF_SEQUENCE_CODEWORDS=2;class nt{constructor(){}static decode(e,n,r,i,l,o,u){let h=new Wr(e,n,r,i,l),g=null,b=null,S;for(let L=!0;;L=!1){if(n!=null&&(g=nt.getRowIndicatorColumn(e,h,n,!0,o,u)),i!=null&&(b=nt.getRowIndicatorColumn(e,h,i,!1,o,u)),S=nt.merge(g,b),S==null)throw B.getNotFoundInstance();let W=S.getBoundingBox();if(L&&W!=null&&(W.getMinY()<h.getMinY()||W.getMaxY()>h.getMaxY()))h=W;else break}S.setBoundingBox(h);let k=S.getBarcodeColumnCount()+1;S.setDetectionResultColumn(0,g),S.setDetectionResultColumn(k,b);let R=g!=null;for(let L=1;L<=k;L++){let W=R?L:k-L;if(S.getDetectionResultColumn(W)!==void 0)continue;let K;W===0||W===k?K=new Ga(h,W===0):K=new cr(h),S.setDetectionResultColumn(W,K);let se=-1,Se=se;for(let ke=h.getMinY();ke<=h.getMaxY();ke++){if(se=nt.getStartColumn(S,W,ke,R),se<0||se>h.getMaxX()){if(Se===-1)continue;se=Se}let ve=nt.detectCodeword(e,h.getMinX(),h.getMaxX(),R,se,ke,o,u);ve!=null&&(K.setCodeword(ke,ve),Se=se,o=Math.min(o,ve.getWidth()),u=Math.max(u,ve.getWidth()))}}return nt.createDecoderResult(S)}static merge(e,n){if(e==null&&n==null)return null;let r=nt.getBarcodeMetadata(e,n);if(r==null)return null;let i=Wr.merge(nt.adjustBoundingBox(e),nt.adjustBoundingBox(n));return new Bs(r,i)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let r=nt.getMax(n),i=0;for(let u of n)if(i+=r-u,u>0)break;let l=e.getCodewords();for(let u=0;i>0&&l[u]==null;u++)i--;let o=0;for(let u=n.length-1;u>=0&&(o+=r-n[u],!(n[u]>0));u--);for(let u=l.length-1;o>0&&l[u]==null;u--)o--;return e.getBoundingBox().addMissingRows(i,o,e.isLeft())}static getMax(e){let n=-1;for(let r of e)n=Math.max(n,r);return n}static getBarcodeMetadata(e,n){let r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let i;return n==null||(i=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r}static getRowIndicatorColumn(e,n,r,i,l,o){let u=new Ga(n,i);for(let h=0;h<2;h++){let g=h===0?1:-1,b=Math.trunc(Math.trunc(r.getX()));for(let S=Math.trunc(Math.trunc(r.getY()));S<=n.getMaxY()&&S>=n.getMinY();S+=g){let k=nt.detectCodeword(e,0,e.getWidth(),i,b,S,l,o);k!=null&&(u.setCodeword(S,k),i?b=k.getStartX():b=k.getEndX())}}return u}static adjustCodewordCount(e,n){let r=n[0][1],i=r.getValue(),l=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-nt.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(l<1||l>Qe.MAX_CODEWORDS_IN_BARCODE)throw B.getNotFoundInstance();r.setValue(l)}else i[0]!==l&&r.setValue(l)}static createDecoderResult(e){let n=nt.createBarcodeMatrix(e);nt.adjustCodewordCount(e,n);let r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),l=[],o=new Array;for(let h=0;h<e.getBarcodeRowCount();h++)for(let g=0;g<e.getBarcodeColumnCount();g++){let b=n[h][g+1].getValue(),S=h*e.getBarcodeColumnCount()+g;b.length===0?r.push(S):b.length===1?i[S]=b[0]:(o.push(S),l.push(b))}let u=new Array(l.length);for(let h=0;h<u.length;h++)u[h]=l[h];return nt.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Qe.toIntArray(r),Qe.toIntArray(o),u)}static createDecoderResultFromAmbiguousValues(e,n,r,i,l){let o=new Int32Array(i.length),u=100;for(;u-- >0;){for(let h=0;h<o.length;h++)n[i[h]]=l[h][o[h]];try{return nt.decodeCodewords(n,e,r)}catch(h){if(!(h instanceof V))throw h}if(o.length===0)throw V.getChecksumInstance();for(let h=0;h<o.length;h++)if(o[h]<l[h].length-1){o[h]++;break}else if(o[h]=0,h===o.length-1)throw V.getChecksumInstance()}throw V.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let i=0;i<n.length;i++)for(let l=0;l<n[i].length;l++)n[i][l]=new jr;let r=0;for(let i of e.getDetectionResultColumns()){if(i!=null){for(let l of i.getCodewords())if(l!=null){let o=l.getRowNumber();if(o>=0){if(o>=n.length)continue;n[o][r].setValue(l.getValue())}}}r++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,r,i){let l=i?1:-1,o=null;if(nt.isValidBarcodeColumn(e,n-l)&&(o=e.getDetectionResultColumn(n-l).getCodeword(r)),o!=null)return i?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(n).getCodewordNearby(r),o!=null)return i?o.getStartX():o.getEndX();if(nt.isValidBarcodeColumn(e,n-l)&&(o=e.getDetectionResultColumn(n-l).getCodewordNearby(r)),o!=null)return i?o.getEndX():o.getStartX();let u=0;for(;nt.isValidBarcodeColumn(e,n-l);){n-=l;for(let h of e.getDetectionResultColumn(n).getCodewords())if(h!=null)return(i?h.getEndX():h.getStartX())+l*u*(h.getEndX()-h.getStartX());u++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,r,i,l,o,u,h){l=nt.adjustCodewordStartColumn(e,n,r,i,l,o);let g=nt.getModuleBitCount(e,n,r,i,l,o);if(g==null)return null;let b,S=ut.sum(g);if(i)b=l+S;else{for(let L=0;L<g.length/2;L++){let W=g[L];g[L]=g[g.length-1-L],g[g.length-1-L]=W}b=l,l=b-S}if(!nt.checkCodewordSkew(S,u,h))return null;let k=sn.getDecodedValue(g),R=Qe.getCodeword(k);return R===-1?null:new Ur(l,b,nt.getCodewordBucketNumber(k),R)}static getModuleBitCount(e,n,r,i,l,o){let u=l,h=new Int32Array(8),g=0,b=i?1:-1,S=i;for(;(i?u<r:u>=n)&&g<h.length;)e.get(u,o)===S?(h[g]++,u+=b):(g++,S=!S);return g===h.length||u===(i?r:n)&&g===h.length-1?h:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,r,i,l,o){let u=l,h=i?-1:1;for(let g=0;g<2;g++){for(;(i?u>=n:u<r)&&i===e.get(u,o);){if(Math.abs(l-u)>nt.CODEWORD_SKEW_SIZE)return l;u+=h}h=-h,i=!i}return u}static checkCodewordSkew(e,n,r){return n-nt.CODEWORD_SKEW_SIZE<=e&&e<=r+nt.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,r){if(e.length===0)throw X.getFormatInstance();let i=1<<n+1,l=nt.correctErrors(e,r,i);nt.verifyCodewordCount(e,i);let o=ae.decode(e,""+n);return o.setErrorsCorrected(l),o.setErasures(r.length),o}static correctErrors(e,n,r){if(n!=null&&n.length>r/2+nt.MAX_ERRORS||r<0||r>nt.MAX_EC_CODEWORDS)throw V.getChecksumInstance();return nt.errorCorrection.decode(e,r,n)}static verifyCodewordCount(e,n){if(e.length<4)throw X.getFormatInstance();let r=e[0];if(r>e.length)throw X.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw X.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),r=0,i=n.length-1;for(;!((e&1)!==r&&(r=e&1,i--,i<0));)n[i]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return nt.getCodewordBucketNumber(nt.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new yr;for(let r=0;r<e.length;r++){n.format("Row %2d: ",r);for(let i=0;i<e[r].length;i++){let l=e[r][i];l.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}n.format("%n")}return n.toString()}}nt.CODEWORD_SKEW_SIZE=2,nt.MAX_ERRORS=3,nt.MAX_EC_CODEWORDS=512,nt.errorCorrection=new Ji;class an{decode(e,n=null){let r=an.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw B.getNotFoundInstance();return r[0]}decodeMultiple(e,n=null){try{return an.decode(e,n,!0)}catch(r){throw r instanceof X||r instanceof V?B.getNotFoundInstance():r}}static decode(e,n,r){const i=new Array,l=et.detectMultiple(e,n,r);for(const o of l.getPoints()){const u=nt.decode(l.getBits(),o[4],o[5],o[6],o[7],an.getMinCodewordWidth(o),an.getMaxCodewordWidth(o)),h=new _e(u.getText(),u.getRawBytes(),void 0,o,he.PDF_417);h.putMetadata(Me.ERROR_CORRECTION_LEVEL,u.getECLevel());const g=u.getOther();g!=null&&h.putMetadata(Me.PDF417_EXTRA_METADATA,g),i.push(h)}return i.map(o=>o)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?ie.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(an.getMaxWidth(e[0],e[4]),an.getMaxWidth(e[6],e[2])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN),Math.max(an.getMaxWidth(e[1],e[5]),an.getMaxWidth(e[7],e[3])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(an.getMinWidth(e[0],e[4]),an.getMinWidth(e[6],e[2])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN),Math.min(an.getMinWidth(e[1],e[5]),an.getMinWidth(e[7],e[3])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN)))}reset(){}}class cs extends N{}cs.kind="ReaderException";class fi{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!v(e)&&e.get(de.TRY_HARDER)===!0,r=v(e)?null:e.get(de.POSSIBLE_FORMATS),i=new Array;if(!v(r)){const l=r.some(o=>o===he.UPC_A||o===he.UPC_E||o===he.EAN_13||o===he.EAN_8||o===he.CODABAR||o===he.CODE_39||o===he.CODE_93||o===he.CODE_128||o===he.ITF||o===he.RSS_14||o===he.RSS_EXPANDED);l&&!n&&i.push(new ss(e,this.verbose)),r.includes(he.QR_CODE)&&i.push(new mn),r.includes(he.DATA_MATRIX)&&i.push(new Kn),r.includes(he.AZTEC)&&i.push(new Ir),r.includes(he.PDF_417)&&i.push(new an),l&&n&&i.push(new ss(e,this.verbose))}i.length===0&&(n||i.push(new ss(e,this.verbose)),i.push(new mn),i.push(new Kn),i.push(new Ir),i.push(new an),n&&i.push(new ss(e,this.verbose))),this.readers=i}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new cs("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(r){if(r instanceof cs)continue}throw new B("No MultiFormat Readers were able to detect the code.")}}class Ws extends Ie{constructor(e=null,n=500){const r=new fi;r.setHints(e),super(r,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class xi extends Ie{constructor(e=500){super(new an,e)}}class Xa extends Ie{constructor(e=500){super(new mn,e)}}var ta;(function(E){E[E.ERROR_CORRECTION=0]="ERROR_CORRECTION",E[E.CHARACTER_SET=1]="CHARACTER_SET",E[E.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",E[E.MIN_SIZE=3]="MIN_SIZE",E[E.MAX_SIZE=4]="MAX_SIZE",E[E.MARGIN=5]="MARGIN",E[E.PDF417_COMPACT=6]="PDF417_COMPACT",E[E.PDF417_COMPACTION=7]="PDF417_COMPACTION",E[E.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",E[E.AZTEC_LAYERS=9]="AZTEC_LAYERS",E[E.QR_VERSION=10]="QR_VERSION"})(ta||(ta={}));var Yt=ta;class na{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Je(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let r=n[n.length-1];const i=this.field;for(let l=n.length;l<=e;l++){const o=r.multiply(new Je(i,Int32Array.from([1,i.exp(l-1+i.getGeneratorBase())])));n.push(o),r=o}}return n[e]}encode(e,n){if(n===0)throw new j("No error correction bytes");const r=e.length-n;if(r<=0)throw new j("No data bytes provided");const i=this.buildGenerator(n),l=new Int32Array(r);Z.arraycopy(e,0,l,0,r);let o=new Je(this.field,l);o=o.multiplyByMonomial(n,1);const h=o.divide(i)[1].getCoefficients(),g=n-h.length;for(let b=0;b<g;b++)e[r+b]=0;Z.arraycopy(h,0,e,r+g,h.length)}}class Tt{constructor(){}static applyMaskPenaltyRule1(e){return Tt.applyMaskPenaltyRule1Internal(e,!0)+Tt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const r=e.getArray(),i=e.getWidth(),l=e.getHeight();for(let o=0;o<l-1;o++){const u=r[o];for(let h=0;h<i-1;h++){const g=u[h];g===u[h+1]&&g===r[o+1][h]&&g===r[o+1][h+1]&&n++}}return Tt.N2*n}static applyMaskPenaltyRule3(e){let n=0;const r=e.getArray(),i=e.getWidth(),l=e.getHeight();for(let o=0;o<l;o++)for(let u=0;u<i;u++){const h=r[o];u+6<i&&h[u]===1&&h[u+1]===0&&h[u+2]===1&&h[u+3]===1&&h[u+4]===1&&h[u+5]===0&&h[u+6]===1&&(Tt.isWhiteHorizontal(h,u-4,u)||Tt.isWhiteHorizontal(h,u+7,u+11))&&n++,o+6<l&&r[o][u]===1&&r[o+1][u]===0&&r[o+2][u]===1&&r[o+3][u]===1&&r[o+4][u]===1&&r[o+5][u]===0&&r[o+6][u]===1&&(Tt.isWhiteVertical(r,u,o-4,o)||Tt.isWhiteVertical(r,u,o+7,o+11))&&n++}return n*Tt.N3}static isWhiteHorizontal(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let i=n;i<r;i++)if(e[i]===1)return!1;return!0}static isWhiteVertical(e,n,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(let l=r;l<i;l++)if(e[l][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const r=e.getArray(),i=e.getWidth(),l=e.getHeight();for(let h=0;h<l;h++){const g=r[h];for(let b=0;b<i;b++)g[b]===1&&n++}const o=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-o)*10/o)*Tt.N4}static getDataMaskBit(e,n,r){let i,l;switch(e){case 0:i=r+n&1;break;case 1:i=r&1;break;case 2:i=n%3;break;case 3:i=(r+n)%3;break;case 4:i=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:l=r*n,i=(l&1)+l%3;break;case 6:l=r*n,i=(l&1)+l%3&1;break;case 7:l=r*n,i=l%3+(r+n&1)&1;break;default:throw new j("Invalid mask pattern: "+e)}return i===0}static applyMaskPenaltyRule1Internal(e,n){let r=0;const i=n?e.getHeight():e.getWidth(),l=n?e.getWidth():e.getHeight(),o=e.getArray();for(let u=0;u<i;u++){let h=0,g=-1;for(let b=0;b<l;b++){const S=n?o[u][b]:o[b][u];S===g?h++:(h>=5&&(r+=Tt.N1+(h-5)),h=1,g=S)}h>=5&&(r+=Tt.N1+(h-5))}return r}}Tt.N1=3,Tt.N2=3,Tt.N3=40,Tt.N4=10;class gi{constructor(e,n){this.width=e,this.height=n;const r=new Array(n);for(let i=0;i!==n;i++)r[i]=new Uint8Array(e);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,r){this.bytes[n][e]=r}setBoolean(e,n,r){this.bytes[n][e]=r?1:0}clear(e){for(const n of this.bytes)fe.fill(n,e)}equals(e){if(!(e instanceof gi))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let r=0,i=this.height;r<i;++r){const l=this.bytes[r],o=n.bytes[r];for(let u=0,h=this.width;u<h;++u)if(l[u]!==o[u])return!1}return!0}toString(){const e=new Y;for(let n=0,r=this.height;n<r;++n){const i=this.bytes[n];for(let l=0,o=this.width;l<o;++l)switch(i[l]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class zr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Y;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<zr.NUM_MASK_PATTERNS}}zr.NUM_MASK_PATTERNS=8;class Nt extends N{}Nt.kind="WriterException";class Ye{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,r,i,l){Ye.clearMatrix(l),Ye.embedBasicPatterns(r,l),Ye.embedTypeInfo(n,i,l),Ye.maybeEmbedVersionInfo(r,l),Ye.embedDataBits(e,i,l)}static embedBasicPatterns(e,n){Ye.embedPositionDetectionPatternsAndSeparators(n),Ye.embedDarkDotAtLeftBottomCorner(n),Ye.maybeEmbedPositionAdjustmentPatterns(e,n),Ye.embedTimingPatterns(n)}static embedTypeInfo(e,n,r){const i=new ne;Ye.makeTypeInfoBits(e,n,i);for(let l=0,o=i.getSize();l<o;++l){const u=i.get(i.getSize()-1-l),h=Ye.TYPE_INFO_COORDINATES[l],g=h[0],b=h[1];if(r.setBoolean(g,b,u),l<8){const S=r.getWidth()-l-1;r.setBoolean(S,8,u)}else{const k=r.getHeight()-7+(l-8);r.setBoolean(8,k,u)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const r=new ne;Ye.makeVersionInfoBits(e,r);let i=17;for(let l=0;l<6;++l)for(let o=0;o<3;++o){const u=r.get(i);i--,n.setBoolean(l,n.getHeight()-11+o,u),n.setBoolean(n.getHeight()-11+o,l,u)}}static embedDataBits(e,n,r){let i=0,l=-1,o=r.getWidth()-1,u=r.getHeight()-1;for(;o>0;){for(o===6&&(o-=1);u>=0&&u<r.getHeight();){for(let h=0;h<2;++h){const g=o-h;if(!Ye.isEmpty(r.get(g,u)))continue;let b;i<e.getSize()?(b=e.get(i),++i):b=!1,n!==255&&Tt.getDataMaskBit(n,g,u)&&(b=!b),r.setBoolean(g,u,b)}u+=l}l=-l,u+=l,o-=2}if(i!==e.getSize())throw new Nt("Not all bits consumed: "+i+"/"+e.getSize())}static findMSBSet(e){return 32-ie.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new j("0 polynomial");const r=Ye.findMSBSet(n);for(e<<=r-1;Ye.findMSBSet(e)>=r;)e^=n<<Ye.findMSBSet(e)-r;return e}static makeTypeInfoBits(e,n,r){if(!zr.isValidMaskPattern(n))throw new Nt("Invalid mask pattern");const i=e.getBits()<<3|n;r.appendBits(i,5);const l=Ye.calculateBCHCode(i,Ye.TYPE_INFO_POLY);r.appendBits(l,10);const o=new ne;if(o.appendBits(Ye.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new Nt("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const r=Ye.calculateBCHCode(e.getVersionNumber(),Ye.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new Nt("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const r=(n+1)%2;Ye.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),Ye.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Nt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,r){for(let i=0;i<8;++i){if(!Ye.isEmpty(r.get(e+i,n)))throw new Nt;r.setNumber(e+i,n,0)}}static embedVerticalSeparationPattern(e,n,r){for(let i=0;i<7;++i){if(!Ye.isEmpty(r.get(e,n+i)))throw new Nt;r.setNumber(e,n+i,0)}}static embedPositionAdjustmentPattern(e,n,r){for(let i=0;i<5;++i){const l=Ye.POSITION_ADJUSTMENT_PATTERN[i];for(let o=0;o<5;++o)r.setNumber(e+o,n+i,l[o])}}static embedPositionDetectionPattern(e,n,r){for(let i=0;i<7;++i){const l=Ye.POSITION_DETECTION_PATTERN[i];for(let o=0;o<7;++o)r.setNumber(e+o,n+i,l[o])}}static embedPositionDetectionPatternsAndSeparators(e){const n=Ye.POSITION_DETECTION_PATTERN[0].length;Ye.embedPositionDetectionPattern(0,0,e),Ye.embedPositionDetectionPattern(e.getWidth()-n,0,e),Ye.embedPositionDetectionPattern(0,e.getWidth()-n,e);const r=8;Ye.embedHorizontalSeparationPattern(0,r-1,e),Ye.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),Ye.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);const i=7;Ye.embedVerticalSeparationPattern(i,0,e),Ye.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),Ye.embedVerticalSeparationPattern(i,e.getHeight()-i,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const r=e.getVersionNumber()-1,i=Ye.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let l=0,o=i.length;l!==o;l++){const u=i[l];if(u>=0)for(let h=0;h!==o;h++){const g=i[h];g>=0&&Ye.isEmpty(n.get(g,u))&&Ye.embedPositionAdjustmentPattern(g-2,u-2,n)}}}}Ye.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ye.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ye.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ye.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ye.VERSION_INFO_POLY=7973,Ye.TYPE_INFO_POLY=1335,Ye.TYPE_INFO_MASK_PATTERN=21522;class eo{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ct{constructor(){}static calculateMaskPenalty(e){return Tt.applyMaskPenaltyRule1(e)+Tt.applyMaskPenaltyRule2(e)+Tt.applyMaskPenaltyRule3(e)+Tt.applyMaskPenaltyRule4(e)}static encode(e,n,r=null){let i=Ct.DEFAULT_BYTE_MODE_ENCODING;const l=r!==null&&r.get(Yt.CHARACTER_SET)!==void 0;l&&(i=r.get(Yt.CHARACTER_SET).toString());const o=this.chooseMode(e,i),u=new ne;if(o===Ze.BYTE&&(l||Ct.DEFAULT_BYTE_MODE_ENCODING!==i)){const ke=ue.getCharacterSetECIByName(i);ke!==void 0&&this.appendECI(ke,u)}this.appendModeInfo(o,u);const h=new ne;this.appendBytes(e,o,h,i);let g;if(r!==null&&r.get(Yt.QR_VERSION)!==void 0){const ke=Number.parseInt(r.get(Yt.QR_VERSION).toString(),10);g=Xe.getVersionForNumber(ke);const ve=this.calculateBitsNeeded(o,u,h,g);if(!this.willFit(ve,g,n))throw new Nt("Data too big for requested version")}else g=this.recommendVersion(n,o,u,h);const b=new ne;b.appendBitArray(u);const S=o===Ze.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(S,g,o,b),b.appendBitArray(h);const k=g.getECBlocksForLevel(n),R=g.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(R,b);const L=this.interleaveWithECBytes(b,g.getTotalCodewords(),R,k.getNumBlocks()),W=new zr;W.setECLevel(n),W.setMode(o),W.setVersion(g);const K=g.getDimensionForVersion(),se=new gi(K,K),Se=this.chooseMaskPattern(L,n,g,se);return W.setMaskPattern(Se),Ye.buildMatrix(L,n,g,Se,se),W.setMatrix(se),W}static recommendVersion(e,n,r,i){const l=this.calculateBitsNeeded(n,r,i,Xe.getVersionForNumber(1)),o=this.chooseVersion(l,e),u=this.calculateBitsNeeded(n,r,i,o);return this.chooseVersion(u,e)}static calculateBitsNeeded(e,n,r,i){return n.getSize()+e.getCharacterCountBits(i)+r.getSize()}static getAlphanumericCode(e){return e<Ct.ALPHANUMERIC_TABLE.length?Ct.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(ue.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Ze.KANJI;let r=!1,i=!1;for(let l=0,o=e.length;l<o;++l){const u=e.charAt(l);if(Ct.isDigit(u))r=!0;else if(this.getAlphanumericCode(u.charCodeAt(0))!==-1)i=!0;else return Ze.BYTE}return i?Ze.ALPHANUMERIC:r?Ze.NUMERIC:Ze.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=Ue.encode(e,ue.SJIS)}catch{return!1}const r=n.length;if(r%2!==0)return!1;for(let i=0;i<r;i+=2){const l=n[i]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(e,n,r,i){let l=Number.MAX_SAFE_INTEGER,o=-1;for(let u=0;u<zr.NUM_MASK_PATTERNS;u++){Ye.buildMatrix(e,n,r,u,i);let h=this.calculateMaskPenalty(i);h<l&&(l=h,o=u)}return o}static chooseVersion(e,n){for(let r=1;r<=40;r++){const i=Xe.getVersionForNumber(r);if(Ct.willFit(e,i,n))return i}throw new Nt("Data too big")}static willFit(e,n,r){const i=n.getTotalCodewords(),o=n.getECBlocksForLevel(r).getTotalECCodewords(),u=i-o,h=(e+7)/8;return u>=h}static terminateBits(e,n){const r=e*8;if(n.getSize()>r)throw new Nt("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(let o=0;o<4&&n.getSize()<r;++o)n.appendBit(!1);const i=n.getSize()&7;if(i>0)for(let o=i;o<8;o++)n.appendBit(!1);const l=e-n.getSizeInBytes();for(let o=0;o<l;++o)n.appendBits((o&1)===0?236:17,8);if(n.getSize()!==r)throw new Nt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,r,i,l,o){if(i>=r)throw new Nt("Block ID too large");const u=e%r,h=r-u,g=Math.floor(e/r),b=g+1,S=Math.floor(n/r),k=S+1,R=g-S,L=b-k;if(R!==L)throw new Nt("EC bytes mismatch");if(r!==h+u)throw new Nt("RS blocks mismatch");if(e!==(S+R)*h+(k+L)*u)throw new Nt("Total bytes mismatch");i<h?(l[0]=S,o[0]=R):(l[0]=k,o[0]=L)}static interleaveWithECBytes(e,n,r,i){if(e.getSizeInBytes()!==r)throw new Nt("Number of bits and data bytes does not match");let l=0,o=0,u=0;const h=new Array;for(let b=0;b<i;++b){const S=new Int32Array(1),k=new Int32Array(1);Ct.getNumDataBytesAndNumECBytesForBlockID(n,r,i,b,S,k);const R=S[0],L=new Uint8Array(R);e.toBytes(8*l,L,0,R);const W=Ct.generateECBytes(L,k[0]);h.push(new eo(L,W)),o=Math.max(o,R),u=Math.max(u,W.length),l+=S[0]}if(r!==l)throw new Nt("Data bytes does not match offset");const g=new ne;for(let b=0;b<o;++b)for(const S of h){const k=S.getDataBytes();b<k.length&&g.appendBits(k[b],8)}for(let b=0;b<u;++b)for(const S of h){const k=S.getErrorCorrectionBytes();b<k.length&&g.appendBits(k[b],8)}if(n!==g.getSizeInBytes())throw new Nt("Interleaving error: "+n+" and "+g.getSizeInBytes()+" differ.");return g}static generateECBytes(e,n){const r=e.length,i=new Int32Array(r+n);for(let o=0;o<r;o++)i[o]=e[o]&255;new na(at.QR_CODE_FIELD_256).encode(i,n);const l=new Uint8Array(n);for(let o=0;o<n;o++)l[o]=i[r+o];return l}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,r,i){const l=r.getCharacterCountBits(n);if(e>=1<<l)throw new Nt(e+" is bigger than "+((1<<l)-1));i.appendBits(e,l)}static appendBytes(e,n,r,i){switch(n){case Ze.NUMERIC:Ct.appendNumericBytes(e,r);break;case Ze.ALPHANUMERIC:Ct.appendAlphanumericBytes(e,r);break;case Ze.BYTE:Ct.append8BitBytes(e,r,i);break;case Ze.KANJI:Ct.appendKanjiBytes(e,r);break;default:throw new Nt("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=Ct.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const r=e.length;let i=0;for(;i<r;){const l=Ct.getDigit(e.charAt(i));if(i+2<r){const o=Ct.getDigit(e.charAt(i+1)),u=Ct.getDigit(e.charAt(i+2));n.appendBits(l*100+o*10+u,10),i+=3}else if(i+1<r){const o=Ct.getDigit(e.charAt(i+1));n.appendBits(l*10+o,7),i+=2}else n.appendBits(l,4),i++}}static appendAlphanumericBytes(e,n){const r=e.length;let i=0;for(;i<r;){const l=Ct.getAlphanumericCode(e.charCodeAt(i));if(l===-1)throw new Nt;if(i+1<r){const o=Ct.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new Nt;n.appendBits(l*45+o,11),i+=2}else n.appendBits(l,6),i++}}static append8BitBytes(e,n,r){let i;try{i=Ue.encode(e,r)}catch(l){throw new Nt(l)}for(let l=0,o=i.length;l!==o;l++){const u=i[l];n.appendBits(u,8)}}static appendKanjiBytes(e,n){let r;try{r=Ue.encode(e,ue.SJIS)}catch(l){throw new Nt(l)}const i=r.length;for(let l=0;l<i;l+=2){const o=r[l]&255,u=r[l+1]&255,h=o<<8&4294967295|u;let g=-1;if(h>=33088&&h<=40956?g=h-33088:h>=57408&&h<=60351&&(g=h-49472),g===-1)throw new Nt("Invalid byte sequence");const b=(g>>8)*192+(g&255);n.appendBits(b,13)}}static appendECI(e,n){n.appendBits(Ze.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}Ct.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ct.DEFAULT_BYTE_MODE_ENCODING=ue.UTF8.getName();class Hr{write(e,n,r,i=null){if(e.length===0)throw new j("Found empty contents");if(n<0||r<0)throw new j("Requested dimensions are too small: "+n+"x"+r);let l=bt.L,o=Hr.QUIET_ZONE_SIZE;i!==null&&(i.get(Yt.ERROR_CORRECTION)!==void 0&&(l=bt.fromString(i.get(Yt.ERROR_CORRECTION).toString())),i.get(Yt.MARGIN)!==void 0&&(o=Number.parseInt(i.get(Yt.MARGIN).toString(),10)));const u=Ct.encode(e,l,i);return this.renderResult(u,n,r,o)}writeToDom(e,n,r,i,l=null){typeof e=="string"&&(e=document.querySelector(e));const o=this.write(n,r,i,l);e&&e.appendChild(o)}renderResult(e,n,r,i){const l=e.getMatrix();if(l===null)throw new vn;const o=l.getWidth(),u=l.getHeight(),h=o+i*2,g=u+i*2,b=Math.max(n,h),S=Math.max(r,g),k=Math.min(Math.floor(b/h),Math.floor(S/g)),R=Math.floor((b-o*k)/2),L=Math.floor((S-u*k)/2),W=this.createSVGElement(b,S);for(let K=0,se=L;K<u;K++,se+=k)for(let Se=0,ke=R;Se<o;Se++,ke+=k)if(l.get(Se,K)===1){const ve=this.createSvgRectElement(ke,se,k,k);W.appendChild(ve)}return W}createSVGElement(e,n){const r=document.createElementNS(Hr.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",n.toString()),r}createSvgRectElement(e,n,r,i){const l=document.createElementNS(Hr.SVG_NS,"rect");return l.setAttributeNS(null,"x",e.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",i.toString()),l.setAttributeNS(null,"fill","#000000"),l}}Hr.QUIET_ZONE_SIZE=4,Hr.SVG_NS="http://www.w3.org/2000/svg";class us{encode(e,n,r,i,l){if(e.length===0)throw new j("Found empty contents");if(n!==he.QR_CODE)throw new j("Can only encode QR_CODE, but got "+n);if(r<0||i<0)throw new j(`Requested dimensions are too small: ${r}x${i}`);let o=bt.L,u=us.QUIET_ZONE_SIZE;l!==null&&(l.get(Yt.ERROR_CORRECTION)!==void 0&&(o=bt.fromString(l.get(Yt.ERROR_CORRECTION).toString())),l.get(Yt.MARGIN)!==void 0&&(u=Number.parseInt(l.get(Yt.MARGIN).toString(),10)));const h=Ct.encode(e,o,l);return us.renderResult(h,r,i,u)}static renderResult(e,n,r,i){const l=e.getMatrix();if(l===null)throw new vn;const o=l.getWidth(),u=l.getHeight(),h=o+i*2,g=u+i*2,b=Math.max(n,h),S=Math.max(r,g),k=Math.min(Math.floor(b/h),Math.floor(S/g)),R=Math.floor((b-o*k)/2),L=Math.floor((S-u*k)/2),W=new Ce(b,S);for(let K=0,se=L;K<u;K++,se+=k)for(let Se=0,ke=R;Se<o;Se++,ke+=k)l.get(Se,K)===1&&W.setRegion(ke,se,k,k);return W}}us.QUIET_ZONE_SIZE=4;class to{encode(e,n,r,i,l){let o;if(n===he.QR_CODE)o=new us;else throw new j("No encoder available for format "+n);return o.encode(e,n,r,i,l)}}class ur extends ce{constructor(e,n,r,i,l,o,u,h){if(super(o,u),this.yuvData=e,this.dataWidth=n,this.dataHeight=r,this.left=i,this.top=l,i+o>n||l+u>r)throw new j("Crop rectangle does not fit within image data.");h&&this.reverseHorizontal(o,u)}getRow(e,n){if(e<0||e>=this.getHeight())throw new j("Requested row is outside the image: "+e);const r=this.getWidth();(n==null||n.length<r)&&(n=new Uint8ClampedArray(r));const i=(e+this.top)*this.dataWidth+this.left;return Z.arraycopy(this.yuvData,i,n,0,r),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const r=e*n,i=new Uint8ClampedArray(r);let l=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Z.arraycopy(this.yuvData,l,i,0,r),i;for(let o=0;o<n;o++){const u=o*e;Z.arraycopy(this.yuvData,l,i,u,e),l+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,n,r,i){return new ur(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,r,i,!1)}renderThumbnail(){const e=this.getWidth()/ur.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/ur.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*n),i=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let o=0;o<n;o++){const u=o*e;for(let h=0;h<e;h++){const g=i[l+h*ur.THUMBNAIL_SCALE_FACTOR]&255;r[u+h]=4278190080|g*65793}l+=this.dataWidth*ur.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/ur.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/ur.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const r=this.yuvData;for(let i=0,l=this.top*this.dataWidth+this.left;i<n;i++,l+=this.dataWidth){const o=l+e/2;for(let u=l,h=l+e-1;u<o;u++,h--){const g=r[u];r[u]=r[h],r[h]=g}}}invert(){return new q(this)}}ur.THUMBNAIL_SCALE_FACTOR=2;class Us extends ce{constructor(e,n,r,i,l,o,u){if(super(n,r),this.dataWidth=i,this.dataHeight=l,this.left=o,this.top=u,e.BYTES_PER_ELEMENT===4){const h=n*r,g=new Uint8ClampedArray(h);for(let b=0;b<h;b++){const S=e[b],k=S>>16&255,R=S>>7&510,L=S&255;g[b]=(k+R+L)/4&255}this.luminances=g}else this.luminances=e;if(i===void 0&&(this.dataWidth=n),l===void 0&&(this.dataHeight=r),o===void 0&&(this.left=0),u===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+r>this.dataHeight)throw new j("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new j("Requested row is outside the image: "+e);const r=this.getWidth();(n==null||n.length<r)&&(n=new Uint8ClampedArray(r));const i=(e+this.top)*this.dataWidth+this.left;return Z.arraycopy(this.luminances,i,n,0,r),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const r=e*n,i=new Uint8ClampedArray(r);let l=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return Z.arraycopy(this.luminances,l,i,0,r),i;for(let o=0;o<n;o++){const u=o*e;Z.arraycopy(this.luminances,l,i,u,e),l+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,n,r,i){return new Us(this.luminances,r,i,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new q(this)}}class Za extends ue{static forName(e){return this.getCharacterSetECIByName(e)}}class ra{}ra.ISO_8859_1=ue.ISO8859_1;class Ya{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class sa{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class no{constructor(e){this.previous=e}getPrevious(){return this.previous}}class ds extends no{constructor(e,n,r){super(e),this.value=n,this.bitCount=r}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new ds(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ds(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+ie.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class ia extends ds{constructor(e,n,r){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=r}appendTo(e,n){for(let r=0;r<this.binaryShiftByteCount;r++)(r===0||r===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):r===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+r],8)}addBinaryShift(e,n){return new ia(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ro(E,e,n){return new ia(E,e,n)}function zs(E,e,n){return new ds(E,e,n)}const so=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],_r=0,hs=1,dn=2,Ka=3,Qn=4,qa=new ds(null,0,0),mi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Qa(E){for(let e of E)fe.fill(e,-1);return E[_r][Qn]=0,E[hs][Qn]=0,E[hs][_r]=28,E[Ka][Qn]=0,E[dn][Qn]=0,E[dn][_r]=15,E}const aa=Qa(fe.createInt32Array(6,6));class pn{constructor(e,n,r,i){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=i}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let r=this.bitCount,i=this.token;if(e!==this.mode){let o=mi[this.mode][e];i=zs(i,o&65535,o>>16),r+=o>>16}let l=e===dn?4:5;return i=zs(i,n,l),new pn(i,e,0,r+l)}shiftAndAppend(e,n){let r=this.token,i=this.mode===dn?4:5;return r=zs(r,aa[this.mode][e],i),r=zs(r,n,5),new pn(r,this.mode,0,this.bitCount+i+5)}addBinaryShiftChar(e){let n=this.token,r=this.mode,i=this.bitCount;if(this.mode===Qn||this.mode===dn){let u=mi[r][_r];n=zs(n,u&65535,u>>16),i+=u>>16,r=_r}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new pn(n,r,this.binaryShiftByteCount+1,i+l);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=ro(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new pn(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(mi[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=pn.calculateBinaryShiftCost(e)-pn.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())n.unshift(i);let r=new ne;for(const i of n)i.appendTo(r,e);return r}toString(){return ee.format("%s bits=%d bytes=%d",so[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}pn.INITIAL_STATE=new pn(qa,_r,0,0);function io(E){const e=ee.getCharCode(" "),n=ee.getCharCode("."),r=ee.getCharCode(",");E[_r][e]=1;const i=ee.getCharCode("Z"),l=ee.getCharCode("A");for(let k=l;k<=i;k++)E[_r][k]=k-l+2;E[hs][e]=1;const o=ee.getCharCode("z"),u=ee.getCharCode("a");for(let k=u;k<=o;k++)E[hs][k]=k-u+2;E[dn][e]=1;const h=ee.getCharCode("9"),g=ee.getCharCode("0");for(let k=g;k<=h;k++)E[dn][k]=k-g+2;E[dn][r]=12,E[dn][n]=13;const b=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<b.length;k++)E[Ka][ee.getCharCode(b[k])]=k;const S=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<S.length;k++)ee.getCharCode(S[k])>0&&(E[Qn][ee.getCharCode(S[k])]=k);return E}const la=io(fe.createInt32Array(5,256));class Hs{constructor(e){this.text=e}encode(){const e=ee.getCharCode(" "),n=ee.getCharCode(`
`);let r=sa.singletonList(pn.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let o,u=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case ee.getCharCode("\r"):o=u===n?2:0;break;case ee.getCharCode("."):o=u===e?3:0;break;case ee.getCharCode(","):o=u===e?4:0;break;case ee.getCharCode(":"):o=u===e?5:0;break;default:o=0}o>0?(r=Hs.updateStateListForPair(r,l,o),l++):r=this.updateStateListForChar(r,l)}return sa.min(r,(l,o)=>l.getBitCount()-o.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const r=[];for(let i of e)this.updateStateForChar(i,n,r);return Hs.simplifyStates(r)}updateStateForChar(e,n,r){let i=this.text[n]&255,l=la[e.getMode()][i]>0,o=null;for(let u=0;u<=Qn;u++){let h=la[u][i];if(h>0){if(o==null&&(o=e.endBinaryShift(n)),!l||u===e.getMode()||u===dn){const g=o.latchAndAppend(u,h);r.push(g)}if(!l&&aa[e.getMode()][u]>=0){const g=o.shiftAndAppend(u,h);r.push(g)}}}if(e.getBinaryShiftByteCount()>0||la[e.getMode()][i]===0){let u=e.addBinaryShiftChar(n);r.push(u)}}static updateStateListForPair(e,n,r){const i=[];for(let l of e)this.updateStateForPair(l,n,r,i);return this.simplifyStates(i)}static updateStateForPair(e,n,r,i){let l=e.endBinaryShift(n);if(i.push(l.latchAndAppend(Qn,r)),e.getMode()!==Qn&&i.push(l.shiftAndAppend(Qn,r)),r===3||r===4){let o=l.latchAndAppend(dn,16-r).latchAndAppend(dn,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){let o=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);i.push(o)}}static simplifyStates(e){let n=[];for(const r of e){let i=!0;for(const l of n){if(l.isBetterThanOrEqualTo(r)){i=!1;break}r.isBetterThanOrEqualTo(l)&&(n=n.filter(o=>o!==l))}i&&n.push(r)}return n}}class ht{constructor(){}static encodeBytes(e){return ht.encode(e,ht.DEFAULT_EC_PERCENT,ht.DEFAULT_AZTEC_LAYERS)}static encode(e,n,r){let i=new Hs(e).encode(),l=ie.truncDivision(i.getSize()*n,100)+11,o=i.getSize()+l,u,h,g,b,S;if(r!==ht.DEFAULT_AZTEC_LAYERS){if(u=r<0,h=Math.abs(r),h>(u?ht.MAX_NB_BITS_COMPACT:ht.MAX_NB_BITS))throw new j(ee.format("Illegal value %s for layers",r));g=ht.totalBitsInLayer(h,u),b=ht.WORD_SIZE[h];let ve=g-g%b;if(S=ht.stuffBits(i,b),S.getSize()+l>ve)throw new j("Data to large for user specified layer");if(u&&S.getSize()>b*64)throw new j("Data to large for user specified layer")}else{b=0,S=null;for(let ve=0;;ve++){if(ve>ht.MAX_NB_BITS)throw new j("Data too large for an Aztec code");if(u=ve<=3,h=u?ve+1:ve,g=ht.totalBitsInLayer(h,u),o>g)continue;(S==null||b!==ht.WORD_SIZE[h])&&(b=ht.WORD_SIZE[h],S=ht.stuffBits(i,b));let lt=g-g%b;if(!(u&&S.getSize()>b*64)&&S.getSize()+l<=lt)break}}let k=ht.generateCheckWords(S,g,b),R=S.getSize()/b,L=ht.generateModeMessage(u,h,R),W=(u?11:14)+h*4,K=new Int32Array(W),se;if(u){se=W;for(let ve=0;ve<K.length;ve++)K[ve]=ve}else{se=W+1+2*ie.truncDivision(ie.truncDivision(W,2)-1,15);let ve=ie.truncDivision(W,2),lt=ie.truncDivision(se,2);for(let tt=0;tt<ve;tt++){let Sn=tt+ie.truncDivision(tt,15);K[ve-tt-1]=lt-Sn-1,K[ve+tt]=lt+Sn+1}}let Se=new Ce(se);for(let ve=0,lt=0;ve<h;ve++){let tt=(h-ve)*4+(u?9:12);for(let Sn=0;Sn<tt;Sn++){let Jn=Sn*2;for(let Kt=0;Kt<2;Kt++)k.get(lt+Jn+Kt)&&Se.set(K[ve*2+Kt],K[ve*2+Sn]),k.get(lt+tt*2+Jn+Kt)&&Se.set(K[ve*2+Sn],K[W-1-ve*2-Kt]),k.get(lt+tt*4+Jn+Kt)&&Se.set(K[W-1-ve*2-Kt],K[W-1-ve*2-Sn]),k.get(lt+tt*6+Jn+Kt)&&Se.set(K[W-1-ve*2-Sn],K[ve*2+Kt])}lt+=tt*8}if(ht.drawModeMessage(Se,u,se,L),u)ht.drawBullsEye(Se,ie.truncDivision(se,2),5);else{ht.drawBullsEye(Se,ie.truncDivision(se,2),7);for(let ve=0,lt=0;ve<ie.truncDivision(W,2)-1;ve+=15,lt+=16)for(let tt=ie.truncDivision(se,2)&1;tt<se;tt+=2)Se.set(ie.truncDivision(se,2)-lt,tt),Se.set(ie.truncDivision(se,2)+lt,tt),Se.set(tt,ie.truncDivision(se,2)-lt),Se.set(tt,ie.truncDivision(se,2)+lt)}let ke=new Ya;return ke.setCompact(u),ke.setSize(se),ke.setLayers(h),ke.setCodeWords(R),ke.setMatrix(Se),ke}static drawBullsEye(e,n,r){for(let i=0;i<r;i+=2)for(let l=n-i;l<=n+i;l++)e.set(l,n-i),e.set(l,n+i),e.set(n-i,l),e.set(n+i,l);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)}static generateModeMessage(e,n,r){let i=new ne;return e?(i.appendBits(n-1,2),i.appendBits(r-1,6),i=ht.generateCheckWords(i,28,4)):(i.appendBits(n-1,5),i.appendBits(r-1,11),i=ht.generateCheckWords(i,40,4)),i}static drawModeMessage(e,n,r,i){let l=ie.truncDivision(r,2);if(n)for(let o=0;o<7;o++){let u=l-3+o;i.get(o)&&e.set(u,l-5),i.get(o+7)&&e.set(l+5,u),i.get(20-o)&&e.set(u,l+5),i.get(27-o)&&e.set(l-5,u)}else for(let o=0;o<10;o++){let u=l-5+o+ie.truncDivision(o,5);i.get(o)&&e.set(u,l-7),i.get(o+10)&&e.set(l+7,u),i.get(29-o)&&e.set(u,l+7),i.get(39-o)&&e.set(l-7,u)}}static generateCheckWords(e,n,r){let i=e.getSize()/r,l=new na(ht.getGF(r)),o=ie.truncDivision(n,r),u=ht.bitsToWords(e,r,o);l.encode(u,o-i);let h=n%r,g=new ne;g.appendBits(0,h);for(const b of Array.from(u))g.appendBits(b,r);return g}static bitsToWords(e,n,r){let i=new Int32Array(r),l,o;for(l=0,o=e.getSize()/n;l<o;l++){let u=0;for(let h=0;h<n;h++)u|=e.get(l*n+h)?1<<n-h-1:0;i[l]=u}return i}static getGF(e){switch(e){case 4:return at.AZTEC_PARAM;case 6:return at.AZTEC_DATA_6;case 8:return at.AZTEC_DATA_8;case 10:return at.AZTEC_DATA_10;case 12:return at.AZTEC_DATA_12;default:throw new j("Unsupported word size "+e)}}static stuffBits(e,n){let r=new ne,i=e.getSize(),l=(1<<n)-2;for(let o=0;o<i;o+=n){let u=0;for(let h=0;h<n;h++)(o+h>=i||e.get(o+h))&&(u|=1<<n-1-h);(u&l)===l?(r.appendBits(u&l,n),o--):(u&l)===0?(r.appendBits(u|1,n),o--):r.appendBits(u,n)}return r}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}ht.DEFAULT_EC_PERCENT=33,ht.DEFAULT_AZTEC_LAYERS=0,ht.MAX_NB_BITS=32,ht.MAX_NB_BITS_COMPACT=4,ht.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Gs{encode(e,n,r,i){return this.encodeWithHints(e,n,r,i,null)}encodeWithHints(e,n,r,i,l){let o=ra.ISO_8859_1,u=ht.DEFAULT_EC_PERCENT,h=ht.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(Yt.CHARACTER_SET)&&(o=Za.forName(l.get(Yt.CHARACTER_SET).toString())),l.has(Yt.ERROR_CORRECTION)&&(u=ie.parseInt(l.get(Yt.ERROR_CORRECTION).toString())),l.has(Yt.AZTEC_LAYERS)&&(h=ie.parseInt(l.get(Yt.AZTEC_LAYERS).toString()))),Gs.encodeLayers(e,n,r,i,o,u,h)}static encodeLayers(e,n,r,i,l,o,u){if(n!==he.AZTEC)throw new j("Can only encode AZTEC, but got "+n);let h=ht.encode(ee.getBytes(e,l),o,u);return Gs.renderResult(h,r,i)}static renderResult(e,n,r){let i=e.getMatrix();if(i==null)throw new vn;let l=i.getWidth(),o=i.getHeight(),u=Math.max(n,l),h=Math.max(r,o),g=Math.min(u/l,h/o),b=(u-l*g)/2,S=(h-o*g)/2,k=new Ce(u,h);for(let R=0,L=S;R<o;R++,L+=g)for(let W=0,K=b;W<l;W++,K+=g)i.get(W,R)&&k.setRegion(K,L,g,g);return k}}x.AbstractExpandedDecoder=Xi,x.ArgumentException=P,x.ArithmeticException=sr,x.AztecCode=Ya,x.AztecCodeReader=Ir,x.AztecCodeWriter=Gs,x.AztecDecoder=vt,x.AztecDetector=ns,x.AztecDetectorResult=Ui,x.AztecEncoder=ht,x.AztecHighLevelEncoder=Hs,x.AztecPoint=cn,x.BarcodeFormat=he,x.Binarizer=z,x.BinaryBitmap=$,x.BitArray=ne,x.BitMatrix=Ce,x.BitSource=Ki,x.BrowserAztecCodeReader=Jl,x.BrowserBarcodeReader=Wa,x.BrowserCodeReader=Ie,x.BrowserDatamatrixCodeReader=$l,x.BrowserMultiFormatReader=Ws,x.BrowserPDF417Reader=xi,x.BrowserQRCodeReader=Xa,x.BrowserQRCodeSvgWriter=Hr,x.CharacterSetECI=ue,x.ChecksumException=V,x.Code128Reader=je,x.Code39Reader=Xt,x.DataMatrixDecodedBitStreamParser=Yn,x.DataMatrixReader=Kn,x.DecodeHintType=de,x.DecoderResult=Oe,x.DefaultGridSampler=ai,x.DetectorResult=ts,x.EAN13Reader=Dn,x.EncodeHintType=Yt,x.Exception=N,x.FormatException=X,x.GenericGF=at,x.GenericGFPoly=Je,x.GlobalHistogramBinarizer=pe,x.GridSampler=ii,x.GridSamplerInstance=Vn,x.HTMLCanvasElementLuminanceSource=H,x.HybridBinarizer=te,x.ITFReader=pt,x.IllegalArgumentException=j,x.IllegalStateException=vn,x.InvertedLuminanceSource=q,x.LuminanceSource=ce,x.MathUtils=ut,x.MultiFormatOneDReader=ss,x.MultiFormatReader=fi,x.MultiFormatWriter=to,x.NotFoundException=B,x.OneDReader=Pt,x.PDF417DecodedBitStreamParser=ae,x.PDF417DecoderErrorCorrection=Ji,x.PDF417Reader=an,x.PDF417ResultMetadata=di,x.PerspectiveTransform=On,x.PlanarYUVLuminanceSource=ur,x.QRCodeByteMatrix=gi,x.QRCodeDataMask=it,x.QRCodeDecodedBitStreamParser=It,x.QRCodeDecoderErrorCorrectionLevel=bt,x.QRCodeDecoderFormatInformation=nn,x.QRCodeEncoder=Ct,x.QRCodeEncoderQRCode=zr,x.QRCodeMaskUtil=Tt,x.QRCodeMatrixUtil=Ye,x.QRCodeMode=Ze,x.QRCodeReader=mn,x.QRCodeVersion=Xe,x.QRCodeWriter=us,x.RGBLuminanceSource=Us,x.RSS14Reader=Et,x.RSSExpandedReader=ge,x.ReaderException=cs,x.ReedSolomonDecoder=Rn,x.ReedSolomonEncoder=na,x.ReedSolomonException=Gn,x.Result=_e,x.ResultMetadataType=Me,x.ResultPoint=Fe,x.StringUtils=ee,x.UnsupportedOperationException=Ae,x.VideoInputDevice=D,x.WhiteRectangleDetector=ir,x.WriterException=Nt,x.ZXingArrays=fe,x.ZXingCharset=Za,x.ZXingInteger=ie,x.ZXingStandardCharsets=ra,x.ZXingStringBuilder=Y,x.ZXingStringEncoding=Ue,x.ZXingSystem=Z,x.createAbstractExpandedDecoder=La,Object.defineProperty(x,"__esModule",{value:!0})}))})(ja,ja.exports)),ja.exports}var Wt=fh();const xh=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var Yd=(function(){function f(m,x,v){if(this.formatMap=new Map([[We.QR_CODE,Wt.BarcodeFormat.QR_CODE],[We.AZTEC,Wt.BarcodeFormat.AZTEC],[We.CODABAR,Wt.BarcodeFormat.CODABAR],[We.CODE_39,Wt.BarcodeFormat.CODE_39],[We.CODE_93,Wt.BarcodeFormat.CODE_93],[We.CODE_128,Wt.BarcodeFormat.CODE_128],[We.DATA_MATRIX,Wt.BarcodeFormat.DATA_MATRIX],[We.MAXICODE,Wt.BarcodeFormat.MAXICODE],[We.ITF,Wt.BarcodeFormat.ITF],[We.EAN_13,Wt.BarcodeFormat.EAN_13],[We.EAN_8,Wt.BarcodeFormat.EAN_8],[We.PDF_417,Wt.BarcodeFormat.PDF_417],[We.RSS_14,Wt.BarcodeFormat.RSS_14],[We.RSS_EXPANDED,Wt.BarcodeFormat.RSS_EXPANDED],[We.UPC_A,Wt.BarcodeFormat.UPC_A],[We.UPC_E,Wt.BarcodeFormat.UPC_E],[We.UPC_EAN_EXTENSION,Wt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!xh)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=x,this.logger=v;var C=this.createZXingFormats(m),w=new Map;w.set(Wt.DecodeHintType.POSSIBLE_FORMATS,C),w.set(Wt.DecodeHintType.TRY_HARDER,!1),this.hints=w}return f.prototype.decodeAsync=function(m){var x=this;return new Promise(function(v,C){try{v(x.decode(m))}catch(w){C(w)}})},f.prototype.decode=function(m){var x=new Wt.MultiFormatReader(this.verbose,this.hints),v=new Wt.HTMLCanvasElementLuminanceSource(m),C=new Wt.BinaryBitmap(new Wt.HybridBinarizer(v)),w=x.decode(C);return{text:w.text,format:S0.create(this.toHtml5QrcodeSupportedFormats(w.format)),debugData:this.createDebugData()}},f.prototype.createReverseFormatMap=function(){var m=new Map;return this.formatMap.forEach(function(x,v,C){m.set(x,v)}),m},f.prototype.toHtml5QrcodeSupportedFormats=function(m){if(!this.reverseFormatMap.has(m))throw"reverseFormatMap doesn't have ".concat(m);return this.reverseFormatMap.get(m)},f.prototype.createZXingFormats=function(m){for(var x=[],v=0,C=m;v<C.length;v++){var w=C[v];this.formatMap.has(w)?x.push(this.formatMap.get(w)):this.logger.logError("".concat(w," is not supported by")+"ZXingHtml5QrcodeShim")}return x},f.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},f})(),gh=function(f,m,x,v){function C(w){return w instanceof x?w:new x(function(I){I(w)})}return new(x||(x=Promise))(function(w,I){function M(P){try{N(v.next(P))}catch(j){I(j)}}function _(P){try{N(v.throw(P))}catch(j){I(j)}}function N(P){P.done?w(P.value):C(P.value).then(M,_)}N((v=v.apply(f,m||[])).next())})},mh=function(f,m){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,C,w,I;return I={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(N){return function(P){return _([N,P])}}function _(N){if(v)throw new TypeError("Generator is already executing.");for(;I&&(I=0,N[0]&&(x=0)),x;)try{if(v=1,C&&(w=N[0]&2?C.return:N[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,N[1])).done)return w;switch(C=0,w&&(N=[N[0]&2,w.value]),N[0]){case 0:case 1:w=N;break;case 4:return x.label++,{value:N[1],done:!1};case 5:x.label++,C=N[1],N=[0];continue;case 7:N=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(N[0]===6||N[0]===2)){x=0;continue}if(N[0]===3&&(!w||N[1]>w[0]&&N[1]<w[3])){x.label=N[1];break}if(N[0]===6&&x.label<w[1]){x.label=w[1],w=N;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(N);break}w[2]&&x.ops.pop(),x.trys.pop();continue}N=m.call(f,x)}catch(P){N=[6,P],C=0}finally{v=w=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},Kd=(function(){function f(m,x,v){if(this.formatMap=new Map([[We.QR_CODE,"qr_code"],[We.AZTEC,"aztec"],[We.CODABAR,"codabar"],[We.CODE_39,"code_39"],[We.CODE_93,"code_93"],[We.CODE_128,"code_128"],[We.DATA_MATRIX,"data_matrix"],[We.ITF,"itf"],[We.EAN_13,"ean_13"],[We.EAN_8,"ean_8"],[We.PDF_417,"pdf417"],[We.UPC_A,"upc_a"],[We.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!f.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=x,this.logger=v;var C=this.createBarcodeDetectorFormats(m);if(this.detector=new BarcodeDetector(C),!this.detector)throw"BarcodeDetector detector not supported"}return f.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var m=new BarcodeDetector({formats:["qr_code"]});return typeof m<"u"},f.prototype.decodeAsync=function(m){return gh(this,void 0,void 0,function(){var x,v;return mh(this,function(C){switch(C.label){case 0:return[4,this.detector.detect(m)];case 1:if(x=C.sent(),!x||x.length===0)throw"No barcode or QR code detected.";return v=this.selectLargestBarcode(x),[2,{text:v.rawValue,format:S0.create(this.toHtml5QrcodeSupportedFormats(v.format)),debugData:this.createDebugData()}]}})})},f.prototype.selectLargestBarcode=function(m){for(var x=null,v=0,C=0,w=m;C<w.length;C++){var I=w[C],M=I.boundingBox.width*I.boundingBox.height;M>v&&(v=M,x=I)}if(!x)throw"No largest barcode found";return x},f.prototype.createBarcodeDetectorFormats=function(m){for(var x=[],v=0,C=m;v<C.length;v++){var w=C[v];this.formatMap.has(w)?x.push(this.formatMap.get(w)):this.logger.warn("".concat(w," is not supported by")+"BarcodeDetectorDelegate")}return{formats:x}},f.prototype.toHtml5QrcodeSupportedFormats=function(m){if(!this.reverseFormatMap.has(m))throw"reverseFormatMap doesn't have ".concat(m);return this.reverseFormatMap.get(m)},f.prototype.createReverseFormatMap=function(){var m=new Map;return this.formatMap.forEach(function(x,v,C){m.set(x,v)}),m},f.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},f})(),qd=function(f,m,x,v){function C(w){return w instanceof x?w:new x(function(I){I(w)})}return new(x||(x=Promise))(function(w,I){function M(P){try{N(v.next(P))}catch(j){I(j)}}function _(P){try{N(v.throw(P))}catch(j){I(j)}}function N(P){P.done?w(P.value):C(P.value).then(M,_)}N((v=v.apply(f,m||[])).next())})},Qd=function(f,m){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,C,w,I;return I={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(N){return function(P){return _([N,P])}}function _(N){if(v)throw new TypeError("Generator is already executing.");for(;I&&(I=0,N[0]&&(x=0)),x;)try{if(v=1,C&&(w=N[0]&2?C.return:N[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,N[1])).done)return w;switch(C=0,w&&(N=[N[0]&2,w.value]),N[0]){case 0:case 1:w=N;break;case 4:return x.label++,{value:N[1],done:!1};case 5:x.label++,C=N[1],N=[0];continue;case 7:N=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(N[0]===6||N[0]===2)){x=0;continue}if(N[0]===3&&(!w||N[1]>w[0]&&N[1]<w[3])){x.label=N[1];break}if(N[0]===6&&x.label<w[1]){x.label=w[1],w=N;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(N);break}w[2]&&x.ops.pop(),x.trys.pop();continue}N=m.call(f,x)}catch(P){N=[6,P],C=0}finally{v=w=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},ph=(function(){function f(m,x,v,C){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=v,x&&Kd.isSupported()?(this.primaryDecoder=new Kd(m,v,C),this.secondaryDecoder=new Yd(m,v,C)):this.primaryDecoder=new Yd(m,v,C)}return f.prototype.decodeAsync=function(m){return qd(this,void 0,void 0,function(){var x;return Qd(this,function(v){switch(v.label){case 0:x=performance.now(),v.label=1;case 1:return v.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(m)];case 2:return[2,v.sent()];case 3:return this.possiblyLogPerformance(x),[7];case 4:return[2]}})})},f.prototype.decodeRobustlyAsync=function(m){return qd(this,void 0,void 0,function(){var x,v;return Qd(this,function(C){switch(C.label){case 0:x=performance.now(),C.label=1;case 1:return C.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(m)];case 2:return[2,C.sent()];case 3:if(v=C.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(m)];throw v;case 4:return this.possiblyLogPerformance(x),[7];case 5:return[2]}})})},f.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},f.prototype.possiblyLogPerformance=function(m){if(this.verbose){var x=performance.now()-m;this.executionResults.push(x),this.executions++,this.possiblyFlushPerformanceReport()}},f.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var m=0,x=0,v=this.executionResults;x<v.length;x++){var C=v[x];m+=C}var w=m/this.executionResults.length;console.log("".concat(w," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},f})(),Pc=(function(){var f=function(m,x){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,C){v.__proto__=C}||function(v,C){for(var w in C)Object.prototype.hasOwnProperty.call(C,w)&&(v[w]=C[w])},f(m,x)};return function(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");f(m,x);function v(){this.constructor=m}m.prototype=x===null?Object.create(x):(v.prototype=x.prototype,new v)}})(),Kl=function(f,m,x,v){function C(w){return w instanceof x?w:new x(function(I){I(w)})}return new(x||(x=Promise))(function(w,I){function M(P){try{N(v.next(P))}catch(j){I(j)}}function _(P){try{N(v.throw(P))}catch(j){I(j)}}function N(P){P.done?w(P.value):C(P.value).then(M,_)}N((v=v.apply(f,m||[])).next())})},ql=function(f,m){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,C,w,I;return I={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(N){return function(P){return _([N,P])}}function _(N){if(v)throw new TypeError("Generator is already executing.");for(;I&&(I=0,N[0]&&(x=0)),x;)try{if(v=1,C&&(w=N[0]&2?C.return:N[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,N[1])).done)return w;switch(C=0,w&&(N=[N[0]&2,w.value]),N[0]){case 0:case 1:w=N;break;case 4:return x.label++,{value:N[1],done:!1};case 5:x.label++,C=N[1],N=[0];continue;case 7:N=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(N[0]===6||N[0]===2)){x=0;continue}if(N[0]===3&&(!w||N[1]>w[0]&&N[1]<w[3])){x.label=N[1];break}if(N[0]===6&&x.label<w[1]){x.label=w[1],w=N;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(N);break}w[2]&&x.ops.pop(),x.trys.pop();continue}N=m.call(f,x)}catch(P){N=[6,P],C=0}finally{v=w=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},k0=(function(){function f(m,x){this.name=m,this.track=x}return f.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},f.prototype.apply=function(m){var x={};x[this.name]=m;var v={advanced:[x]};return this.track.applyConstraints(v)},f.prototype.value=function(){var m=this.track.getSettings();if(this.name in m){var x=m[this.name];return x}return null},f})(),yh=(function(f){Pc(m,f);function m(x,v){return f.call(this,x,v)||this}return m.prototype.min=function(){return this.getCapabilities().min},m.prototype.max=function(){return this.getCapabilities().max},m.prototype.step=function(){return this.getCapabilities().step},m.prototype.apply=function(x){var v={};v[this.name]=x;var C={advanced:[v]};return this.track.applyConstraints(C)},m.prototype.getCapabilities=function(){this.failIfNotSupported();var x=this.track.getCapabilities(),v=x[this.name];return{min:v.min,max:v.max,step:v.step}},m.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},m})(k0),wh=(function(f){Pc(m,f);function m(x){return f.call(this,"zoom",x)||this}return m})(yh),bh=(function(f){Pc(m,f);function m(x){return f.call(this,"torch",x)||this}return m})(k0),vh=(function(){function f(m){this.track=m}return f.prototype.zoomFeature=function(){return new wh(this.track)},f.prototype.torchFeature=function(){return new bh(this.track)},f})(),Nh=(function(){function f(m,x,v){this.isClosed=!1,this.parentElement=m,this.mediaStream=x,this.callbacks=v,this.surface=this.createVideoElement(this.parentElement.clientWidth),m.append(this.surface)}return f.prototype.createVideoElement=function(m){var x=document.createElement("video");return x.style.width="".concat(m,"px"),x.style.display="block",x.muted=!0,x.setAttribute("muted","true"),x.playsInline=!0,x},f.prototype.setupSurface=function(){var m=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var x=function(){var v=m.surface.clientWidth,C=m.surface.clientHeight;m.callbacks.onRenderSurfaceReady(v,C),m.surface.removeEventListener("playing",x)};this.surface.addEventListener("playing",x),this.surface.srcObject=this.mediaStream,this.surface.play()},f.create=function(m,x,v,C){return Kl(this,void 0,void 0,function(){var w,I;return ql(this,function(M){switch(M.label){case 0:return w=new f(m,x,C),v.aspectRatio?(I={aspectRatio:v.aspectRatio},[4,w.getFirstTrackOrFail().applyConstraints(I)]):[3,2];case 1:M.sent(),M.label=2;case 2:return w.setupSurface(),[2,w]}})})},f.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},f.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},f.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},f.prototype.resume=function(m){this.failIfClosed();var x=this,v=function(){setTimeout(m,200),x.surface.removeEventListener("playing",v)};this.surface.addEventListener("playing",v),this.surface.play()},f.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},f.prototype.getSurface=function(){return this.failIfClosed(),this.surface},f.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},f.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},f.prototype.applyVideoConstraints=function(m){return Kl(this,void 0,void 0,function(){return ql(this,function(x){if("aspectRatio"in m)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(m)]})})},f.prototype.close=function(){if(this.isClosed)return Promise.resolve();var m=this;return new Promise(function(x,v){var C=m.mediaStream.getVideoTracks(),w=C.length,I=0;m.mediaStream.getVideoTracks().forEach(function(M){m.mediaStream.removeTrack(M),M.stop(),++I,I>=w&&(m.isClosed=!0,m.parentElement.removeChild(m.surface),x())})})},f.prototype.getCapabilities=function(){return new vh(this.getFirstTrackOrFail())},f})(),Ch=(function(){function f(m){this.mediaStream=m}return f.prototype.render=function(m,x,v){return Kl(this,void 0,void 0,function(){return ql(this,function(C){return[2,Nh.create(m,this.mediaStream,x,v)]})})},f.create=function(m){return Kl(this,void 0,void 0,function(){var x,v;return ql(this,function(C){switch(C.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return x={audio:!1,video:m},[4,navigator.mediaDevices.getUserMedia(x)];case 1:return v=C.sent(),[2,new f(v)]}})})},f})(),Jd=function(f,m,x,v){function C(w){return w instanceof x?w:new x(function(I){I(w)})}return new(x||(x=Promise))(function(w,I){function M(P){try{N(v.next(P))}catch(j){I(j)}}function _(P){try{N(v.throw(P))}catch(j){I(j)}}function N(P){P.done?w(P.value):C(P.value).then(M,_)}N((v=v.apply(f,m||[])).next())})},$d=function(f,m){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,C,w,I;return I={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(N){return function(P){return _([N,P])}}function _(N){if(v)throw new TypeError("Generator is already executing.");for(;I&&(I=0,N[0]&&(x=0)),x;)try{if(v=1,C&&(w=N[0]&2?C.return:N[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,N[1])).done)return w;switch(C=0,w&&(N=[N[0]&2,w.value]),N[0]){case 0:case 1:w=N;break;case 4:return x.label++,{value:N[1],done:!1};case 5:x.label++,C=N[1],N=[0];continue;case 7:N=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(N[0]===6||N[0]===2)){x=0;continue}if(N[0]===3&&(!w||N[1]>w[0]&&N[1]<w[3])){x.label=N[1];break}if(N[0]===6&&x.label<w[1]){x.label=w[1],w=N;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(N);break}w[2]&&x.ops.pop(),x.trys.pop();continue}N=m.call(f,x)}catch(P){N=[6,P],C=0}finally{v=w=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},Eh=(function(){function f(){}return f.failIfNotSupported=function(){return Jd(this,void 0,void 0,function(){return $d(this,function(m){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new f]})})},f.prototype.create=function(m){return Jd(this,void 0,void 0,function(){return $d(this,function(x){return[2,Ch.create(m)]})})},f})(),Sh=function(f,m,x,v){function C(w){return w instanceof x?w:new x(function(I){I(w)})}return new(x||(x=Promise))(function(w,I){function M(P){try{N(v.next(P))}catch(j){I(j)}}function _(P){try{N(v.throw(P))}catch(j){I(j)}}function N(P){P.done?w(P.value):C(P.value).then(M,_)}N((v=v.apply(f,m||[])).next())})},Ah=function(f,m){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},v,C,w,I;return I={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function M(N){return function(P){return _([N,P])}}function _(N){if(v)throw new TypeError("Generator is already executing.");for(;I&&(I=0,N[0]&&(x=0)),x;)try{if(v=1,C&&(w=N[0]&2?C.return:N[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,N[1])).done)return w;switch(C=0,w&&(N=[N[0]&2,w.value]),N[0]){case 0:case 1:w=N;break;case 4:return x.label++,{value:N[1],done:!1};case 5:x.label++,C=N[1],N=[0];continue;case 7:N=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(N[0]===6||N[0]===2)){x=0;continue}if(N[0]===3&&(!w||N[1]>w[0]&&N[1]<w[3])){x.label=N[1];break}if(N[0]===6&&x.label<w[1]){x.label=w[1],w=N;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(N);break}w[2]&&x.ops.pop(),x.trys.pop();continue}N=m.call(f,x)}catch(P){N=[6,P],C=0}finally{v=w=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},kh=(function(){function f(){}return f.retrieve=function(){if(navigator.mediaDevices)return f.getCamerasFromMediaDevices();var m=MediaStreamTrack;return MediaStreamTrack&&m.getSources?f.getCamerasFromMediaStreamTrack():f.rejectWithError()},f.rejectWithError=function(){var m=Di.unableToQuerySupportedDevices();return f.isHttpsOrLocalhost()||(m=Di.insecureContextCameraQueryError()),Promise.reject(m)},f.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var m=location.host.split(":")[0];return m==="127.0.0.1"||m==="localhost"},f.getCamerasFromMediaDevices=function(){return Sh(this,void 0,void 0,function(){var m,x,v,C,w,I,M;return Ah(this,function(_){switch(_.label){case 0:return m=function(N){for(var P=N.getVideoTracks(),j=0,$=P;j<$.length;j++){var V=$[j];V.enabled=!1,V.stop(),N.removeTrack(V)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return x=_.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(v=_.sent(),C=[],w=0,I=v;w<I.length;w++)M=I[w],M.kind==="videoinput"&&C.push({id:M.deviceId,label:M.label});return m(x),[2,C]}})})},f.getCamerasFromMediaStreamTrack=function(){return new Promise(function(m,x){var v=function(w){for(var I=[],M=0,_=w;M<_.length;M++){var N=_[M];N.kind==="video"&&I.push({id:N.id,label:N.label})}m(I)},C=MediaStreamTrack;C.getSources(v)})},f})(),Gt;(function(f){f[f.UNKNOWN=0]="UNKNOWN",f[f.NOT_STARTED=1]="NOT_STARTED",f[f.SCANNING=2]="SCANNING",f[f.PAUSED=3]="PAUSED"})(Gt||(Gt={}));var Ih=(function(){function f(){this.state=Gt.NOT_STARTED,this.onGoingTransactionNewState=Gt.UNKNOWN}return f.prototype.directTransition=function(m){this.failIfTransitionOngoing(),this.validateTransition(m),this.state=m},f.prototype.startTransition=function(m){return this.failIfTransitionOngoing(),this.validateTransition(m),this.onGoingTransactionNewState=m,this},f.prototype.execute=function(){if(this.onGoingTransactionNewState===Gt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var m=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Gt.UNKNOWN,this.directTransition(m)},f.prototype.cancel=function(){if(this.onGoingTransactionNewState===Gt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Gt.UNKNOWN},f.prototype.getState=function(){return this.state},f.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Gt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},f.prototype.validateTransition=function(m){switch(this.state){case Gt.UNKNOWN:throw"Transition from unknown is not allowed";case Gt.NOT_STARTED:this.failIfNewStateIs(m,[Gt.PAUSED]);break;case Gt.SCANNING:break;case Gt.PAUSED:break}},f.prototype.failIfNewStateIs=function(m,x){for(var v=0,C=x;v<C.length;v++){var w=C[v];if(m===w)throw"Cannot transition from ".concat(this.state," to ").concat(m)}},f})(),Th=(function(){function f(m){this.stateManager=m}return f.prototype.startTransition=function(m){return this.stateManager.startTransition(m)},f.prototype.directTransition=function(m){this.stateManager.directTransition(m)},f.prototype.getState=function(){return this.stateManager.getState()},f.prototype.canScanFile=function(){return this.stateManager.getState()===Gt.NOT_STARTED},f.prototype.isScanning=function(){return this.stateManager.getState()!==Gt.NOT_STARTED},f.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Gt.SCANNING},f.prototype.isPaused=function(){return this.stateManager.getState()===Gt.PAUSED},f})(),Rh=(function(){function f(){}return f.create=function(){return new Th(new Ih)},f})(),jh=(function(){var f=function(m,x){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,C){v.__proto__=C}||function(v,C){for(var w in C)Object.prototype.hasOwnProperty.call(C,w)&&(v[w]=C[w])},f(m,x)};return function(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");f(m,x);function v(){this.constructor=m}m.prototype=x===null?Object.create(x):(v.prototype=x.prototype,new v)}})(),rr=(function(f){jh(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.DEFAULT_WIDTH=300,m.DEFAULT_WIDTH_OFFSET=2,m.FILE_SCAN_MIN_HEIGHT=300,m.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,m.MIN_QR_BOX_SIZE=50,m.SHADED_LEFT=1,m.SHADED_RIGHT=2,m.SHADED_TOP=3,m.SHADED_BOTTOM=4,m.SHADED_REGION_ELEMENT_ID="qr-shaded-region",m.VERBOSE=!1,m.BORDER_SHADER_DEFAULT_COLOR="#ffffff",m.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",m})(ch),_h=(function(){function f(m,x){this.logger=x,this.fps=rr.SCAN_DEFAULT_FPS,m?(m.fps&&(this.fps=m.fps),this.disableFlip=m.disableFlip===!0,this.qrbox=m.qrbox,this.aspectRatio=m.aspectRatio,this.videoConstraints=m.videoConstraints):this.disableFlip=rr.DEFAULT_DISABLE_FLIP}return f.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?A0.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},f.prototype.isShadedBoxEnabled=function(){return!$r(this.qrbox)},f.create=function(m,x){return new f(m,x)},f})(),e0=(function(){function f(m,x){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(m))throw"HTML Element with id=".concat(m," not found");this.elementId=m,this.verbose=!1;var v;typeof x=="boolean"?this.verbose=x===!0:x&&(v=x,this.verbose=v.verbose===!0,v.experimentalFeatures),this.logger=new dh(this.verbose),this.qrcode=new ph(this.getSupportedFormats(x),this.getUseBarCodeDetectorIfSupported(v),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Rh.create()}return f.prototype.start=function(m,x,v,C){var w=this;if(!m)throw"cameraIdOrConfig is required";if(!v||typeof v!="function")throw"qrCodeSuccessCallback is required and should be a function.";var I;C?I=C:I=this.verbose?this.logger.log:function(){};var M=_h.create(x,this.logger);this.clearElement();var _=!1;M.videoConstraints&&(M.isMediaStreamConstraintsValid()?_=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var N=_,P=document.getElementById(this.elementId);P.clientWidth?P.clientWidth:rr.DEFAULT_WIDTH,P.style.position="relative",this.shouldScan=!0,this.element=P;var j=this,$=this.stateManagerProxy.startTransition(Gt.SCANNING);return new Promise(function(V,z){var Z=N?M.videoConstraints:j.createVideoConstraints(m);if(!Z){$.cancel(),z("videoConstraints should be defined");return}var oe={};(!N||M.aspectRatio)&&(oe.aspectRatio=M.aspectRatio);var xe={onRenderSurfaceReady:function(fe,ie){j.setupUi(fe,ie,M),j.isScanning=!0,j.foreverScan(M,v,I)}};Eh.failIfNotSupported().then(function(fe){fe.create(Z).then(function(ie){return ie.render(w.element,oe,xe).then(function(ne){j.renderedCamera=ne,$.execute(),V(null)}).catch(function(ne){$.cancel(),z(ne)})}).catch(function(ie){$.cancel(),z(Di.errorGettingUserMedia(ie))})}).catch(function(fe){$.cancel(),z(Di.cameraStreamingNotSupported())})})},f.prototype.pause=function(m){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Gt.PAUSED),this.showPausedState(),($r(m)||m!==!0)&&(m=!1),m&&this.renderedCamera&&this.renderedCamera.pause()},f.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var m=this,x=function(){m.stateManagerProxy.directTransition(Gt.SCANNING),m.hidePausedState()};if(!this.renderedCamera.isPaused()){x();return}this.renderedCamera.resume(function(){x()})},f.prototype.getState=function(){return this.stateManagerProxy.getState()},f.prototype.stop=function(){var m=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var x=this.stateManagerProxy.startTransition(Gt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var v=function(){if(m.element){var w=document.getElementById(rr.SHADED_REGION_ELEMENT_ID);w&&m.element.removeChild(w)}},C=this;return this.renderedCamera.close().then(function(){return C.renderedCamera=null,C.element&&(C.element.removeChild(C.canvasElement),C.canvasElement=null),v(),C.qrRegion&&(C.qrRegion=null),C.context&&(C.context=null),x.execute(),C.hidePausedState(),C.isScanning=!1,Promise.resolve()})},f.prototype.scanFile=function(m,x){return this.scanFileV2(m,x).then(function(v){return v.decodedText})},f.prototype.scanFileV2=function(m,x){var v=this;if(!m||!(m instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if($r(x)&&(x=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(C,w){v.possiblyCloseLastScanImageFile(),v.clearElement(),v.lastScanImageFile=URL.createObjectURL(m);var I=new Image;I.onload=function(){var M=I.width,_=I.height,N=document.getElementById(v.elementId),P=N.clientWidth?N.clientWidth:rr.DEFAULT_WIDTH,j=Math.max(N.clientHeight?N.clientHeight:_,rr.FILE_SCAN_MIN_HEIGHT),$=v.computeCanvasDrawConfig(M,_,P,j);if(x){var V=v.createCanvasElement(P,j,"qr-canvas-visible");V.style.display="inline-block",N.appendChild(V);var z=V.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=P,z.canvas.height=j,z.drawImage(I,0,0,M,_,$.x,$.y,$.width,$.height)}var Z=rr.FILE_SCAN_HIDDEN_CANVAS_PADDING,oe=Math.max(I.width,$.width),xe=Math.max(I.height,$.height),fe=oe+2*Z,ie=xe+2*Z,ne=v.createCanvasElement(fe,ie);N.appendChild(ne);var be=ne.getContext("2d");if(!be)throw"Unable to get 2d context from canvas";be.canvas.width=fe,be.canvas.height=ie,be.drawImage(I,0,0,M,_,Z,Z,oe,xe);try{v.qrcode.decodeRobustlyAsync(ne).then(function(de){C(Xd.createFromQrcodeResult(de))}).catch(w)}catch(de){w("QR code parse error, error = ".concat(de))}},I.onerror=w,I.onabort=w,I.onstalled=w,I.onsuspend=w,I.src=URL.createObjectURL(m)})},f.prototype.clear=function(){this.clearElement()},f.getCameras=function(){return kh.retrieve()},f.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},f.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},f.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},f.prototype.applyVideoConstraints=function(m){if(m){if(!A0.isMediaStreamConstraintsValid(m,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(m)},f.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},f.prototype.getSupportedFormats=function(m){var x=[We.QR_CODE,We.AZTEC,We.CODABAR,We.CODE_39,We.CODE_93,We.CODE_128,We.DATA_MATRIX,We.MAXICODE,We.ITF,We.EAN_13,We.EAN_8,We.PDF_417,We.RSS_14,We.RSS_EXPANDED,We.UPC_A,We.UPC_E,We.UPC_EAN_EXTENSION];if(!m||typeof m=="boolean"||!m.formatsToSupport)return x;if(!Array.isArray(m.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(m.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var v=[],C=0,w=m.formatsToSupport;C<w.length;C++){var I=w[C];oh(I)?v.push(I):this.logger.warn("Invalid format: ".concat(I," passed in config, ignoring."))}if(v.length===0)throw"None of formatsToSupport match supported values.";return v},f.prototype.getUseBarCodeDetectorIfSupported=function(m){if($r(m))return!0;if(!$r(m.useBarCodeDetectorIfSupported))return m.useBarCodeDetectorIfSupported!==!1;if($r(m.experimentalFeatures))return!0;var x=m.experimentalFeatures;return $r(x.useBarCodeDetectorIfSupported)?!0:x.useBarCodeDetectorIfSupported!==!1},f.prototype.validateQrboxSize=function(m,x,v){var C=this,w=v.qrbox;this.validateQrboxConfig(w);var I=this.toQrdimensions(m,x,w),M=function(N){if(N<rr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(rr.MIN_QR_BOX_SIZE,"px.")},_=function(N){return N>m&&(C.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),N=m),N};M(I.width),M(I.height),I.width=_(I.width)},f.prototype.validateQrboxConfig=function(m){if(typeof m!="number"&&typeof m!="function"&&(m.width===void 0||m.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},f.prototype.toQrdimensions=function(m,x,v){if(typeof v=="number")return{width:v,height:v};if(typeof v=="function")try{return v(m,x)}catch(C){throw new Error("qrbox config was passed as a function but it failed with unknown error"+C)}return v},f.prototype.setupUi=function(m,x,v){v.isShadedBoxEnabled()&&this.validateQrboxSize(m,x,v);var C=$r(v.qrbox)?{width:m,height:x}:v.qrbox;this.validateQrboxConfig(C);var w=this.toQrdimensions(m,x,C);w.height>x&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var I=v.isShadedBoxEnabled()&&w.height<=x,M={x:0,y:0,width:m,height:x},_=I?this.getShadedRegionBounds(m,x,w):M,N=this.createCanvasElement(_.width,_.height),P={willReadFrequently:!0},j=N.getContext("2d",P);j.canvas.width=_.width,j.canvas.height=_.height,this.element.append(N),I&&this.possiblyInsertShadingElement(this.element,m,x,w),this.createScannerPausedUiElement(this.element),this.qrRegion=_,this.context=j,this.canvasElement=N},f.prototype.createScannerPausedUiElement=function(m){var x=document.createElement("div");x.innerText=Di.scannerPaused(),x.style.display="none",x.style.position="absolute",x.style.top="0px",x.style.zIndex="1",x.style.background="rgba(9, 9, 9, 0.46)",x.style.color="#FFECEC",x.style.textAlign="center",x.style.width="100%",m.appendChild(x),this.scannerPausedUiElement=x},f.prototype.scanContext=function(m,x){var v=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(C){return m(C.text,Xd.createFromQrcodeResult(C)),v.possiblyUpdateShaders(!0),!0}).catch(function(C){v.possiblyUpdateShaders(!1);var w=Di.codeParseError(C);return x(w,uh.createFrom(w)),!1})},f.prototype.foreverScan=function(m,x,v){var C=this;if(this.shouldScan&&this.renderedCamera){var w=this.renderedCamera.getSurface(),I=w.videoWidth/w.clientWidth,M=w.videoHeight/w.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var _=this.qrRegion.width*I,N=this.qrRegion.height*M,P=this.qrRegion.x*I,j=this.qrRegion.y*M;this.context.drawImage(w,P,j,_,N,0,0,this.qrRegion.width,this.qrRegion.height);var $=function(){C.foreverScanTimeout=setTimeout(function(){C.foreverScan(m,x,v)},C.getTimeoutFps(m.fps))};this.scanContext(x,v).then(function(V){!V&&m.disableFlip!==!0?(C.context.translate(C.context.canvas.width,0),C.context.scale(-1,1),C.scanContext(x,v).finally(function(){$()})):$()}).catch(function(V){C.logger.logError("Error happend while scanning context",V),$()})}},f.prototype.createVideoConstraints=function(m){if(typeof m=="string")return{deviceId:{exact:m}};if(typeof m=="object"){var x="facingMode",v="deviceId",C={user:!0,environment:!0},w="exact",I=function(z){if(z in C)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(z,"'")},M=Object.keys(m);if(M.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(M.length," keys");var _=Object.keys(m)[0];if(_!==x&&_!==v)throw"Only '".concat(x,"' and '").concat(v,"' ")+" are supported for 'cameraIdOrConfig'";if(_===x){var N=m.facingMode;if(typeof N=="string"){if(I(N))return{facingMode:N}}else if(typeof N=="object")if(w in N){if(I(N["".concat(w)]))return{facingMode:{exact:N["".concat(w)]}}}else throw"'facingMode' should be string or object with"+" ".concat(w," as key.");else{var P=typeof N;throw"Invalid type of 'facingMode' = ".concat(P)}}else{var j=m.deviceId;if(typeof j=="string")return{deviceId:j};if(typeof j=="object"){if(w in j)return{deviceId:{exact:j["".concat(w)]}};throw"'deviceId' should be string or object with"+" ".concat(w," as key.")}else{var $=typeof j;throw"Invalid type of 'deviceId' = ".concat($)}}}var V=typeof m;throw"Invalid type of 'cameraIdOrConfig' = ".concat(V)},f.prototype.computeCanvasDrawConfig=function(m,x,v,C){if(m<=v&&x<=C){var w=(v-m)/2,I=(C-x)/2;return{x:w,y:I,width:m,height:x}}else{var M=m,_=x;return m>v&&(x=v/m*x,m=v),x>C&&(m=C/x*m,x=C),this.logger.log("Image downsampled from "+"".concat(M,"X").concat(_)+" to ".concat(m,"X").concat(x,".")),this.computeCanvasDrawConfig(m,x,v,C)}},f.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var m=document.getElementById(this.elementId);m&&(m.innerHTML="")},f.prototype.possiblyUpdateShaders=function(m){this.qrMatch!==m&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(x){x.style.backgroundColor=m?rr.BORDER_SHADER_MATCH_COLOR:rr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=m)},f.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},f.prototype.createCanvasElement=function(m,x,v){var C=m,w=x,I=document.createElement("canvas");return I.style.width="".concat(C,"px"),I.style.height="".concat(w,"px"),I.style.display="none",I.id=$r(v)?"qr-canvas":v,I},f.prototype.getShadedRegionBounds=function(m,x,v){if(v.width>m||v.height>x)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(m-v.width)/2,y:(x-v.height)/2,width:v.width,height:v.height}},f.prototype.possiblyInsertShadingElement=function(m,x,v,C){if(!(x-C.width<1||v-C.height<1)){var w=document.createElement("div");w.style.position="absolute";var I=(x-C.width)/2,M=(v-C.height)/2;if(w.style.borderLeft="".concat(I,"px solid rgba(0, 0, 0, 0.48)"),w.style.borderRight="".concat(I,"px solid rgba(0, 0, 0, 0.48)"),w.style.borderTop="".concat(M,"px solid rgba(0, 0, 0, 0.48)"),w.style.borderBottom="".concat(M,"px solid rgba(0, 0, 0, 0.48)"),w.style.boxSizing="border-box",w.style.top="0px",w.style.bottom="0px",w.style.left="0px",w.style.right="0px",w.id="".concat(rr.SHADED_REGION_ELEMENT_ID),x-C.width<11||v-C.height<11)this.hasBorderShaders=!1;else{var _=5,N=40;this.insertShaderBorders(w,N,_,-_,null,0,!0),this.insertShaderBorders(w,N,_,-_,null,0,!1),this.insertShaderBorders(w,N,_,null,-_,0,!0),this.insertShaderBorders(w,N,_,null,-_,0,!1),this.insertShaderBorders(w,_,N+_,-_,null,-_,!0),this.insertShaderBorders(w,_,N+_,null,-_,-_,!0),this.insertShaderBorders(w,_,N+_,-_,null,-_,!1),this.insertShaderBorders(w,_,N+_,null,-_,-_,!1),this.hasBorderShaders=!0}m.append(w)}},f.prototype.insertShaderBorders=function(m,x,v,C,w,I,M){var _=document.createElement("div");_.style.position="absolute",_.style.backgroundColor=rr.BORDER_SHADER_DEFAULT_COLOR,_.style.width="".concat(x,"px"),_.style.height="".concat(v,"px"),C!==null&&(_.style.top="".concat(C,"px")),w!==null&&(_.style.bottom="".concat(w,"px")),M?_.style.left="".concat(I,"px"):_.style.right="".concat(I,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(_),m.appendChild(_)},f.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},f.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},f.prototype.getTimeoutFps=function(m){return 1e3/m},f})(),t0;(function(f){f[f.STATUS_DEFAULT=0]="STATUS_DEFAULT",f[f.STATUS_SUCCESS=1]="STATUS_SUCCESS",f[f.STATUS_WARNING=2]="STATUS_WARNING",f[f.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(t0||(t0={}));function Mh({isOpen:f,onScan:m,onClose:x}){const v=Re.useRef(null),C=Re.useRef(null),[w,I]=Re.useState(!1),[M,_]=Re.useState(null),[N,P]=Re.useState(!1),[j,$]=Re.useState(""),[V,z]=Re.useState(null),[Z,oe]=Re.useState([]),xe=Re.useCallback(async()=>{try{const de=await e0.getCameras();oe(de);const X=de.find(me=>me.label.toLowerCase().includes("back")||me.label.toLowerCase().includes("rear")||me.label.toLowerCase().includes("environment"));return z(X?.id||de[0]?.id),de}catch(de){return console.error("Error getting cameras:",de),_("Unable to access camera. Please grant camera permissions."),[]}},[]),fe=Re.useCallback(async()=>{if(!(!v.current||C.current))try{_(null),I(!1);const de=Z.length>0?Z:await xe();if(de.length===0){_("No cameras found. Please connect a camera or use manual entry."),P(!0);return}const X=V||de[0]?.id,me=new e0("barcode-scanner-region");C.current=me,await me.start(X,{fps:15,qrbox:{width:300,height:120},aspectRatio:1.777,formatsToSupport:[0,1,2,3,4,5,6,7,8,9,10,11]},ue=>{navigator.vibrate&&navigator.vibrate(100),ie(),m(ue)},ue=>{}),I(!0)}catch(de){console.error("Scanner start error:",de),_(de.message||"Failed to start camera. Please try manual entry."),P(!0)}},[V,Z,xe,m]),ie=Re.useCallback(async()=>{if(C.current){try{await C.current.stop(),C.current.clear()}catch(de){console.error("Error stopping scanner:",de)}C.current=null}I(!1)},[]),ne=Re.useCallback(()=>{j.trim()&&(ie(),m(j.trim()),$(""),P(!1))},[j,m,ie]),be=Re.useCallback(async()=>{if(Z.length<=1)return;const X=(Z.findIndex(ue=>ue.id===V)+1)%Z.length,me=Z[X].id;await ie(),z(me)},[Z,V,ie]);return Re.useEffect(()=>(f?fe():(ie(),P(!1),$(""),_(null)),()=>{ie()}),[f]),Re.useEffect(()=>{f&&V&&!N&&fe()},[V]),f?a.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-900/90",children:[a.jsx("button",{onClick:x,className:"p-2 rounded-full bg-dark-800/80 hover:bg-dark-700",children:a.jsx(Ql,{className:"w-6 h-6 text-white"})}),a.jsx("span",{className:"text-white font-medium",children:"Scan Barcode"}),a.jsx("div",{className:"flex gap-2",children:Z.length>1&&a.jsx("button",{onClick:be,className:"p-2 rounded-full bg-dark-800/80 hover:bg-dark-700",children:a.jsx(b0,{className:"w-6 h-6 text-white"})})})]}),a.jsxs("div",{className:"flex-1 relative flex items-center justify-center bg-black",children:[a.jsx("div",{id:"barcode-scanner-region",ref:v,className:"w-full h-full",style:{minHeight:"300px"}}),w&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsxs("div",{className:"relative w-72 h-40 border-2 border-accent-primary/50 rounded-lg",children:[a.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-l-4 border-t-4 border-accent-primary rounded-tl-lg"}),a.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-r-4 border-t-4 border-accent-primary rounded-tr-lg"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-l-4 border-b-4 border-accent-primary rounded-bl-lg"}),a.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-r-4 border-b-4 border-accent-primary rounded-br-lg"})]})})]}),a.jsx("div",{className:"p-6 bg-dark-900",children:N?a.jsxs("div",{className:"text-center",children:[M&&a.jsx("p",{className:"text-amber-400 text-sm mb-3",children:M}),a.jsx("div",{className:"flex gap-2 mb-3",children:a.jsx("input",{type:"text",value:j,onChange:de=>$(de.target.value),onKeyDown:de=>de.key==="Enter"&&ne(),placeholder:"Enter barcode number",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 text-center text-lg tracking-wider",autoFocus:!0,inputMode:"numeric",pattern:"[0-9]*"})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{P(!1),$(""),_(null),fe()},className:"flex-1 px-4 py-3 bg-dark-700 text-white rounded-lg font-medium",children:"Back to Camera"}),a.jsx("button",{onClick:ne,disabled:!j.trim(),className:"flex-1 px-4 py-3 bg-accent-primary text-white rounded-lg font-medium disabled:opacity-50",children:"Search"})]})]}):M?a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-red-400 mb-4",children:M}),a.jsxs("div",{className:"flex gap-2 justify-center",children:[a.jsx("button",{onClick:()=>{_(null),fe()},className:"px-6 py-3 bg-accent-primary text-white rounded-lg font-medium",children:"Try Again"}),a.jsxs("button",{onClick:()=>P(!0),className:"px-6 py-3 bg-dark-700 text-white rounded-lg font-medium flex items-center gap-2",children:[a.jsx(Ud,{className:"w-4 h-4"}),"Enter Manually"]})]})]}):a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-white text-lg mb-2",children:w?"Position barcode within frame":"Starting camera..."}),a.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Works with UPC, EAN, QR codes, and most product barcodes"}),a.jsxs("button",{onClick:()=>P(!0),className:"text-accent-primary text-sm flex items-center gap-1 mx-auto",children:[a.jsx(Ud,{className:"w-4 h-4"}),"Enter barcode manually"]})]})})]}):null}const Oh=(f,m,x,v)=>{const C=10*f+6.25*m-5*x;return v==="male"?C+5:C-161};function Dh(f){const{trainingHistory:m,yearsTraining:x,currentTrainingDays:v}=f;let C=0;m==="consistent"?C+=40:m==="some"?C+=20:C+=5;const w=parseFloat(x)||0;C+=Math.min(w*3.5,35);const I=parseInt(v)||0;return C+=Math.min(I*4,25),C>=86?{level:"elite",score:C,multiplier:1.4}:C>=61?{level:"advanced",score:C,multiplier:1.2}:C>=31?{level:"intermediate",score:C,multiplier:1}:{level:"beginner",score:C,multiplier:.8}}function Ph(f){const{raceDate:m,aestheticGoalDate:x,targetDate:v,strengthGoalDate:C,programType:w,programSubtype:I}=f;let M=null;if(m?M=new Date(m):x?M=new Date(x):C?M=new Date(C):v&&(M=new Date(v)),M){const j=Math.ceil((M-new Date)/(1e3*60*60*24*7));return j>52?{totalWeeks:52,weeksUntilGoal:j}:j<4?{totalWeeks:4,weeksUntilGoal:j}:{totalWeeks:j,weeksUntilGoal:j}}return{totalWeeks:{endurance:{marathon:16,triathlon:20,running:12,cycling:12,swimming:12},strength:{powerlifting:12,olympic:16,strongman:12},aesthetic:{hypertrophy:12,"lean-muscle":16,recomp:16},fatloss:{aggressive:8,moderate:12,slow:16}}[w]?.[I]||12,weeksUntilGoal:null}}function Bh(f,m,x){const v=[],w=m==="endurance"&&["running","marathon","triathlon","cycling"].includes(x)?Math.min(3,Math.floor(f*.1)+1):0,I=f-w,M=5;let _=0;for(;_<I;){const N=Math.floor(_/M);if(_%M===4)v.push("Deload");else{const j=Math.ceil(I/M);N===0?v.push("Base"):N>=j-1&&_>=I-4?v.push("Peak"):v.push("Build")}_++}for(let N=0;N<w;N++)v.push("Taper");return v}const n0={"5k":{factor:1,miles:3.1},"10k":{factor:2.09,miles:6.2},half:{factor:4.65,miles:13.1},full:{factor:9.8,miles:26.2},ultra:{factor:22,miles:50}};function I0(f){if(!f)return 0;const m=f.split(":").map(Number);return m.length===3?m[0]*60+m[1]+m[2]/60:m.length===2?m[0]+m[1]/60:0}function Lh(f,m,x){const v=n0[m]?.miles||6.2,C=n0[x]?.miles||26.2,w=I0(f);return w<=0?null:w*Math.pow(C/v,1.06)/C}function Fh(f,m,x=null,v=null){const w={"5k":3.1,"10k":6.2,half:13.1,full:26.2,ultra:50}[m]||26.2;let I=null,M=null;x&&v&&(M=Lh(x,v,m));const _=I0(f);_>0&&(I=_/w);const N=M||I;return N?{goalPace:nr(I||N),currentPace:M?nr(M):null,easyPace:nr(N+1.5)+" - "+nr(N+2),tempoPace:nr(N+.25)+" - "+nr(N+.5),intervalPace:nr(N-.5)+" - "+nr(N-.25),longRunPace:nr(N+1)+" - "+nr(N+1.5),recoveryPace:nr(N+2)+" - "+nr(N+2.5)}:{goalPace:"8:00/mi",currentPace:null,easyPace:"9:30-10:00/mi",tempoPace:"7:00-7:30/mi",intervalPace:"6:30-7:00/mi",longRunPace:"8:30-9:00/mi",recoveryPace:"10:00-10:30/mi"}}function nr(f){const m=Math.floor(f),x=Math.round((f-m)*60);return`${m}:${x.toString().padStart(2,"0")}/mi`}function Wh(f,m,x){const{level:v}=x,C={"5k":{min:25,max:40},"10k":{min:30,max:50},half:{min:35,max:55},full:{min:40,max:70},ultra:{min:50,max:80}},w=C[f]||C.full;let I=(w.min+w.max)/2;if(m){const M=parseFloat(m)||9;M<7?I=w.max:M<8?I=w.max*.9:M<9?I=(w.min+w.max)/2:I=w.min*1.1}return v==="elite"?I*=1.1:v==="advanced"?I*=1:v==="intermediate"?I*=.9:I*=.8,Math.round(I)}function Uh(f,m,x,v,C=null,w=null,I=null){let _=C;(!_||_<=0)&&(_=Math.round(m*.5)),_=Math.min(_,Math.round(m*.8));const P={"5k":10,"10k":15,half:20,full:25,ultra:30}[w]||15;if(_=Math.max(_,P),v==="Taper"){const V=x===f?.4:x===f-1?.5:.75;return Math.round(m*V)}if(v==="Deload"){const V=Math.min(_*Math.pow(1.1,x-1),m);return Math.round(V*.65)}const j=x;let $=_*Math.pow(1+.1,j-1);return $=Math.min($,m),Math.round($)}function zh(f,m,x){const v=parseFloat(f)||10,{level:C}=x;return Math.min(v,C==="elite"?22:C==="advanced"?20:18)}const r0={2:{strength:[{name:"Full Body A",focus:["legs","chest","back"]},{name:"Full Body B",focus:["legs","shoulders","back"]}],aesthetic:[{name:"Upper Body",focus:["chest","back","shoulders","arms"]},{name:"Lower Body",focus:["legs","glutes","core"]}]},3:{strength:[{name:"Squat Day",focus:["legs","core"]},{name:"Bench Day",focus:["chest","shoulders","triceps"]},{name:"Deadlift Day",focus:["posterior","back","biceps"]}],aesthetic:[{name:"Push",focus:["chest","shoulders","triceps"]},{name:"Pull",focus:["back","biceps","rear-delts"]},{name:"Legs",focus:["legs","glutes","core"]}]},4:{strength:[{name:"Heavy Squat",focus:["legs","core"]},{name:"Heavy Bench",focus:["chest","shoulders","triceps"]},{name:"Heavy Deadlift",focus:["posterior","back"]},{name:"Volume Upper",focus:["shoulders","chest","arms"]}],aesthetic:[{name:"Upper Push",focus:["chest","shoulders","triceps"]},{name:"Lower",focus:["legs","glutes"]},{name:"Upper Pull",focus:["back","biceps","rear-delts"]},{name:"Arms + Shoulders",focus:["shoulders","biceps","triceps"]}]},5:{strength:[{name:"Competition Squat",focus:["legs"]},{name:"Competition Bench",focus:["chest","triceps"]},{name:"Competition Deadlift",focus:["posterior","back"]},{name:"Volume Squat",focus:["legs","core"]},{name:"Volume Bench",focus:["shoulders","chest","arms"]}],aesthetic:[{name:"Chest + Triceps",focus:["chest","triceps"]},{name:"Back + Biceps",focus:["back","biceps"]},{name:"Shoulders + Rear Delts",focus:["shoulders","rear-delts"]},{name:"Legs",focus:["legs","glutes"]},{name:"Arms + Weak Points",focus:["biceps","triceps","core"]}]},6:{strength:[{name:"Heavy Squat",focus:["legs"]},{name:"Heavy Bench",focus:["chest","triceps"]},{name:"Heavy Deadlift",focus:["posterior","back"]},{name:"Speed Squat",focus:["legs","core"]},{name:"Speed Bench",focus:["chest","shoulders"]},{name:"Back + Arms",focus:["back","biceps","triceps"]}],aesthetic:[{name:"Push A (Heavy)",focus:["chest","shoulders","triceps"]},{name:"Pull A (Heavy)",focus:["back","biceps"]},{name:"Legs A (Quad Focus)",focus:["legs","glutes"]},{name:"Push B (Volume)",focus:["chest","shoulders","triceps"]},{name:"Pull B (Volume)",focus:["back","rear-delts","biceps"]},{name:"Legs B (Posterior)",focus:["legs","core"]}]}},Oi={running:{2:["Easy Run","Long Run"],3:["Easy Run","Tempo Run","Long Run"],4:["Easy Run","Tempo Run","Intervals","Long Run"],5:["Easy Run","Tempo Run","Recovery Run","Intervals","Long Run"],6:["Easy Run","Tempo Run","Easy Run","Intervals","Recovery Run","Long Run"]},triathlon:{5:["Swim + Strength","Bike Intervals + Strength","Run + Strength","Swim + Run","Long Brick"],6:["Swim + Strength","Bike Intervals","Run + Strength","Swim + Easy Ride","Run Tempo + Strength","Long Brick"],7:["Swim + Strength","Bike Intervals","Run + Strength","Swim AM / Run PM","Bike + Strength","Run Tempo","Long Brick"]}};function Ta(f,m,x,v,C="full"){const w=[],{multiplier:I,level:M}=x,_=m?.6:1,N=[{name:"Single-Leg Romanian Deadlift",sets:Math.round(3*_),reps:"8-10 each leg",rpe:6,rest:"60s",notes:"Focus on hip stability, not weight. Light dumbbells only.",progression:"Master balance before adding weight. This is injury prevention."},{name:"Bulgarian Split Squat",sets:Math.round(3*_),reps:"10-12 each leg",rpe:6,rest:"60s",notes:"Control descent, drive through front heel. Build single-leg strength.",progression:"Add 5lbs every 2-3 weeks when form is solid."},{name:"Lateral Band Walks",sets:3,reps:"15 each direction",rpe:5,rest:"30s",notes:"Keep tension on band throughout. Glute med activation.",progression:"Use heavier band as it becomes easy."},{name:"Clamshells",sets:3,reps:"15-20 each side",rpe:5,rest:"30s",notes:"External hip rotation. Critical for knee health in running.",progression:"Add resistance band when bodyweight is easy."}],P=[{name:"Dead Bug",sets:3,reps:"10 each side",rpe:5,rest:"45s",notes:"Keep lower back pressed to floor. Anti-extension strength.",progression:"Slow the movement, add holds at end range."},{name:"Pallof Press",sets:3,reps:"10 each side",rpe:6,rest:"45s",notes:"Anti-rotation core work. Essential for swim and run.",progression:"Increase cable weight or add iso holds."},{name:"Side Plank",sets:2,reps:"30-45s each side",rpe:6,rest:"30s",notes:"Hip elevated, straight line from head to feet.",progression:"Add hip dips or raise top leg."},{name:"Bird Dog",sets:3,reps:"8 each side with 3s hold",rpe:5,rest:"45s",notes:"Opposite arm/leg extension with neutral spine.",progression:"Add resistance band around foot."}],j=[{name:"Band Pull-Aparts",sets:3,reps:"15-20",rpe:5,rest:"30s",notes:"Squeeze shoulder blades together. Rotator cuff health.",progression:"Essential for swim shoulder health - never skip."},{name:"External Rotation (Cable/Band)",sets:2,reps:"15 each arm",rpe:5,rest:"30s",notes:"Elbow pinned to side, rotate out. Swim-specific prehab.",progression:"Keep light - this is prehab, not strength training."},{name:"Face Pulls",sets:3,reps:"15",rpe:5,rest:"30s",notes:"Pull to face, external rotate at end. Rear delt & rotator cuff.",progression:"Keep light - focus on squeeze at end range."}];switch(C){case"hip":w.push(...N),w.push(P[0]);break;case"core":w.push(...P),w.push(N[2]);break;case"prehab":w.push(...j),w.push(P[0]),w.push(N[2]);break;default:w.push(...N),w.push(...P.slice(0,3)),w.push(...j.slice(0,2)),(M==="advanced"||M==="elite")&&w.push(P[3]);break}return w}function Hh(f,m,x,v,C,w,I){const{level:M}=v;switch(m==="Taper"||m==="Peak"||m.includes("Build"),f){case"Swim + Run":return{name:"Swim / Run Double",duration:90,exercises:[{name:"Swim - Technique Focus",sets:1,reps:x?"1500m":"2000-2500m",pace:"CSS pace (threshold)",heartRateZone:"Zone 2-3",rpe:6,rest:"N/A",notes:"Focus on catch and pull technique. Include drill work.",progression:`Week ${w}: Build swim volume gradually.`},{name:"Run - Easy/Moderate",sets:1,reps:x?"30 min":"45-60 min",pace:C?.easyPace||"9:00-9:30/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy effort. Recovery between sessions.",progression:"Separate by 4-6 hours if possible."}]};case"Swim AM / Run PM":return{name:"AM Swim / PM Run",duration:105,exercises:[{name:"Morning Swim",sets:1,reps:M==="elite"?"3000-3500m":"2000-2500m",pace:"Mixed: warm up + main set + cool down",heartRateZone:"Zone 2-4",rpe:7,rest:"N/A",notes:"Main set at CSS pace. Include 4x100 at race pace.",progression:`Week ${w}: Focus on stroke efficiency.`},{name:"Evening Run",sets:1,reps:x?"40 min":"50-60 min",pace:C?.easyPace||"9:00/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy effort, focus on cadence and form.",progression:"Build run fitness off swim fatigue."}]};case"Bike Intervals":case"Bike":return{name:"Bike Intervals",duration:x?60:75,exercises:[{name:"Bike Interval Session",sets:x?3:M==="elite"?6:5,reps:"5 min @ FTP",pace:"FTP (Functional Threshold Power)",heartRateZone:"Zone 4",rpe:8,rest:"2 min easy spin",notes:"Maintain steady power throughout interval. Cadence 85-95.",progression:`Week ${w}: Add 1 interval every 2 weeks.`}]};case"Swim + Strength":return{name:"Swim + Injury Prevention",duration:75,exercises:[{name:"Technique Swim",sets:1,reps:"1500-2000m",pace:"Easy-moderate",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Drill-focused: catch-up drill, fingertip drag, 6-kick switch.",progression:"Quality over quantity on strength days."}],strengthSession:Ta(m,x,v)};case"Run Tempo":return{name:"Tempo Run",duration:60,exercises:[{name:"Warm-up",sets:1,reps:"1.5 miles",pace:C?.easyPace||"9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include strides at end of warm-up."},{name:"Tempo",sets:1,reps:x?"15 min":M==="elite"?"30 min":"20-25 min",pace:C?.tempoPace||"7:30/mi",heartRateZone:"Zone 3-4",rpe:7,rest:"N/A",notes:"Comfortably hard. Should be able to speak in short sentences.",progression:`Week ${w}: Extend tempo duration by 2-3 min/week.`},{name:"Cool-down",sets:1,reps:"1 mile",pace:C?.recoveryPace||"10:00/mi",heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog + stretching."}]};case"Long Bike/Run Brick":case"Long Brick":case"Long Ride + Run Brick":const _=M==="elite"?3:M==="advanced"?2.5:2,N=M==="elite"?6:M==="advanced"?5:4;return{name:"Long Brick Session",duration:_*60+45,exercises:[{name:"Long Ride",sets:1,reps:`${x?_-.5:_} hours`,pace:"Aerobic (Zone 2)",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Practice race nutrition: 60-90g carbs/hour. Last 20 min at race pace.",progression:`Week ${w}: Key session. Build bike endurance.`},{name:"Brick Run (off bike)",sets:1,reps:`${x?N-1:N} miles`,pace:"Start easy, settle into race pace",heartRateZone:"Zone 2-3",rpe:6,rest:"N/A",notes:"T2 practice. Quick transition, find your legs.",progression:"Critical for race-day leg turnover."}]};case"Swim + Easy Ride":return{name:"Swim + Easy Ride",duration:90,exercises:[{name:"Swim - Aerobic",sets:1,reps:"2000-2500m",pace:"Easy-moderate",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Continuous swim, focus on bilateral breathing."},{name:"Easy Spin",sets:1,reps:"45-60 min",pace:"Recovery",heartRateZone:"Zone 1-2",rpe:4,rest:"N/A",notes:"Active recovery. High cadence, low power."}]};case"Easy Run":return{name:"Easy Run",duration:45,exercises:[{name:"Easy Run",sets:1,reps:x?"30 min":"45 min",pace:C?.easyPace||"9:00-9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Truly easy. Recovery run.",progression:"Keep easy days easy."}]};case"Bike Intervals + Strength":return{name:"Bike Intervals + Strength",duration:90,exercises:[{name:"Bike Interval Session",sets:x?3:M==="elite"?6:5,reps:"5 min @ FTP",pace:"FTP (Functional Threshold Power)",heartRateZone:"Zone 4",rpe:8,rest:"2 min easy spin",notes:"Quality intervals. Maintain power throughout.",progression:`Week ${w}: Key bike session.`}],strengthSession:Ta(m,x,v,w,"core")};case"Run + Strength":return{name:"Run + Strength",duration:85,exercises:[{name:"Easy-Moderate Run",sets:1,reps:x?"35 min":"45-50 min",pace:C?.easyPace||"9:00/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Comfortable effort. Focus on form and cadence.",progression:`Week ${w}: Build aerobic base.`}],strengthSession:Ta(m,x,v,w,"hip")};case"Bike + Strength":return{name:"Bike + Strength",duration:80,exercises:[{name:"Easy Aerobic Ride",sets:1,reps:x?"45 min":"60 min",pace:"Aerobic (Zone 2)",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy spinning. Active recovery ride with strength after.",progression:"Keep intensity low to allow for PM strength."}],strengthSession:Ta(m,x,v,w,"full")};case"Run Tempo + Strength":return{name:"Run Tempo + Strength",duration:95,exercises:[{name:"Warm-up",sets:1,reps:"1 mile",pace:C?.easyPace||"9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Easy jog with strides."},{name:"Tempo",sets:1,reps:x?"12 min":M==="elite"?"25 min":"18-20 min",pace:C?.tempoPace||"7:30/mi",heartRateZone:"Zone 3-4",rpe:7,rest:"N/A",notes:"Comfortably hard. Shorter than standalone tempo to allow for strength.",progression:`Week ${w}: Quality over quantity.`},{name:"Cool-down",sets:1,reps:"0.5 miles",pace:C?.recoveryPace||"10:00/mi",heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog."}],strengthSession:Ta(m,x,v,w,"prehab")};default:return{name:f,duration:60,exercises:[{name:f,sets:1,reps:"60 min",rpe:6,rest:"N/A",notes:"Moderate effort."}]}}}function jc(f){return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][f]}function Gh(f){const m={2:[0,3],3:[0,2,4],4:[0,1,3,4],5:[0,1,2,4,5],6:[0,1,2,3,4,5],7:[0,1,2,3,4,5,6]};return m[f]||m[4]}const Gl={squat:{main:{name:"Back Squat",percentages:{Base:{min:70,max:80,reps:"5-8",sets:4},Build:{min:80,max:87.5,reps:"3-5",sets:5},Peak:{min:87.5,max:95,reps:"1-3",sets:5},Deload:{min:50,max:60,reps:"5-8",sets:3}},rest:"3-4 min",notes:"Break at hips, knees track over toes, drive through heels"},variations:[{name:"Pause Squat",percent:.8,reps:"3-5",sets:3,notes:"2-3 sec pause in hole"},{name:"Front Squat",percent:.75,reps:"4-6",sets:3,notes:"Upright torso, elbows high"},{name:"Box Squat",percent:.85,reps:"3-5",sets:3,notes:"Pause on box, explode up"}],accessories:[{name:"Leg Press",reps:"8-12",sets:3,notes:"Control descent, full ROM",isBodyweight:!1},{name:"Walking Lunges",reps:"10-12 each",sets:3,notes:"Long stride, upright torso",isBodyweight:!0},{name:"Leg Extensions",reps:"12-15",sets:3,notes:"Squeeze at top, slow negative",isBodyweight:!1},{name:"Leg Curls",reps:"10-12",sets:3,notes:"Squeeze hamstrings at top",isBodyweight:!1},{name:"Bulgarian Split Squat",reps:"8-10 each",sets:3,notes:"Vertical shin on front leg",isBodyweight:!0},{name:"Goblet Squat",reps:"10-12",sets:3,notes:"Elbows inside knees at bottom",isBodyweight:!1}]},bench:{main:{name:"Bench Press",percentages:{Base:{min:70,max:80,reps:"5-8",sets:4},Build:{min:80,max:87.5,reps:"3-5",sets:5},Peak:{min:87.5,max:95,reps:"1-3",sets:5},Deload:{min:50,max:60,reps:"5-8",sets:3}},rest:"3-4 min",notes:"Retract scapula, arch back, leg drive, control descent"},variations:[{name:"Close-Grip Bench",percent:.85,reps:"4-6",sets:3,notes:"Elbows tucked, tricep focus"},{name:"Paused Bench Press",percent:.8,reps:"3-5",sets:3,notes:"2 sec pause on chest"},{name:"Incline Bench Press",percent:.75,reps:"6-8",sets:3,notes:"30-45 degree incline"},{name:"Floor Press",percent:.85,reps:"4-6",sets:3,notes:"Pause at floor, lockout strength"}],accessories:[{name:"Dumbbell Bench Press",reps:"8-12",sets:3,notes:"Full ROM, squeeze at top",isBodyweight:!1},{name:"Dumbbell Fly",reps:"10-12",sets:3,notes:"Slight bend in elbows, stretch at bottom",isBodyweight:!1},{name:"Tricep Pushdowns",reps:"12-15",sets:3,notes:"Lock elbows, squeeze triceps",isBodyweight:!1},{name:"Skull Crushers",reps:"10-12",sets:3,notes:"Keep elbows pointed up",isBodyweight:!1},{name:"Dips",reps:"8-12",sets:3,notes:"Lean forward for chest, upright for triceps",isBodyweight:!0},{name:"Overhead Tricep Extension",reps:"10-12",sets:3,notes:"Full stretch at bottom",isBodyweight:!1}]},deadlift:{main:{name:"Deadlift",percentages:{Base:{min:70,max:80,reps:"4-6",sets:3},Build:{min:80,max:87.5,reps:"2-4",sets:4},Peak:{min:87.5,max:95,reps:"1-3",sets:4},Deload:{min:50,max:60,reps:"4-6",sets:2}},rest:"4-5 min",notes:"Brace core, chest up, hinge at hips, bar close to body"},variations:[{name:"Deficit Deadlift",percent:.8,reps:"3-5",sets:3,notes:"2-3 inch deficit, speed off floor"},{name:"Romanian Deadlift",percent:.65,reps:"8-10",sets:3,notes:"Hamstring stretch, slight knee bend"},{name:"Paused Deadlift",percent:.75,reps:"2-4",sets:3,notes:"2 sec pause at knee height"},{name:"Block Pull",percent:.9,reps:"2-4",sets:3,notes:"Lockout strength, above knee"}],accessories:[{name:"Barbell Row",reps:"6-10",sets:4,notes:"Pull to lower chest, squeeze lats",isBodyweight:!1},{name:"Good Mornings",reps:"8-10",sets:3,notes:"Hip hinge, hamstring stretch",isBodyweight:!1},{name:"Back Extensions",reps:"12-15",sets:3,notes:"Squeeze glutes at top",isBodyweight:!0},{name:"Pull-ups",reps:"6-10",sets:4,notes:"Full ROM, dead hang to chin over bar",isBodyweight:!0},{name:"Face Pulls",reps:"15-20",sets:3,notes:"External rotation, rear delt focus",isBodyweight:!1},{name:"Lat Pulldown",reps:"10-12",sets:3,notes:"Drive elbows down, squeeze lats",isBodyweight:!1}]},ohp:{main:{name:"Overhead Press",percentages:{Base:{min:70,max:80,reps:"5-8",sets:4},Build:{min:80,max:87.5,reps:"3-5",sets:4},Peak:{min:85,max:92.5,reps:"2-4",sets:4},Deload:{min:50,max:60,reps:"6-8",sets:3}},rest:"2-3 min",notes:"Squeeze glutes, brace core, press straight up, head through at top"},variations:[{name:"Push Press",percent:1.1,reps:"3-5",sets:3,notes:"Small dip, explosive drive"},{name:"Z Press",percent:.7,reps:"6-8",sets:3,notes:"Seated on floor, no leg drive"},{name:"Seated Dumbbell Press",percent:.8,reps:"8-10",sets:3,notes:"Neutral grip option"}],accessories:[{name:"Lateral Raises",reps:"12-15",sets:3,notes:"Lead with elbows, control descent",isBodyweight:!1},{name:"Rear Delt Fly",reps:"12-15",sets:3,notes:"Squeeze shoulder blades together",isBodyweight:!1},{name:"Upright Rows",reps:"10-12",sets:3,notes:"Elbows above wrists at top",isBodyweight:!1},{name:"Front Raises",reps:"10-12",sets:3,notes:"Thumbs up, raise to eye level",isBodyweight:!1},{name:"Arnold Press",reps:"8-12",sets:3,notes:"Rotate palms during press",isBodyweight:!1}]}};function Ar(f,m,x){if(x==="Deload")return f;const[v,C]=f.split("-").map(Number),w=Math.min(m-1,2);return`${v+w}-${C+w}`}function Vl(f,m,x,v){if(!f)return null;const C=v.percentages[m]||v.percentages.Base,{min:w,max:I}=C;let M;return M=w,Math.round(f*M/100/5)*5}function T0(f,m,x,v,C,w=[]){const I=[],M=v?.level||"intermediate",_=v?.multiplier||1,N=(C-1)%4+1,P=x?"Deload":m,j=x?.6:(m==="Build"?1.1:1)*_,$=V=>{const z=w.find(Z=>Z.id===V);return z?{current1RM:parseFloat(z.current1RM)||parseFloat(z.workingWeight)||null,target1RM:parseFloat(z.target1RM)||null}:null};if(f.includes("legs")||f.includes("Squat")){const V=$("squat"),z=Gl.squat,Z=z.main.percentages[P],oe=Vl(V?.current1RM,P,N,z.main),xe=oe&&V?.current1RM?Math.round(oe/V.current1RM*100):null;if(I.push({name:z.main.name,sets:Math.round(Z.sets*j),reps:Ar(Z.reps,N,P),rpe:x?6:M==="elite"?8.5:8,rest:z.main.rest,notes:z.main.notes,startingWeight:oe?`${oe} lbs (${xe}% of 1RM)`:"Start light, find working weight",current1RM:V?.current1RM?`${V.current1RM} lbs`:null,target1RM:V?.target1RM?`${V.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${Z.reps.split("-")[1]} reps on all sets  add 5 lbs next session`}),!x){const ne=z.variations[m==="Peak"?2:0],be=oe?Math.round(oe*ne.percent/5)*5:null;I.push({name:ne.name,sets:Math.round(ne.sets*j),reps:ne.reps,rpe:7,rest:"3 min",notes:ne.notes,startingWeight:be?`${be} lbs (~${Math.round(ne.percent*100)}% of working weight)`:null,isVariation:!0,progression:"Follow main lift progression"})}const fe=x?1:M==="beginner"?2:M==="intermediate"?3:4;z.accessories.slice(0,fe).forEach(ne=>{I.push({name:ne.name,sets:Math.round(ne.sets*j),reps:Ar(ne.reps,N,P),rpe:7,rest:"90s",notes:ne.notes,isAccessory:!0,progression:`Double progression: ${ne.reps.split("-")[0]}${ne.reps.split("-")[1]} reps, then add weight`})})}if(f.includes("chest")||f.includes("Bench")){const V=$("bench"),z=Gl.bench,Z=z.main.percentages[P],oe=Vl(V?.current1RM,P,N,z.main),xe=oe&&V?.current1RM?Math.round(oe/V.current1RM*100):null;if(I.push({name:z.main.name,sets:Math.round(Z.sets*j),reps:Ar(Z.reps,N,P),rpe:x?6:M==="elite"?8.5:8,rest:z.main.rest,notes:z.main.notes,startingWeight:oe?`${oe} lbs (${xe}% of 1RM)`:"Start light, find working weight",current1RM:V?.current1RM?`${V.current1RM} lbs`:null,target1RM:V?.target1RM?`${V.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${Z.reps.split("-")[1]} reps on all sets  add 2.5 lbs next session`}),!x){const ne=m==="Peak"?z.variations[3]:z.variations[0],be=oe?Math.round(oe*ne.percent/5)*5:null;I.push({name:ne.name,sets:Math.round(ne.sets*j),reps:ne.reps,rpe:7,rest:"2-3 min",notes:ne.notes,startingWeight:be?`${be} lbs`:null,isVariation:!0,progression:"Follow main lift progression"})}const fe=x?1:M==="beginner"?2:M==="intermediate"?3:4;z.accessories.slice(0,fe).forEach(ne=>{I.push({name:ne.name,sets:Math.round(ne.sets*j),reps:Ar(ne.reps,N,P),rpe:7,rest:"90s",notes:ne.notes,isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(f.includes("posterior")||f.includes("Deadlift")){const V=$("deadlift"),z=Gl.deadlift,Z=z.main.percentages[P],oe=Vl(V?.current1RM,P,N,z.main),xe=oe&&V?.current1RM?Math.round(oe/V.current1RM*100):null;if(I.push({name:z.main.name,sets:Math.round(Z.sets*j),reps:Ar(Z.reps,N,P),rpe:x?6:M==="elite"?8.5:8,rest:z.main.rest,notes:z.main.notes,startingWeight:oe?`${oe} lbs (${xe}% of 1RM)`:"Start light, find working weight",current1RM:V?.current1RM?`${V.current1RM} lbs`:null,target1RM:V?.target1RM?`${V.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${Z.reps.split("-")[1]} reps on all sets  add 5-10 lbs next session`}),!x){const ne=m==="Peak"?z.variations[3]:z.variations[0],be=oe?Math.round(oe*ne.percent/5)*5:null;I.push({name:ne.name,sets:Math.round(ne.sets*j),reps:ne.reps,rpe:7,rest:"3-4 min",notes:ne.notes,startingWeight:be?`${be} lbs`:null,isVariation:!0,progression:"Follow main lift progression"})}const fe=x?1:M==="beginner"?2:M==="intermediate"?3:4;z.accessories.slice(0,fe).forEach(ne=>{I.push({name:ne.name,sets:Math.round(ne.sets*j),reps:Ar(ne.reps,N,P),rpe:7,rest:"90s-2 min",notes:ne.notes,isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(f.includes("shoulders")||f.includes("OHP")){const V=$("ohp"),z=Gl.ohp,Z=z.main.percentages[P],oe=Vl(V?.current1RM,P,N,z.main),xe=oe&&V?.current1RM?Math.round(oe/V.current1RM*100):null;if(I.push({name:z.main.name,sets:Math.round(Z.sets*j),reps:Ar(Z.reps,N,P),rpe:x?6:M==="elite"?8.5:8,rest:z.main.rest,notes:z.main.notes,startingWeight:oe?`${oe} lbs (${xe}% of 1RM)`:"Start light, find working weight",current1RM:V?.current1RM?`${V.current1RM} lbs`:null,target1RM:V?.target1RM?`${V.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${Z.reps.split("-")[1]} reps  add 2.5 lbs`}),!x){const ie=z.variations[0];I.push({name:ie.name,sets:Math.round(ie.sets*j),reps:ie.reps,rpe:7,rest:"2 min",notes:ie.notes,isVariation:!0})}const fe=x?1:M==="beginner"?2:3;z.accessories.slice(0,fe).forEach(ie=>{I.push({name:ie.name,sets:Math.round(ie.sets*j),reps:Ar(ie.reps,N,P),rpe:7,rest:"60-90s",notes:ie.notes,isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(f.includes("back")&&!f.includes("posterior")&&!f.includes("Deadlift")){const V=[{name:"Barbell Row",sets:4,reps:"6-10",rpe:8,rest:"2-3 min",notes:"Pull to lower chest, squeeze lats"},{name:"Weighted Pull-ups",sets:4,reps:"6-10",rpe:8,rest:"2-3 min",notes:"Dead hang to chin over bar"},{name:"Lat Pulldown",sets:3,reps:"10-12",rpe:7,rest:"90s",notes:"Drive elbows down"},{name:"Seated Cable Row",sets:3,reps:"10-12",rpe:7,rest:"90s",notes:"Squeeze at contraction"}],z=x?2:M==="beginner"?3:4;V.slice(0,z).forEach(Z=>{I.push({...Z,sets:Math.round(Z.sets*j),reps:Ar(Z.reps,N,P),isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(f.includes("triceps")||f.includes("arms")){const V=[{name:"Close-Grip Bench Press",sets:3,reps:"6-8",rpe:7,rest:"2 min",notes:"Elbows tucked"},{name:"Tricep Pushdowns",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Lock elbows in place"},{name:"Skull Crushers",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Lower to forehead"}],z=x?1:M==="beginner"?2:3;V.slice(0,z).forEach(Z=>{I.push({...Z,sets:Math.round(Z.sets*j),reps:Ar(Z.reps,N,P),isAccessory:!0,progression:"Double progression: 1012 reps, then +5 lbs"})})}if(f.includes("biceps")||f.includes("arms")){const V=[{name:"Barbell Curls",sets:3,reps:"8-12",rpe:7,rest:"60s",notes:"No swinging"},{name:"Incline Dumbbell Curls",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Full stretch at bottom"},{name:"Hammer Curls",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Neutral grip"}],z=x?1:M==="beginner"?2:3;V.slice(0,z).forEach(Z=>{I.push({...Z,sets:Math.round(Z.sets*j),reps:Ar(Z.reps,N,P),isAccessory:!0,progression:"Double progression: 812 reps, then +5 lbs"})})}if(f.includes("core")){const V=[{name:"Hanging Leg Raises",sets:3,reps:"10-15",rpe:7,rest:"60s",notes:"Control the movement"},{name:"Ab Wheel Rollouts",sets:3,reps:"8-12",rpe:7,rest:"60s",notes:"Full extension"},{name:"Plank",sets:3,reps:"45-60 sec",rpe:6,rest:"45s",notes:"Squeeze glutes, brace core"}],z=x?1:2;V.slice(0,z).forEach(Z=>{I.push({...Z,sets:Math.round(Z.sets*j),isAccessory:!0,progression:"Add reps or hold time, then add weight"})})}return I}function Bc(f,m,x,v,C){const w=[],I=v?.level||"intermediate",M=v?.multiplier||1,N=(x?.5:m==="Build"?1.15:1)*M,P=x?5:I==="elite"?9:I==="advanced"?8.5:8,j=(C-1)%4+1,$=j-1;return f.includes("chest")&&(w.push({name:"Bench Press",sets:Math.round(4*N),reps:`${8+$}-${10+$}`,rpe:P,rest:"2-3 min",notes:"Focus on chest contraction",progression:`Week ${j}/4: Base reps. Add 5lbs at week 4 if all reps hit`}),w.push({name:"Incline Dumbbell Press",sets:Math.round(4*N),reps:`${8+$}-${12+$}`,rpe:P-1,rest:"90s",notes:"30-45 degree incline, control the negative",progression:"Progressive overload: reps  weight  reps"}),w.push({name:"Cable Chest Fly",sets:Math.round(3*N),reps:"12-15",rpe:7,rest:"60s",notes:"Squeeze hard at contraction",progression:"Isolation: focus on mind-muscle connection over weight"}),(I==="advanced"||I==="elite")&&w.push({name:"Weighted Dips",sets:Math.round(3*N),reps:"8-12",rpe:8,rest:"2 min",notes:"Lean forward for chest emphasis",progression:"Add 5lbs when hitting 12 reps"})),f.includes("back")&&(w.push({name:"Weighted Pull-ups",sets:Math.round(4*N),reps:`${6+Math.floor($/2)}-${10+Math.floor($/2)}`,rpe:P,rest:"2-3 min",notes:"Full stretch at bottom, chin over bar",progression:"Add 2.5lbs when hitting top of rep range consistently"}),w.push({name:"Barbell Row",sets:Math.round(4*N),reps:`${6+$}-${10+$}`,rpe:P-1,rest:"2 min",notes:"Squeeze lats at top",progression:"Add 5lbs when form stays solid at top reps"}),w.push({name:"Lat Pulldown",sets:Math.round(3*N),reps:"10-12",rpe:7,rest:"90s",notes:"Drive elbows down, chest up",progression:"Focus on stretch and contraction over weight"}),w.push({name:"Seated Cable Row",sets:Math.round(3*N),reps:"10-12",rpe:7,rest:"90s",notes:"Pull to lower chest, squeeze",progression:"Add weight when form is solid"})),f.includes("shoulders")&&(w.push({name:"Overhead Press",sets:Math.round(4*N),reps:I==="elite"?"5-8":"8-10",rpe:P,rest:"2-3 min",notes:"Strict form, no leg drive",progression:"Add 2.5lbs when all reps completed"}),w.push({name:"Lateral Raises",sets:Math.round(4*N),reps:"12-15",rpe:7,rest:"60s",notes:"Lead with elbows, control the negative",progression:"Add 1 rep per week, then increase weight"}),(I==="advanced"||I==="elite")&&w.push({name:"Cable Lateral Raises",sets:3,reps:"15-20",rpe:8,rest:"45s",notes:"Constant tension, squeeze at top",progression:"Drop sets on final set for extra stimulus"})),(f.includes("legs")||f.includes("glutes"))&&(w.push({name:"Back Squat",sets:Math.round(4*N),reps:I==="elite"?"5-8":"8-10",rpe:P,rest:"3 min",notes:"ATG depth if mobility allows",progression:"Add 5lbs when all reps completed at target RPE"}),w.push({name:"Romanian Deadlift",sets:Math.round(4*N),reps:"8-12",rpe:P-1,rest:"2 min",notes:"Feel the hamstring stretch",progression:"Add 5lbs when form is solid at 12 reps"}),w.push({name:"Leg Press",sets:Math.round(3*N),reps:"10-15",rpe:8,rest:"2 min",notes:"Full range of motion",progression:"Volume work: push the reps before weight"}),w.push({name:"Leg Curls",sets:Math.round(3*N),reps:"12-15",rpe:7,rest:"60s",notes:"Squeeze at top, slow negative",progression:"Focus on contraction quality"}),w.push({name:"Standing Calf Raises",sets:Math.round(4*N),reps:"12-15",rpe:8,rest:"60s",notes:"Full stretch at bottom, pause at top",progression:"Calves respond to frequency - hit 3x/week if lagging"})),f.includes("biceps")&&(w.push({name:"Barbell Curls",sets:Math.round(3*N),reps:"8-12",rpe:8,rest:"90s",notes:"No swinging, squeeze at top",progression:"Add reps first, then weight"}),w.push({name:"Hammer Curls",sets:Math.round(3*N),reps:"10-12",rpe:7,rest:"60s",notes:"Control throughout",progression:"Brachialis focus - great for arm thickness"})),f.includes("triceps")&&(w.push({name:"Tricep Pushdowns",sets:Math.round(3*N),reps:"10-12",rpe:8,rest:"90s",notes:"Lock out at bottom",progression:"Add weight when 12 reps is easy"}),w.push({name:"Overhead Tricep Extension",sets:Math.round(3*N),reps:"12-15",rpe:7,rest:"60s",notes:"Feel the stretch at bottom",progression:"Long head focus - crucial for tricep size"})),f.includes("rear-delts")&&w.push({name:"Face Pulls",sets:Math.round(4*N),reps:"15-20",rpe:7,rest:"60s",notes:"External rotation at top",progression:"Health exercise: keep light, focus on form"}),f.includes("core")&&w.push({name:"Hanging Leg Raises",sets:3,reps:"12-15",rpe:8,rest:"60s",notes:"Control the movement",progression:"Add weight (hold DB) when hitting 15 reps"}),w}function R0(f,m,x,v,C,w,I,M,_=null,N=null){const{multiplier:P,level:j}=C,V=(w?.goalPace||"").match(/(\d+):(\d+)/),z=V?parseFloat(V[1])+parseFloat(V[2])/60:null,Z=Wh(N,z,C),oe=v?Math.round(v*1.15):Z,xe=Math.max(Z,oe),fe=Uh(M,xe,I,m,v,N,C),ie=zh(_,I,C),ne=m==="Taper"?.6:m==="Peak"?1.1:m.includes("Build")?1:.85;switch(f){case"Easy Run":{const be=Math.round(fe*.2*ne*10)/10;return{name:"Easy Run",duration:Math.round(be*10),exercises:[{name:"Easy Run",sets:1,reps:`${be} miles`,pace:w.easyPace,heartRateZone:"Zone 2 (65-75% max HR)",rpe:4,rest:"N/A",notes:"Should be able to hold a conversation. If breathing hard, slow down.",progression:`Week ${I}: ${be} mi. Max 5% increase per week.`}]}}case"Tempo Run":{const de=Math.round(fe*.15*ne*10)/10,X=1;return{name:"Tempo Run",duration:Math.round((1.5+de+X)*9),exercises:[{name:"Warm-up",sets:1,reps:`${1.5} miles`,pace:w.easyPace,heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include 4x100m strides at end"},{name:"Tempo",sets:1,reps:`${de} miles`,pace:w.tempoPace,heartRateZone:"Zone 3-4 (80-88% max HR)",rpe:7,rest:"N/A",notes:"Comfortably hard - can speak in short sentences only",progression:`Week ${I}: ${de} mi tempo. Lactate threshold training.`},{name:"Cool-down",sets:1,reps:`${X} miles`,pace:w.recoveryPace,heartRateZone:"Zone 1-2",rpe:3,rest:"N/A",notes:"Very easy, let HR come down"}]}}case"Intervals":{const be=j==="elite"?8:j==="advanced"?6:5,de=j==="elite"?"800m":"400m",X=x?Math.floor(be/2):m==="Peak"?be+2:be;return{name:"Interval Training",duration:55,exercises:[{name:"Warm-up",sets:1,reps:"1.5 miles",pace:w.easyPace,heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include dynamic stretches and 4x100m strides"},{name:`${de} Repeats`,sets:X,reps:de,pace:w.intervalPace,heartRateZone:"Zone 4-5 (88-95% max HR)",rpe:9,rest:j==="elite"?"2:00 jog":"1:30 jog",notes:`Consistent pace each rep. Target ${w.intervalPace}`,progression:`Week ${I}: ${X}x${de}. Add 1 rep every 2-3 weeks.`},{name:"Cool-down",sets:1,reps:"1 mile",pace:w.recoveryPace,heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog + static stretching"}]}}case"Long Run":{const be=Math.round(fe*.3*ne*10)/10,de=j==="elite"?22:j==="advanced"?20:18,X=Math.min(be,ie,de);return{name:"Long Run",duration:Math.round(X*9.5),exercises:[{name:"Long Run",sets:1,reps:`${X} miles`,pace:w.longRunPace,heartRateZone:"Zone 2 (start)  Zone 3 (finish)",rpe:6,rest:"N/A",notes:m==="Peak"?`Practice race nutrition. Last 3mi at ${w.goalPace} (goal pace)`:"Practice race nutrition. Keep even effort throughout.",progression:`Week ${I}: ${X} mi. Current cap: ${ie}mi (increases ~1mi/2wks). Peak: ${de}mi.`}]}}case"Recovery Run":return{name:"Recovery Run",duration:30,exercises:[{name:"Recovery Run",sets:1,reps:"3-4 miles",pace:w.recoveryPace,heartRateZone:"Zone 1 (60-65% max HR)",rpe:3,rest:"N/A",notes:"Truly easy. This should feel almost too slow. Promotes recovery.",progression:"Keep consistent - dont increase recovery run distance"}]};default:return{name:f,duration:45,exercises:[{name:f,sets:1,reps:"45 min",rpe:6,rest:"N/A",notes:"Moderate steady effort"}]}}}function Vh(f,m,x,v,C){const w=[],{multiplier:I,level:M}=v;w.push({name:M==="elite"?"EMOM Circuit":"HIIT Circuit",sets:x?2:Math.round(4*I),reps:M==="elite"?"45s work / 15s rest":"30s work / 30s rest",rpe:9,rest:"2 min between rounds",notes:M==="elite"?"Burpees, box jumps, KB swings, battle ropes":"Max effort during work intervals",progression:`Week ${C}: Add 1 round every 2 weeks`});const _=Bc(f,m,x,v,C);return w.push(..._.slice(0,4)),x||w.push({name:M==="elite"?"Assault Bike":"Incline Walk",sets:1,reps:M==="elite"?"10 min intervals":"15-20 min",rpe:M==="elite"?8:5,rest:"N/A",notes:M==="elite"?"30s sprint / 30s recovery":"10-12% incline, 3.0-3.5 mph",progression:"Add 5 min per week or increase intensity"}),w}function s0(f){return["Tempo Run","Intervals","Long Run","Interval Training"].includes(f)}function Xh(f,m,x,v,C,w,I,M,_,N,P,j,$,V,z){const Z=[],oe=C[f]||C[4],xe=oe.map((ee,Y)=>({runType:ee,isHard:s0(ee),isLongRun:ee==="Long Run",dayIndex:Y})),fe=xe.findIndex(ee=>ee.isLongRun),ie=3,ne=[],be=[];xe.forEach((ee,Y)=>{const Ce=fe!==-1&&Y===fe-1;v&&!ee.isHard&&!Ce&&!ee.isLongRun&&ne.push(Y)});const de={2:[0,3],3:[0,2,4],4:[0,1,3,4],5:[0,1,2,4,5],6:[0,1,2,3,4,5],7:[0,1,2,3,4,5,6]},X=de[f]||de[4],me=[];for(let ee=0;ee<7;ee++){const Y=fe!==-1&&X.indexOf(ee)===fe-1;!(X.indexOf(ee)!==-1&&X.indexOf(ee)<oe.length)&&!Y&&me.push(ee)}const ue=ne.length,Ae=Math.max(0,ie-ue);for(let ee=0;ee<Ae&&ee<me.length;ee++)be.push(me[ee]);ne.length+be.length<ie&&v&&xe.forEach((ee,Y)=>{ne.length+be.length>=ie||!ne.includes(Y)&&!ee.isLongRun&&ne.push(Y)});for(let ee=0;ee<7;ee++){const Y=X.indexOf(ee),Ce=Y!==-1,B=jc(ee);if(!Ce){Z.push({day:ee+1,dayName:B,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const pe=[],te=Y<oe.length?oe[Y]:null;if(te){const ce=R0(te,M,_,j,I,w,N,P,$,z);pe.push({time:"AM",type:"endurance",focus:te,duration:ce.duration,exercises:ce.exercises});const q=s0(te),H=fe!==-1&&Y===fe-1;if(v&&!q&&!H&&x==="strength"){const D=Y%2===0?["chest","shoulders","triceps"]:["back","biceps","core"],U=Bc(D,M,!0,I,N).slice(0,4);pe.push({time:"PM",type:"strength",focus:"Supplemental Strength",duration:35,exercises:U,notes:"Keep intensity moderate - recovery is priority"})}}else if(be.includes(ee)){const q=T0(["legs","core","posterior"],M,_,I,N,V);pe.push({time:"ANY",type:"strength",focus:"Full Body Strength",duration:I.level==="elite"?75:60,exercises:q,notes:"Primary strength day - can push intensity"})}Z.push({day:ee+1,dayName:B,name:pe.map(ce=>ce.focus).join(" / ")||"Active Recovery",isRestDay:pe.length===0,isDeload:_,sessions:pe})}return Z}function Zh(f){f||(console.error("generateProgram called with no formData"),f={});let{programType:m="strength",programSubtype:x="powerlifting",desiredTrainingDays:v=4,enableHybrid:C=!1,secondaryProgramType:w="",allowDoubleDays:I=!1,currentWeeklyMileage:M=0,longestRecentRun:_=0,vacations:N=[],targetFinishHours:P="",targetFinishMinutes:j="",targetFinishSeconds:$="",raceDistance:V="",baselineRaceDistance:z="",baselineTimeHours:Z="",baselineTimeMinutes:oe="",baselineTimeSeconds:xe="",strengthGoals:fe=[],programStartDate:ie=""}=f;v=parseInt(v)||4,v<2&&(v=2),v>7&&(v=7);const ne=x==="triathlon";ne&&(C=!0,w="strength",I=!0,v<5&&(v=5));const be=Dh(f),{totalWeeks:de,weeksUntilGoal:X}=Ph(f),me=Bh(de,m,x),ue=Gh(v),Ae=[P,j,$].filter(Boolean).join(":"),Ue=[Z,oe,xe].filter(Boolean).join(":"),ee=Fh(Ae,V,Ue,z),Y=parseFloat(M)||null,Ce=parseFloat(_)||null;let B="aesthetic";m==="strength"&&(B="strength");const pe=r0[Math.min(v,6)]?.[B]||r0[4][B],te=me[0]||"Base",ce=1,q=te==="Deload"||te==="Taper";let H=[];if(ne){const U=Oi.triathlon[v]||Oi.triathlon[5],Ie={4:[0,2,4,5],5:[0,1,3,4,5],6:[0,1,2,4,5,6],7:[0,1,2,3,4,5,6]},_e=Ie[v]||Ie[5];for(let ye=0;ye<7;ye++){const he=_e.indexOf(ye),Be=he!==-1,Me=jc(ye);if(!Be){H.push({day:ye+1,dayName:Me,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const Oe=U[he]||"Easy Run",Le=Hh(Oe,te,q,be,ee,ce),Je=[];if(Oe.includes("Strength")){const sr=Le.strengthSession||[],at=Oe.toLowerCase().includes("swim"),Gn=Oe.toLowerCase().includes("bike");Oe.toLowerCase().includes("run")||Oe.toLowerCase().includes("tempo");const vn=Le.exercises.filter(Rn=>!Rn.name.toLowerCase().includes("strength")&&!Rn.name.toLowerCase().includes("prevention"));if(vn.length>0){const Rn=at?"swim":Gn?"bike":"run",Dt=at?"Technique Swim":Oe.includes("Intervals")?"Bike Intervals":Oe.includes("Tempo")?"Tempo Run":Gn?"Easy Bike":"Easy-Moderate Run";Je.push({time:"AM",type:Rn,focus:Dt,duration:Math.round(Le.duration*.55),exercises:vn})}if(sr.length>0){const Rn=Oe.includes("Swim")?"Full Injury Prevention":Oe.includes("Run + Strength")?"Hip & Glute Stability":Oe.includes("Bike + Strength")?"Core & Stability":Oe.includes("Tempo")?"Prehab & Mobility":"Core & Stability";Je.push({time:"PM",type:"strength",focus:Rn,duration:35,exercises:sr,notes:"Triathlon injury prevention: NOT hypertrophy. Focus on stability & resilience."})}}else Oe.includes("/")||Oe.includes("+")?Le.exercises.length>=2?(Je.push({time:"AM",type:Le.exercises[0].name.toLowerCase().includes("swim")?"swim":Le.exercises[0].name.toLowerCase().includes("bike")?"bike":"run",focus:Le.exercises[0].name,duration:Math.round(Le.duration*.5),exercises:[Le.exercises[0]]}),Je.push({time:"PM",type:Le.exercises[1].name.toLowerCase().includes("swim")?"swim":Le.exercises[1].name.toLowerCase().includes("bike")?"bike":"run",focus:Le.exercises[1].name,duration:Math.round(Le.duration*.5),exercises:[Le.exercises[1]]})):Je.push({time:"ANY",type:"triathlon",focus:Oe,duration:Le.duration,exercises:Le.exercises}):Oe.includes("Brick")?Je.push({time:"AM",type:"brick",focus:"Long Brick",duration:Le.duration,exercises:Le.exercises,notes:"Key session: practice race transitions"}):Je.push({time:"ANY",type:Oe.toLowerCase().includes("swim")?"swim":Oe.toLowerCase().includes("bike")?"bike":"run",focus:Oe,duration:Le.duration,exercises:Le.exercises});H.push({day:ye+1,dayName:Me,name:Je.map(sr=>sr.focus).join(" / "),isRestDay:!1,isDeload:q,sessions:Je})}}else if(C&&m==="endurance"&&(w==="strength"||w==="aesthetic")){const U=x==="triathlon"?Oi.triathlon:Oi.running;H=Xh(v,m,w,I,U,ee,be,te,q,ce,de,Y,Ce,fe,V)}else for(let U=0;U<7;U++){const Ie=ue.includes(U),_e=jc(U);if(!Ie){H.push({day:U+1,dayName:_e,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const ye=ue.indexOf(U),he=pe.length>0?ye%pe.length:0,Be=pe[he]||{name:"Full Body",focus:["legs","chest","back"]},Me=[];if(m==="endurance"){const Le=(x==="triathlon"?Oi.triathlon:Oi.running)[v]?.[ye]||"Easy Run",Je=R0(Le,te,q,Y,be,ee,ce,de,Ce,V);Me.push({time:"AM",type:"endurance",focus:Le,duration:Je.duration,exercises:Je.exercises})}else if(m==="strength"){const Oe=T0(Be.focus,te,q,be,ce,fe);Me.push({time:"ANY",type:"strength",focus:Be.name,duration:be?.level==="elite"?90:75,exercises:Oe})}else if(m==="aesthetic"){const Oe=Bc(Be.focus,te,q,be,ce);Me.push({time:"ANY",type:"hypertrophy",focus:Be.name,duration:be?.level==="elite"?75:60,exercises:Oe})}else if(m==="fatloss"){const Oe=Vh(Be.focus,te,q,be,ce);Me.push({time:"ANY",type:"metabolic",focus:Be.name,duration:50,exercises:Oe})}C&&w==="endurance"&&I&&Me.push({time:"PM",type:"endurance",focus:"Easy Run",duration:30,exercises:[{name:"Easy Run",sets:1,reps:"30 min",pace:ee?.recoveryPace||"10:00-10:30/mi",heartRateZone:"Zone 1-2",rpe:4,rest:"N/A",notes:"Recovery pace only - prioritize strength recovery"}]}),H.push({day:U+1,dayName:_e,name:Me.map(Oe=>Oe.focus).join(" / "),isRestDay:!1,isDeload:q,sessions:Me})}return{name:Yh(m,x,be.level),description:`${be.level.charAt(0).toUpperCase()+be.level.slice(1)}-level ${m} program with ${de}-week periodization. Max 5% weekly volume increase.`,mesocycleWeeks:de,totalWeeks:de,currentWeek:1,currentPhase:me[0],phases:me,athleteLevel:be.level,athleteScore:be.score,primaryGoal:m,primarySubtype:x,secondaryGoal:w||null,secondarySubtype:f.secondarySubtype||null,isHybrid:C||!1,allowDoubleDays:I||!1,daysPerWeek:v,vacations:N,weeksUntilGoal:X,baseline:{endurance:m==="endurance"?{currentMileage:Y,longestRecentRun:Ce,referenceRace:z?{distance:z,time:Ue}:null}:null,strength:m==="strength"?{lifts:fe.filter(U=>U.current1RM).map(U=>({exercise:U.label,current1RM:parseFloat(U.current1RM),target1RM:parseFloat(U.target1RM)}))}:null},paces:m==="endurance"?ee:null,generatedAt:new Date().toISOString(),startDate:ie||new Date().toISOString().split("T")[0],weeklySchedule:H,progressionRules:{strengthIncrease:be.level==="elite"?"Micro-load 1-2.5lbs when RPE allows. Prioritize technical consistency.":"Add 2.5-5lbs per week when all reps completed at target RPE.",volumeIncrease:"Add 1 set per exercise every 2-3 weeks during Build phase.",mileageIncrease:"Max 5% weekly mileage increase. Never more.",deloadProtocol:`Every ${be.level==="elite"?"3rd":"4th"} week: 50% volume, maintain intensity at RPE 6-7.`},dynamicAdjustments:{missedWorkouts:"Program will auto-adjust if workouts are missed.",nutritionTracking:"Calorie targets adjust based on progress.",goalTracking:"Weekly check-ins to ensure you stay on track."}}}function Yh(f,m,x){const v=x==="elite"?"Elite ":x==="advanced"?"Advanced ":"";return{endurance:{running:`${v}Running Program`,marathon:`${v}Marathon Prep`,cycling:`${v}Cycling Performance`,swimming:`${v}Swim Program`,triathlon:`${v}Triathlon Builder`},strength:{powerlifting:`${v}Powerlifting Protocol`,olympic:`${v}Olympic Lifting`,strongman:`${v}Strongman Training`},aesthetic:{hypertrophy:`${v}Hypertrophy Program`,"lean-muscle":`${v}Lean Gains`,recomp:`${v}Body Recomposition`},fatloss:{aggressive:`${v}Rapid Fat Loss`,moderate:`${v}Sustainable Shred`,slow:`${v}Gradual Cut`}}[f]?.[m]||`${v}${f.charAt(0).toUpperCase()+f.slice(1)} Program`}const i0=[{id:"squat",label:"Back Squat",icon:""},{id:"bench",label:"Bench Press",icon:""},{id:"deadlift",label:"Deadlift",icon:""},{id:"ohp",label:"Overhead Press",icon:""}],_a=[{id:"recomp",label:"Recomp",desc:"Lose fat, build muscle (Recommended)",icon:"",multiplier:1,detail:"Eat at maintenance with high protein. Gradual, sustainable progress."},{id:"gain",label:"Gain Weight",desc:"Calorie surplus for faster gains",icon:"",multiplier:.8,detail:"Better recovery, faster strength gains. Best for building muscle."},{id:"maintain",label:"Maintain",desc:"Keep current weight",icon:"",multiplier:1,detail:"Stable energy levels, steady progress."},{id:"lose",label:"Lose Weight",desc:"Calorie deficit (slower progress)",icon:"",multiplier:1.4,detail:"Less recovery, reduced energy. Strength gains will be slower."}];function a0(f,m){return!f||!m||m<1?null:m===1?f:Math.round(f*(1+m/30))}function Kh(f,m,x,v){const C=m-f;if(C<=0)return{weeks:8,reason:"maintenance",monthlyRate:0};const w={beginner:30,intermediate:15,advanced:8,elite:4},M=(_a.find($=>$.id===v)||_a[0]).multiplier,_=w[x]||w.intermediate,N=Math.round(_/M),P=Math.ceil(C/N);return{weeks:Math.max(8,P*4),monthlyRate:N,reason:"calculated",nutritionImpact:M!==1?M<1?"faster":"slower":"normal"}}function l0(){return new Date().toISOString().split("T")[0]}function Sc(f,m){const x=f?new Date(f):new Date;return x.setDate(x.getDate()+m*7),x.toISOString().split("T")[0]}function qh(f,m){const x=new Date(f),C=new Date(m)-x;return Math.round(C/(1e3*60*60*24*7))}function Qh({strengthGoals:f,strengthGoalDate:m,programStartDate:x,nutritionGoal:v,experienceLevel:C="intermediate",bodyFatPercent:w,onUpdateGoal:I,onUpdateDate:M,onUpdateStartDate:_,onUpdateNutrition:N}){const[P,j]=Re.useState({}),[$,V]=Re.useState(!1),z=f&&f.length>0?f:i0.map(Ae=>({id:Ae.id,label:Ae.label,current1RM:"",target1RM:"",workingWeight:"",workingReps:""})),Z=z.reduce((Ae,Ue)=>{const ee=parseFloat(Ue.current1RM)||0;return Ae+ee},0),oe=z.reduce((Ae,Ue)=>{const ee=parseFloat(Ue.target1RM)||0;return Ae+ee},0),fe=v||((parseFloat(w)||15)<=10?"gain":"recomp"),ie=Kh(Z,oe,C,fe),ne=x||l0(),be=Sc(ne,ie.weeks),de=Sc(ne,Math.max(1,ie.weeks-1));Re.useEffect(()=>{if(oe>Z&&ie.weeks>0){const Ae=Sc(ne,ie.weeks);(!m||m<Ae)&&(M(Ae),V(!1))}},[ne,ie.weeks,Z,oe]);const X=Ae=>{const Ue=ie.weeks;qh(ne,Ae)<Ue-1?V(!0):V(!1),M(Ae)},me=(Ae,Ue,ee)=>{const Y=z.find(B=>B.id===Ae);if(!Y)return;const Ce={...Y,[Ue]:ee};if(Ce.workingWeight&&Ce.workingReps){const B=a0(parseFloat(Ce.workingWeight),parseInt(Ce.workingReps));B&&(Ce.current1RM=B.toString())}I(Ae,Ue,ee),Ce.current1RM!==Y.current1RM&&I(Ae,"current1RM",Ce.current1RM)},ue=()=>_a.find(Ae=>Ae.id===fe)||_a[0];return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Nutrition Strategy"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Your nutrition affects how fast you can safely progress. This impacts your program timeline."}),parseFloat(w)<=10&&a.jsx("div",{className:"mb-4 p-3 bg-amber-900/20 border border-amber-600/30 rounded-lg",children:a.jsxs("p",{className:"text-sm text-amber-300",children:[a.jsx("strong",{children:"Note:"})," At 10% body fat, we recommend a calorie surplus for optimal strength gains and recovery."]})}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:_a.map(Ae=>a.jsxs("button",{onClick:()=>N(Ae.id),className:`p-3 rounded-lg border text-left transition-all ${fe===Ae.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500 hover:border-dark-400"}`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{children:Ae.icon}),a.jsx("span",{className:"text-white font-medium",children:Ae.label})]}),a.jsx("p",{className:"text-xs text-gray-400",children:Ae.desc})]},Ae.id))}),a.jsxs("div",{className:"mt-3 p-3 bg-dark-700 rounded-lg",children:[a.jsx("p",{className:"text-sm text-gray-300",children:ue().detail}),fe==="lose"&&a.jsx("p",{className:"text-xs text-amber-400 mt-2",children:" Strength gains are significantly slower in a deficit. Consider recomp instead."})]})]}),a.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Current Strength Baselines"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Enter your current 1 rep max (1RM) for each lift. If you don't know your 1RM, click the calculator to estimate from your working weight and reps."})]}),z.map(Ae=>{const Ue=i0.find(Y=>Y.id===Ae.id),ee=P[Ae.id];return a.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"text-white font-medium flex items-center gap-2",children:[a.jsx("span",{children:Ue?.icon}),Ae.label]}),a.jsxs("button",{type:"button",onClick:()=>j(Y=>({...Y,[Ae.id]:!Y[Ae.id]})),className:`flex items-center gap-1 text-xs px-2 py-1 rounded ${ee?"bg-accent-primary/20 text-accent-primary":"bg-dark-600 text-gray-400 hover:text-white"}`,children:[a.jsx(z1,{className:"w-3 h-3"}),ee?"Hide Calculator":"Don't know 1RM?"]})]}),ee&&a.jsxs("div",{className:"p-3 bg-dark-600 rounded-lg space-y-2",children:[a.jsx("p",{className:"text-xs text-gray-400",children:"Enter the most weight you can lift for multiple reps:"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("div",{children:a.jsx("input",{type:"number",value:Ae.workingWeight||"",onChange:Y=>me(Ae.id,"workingWeight",Y.target.value),placeholder:"Weight (lbs)",className:"w-full px-3 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"})}),a.jsx("div",{children:a.jsx("input",{type:"number",value:Ae.workingReps||"",onChange:Y=>me(Ae.id,"workingReps",Y.target.value),placeholder:"Reps",min:"1",max:"15",className:"w-full px-3 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"})})]}),Ae.workingWeight&&Ae.workingReps&&a.jsxs("p",{className:"text-xs text-accent-primary",children:["Estimated 1RM: ",a.jsxs("span",{className:"font-bold",children:[a0(parseFloat(Ae.workingWeight),parseInt(Ae.workingReps))," lbs"]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Current 1RM"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",value:Ae.current1RM||"",onChange:Y=>I(Ae.id,"current1RM",Y.target.value),placeholder:"e.g., 225",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:"lbs"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Goal 1RM"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",value:Ae.target1RM||"",onChange:Y=>I(Ae.id,"target1RM",Y.target.value),placeholder:"e.g., 275",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:"lbs"})]})]})]})]},Ae.id)}),Z>0&&oe>0&&a.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 rounded-lg border border-accent-primary/30",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-gray-300",children:"Current Total"}),a.jsxs("span",{className:"text-white font-bold",children:[Z," lbs"]})]}),a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("span",{className:"text-gray-300",children:"Goal Total"}),a.jsxs("span",{className:"text-accent-primary font-bold",children:[oe," lbs"]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/10",children:[a.jsx("span",{className:"text-gray-300",children:"Total Gain Needed"}),a.jsxs("span",{className:"text-accent-secondary font-bold",children:["+",oe-Z," lbs"]})]})]}),oe>Z&&a.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(v0,{className:"w-5 h-5 text-accent-primary flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-white font-medium mb-1",children:"Estimated Program Duration"}),a.jsxs("p",{className:"text-sm text-gray-400 mb-3",children:["Based on your goals, experience (",C,"), and nutrition strategy (",fe,"), you can realistically gain about ",a.jsxs("span",{className:"text-white",children:[ie.monthlyRate," lbs/month"]})," across your main lifts."]}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-2xl font-bold text-accent-primary",children:ie.weeks}),a.jsx("span",{className:"text-gray-400",children:"weeks estimated"})]}),ie.nutritionImpact!=="normal"&&a.jsx("p",{className:"text-xs text-gray-500",children:ie.nutritionImpact==="faster"?" Calorie surplus enables faster recovery and progress":" Calorie deficit slows recovery - timeline adjusted accordingly"})]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Program Start Date"}),a.jsx("input",{type:"date",value:x||"",min:l0(),onChange:Ae=>_(Ae.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to start today"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Estimated 1RM Goal Accomplishment Date"}),a.jsx("input",{type:"date",value:m||be,min:de,onChange:Ae=>X(Ae.target.value),className:`w-full px-4 py-3 bg-dark-700 border rounded-lg text-white ${$?"border-amber-500":"border-dark-600"}`}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Based on your start date and estimated ",ie.weeks,"-week program"]}),$&&a.jsx("div",{className:"mt-3 p-4 bg-amber-900/20 border border-amber-600/30 rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(y0,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-amber-300 font-medium mb-1",children:" Accelerated Timeline Warning"}),a.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Pushing your goals faster than recommended significantly increases injury risk and could set you back even further."}),a.jsxs("p",{className:"text-sm text-gray-400",children:[a.jsx("strong",{children:"We don't recommend expediting the program."})," It's already optimized for maximum safe progress. If you're progressing faster than expected, the program will automatically adjust to your performance."]})]})]})})]})]})}class Jh extends Re.Component{constructor(m){super(m),this.state={hasError:!1,error:null}}static getDerivedStateFromError(m){return{hasError:!0,error:m}}componentDidCatch(m,x){console.error("Setup Wizard Error:",m),console.error("Error Info:",x),console.error("Component Stack:",x?.componentStack)}render(){return this.state.hasError?a.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center p-6",children:a.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 max-w-md text-center",children:[a.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-400 mb-4",children:this.state.error?.message||"An unexpected error occurred"}),a.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"px-6 py-3 bg-accent-primary text-white rounded-lg font-medium",children:"Reload"})]})}):this.props.children}}const Is=()=>new Date().toISOString().split("T")[0],o0=[{id:1,title:"Personal Info",icon:E0},{id:2,title:"Body Stats",icon:N0},{id:3,title:"Primary Goal",icon:Lr},{id:4,title:"Goal Details",icon:ri},{id:5,title:"Time Off",icon:K1},{id:6,title:"Generate",icon:C0}],Pi=[{id:"endurance",title:"Endurance",description:"Cardiovascular training - running, cycling, swimming",icon:"",subtypes:[{id:"running",label:"Running (Race Training)"},{id:"cycling",label:"Cycling"},{id:"swimming",label:"Swimming"},{id:"triathlon",label:"Triathlon"}]},{id:"strength",title:"Strength",description:"Build maximal strength and power",icon:"",subtypes:[{id:"powerlifting",label:"Powerlifting"},{id:"olympic",label:"Olympic Lifting"},{id:"strongman",label:"Strongman"}]},{id:"aesthetic",title:"Aesthetic",description:"Physique focused - muscle building and body composition",icon:"",subtypes:[{id:"hypertrophy",label:"Hypertrophy/Bodybuilding"},{id:"lean-muscle",label:"Lean Muscle Building"},{id:"recomp",label:"Body Recomposition"}]}],$h=[{id:"5k",label:"5K",miles:3.1},{id:"10k",label:"10K",miles:6.2},{id:"half",label:"Half Marathon",miles:13.1},{id:"full",label:"Full Marathon",miles:26.2},{id:"ultra",label:"Ultra Marathon",miles:null,requiresDistance:!0}],ef=[{id:"5k",label:"5K"},{id:"10k",label:"10K"},{id:"half",label:"Half Marathon"},{id:"full",label:"Full Marathon"}],tf=[{id:"sprint",label:"Sprint",description:"750m swim, 20km bike, 5km run"},{id:"olympic",label:"Olympic",description:"1.5km swim, 40km bike, 10km run"},{id:"half-iron",label:"Half Ironman (70.3)",description:"1.9km swim, 90km bike, 21.1km run"},{id:"full-iron",label:"Ironman",description:"3.8km swim, 180km bike, 42.2km run"}],c0=[{id:"squat",label:"Back Squat"},{id:"bench",label:"Bench Press"},{id:"deadlift",label:"Deadlift"},{id:"ohp",label:"Overhead Press"}],u0=[{id:"running",label:"Running",icon:"",description:"2-3 easy runs per week"},{id:"cycling",label:"Cycling",icon:"",description:"2-3 bike sessions per week"},{id:"swimming",label:"Swimming",icon:"",description:"2-3 swim sessions per week"}],nf=()=>{const f={name:"Test User",age:30,sex:"male",weight:180,weightUnit:"lbs",heightFeet:5,heightInches:10,heightUnit:"imperial",programType:"endurance",programSubtype:"running",desiredTrainingDays:5,yearsTraining:3,trainingHistory:"consistent",raceDistance:"half",raceDate:new Date(Date.now()+7776e6).toISOString().split("T")[0],nutritionGoal:"maintain",weightKg:81.6,heightCm:177.8,bmr:1882,tdee:3200,macros:{calories:3200,protein:180,carbs:400,fat:100}},m={name:"Test Running Program",type:"endurance",subtype:"running",primaryGoal:"endurance",currentWeek:1,currentPhase:"Base",mesocycleWeeks:14,daysPerWeek:5,programStartDate:new Date().toISOString().split("T")[0],weeklySchedule:[{day:1,dayName:"Monday",name:"Easy Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Easy Run",duration:40,exercises:[{name:"Easy Run",sets:1,reps:"40 min",pace:"9:30-10:00/mi",rpe:5}]}]},{day:2,dayName:"Tuesday",name:"Intervals",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Intervals",duration:45,exercises:[{name:"Speed Work",sets:6,reps:"400m",pace:"7:30/mi",rpe:8}]}]},{day:3,dayName:"Wednesday",name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]},{day:4,dayName:"Thursday",name:"Tempo Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Tempo",duration:50,exercises:[{name:"Tempo Run",sets:1,reps:"4 mi",pace:"8:15/mi",rpe:7}]}]},{day:5,dayName:"Friday",name:"Easy Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Easy Run",duration:35,exercises:[{name:"Recovery Run",sets:1,reps:"30 min",pace:"10:00/mi",rpe:4}]}]},{day:6,dayName:"Saturday",name:"Long Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Long Run",duration:90,exercises:[{name:"Long Run",sets:1,reps:"10 mi",pace:"9:45/mi",rpe:6}]}]},{day:7,dayName:"Sunday",name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]}]};return{profile:f,program:m}};function rf({onComplete:f}){const{user:m,signInWithGoogle:x,isAuthenticated:v,isConfigured:C}=p0(),[w,I]=Re.useState(1),[M,_]=Re.useState(!1),[N,P]=Re.useState(null),[j,$]=Re.useState(0),V=Re.useRef(null),[z,Z]=Re.useState({name:"",age:"",sex:"male",weight:"",weightUnit:"lbs",heightFeet:"",heightInches:"",heightUnit:"imperial",heightCm:"",bodyFatPercent:"",currentTrainingDays:3,trainingHistory:"some",yearsTraining:1,programType:"",programSubtype:"",desiredTrainingDays:4,raceDistance:"",ultraDistance:"",triathlonDistance:"",targetFinishTime:"",targetFinishHours:"",targetFinishMinutes:"",targetFinishSeconds:"",raceDate:"",currentWeeklyMileage:"",currentPace:"",baselineRaceDistance:"",baselineTimeHours:"",baselineTimeMinutes:"",baselineTimeSeconds:"",longestRecentRun:"",strengthGoals:c0.map(Y=>({id:Y.id,label:Y.label,current1RM:"",target1RM:"",workingWeight:"",workingReps:""})),strengthGoalDate:"",includeCardio:!1,cardioType:"",cardioDaysPerWeek:2,currentBodyFat:"",targetBodyFat:"",aestheticGoalDate:"",targetWeight:"",targetDate:"",weeklyWeightChange:.5,enableHybrid:!1,secondaryProgramType:"",secondarySubtype:"",allowDoubleDays:!1,sessionDuration:60,equipment:"full",programStartDate:"",nutritionGoal:"recomp",vacations:[]}),oe=(Y,Ce)=>{Z(B=>({...B,[Y]:Ce}))},xe=(Y,Ce,B)=>{const te=(z.strengthGoals||[]).map(ce=>ce.id===Y?{...ce,[Ce]:B}:ce);oe("strengthGoals",te)};Re.useEffect(()=>{m&&!z.name&&oe("name",m.user_metadata?.full_name||m.email?.split("@")[0]||"")},[m]);const fe=()=>{w<6&&I(Y=>Y+1)},ie=()=>{w>1&&I(Y=>Y-1)},ne=()=>{const Y={id:Date.now(),name:"",startDate:"",endDate:""};oe("vacations",[...z.vacations,Y])},be=(Y,Ce,B)=>{const pe=z.vacations.map(te=>te.id===Y?{...te,[Ce]:B}:te);oe("vacations",pe)},de=Y=>{oe("vacations",z.vacations.filter(Ce=>Ce.id!==Y))},X=()=>{if(z.heightUnit==="metric")return parseFloat(z.heightCm)||0;const Y=parseFloat(z.heightFeet)||0,Ce=parseFloat(z.heightInches)||0;return(Y*12+Ce)*2.54},me=async()=>{_(!0);const Y={...z,programType:z.programType||"strength",programSubtype:z.programSubtype||"powerlifting",desiredTrainingDays:parseInt(z.desiredTrainingDays)||4,strengthGoals:z.strengthGoals||c0.map(U=>({id:U.id,label:U.label,current:"",target:""}))},Ce=Y.weightUnit==="lbs"?parseFloat(Y.weight)*.453592:parseFloat(Y.weight),B=X(),pe=Oh(Ce,B,parseInt(Y.age),Y.sex),te=sf(Y.desiredTrainingDays),ce=Math.round(pe*te),q=af(ce,Y,parseFloat(Y.weight)),H={...Y,weightKg:Ce,heightCm:B,bmr:pe,tdee:ce,macros:q};let D=null;try{console.log("Calling API with profile:",Y.programType,Y.programSubtype);const U=await fetch("/api/generate-program",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:Y,macros:q,bmr:pe,tdee:ce})});if(!U.ok){const Ie=await U.text();throw console.error("API error response:",Ie),new Error(`API error: ${U.status}`)}D=await U.json(),console.log("API returned program:",D?.name)}catch(U){console.error("Error calling API, using fallback:",U),D=d0(Y)}(!D||typeof D!="object")&&(console.error("Invalid program after generation, creating minimal fallback"),D=d0(Y)),D={...D,primaryGoal:D.primaryGoal||Y.programType,primarySubtype:D.primarySubtype||Y.programSubtype,daysPerWeek:D.daysPerWeek||Y.desiredTrainingDays,weeklySchedule:D.weeklySchedule||[]};try{f({profile:H,program:D})}catch(U){console.error("Error in onComplete:",U),_(!1),alert("Error saving program. Please try again.")}},ue=()=>{switch(w){case 1:return z.name&&z.age&&z.sex;case 2:const Y=z.weight,Ce=z.heightUnit==="metric"?z.heightCm:z.heightFeet&&z.heightInches;return Y&&Ce;case 3:return z.programType&&z.programSubtype&&z.desiredTrainingDays;case 4:return Ae();case 5:return!0;default:return!0}},Ae=()=>z.programType==="endurance"?z.programSubtype==="running"?z.raceDistance&&z.raceDate:z.programSubtype==="triathlon"?z.triathlonDistance&&z.raceDate:!0:z.programType==="strength"?!(!(z.strengthGoals||[]).some(B=>B.current1RM&&B.target1RM)||!z.strengthGoalDate):z.programType==="aesthetic"?z.targetBodyFat:z.programType==="fatloss"?z.targetWeight:!0;Re.useEffect(()=>{if(z.programType!=="strength"){P(null);return}const Y=z.strengthGoals||[];if(!Y.some(q=>q.current1RM&&q.target1RM)||!z.strengthGoalDate){P(null);return}const B=new Date,pe=new Date(z.strengthGoalDate),te=Math.max(1,Math.ceil((pe-B)/(1e3*60*60*24*7))),ce=[];if(Y.forEach(q=>{if(q.current1RM&&q.target1RM){const H=parseFloat(q.current1RM),U=parseFloat(q.target1RM)-H,Ie=U/te;Ie>10&&ce.push({lift:q.label,weeklyIncrease:Ie.toFixed(1),totalIncrease:U,weeks:te})}}),ce.length>0){const q=ce.map(H=>`${H.lift}: ${H.totalIncrease}lbs in ${H.weeks} weeks = ${H.weeklyIncrease}lbs/week`).join(`
`);P(`Your strength goals are not realistic. A maximum of ~10lbs/week 1RM increase is possible with optimal training.

${q}

Please extend your goal date or reduce your targets.`)}else P(null)},[z.programType,z.strengthGoals,z.strengthGoalDate]);const Ue=Y=>{Y.preventDefault(),V.current&&clearTimeout(V.current);const Ce=j+1;$(Ce),Ce>=5?($(0),ee()):V.current=setTimeout(()=>$(0),3e3)},ee=Re.useCallback(()=>{if(window.confirm("Enter test mode? This will create a mock profile for testing.")){const Y=nf();f(Y)}},[f]);return Re.useEffect(()=>{const Y=Ce=>{Ce.ctrlKey&&Ce.shiftKey&&Ce.key==="T"&&(Ce.preventDefault(),ee())};return window.addEventListener("keydown",Y),()=>window.removeEventListener("keydown",Y)},[ee]),a.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col",children:[a.jsxs("header",{className:"px-6 pt-8 pb-4",children:[a.jsx("h1",{className:"font-display text-3xl font-bold tracking-tight gradient-text cursor-pointer select-none",onClick:Ue,onTouchEnd:Ue,children:"MOTUS"}),a.jsx("p",{className:"text-text-secondary text-sm mt-1",children:"Build your personalized program"}),j>=3&&a.jsxs("p",{className:"text-accent-primary text-xs mt-1 animate-pulse",children:[5-j," more taps for test mode..."]}),a.jsx("p",{className:"text-gray-600 text-xs mt-1 hidden sm:block",children:"Tip: Press Ctrl+Shift+T for test mode"})]}),a.jsx("div",{className:"px-6 py-4",children:a.jsx("div",{className:"flex items-center justify-between mb-2",children:o0.map((Y,Ce)=>a.jsxs(g0.Fragment,{children:[a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:`
                    w-10 h-10 rounded-xl flex items-center justify-center
                    transition-all duration-300
                    ${w>=Y.id?"bg-accent-primary text-dark-900":w===Y.id-1?"bg-dark-700 text-text-secondary border border-dark-500":"bg-dark-800 text-dark-400"}
                  `,children:a.jsx(Y.icon,{className:`w-5 h-5 ${w>=Y.id?"stroke-[2.5]":""}`})}),a.jsx("span",{className:`text-xs mt-1.5 hidden sm:block font-medium ${w>=Y.id?"text-accent-primary":"text-dark-400"}`,children:Y.title})]}),Ce<o0.length-1&&a.jsx("div",{className:`flex-1 h-0.5 mx-2 transition-all duration-300 rounded-full ${w>Y.id?"bg-accent-primary":"bg-dark-700"}`})]},Y.id))})}),a.jsxs("div",{className:"flex-1 px-6 py-6 overflow-y-auto",children:[w===1&&a.jsx(lf,{formData:z,updateFormData:oe,user:m,signInWithGoogle:x,isAuthenticated:v,isConfigured:C}),w===2&&a.jsx(of,{formData:z,updateFormData:oe}),w===3&&a.jsx(cf,{formData:z,updateFormData:oe}),w===4&&a.jsx(uf,{formData:z,updateFormData:oe,updateStrengthGoal:xe,strengthGoalError:N}),w===5&&a.jsx(df,{formData:z,addVacation:ne,updateVacation:be,removeVacation:de}),w===6&&a.jsx(hf,{formData:z,isGenerating:M,onGenerate:me})]}),a.jsxs("div",{className:"px-6 py-5 border-t border-dark-700 flex justify-between bg-dark-900/95 backdrop-blur-sm",children:[a.jsxs(Vt,{variant:"ghost",onClick:ie,disabled:w===1,className:"min-w-[100px]",children:[a.jsx(Oa,{className:"w-5 h-5 mr-1"}),"Back"]}),w<6?a.jsxs(Vt,{onClick:fe,disabled:!ue(),className:"min-w-[100px]",children:["Next",a.jsx(Li,{className:"w-5 h-5 ml-1"})]}):null]})]})}function sf(f){return f<=1?1.2:f<=2?1.375:f<=3?1.55:f<=5?1.725:1.9}function af(f,m,x){let v,C,w,I;switch(m.nutritionGoal){case"maintain":v=f,C=Math.round(x*.8);break;case"recomp":v=f,C=Math.round(x*1);break;case"lose":const N=m.weeklyWeightChange*500;v=Math.round(f-N),C=Math.round(x*1);break;case"gain":const P=m.weeklyWeightChange*500;v=Math.round(f+P),C=Math.round(x*.9);break;default:v=f,C=Math.round(x*.8)}const M=C*4,_=v-M;return I=Math.round(_*.35/9),w=Math.round(_*.65/4),{calories:v,protein:C,carbs:w,fat:I}}function lf({formData:f,updateFormData:m,user:x,signInWithGoogle:v,isAuthenticated:C,isConfigured:w}){const[I,M]=Re.useState(!1),[_,N]=Re.useState(null),P=async()=>{M(!0),N(null);try{const{error:j}=await v();j&&(console.error("Sign in error:",j),N(j.message||"Failed to sign in. Please try again."))}catch(j){console.error("Unexpected sign in error:",j),N("An unexpected error occurred. Please try again.")}M(!1)};return a.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Let's get to know you"}),a.jsx("p",{className:"text-gray-400",children:"Tell us about yourself to personalize your experience."})]}),w&&a.jsx("div",{className:"p-4 bg-dark-800 rounded-xl border border-dark-600",children:C?a.jsxs("div",{className:"flex items-center gap-3",children:[x?.user_metadata?.avatar_url&&a.jsx("img",{src:x.user_metadata.avatar_url,alt:"Profile",className:"w-10 h-10 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-white font-medium",children:x?.user_metadata?.full_name||x?.email}),a.jsxs("p",{className:"text-xs text-green-400 flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Signed in  Data syncs across devices"]})]})]}):a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Sign in to sync your data across all your devices"}),_&&a.jsxs("div",{className:"mb-3 p-3 bg-red-900/30 border border-red-700 rounded-lg",children:[a.jsx("p",{className:"text-sm text-red-400",children:_}),a.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Note: Google sign-in requires proper Supabase configuration. You can skip this and use the app offline."})]}),a.jsxs("button",{onClick:P,disabled:I,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white text-gray-800 font-medium rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),I?"Signing in...":"Continue with Google"]})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Your Name"}),a.jsx("input",{type:"text",value:f.name,onChange:j=>m("name",j.target.value),placeholder:"Enter your name",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Age"}),a.jsx("input",{type:"number",value:f.age,onChange:j=>m("age",j.target.value),placeholder:"Enter your age",min:"16",max:"100",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Sex"}),a.jsx("div",{className:"flex gap-4",children:["male","female"].map(j=>a.jsx("button",{onClick:()=>m("sex",j),className:`flex-1 py-3 px-4 rounded-lg border transition-all ${f.sex===j?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400 hover:border-gray-400"}`,children:j.charAt(0).toUpperCase()+j.slice(1)},j))})]})]})]})}function of({formData:f,updateFormData:m}){return a.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Body Measurements"}),a.jsx("p",{className:"text-gray-400",children:"Help us understand your current fitness level."})]}),a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weight"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",value:f.weight,onChange:x=>m("weight",x.target.value),placeholder:"Enter weight",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"}),a.jsxs("select",{value:f.weightUnit,onChange:x=>m("weightUnit",x.target.value),className:"px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[a.jsx("option",{value:"lbs",children:"lbs"}),a.jsx("option",{value:"kg",children:"kg"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Height"}),a.jsxs("div",{className:"flex gap-2 mb-2",children:[a.jsx("button",{onClick:()=>m("heightUnit","imperial"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${f.heightUnit==="imperial"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"ft / in"}),a.jsx("button",{onClick:()=>m("heightUnit","metric"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${f.heightUnit==="metric"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"cm"})]}),f.heightUnit==="imperial"?a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"number",value:f.heightFeet,onChange:x=>m("heightFeet",x.target.value),placeholder:"Feet",min:"3",max:"8",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),a.jsx("input",{type:"number",value:f.heightInches,onChange:x=>m("heightInches",x.target.value),placeholder:"Inches",min:"0",max:"11",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}):a.jsx("input",{type:"number",value:f.heightCm,onChange:x=>m("heightCm",x.target.value),placeholder:"Height in cm",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Body Fat % ",a.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),a.jsx("input",{type:"number",value:f.bodyFatPercent,onChange:x=>m("bodyFatPercent",x.target.value),placeholder:"e.g., 20",min:"5",max:"50",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),a.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Training History"}),a.jsxs("div",{className:"mb-5",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["How many days per week have you been training? ",a.jsxs("span",{className:"text-accent-primary font-bold",children:[f.currentTrainingDays," days"]})]}),a.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Average over the last 30 days"}),a.jsx("input",{type:"range",min:"0",max:"7",step:"1",value:f.currentTrainingDays,onChange:x=>m("currentTrainingDays",parseInt(x.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),a.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[0,1,2,3,4,5,6,7].map(x=>a.jsx("span",{children:x},x))})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"How consistent has your training been?"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"none",label:"New to Training",desc:"Just starting out"},{id:"some",label:"Some Experience",desc:"On and off"},{id:"consistent",label:"Consistent",desc:"Regular routine"}].map(x=>a.jsxs("button",{onClick:()=>m("trainingHistory",x.id),className:`p-3 rounded-lg border text-center ${f.trainingHistory===x.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[a.jsx("span",{className:"text-white text-sm font-medium block",children:x.label}),a.jsx("span",{className:"text-xs text-gray-400",children:x.desc})]},x.id))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Years of training experience: ",a.jsxs("span",{className:"text-accent-primary font-bold",children:[f.yearsTraining," ",f.yearsTraining===1?"year":"years"]})]}),a.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:f.yearsTraining,onChange:x=>m("yearsTraining",parseInt(x.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsx("span",{children:"New"}),a.jsx("span",{children:"5 yrs"}),a.jsx("span",{children:"10+ yrs"})]})]})]})]})]})}function cf({formData:f,updateFormData:m}){const x=Pi.find(v=>v.id===f.programType);return a.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"What's your primary goal?"}),a.jsx("p",{className:"text-gray-400",children:"Choose your main training focus."})]}),a.jsx("div",{className:"grid grid-cols-2 gap-4",children:Pi.map(v=>a.jsxs("button",{onClick:()=>{m("programType",v.id),m("programSubtype",""),(v.id==="strength"||v.id==="aesthetic")&&(m("enableHybrid",!1),m("secondaryProgramType",""),m("secondarySubtype",""),m("allowDoubleDays",!1)),v.id==="aesthetic"&&m("nutritionGoal","recomp")},className:`p-4 rounded-xl border text-left transition-all ${f.programType===v.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500 hover:border-gray-400"}`,children:[a.jsx("span",{className:"text-3xl mb-2 block",children:v.icon}),a.jsx("h3",{className:"text-lg font-semibold text-white",children:v.title}),a.jsx("p",{className:"text-sm text-gray-400 mt-1",children:v.description})]},v.id))}),x&&a.jsxs("div",{className:"mt-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Select your specific focus:"}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:x.subtypes.map(v=>a.jsx("button",{onClick:()=>m("programSubtype",v.id),className:`px-4 py-3 rounded-lg border text-sm transition-all ${f.programSubtype===v.id?"bg-accent-secondary/20 border-accent-secondary text-white":"bg-dark-700 border-dark-500 text-gray-400 hover:border-gray-400"}`,children:v.label},v.id))})]}),f.programSubtype&&a.jsxs("div",{className:"mt-6 p-4 bg-dark-800 rounded-xl border border-dark-600",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["How many days per week do you want to workout? ",a.jsxs("span",{className:"text-accent-primary font-bold",children:[f.desiredTrainingDays," days"]})]}),a.jsx("input",{type:"range",min:"2",max:"7",step:"1",value:f.desiredTrainingDays,onChange:v=>m("desiredTrainingDays",parseInt(v.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),a.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[2,3,4,5,6,7].map(v=>a.jsx("span",{children:v},v))})]}),f.programSubtype==="triathlon"&&a.jsx("div",{className:"mt-6 p-4 bg-accent-primary/10 rounded-xl border border-accent-primary/30",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-accent-primary font-semibold mb-1",children:"Triathlon Program Includes:"}),a.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[a.jsx("li",{children:" Swim, Bike, Run periodization with brick workouts"}),a.jsx("li",{children:" Double & triple day sessions built in"}),a.jsx("li",{children:" Injury prevention strength work (not hypertrophy)"}),a.jsx("li",{children:" Race-specific taper and nutrition timing"})]}),a.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Based on professional triathlon training methodology. Minimum 5 training days recommended."})]})]})}),f.programSubtype&&f.programType==="endurance"&&f.programSubtype!=="triathlon"&&a.jsxs("div",{className:"mt-6 p-4 bg-dark-800 rounded-xl border border-dark-600",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium",children:"Enable Hybrid Training?"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Add a secondary goal to your program"})]}),a.jsx("button",{onClick:()=>m("enableHybrid",!f.enableHybrid),className:`w-14 h-8 rounded-full transition-all ${f.enableHybrid?"bg-accent-primary":"bg-dark-600"}`,children:a.jsx("div",{className:`w-6 h-6 rounded-full bg-white transition-all ${f.enableHybrid?"translate-x-7":"translate-x-1"}`})})]}),f.enableHybrid&&a.jsxs("div",{className:"space-y-4 pt-4 border-t border-dark-600",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Secondary Program Type"}),a.jsxs("select",{value:f.secondaryProgramType,onChange:v=>{m("secondaryProgramType",v.target.value),m("secondarySubtype","")},className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[a.jsx("option",{value:"",children:"Select..."}),Pi.filter(v=>v.id!==f.programType).map(v=>a.jsxs("option",{value:v.id,children:[v.icon," ",v.title]},v.id))]})]}),f.secondaryProgramType&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Secondary Focus"}),a.jsxs("select",{value:f.secondarySubtype,onChange:v=>m("secondarySubtype",v.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[a.jsx("option",{value:"",children:"Select..."}),Pi.find(v=>v.id===f.secondaryProgramType)?.subtypes?.filter(v=>v.id!=="triathlon")?.map(v=>a.jsx("option",{value:v.id,children:v.label},v.id))]})]}),a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg",children:[a.jsx("input",{type:"checkbox",id:"doubleDays",checked:f.allowDoubleDays,onChange:v=>m("allowDoubleDays",v.target.checked),className:"w-5 h-5 rounded border-dark-500 text-accent-primary focus:ring-accent-primary"}),a.jsxs("label",{htmlFor:"doubleDays",className:"text-sm text-gray-300",children:[a.jsx("span",{className:"font-medium text-white",children:"Allow double days"}),a.jsx("br",{}),a.jsx("span",{className:"text-gray-400",children:"AM: Primary goal  PM: Secondary goal"})]})]})]})]})]})}function uf({formData:f,updateFormData:m,updateStrengthGoal:x,strengthGoalError:v}){const C=f||{},w=C.programType||"",I=C.programSubtype||"",M=()=>{const N=parseInt(C.yearsTraining)||0;return N<1?"beginner":N<3?"intermediate":N<6?"advanced":"elite"};if(w==="strength")return a.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Goal Details"}),a.jsx("p",{className:"text-gray-400",children:"Help us tailor your program to your specific targets."})]}),a.jsx(Qh,{strengthGoals:C.strengthGoals,strengthGoalDate:C.strengthGoalDate,programStartDate:C.programStartDate,nutritionGoal:C.nutritionGoal,experienceLevel:M(),bodyFatPercent:C.bodyFatPercent,onUpdateGoal:x,onUpdateDate:N=>m("strengthGoalDate",N),onUpdateStartDate:N=>m("programStartDate",N),onUpdateNutrition:N=>m("nutritionGoal",N)}),v&&a.jsxs("div",{className:"mt-4 p-4 bg-red-900/20 border border-red-700 rounded-xl",children:[a.jsx("h4",{className:"text-red-400 font-semibold mb-2",children:"Unrealistic Goals Detected"}),a.jsx("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:v})]}),a.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Add Cardio for Heart Health?"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Adding 2-3 days of easy cardio improves cardiovascular health and recovery without interfering with your strength gains."}),a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("button",{onClick:()=>m("includeCardio",!C.includeCardio),className:`relative w-12 h-6 rounded-full transition-colors ${C.includeCardio?"bg-accent-primary":"bg-dark-600"}`,children:a.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform ${C.includeCardio?"left-6":"left-0.5"}`})}),a.jsx("span",{className:"text-white",children:"Include cardio in my program"})]}),C.includeCardio&&a.jsxs("div",{className:"space-y-4 p-4 bg-dark-700 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cardio Type"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:u0.map(N=>a.jsxs("button",{onClick:()=>m("cardioType",N.id),className:`p-3 rounded-lg border text-center ${C.cardioType===N.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-600 border-dark-500"}`,children:[a.jsx("span",{className:"text-2xl block mb-1",children:N.icon}),a.jsx("span",{className:"text-white text-sm",children:N.label})]},N.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Days per Week"}),a.jsx("div",{className:"flex gap-2",children:[2,3].map(N=>a.jsxs("button",{onClick:()=>m("cardioDaysPerWeek",N),className:`flex-1 py-2 rounded-lg border ${C.cardioDaysPerWeek===N?"bg-accent-primary/20 border-accent-primary text-white":"bg-dark-600 border-dark-500 text-gray-400"}`,children:[N," days"]},N))}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Cardio sessions will be scheduled on rest days or as double days (AM/PM splits)"})]})]})]})]});const _=()=>{if(w==="endurance")return I==="marathon"||I==="running"?a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:" Race Details"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Distance"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:$h.map(N=>a.jsx("button",{onClick:()=>m("raceDistance",N.id),className:`py-3 px-2 rounded-lg border text-sm ${f.raceDistance===N.id?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:N.label},N.id))}),f.raceDistance==="ultra"&&a.jsxs("div",{className:"mt-3",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ultra Distance (miles)"}),a.jsx("input",{type:"number",value:f.ultraDistance||"",onChange:N=>m("ultraDistance",N.target.value),placeholder:"e.g., 50, 100",min:"30",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Common distances: 50K (31mi), 50mi, 100K (62mi), 100mi"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Date"}),a.jsx("input",{type:"date",value:f.raceDate,min:Is(),onChange:N=>m("raceDate",N.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Finish Time"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"number",value:f.targetFinishHours,onChange:N=>m("targetFinishHours",N.target.value),placeholder:"Hours",min:"0",max:"24",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),a.jsxs("div",{children:[a.jsx("input",{type:"number",value:f.targetFinishMinutes,onChange:N=>m("targetFinishMinutes",N.target.value),placeholder:"Min",min:"0",max:"59",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Minutes"})]}),a.jsxs("div",{children:[a.jsx("input",{type:"number",value:f.targetFinishSeconds,onChange:N=>m("targetFinishSeconds",N.target.value),placeholder:"Sec",min:"0",max:"59",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Seconds"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Weekly Mileage"}),a.jsx("input",{type:"number",value:f.currentWeeklyMileage,onChange:N=>m("currentWeeklyMileage",N.target.value),placeholder:"e.g., 20",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),a.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[a.jsx("h4",{className:"text-md font-semibold text-white mb-2",children:" Current Fitness Baseline"}),a.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Enter a recent race or time trial so we can calculate your training paces accurately."}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reference Race Distance"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:ef.map(N=>a.jsx("button",{onClick:()=>m("baselineRaceDistance",N.id),className:`py-2 px-2 rounded-lg border text-sm ${f.baselineRaceDistance===N.id?"bg-accent-secondary border-accent-secondary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:N.label},N.id))})]}),f.baselineRaceDistance&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Your Best Recent ",f.baselineRaceDistance.toUpperCase()," Time"]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"number",value:f.baselineTimeHours,onChange:N=>m("baselineTimeHours",N.target.value),placeholder:"Hr",min:"0",max:"10",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),a.jsxs("div",{children:[a.jsx("input",{type:"number",value:f.baselineTimeMinutes,onChange:N=>m("baselineTimeMinutes",N.target.value),placeholder:"Min",min:"0",max:"59",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Min"})]}),a.jsxs("div",{children:[a.jsx("input",{type:"number",value:f.baselineTimeSeconds,onChange:N=>m("baselineTimeSeconds",N.target.value),placeholder:"Sec",min:"0",max:"59",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Sec"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Longest Run in Past Month (miles)"}),a.jsx("input",{type:"number",value:f.longestRecentRun,onChange:N=>m("longestRecentRun",N.target.value),placeholder:"e.g., 10",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]})]})]}):I==="triathlon"?a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:" Triathlon Details"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Distance"}),a.jsx("div",{className:"space-y-2",children:tf.map(N=>a.jsxs("button",{onClick:()=>m("triathlonDistance",N.id),className:`w-full p-3 rounded-lg border text-left ${f.triathlonDistance===N.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[a.jsx("span",{className:"text-white font-medium",children:N.label}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:N.description})]},N.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Date"}),a.jsx("input",{type:"date",value:f.raceDate,min:Is(),onChange:N=>m("raceDate",N.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Finish Time"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("div",{children:[a.jsx("input",{type:"number",value:f.targetFinishHours,onChange:N=>m("targetFinishHours",N.target.value),placeholder:"Hours",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),a.jsxs("div",{children:[a.jsx("input",{type:"number",value:f.targetFinishMinutes,onChange:N=>m("targetFinishMinutes",N.target.value),placeholder:"Min",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Minutes"})]}),a.jsxs("div",{children:[a.jsx("input",{type:"number",value:f.targetFinishSeconds,onChange:N=>m("targetFinishSeconds",N.target.value),placeholder:"Sec",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Seconds"})]})]})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:" Endurance Goals"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Set your performance targets"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Event Date (Optional)"}),a.jsx("input",{type:"date",value:f.raceDate,min:Is(),onChange:N=>m("raceDate",N.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weekly Training Volume Goal"}),a.jsx("input",{type:"text",value:f.currentWeeklyMileage,onChange:N=>m("currentWeeklyMileage",N.target.value),placeholder:"e.g., 100 miles, 10 hours",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]})]});if(w==="aesthetic"){const N=parseFloat(f.bodyFatPercent)||0,P=parseFloat(f.targetBodyFat)||0,j=N-P;return a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:" Physique Goals"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Set your body composition targets"}),f.bodyFatPercent&&a.jsx("div",{className:"p-3 bg-dark-700/50 rounded-lg border border-dark-600",children:a.jsxs("p",{className:"text-sm text-gray-400",children:["Current Body Fat: ",a.jsxs("span",{className:"text-white font-medium",children:[f.bodyFatPercent,"%"]})]})}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Body Fat %"}),a.jsx("input",{type:"number",value:f.targetBodyFat,onChange:$=>m("targetBodyFat",$.target.value),placeholder:"e.g., 12",min:"5",max:"50",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: 10-15% for men, 18-24% for women for a lean physique"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Date (Optional)"}),a.jsx("input",{type:"date",value:f.aestheticGoalDate,min:Is(),onChange:$=>m("aestheticGoalDate",$.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),N>0&&P>0&&j>0&&a.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:a.jsxs("p",{className:"text-white",children:[" You're looking to reduce body fat by"," ",a.jsxs("span",{className:"text-accent-primary font-bold",children:[j.toFixed(1),"%"]})]})}),a.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Program Start Date"}),a.jsx("input",{type:"date",value:f.programStartDate||"",min:Is(),onChange:$=>m("programStartDate",$.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to start today"})]}),a.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-lg border border-accent-primary/20",children:[a.jsx("h4",{className:"text-white font-medium mb-2",children:" Recomp Strategy"}),a.jsxs("p",{className:"text-sm text-gray-300",children:["Your nutrition is set to ",a.jsx("span",{className:"text-accent-primary font-medium",children:"recomp"})," (body recomposition). This means eating at maintenance with high protein, slightly lower on rest days, and slightly higher on training days to maximize muscle gain while losing fat."]})]}),a.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[a.jsx("h4",{className:"text-white font-semibold mb-2",children:" Add Cardio for Heart Health?"}),a.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Light cardio improves cardiovascular health and can help with fat loss without impacting your muscle-building goals."}),a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("button",{onClick:()=>m("includeCardio",!f.includeCardio),className:`relative w-12 h-6 rounded-full transition-colors ${f.includeCardio?"bg-accent-primary":"bg-dark-600"}`,children:a.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform ${f.includeCardio?"left-6":"left-0.5"}`})}),a.jsx("span",{className:"text-white",children:"Include cardio in my program"})]}),f.includeCardio&&a.jsxs("div",{className:"space-y-4 p-4 bg-dark-700 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cardio Type"}),a.jsx("div",{className:"grid grid-cols-3 gap-2",children:u0.map($=>a.jsxs("button",{onClick:()=>m("cardioType",$.id),className:`p-3 rounded-lg border text-center ${f.cardioType===$.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-600 border-dark-500"}`,children:[a.jsx("span",{className:"text-2xl block mb-1",children:$.icon}),a.jsx("span",{className:"text-white text-sm",children:$.label})]},$.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Days per Week"}),a.jsx("div",{className:"flex gap-2",children:[2,3].map($=>a.jsxs("button",{onClick:()=>m("cardioDaysPerWeek",$),className:`flex-1 py-2 rounded-lg border ${f.cardioDaysPerWeek===$?"bg-accent-primary/20 border-accent-primary text-white":"bg-dark-600 border-dark-500 text-gray-400"}`,children:[$," days"]},$))}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Cardio sessions will be scheduled on rest days or as double days"})]})]})]})]})}if(w==="fatloss"){const N=parseFloat(f.weight)||0,P=parseFloat(f.targetWeight)||N,j=N-P,$=j/f.weeklyWeightChange;return a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-white",children:" Fat Loss Goals"}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Target Weight (",f.weightUnit,")"]}),a.jsx("input",{type:"number",value:f.targetWeight,onChange:V=>m("targetWeight",V.target.value),placeholder:"Enter target weight",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Weekly Weight Loss Rate: ",f.weeklyWeightChange," lbs/week"]}),a.jsx("input",{type:"range",min:"0.25",max:"1",step:"0.25",value:f.weeklyWeightChange,onChange:V=>m("weeklyWeightChange",parseFloat(V.target.value)),className:"w-full"}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[a.jsx("span",{children:"Slow (0.25)"}),a.jsx("span",{children:"Moderate (0.5)"}),a.jsx("span",{children:"Aggressive (1.0)"})]})]}),j>0&&a.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:a.jsxs("p",{className:"text-white",children:[" At this rate, you'll reach your goal in approximately"," ",a.jsxs("span",{className:"text-accent-primary font-bold",children:[Math.ceil($)," weeks"]})]})})]})}return null};return a.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Goal Details"}),a.jsx("p",{className:"text-gray-400",children:"Help us tailor your program to your specific targets."})]}),_(),v&&w==="strength"&&a.jsxs("div",{className:"mt-4 p-4 bg-accent-danger/10 border border-accent-danger/30 rounded-xl",children:[a.jsxs("h4",{className:"text-accent-danger font-semibold mb-2 flex items-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Unrealistic Goals Detected"]}),a.jsx("p",{className:"text-sm text-text-secondary whitespace-pre-line",children:v}),a.jsx("p",{className:"text-xs text-text-muted mt-3",children:"MOTUS cannot produce a plan with unrealistic goals. Please adjust your targets or extend your timeline."})]}),a.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Program Start Date"}),a.jsx("p",{className:"text-sm text-text-secondary mb-3",children:"When would you like to begin your program?"}),a.jsx("input",{type:"date",value:f.programStartDate,min:Is(),onChange:N=>m("programStartDate",N.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),a.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Leave blank to start today"})]}),a.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[a.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Nutrition Goal"}),w==="aesthetic"?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-4 bg-accent-primary/20 border border-accent-primary rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-white font-medium",children:"Body Recomposition"}),a.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-primary/30 text-accent-primary rounded",children:"Optimal for Aesthetics"})]}),a.jsx("p",{className:"text-sm text-gray-300",children:"Simultaneously lose fat while building/maintaining muscle through strategic nutrition timing and macros."})]}),a.jsx("div",{className:"p-3 bg-dark-700 rounded-lg",children:a.jsxs("p",{className:"text-xs text-gray-400",children:[a.jsx("strong",{className:"text-gray-300",children:"Recomp Strategy:"})," Eat at maintenance calories with high protein (1g/lb bodyweight). Slight deficit on rest days, slight surplus on training days. This approach maximizes muscle retention while losing fat."]})})]}):a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"maintain",label:"Maintain",desc:"Keep current weight"},{id:"recomp",label:"Recomp",desc:"Lose fat, keep muscle"},{id:"lose",label:"Lose Weight",desc:"Calorie deficit"},{id:"gain",label:"Gain Weight",desc:"Calorie surplus"}].map(N=>a.jsxs("button",{onClick:()=>m("nutritionGoal",N.id),className:`p-3 rounded-lg border text-left ${f.nutritionGoal===N.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[a.jsx("span",{className:"text-white font-medium",children:N.label}),a.jsx("p",{className:"text-xs text-gray-400",children:N.desc})]},N.id))}),w!=="aesthetic"&&f.nutritionGoal==="recomp"&&a.jsx("div",{className:"mt-3 p-3 bg-dark-700 rounded-lg",children:a.jsxs("p",{className:"text-xs text-gray-400",children:[a.jsx("strong",{className:"text-gray-300",children:"Recomp Strategy:"})," Eat at maintenance with high protein (1g/lb bodyweight). Slight deficit on rest days, slight surplus on training days."]})})]})]})}function df({formData:f,addVacation:m,updateVacation:x,removeVacation:v}){return a.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Vacations & Time Off"}),a.jsx("p",{className:"text-gray-400",children:"Add planned time off so we can align deload weeks and adjust your program."})]}),f.vacations.length>0&&a.jsx("div",{className:"space-y-3",children:f.vacations.map((C,w)=>a.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg border border-dark-600",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("span",{className:"text-sm text-gray-400",children:["Trip #",w+1]}),a.jsx("button",{onClick:()=>v(C.id),className:"p-1 text-gray-500 hover:text-accent-danger",children:a.jsx(Da,{className:"w-4 h-4"})})]}),a.jsx("input",{type:"text",value:C.name,onChange:I=>x(C.id,"name",I.target.value),placeholder:"Trip name",className:"w-full px-3 py-2 mb-3 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-text-muted",children:"Start Date"}),a.jsx("input",{type:"date",value:C.startDate,min:Is(),onChange:I=>x(C.id,"startDate",I.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-text-muted",children:"End Date"}),a.jsx("input",{type:"date",value:C.endDate,min:C.startDate||Is(),onChange:I=>x(C.id,"endDate",I.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"})]})]})]},C.id))}),a.jsxs("button",{onClick:m,className:"w-full p-4 border-2 border-dashed border-dark-500 rounded-lg hover:border-accent-primary transition-colors flex items-center justify-center gap-2 text-gray-400 hover:text-white",children:[a.jsx(Wi,{className:"w-5 h-5"}),"Add Time Off"]})]})}function hf({formData:f,isGenerating:m,onGenerate:x}){const v=Pi.find(I=>I.id===f.programType),C=v?.subtypes.find(I=>I.id===f.programSubtype),w=()=>{if(f.programType==="endurance"&&f.raceDate){const I=new Date(f.raceDate),_=Math.ceil((I-new Date)/(10080*60*1e3)),N=[f.targetFinishHours,f.targetFinishMinutes,f.targetFinishSeconds].filter(Boolean).join(":");return`${_} weeks to race day${N?`  Target: ${N}`:""}`}return f.programType==="strength"?`${(f.strengthGoals||[]).filter(M=>M.target1RM&&M.current1RM).length} lift targets set`:f.programType==="aesthetic"&&f.targetBodyFat?`Target: ${f.targetBodyFat}% body fat`:f.programType==="fatloss"&&f.targetWeight?`~${Math.ceil((parseFloat(f.weight)-parseFloat(f.targetWeight))/f.weeklyWeightChange)} weeks to ${f.targetWeight} ${f.weightUnit}`:"Ongoing optimization"};return a.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Ready to Generate"}),a.jsx("p",{className:"text-gray-400",children:"Your AI-powered program will be optimized for your goals."})]}),a.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 space-y-4",children:[a.jsx("h3",{className:"font-semibold text-white",children:"Your Profile Summary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Name"}),a.jsx("p",{className:"text-white font-medium",children:f.name})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400",children:"Stats"}),a.jsxs("p",{className:"text-white font-medium",children:[f.weight," ",f.weightUnit,"  ",f.heightFeet,"'",f.heightInches,'"']})]})]}),a.jsx("hr",{className:"border-dark-600"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400 text-sm",children:"Primary Goal"}),a.jsxs("p",{className:"text-white font-medium",children:[v?.icon," ",v?.title,": ",C?.label]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400 text-sm",children:"Goal"}),a.jsx("p",{className:"text-accent-primary font-medium",children:w()})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400 text-sm",children:"Training Schedule"}),a.jsxs("p",{className:"text-white font-medium",children:[f.desiredTrainingDays," days/week"]})]}),f.enableHybrid&&f.secondaryProgramType&&a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400 text-sm",children:"Secondary Goal"}),a.jsxs("p",{className:"text-white font-medium",children:[Pi.find(I=>I.id===f.secondaryProgramType)?.icon," ",f.secondarySubtype]})]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-400 text-sm",children:"Program Features"}),a.jsxs("ul",{className:"text-sm text-white mt-1 space-y-1",children:[a.jsx("li",{children:" Auto-periodization (Base  Build  Peak)"}),a.jsx("li",{children:" Progressive overload built-in"}),a.jsx("li",{children:" Deload weeks every 5 weeks"}),a.jsx("li",{children:" Dynamic adjustments based on progress"})]})]})]}),a.jsx(Vt,{fullWidth:!0,size:"lg",onClick:x,disabled:m,className:m?"animate-pulse":"",children:m?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"animate-spin mr-2",children:""}),"Generating Your Program..."]}):a.jsxs(a.Fragment,{children:[a.jsx(C0,{className:"w-5 h-5 mr-2"}),"Generate My Program"]})})]})}function d0(f){try{console.log("Generating fallback program with formData:",f);const m=Zh(f);if(!m||!m.weeklySchedule)throw console.error("Fallback program generation returned invalid program:",m),new Error("Invalid program generated");return m}catch(m){return console.error("Error in generateFallbackProgram:",m),{name:`${f.programType||"Fitness"} Program`,description:"Your personalized training program",mesocycleWeeks:4,currentWeek:1,currentPhase:"Base",phases:["Base","Build","Peak","Deload"],primaryGoal:f.programType||"strength",primarySubtype:f.programSubtype||"general",daysPerWeek:f.desiredTrainingDays||4,weeklySchedule:[{day:1,dayName:"Monday",name:"Training Day 1",isRestDay:!1,isDeload:!1,sessions:[]},{day:2,dayName:"Tuesday",name:"Training Day 2",isRestDay:!1,isDeload:!1,sessions:[]},{day:3,dayName:"Wednesday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]},{day:4,dayName:"Thursday",name:"Training Day 3",isRestDay:!1,isDeload:!1,sessions:[]},{day:5,dayName:"Friday",name:"Training Day 4",isRestDay:!1,isDeload:!1,sessions:[]},{day:6,dayName:"Saturday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]},{day:7,dayName:"Sunday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]}],generatedAt:new Date().toISOString(),error:"Program generation failed - using minimal template"}}}function ff(f){return a.jsx(Jh,{children:a.jsx(rf,{...f})})}const xf={running_easy:8,running_moderate:10,running_hard:12.5,running_sprint:15,cycling_easy:6,cycling_moderate:8,cycling_hard:12,swimming_easy:6,swimming_moderate:8,swimming_hard:10,walking:3.5,hiking:6,elliptical:5,rowing:7,jump_rope:11,stair_climbing:9,strength_light:3,strength_moderate:5,strength_vigorous:6,bodyweight:4,hiit:8,circuit_training:8,crossfit:8,yoga:2.5,pilates:3,stretching:2,rest:1},gf={marathon:"running_moderate",running:"running_moderate",cycling:"cycling_moderate",swimming:"swimming_moderate",triathlon:"running_moderate",cardio:"elliptical",strength:"strength_moderate",bodybuilding:"strength_moderate",olympic:"strength_vigorous",bodyweight:"bodyweight",maintenance:"strength_light",hiit:"hiit",wellness:"strength_light",mobility:"yoga",functional:"circuit_training",active:"walking"};function Ma(f,m,x,v=7){const C=f*.453592;let w=gf[m]||"strength_moderate",I=xf[w]||5;const M=.85+(v-6)*.075;I*=M;const _=x/60;return Math.round(I*C*_)}function Lc(f,m="moderate",x=0){const C={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[m]||1.55,w=Math.round(f*C),I=w+x;return{bmr:Math.round(f),neat:Math.round(w-f),workoutCalories:x,totalDailyBurn:I,remaining:I}}function mf(f,m,x=[],v=[],C=150){const{totalDailyBurn:w}=Lc(f,m,0),I=x.reduce((_,N)=>_+Ma(C,N.type,N.duration,N.rpe||7),0),M=v.reduce((_,N)=>_+Ma(C,N.type,N.duration||60,7),0);return w+I+M}function pf({profile:f,program:m,meals:x,workouts:v,todaysMeals:C,todaysWorkouts:w,onLogMeal:I,onLogWorkout:M,onViewProgram:_,onViewNutrition:N}){const{macros:P,bmr:j,tdee:$}=f,V=f.weightUnit==="kg"?f.weight/.453592:parseFloat(f.weight),z=C.reduce((te,ce)=>({calories:te.calories+(ce.calories||0),protein:te.protein+(ce.protein||0),carbs:te.carbs+(ce.carbs||0),fat:te.fat+(ce.fat||0)}),{calories:0,protein:0,carbs:0,fat:0}),Z=w.reduce((te,ce)=>te+Ma(V,ce.type||m?.primarySubtype||"strength",ce.duration||60,ce.overallRpe||7),0),oe=m?.startDate?new Date(m.startDate):null;oe&&oe.setHours(0,0,0,0);const xe=new Date;xe.setHours(0,0,0,0);const fe=!oe||oe<=xe,ie=oe&&oe.getTime()===xe.getTime(),ne=oe?Math.ceil((oe-xe)/(1e3*60*60*24)):0,be=()=>{if(!m)return null;const{primaryGoal:te,primarySubtype:ce,paces:q,baseline:H}=m;if(te==="endurance")return q?.goalPace?`Your goal: ${q.goalPace} pace for ${ce}`:`Building your ${ce} endurance`;if(te==="strength"&&H?.strength?.lifts?.length>0){const D=H.strength.lifts[0];return`Your goal: ${D.exercise} from ${D.current1RM}lbs  ${D.target1RM}lbs`}return te==="aesthetic"?`Building lean muscle with ${m.daysPerWeek} training days/week`:`${m.totalWeeks} weeks of structured training ahead`},de=new Date().getDay()||7,X=fe?m?.weeklySchedule?.find(te=>te.day===de):null,me=X?.sessions||[],ue=w.map(te=>te.sessionTime),Ae=me.filter(te=>!ue.includes(te.time)),Ue=fe&&X&&!X.isRestDay,ee=!Ue,Y=mf(j||1800,f.activityLevel||"moderate",w.map(te=>({type:te.type||m?.primarySubtype,duration:te.duration,rpe:te.overallRpe})),Ue?Ae.map(te=>({type:te.type||m?.primarySubtype,duration:te.duration})):[],V),Ce=Lc(j||1800,f.activityLevel,Ue?Z:0),B=Ue?Ae.reduce((te,ce)=>te+Ma(V,ce.type||m?.primarySubtype,ce.duration||60,7),0):0,pe=z.calories-Y;return a.jsxs("div",{className:"min-h-screen bg-dark-900 pb-24",children:[a.jsx("header",{className:"px-6 pt-8 pb-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-text-muted text-sm font-medium uppercase tracking-wider mb-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:f.name?.split(" ")[0]||"Athlete"})]}),a.jsx("div",{className:"flex items-center gap-3",children:a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider",children:"Week"}),a.jsx("p",{className:"text-xl font-display font-bold text-accent-primary",children:m?.currentWeek||1})]})})]})}),a.jsxs("div",{className:"px-6 space-y-5",children:[a.jsx(Qt,{hover:!0,onClick:N,className:"overflow-hidden",children:a.jsxs(Jt,{className:"p-0",children:[a.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-dark-600",children:[a.jsxs("h2",{className:"font-semibold text-white flex items-center gap-2",children:[a.jsx(Fi,{className:"w-5 h-5 text-accent-primary"}),"Energy Balance"]}),a.jsx(Li,{className:"w-5 h-5 text-dark-400"})]}),a.jsxs("div",{className:"grid grid-cols-3 divide-x divide-dark-600",children:[a.jsxs("div",{className:"p-4 text-center",children:[a.jsx(Ts,{className:"w-5 h-5 text-accent-danger mx-auto mb-2"}),a.jsx("p",{className:"font-display text-2xl font-bold text-white",children:Ce.totalDailyBurn}),a.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mt-1",children:"Burned"})]}),a.jsxs("div",{className:"p-4 text-center bg-dark-700/50",children:[a.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mb-2",children:"Net"}),a.jsxs("p",{className:`font-display text-3xl font-bold ${pe<0?"text-accent-success":"text-accent-primary"}`,children:[pe>0?"+":"",pe]}),a.jsx("p",{className:"text-xs text-text-muted mt-1",children:"kcal"})]}),a.jsxs("div",{className:"p-4 text-center",children:[a.jsx(si,{className:"w-5 h-5 text-accent-success mx-auto mb-2"}),a.jsx("p",{className:"font-display text-2xl font-bold text-white",children:z.calories}),a.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mt-1",children:"Eaten"})]})]}),a.jsxs("div",{className:"px-5 py-4 space-y-3 border-t border-dark-600",children:[a.jsx(Ac,{label:"Protein",current:z.protein,target:P.protein,color:"primary"}),a.jsx(Ac,{label:"Carbs",current:z.carbs,target:P.carbs,color:"warning"}),a.jsx(Ac,{label:"Fat",current:z.fat,target:P.fat,color:"secondary"})]}),a.jsx("div",{className:"px-5 py-3 bg-dark-700/30 border-t border-dark-600",children:a.jsxs("p",{className:"text-xs text-text-muted leading-relaxed",children:[a.jsx("span",{className:"text-accent-primary font-medium",children:"TDEE Estimate:"})," Based on your physiology (BMR: ",Math.round(j||1800)," kcal) + activity level",Ue?` + today's workout burn (~${B+Z} kcal)`:"",".",ee&&a.jsx("span",{className:"text-gray-500",children:" No workout scheduled today."})," ","These macros are optimized for your ",a.jsx("span",{className:"text-white",children:f?.nutritionGoal||"performance"})," goal."]})})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs(Vt,{variant:"secondary",onClick:I,className:"py-4",children:[a.jsx(si,{className:"w-5 h-5 mr-2"}),"Log Meal"]}),a.jsxs(Vt,{variant:"secondary",onClick:M,className:"py-4",children:[a.jsx(ri,{className:"w-5 h-5 mr-2"}),"Log Workout"]})]}),a.jsx(Qt,{children:a.jsxs(Jt,{className:"p-0",children:[a.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-dark-600",children:[a.jsxs("h2",{className:"font-semibold text-white flex items-center gap-2",children:[a.jsx(ri,{className:"w-5 h-5 text-accent-primary"}),"Today's Training"]}),Z>0&&a.jsxs("span",{className:"text-sm text-text-muted",children:[a.jsx(Fi,{className:"w-4 h-4 inline mr-1 text-accent-danger"}),Z," kcal"]})]}),a.jsx("div",{className:"p-5",children:ie?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-accent-primary/30 to-accent-secondary/30 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-accent-primary animate-pulse",children:a.jsx("span",{className:"text-5xl",children:""})}),a.jsx("h3",{className:"font-display text-2xl font-bold text-accent-primary mb-2",children:"Today is the Day!"}),a.jsxs("p",{className:"text-white font-semibold mb-3",children:["Week 1 of your ",m?.totalWeeks,"-week journey begins now"]}),a.jsx("p",{className:"text-sm text-text-secondary max-w-xs mx-auto",children:be()})]}),a.jsx("div",{className:"bg-gradient-to-r from-accent-success/10 to-accent-primary/10 rounded-xl p-4 border border-accent-success/30",children:a.jsxs("p",{className:"text-center text-sm text-text-secondary",children:[a.jsx("span",{className:"text-accent-success font-semibold",children:"Stay the course"})," and this program will get you to your goal. Trust the process, show up every day, and the results will follow."]})}),X&&!X.isRestDay&&a.jsxs(Vt,{variant:"primary",className:"w-full",onClick:_,children:[a.jsx(Hd,{className:"w-4 h-4 mr-2"}),"Start Your First Workout"]})]}):!fe&&oe?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-accent-primary/20 to-accent-secondary/20 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-accent-primary/30",children:a.jsx("span",{className:"text-4xl",children:""})}),a.jsxs("p",{className:"font-display text-3xl font-bold text-accent-primary mb-1",children:[ne," ",ne===1?"Day":"Days"]}),a.jsx("p",{className:"text-sm text-text-muted mb-2",children:"until your program begins"}),a.jsxs("p",{className:"text-white font-semibold",children:["Starting ",oe.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]})]}),a.jsxs("div",{className:"bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-xl p-4 border border-accent-primary/20",children:[a.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[a.jsx(Ts,{className:"w-4 h-4 text-accent-primary"}),"Prepare for Success"]}),a.jsxs("ul",{className:"space-y-3 text-sm",children:[a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"Stock up on nutrition"}),a.jsx("p",{className:"text-text-muted",children:"Prepare your meals and snacks for week 1"})]})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"Get quality sleep"}),a.jsx("p",{className:"text-text-muted",children:"Aim for 8+ hours to start fresh"})]})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"Review your program"}),a.jsx("p",{className:"text-text-muted",children:"Familiarize yourself with week 1 workouts"})]})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-lg",children:""}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:"Set your intentions"}),a.jsx("p",{className:"text-text-muted",children:"Visualize your goals and commit fully"})]})]})]})]}),a.jsxs(Vt,{variant:"secondary",className:"w-full",onClick:_,children:[a.jsx(Rs,{className:"w-4 h-4 mr-2"}),"Preview Your Program"]})]}):X&&!X.isRestDay?a.jsx("div",{className:"space-y-3",children:X.sessions?.map((te,ce)=>{const q=w.some(D=>D.sessionTime===te.time),H=Ma(V,te.type||m?.primarySubtype,te.duration||60,7);return a.jsxs("div",{className:`p-4 rounded-xl border transition-all ${q?"bg-accent-success/5 border-accent-success/20":"bg-dark-700 border-dark-600 hover:border-dark-500"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${te.time==="AM"?"bg-accent-primary/10 text-accent-primary":"bg-blue-500/10 text-blue-400"}`,children:te.time}),a.jsx("span",{className:"font-medium text-white",children:te.focus}),q&&a.jsx("span",{className:"text-accent-success text-sm",children:" Done"})]}),a.jsxs("span",{className:"text-sm text-text-muted",children:["~",H," kcal"]})]}),a.jsxs("p",{className:"text-sm text-text-secondary mb-3",children:[te.duration," min  ",te.exercises?.length||0," exercises"]}),!q&&a.jsxs(Vt,{variant:"primary",size:"sm",className:"w-full",onClick:_,children:[a.jsx(Hd,{className:"w-4 h-4 mr-2"}),"Start Workout"]})]},ce)})}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 bg-dark-700 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-3xl",children:""})}),a.jsx("p",{className:"font-semibold text-white mb-1",children:"Rest Day"}),a.jsx("p",{className:"text-sm text-text-muted",children:"Recovery is when gains happen"})]})})]})}),a.jsx(lh,{profile:f,program:m}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Qt,{children:a.jsxs(Jt,{className:"text-center py-5",children:[a.jsx("div",{className:"w-12 h-12 bg-accent-primary/10 rounded-xl flex items-center justify-center mx-auto mb-3",children:a.jsx(Lr,{className:"w-6 h-6 text-accent-primary"})}),a.jsx("p",{className:"font-display text-xl font-bold text-white",children:m?.currentPhase||"Base"}),a.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider mt-1",children:"Phase"})]})}),a.jsx(Qt,{children:a.jsxs(Jt,{className:"text-center py-5",children:[a.jsx("div",{className:"w-12 h-12 bg-accent-success/10 rounded-xl flex items-center justify-center mx-auto mb-3",children:a.jsx(js,{className:"w-6 h-6 text-accent-success"})}),a.jsxs("p",{className:"font-display text-xl font-bold text-white",children:[w.length,"/",me.length||0]}),a.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider mt-1",children:"Complete"})]})})]}),a.jsx(ah,{profile:f,program:m,meals:x,workouts:v,todaysMeals:C,todaysWorkouts:w}),a.jsx(Qt,{hover:!0,onClick:_,children:a.jsxs(Jt,{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"text-xs text-accent-primary uppercase tracking-wider font-semibold mb-1",children:[m?.isHybrid&&"Hybrid  ",m?.athleteLevel||"Intermediate"]}),a.jsx("h3",{className:"font-semibold text-white text-lg",children:m?.name||"Your Program"}),a.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:["Week ",m?.currentWeek||1," of ",m?.mesocycleWeeks||4]})]}),a.jsx("div",{className:"w-10 h-10 bg-dark-700 rounded-xl flex items-center justify-center",children:a.jsx(Rs,{className:"w-5 h-5 text-text-secondary"})})]}),a.jsx("div",{className:"mt-4",children:a.jsx(Bi,{value:m?.currentWeek||1,max:m?.mesocycleWeeks||4,color:"primary",size:"sm"})})]})})]})]})}function Ac({label:f,current:m,target:x,color:v}){const C=m>x;return a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:"text-xs text-text-muted uppercase tracking-wide w-16",children:f}),a.jsx("div",{className:"flex-1",children:a.jsx(Bi,{value:m,max:x,color:C?"danger":v,size:"xs"})}),a.jsxs("span",{className:`text-sm tabular-nums ${C?"text-accent-danger":"text-white"}`,children:[m,a.jsxs("span",{className:"text-text-muted",children:["/",x,"g"]})]})]})}const yf=["","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],wf=(f,m,x,v,C)=>{if(!f||m===1)return f;const w=v?.[m-1]||"Base";v?.[m-2];const I=w==="Deload"||w==="Taper";return f.map(M=>{if(M.isRestDay)return{...M};const _=M.sessions?.map(N=>{const P=N.exercises?.map(j=>{let $={...j};if(I)j.sets&&typeof j.sets=="number"&&($.sets=Math.max(2,Math.floor(j.sets*.6))),j.rpe&&($.rpe=Math.max(5,j.rpe-2));else if(w==="Peak")j.rpe&&($.rpe=Math.min(10,j.rpe+.5));else if(w.includes("Build")){const V=w==="Build 2"?1.15:1.08;j.sets&&typeof j.sets=="number"&&($.sets=Math.round(j.sets*V))}return $.progression=j.progression?.replace(/Week \d+/g,`Week ${m}`),$});return{...N,exercises:P}});return{...M,sessions:_,isDeload:I}})},bf=(f,m,x,v)=>{const C=x?.[f-1]||"Base",w=f>1?x?.[f-2]:null,I=w&&w!==C,M=C==="Deload"||C==="Taper",_=[];if(I&&_.push({type:"phase",icon:"",text:`New phase: ${w}  ${C}`}),M)_.push({type:"deload",icon:"",text:"Reduced volume (60%) - focus on recovery"});else if(C==="Peak"){let P="Peak intensity training";v?.primaryGoal==="endurance"?P="Peak intensity - race simulation workouts":v?.primaryGoal==="strength"?P="Peak intensity - test maxes and competition prep":v?.primaryGoal==="aesthetic"&&(P="Peak intensity - maximum pump and definition"),_.push({type:"peak",icon:"",text:P})}else C.includes("Build")&&f>1&&_.push({type:"progression",icon:"",text:"Volume increases ~5% from last week"});if(v?.primaryGoal==="endurance"){const P=v?.baseline?.endurance?.currentMileage||20,j=v?.athleteLevel==="elite"?60:50;let $;M?$=Math.round(P*Math.pow(1.05,f-2)*.7):C==="Taper"?$=Math.round(j*.6):$=Math.min(Math.round(P*Math.pow(1.05,f-1)),j),_.push({type:"mileage",icon:"",text:`Target mileage: ~${$} miles`})}const N={1:"Establish baseline, focus on form",2:"Build consistency, dial in paces",3:"First small volume increase",4:"Recovery week - let adaptations settle"};return f<=4&&N[f]&&_.push({type:"goal",icon:"",text:N[f]}),{weekNumber:f,totalWeeks:m,phase:C,changes:_,isDeload:M}},vf=f=>{const m=f?.primaryGoal||"aesthetic",x=[{icon:"",title:"Stretching & Mobility",description:"15-20 min of dynamic stretching or yoga",detail:"Focus on areas worked yesterday"},{icon:"",title:"Light Walk",description:"20-30 min easy walk outdoors",detail:"Promotes blood flow without stress"},{icon:"",title:"Hydration",description:"Drink 3-4L water with electrolytes",detail:"Sodium, potassium, magnesium for recovery",priority:!0},{icon:"",title:"Sleep",description:"Get 8+ hours of quality sleep",detail:"Most recovery happens during deep sleep",priority:!0},{icon:"",title:"Nutrition",description:"Eat at maintenance or slight surplus",detail:"Prioritize protein (1g/lb) for repair",priority:!0}];return m==="endurance"?[...x,{icon:"",title:"Cold Therapy",description:"10-15 min ice bath or cold shower",detail:"Reduces inflammation from high mileage"},{icon:"",title:"Foam Rolling",description:"10 min on calves, quads, IT band",detail:"Breaks up adhesions, improves mobility"},{icon:"",title:"Compression",description:"Wear compression socks/sleeves",detail:"Promotes circulation and reduces swelling"}]:m==="strength"?[...x,{icon:"",title:"Sauna",description:"15-20 min at 170-190F",detail:"Increases blood flow, promotes recovery"},{icon:"",title:"Self-Massage",description:"Lacrosse ball on tight areas",detail:"Target shoulders, hips, and back"},{icon:"",title:"Contrast Therapy",description:"3 min hot / 1 min cold, repeat 3x",detail:"Flushes metabolic waste from muscles"}]:m==="aesthetic"?[...x,{icon:"",title:"Sauna",description:"15-20 min for recovery",detail:"Also supports fat loss through heat exposure"},{icon:"",title:"Yoga Flow",description:"20-30 min gentle yoga",detail:"Mind-muscle connection, flexibility"}]:m==="fatloss"?[...x,{icon:"",title:"LISS Cardio",description:"30-45 min walk or light bike",detail:"Burns extra calories without cortisol spike"},{icon:"",title:"Cold Exposure",description:"2-5 min cold shower",detail:"Activates brown fat, boosts metabolism"}]:x};function Nf({program:f,completedWorkouts:m,onCompleteExercise:x,onCompleteSession:v,onUpdateExerciseLog:C,onBack:w}){const[I,M]=Re.useState(1),[_,N]=Re.useState(0),[P,j]=Re.useState(f?.currentWeek||1),[$,V]=Re.useState(null),[z,Z]=Re.useState({sets:"",reps:"",weight:"",notes:""}),oe=f?.totalWeeks||f?.mesocycleWeeks||12,xe=f?.phases||[],fe=f?.startDate?new Date(f.startDate):new Date;fe.getDay();const ie=H=>{const D=new Date(fe);return D.setDate(D.getDate()+(H-1)*7),D},ne=H=>{const D=ie(P),U=H-1,Ie=new Date(D);return Ie.setDate(Ie.getDate()+U),Ie},be=H=>H.toLocaleDateString("en-US",{month:"short",day:"numeric"}),de=()=>{const H=ie(P),D=new Date(H);return D.setDate(D.getDate()+6),`${be(H)}  ${be(D)}`},X=Re.useMemo(()=>P===1||P===f?.currentWeek?f?.weeklySchedule:wf(f?.weeklySchedule,P,oe,xe),[P,f?.weeklySchedule,oe,xe]),me=X?.find(H=>H.day===I),ue=Re.useMemo(()=>bf(P,oe,xe,f),[P,oe,xe,f]),Ae=(H,D)=>P!==f?.currentWeek?!1:m.some(U=>U.day===I&&U.sessionIndex===H&&U.completedExercises?.includes(D)),Ue=(H,D)=>m.find(Ie=>Ie.day===I&&Ie.sessionIndex===H)?.exerciseLogs?.[D]||null,ee=H=>{const D=me?.sessions?.[H];return D?.exercises?D.exercises.every((U,Ie)=>Ae(H,Ie)):!1},Y=(H,D,U)=>{const Ie=Ue(H,D);V({sessionIdx:H,exIdx:D}),Z({sets:Ie?.sets||U.sets||"",reps:Ie?.reps||U.reps||"",weight:Ie?.weight||U.startingWeight||"",notes:Ie?.notes||""})},Ce=()=>{$&&C&&C(I,$.sessionIdx,$.exIdx,z),V(null),Z({sets:"",reps:"",weight:"",notes:""})},B=H=>{v&&v(I,H)},pe=P>1,te=P<oe,ce=P>(f?.currentWeek||1);P<(f?.currentWeek||1);const q=vf(f);return a.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[a.jsx("header",{className:"px-6 py-4 bg-dark-800 border-b border-dark-700",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:w,className:"p-2 rounded-lg hover:bg-dark-700",children:a.jsx(Oa,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-xl font-bold text-white",children:f?.name||"Your Program"}),a.jsxs("p",{className:"text-gray-400 text-sm",children:[f?.currentPhase," Phase"]})]})]})}),a.jsxs("div",{className:"px-6 py-3 bg-dark-800/50 border-b border-dark-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:()=>pe&&j(H=>H-1),disabled:!pe,className:`p-2 rounded-lg ${pe?"hover:bg-dark-700 text-white":"text-gray-600 cursor-not-allowed"}`,children:a.jsx(Oa,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Rs,{className:"w-5 h-5 text-accent-primary"}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-lg font-bold text-white",children:["Week ",P]}),a.jsxs("span",{className:"text-gray-400 text-sm",children:[" of ",oe]}),P===f?.currentWeek&&a.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-primary rounded-full text-white",children:"Current"}),ce&&a.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-secondary/50 rounded-full text-accent-secondary",children:"Preview"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:de()})]})]}),a.jsx("button",{onClick:()=>te&&j(H=>H+1),disabled:!te,className:`p-2 rounded-lg ${te?"hover:bg-dark-700 text-white":"text-gray-600 cursor-not-allowed"}`,children:a.jsx(Li,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"flex gap-1 mt-2 overflow-x-auto pb-1 scrollbar-thin",children:Array.from({length:oe},(H,D)=>D+1).map(H=>{const D=xe[H-1]||"Base",U={Base:{bg:"bg-blue-500/20",text:"text-blue-400",selected:"bg-blue-500"},Build:{bg:"bg-orange-500/20",text:"text-orange-400",selected:"bg-orange-500"},"Build 1":{bg:"bg-orange-500/20",text:"text-orange-400",selected:"bg-orange-500"},"Build 2":{bg:"bg-red-500/20",text:"text-red-400",selected:"bg-red-500"},Peak:{bg:"bg-purple-500/20",text:"text-purple-400",selected:"bg-purple-500"},Taper:{bg:"bg-cyan-500/20",text:"text-cyan-400",selected:"bg-cyan-500"},Deload:{bg:"bg-green-500/20",text:"text-green-400",selected:"bg-green-500"}},Ie=U[D]||U.Base,_e=H===P,ye=H===f?.currentWeek,he=H<(f?.currentWeek||1);return a.jsx("button",{onClick:()=>j(H),className:`px-2 py-1 text-xs rounded-lg min-w-[28px] transition-all ${_e?`${Ie.selected} text-white font-medium`:ye?`${Ie.bg} ${Ie.text} ring-1 ring-current`:he?"bg-dark-600/50 text-gray-500":`${Ie.bg} ${Ie.text} hover:opacity-80`}`,title:`Week ${H}: ${D}`,children:H},H)})}),a.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 text-[10px]",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Base"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Build"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Deload"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),"Peak"]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-cyan-500"}),"Taper"]})]})]}),ue.changes.length>0&&a.jsxs("div",{className:"px-6 py-3 bg-dark-800/30 border-b border-dark-700",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(js,{className:"w-4 h-4 text-accent-secondary"}),a.jsxs("span",{className:"text-sm font-medium text-white",children:["Week ",P," Focus"]}),a.jsx("span",{className:"px-2 py-0.5 text-xs bg-dark-600 rounded-full text-gray-300",children:ue.phase})]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:ue.changes.map((H,D)=>a.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-lg text-xs ${H.type==="deload"?"bg-green-500/20 text-green-400":H.type==="peak"?"bg-red-500/20 text-red-400":H.type==="phase"?"bg-accent-primary/20 text-accent-primary":"bg-dark-600 text-gray-300"}`,children:[a.jsx("span",{children:H.icon}),a.jsx("span",{children:H.text})]},D))})]}),ce&&a.jsxs("div",{className:"mx-6 mt-3 p-3 bg-accent-secondary/10 border border-accent-secondary/30 rounded-lg flex items-start gap-2",children:[a.jsx(Ic,{className:"w-4 h-4 text-accent-secondary mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"text-sm",children:[a.jsx("span",{className:"text-accent-secondary font-medium",children:"Preview Mode:"}),a.jsx("span",{className:"text-gray-400 ml-1",children:"This is a projected schedule. Actual workouts may adjust based on your progress."})]})]}),a.jsx("div",{className:"px-6 py-4 overflow-x-auto",children:a.jsx("div",{className:"flex gap-2 min-w-max",children:[1,2,3,4,5,6,7].map(H=>{const D=X?.find(Be=>Be.day===H),U=D?.isRestDay,Ie=I===H,_e=D?.isDeload,ye=ne(H),he=ye.toDateString()===new Date().toDateString();return a.jsxs("button",{onClick:()=>M(H),className:`flex flex-col items-center px-3 py-2 rounded-xl min-w-[64px] transition-all ${Ie?"bg-accent-primary text-white":he?"bg-accent-primary/20 text-accent-primary ring-1 ring-accent-primary/50":_e?"bg-green-500/10 text-green-400 hover:bg-green-500/20":"bg-dark-700 text-gray-400 hover:bg-dark-600"} ${U&&!Ie&&!he?"opacity-50":""}`,children:[a.jsx("span",{className:"text-xs font-medium",children:yf[H]}),a.jsx("span",{className:`text-[10px] ${Ie?"text-white/80":he?"text-accent-primary/80":"text-gray-500"}`,children:ye.getDate()}),a.jsx("span",{className:"text-lg font-bold mt-0.5",children:U?"":_e?"":""})]},H)})})}),a.jsx("div",{className:"px-6 py-4",children:me?.isRestDay?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"text-center py-6",children:[a.jsx("span",{className:"text-5xl mb-3 block",children:""}),a.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:"Active Recovery Day"}),a.jsx("p",{className:"text-gray-400 text-sm",children:"Recovery is when adaptation happens. Make the most of it."})]}),a.jsxs("div",{className:"bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 rounded-xl p-4 border border-accent-primary/30",children:[a.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[a.jsx(V1,{className:"w-5 h-5 text-accent-primary"}),"Recovery Essentials"]}),a.jsx("div",{className:"space-y-3",children:q.filter(H=>H.priority).map((H,D)=>a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-xl",children:H.icon}),a.jsxs("div",{children:[a.jsx("p",{className:"text-white font-medium",children:H.title}),a.jsx("p",{className:"text-sm text-gray-300",children:H.description})]})]},D))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-semibold mb-3",children:"Recommended Activities"}),a.jsx("div",{className:"grid gap-3",children:q.filter(H=>!H.priority).map((H,D)=>a.jsx(Qt,{children:a.jsxs(Jt,{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-2xl",children:H.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"text-white font-medium",children:H.title}),a.jsx("p",{className:"text-sm text-gray-400",children:H.description}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:H.detail})]})]})},D))})]}),a.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-dark-600",children:[a.jsx("h3",{className:"text-white font-semibold mb-2",children:" Pro Tips"}),a.jsxs("ul",{className:"text-sm text-gray-400 space-y-2",children:[a.jsx("li",{children:" Avoid intense exercise - save it for training days"}),a.jsx("li",{children:" Listen to your body - if you feel sore, prioritize sleep"}),a.jsx("li",{children:" Mental recovery matters too - take time to destress"}),a.jsx("li",{children:" Prep meals for the week to stay on track"})]})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-white",children:me?.name}),me?.sessions?.map((H,D)=>a.jsxs(Qt,{children:[a.jsx("button",{onClick:()=>N(_===D?-1:D),className:"w-full",children:a.jsx(Jt,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${H.time==="AM"?"bg-yellow-500/20":H.time==="PM"?"bg-blue-500/20":"bg-purple-500/20"}`,children:a.jsx("span",{className:"text-2xl",children:H.type==="strength"||H.type==="hypertrophy"?"":H.type==="endurance"?"":""})}),a.jsxs("div",{className:"text-left",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[(H.time==="AM"||H.time==="PM")&&a.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${H.time==="AM"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:H.time}),a.jsx("h3",{className:"font-semibold text-white",children:H.focus})]}),a.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-400",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Dc,{className:"w-4 h-4"}),H.duration," min"]}),a.jsxs("span",{children:[H.exercises?.length," exercises"]})]})]})]}),a.jsx(Li,{className:`w-5 h-5 text-gray-400 transition-transform ${_===D?"rotate-90":""}`})]})})}),_===D&&a.jsxs("div",{className:"px-5 pb-5 space-y-3",children:[a.jsx("hr",{className:"border-dark-600"}),H.exercises?.map((U,Ie)=>{const _e=Ae(D,Ie),ye=Ue(D,Ie),he=$?.sessionIdx===D&&$?.exIdx===Ie;return a.jsx("div",{className:`p-4 rounded-lg border ${_e?"bg-accent-success/10 border-accent-success/30":"bg-dark-700 border-dark-600"}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("h4",{className:"font-medium text-white",children:U.name}),_e&&a.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-accent-success/20 rounded-full",children:[a.jsx(Br,{className:"w-3 h-3 text-accent-success"}),a.jsx("span",{className:"text-xs text-accent-success font-medium",children:"Done"})]})]}),he?a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Sets"}),a.jsx("input",{type:"text",value:z.sets,onChange:Be=>Z({...z,sets:Be.target.value}),placeholder:U.sets||"Sets",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Reps"}),a.jsx("input",{type:"text",value:z.reps,onChange:Be=>Z({...z,reps:Be.target.value}),placeholder:U.reps||"Reps",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Weight"}),a.jsx("input",{type:"text",value:z.weight,onChange:Be=>Z({...z,weight:Be.target.value}),placeholder:U.startingWeight||"Weight",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Notes (optional)"}),a.jsx("input",{type:"text",value:z.notes,onChange:Be=>Z({...z,notes:Be.target.value}),placeholder:"How did it feel? Any adjustments?",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:Ce,className:"flex items-center gap-1 px-3 py-1.5 bg-accent-success text-white rounded-lg text-sm font-medium hover:bg-accent-success/80",children:[a.jsx(Q1,{className:"w-4 h-4"}),"Save"]}),a.jsxs("button",{onClick:()=>V(null),className:"flex items-center gap-1 px-3 py-1.5 bg-dark-600 text-gray-400 rounded-lg text-sm hover:bg-dark-500",children:[a.jsx(Ql,{className:"w-4 h-4"}),"Cancel"]})]})]}):a.jsxs(a.Fragment,{children:[ye&&a.jsxs("div",{className:"mt-2 p-2 bg-accent-primary/10 rounded-lg border border-accent-primary/20",children:[a.jsx("span",{className:"text-xs text-accent-primary font-medium",children:"Logged: "}),a.jsxs("span",{className:"text-sm text-white",children:[ye.sets&&`${ye.sets} sets`,ye.reps&&`  ${ye.reps}`,ye.weight&&` @ ${ye.weight}`]}),ye.notes&&a.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:['"',ye.notes,'"']})]}),a.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-sm",children:[U.sets&&a.jsxs("span",{className:"text-gray-400",children:[a.jsx("span",{className:"text-white font-medium",children:U.sets})," sets"]}),U.reps&&a.jsx("span",{className:"text-gray-400",children:a.jsx("span",{className:"text-white font-medium",children:U.reps})}),U.startingWeight&&a.jsxs("span",{className:"text-gray-400",children:["Target ",a.jsx("span",{className:"text-accent-primary font-medium",children:U.startingWeight})]}),U.rpe&&a.jsxs("span",{className:"text-gray-400",children:["RPE ",a.jsx("span",{className:"text-accent-warning font-medium",children:U.rpe})]}),U.pace&&a.jsxs("span",{className:"text-gray-400",children:["Pace ",a.jsx("span",{className:"text-accent-primary font-medium",children:U.pace})]}),U.heartRateZone&&a.jsxs("span",{className:"text-gray-400",children:["Zone ",a.jsx("span",{className:"text-red-400 font-medium",children:U.heartRateZone})]}),U.rest&&a.jsxs("span",{className:"text-gray-400",children:["Rest ",a.jsx("span",{className:"text-white",children:U.rest})]})]}),(U.current1RM||U.target1RM)&&a.jsxs("div",{className:"flex gap-4 mt-2 text-xs",children:[U.current1RM&&a.jsxs("span",{className:"text-gray-500",children:["Current 1RM: ",a.jsx("span",{className:"text-gray-300",children:U.current1RM})]}),U.target1RM&&a.jsxs("span",{className:"text-gray-500",children:["Target 1RM: ",a.jsx("span",{className:"text-accent-secondary",children:U.target1RM})]})]}),U.notes&&a.jsxs("p",{className:"mt-2 text-sm text-gray-500 italic",children:[" ",U.notes]}),U.progression&&a.jsxs("p",{className:"mt-1 text-xs text-accent-secondary",children:[" ",U.progression]})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[!he&&P===f?.currentWeek&&a.jsx("button",{onClick:()=>Y(D,Ie,U),className:"p-2 rounded-lg text-gray-500 hover:text-accent-primary hover:bg-dark-600 transition-colors",title:"Log actual performance",children:a.jsx(Y1,{className:"w-5 h-5"})}),!he&&a.jsx("button",{onClick:()=>x(I,D,Ie),className:`p-2 rounded-lg transition-colors ${_e?"text-accent-success":"text-gray-500 hover:text-white hover:bg-dark-600"}`,title:_e?"Mark incomplete":"Mark complete",children:_e?a.jsx(Br,{className:"w-6 h-6"}):a.jsx(G1,{className:"w-6 h-6"})})]})]})},Ie)}),ee(D)?a.jsxs("div",{className:"mt-4 p-3 bg-accent-success/20 rounded-lg border border-accent-success/30 text-center",children:[a.jsx(Br,{className:"w-5 h-5 text-accent-success inline mr-2"}),a.jsx("span",{className:"text-accent-success font-medium",children:"Session Complete!"})]}):a.jsxs(Vt,{fullWidth:!0,variant:"success",className:"mt-4",onClick:()=>B(D),children:[a.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Complete All Exercises"]})]})]},D))]})})]})}function Cf({profile:f,meals:m,workouts:x,onLogMeal:v,onDeleteMeal:C,onBack:w}){const[I,M]=Re.useState(new Date),[_,N]=Re.useState(!1),{macros:P,bmr:j,tdee:$}=f,V=f.weightUnit==="kg"?f.weight/.453592:parseFloat(f.weight),z=I.toISOString().split("T")[0],Z=m.filter(X=>X.loggedAt?.startsWith(z)||X.createdAt?.startsWith(z)),oe=x.filter(X=>X.loggedAt?.startsWith(z)||X.completedAt?.startsWith(z)),xe=Z.reduce((X,me)=>({calories:X.calories+(me.calories||0),protein:X.protein+(me.protein||0),carbs:X.carbs+(me.carbs||0),fat:X.fat+(me.fat||0),fiber:X.fiber+(me.fiber||0),sugar:X.sugar+(me.sugar||0),sodium:X.sodium+(me.sodium||0)}),{calories:0,protein:0,carbs:0,fat:0,fiber:0,sugar:0,sodium:0}),fe=oe.reduce((X,me)=>X+(me.caloriesBurned||200),0),ie=Lc(j||1800,f.activityLevel,fe),ne=Ef(f,ie.totalDailyBurn),be=X=>{const me=new Date(I);me.setDate(me.getDate()+X),M(me)},de=I.toISOString().split("T")[0]===new Date().toISOString().split("T")[0];return a.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[a.jsxs("header",{className:"px-6 py-5 bg-dark-800 border-b border-dark-700",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[w&&a.jsx("button",{onClick:w,className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:a.jsx(Oa,{className:"w-5 h-5 text-white"})}),a.jsx("div",{children:a.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Fi,{className:"w-6 h-6 text-accent-warning"}),"Nutrition"]})})]}),a.jsxs(Vt,{size:"sm",onClick:v,children:[a.jsx(Wi,{className:"w-4 h-4 mr-1"}),"Log Meal"]})]}),a.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4",children:[a.jsx("button",{onClick:()=>be(-1),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:a.jsx(Oa,{className:"w-5 h-5 text-gray-400"})}),a.jsx("div",{className:"text-center",children:a.jsx("p",{className:"text-white font-medium",children:de?"Today":I.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})}),a.jsx("button",{onClick:()=>be(1),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",disabled:de,children:a.jsx(Li,{className:`w-5 h-5 ${de?"text-gray-600":"text-gray-400"}`})})]})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx(Qt,{children:a.jsxs(Jt,{children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx(Ts,{className:"w-5 h-5 text-accent-danger mx-auto mb-1"}),a.jsx("p",{className:"text-xl font-bold text-white",children:ie.totalDailyBurn}),a.jsx("p",{className:"text-xs text-gray-400",children:"Burned"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Net"}),a.jsxs("p",{className:`text-2xl font-bold ${xe.calories-ie.totalDailyBurn<0?"text-accent-success":"text-accent-warning"}`,children:[xe.calories-ie.totalDailyBurn>0?"+":"",xe.calories-ie.totalDailyBurn]})]}),a.jsxs("div",{className:"text-center",children:[a.jsx(Lr,{className:"w-5 h-5 text-accent-success mx-auto mb-1"}),a.jsx("p",{className:"text-xl font-bold text-white",children:xe.calories}),a.jsx("p",{className:"text-xs text-gray-400",children:"Consumed"})]})]}),a.jsx("div",{className:"h-px bg-dark-600 my-4"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[a.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[a.jsx("p",{className:"text-gray-400",children:"BMR"}),a.jsx("p",{className:"text-white font-medium",children:ie.bmr})]}),a.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[a.jsx("p",{className:"text-gray-400",children:"Activity"}),a.jsx("p",{className:"text-white font-medium",children:ie.neat})]}),a.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[a.jsx("p",{className:"text-gray-400",children:"Workouts"}),a.jsx("p",{className:"text-white font-medium",children:fe})]})]})]})}),a.jsx(Qt,{children:a.jsxs(Jt,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[a.jsx(Lr,{className:"w-5 h-5 text-accent-primary"}),"Recommended Intake"]}),a.jsxs("span",{className:"text-xs text-gray-400 px-2 py-1 bg-dark-700 rounded",children:[f.nutritionGoal==="maintain"&&"Maintain",f.nutritionGoal==="recomp"&&"Recomp",f.nutritionGoal==="lose"&&"Weight Loss",f.nutritionGoal==="gain"&&"Weight Gain"]})]}),a.jsx("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-lg mb-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("p",{className:"text-3xl font-bold text-white",children:ne.calories}),a.jsx("p",{className:"text-sm text-gray-400",children:"Recommended daily calories"})]})}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[a.jsxs("p",{className:"text-lg font-bold text-accent-success",children:[ne.protein,"g"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Protein"}),a.jsxs("p",{className:"text-xs text-gray-500",children:[ne.proteinPerLb,"g/lb"]})]}),a.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[a.jsxs("p",{className:"text-lg font-bold text-accent-warning",children:[ne.carbs,"g"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),a.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[a.jsxs("p",{className:"text-lg font-bold text-accent-secondary",children:[ne.fat,"g"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-3 flex items-start gap-1",children:[a.jsx(v0,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),"Based on your ",f.nutritionGoal," goal and estimated ",ie.totalDailyBurn," daily calorie burn"]})]})}),a.jsx(Qt,{children:a.jsxs(Jt,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-lg font-semibold text-white",children:"Today's Macros"}),a.jsx("button",{onClick:()=>N(!_),className:"text-sm text-accent-primary",children:_?"Simple View":"Detailed View"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx(kc,{label:"Protein",current:xe.protein,target:ne.protein,color:"success",calories:xe.protein*4}),a.jsx(kc,{label:"Carbohydrates",current:xe.carbs,target:ne.carbs,color:"warning",calories:xe.carbs*4}),a.jsx(kc,{label:"Fat",current:xe.fat,target:ne.fat,color:"secondary",calories:xe.fat*9})]}),_&&a.jsxs("div",{className:"mt-6 pt-4 border-t border-dark-600",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-3",children:"Additional Nutrients"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Xl,{label:"Fiber",value:xe.fiber,target:30,unit:"g"}),a.jsx(Xl,{label:"Sugar",value:xe.sugar,target:50,unit:"g",warn:!0}),a.jsx(Xl,{label:"Sodium",value:xe.sodium,target:2300,unit:"mg",warn:!0}),a.jsx(Xl,{label:"Water",value:Math.round(V*.5),target:Math.round(V*.67),unit:"oz"})]})]}),a.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-600",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Calorie Distribution"}),a.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden bg-dark-600",children:[a.jsx("div",{className:"bg-accent-success",style:{width:`${xe.calories>0?xe.protein*4/xe.calories*100:0}%`}}),a.jsx("div",{className:"bg-accent-warning",style:{width:`${xe.calories>0?xe.carbs*4/xe.calories*100:0}%`}}),a.jsx("div",{className:"bg-accent-secondary",style:{width:`${xe.calories>0?xe.fat*9/xe.calories*100:0}%`}})]}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[a.jsxs("span",{children:["P: ",xe.calories>0?Math.round(xe.protein*4/xe.calories*100):0,"%"]}),a.jsxs("span",{children:["C: ",xe.calories>0?Math.round(xe.carbs*4/xe.calories*100):0,"%"]}),a.jsxs("span",{children:["F: ",xe.calories>0?Math.round(xe.fat*9/xe.calories*100):0,"%"]})]})]})]})}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-lg font-semibold text-white mb-3",children:["Meals (",Z.length,")"]}),Z.length>0?a.jsx("div",{className:"space-y-3",children:Z.map(X=>a.jsx(Qt,{children:a.jsx(Jt,{className:"p-4",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-medium text-white",children:X.name||"Meal"}),a.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 mt-2 text-sm",children:[a.jsxs("span",{className:"text-white font-medium",children:[X.calories," kcal"]}),a.jsxs("span",{className:"text-accent-success",children:["P: ",X.protein,"g"]}),a.jsxs("span",{className:"text-accent-warning",children:["C: ",X.carbs,"g"]}),a.jsxs("span",{className:"text-accent-secondary",children:["F: ",X.fat,"g"]})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(X.loggedAt||X.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),X.screenshot&&a.jsx("img",{src:X.screenshot,alt:"Meal",className:"w-14 h-14 object-cover rounded-lg ml-3"}),a.jsx("button",{onClick:()=>C&&C(X.id),className:"p-2 text-gray-500 hover:text-accent-danger ml-2",children:a.jsx(Da,{className:"w-4 h-4"})})]})})},X.id))}):a.jsx(Qt,{children:a.jsxs(Jt,{className:"text-center py-8",children:[a.jsx("span",{className:"text-4xl mb-2 block",children:""}),a.jsx("p",{className:"text-gray-400",children:"No meals logged yet"}),a.jsxs(Vt,{variant:"secondary",size:"sm",className:"mt-4",onClick:v,children:[a.jsx(Wi,{className:"w-4 h-4 mr-1"}),"Log Your First Meal"]})]})})]})]})]})}function Ef(f,m){const x=f.weightUnit==="kg"?f.weight/.453592:parseFloat(f.weight);let v,C,w;switch(f.nutritionGoal){case"maintain":v=m,w=.8,C=Math.round(x*w);break;case"recomp":v=m,w=1,C=Math.round(x*w);break;case"lose":const P=(f.weeklyWeightChange||.5)*500;v=Math.round(m-P),w=1,C=Math.round(x*w);break;case"gain":const j=(f.weeklyWeightChange||.5)*500;v=Math.round(m+j),w=.9,C=Math.round(x*w);break;default:v=m,w=.8,C=Math.round(x*w)}const I=C*4,M=v-I,_=Math.round(M*.3/9),N=Math.round(M*.7/4);return{calories:v,protein:C,proteinPerLb:w,carbs:N,fat:_}}function kc({label:f,current:m,target:x,color:v,calories:C}){const w=m>x;return a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-gray-400",children:f}),a.jsxs("div",{className:"text-right",children:[a.jsxs("span",{className:`font-medium ${w?"text-accent-danger":"text-white"}`,children:[m,"g"]}),a.jsxs("span",{className:"text-gray-500",children:[" / ",x,"g"]}),a.jsxs("span",{className:"text-gray-600 text-xs ml-2",children:["(",C," kcal)"]})]})]}),a.jsx(Bi,{value:m,max:x,color:w?"danger":v,size:"sm"})]})}function Xl({label:f,value:m,target:x,unit:v,warn:C=!1}){const w=m/x*100,I=m>x;return a.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-gray-400",children:f}),a.jsxs("span",{className:`font-medium ${C&&I?"text-accent-danger":"text-white"}`,children:[m,v]})]}),a.jsx("div",{className:"mt-1 h-1 bg-dark-600 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full rounded-full ${C&&I?"bg-accent-danger":"bg-accent-primary"}`,style:{width:`${Math.min(w,100)}%`}})})]})}function Sf({profile:f,program:m,meals:x,workouts:v}){const C=new Date,w=new Date(C);w.setDate(C.getDate()-C.getDay()),w.setHours(0,0,0,0);const I=x.filter(V=>new Date(V.loggedAt||V.createdAt)>=w),M=v.filter(V=>new Date(V.loggedAt||V.completedAt)>=w),_=I.length?Math.round(I.reduce((V,z)=>V+(z.calories||0),0)/Math.min(7,I.length)):0,N=I.length?Math.round(I.reduce((V,z)=>V+(z.protein||0),0)/Math.min(7,I.length)):0,P=f.daysPerWeek||4,j=Math.min(Math.round(M.length/P*100),100),$=M.reduce((V,z)=>V+(z.exercises?.reduce((Z,oe)=>Z+(parseInt(oe.sets)||0),0)||0),0);return a.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[a.jsxs("header",{className:"px-6 py-5 bg-dark-800 border-b border-dark-700",children:[a.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(Mc,{className:"w-6 h-6 text-accent-primary"}),"Stats & Progress"]}),a.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"This week's overview"})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(Qt,{children:a.jsxs(Jt,{className:"text-center",children:[a.jsx(ri,{className:"w-8 h-8 text-accent-primary mx-auto mb-2"}),a.jsx("div",{className:"text-3xl font-bold text-white",children:M.length}),a.jsx("p",{className:"text-sm text-gray-400",children:"Workouts"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["of ",P," planned"]})]})}),a.jsx(Qt,{children:a.jsxs(Jt,{className:"text-center",children:[a.jsx(Lr,{className:"w-8 h-8 text-accent-success mx-auto mb-2"}),a.jsxs("div",{className:"text-3xl font-bold text-white",children:[j,"%"]}),a.jsx("p",{className:"text-sm text-gray-400",children:"Adherence"})]})})]}),a.jsx(Qt,{children:a.jsxs(Jt,{children:[a.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(js,{className:"w-5 h-5 text-accent-primary"}),"Training Progress"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Program Week"}),a.jsxs("span",{className:"text-white font-medium",children:[m?.currentWeek||1," of ",m?.mesocycleWeeks||4]})]}),a.jsx(Bi,{value:m?.currentWeek||1,max:m?.mesocycleWeeks||4,color:"primary"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[a.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:$}),a.jsx("p",{className:"text-xs text-gray-400",children:"Weekly Sets"})]}),a.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:M.length>0?Math.round(M.reduce((V,z)=>V+(z.duration||0),0)/M.length):0}),a.jsx("p",{className:"text-xs text-gray-400",children:"Avg Duration"})]})]})]})]})}),a.jsx(Qt,{children:a.jsxs(Jt,{children:[a.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(Fi,{className:"w-5 h-5 text-accent-warning"}),"Nutrition Averages"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-1",children:[a.jsx("span",{className:"text-gray-400",children:"Avg Daily Calories"}),a.jsxs("span",{className:"text-white",children:[_," / ",f.macros?.calories]})]}),a.jsx(Bi,{value:_,max:f.macros?.calories||2e3,color:_>(f.macros?.calories||2e3)?"danger":"warning",size:"sm"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between mb-1",children:[a.jsx("span",{className:"text-gray-400",children:"Avg Daily Protein"}),a.jsxs("span",{className:"text-white",children:[N,"g / ",f.macros?.protein,"g"]})]}),a.jsx(Bi,{value:N,max:f.macros?.protein||150,color:"success",size:"sm"})]}),a.jsxs("div",{className:"pt-2 text-sm text-gray-500",children:["Based on ",I.length," logged meals"]})]})]})}),a.jsx(Qt,{children:a.jsxs(Jt,{children:[a.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(Rs,{className:"w-5 h-5 text-accent-secondary"}),"Mesocycle Progress"]}),a.jsx("div",{className:"flex gap-2",children:m?.phases?.map((V,z)=>{const Z=V===m.currentPhase,oe=m.phases.indexOf(m.currentPhase)>z;return a.jsx("div",{className:`flex-1 p-3 rounded-lg text-center text-sm ${Z?"bg-accent-primary text-white":oe?"bg-accent-success/20 text-accent-success":"bg-dark-700 text-gray-500"}`,children:V},V)})})]})})]})]})}const Af=f=>!f||f<1?"Beginner":f<2?"Novice":f<4?"Intermediate":f<7?"Advanced":"Expert",kf=f=>f?f.charAt(0).toUpperCase()+f.slice(1):"";function If({profile:f,program:m,onResetSetup:x}){const{macros:v}=f,C={strength:" Strength",bodybuilding:" Bodybuilding",endurance:" Endurance",fatloss:" Fat Loss",marathon:" Marathon",general:" General"};return a.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[a.jsx("header",{className:"px-6 py-8 bg-gradient-to-b from-accent-primary/20 to-dark-900",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-20 h-20 bg-accent-primary rounded-full flex items-center justify-center",children:a.jsx("span",{className:"text-3xl",children:f.name?f.name.charAt(0).toUpperCase():""})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-white",children:f.name||"Athlete"}),a.jsxs("p",{className:"text-gray-400",children:[Af(f.yearsTraining)," Level"]})]})]})}),a.jsxs("div",{className:"px-6 py-4 space-y-4",children:[a.jsx(Qt,{children:a.jsxs(Jt,{children:[a.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(N0,{className:"w-5 h-5 text-accent-secondary"}),"Body Stats"]}),a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:f.weight}),a.jsx("p",{className:"text-xs text-gray-400",children:f.weightUnit||"lbs"})]}),a.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:f.heightUnit==="metric"?f.heightCm:`${f.heightFeet}'${f.heightInches}"`}),a.jsx("p",{className:"text-xs text-gray-400",children:f.heightUnit==="metric"?"cm":"imperial"})]}),a.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:f.age}),a.jsx("p",{className:"text-xs text-gray-400",children:"years"})]})]})]})}),a.jsx(Qt,{children:a.jsxs(Jt,{children:[a.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(Fi,{className:"w-5 h-5 text-accent-warning"}),"Daily Nutrition Targets"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[a.jsx("p",{className:"text-3xl font-bold text-white",children:v?.calories}),a.jsx("p",{className:"text-sm text-gray-400",children:"Calories"})]}),a.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[a.jsxs("p",{className:"text-3xl font-bold text-accent-success",children:[v?.protein,"g"]}),a.jsx("p",{className:"text-sm text-gray-400",children:"Protein"})]}),a.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[a.jsxs("p",{className:"text-3xl font-bold text-accent-warning",children:[v?.carbs,"g"]}),a.jsx("p",{className:"text-sm text-gray-400",children:"Carbs"})]}),a.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[a.jsxs("p",{className:"text-3xl font-bold text-accent-secondary",children:[v?.fat,"g"]}),a.jsx("p",{className:"text-sm text-gray-400",children:"Fat"})]})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["TDEE: ",f.tdee," kcal/day  BMR: ",f.bmr," kcal/day"]})]})}),a.jsx(Qt,{children:a.jsxs(Jt,{children:[a.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(Lr,{className:"w-5 h-5 text-accent-primary"}),"Training Goals"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[a.jsx("span",{className:"text-gray-400",children:"Primary"}),a.jsx("span",{className:"text-white font-medium",children:C[f.programSubtype]||kf(f.programType)})]}),f.enableHybrid&&f.secondaryProgramType&&a.jsxs("div",{className:"flex items-center justify-between p-3 bg-accent-primary/10 border border-accent-primary/30 rounded-lg",children:[a.jsx("span",{className:"text-accent-primary",children:"Hybrid"}),a.jsxs("span",{className:"text-white",children:[" ",f.allowDoubleDays?"AM/PM Splits":"Alternating"]})]})]})]})}),a.jsx(Qt,{children:a.jsxs(Jt,{children:[a.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[a.jsx(Rs,{className:"w-5 h-5 text-accent-secondary"}),"Current Program"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Program"}),a.jsx("span",{className:"text-white",children:m?.name||"Custom"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Week"}),a.jsxs("span",{className:"text-white",children:[m?.currentWeek," of ",m?.mesocycleWeeks]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-gray-400",children:"Phase"}),a.jsx("span",{className:"text-white",children:m?.currentPhase})]})]})]})}),a.jsx("div",{className:"pt-4",children:a.jsxs(Vt,{variant:"secondary",fullWidth:!0,onClick:x,children:[a.jsx(q1,{className:"w-4 h-4 mr-2"}),"Reset & Start Over"]})}),a.jsx("p",{className:"text-center text-xs text-gray-600 pt-4",children:"MOTUS v1.0  Powered by Claude AI"})]})]})}const j0="https://world.openfoodfacts.org/api/v2",h0={g:1,gram:1,grams:1,kg:1e3,oz:28.3495,ounce:28.3495,ounces:28.3495,lb:453.592,pound:453.592,pounds:453.592,ml:1,milliliter:1,milliliters:1,l:1e3,liter:1e3,liters:1e3,"fl oz":29.5735,"fluid ounce":29.5735,"fluid ounces":29.5735,cup:236.588,cups:236.588,tbsp:14.787,tablespoon:14.787,tablespoons:14.787,tsp:4.929,teaspoon:4.929,teaspoons:4.929,pint:473.176,quart:946.353,gallon:3785.41},Tf=[{label:"Serving",value:"serving",icon:""},{label:"Gram (g)",value:"g",icon:""},{label:"Ounce (oz)",value:"oz",icon:""},{label:"Cup",value:"cup",icon:""},{label:"Tablespoon",value:"tbsp",icon:""},{label:"Teaspoon",value:"tsp",icon:""},{label:"Fluid Oz",value:"fl oz",icon:""},{label:"mL",value:"ml",icon:""},{label:"Piece",value:"piece",icon:""},{label:"Slice",value:"slice",icon:""},{label:"Container",value:"container",icon:""}];function _0(f,m,x){const v=m.toLowerCase(),C=x.toLowerCase();if(v===C)return f;const w=h0[v],I=h0[C];return!w||!I?(console.warn(`Unknown unit conversion: ${m} to ${x}`),f):f*w/I}async function Rf(f){try{const x=await(await fetch(`${j0}/product/${f}.json`)).json();if(x.status!==1||!x.product)return{success:!1,error:"Product not found"};const v=x.product,C=v.nutriments||{},w=v.serving_size||"100g",I=M0(w);return{success:!0,product:{barcode:f,name:v.product_name||v.product_name_en||"Unknown Product",brand:v.brands||"",image:v.image_front_small_url||v.image_url||null,servingSize:w,servingSizeGrams:I,per100g:{calories:Math.round(C["energy-kcal_100g"]||C.energy_100g/4.184||0),protein:Math.round((C.proteins_100g||0)*10)/10,carbs:Math.round((C.carbohydrates_100g||0)*10)/10,fat:Math.round((C.fat_100g||0)*10)/10,fiber:Math.round((C.fiber_100g||0)*10)/10,sugar:Math.round((C.sugars_100g||0)*10)/10,sodium:Math.round(C.sodium_100g*1e3||0)},perServing:{calories:Math.round(C["energy-kcal_serving"]||(C["energy-kcal_100g"]||0)*I/100),protein:Math.round((C.proteins_serving||(C.proteins_100g||0)*I/100)*10)/10,carbs:Math.round((C.carbohydrates_serving||(C.carbohydrates_100g||0)*I/100)*10)/10,fat:Math.round((C.fat_serving||(C.fat_100g||0)*I/100)*10)/10},categories:v.categories||"",ingredients:v.ingredients_text||v.ingredients_text_en||"",allergens:v.allergens||"",nutriscore:v.nutriscore_grade||null}}}catch(m){return console.error("Error fetching product:",m),{success:!1,error:"Failed to fetch product data"}}}async function jf(f,m=1){try{const v=await(await fetch(`${j0}/search?search_terms=${encodeURIComponent(f)}&page=${m}&page_size=20&fields=code,product_name,brands,image_front_small_url,nutriments,serving_size`)).json();return v.products?{success:!0,products:v.products.map(w=>{const I=w.nutriments||{},M=w.serving_size||"100g",_=M0(M);return{barcode:w.code,name:w.product_name||"Unknown Product",brand:w.brands||"",image:w.image_front_small_url||null,servingSize:M,servingSizeGrams:_,perServing:{calories:Math.round((I["energy-kcal_100g"]||0)*_/100),protein:Math.round((I.proteins_100g||0)*_/100*10)/10,carbs:Math.round((I.carbohydrates_100g||0)*_/100*10)/10,fat:Math.round((I.fat_100g||0)*_/100*10)/10},per100g:{calories:Math.round(I["energy-kcal_100g"]||0),protein:Math.round((I.proteins_100g||0)*10)/10,carbs:Math.round((I.carbohydrates_100g||0)*10)/10,fat:Math.round((I.fat_100g||0)*10)/10}}}).filter(w=>w.name!=="Unknown Product"),totalCount:v.count||0,page:v.page||1}:{success:!1,error:"No products found",products:[]}}catch(x){return console.error("Error searching products:",x),{success:!1,error:"Failed to search products",products:[]}}}function M0(f){if(!f)return 100;const m=f.match(/(\d+\.?\d*)\s*(g|ml|oz|cup|tbsp|tsp)?/i);if(m){const x=parseFloat(m[1]),v=(m[2]||"g").toLowerCase();return _0(x,v,"g")}return 100}function _f(f,m,x){if(!f||!f.per100g)return null;let v;x==="serving"?(v=f.servingSizeGrams||100,v*=m):x==="piece"||x==="slice"||x==="container"?v=(f.servingSizeGrams||100)*m:v=_0(m,x,"g");const C=v/100;return{calories:Math.round(f.per100g.calories*C),protein:Math.round(f.per100g.protein*C*10)/10,carbs:Math.round(f.per100g.carbs*C*10)/10,fat:Math.round(f.per100g.fat*C*10)/10,fiber:f.per100g.fiber?Math.round(f.per100g.fiber*C*10)/10:null,sugar:f.per100g.sugar?Math.round(f.per100g.sugar*C*10)/10:null,grams:Math.round(v)}}const Mf=[{id:"egg",name:"Egg (large)",brand:"Generic",servingSize:"1 large (50g)",servingSizeGrams:50,per100g:{calories:143,protein:12.6,carbs:.7,fat:9.5},perServing:{calories:72,protein:6.3,carbs:.4,fat:4.8}},{id:"chicken_breast",name:"Chicken Breast (cooked)",brand:"Generic",servingSize:"3 oz (85g)",servingSizeGrams:85,per100g:{calories:165,protein:31,carbs:0,fat:3.6},perServing:{calories:140,protein:26,carbs:0,fat:3.1}},{id:"rice_white",name:"White Rice (cooked)",brand:"Generic",servingSize:"1 cup (158g)",servingSizeGrams:158,per100g:{calories:130,protein:2.7,carbs:28,fat:.3},perServing:{calories:205,protein:4.3,carbs:44.2,fat:.4}},{id:"oats",name:"Oatmeal (dry)",brand:"Generic",servingSize:"1/2 cup (40g)",servingSizeGrams:40,per100g:{calories:389,protein:16.9,carbs:66,fat:6.9},perServing:{calories:156,protein:6.8,carbs:26.4,fat:2.8}},{id:"banana",name:"Banana (medium)",brand:"Generic",servingSize:"1 medium (118g)",servingSizeGrams:118,per100g:{calories:89,protein:1.1,carbs:23,fat:.3},perServing:{calories:105,protein:1.3,carbs:27,fat:.4}},{id:"apple",name:"Apple (medium)",brand:"Generic",servingSize:"1 medium (182g)",servingSizeGrams:182,per100g:{calories:52,protein:.3,carbs:14,fat:.2},perServing:{calories:95,protein:.5,carbs:25,fat:.3}},{id:"greek_yogurt",name:"Greek Yogurt (plain)",brand:"Generic",servingSize:"1 cup (227g)",servingSizeGrams:227,per100g:{calories:59,protein:10,carbs:3.6,fat:.7},perServing:{calories:134,protein:23,carbs:8.2,fat:1.6}},{id:"almonds",name:"Almonds",brand:"Generic",servingSize:"1 oz (28g)",servingSizeGrams:28,per100g:{calories:579,protein:21,carbs:22,fat:50},perServing:{calories:162,protein:6,carbs:6,fat:14}},{id:"salmon",name:"Salmon (cooked)",brand:"Generic",servingSize:"3 oz (85g)",servingSizeGrams:85,per100g:{calories:208,protein:20,carbs:0,fat:13},perServing:{calories:177,protein:17,carbs:0,fat:11}},{id:"broccoli",name:"Broccoli (cooked)",brand:"Generic",servingSize:"1 cup (156g)",servingSizeGrams:156,per100g:{calories:35,protein:2.4,carbs:7,fat:.4},perServing:{calories:55,protein:3.7,carbs:11,fat:.6}},{id:"avocado",name:"Avocado",brand:"Generic",servingSize:"1/2 avocado (68g)",servingSizeGrams:68,per100g:{calories:160,protein:2,carbs:9,fat:15},perServing:{calories:109,protein:1.4,carbs:6,fat:10}},{id:"protein_shake",name:"Protein Shake (whey)",brand:"Generic",servingSize:"1 scoop (30g)",servingSizeGrams:30,per100g:{calories:400,protein:80,carbs:10,fat:5},perServing:{calories:120,protein:24,carbs:3,fat:1.5}}];function Of({isOpen:f,onClose:m,onSave:x}){const[v,C]=Re.useState("main"),[w,I]=Re.useState(!1),[M,_]=Re.useState(null),[N,P]=Re.useState([]),[j,$]=Re.useState(""),[V,z]=Re.useState([]),[Z,oe]=Re.useState(null),[xe,fe]=Re.useState("1"),[ie,ne]=Re.useState("serving"),[be,de]=Re.useState(null),[X,me]=Re.useState(""),[ue,Ae]=Re.useState("");Re.useEffect(()=>{f||(C("main"),P([]),$(""),z([]),oe(null),fe("1"),ne("serving"),_(null),me(""),Ae(""))},[f]),Re.useEffect(()=>{if(Z){const q=parseFloat(xe)||0,H=_f(Z,q,ie);de(H)}},[Z,xe,ie]);const Ue=async q=>{C("main"),I(!0),_(null);try{const H=await Rf(q);H.success?(oe(H.product),fe("1"),ne(H.product.servingSize||"serving"),C("product")):_(`Product not found for barcode: ${q}`)}catch{_("Failed to fetch product. Please try again.")}finally{I(!1)}},ee=async()=>{if(j.trim()){I(!0),_(null);try{const q=await jf(j);q.success?(z(q.products),q.products.length===0&&_("No products found. Try a different search term.")):_("Search failed. Please try again.")}catch{_("Search failed. Please try again.")}finally{I(!1)}}},Y=q=>{oe(q),fe("1"),ne(q.servingSize||"serving"),C("product")},Ce=()=>{if(!Z||!be)return;const q={id:Date.now(),name:Z.name,brand:Z.brand,barcode:Z.barcode,amount:parseFloat(xe)||1,unit:ie,...be};P([...N,q]),oe(null),de(null),C("main")},B=q=>{P(N.filter(H=>H.id!==q))},pe=N.reduce((q,H)=>({calories:q.calories+(H.calories||0),protein:q.protein+(H.protein||0),carbs:q.carbs+(H.carbs||0),fat:q.fat+(H.fat||0)}),{calories:0,protein:0,carbs:0,fat:0}),te=()=>{if(N.length===0)return;const q={name:ue||`Meal (${N.length} items)`,items:N,calories:Math.round(pe.calories),protein:Math.round(pe.protein*10)/10,carbs:Math.round(pe.carbs*10)/10,fat:Math.round(pe.fat*10)/10,loggedAt:new Date().toISOString()};x(q),m()},ce=()=>{X.trim()&&Ue(X.trim())};return v==="scanner"?a.jsx(Mh,{isOpen:!0,onScan:Ue,onClose:()=>C("main")}):v==="product"&&Z?a.jsx(Zl,{isOpen:f,onClose:()=>C("main"),title:"Add Food",size:"md",children:a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"flex gap-4",children:[Z.image?a.jsx("img",{src:Z.image,alt:Z.name,className:"w-20 h-20 rounded-lg object-cover bg-dark-700"}):a.jsx("div",{className:"w-20 h-20 rounded-lg bg-dark-700 flex items-center justify-center",children:a.jsx(si,{className:"w-8 h-8 text-gray-500"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-white",children:Z.name}),Z.brand&&a.jsx("p",{className:"text-sm text-gray-400",children:Z.brand}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Serving: ",Z.servingSize]})]})]}),a.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl space-y-4",children:[a.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Serving Size"}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Amount"}),a.jsx("input",{type:"number",value:xe,onChange:q=>fe(q.target.value),min:"0.1",step:"0.1",className:"w-full px-4 py-3 bg-dark-600 border border-dark-500 rounded-lg text-white text-lg font-medium focus:border-accent-primary focus:outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Unit"}),a.jsx("select",{value:ie,onChange:q=>ne(q.target.value),className:"w-full px-4 py-3 bg-dark-600 border border-dark-500 rounded-lg text-white focus:border-accent-primary focus:outline-none appearance-none",children:Tf.map(q=>a.jsxs("option",{value:q.value,children:[q.icon," ",q.label]},q.value))})]})]}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:[.5,1,1.5,2].map(q=>a.jsxs("button",{onClick:()=>fe(q.toString()),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${parseFloat(xe)===q?"bg-accent-primary text-white":"bg-dark-600 text-gray-400 hover:bg-dark-500"}`,children:[q," ",ie==="serving"?"serving":ie]},q))})]}),be&&a.jsx("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-xl border border-accent-primary/20",children:a.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-2xl font-bold text-white",children:be.calories}),a.jsx("p",{className:"text-xs text-gray-400",children:"Calories"})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-accent-primary",children:[be.protein,"g"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Protein"})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-accent-warning",children:[be.carbs,"g"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-2xl font-bold text-accent-secondary",children:[be.fat,"g"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Vt,{variant:"secondary",onClick:()=>C("main"),fullWidth:!0,children:"Cancel"}),a.jsxs(Vt,{onClick:Ce,fullWidth:!0,disabled:!be,children:[a.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Add to Meal"]})]})]})}):v==="search"?a.jsx(Zl,{isOpen:f,onClose:()=>C("main"),title:"Search Food",size:"md",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(Tc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),a.jsx("input",{type:"text",value:j,onChange:q=>$(q.target.value),onKeyPress:q=>q.key==="Enter"&&ee(),placeholder:"Search foods...",className:"w-full pl-10 pr-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white focus:border-accent-primary focus:outline-none",autoFocus:!0})]}),a.jsx(Vt,{onClick:ee,disabled:w,children:w?a.jsx(zd,{className:"w-5 h-5 animate-spin"}):"Search"})]}),M&&a.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2",children:[a.jsx(Ic,{className:"w-5 h-5 text-red-400"}),a.jsx("span",{className:"text-sm text-red-400",children:M})]}),a.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:V.map((q,H)=>a.jsxs("button",{onClick:()=>Y(q),className:"w-full p-3 bg-dark-700 rounded-lg flex items-center gap-3 hover:bg-dark-600 transition-colors text-left",children:[q.image?a.jsx("img",{src:q.image,alt:"",className:"w-12 h-12 rounded-lg object-cover"}):a.jsx("div",{className:"w-12 h-12 rounded-lg bg-dark-600 flex items-center justify-center",children:a.jsx(si,{className:"w-5 h-5 text-gray-500"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-white font-medium truncate",children:q.name}),q.brand&&a.jsx("p",{className:"text-xs text-gray-500 truncate",children:q.brand}),a.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[q.perServing.calories," cal  ",q.perServing.protein,"g P"]})]}),a.jsx(Oc,{className:"w-5 h-5 text-gray-500 rotate-[-90deg]"})]},H))}),V.length===0&&!w&&a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Common Foods"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:Mf.slice(0,8).map(q=>a.jsxs("button",{onClick:()=>Y(q),className:"p-3 bg-dark-700 rounded-lg text-left hover:bg-dark-600 transition-colors",children:[a.jsx("p",{className:"text-sm text-white truncate",children:q.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[q.perServing.calories," cal"]})]},q.id))})]}),a.jsx(Vt,{variant:"secondary",onClick:()=>C("main"),fullWidth:!0,children:"Back"})]})}):a.jsx(Zl,{isOpen:f,onClose:m,title:"Log Meal",size:"md",children:a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("button",{onClick:()=>C("scanner"),className:"p-4 bg-gradient-to-br from-accent-primary/20 to-accent-primary/5 border border-accent-primary/30 rounded-xl flex flex-col items-center gap-2 hover:border-accent-primary/50 transition-colors",children:[a.jsx("div",{className:"w-12 h-12 bg-accent-primary/20 rounded-full flex items-center justify-center",children:a.jsx(U1,{className:"w-6 h-6 text-accent-primary"})}),a.jsx("span",{className:"text-white font-medium",children:"Scan Barcode"}),a.jsx("span",{className:"text-xs text-gray-400",children:"Point at product"})]}),a.jsxs("button",{onClick:()=>C("search"),className:"p-4 bg-dark-700 border border-dark-500 rounded-xl flex flex-col items-center gap-2 hover:border-dark-400 transition-colors",children:[a.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-full flex items-center justify-center",children:a.jsx(Tc,{className:"w-6 h-6 text-gray-400"})}),a.jsx("span",{className:"text-white font-medium",children:"Search Food"}),a.jsx("span",{className:"text-xs text-gray-400",children:"Browse database"})]})]}),a.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Or enter barcode manually:"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",value:X,onChange:q=>me(q.target.value),placeholder:"Enter barcode number...",className:"flex-1 px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm focus:border-accent-primary focus:outline-none"}),a.jsx(Vt,{size:"sm",onClick:ce,disabled:!X.trim()||w,children:w?a.jsx(zd,{className:"w-4 h-4 animate-spin"}):"Look up"})]})]}),M&&a.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2",children:[a.jsx(Ic,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),a.jsx("span",{className:"text-sm text-red-400",children:M}),a.jsx("button",{onClick:()=>_(null),className:"ml-auto",children:a.jsx(Ql,{className:"w-4 h-4 text-red-400"})})]}),N.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center justify-between",children:[a.jsxs("span",{children:["Food Items (",N.length,")"]}),a.jsxs("span",{className:"text-accent-primary",children:[Math.round(pe.calories)," cal"]})]}),a.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:N.map(q=>a.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-white text-sm font-medium truncate",children:q.name}),a.jsxs("p",{className:"text-xs text-gray-500",children:[q.amount," ",q.unit,"  ",q.calories," cal  ",q.protein,"g P"]})]}),a.jsx("button",{onClick:()=>B(q.id),className:"p-2 text-gray-500 hover:text-red-400 transition-colors",children:a.jsx(Da,{className:"w-4 h-4"})})]},q.id))}),a.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-success/10 to-accent-primary/10 rounded-xl border border-accent-success/20",children:[a.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Meal Totals"}),a.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xl font-bold text-white",children:Math.round(pe.calories)}),a.jsx("p",{className:"text-xs text-gray-400",children:"cal"})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-xl font-bold text-accent-primary",children:[Math.round(pe.protein),"g"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"protein"})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-xl font-bold text-accent-warning",children:[Math.round(pe.carbs),"g"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"carbs"})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-xl font-bold text-accent-secondary",children:[Math.round(pe.fat),"g"]}),a.jsx("p",{className:"text-xs text-gray-400",children:"fat"})]})]})]})]}),N.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Meal Type (optional)"}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:["Breakfast","Lunch","Dinner","Snack","Pre-workout","Post-workout"].map(q=>a.jsx("button",{onClick:()=>Ae(ue===q?"":q),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${ue===q?"bg-accent-primary text-white":"bg-dark-700 border border-dark-500 text-gray-300 hover:border-accent-primary"}`,children:q},q))})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Vt,{variant:"secondary",onClick:m,fullWidth:!0,children:"Cancel"}),a.jsxs(Vt,{onClick:te,fullWidth:!0,disabled:N.length===0,children:[a.jsx(Br,{className:"w-4 h-4 mr-2"}),"Log Meal"]})]})]})})}const f0=["Ab Wheel Rollout","Arnold Press","Back Extension","Band Pull Apart","Barbell Bent Over Row","Barbell Curl","Barbell Hip Thrust","Barbell Lunge","Barbell Row","Barbell Shrug","Barbell Squat","Battle Ropes","Bench Dip","Bench Press","Bent Over Dumbbell Row","Bicycle Crunch","Bird Dog","Box Jump","Bulgarian Split Squat","Burpee","Cable Crossover","Cable Crunch","Cable Face Pull","Cable Fly","Cable Kickback","Cable Lateral Raise","Cable Pull Through","Cable Row","Cable Tricep Extension","Cable Woodchop","Calf Press","Calf Raise","Chest Dip","Chest Fly","Chin Up","Clean","Clean and Jerk","Close Grip Bench Press","Concentration Curl","Crunch","Dead Bug","Deadlift","Decline Bench Press","Decline Crunch","Deficit Deadlift","Dip","Dumbbell Bench Press","Dumbbell Bulgarian Split Squat","Dumbbell Curl","Dumbbell Fly","Dumbbell Front Raise","Dumbbell Lateral Raise","Dumbbell Lunge","Dumbbell Overhead Press","Dumbbell Pullover","Dumbbell Romanian Deadlift","Dumbbell Row","Dumbbell Shrug","Dumbbell Squat","Dumbbell Step Up","Dumbbell Tricep Extension","EZ Bar Curl","EZ Bar Skull Crusher","Face Pull","Farmer's Walk","Floor Press","Front Raise","Front Squat","Glute Bridge","Goblet Squat","Good Morning","Hack Squat","Hammer Curl","Hanging Knee Raise","Hanging Leg Raise","High Pull","Hip Abduction","Hip Adduction","Hip Thrust","Incline Bench Press","Incline Dumbbell Curl","Incline Dumbbell Fly","Incline Dumbbell Press","Inverted Row","Jump Rope","Jump Squat","Kettlebell Clean","Kettlebell Snatch","Kettlebell Swing","Kettlebell Turkish Get Up","Kneeling Cable Crunch","Landmine Press","Landmine Row","Lat Pulldown","Lateral Raise","Leg Curl","Leg Extension","Leg Press","Leg Raise","Lunges","Lying Leg Curl","Lying Tricep Extension","Machine Chest Press","Machine Fly","Machine Row","Machine Shoulder Press","Medicine Ball Slam","Military Press","Mountain Climber","Muscle Up","Overhead Press","Overhead Squat","Pallof Press","Pause Squat","Pec Deck","Pendlay Row","Pistol Squat","Plank","Power Clean","Preacher Curl","Press Up","Pull Up","Push Press","Push Up","Rack Pull","Rear Delt Fly","Reverse Crunch","Reverse Fly","Reverse Grip Lat Pulldown","Reverse Lunge","Romanian Deadlift","Rope Climb","Rope Tricep Pushdown","Rowing Machine","Russian Twist","Seated Cable Row","Seated Calf Raise","Seated Dumbbell Press","Seated Leg Curl","Shoulder Press","Side Bend","Side Plank","Single Arm Dumbbell Row","Single Leg Deadlift","Single Leg Squat","Sissy Squat","Sit Up","Skull Crusher","Sled Push","Smith Machine Squat","Snatch","Spider Curl","Split Squat","Squat","Standing Calf Raise","Step Up","Stiff Leg Deadlift","Sumo Deadlift","Sumo Squat","Superman","T-Bar Row","Thruster","Toe Touch","Trap Bar Deadlift","Tricep Dip","Tricep Kickback","Tricep Pushdown","Upright Row","V-Up","Walking Lunge","Wall Ball","Wide Grip Lat Pulldown","Wide Grip Pull Up","Wrist Curl","Zercher Squat","Zottman Curl"];function Df({isOpen:f,onClose:m,onSave:x,program:v}){const[C,w]=Re.useState("strength"),[I,M]=Re.useState(""),[_,N]=Re.useState("AM"),[P,j]=Re.useState([]),[$,V]=Re.useState(""),[z,Z]=Re.useState("7"),[oe,xe]=Re.useState(null),[fe,ie]=Re.useState(null),[ne,be]=Re.useState(null),[de,X]=Re.useState(""),me=Re.useRef(null),ue=B=>{const pe=B.target.files[0];if(pe){const te=new FileReader;te.onload=ce=>ie(ce.target.result),te.readAsDataURL(pe)}},Ae=()=>{j([...P,{id:Date.now(),name:"",sets:"",reps:"",weight:""}]),be(null),X("")},Ue=(B,pe,te)=>{j(P.map(ce=>ce.id===B?{...ce,[pe]:te}:ce)),pe==="name"&&(be(null),X(""))},ee=B=>j(P.filter(pe=>pe.id!==B)),Y=()=>de?f0.filter(B=>B.toLowerCase().includes(de.toLowerCase())):f0,Ce=()=>{x({type:C,duration:parseInt(I)||0,sessionTime:_,exercises:P.filter(B=>B.name),notes:$,screenshot:fe,overallRpe:parseInt(z),day:new Date().getDay()||7,loggedAt:new Date().toISOString()}),w("strength"),M(""),N("AM"),j([]),V(""),Z("7"),xe(null),ie(null),be(null),X(""),m()};return a.jsx(Zl,{isOpen:f,onClose:m,title:"Log Workout",size:"lg",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Type"}),a.jsx("div",{className:"flex gap-2",children:["strength","cardio","hiit"].map(B=>a.jsxs("button",{onClick:()=>w(B),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${C===B?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:[B==="strength"?"":B==="cardio"?"":""," ",B.charAt(0).toUpperCase()+B.slice(1)]},B))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Session"}),a.jsx("div",{className:"flex gap-2",children:["AM","PM"].map(B=>a.jsxs("button",{onClick:()=>N(B),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${_===B?B==="AM"?"bg-yellow-500/20 border-yellow-500 text-yellow-400":"bg-blue-500/20 border-blue-500 text-blue-400":"bg-dark-700 border-dark-500 text-gray-400"}`,children:[B==="AM"?"":""," ",B]},B))})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(rh,{label:"Duration (min)",type:"number",value:I,onChange:B=>M(B.target.value),placeholder:"60"}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"RPE"}),a.jsx("select",{value:z,onChange:B=>Z(B.target.value),className:"w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[6,7,8,9,10].map(B=>a.jsxs("option",{value:B,children:["RPE ",B]},B))})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Exercises"}),a.jsxs(Vt,{variant:"ghost",size:"sm",onClick:Ae,children:[a.jsx(Wi,{className:"w-4 h-4 mr-1"}),"Add"]})]}),P.length>0?a.jsx("div",{className:"space-y-3",children:P.map((B,pe)=>a.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg border border-dark-600",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("span",{className:"text-sm text-gray-500",children:["#",pe+1]}),a.jsxs("div",{className:"flex-1 relative",children:[a.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-sm cursor-pointer hover:border-dark-400",onClick:()=>{be(ne===B.id?null:B.id),X(B.name||"")},children:[a.jsx("span",{className:B.name?"text-white":"text-gray-500",children:B.name||"Select exercise..."}),a.jsx(Oc,{className:"w-4 h-4 text-gray-400"})]}),ne===B.id&&a.jsxs("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 bg-dark-700 border border-dark-500 rounded-lg shadow-xl max-h-60 overflow-hidden",children:[a.jsx("div",{className:"p-2 border-b border-dark-600",children:a.jsxs("div",{className:"relative",children:[a.jsx(Tc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),a.jsx("input",{type:"text",value:de,onChange:te=>X(te.target.value),placeholder:"Type to search...",className:"w-full pl-8 pr-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500 focus:outline-none focus:border-accent-primary",autoFocus:!0,onClick:te=>te.stopPropagation()})]})}),a.jsx("div",{className:"max-h-48 overflow-y-auto",children:Y().length>0?Y().map(te=>a.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-white hover:bg-dark-600 transition-colors",onClick:ce=>{ce.stopPropagation(),Ue(B.id,"name",te)},children:te},te)):a.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500",children:['No matches. Use custom name: "',de,'"',a.jsxs("button",{className:"block w-full mt-2 px-3 py-1.5 bg-accent-primary/20 text-accent-primary rounded text-xs",onClick:te=>{te.stopPropagation(),Ue(B.id,"name",de)},children:['Use "',de,'"']})]})})]})]}),a.jsx("button",{onClick:()=>ee(B.id),className:"p-1.5 text-gray-500 hover:text-accent-danger",children:a.jsx(Da,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[a.jsx("input",{type:"number",value:B.sets,onChange:te=>Ue(B.id,"sets",te.target.value),placeholder:"Sets",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"}),a.jsx("input",{type:"text",value:B.reps,onChange:te=>Ue(B.id,"reps",te.target.value),placeholder:"Reps",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"}),a.jsx("input",{type:"text",value:B.weight,onChange:te=>Ue(B.id,"weight",te.target.value),placeholder:"Weight",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"})]})]},B.id))}):a.jsxs("div",{className:"p-6 text-center bg-dark-700 rounded-lg border border-dashed border-dark-500",children:[a.jsx(ri,{className:"w-8 h-8 text-gray-600 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add" to track exercises'})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Screenshot (Optional)"}),a.jsx("input",{ref:me,type:"file",accept:"image/*",onChange:ue,className:"hidden"}),fe?a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:fe,alt:"Preview",className:"w-full h-40 object-cover rounded-lg"}),a.jsx("button",{onClick:()=>ie(null),className:"absolute top-2 right-2 p-2 bg-dark-900/80 rounded-lg",children:a.jsx(Da,{className:"w-4 h-4 text-white"})})]}):a.jsxs("button",{onClick:()=>me.current?.click(),className:"w-full p-6 border-2 border-dashed border-dark-500 rounded-lg hover:border-accent-primary flex flex-col items-center gap-2",children:[a.jsx(b0,{className:"w-6 h-6 text-gray-400"}),a.jsx("span",{className:"text-sm text-gray-400",children:"Upload screenshot"})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx(Vt,{variant:"secondary",onClick:m,fullWidth:!0,children:"Cancel"}),a.jsxs(Vt,{onClick:Ce,fullWidth:!0,children:[a.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Log Workout"]})]})]})})}function Ra(f,m){const[x,v]=Re.useState(()=>{try{const w=window.localStorage.getItem(f);return w?JSON.parse(w):m}catch{return m}});return[x,w=>{try{const I=w instanceof Function?w(x):w;v(I),window.localStorage.setItem(f,JSON.stringify(I))}catch(I){console.error(I)}}]}const es=async()=>null,Pf=async f=>(await es(),localStorage.setItem("motus_profile",JSON.stringify(f)),{data:f,error:null}),Bf=async()=>{await es();{const f=localStorage.getItem("motus_profile");return{data:f?JSON.parse(f):null,error:null}}},Lf=async f=>(await es(),localStorage.setItem("motus_program",JSON.stringify(f)),{data:f,error:null}),Ff=async()=>{await es();{const f=localStorage.getItem("motus_program");return{data:f?JSON.parse(f):null,error:null}}},Wf=async f=>(await es(),localStorage.setItem("motus_meals",JSON.stringify(f)),{data:f,error:null}),Uf=async()=>{await es();{const f=localStorage.getItem("motus_meals");return{data:f?JSON.parse(f):[],error:null}}},zf=async f=>(await es(),localStorage.setItem("motus_workouts",JSON.stringify(f)),{data:f,error:null}),Hf=async()=>{await es();{const f=localStorage.getItem("motus_workouts");return{data:f?JSON.parse(f):[],error:null}}},Gf=async()=>{await es()};function Vf(){const{user:f,loading:m,isAuthenticated:x}=p0(),[v,C]=Ra("motus_profile",null),[w,I]=Ra("motus_program",null),[M,_]=Ra("motus_meals",[]),[N,P]=Ra("motus_workouts",[]),[j,$]=Ra("motus_completed",[]),[V,z]=Re.useState("dashboard"),[Z,oe]=Re.useState(!1),[xe,fe]=Re.useState(!1),[ie,ne]=Re.useState(!1),[be,de]=Re.useState(!0),[X,me]=Re.useState(!0);Re.useEffect(()=>{m||(async()=>{me(!0),x&&await Gf();const[he,Be,Me,Oe]=await Promise.all([Bf(),Ff(),Uf(),Hf()]);he.data&&C(he.data),Be.data&&I(Be.data),Me.data&&_(Me.data),Oe.data&&P(Oe.data),he.data&&Be.data?(ne(!0),de(!1)):localStorage.getItem("motus_has_visited")&&de(!1),me(!1)})()},[x,m]);const ue=async ye=>{C(ye),await Pf(ye)},Ae=async ye=>{I(ye),await Lf(ye)},Ue=async ye=>{_(ye),await Wf(ye)},ee=async ye=>{P(ye),await zf(ye)},Y=async ye=>{await ue(ye.profile),await Ae(ye.program),ne(!0)},Ce=async ye=>{const he=[...M,{...ye,id:Date.now()}];await Ue(he),oe(!1)},B=async ye=>{const he=M.filter(Be=>Be.id!==ye);await Ue(he)},pe=async ye=>{const he=[...N,{...ye,id:Date.now()}];await ee(he),fe(!1)},te=(ye,he,Be)=>{const Me=j.find(Oe=>Oe.day===ye&&Oe.sessionIndex===he);if(Me)if(Me.completedExercises.includes(Be)){const Oe=j.map(Le=>Le.day===ye&&Le.sessionIndex===he?{...Le,completedExercises:Le.completedExercises.filter(Je=>Je!==Be)}:Le);$(Oe)}else{const Oe=j.map(Le=>Le.day===ye&&Le.sessionIndex===he?{...Le,completedExercises:[...Le.completedExercises,Be]}:Le);$(Oe)}else $([...j,{day:ye,sessionIndex:he,completedExercises:[Be]}])},ce=(ye,he)=>{const Be=w?.weeklySchedule?.find(Le=>Le.day===ye)?.sessions?.[he];if(!Be?.exercises)return;const Me=Be.exercises.map((Le,Je)=>Je);if(j.find(Le=>Le.day===ye&&Le.sessionIndex===he)){const Le=j.map(Je=>Je.day===ye&&Je.sessionIndex===he?{...Je,completedExercises:Me}:Je);$(Le)}else $([...j,{day:ye,sessionIndex:he,completedExercises:Me,exerciseLogs:{}}])},q=(ye,he,Be,Me)=>{if(j.find(Le=>Le.day===ye&&Le.sessionIndex===he)){const Le=j.map(Je=>Je.day===ye&&Je.sessionIndex===he?{...Je,exerciseLogs:{...Je.exerciseLogs,[Be]:Me},completedExercises:Je.completedExercises.includes(Be)?Je.completedExercises:[...Je.completedExercises,Be]}:Je);$(Le)}else $([...j,{day:ye,sessionIndex:he,completedExercises:[Be],exerciseLogs:{[Be]:Me}}])},H=async()=>{window.confirm("Are you sure you want to reset? All your data will be lost.")&&(await ue(null),await Ae(null),await Ue([]),await ee([]),$([]),ne(!1),z("dashboard"))};if(m||X)return a.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-12 h-12 border-4 border-accent-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:"Loading your data..."})]})});const D=new Date().toISOString().split("T")[0],U=M.filter(ye=>(ye.loggedAt||ye.createdAt)?.startsWith(D)),Ie=N.filter(ye=>(ye.loggedAt||ye.completedAt)?.startsWith(D)),_e=()=>{localStorage.setItem("motus_has_visited","true"),de(!1)};return be&&!ie?a.jsx(eh,{onGetStarted:_e}):ie?a.jsxs("div",{className:"min-h-screen bg-dark-900",children:[V==="dashboard"&&a.jsx(pf,{profile:v,program:w,meals:M,workouts:N,todaysMeals:U,todaysWorkouts:Ie,onLogMeal:()=>oe(!0),onLogWorkout:()=>fe(!0),onViewProgram:()=>z("program"),onViewNutrition:()=>z("nutrition")}),V==="program"&&a.jsx(Nf,{program:w,completedWorkouts:j,onCompleteExercise:te,onCompleteSession:ce,onUpdateExerciseLog:q,onBack:()=>z("dashboard")}),V==="nutrition"&&a.jsx(Cf,{profile:v,meals:M,workouts:N,onLogMeal:()=>oe(!0),onDeleteMeal:B,onBack:()=>z("dashboard")}),V==="stats"&&a.jsx(Sf,{profile:v,program:w,meals:M,workouts:N}),V==="profile"&&a.jsx(If,{profile:v,program:w,onResetSetup:H}),a.jsx(ih,{activeTab:V,onChange:z}),a.jsx(Of,{isOpen:Z,onClose:()=>oe(!1),onSave:Ce}),a.jsx(Df,{isOpen:xe,onClose:()=>fe(!1),onSave:pe,program:w})]}):a.jsx(ff,{onComplete:Y})}function Xf(){return a.jsx(P1,{children:a.jsx(Vf,{})})}O1.createRoot(document.getElementById("root")).render(a.jsx(g0.StrictMode,{children:a.jsx(Xf,{})}));
