(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))E(j);new MutationObserver(j=>{for(const g of j)if(g.type==="childList")for(const N of g.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&E(N)}).observe(document,{childList:!0,subtree:!0});function x(j){const g={};return j.integrity&&(g.integrity=j.integrity),j.referrerPolicy&&(g.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?g.credentials="include":j.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function E(j){if(j.ep)return;j.ep=!0;const g=x(j);fetch(j.href,g)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var u=Symbol.for("react.element"),h=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),N=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),_=Symbol.iterator;function J(D){return D===null||typeof D!="object"?null:(D=_&&D[_]||D["@@iterator"],typeof D=="function"?D:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,q={};function ae(D,G,Te){this.props=D,this.context=G,this.refs=q,this.updater=Te||z}ae.prototype.isReactComponent={},ae.prototype.setState=function(D,G){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,G,"setState")},ae.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function je(){}je.prototype=ae.prototype;function ue(D,G,Te){this.props=D,this.context=G,this.refs=q,this.updater=Te||z}var te=ue.prototype=new je;te.constructor=ue,O(te,ae.prototype),te.isPureReactComponent=!0;var Q=Array.isArray,xe=Object.prototype.hasOwnProperty,ce={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function U(D,G,Te){var ee,Ae={},ye=null,Ge=null;if(G!=null)for(ee in G.ref!==void 0&&(Ge=G.ref),G.key!==void 0&&(ye=""+G.key),G)xe.call(G,ee)&&!F.hasOwnProperty(ee)&&(Ae[ee]=G[ee]);var Le=arguments.length-2;if(Le===1)Ae.children=Te;else if(1<Le){for(var Ue=Array(Le),$e=0;$e<Le;$e++)Ue[$e]=arguments[$e+2];Ae.children=Ue}if(D&&D.defaultProps)for(ee in Le=D.defaultProps,Le)Ae[ee]===void 0&&(Ae[ee]=Le[ee]);return{$$typeof:u,type:D,key:ye,ref:Ge,props:Ae,_owner:ce.current}}function K(D,G){return{$$typeof:u,type:D.type,key:G,ref:D.ref,props:D.props,_owner:D._owner}}function ne(D){return typeof D=="object"&&D!==null&&D.$$typeof===u}function be(D){var G={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Te){return G[Te]})}var L=/\/+/g;function W(D,G){return typeof D=="object"&&D!==null&&D.key!=null?be(""+D.key):G.toString(36)}function me(D,G,Te,ee,Ae){var ye=typeof D;(ye==="undefined"||ye==="boolean")&&(D=null);var Ge=!1;if(D===null)Ge=!0;else switch(ye){case"string":case"number":Ge=!0;break;case"object":switch(D.$$typeof){case u:case h:Ge=!0}}if(Ge)return Ge=D,Ae=Ae(Ge),D=ee===""?"."+W(Ge,0):ee,Q(Ae)?(Te="",D!=null&&(Te=D.replace(L,"$&/")+"/"),me(Ae,G,Te,"",function($e){return $e})):Ae!=null&&(ne(Ae)&&(Ae=K(Ae,Te+(!Ae.key||Ge&&Ge.key===Ae.key?"":(""+Ae.key).replace(L,"$&/")+"/")+D)),G.push(Ae)),1;if(Ge=0,ee=ee===""?".":ee+":",Q(D))for(var Le=0;Le<D.length;Le++){ye=D[Le];var Ue=ee+W(ye,Le);Ge+=me(ye,G,Te,Ue,Ae)}else if(Ue=J(D),typeof Ue=="function")for(D=Ue.call(D),Le=0;!(ye=D.next()).done;)ye=ye.value,Ue=ee+W(ye,Le++),Ge+=me(ye,G,Te,Ue,Ae);else if(ye==="object")throw G=String(D),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ge}function I(D,G,Te){if(D==null)return D;var ee=[],Ae=0;return me(D,ee,"","",function(ye){return G.call(Te,ye,Ae++)}),ee}function pe(D){if(D._status===-1){var G=D._result;G=G(),G.then(function(Te){(D._status===0||D._status===-1)&&(D._status=1,D._result=Te)},function(Te){(D._status===0||D._status===-1)&&(D._status=2,D._result=Te)}),D._status===-1&&(D._status=0,D._result=G)}if(D._status===1)return D._result.default;throw D._result}var se={current:null},ie={transition:null},Ee={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:ie,ReactCurrentOwner:ce};function V(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:I,forEach:function(D,G,Te){I(D,function(){G.apply(this,arguments)},Te)},count:function(D){var G=0;return I(D,function(){G++}),G},toArray:function(D){return I(D,function(G){return G})||[]},only:function(D){if(!ne(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},react_production_min.Component=ae,react_production_min.Fragment=x,react_production_min.Profiler=j,react_production_min.PureComponent=ue,react_production_min.StrictMode=E,react_production_min.Suspense=A,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ee,react_production_min.act=V,react_production_min.cloneElement=function(D,G,Te){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var ee=O({},D.props),Ae=D.key,ye=D.ref,Ge=D._owner;if(G!=null){if(G.ref!==void 0&&(ye=G.ref,Ge=ce.current),G.key!==void 0&&(Ae=""+G.key),D.type&&D.type.defaultProps)var Le=D.type.defaultProps;for(Ue in G)xe.call(G,Ue)&&!F.hasOwnProperty(Ue)&&(ee[Ue]=G[Ue]===void 0&&Le!==void 0?Le[Ue]:G[Ue])}var Ue=arguments.length-2;if(Ue===1)ee.children=Te;else if(1<Ue){Le=Array(Ue);for(var $e=0;$e<Ue;$e++)Le[$e]=arguments[$e+2];ee.children=Le}return{$$typeof:u,type:D.type,key:Ae,ref:ye,props:ee,_owner:Ge}},react_production_min.createContext=function(D){return D={$$typeof:N,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:g,_context:D},D.Consumer=D},react_production_min.createElement=U,react_production_min.createFactory=function(D){var G=U.bind(null,D);return G.type=D,G},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(D){return{$$typeof:k,render:D}},react_production_min.isValidElement=ne,react_production_min.lazy=function(D){return{$$typeof:M,_payload:{_status:-1,_result:D},_init:pe}},react_production_min.memo=function(D,G){return{$$typeof:w,type:D,compare:G===void 0?null:G}},react_production_min.startTransition=function(D){var G=ie.transition;ie.transition={};try{D()}finally{ie.transition=G}},react_production_min.unstable_act=V,react_production_min.useCallback=function(D,G){return se.current.useCallback(D,G)},react_production_min.useContext=function(D){return se.current.useContext(D)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(D){return se.current.useDeferredValue(D)},react_production_min.useEffect=function(D,G){return se.current.useEffect(D,G)},react_production_min.useId=function(){return se.current.useId()},react_production_min.useImperativeHandle=function(D,G,Te){return se.current.useImperativeHandle(D,G,Te)},react_production_min.useInsertionEffect=function(D,G){return se.current.useInsertionEffect(D,G)},react_production_min.useLayoutEffect=function(D,G){return se.current.useLayoutEffect(D,G)},react_production_min.useMemo=function(D,G){return se.current.useMemo(D,G)},react_production_min.useReducer=function(D,G,Te){return se.current.useReducer(D,G,Te)},react_production_min.useRef=function(D){return se.current.useRef(D)},react_production_min.useState=function(D){return se.current.useState(D)},react_production_min.useSyncExternalStore=function(D,G,Te){return se.current.useSyncExternalStore(D,G,Te)},react_production_min.useTransition=function(){return se.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var u=requireReact(),h=Symbol.for("react.element"),x=Symbol.for("react.fragment"),E=Object.prototype.hasOwnProperty,j=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function N(k,A,w){var M,_={},J=null,z=null;w!==void 0&&(J=""+w),A.key!==void 0&&(J=""+A.key),A.ref!==void 0&&(z=A.ref);for(M in A)E.call(A,M)&&!g.hasOwnProperty(M)&&(_[M]=A[M]);if(k&&k.defaultProps)for(M in A=k.defaultProps,A)_[M]===void 0&&(_[M]=A[M]);return{$$typeof:h,type:k,key:J,ref:z,props:_,_owner:j.current}}return reactJsxRuntime_production_min.Fragment=x,reactJsxRuntime_production_min.jsx=N,reactJsxRuntime_production_min.jsxs=N,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(u){function h(ie,Ee){var V=ie.length;ie.push(Ee);e:for(;0<V;){var D=V-1>>>1,G=ie[D];if(0<j(G,Ee))ie[D]=Ee,ie[V]=G,V=D;else break e}}function x(ie){return ie.length===0?null:ie[0]}function E(ie){if(ie.length===0)return null;var Ee=ie[0],V=ie.pop();if(V!==Ee){ie[0]=V;e:for(var D=0,G=ie.length,Te=G>>>1;D<Te;){var ee=2*(D+1)-1,Ae=ie[ee],ye=ee+1,Ge=ie[ye];if(0>j(Ae,V))ye<G&&0>j(Ge,Ae)?(ie[D]=Ge,ie[ye]=V,D=ye):(ie[D]=Ae,ie[ee]=V,D=ee);else if(ye<G&&0>j(Ge,V))ie[D]=Ge,ie[ye]=V,D=ye;else break e}}return Ee}function j(ie,Ee){var V=ie.sortIndex-Ee.sortIndex;return V!==0?V:ie.id-Ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;u.unstable_now=function(){return g.now()}}else{var N=Date,k=N.now();u.unstable_now=function(){return N.now()-k}}var A=[],w=[],M=1,_=null,J=3,z=!1,O=!1,q=!1,ae=typeof setTimeout=="function"?setTimeout:null,je=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(ie){for(var Ee=x(w);Ee!==null;){if(Ee.callback===null)E(w);else if(Ee.startTime<=ie)E(w),Ee.sortIndex=Ee.expirationTime,h(A,Ee);else break;Ee=x(w)}}function Q(ie){if(q=!1,te(ie),!O)if(x(A)!==null)O=!0,pe(xe);else{var Ee=x(w);Ee!==null&&se(Q,Ee.startTime-ie)}}function xe(ie,Ee){O=!1,q&&(q=!1,je(U),U=-1),z=!0;var V=J;try{for(te(Ee),_=x(A);_!==null&&(!(_.expirationTime>Ee)||ie&&!be());){var D=_.callback;if(typeof D=="function"){_.callback=null,J=_.priorityLevel;var G=D(_.expirationTime<=Ee);Ee=u.unstable_now(),typeof G=="function"?_.callback=G:_===x(A)&&E(A),te(Ee)}else E(A);_=x(A)}if(_!==null)var Te=!0;else{var ee=x(w);ee!==null&&se(Q,ee.startTime-Ee),Te=!1}return Te}finally{_=null,J=V,z=!1}}var ce=!1,F=null,U=-1,K=5,ne=-1;function be(){return!(u.unstable_now()-ne<K)}function L(){if(F!==null){var ie=u.unstable_now();ne=ie;var Ee=!0;try{Ee=F(!0,ie)}finally{Ee?W():(ce=!1,F=null)}}else ce=!1}var W;if(typeof ue=="function")W=function(){ue(L)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,I=me.port2;me.port1.onmessage=L,W=function(){I.postMessage(null)}}else W=function(){ae(L,0)};function pe(ie){F=ie,ce||(ce=!0,W())}function se(ie,Ee){U=ae(function(){ie(u.unstable_now())},Ee)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(ie){ie.callback=null},u.unstable_continueExecution=function(){O||z||(O=!0,pe(xe))},u.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<ie?Math.floor(1e3/ie):5},u.unstable_getCurrentPriorityLevel=function(){return J},u.unstable_getFirstCallbackNode=function(){return x(A)},u.unstable_next=function(ie){switch(J){case 1:case 2:case 3:var Ee=3;break;default:Ee=J}var V=J;J=Ee;try{return ie()}finally{J=V}},u.unstable_pauseExecution=function(){},u.unstable_requestPaint=function(){},u.unstable_runWithPriority=function(ie,Ee){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var V=J;J=ie;try{return Ee()}finally{J=V}},u.unstable_scheduleCallback=function(ie,Ee,V){var D=u.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?D+V:D):V=D,ie){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=V+G,ie={id:M++,callback:Ee,priorityLevel:ie,startTime:V,expirationTime:G,sortIndex:-1},V>D?(ie.sortIndex=V,h(w,ie),x(A)===null&&ie===x(w)&&(q?(je(U),U=-1):q=!0,se(Q,V-D))):(ie.sortIndex=G,h(A,ie),O||z||(O=!0,pe(xe))),ie},u.unstable_shouldYield=be,u.unstable_wrapCallback=function(ie){var Ee=J;return function(){var V=J;J=Ee;try{return ie.apply(this,arguments)}finally{J=V}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var u=requireReact(),h=requireScheduler();function x(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,l=1;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E=new Set,j={};function g(t,n){N(t,n),N(t+"Capture",n)}function N(t,n){for(j[t]=n,t=0;t<n.length;t++)E.add(n[t])}var k=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M={},_={};function J(t){return A.call(_,t)?!0:A.call(M,t)?!1:w.test(t)?_[t]=!0:(M[t]=!0,!1)}function z(t,n,l,d){if(l!==null&&l.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return d?!1:l!==null?!l.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function O(t,n,l,d){if(n===null||typeof n>"u"||z(t,n,l,d))return!0;if(d)return!1;if(l!==null)switch(l.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function q(t,n,l,d,f,y,C){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=t,this.type=n,this.sanitizeURL=y,this.removeEmptyString=C}var ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ae[t]=new q(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];ae[n]=new q(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){ae[t]=new q(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ae[t]=new q(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ae[t]=new q(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){ae[t]=new q(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){ae[t]=new q(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){ae[t]=new q(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){ae[t]=new q(t,5,!1,t.toLowerCase(),null,!1,!1)});var je=/[\-:]([a-z])/g;function ue(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(je,ue);ae[n]=new q(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(je,ue);ae[n]=new q(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(je,ue);ae[n]=new q(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){ae[t]=new q(t,1,!1,t.toLowerCase(),null,!1,!1)}),ae.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){ae[t]=new q(t,1,!1,t.toLowerCase(),null,!0,!0)});function te(t,n,l,d){var f=ae.hasOwnProperty(n)?ae[n]:null;(f!==null?f.type!==0:d||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(O(n,l,f,d)&&(l=null),d||f===null?J(n)&&(l===null?t.removeAttribute(n):t.setAttribute(n,""+l)):f.mustUseProperty?t[f.propertyName]=l===null?f.type===3?!1:"":l:(n=f.attributeName,d=f.attributeNamespace,l===null?t.removeAttribute(n):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,d?t.setAttributeNS(d,n,l):t.setAttribute(n,l))))}var Q=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xe=Symbol.for("react.element"),ce=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),ne=Symbol.for("react.provider"),be=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),ie=Symbol.iterator;function Ee(t){return t===null||typeof t!="object"?null:(t=ie&&t[ie]||t["@@iterator"],typeof t=="function"?t:null)}var V=Object.assign,D;function G(t){if(D===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);D=n&&n[1]||""}return`
`+D+t}var Te=!1;function ee(t,n){if(!t||Te)return"";Te=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(ge){var d=ge}Reflect.construct(t,[],n)}else{try{n.call()}catch(ge){d=ge}t.call(n.prototype)}else{try{throw Error()}catch(ge){d=ge}t()}}catch(ge){if(ge&&d&&typeof ge.stack=="string"){for(var f=ge.stack.split(`
`),y=d.stack.split(`
`),C=f.length-1,B=y.length-1;1<=C&&0<=B&&f[C]!==y[B];)B--;for(;1<=C&&0<=B;C--,B--)if(f[C]!==y[B]){if(C!==1||B!==1)do if(C--,B--,0>B||f[C]!==y[B]){var Y=`
`+f[C].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=C&&0<=B);break}}}finally{Te=!1,Error.prepareStackTrace=l}return(t=t?t.displayName||t.name:"")?G(t):""}function Ae(t){switch(t.tag){case 5:return G(t.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return t=ee(t.type,!1),t;case 11:return t=ee(t.type.render,!1),t;case 1:return t=ee(t.type,!0),t;default:return""}}function ye(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case ce:return"Portal";case K:return"Profiler";case U:return"StrictMode";case W:return"Suspense";case me:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case be:return(t.displayName||"Context")+".Consumer";case ne:return(t._context.displayName||"Context")+".Provider";case L:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return n=t.displayName||null,n!==null?n:ye(t.type)||"Memo";case pe:n=t._payload,t=t._init;try{return ye(t(n))}catch{}}return null}function Ge(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ye(n);case 8:return n===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Le(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ue(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function $e(t){var n=Ue(t)?"checked":"value",l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),d=""+t[n];if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,y=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return f.call(this)},set:function(C){d=""+C,y.call(this,C)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return d},setValue:function(C){d=""+C},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function dt(t){t._valueTracker||(t._valueTracker=$e(t))}function Cs(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var l=n.getValue(),d="";return t&&(d=Ue(t)?t.checked?"true":"false":t.value),t=d,t!==l?(n.setValue(t),!0):!1}function rt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function fs(t,n){var l=n.checked;return V({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??t._wrapperState.initialChecked})}function rs(t,n){var l=n.defaultValue==null?"":n.defaultValue,d=n.checked!=null?n.checked:n.defaultChecked;l=Le(n.value!=null?n.value:l),t._wrapperState={initialChecked:d,initialValue:l,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function cs(t,n){n=n.checked,n!=null&&te(t,"checked",n,!1)}function Tt(t,n){cs(t,n);var l=Le(n.value),d=n.type;if(l!=null)d==="number"?(l===0&&t.value===""||t.value!=l)&&(t.value=""+l):t.value!==""+l&&(t.value=""+l);else if(d==="submit"||d==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?at(t,n.type,l):n.hasOwnProperty("defaultValue")&&at(t,n.type,Le(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function ft(t,n,l){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var d=n.type;if(!(d!=="submit"&&d!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,l||n===t.value||(t.value=n),t.defaultValue=n}l=t.name,l!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,l!==""&&(t.name=l)}function at(t,n,l){(n!=="number"||rt(t.ownerDocument)!==t)&&(l==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+l&&(t.defaultValue=""+l))}var qs=Array.isArray;function Pe(t,n,l,d){if(t=t.options,n){n={};for(var f=0;f<l.length;f++)n["$"+l[f]]=!0;for(l=0;l<t.length;l++)f=n.hasOwnProperty("$"+t[l].value),t[l].selected!==f&&(t[l].selected=f),f&&d&&(t[l].defaultSelected=!0)}else{for(l=""+Le(l),n=null,f=0;f<t.length;f++){if(t[f].value===l){t[f].selected=!0,d&&(t[f].defaultSelected=!0);return}n!==null||t[f].disabled||(n=t[f])}n!==null&&(n.selected=!0)}}function gr(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(x(91));return V({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hn(t,n){var l=n.value;if(l==null){if(l=n.children,n=n.defaultValue,l!=null){if(n!=null)throw Error(x(92));if(qs(l)){if(1<l.length)throw Error(x(93));l=l[0]}n=l}n==null&&(n=""),l=n}t._wrapperState={initialValue:Le(l)}}function Ss(t,n){var l=Le(n.value),d=Le(n.defaultValue);l!=null&&(l=""+l,l!==t.value&&(t.value=l),n.defaultValue==null&&t.defaultValue!==l&&(t.defaultValue=l)),d!=null&&(t.defaultValue=""+d)}function Ur(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function gs(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wr(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?gs(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oe,Xe=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,l,d,f){MSApp.execUnsafeLocalFunction(function(){return t(n,l,d,f)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(Oe=Oe||document.createElement("div"),Oe.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=Oe.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function bt(t,n){if(n){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=n;return}}t.textContent=n}var Ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ks=["Webkit","ms","Moz","O"];Object.keys(Ft).forEach(function(t){ks.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),Ft[n]=Ft[t]})});function Ke(t,n,l){return n==null||typeof n=="boolean"||n===""?"":l||typeof n!="number"||n===0||Ft.hasOwnProperty(t)&&Ft[t]?(""+n).trim():n+"px"}function Ne(t,n){t=t.style;for(var l in n)if(n.hasOwnProperty(l)){var d=l.indexOf("--")===0,f=Ke(l,n[l],d);l==="float"&&(l="cssFloat"),d?t.setProperty(l,f):t[l]=f}}var zt=V({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gt(t,n){if(n){if(zt[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(x(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(x(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(x(61))}if(n.style!=null&&typeof n.style!="object")throw Error(x(62))}}function Ct(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cr=null;function pn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Un=null,lt=null,_s=null;function mi(t){if(t=Li(t)){if(typeof Un!="function")throw Error(x(280));var n=t.stateNode;n&&(n=ja(n),Un(t.stateNode,t.type,n))}}function hi(t){lt?_s?_s.push(t):_s=[t]:lt=t}function Ms(){if(lt){var t=lt,n=_s;if(_s=lt=null,mi(t),n)for(t=0;t<n.length;t++)mi(n[t])}}function Wn(t,n){return t(n)}function qt(){}var yr=!1;function fn(t,n,l){if(yr)return t(n,l);yr=!0;try{return Wn(t,n,l)}finally{yr=!1,(lt!==null||_s!==null)&&(qt(),Ms())}}function ys(t,n){var l=t.stateNode;if(l===null)return null;var d=ja(l);if(d===null)return null;l=d[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(x(231,n,typeof l));return l}var pi=!1;if(k)try{var Us={};Object.defineProperty(Us,"passive",{get:function(){pi=!0}}),window.addEventListener("test",Us,Us),window.removeEventListener("test",Us,Us)}catch{pi=!1}function fi(t,n,l,d,f,y,C,B,Y){var ge=Array.prototype.slice.call(arguments,3);try{n.apply(l,ge)}catch(Ce){this.onError(Ce)}}var Zt=!1,Ks=null,us=!1,Me=null,Hr={onError:function(t){Zt=!0,Ks=t}};function gi(t,n,l,d,f,y,C,B,Y){Zt=!1,Ks=null,fi.apply(Hr,arguments)}function Es(t,n,l,d,f,y,C,B,Y){if(gi.apply(this,arguments),Zt){if(Zt){var ge=Ks;Zt=!1,Ks=null}else throw Error(x(198));us||(us=!0,Me=ge)}}function Ps(t){var n=t,l=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(l=n.return),t=n.return;while(t)}return n.tag===3?l:null}function gn(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function yn(t){if(Ps(t)!==t)throw Error(x(188))}function $s(t){var n=t.alternate;if(!n){if(n=Ps(t),n===null)throw Error(x(188));return n!==t?null:t}for(var l=t,d=n;;){var f=l.return;if(f===null)break;var y=f.alternate;if(y===null){if(d=f.return,d!==null){l=d;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===l)return yn(f),t;if(y===d)return yn(f),n;y=y.sibling}throw Error(x(188))}if(l.return!==d.return)l=f,d=y;else{for(var C=!1,B=f.child;B;){if(B===l){C=!0,l=f,d=y;break}if(B===d){C=!0,d=f,l=y;break}B=B.sibling}if(!C){for(B=y.child;B;){if(B===l){C=!0,l=y,d=f;break}if(B===d){C=!0,d=y,l=f;break}B=B.sibling}if(!C)throw Error(x(189))}}if(l.alternate!==d)throw Error(x(190))}if(l.tag!==3)throw Error(x(188));return l.stateNode.current===l?t:n}function Ji(t){return t=$s(t),t!==null?ea(t):null}function ea(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=ea(t);if(n!==null)return n;t=t.sibling}return null}var Ws=h.unstable_scheduleCallback,ns=h.unstable_cancelCallback,St=h.unstable_shouldYield,ta=h.unstable_requestPaint,Et=h.unstable_now,yi=h.unstable_getCurrentPriorityLevel,we=h.unstable_ImmediatePriority,sa=h.unstable_UserBlockingPriority,vt=h.unstable_NormalPriority,zr=h.unstable_LowPriority,ra=h.unstable_IdlePriority,xt=null,nt=null;function ct(t){if(nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(xt,t,void 0,(t.current.flags&128)===128)}catch{}}var As=Math.clz32?Math.clz32:Gt,Ei=Math.log,ji=Math.LN2;function Gt(t){return t>>>=0,t===0?32:31-(Ei(t)/ji|0)|0}var Hs=64,Hn=4194304;function Nt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zs(t,n){var l=t.pendingLanes;if(l===0)return 0;var d=0,f=t.suspendedLanes,y=t.pingedLanes,C=l&268435455;if(C!==0){var B=C&~f;B!==0?d=Nt(B):(y&=C,y!==0&&(d=Nt(y)))}else C=l&~f,C!==0?d=Nt(C):y!==0&&(d=Nt(y));if(d===0)return 0;if(n!==0&&n!==d&&(n&f)===0&&(f=d&-d,y=n&-n,f>=y||f===16&&(y&4194240)!==0))return n;if((d&4)!==0&&(d|=l&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=d;0<n;)l=31-As(n),f=1<<l,d|=t[l],n&=~f;return d}function io(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gr(t,n){for(var l=t.suspendedLanes,d=t.pingedLanes,f=t.expirationTimes,y=t.pendingLanes;0<y;){var C=31-As(y),B=1<<C,Y=f[C];Y===-1?((B&l)===0||(B&d)!==0)&&(f[C]=io(B,n)):Y<=n&&(t.expiredLanes|=B),y&=~B}}function jt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kt(){var t=Hs;return Hs<<=1,(Hs&4194240)===0&&(Hs=64),t}function oe(t){for(var n=[],l=0;31>l;l++)n.push(t);return n}function T(t,n,l){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-As(n),t[n]=l}function ze(t,n){var l=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var d=t.eventTimes;for(t=t.expirationTimes;0<l;){var f=31-As(l),y=1<<f;n[f]=0,d[f]=-1,t[f]=-1,l&=~y}}function Ut(t,n){var l=t.entangledLanes|=n;for(t=t.entanglements;l;){var d=31-As(l),f=1<<d;f&n|t[d]&n&&(t[d]|=n),l&=~f}}var it=0;function na(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var zn,js,Ve,kt,wi,bi=!1,Vr=[],Gs=null,Js=null,Er=null,Pt=new Map,lr=new Map,ds=[],qe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ia(t,n){switch(t){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Js=null;break;case"mouseover":case"mouseout":Er=null;break;case"pointerover":case"pointerout":Pt.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":lr.delete(n.pointerId)}}function et(t,n,l,d,f,y){return t===null||t.nativeEvent!==y?(t={blockedOn:n,domEventName:l,eventSystemFlags:d,nativeEvent:y,targetContainers:[f]},n!==null&&(n=Li(n),n!==null&&js(n)),t):(t.eventSystemFlags|=d,n=t.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),t)}function $t(t,n,l,d,f){switch(n){case"focusin":return Gs=et(Gs,t,n,l,d,f),!0;case"dragenter":return Js=et(Js,t,n,l,d,f),!0;case"mouseover":return Er=et(Er,t,n,l,d,f),!0;case"pointerover":var y=f.pointerId;return Pt.set(y,et(Pt.get(y)||null,t,n,l,d,f)),!0;case"gotpointercapture":return y=f.pointerId,lr.set(y,et(lr.get(y)||null,t,n,l,d,f)),!0}return!1}function aa(t){var n=kn(t.target);if(n!==null){var l=Ps(n);if(l!==null){if(n=l.tag,n===13){if(n=gn(l),n!==null){t.blockedOn=n,wi(t.priority,function(){Ve(l)});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xr(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var l=Gn(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(l===null){l=t.nativeEvent;var d=new l.constructor(l.type,l);Cr=d,l.target.dispatchEvent(d),Cr=null}else return n=Li(l),n!==null&&js(n),t.blockedOn=l,!1;n.shift()}return!0}function Ri(t,n,l){Xr(t)&&l.delete(n)}function Sr(){bi=!1,Gs!==null&&Xr(Gs)&&(Gs=null),Js!==null&&Xr(Js)&&(Js=null),Er!==null&&Xr(Er)&&(Er=null),Pt.forEach(Ri),lr.forEach(Ri)}function En(t,n){t.blockedOn===n&&(t.blockedOn=null,bi||(bi=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,Sr)))}function cr(t){function n(f){return En(f,t)}if(0<Vr.length){En(Vr[0],t);for(var l=1;l<Vr.length;l++){var d=Vr[l];d.blockedOn===t&&(d.blockedOn=null)}}for(Gs!==null&&En(Gs,t),Js!==null&&En(Js,t),Er!==null&&En(Er,t),Pt.forEach(n),lr.forEach(n),l=0;l<ds.length;l++)d=ds[l],d.blockedOn===t&&(d.blockedOn=null);for(;0<ds.length&&(l=ds[0],l.blockedOn===null);)aa(l),l.blockedOn===null&&ds.shift()}var er=Q.ReactCurrentBatchConfig,jr=!0;function oa(t,n,l,d){var f=it,y=er.transition;er.transition=null;try{it=1,kr(t,n,l,d)}finally{it=f,er.transition=y}}function jn(t,n,l,d){var f=it,y=er.transition;er.transition=null;try{it=4,kr(t,n,l,d)}finally{it=f,er.transition=y}}function kr(t,n,l,d){if(jr){var f=Gn(t,n,l,d);if(f===null)fo(t,n,d,Jt,l),ia(t,d);else if($t(f,t,n,l,d))d.stopPropagation();else if(ia(t,d),n&4&&-1<qe.indexOf(t)){for(;f!==null;){var y=Li(f);if(y!==null&&zn(y),y=Gn(t,n,l,d),y===null&&fo(t,n,d,Jt,l),y===f)break;f=y}f!==null&&d.stopPropagation()}else fo(t,n,d,null,l)}}var Jt=null;function Gn(t,n,l,d){if(Jt=null,t=pn(d),t=kn(t),t!==null)if(n=Ps(t),n===null)t=null;else if(l=n.tag,l===13){if(t=gn(n),t!==null)return t;t=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return Jt=t,null}function vi(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yi()){case we:return 1;case sa:return 4;case vt:case zr:return 16;case ra:return 536870912;default:return 16}default:return 16}}var ur=null,Ni=null,Vn=null;function la(){if(Vn)return Vn;var t,n=Ni,l=n.length,d,f="value"in ur?ur.value:ur.textContent,y=f.length;for(t=0;t<l&&n[t]===f[t];t++);var C=l-t;for(d=1;d<=C&&n[l-d]===f[y-d];d++);return Vn=f.slice(t,1<d?1-d:void 0)}function mt(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function wn(){return!0}function bn(){return!1}function Wt(t){function n(l,d,f,y,C){this._reactName=l,this._targetInst=f,this.type=d,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var B in t)t.hasOwnProperty(B)&&(l=t[B],this[B]=l?l(y):y[B]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?wn:bn,this.isPropagationStopped=bn,this}return V(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wn)},persist:function(){},isPersistent:wn}),n}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fe=Wt(Yr),st=V({},Yr,{view:0,detail:0}),es=Wt(st),Zr,Xn,Rn,Yn=V({},st,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Rn&&(Rn&&t.type==="mousemove"?(Zr=t.screenX-Rn.screenX,Xn=t.screenY-Rn.screenY):Xn=Zr=0,Rn=t),Zr)},movementY:function(t){return"movementY"in t?t.movementY:Xn}}),ca=Wt(Yn),Ci=V({},Yn,{dataTransfer:0}),Vt=Wt(Ci),Si=V({},st,{relatedTarget:0}),At=Wt(Si),Zn=V({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ar=Wt(Zn),wt=V({},Yr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ye=Wt(wt),ao=V({},Yr,{data:0}),Rt=Wt(ao),Ir={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tr(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=oo[t])?!!n[t]:!1}function vn(){return tr}var ua=V({},st,{key:function(t){if(t.key){var n=Ir[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=mt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qr[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(t){return t.type==="keypress"?mt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?mt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ki=Wt(ua),da=V({},Yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ai=Wt(da),lo=V({},st,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn}),qr=Wt(lo),Ii=V({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),co=Wt(Ii),Nn=V({},Yn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uo=Wt(Nn),wr=[9,13,27,32],Kr=k&&"CompositionEvent"in window,is=null;k&&"documentMode"in document&&(is=document.documentMode);var xa=k&&"TextEvent"in window&&!is,Vs=k&&(!Kr||is&&8<is&&11>=is),ma=" ",Qn=!1;function ha(t,n){switch(t){case"keyup":return wr.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ti(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xs=!1;function xo(t,n){switch(t){case"compositionend":return Ti(n);case"keypress":return n.which!==32?null:(Qn=!0,ma);case"textInput":return t=n.data,t===ma&&Qn?null:t;default:return null}}function _i(t,n){if(xs)return t==="compositionend"||!Kr&&ha(t,n)?(t=la(),Vn=Ni=ur=null,xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Vs&&n.locale!=="ko"?null:n.data;default:return null}}var Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ut(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Cn[t.type]:n==="textarea"}function Sn(t,n,l,d){hi(d),n=ga(n,"onChange"),0<n.length&&(l=new fe("onChange","change",null,l,d),t.push({event:l,listeners:n}))}var R=null,e=null;function s(t){Pl(t,0)}function r(t){var n=$n(t);if(Cs(n))return t}function i(t,n){if(t==="change")return n}var a=!1;if(k){var o;if(k){var c="oninput"in document;if(!c){var m=document.createElement("div");m.setAttribute("oninput","return;"),c=typeof m.oninput=="function"}o=c}else o=!1;a=o&&(!document.documentMode||9<document.documentMode)}function p(){R&&(R.detachEvent("onpropertychange",b),e=R=null)}function b(t){if(t.propertyName==="value"&&r(e)){var n=[];Sn(n,e,t,pn(t)),fn(s,n)}}function v(t,n,l){t==="focusin"?(p(),R=n,e=l,R.attachEvent("onpropertychange",b)):t==="focusout"&&p()}function S(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return r(e)}function P(t,n){if(t==="click")return r(n)}function H(t,n){if(t==="input"||t==="change")return r(n)}function Z(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var re=typeof Object.is=="function"?Object.is:Z;function he(t,n){if(re(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var l=Object.keys(t),d=Object.keys(n);if(l.length!==d.length)return!1;for(d=0;d<l.length;d++){var f=l[d];if(!A.call(n,f)||!re(t[f],n[f]))return!1}return!0}function ke(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ie(t,n){var l=ke(t);t=0;for(var d;l;){if(l.nodeType===3){if(d=t+l.textContent.length,t<=n&&d>=n)return{node:l,offset:n-t};t=d}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ke(l)}}function ve(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?ve(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function ot(){for(var t=window,n=rt();n instanceof t.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)t=n.contentWindow;else break;n=rt(t.document)}return n}function tt(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function ws(t){var n=ot(),l=t.focusedElem,d=t.selectionRange;if(n!==l&&l&&l.ownerDocument&&ve(l.ownerDocument.documentElement,l)){if(d!==null&&tt(l)){if(n=d.start,t=d.end,t===void 0&&(t=n),"selectionStart"in l)l.selectionStart=n,l.selectionEnd=Math.min(t,l.value.length);else if(t=(n=l.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var f=l.textContent.length,y=Math.min(d.start,f);d=d.end===void 0?y:Math.min(d.end,f),!t.extend&&y>d&&(f=d,d=y,y=f),f=Ie(l,y);var C=Ie(l,d);f&&C&&(t.rangeCount!==1||t.anchorNode!==f.node||t.anchorOffset!==f.offset||t.focusNode!==C.node||t.focusOffset!==C.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),t.removeAllRanges(),y>d?(t.addRange(n),t.extend(C.node,C.offset)):(n.setEnd(C.node,C.offset),t.addRange(n)))}}for(n=[],t=l;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<n.length;l++)t=n[l],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Xs=k&&"documentMode"in document&&11>=document.documentMode,Xt=null,yt=null,Ot=null,ms=!1;function Tr(t,n,l){var d=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;ms||Xt==null||Xt!==rt(d)||(d=Xt,"selectionStart"in d&&tt(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ot&&he(Ot,d)||(Ot=d,d=ga(yt,"onSelect"),0<d.length&&(n=new fe("onSelect","select",null,n,l),t.push({event:n,listeners:d}),n.target=Xt)))}function dr(t,n){var l={};return l[t.toLowerCase()]=n.toLowerCase(),l["Webkit"+t]="webkit"+n,l["Moz"+t]="moz"+n,l}var $r={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionend:dr("Transition","TransitionEnd")},Mi={},Cl={};k&&(Cl=document.createElement("div").style,"AnimationEvent"in window||(delete $r.animationend.animation,delete $r.animationiteration.animation,delete $r.animationstart.animation),"TransitionEvent"in window||delete $r.transitionend.transition);function pa(t){if(Mi[t])return Mi[t];if(!$r[t])return t;var n=$r[t],l;for(l in n)if(n.hasOwnProperty(l)&&l in Cl)return Mi[t]=n[l];return t}var Sl=pa("animationend"),kl=pa("animationiteration"),Al=pa("animationstart"),Il=pa("transitionend"),Tl=new Map,_l="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(t,n){Tl.set(t,n),g(n,[t])}for(var mo=0;mo<_l.length;mo++){var ho=_l[mo],yu=ho.toLowerCase(),Eu=ho[0].toUpperCase()+ho.slice(1);Jr(yu,"on"+Eu)}Jr(Sl,"onAnimationEnd"),Jr(kl,"onAnimationIteration"),Jr(Al,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr(Il,"onTransitionEnd"),N("onMouseEnter",["mouseout","mouseover"]),N("onMouseLeave",["mouseout","mouseover"]),N("onPointerEnter",["pointerout","pointerover"]),N("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ju=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function Ml(t,n,l){var d=t.type||"unknown-event";t.currentTarget=l,Es(d,n,void 0,t),t.currentTarget=null}function Pl(t,n){n=(n&4)!==0;for(var l=0;l<t.length;l++){var d=t[l],f=d.event;d=d.listeners;e:{var y=void 0;if(n)for(var C=d.length-1;0<=C;C--){var B=d[C],Y=B.instance,ge=B.currentTarget;if(B=B.listener,Y!==y&&f.isPropagationStopped())break e;Ml(f,B,ge),y=Y}else for(C=0;C<d.length;C++){if(B=d[C],Y=B.instance,ge=B.currentTarget,B=B.listener,Y!==y&&f.isPropagationStopped())break e;Ml(f,B,ge),y=Y}}}if(us)throw t=Me,us=!1,Me=null,t}function _t(t,n){var l=n[bo];l===void 0&&(l=n[bo]=new Set);var d=t+"__bubble";l.has(d)||(Dl(n,t,2,!1),l.add(d))}function po(t,n,l){var d=0;n&&(d|=4),Dl(l,t,d,n)}var fa="_reactListening"+Math.random().toString(36).slice(2);function Di(t){if(!t[fa]){t[fa]=!0,E.forEach(function(l){l!=="selectionchange"&&(ju.has(l)||po(l,!1,t),po(l,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[fa]||(n[fa]=!0,po("selectionchange",!1,n))}}function Dl(t,n,l,d){switch(vi(n)){case 1:var f=oa;break;case 4:f=jn;break;default:f=kr}l=f.bind(null,n,l,t),f=void 0,!pi||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),d?f!==void 0?t.addEventListener(n,l,{capture:!0,passive:f}):t.addEventListener(n,l,!0):f!==void 0?t.addEventListener(n,l,{passive:f}):t.addEventListener(n,l,!1)}function fo(t,n,l,d,f){var y=d;if((n&1)===0&&(n&2)===0&&d!==null)e:for(;;){if(d===null)return;var C=d.tag;if(C===3||C===4){var B=d.stateNode.containerInfo;if(B===f||B.nodeType===8&&B.parentNode===f)break;if(C===4)for(C=d.return;C!==null;){var Y=C.tag;if((Y===3||Y===4)&&(Y=C.stateNode.containerInfo,Y===f||Y.nodeType===8&&Y.parentNode===f))return;C=C.return}for(;B!==null;){if(C=kn(B),C===null)return;if(Y=C.tag,Y===5||Y===6){d=y=C;continue e}B=B.parentNode}}d=d.return}fn(function(){var ge=y,Ce=pn(l),Se=[];e:{var Re=Tl.get(t);if(Re!==void 0){var De=fe,Fe=t;switch(t){case"keypress":if(mt(l)===0)break e;case"keydown":case"keyup":De=ki;break;case"focusin":Fe="focus",De=At;break;case"focusout":Fe="blur",De=At;break;case"beforeblur":case"afterblur":De=At;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=ca;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=Vt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=qr;break;case Sl:case kl:case Al:De=Ar;break;case Il:De=co;break;case"scroll":De=es;break;case"wheel":De=uo;break;case"copy":case"cut":case"paste":De=Ye;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=Ai}var We=(n&4)!==0,Yt=!We&&t==="scroll",le=We?Re!==null?Re+"Capture":null:Re;We=[];for(var $=ge,de;$!==null;){de=$;var _e=de.stateNode;if(de.tag===5&&_e!==null&&(de=_e,le!==null&&(_e=ys($,le),_e!=null&&We.push(Oi($,_e,de)))),Yt)break;$=$.return}0<We.length&&(Re=new De(Re,Fe,null,l,Ce),Se.push({event:Re,listeners:We}))}}if((n&7)===0){e:{if(Re=t==="mouseover"||t==="pointerover",De=t==="mouseout"||t==="pointerout",Re&&l!==Cr&&(Fe=l.relatedTarget||l.fromElement)&&(kn(Fe)||Fe[_r]))break e;if((De||Re)&&(Re=Ce.window===Ce?Ce:(Re=Ce.ownerDocument)?Re.defaultView||Re.parentWindow:window,De?(Fe=l.relatedTarget||l.toElement,De=ge,Fe=Fe?kn(Fe):null,Fe!==null&&(Yt=Ps(Fe),Fe!==Yt||Fe.tag!==5&&Fe.tag!==6)&&(Fe=null)):(De=null,Fe=ge),De!==Fe)){if(We=ca,_e="onMouseLeave",le="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(We=Ai,_e="onPointerLeave",le="onPointerEnter",$="pointer"),Yt=De==null?Re:$n(De),de=Fe==null?Re:$n(Fe),Re=new We(_e,$+"leave",De,l,Ce),Re.target=Yt,Re.relatedTarget=de,_e=null,kn(Ce)===ge&&(We=new We(le,$+"enter",Fe,l,Ce),We.target=de,We.relatedTarget=Yt,_e=We),Yt=_e,De&&Fe)t:{for(We=De,le=Fe,$=0,de=We;de;de=qn(de))$++;for(de=0,_e=le;_e;_e=qn(_e))de++;for(;0<$-de;)We=qn(We),$--;for(;0<de-$;)le=qn(le),de--;for(;$--;){if(We===le||le!==null&&We===le.alternate)break t;We=qn(We),le=qn(le)}We=null}else We=null;De!==null&&Ol(Se,Re,De,We,!1),Fe!==null&&Yt!==null&&Ol(Se,Yt,Fe,We,!0)}}e:{if(Re=ge?$n(ge):window,De=Re.nodeName&&Re.nodeName.toLowerCase(),De==="select"||De==="input"&&Re.type==="file")var He=i;else if(ut(Re))if(a)He=H;else{He=S;var Ze=v}else(De=Re.nodeName)&&De.toLowerCase()==="input"&&(Re.type==="checkbox"||Re.type==="radio")&&(He=P);if(He&&(He=He(t,ge))){Sn(Se,He,l,Ce);break e}Ze&&Ze(t,Re,ge),t==="focusout"&&(Ze=Re._wrapperState)&&Ze.controlled&&Re.type==="number"&&at(Re,"number",Re.value)}switch(Ze=ge?$n(ge):window,t){case"focusin":(ut(Ze)||Ze.contentEditable==="true")&&(Xt=Ze,yt=ge,Ot=null);break;case"focusout":Ot=yt=Xt=null;break;case"mousedown":ms=!0;break;case"contextmenu":case"mouseup":case"dragend":ms=!1,Tr(Se,l,Ce);break;case"selectionchange":if(Xs)break;case"keydown":case"keyup":Tr(Se,l,Ce)}var Qe;if(Kr)e:{switch(t){case"compositionstart":var Je="onCompositionStart";break e;case"compositionend":Je="onCompositionEnd";break e;case"compositionupdate":Je="onCompositionUpdate";break e}Je=void 0}else xs?ha(t,l)&&(Je="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(Je="onCompositionStart");Je&&(Vs&&l.locale!=="ko"&&(xs||Je!=="onCompositionStart"?Je==="onCompositionEnd"&&xs&&(Qe=la()):(ur=Ce,Ni="value"in ur?ur.value:ur.textContent,xs=!0)),Ze=ga(ge,Je),0<Ze.length&&(Je=new Rt(Je,t,null,l,Ce),Se.push({event:Je,listeners:Ze}),Qe?Je.data=Qe:(Qe=Ti(l),Qe!==null&&(Je.data=Qe)))),(Qe=xa?xo(t,l):_i(t,l))&&(ge=ga(ge,"onBeforeInput"),0<ge.length&&(Ce=new Rt("onBeforeInput","beforeinput",null,l,Ce),Se.push({event:Ce,listeners:ge}),Ce.data=Qe))}Pl(Se,n)})}function Oi(t,n,l){return{instance:t,listener:n,currentTarget:l}}function ga(t,n){for(var l=n+"Capture",d=[];t!==null;){var f=t,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=ys(t,l),y!=null&&d.unshift(Oi(t,y,f)),y=ys(t,n),y!=null&&d.push(Oi(t,y,f))),t=t.return}return d}function qn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ol(t,n,l,d,f){for(var y=n._reactName,C=[];l!==null&&l!==d;){var B=l,Y=B.alternate,ge=B.stateNode;if(Y!==null&&Y===d)break;B.tag===5&&ge!==null&&(B=ge,f?(Y=ys(l,y),Y!=null&&C.unshift(Oi(l,Y,B))):f||(Y=ys(l,y),Y!=null&&C.push(Oi(l,Y,B)))),l=l.return}C.length!==0&&t.push({event:n,listeners:C})}var wu=/\r\n?/g,bu=/\u0000|\uFFFD/g;function Bl(t){return(typeof t=="string"?t:""+t).replace(wu,`
`).replace(bu,"")}function ya(t,n,l){if(n=Bl(n),Bl(t)!==n&&l)throw Error(x(425))}function Ea(){}var go=null,yo=null;function Eo(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var jo=typeof setTimeout=="function"?setTimeout:void 0,Ru=typeof clearTimeout=="function"?clearTimeout:void 0,Ll=typeof Promise=="function"?Promise:void 0,vu=typeof queueMicrotask=="function"?queueMicrotask:typeof Ll<"u"?function(t){return Ll.resolve(null).then(t).catch(Nu)}:jo;function Nu(t){setTimeout(function(){throw t})}function wo(t,n){var l=n,d=0;do{var f=l.nextSibling;if(t.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(d===0){t.removeChild(f),cr(n);return}d--}else l!=="$"&&l!=="$?"&&l!=="$!"||d++;l=f}while(l);cr(n)}function en(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Fl(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"){if(n===0)return t;n--}else l==="/$"&&n++}t=t.previousSibling}return null}var Kn=Math.random().toString(36).slice(2),br="__reactFiber$"+Kn,Bi="__reactProps$"+Kn,_r="__reactContainer$"+Kn,bo="__reactEvents$"+Kn,Cu="__reactListeners$"+Kn,Su="__reactHandles$"+Kn;function kn(t){var n=t[br];if(n)return n;for(var l=t.parentNode;l;){if(n=l[_r]||l[br]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(t=Fl(t);t!==null;){if(l=t[br])return l;t=Fl(t)}return n}t=l,l=t.parentNode}return null}function Li(t){return t=t[br]||t[_r],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $n(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(x(33))}function ja(t){return t[Bi]||null}var Ro=[],Jn=-1;function tn(t){return{current:t}}function Mt(t){0>Jn||(t.current=Ro[Jn],Ro[Jn]=null,Jn--)}function It(t,n){Jn++,Ro[Jn]=t.current,t.current=n}var sn={},bs=tn(sn),Ds=tn(!1),An=sn;function ei(t,n){var l=t.type.contextTypes;if(!l)return sn;var d=t.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===n)return d.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in l)f[y]=n[y];return d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=f),f}function Os(t){return t=t.childContextTypes,t!=null}function wa(){Mt(Ds),Mt(bs)}function Ul(t,n,l){if(bs.current!==sn)throw Error(x(168));It(bs,n),It(Ds,l)}function Wl(t,n,l){var d=t.stateNode;if(n=n.childContextTypes,typeof d.getChildContext!="function")return l;d=d.getChildContext();for(var f in d)if(!(f in n))throw Error(x(108,Ge(t)||"Unknown",f));return V({},l,d)}function ba(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sn,An=bs.current,It(bs,t),It(Ds,Ds.current),!0}function Hl(t,n,l){var d=t.stateNode;if(!d)throw Error(x(169));l?(t=Wl(t,n,An),d.__reactInternalMemoizedMergedChildContext=t,Mt(Ds),Mt(bs),It(bs,t)):Mt(Ds),It(Ds,l)}var Mr=null,Ra=!1,vo=!1;function zl(t){Mr===null?Mr=[t]:Mr.push(t)}function ku(t){Ra=!0,zl(t)}function rn(){if(!vo&&Mr!==null){vo=!0;var t=0,n=it;try{var l=Mr;for(it=1;t<l.length;t++){var d=l[t];do d=d(!0);while(d!==null)}Mr=null,Ra=!1}catch(f){throw Mr!==null&&(Mr=Mr.slice(t+1)),Ws(we,rn),f}finally{it=n,vo=!1}}return null}var ti=[],si=0,va=null,Na=0,sr=[],rr=0,In=null,Pr=1,Dr="";function Tn(t,n){ti[si++]=Na,ti[si++]=va,va=t,Na=n}function Gl(t,n,l){sr[rr++]=Pr,sr[rr++]=Dr,sr[rr++]=In,In=t;var d=Pr;t=Dr;var f=32-As(d)-1;d&=~(1<<f),l+=1;var y=32-As(n)+f;if(30<y){var C=f-f%5;y=(d&(1<<C)-1).toString(32),d>>=C,f-=C,Pr=1<<32-As(n)+f|l<<f|d,Dr=y+t}else Pr=1<<y|l<<f|d,Dr=t}function No(t){t.return!==null&&(Tn(t,1),Gl(t,1,0))}function Co(t){for(;t===va;)va=ti[--si],ti[si]=null,Na=ti[--si],ti[si]=null;for(;t===In;)In=sr[--rr],sr[rr]=null,Dr=sr[--rr],sr[rr]=null,Pr=sr[--rr],sr[rr]=null}var Ys=null,Zs=null,Dt=!1,xr=null;function Vl(t,n){var l=or(5,null,null,0);l.elementType="DELETED",l.stateNode=n,l.return=t,n=t.deletions,n===null?(t.deletions=[l],t.flags|=16):n.push(l)}function Xl(t,n){switch(t.tag){case 5:var l=t.type;return n=n.nodeType!==1||l.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,Ys=t,Zs=en(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,Ys=t,Zs=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(l=In!==null?{id:Pr,overflow:Dr}:null,t.memoizedState={dehydrated:n,treeContext:l,retryLane:1073741824},l=or(18,null,null,0),l.stateNode=n,l.return=t,t.child=l,Ys=t,Zs=null,!0):!1;default:return!1}}function So(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ko(t){if(Dt){var n=Zs;if(n){var l=n;if(!Xl(t,n)){if(So(t))throw Error(x(418));n=en(l.nextSibling);var d=Ys;n&&Xl(t,n)?Vl(d,l):(t.flags=t.flags&-4097|2,Dt=!1,Ys=t)}}else{if(So(t))throw Error(x(418));t.flags=t.flags&-4097|2,Dt=!1,Ys=t}}}function Yl(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ys=t}function Ca(t){if(t!==Ys)return!1;if(!Dt)return Yl(t),Dt=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Eo(t.type,t.memoizedProps)),n&&(n=Zs)){if(So(t))throw Zl(),Error(x(418));for(;n;)Vl(t,n),n=en(n.nextSibling)}if(Yl(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(x(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"){if(n===0){Zs=en(t.nextSibling);break e}n--}else l!=="$"&&l!=="$!"&&l!=="$?"||n++}t=t.nextSibling}Zs=null}}else Zs=Ys?en(t.stateNode.nextSibling):null;return!0}function Zl(){for(var t=Zs;t;)t=en(t.nextSibling)}function ri(){Zs=Ys=null,Dt=!1}function Ao(t){xr===null?xr=[t]:xr.push(t)}var Au=Q.ReactCurrentBatchConfig;function Fi(t,n,l){if(t=l.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(x(309));var d=l.stateNode}if(!d)throw Error(x(147,t));var f=d,y=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===y?n.ref:(n=function(C){var B=f.refs;C===null?delete B[y]:B[y]=C},n._stringRef=y,n)}if(typeof t!="string")throw Error(x(284));if(!l._owner)throw Error(x(290,t))}return t}function Sa(t,n){throw t=Object.prototype.toString.call(n),Error(x(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Ql(t){var n=t._init;return n(t._payload)}function ql(t){function n(le,$){if(t){var de=le.deletions;de===null?(le.deletions=[$],le.flags|=16):de.push($)}}function l(le,$){if(!t)return null;for(;$!==null;)n(le,$),$=$.sibling;return null}function d(le,$){for(le=new Map;$!==null;)$.key!==null?le.set($.key,$):le.set($.index,$),$=$.sibling;return le}function f(le,$){return le=xn(le,$),le.index=0,le.sibling=null,le}function y(le,$,de){return le.index=de,t?(de=le.alternate,de!==null?(de=de.index,de<$?(le.flags|=2,$):de):(le.flags|=2,$)):(le.flags|=1048576,$)}function C(le){return t&&le.alternate===null&&(le.flags|=2),le}function B(le,$,de,_e){return $===null||$.tag!==6?($=jl(de,le.mode,_e),$.return=le,$):($=f($,de),$.return=le,$)}function Y(le,$,de,_e){var He=de.type;return He===F?Ce(le,$,de.props.children,_e,de.key):$!==null&&($.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===pe&&Ql(He)===$.type)?(_e=f($,de.props),_e.ref=Fi(le,$,de),_e.return=le,_e):(_e=Ka(de.type,de.key,de.props,null,le.mode,_e),_e.ref=Fi(le,$,de),_e.return=le,_e)}function ge(le,$,de,_e){return $===null||$.tag!==4||$.stateNode.containerInfo!==de.containerInfo||$.stateNode.implementation!==de.implementation?($=wl(de,le.mode,_e),$.return=le,$):($=f($,de.children||[]),$.return=le,$)}function Ce(le,$,de,_e,He){return $===null||$.tag!==7?($=Fn(de,le.mode,_e,He),$.return=le,$):($=f($,de),$.return=le,$)}function Se(le,$,de){if(typeof $=="string"&&$!==""||typeof $=="number")return $=jl(""+$,le.mode,de),$.return=le,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case xe:return de=Ka($.type,$.key,$.props,null,le.mode,de),de.ref=Fi(le,null,$),de.return=le,de;case ce:return $=wl($,le.mode,de),$.return=le,$;case pe:var _e=$._init;return Se(le,_e($._payload),de)}if(qs($)||Ee($))return $=Fn($,le.mode,de,null),$.return=le,$;Sa(le,$)}return null}function Re(le,$,de,_e){var He=$!==null?$.key:null;if(typeof de=="string"&&de!==""||typeof de=="number")return He!==null?null:B(le,$,""+de,_e);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case xe:return de.key===He?Y(le,$,de,_e):null;case ce:return de.key===He?ge(le,$,de,_e):null;case pe:return He=de._init,Re(le,$,He(de._payload),_e)}if(qs(de)||Ee(de))return He!==null?null:Ce(le,$,de,_e,null);Sa(le,de)}return null}function De(le,$,de,_e,He){if(typeof _e=="string"&&_e!==""||typeof _e=="number")return le=le.get(de)||null,B($,le,""+_e,He);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case xe:return le=le.get(_e.key===null?de:_e.key)||null,Y($,le,_e,He);case ce:return le=le.get(_e.key===null?de:_e.key)||null,ge($,le,_e,He);case pe:var Ze=_e._init;return De(le,$,de,Ze(_e._payload),He)}if(qs(_e)||Ee(_e))return le=le.get(de)||null,Ce($,le,_e,He,null);Sa($,_e)}return null}function Fe(le,$,de,_e){for(var He=null,Ze=null,Qe=$,Je=$=0,ls=null;Qe!==null&&Je<de.length;Je++){Qe.index>Je?(ls=Qe,Qe=null):ls=Qe.sibling;var pt=Re(le,Qe,de[Je],_e);if(pt===null){Qe===null&&(Qe=ls);break}t&&Qe&&pt.alternate===null&&n(le,Qe),$=y(pt,$,Je),Ze===null?He=pt:Ze.sibling=pt,Ze=pt,Qe=ls}if(Je===de.length)return l(le,Qe),Dt&&Tn(le,Je),He;if(Qe===null){for(;Je<de.length;Je++)Qe=Se(le,de[Je],_e),Qe!==null&&($=y(Qe,$,Je),Ze===null?He=Qe:Ze.sibling=Qe,Ze=Qe);return Dt&&Tn(le,Je),He}for(Qe=d(le,Qe);Je<de.length;Je++)ls=De(Qe,le,Je,de[Je],_e),ls!==null&&(t&&ls.alternate!==null&&Qe.delete(ls.key===null?Je:ls.key),$=y(ls,$,Je),Ze===null?He=ls:Ze.sibling=ls,Ze=ls);return t&&Qe.forEach(function(mn){return n(le,mn)}),Dt&&Tn(le,Je),He}function We(le,$,de,_e){var He=Ee(de);if(typeof He!="function")throw Error(x(150));if(de=He.call(de),de==null)throw Error(x(151));for(var Ze=He=null,Qe=$,Je=$=0,ls=null,pt=de.next();Qe!==null&&!pt.done;Je++,pt=de.next()){Qe.index>Je?(ls=Qe,Qe=null):ls=Qe.sibling;var mn=Re(le,Qe,pt.value,_e);if(mn===null){Qe===null&&(Qe=ls);break}t&&Qe&&mn.alternate===null&&n(le,Qe),$=y(mn,$,Je),Ze===null?He=mn:Ze.sibling=mn,Ze=mn,Qe=ls}if(pt.done)return l(le,Qe),Dt&&Tn(le,Je),He;if(Qe===null){for(;!pt.done;Je++,pt=de.next())pt=Se(le,pt.value,_e),pt!==null&&($=y(pt,$,Je),Ze===null?He=pt:Ze.sibling=pt,Ze=pt);return Dt&&Tn(le,Je),He}for(Qe=d(le,Qe);!pt.done;Je++,pt=de.next())pt=De(Qe,le,Je,pt.value,_e),pt!==null&&(t&&pt.alternate!==null&&Qe.delete(pt.key===null?Je:pt.key),$=y(pt,$,Je),Ze===null?He=pt:Ze.sibling=pt,Ze=pt);return t&&Qe.forEach(function(ld){return n(le,ld)}),Dt&&Tn(le,Je),He}function Yt(le,$,de,_e){if(typeof de=="object"&&de!==null&&de.type===F&&de.key===null&&(de=de.props.children),typeof de=="object"&&de!==null){switch(de.$$typeof){case xe:e:{for(var He=de.key,Ze=$;Ze!==null;){if(Ze.key===He){if(He=de.type,He===F){if(Ze.tag===7){l(le,Ze.sibling),$=f(Ze,de.props.children),$.return=le,le=$;break e}}else if(Ze.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===pe&&Ql(He)===Ze.type){l(le,Ze.sibling),$=f(Ze,de.props),$.ref=Fi(le,Ze,de),$.return=le,le=$;break e}l(le,Ze);break}else n(le,Ze);Ze=Ze.sibling}de.type===F?($=Fn(de.props.children,le.mode,_e,de.key),$.return=le,le=$):(_e=Ka(de.type,de.key,de.props,null,le.mode,_e),_e.ref=Fi(le,$,de),_e.return=le,le=_e)}return C(le);case ce:e:{for(Ze=de.key;$!==null;){if($.key===Ze)if($.tag===4&&$.stateNode.containerInfo===de.containerInfo&&$.stateNode.implementation===de.implementation){l(le,$.sibling),$=f($,de.children||[]),$.return=le,le=$;break e}else{l(le,$);break}else n(le,$);$=$.sibling}$=wl(de,le.mode,_e),$.return=le,le=$}return C(le);case pe:return Ze=de._init,Yt(le,$,Ze(de._payload),_e)}if(qs(de))return Fe(le,$,de,_e);if(Ee(de))return We(le,$,de,_e);Sa(le,de)}return typeof de=="string"&&de!==""||typeof de=="number"?(de=""+de,$!==null&&$.tag===6?(l(le,$.sibling),$=f($,de),$.return=le,le=$):(l(le,$),$=jl(de,le.mode,_e),$.return=le,le=$),C(le)):l(le,$)}return Yt}var ni=ql(!0),Kl=ql(!1),ka=tn(null),Aa=null,ii=null,Io=null;function To(){Io=ii=Aa=null}function _o(t){var n=ka.current;Mt(ka),t._currentValue=n}function Mo(t,n,l){for(;t!==null;){var d=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,d!==null&&(d.childLanes|=n)):d!==null&&(d.childLanes&n)!==n&&(d.childLanes|=n),t===l)break;t=t.return}}function ai(t,n){Aa=t,Io=ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(Bs=!0),t.firstContext=null)}function nr(t){var n=t._currentValue;if(Io!==t)if(t={context:t,memoizedValue:n,next:null},ii===null){if(Aa===null)throw Error(x(308));ii=t,Aa.dependencies={lanes:0,firstContext:t}}else ii=ii.next=t;return n}var _n=null;function Po(t){_n===null?_n=[t]:_n.push(t)}function $l(t,n,l,d){var f=n.interleaved;return f===null?(l.next=l,Po(n)):(l.next=f.next,f.next=l),n.interleaved=l,Or(t,d)}function Or(t,n){t.lanes|=n;var l=t.alternate;for(l!==null&&(l.lanes|=n),l=t,t=t.return;t!==null;)t.childLanes|=n,l=t.alternate,l!==null&&(l.childLanes|=n),l=t,t=t.return;return l.tag===3?l.stateNode:null}var nn=!1;function Do(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jl(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Br(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function an(t,n,l){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(ht&2)!==0){var f=d.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),d.pending=n,Or(t,l)}return f=d.interleaved,f===null?(n.next=n,Po(d)):(n.next=f.next,f.next=n),d.interleaved=n,Or(t,l)}function Ia(t,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194240)!==0)){var d=n.lanes;d&=t.pendingLanes,l|=d,n.lanes=l,Ut(t,l)}}function ec(t,n){var l=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,l===d)){var f=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var C={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?f=y=C:y=y.next=C,l=l.next}while(l!==null);y===null?f=y=n:y=y.next=n}else f=y=n;l={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:d.shared,effects:d.effects},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=n:t.next=n,l.lastBaseUpdate=n}function Ta(t,n,l,d){var f=t.updateQueue;nn=!1;var y=f.firstBaseUpdate,C=f.lastBaseUpdate,B=f.shared.pending;if(B!==null){f.shared.pending=null;var Y=B,ge=Y.next;Y.next=null,C===null?y=ge:C.next=ge,C=Y;var Ce=t.alternate;Ce!==null&&(Ce=Ce.updateQueue,B=Ce.lastBaseUpdate,B!==C&&(B===null?Ce.firstBaseUpdate=ge:B.next=ge,Ce.lastBaseUpdate=Y))}if(y!==null){var Se=f.baseState;C=0,Ce=ge=Y=null,B=y;do{var Re=B.lane,De=B.eventTime;if((d&Re)===Re){Ce!==null&&(Ce=Ce.next={eventTime:De,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var Fe=t,We=B;switch(Re=n,De=l,We.tag){case 1:if(Fe=We.payload,typeof Fe=="function"){Se=Fe.call(De,Se,Re);break e}Se=Fe;break e;case 3:Fe.flags=Fe.flags&-65537|128;case 0:if(Fe=We.payload,Re=typeof Fe=="function"?Fe.call(De,Se,Re):Fe,Re==null)break e;Se=V({},Se,Re);break e;case 2:nn=!0}}B.callback!==null&&B.lane!==0&&(t.flags|=64,Re=f.effects,Re===null?f.effects=[B]:Re.push(B))}else De={eventTime:De,lane:Re,tag:B.tag,payload:B.payload,callback:B.callback,next:null},Ce===null?(ge=Ce=De,Y=Se):Ce=Ce.next=De,C|=Re;if(B=B.next,B===null){if(B=f.shared.pending,B===null)break;Re=B,B=Re.next,Re.next=null,f.lastBaseUpdate=Re,f.shared.pending=null}}while(!0);if(Ce===null&&(Y=Se),f.baseState=Y,f.firstBaseUpdate=ge,f.lastBaseUpdate=Ce,n=f.shared.interleaved,n!==null){f=n;do C|=f.lane,f=f.next;while(f!==n)}else y===null&&(f.shared.lanes=0);Dn|=C,t.lanes=C,t.memoizedState=Se}}function tc(t,n,l){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var d=t[n],f=d.callback;if(f!==null){if(d.callback=null,d=l,typeof f!="function")throw Error(x(191,f));f.call(d)}}}var Ui={},Rr=tn(Ui),Wi=tn(Ui),Hi=tn(Ui);function Mn(t){if(t===Ui)throw Error(x(174));return t}function Oo(t,n){switch(It(Hi,n),It(Wi,t),It(Rr,Ui),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:Wr(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=Wr(n,t)}Mt(Rr),It(Rr,n)}function oi(){Mt(Rr),Mt(Wi),Mt(Hi)}function sc(t){Mn(Hi.current);var n=Mn(Rr.current),l=Wr(n,t.type);n!==l&&(It(Wi,t),It(Rr,l))}function Bo(t){Wi.current===t&&(Mt(Rr),Mt(Wi))}var Bt=tn(0);function _a(t){for(var n=t;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Lo=[];function Fo(){for(var t=0;t<Lo.length;t++)Lo[t]._workInProgressVersionPrimary=null;Lo.length=0}var Ma=Q.ReactCurrentDispatcher,Uo=Q.ReactCurrentBatchConfig,Pn=0,Lt=null,ts=null,as=null,Pa=!1,zi=!1,Gi=0,Iu=0;function Rs(){throw Error(x(321))}function Wo(t,n){if(n===null)return!1;for(var l=0;l<n.length&&l<t.length;l++)if(!re(t[l],n[l]))return!1;return!0}function Ho(t,n,l,d,f,y){if(Pn=y,Lt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ma.current=t===null||t.memoizedState===null?Pu:Du,t=l(d,f),zi){y=0;do{if(zi=!1,Gi=0,25<=y)throw Error(x(301));y+=1,as=ts=null,n.updateQueue=null,Ma.current=Ou,t=l(d,f)}while(zi)}if(Ma.current=Ba,n=ts!==null&&ts.next!==null,Pn=0,as=ts=Lt=null,Pa=!1,n)throw Error(x(300));return t}function zo(){var t=Gi!==0;return Gi=0,t}function vr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return as===null?Lt.memoizedState=as=t:as=as.next=t,as}function ir(){if(ts===null){var t=Lt.alternate;t=t!==null?t.memoizedState:null}else t=ts.next;var n=as===null?Lt.memoizedState:as.next;if(n!==null)as=n,ts=t;else{if(t===null)throw Error(x(310));ts=t,t={memoizedState:ts.memoizedState,baseState:ts.baseState,baseQueue:ts.baseQueue,queue:ts.queue,next:null},as===null?Lt.memoizedState=as=t:as=as.next=t}return as}function Vi(t,n){return typeof n=="function"?n(t):n}function Go(t){var n=ir(),l=n.queue;if(l===null)throw Error(x(311));l.lastRenderedReducer=t;var d=ts,f=d.baseQueue,y=l.pending;if(y!==null){if(f!==null){var C=f.next;f.next=y.next,y.next=C}d.baseQueue=f=y,l.pending=null}if(f!==null){y=f.next,d=d.baseState;var B=C=null,Y=null,ge=y;do{var Ce=ge.lane;if((Pn&Ce)===Ce)Y!==null&&(Y=Y.next={lane:0,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null}),d=ge.hasEagerState?ge.eagerState:t(d,ge.action);else{var Se={lane:Ce,action:ge.action,hasEagerState:ge.hasEagerState,eagerState:ge.eagerState,next:null};Y===null?(B=Y=Se,C=d):Y=Y.next=Se,Lt.lanes|=Ce,Dn|=Ce}ge=ge.next}while(ge!==null&&ge!==y);Y===null?C=d:Y.next=B,re(d,n.memoizedState)||(Bs=!0),n.memoizedState=d,n.baseState=C,n.baseQueue=Y,l.lastRenderedState=d}if(t=l.interleaved,t!==null){f=t;do y=f.lane,Lt.lanes|=y,Dn|=y,f=f.next;while(f!==t)}else f===null&&(l.lanes=0);return[n.memoizedState,l.dispatch]}function Vo(t){var n=ir(),l=n.queue;if(l===null)throw Error(x(311));l.lastRenderedReducer=t;var d=l.dispatch,f=l.pending,y=n.memoizedState;if(f!==null){l.pending=null;var C=f=f.next;do y=t(y,C.action),C=C.next;while(C!==f);re(y,n.memoizedState)||(Bs=!0),n.memoizedState=y,n.baseQueue===null&&(n.baseState=y),l.lastRenderedState=y}return[y,d]}function rc(){}function nc(t,n){var l=Lt,d=ir(),f=n(),y=!re(d.memoizedState,f);if(y&&(d.memoizedState=f,Bs=!0),d=d.queue,Xo(oc.bind(null,l,d,t),[t]),d.getSnapshot!==n||y||as!==null&&as.memoizedState.tag&1){if(l.flags|=2048,Xi(9,ac.bind(null,l,d,f,n),void 0,null),os===null)throw Error(x(349));(Pn&30)!==0||ic(l,n,f)}return f}function ic(t,n,l){t.flags|=16384,t={getSnapshot:n,value:l},n=Lt.updateQueue,n===null?(n={lastEffect:null,stores:null},Lt.updateQueue=n,n.stores=[t]):(l=n.stores,l===null?n.stores=[t]:l.push(t))}function ac(t,n,l,d){n.value=l,n.getSnapshot=d,lc(n)&&cc(t)}function oc(t,n,l){return l(function(){lc(n)&&cc(t)})}function lc(t){var n=t.getSnapshot;t=t.value;try{var l=n();return!re(t,l)}catch{return!0}}function cc(t){var n=Or(t,1);n!==null&&fr(n,t,1,-1)}function uc(t){var n=vr();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},n.queue=t,t=t.dispatch=Mu.bind(null,Lt,t),[n.memoizedState,t]}function Xi(t,n,l,d){return t={tag:t,create:n,destroy:l,deps:d,next:null},n=Lt.updateQueue,n===null?(n={lastEffect:null,stores:null},Lt.updateQueue=n,n.lastEffect=t.next=t):(l=n.lastEffect,l===null?n.lastEffect=t.next=t:(d=l.next,l.next=t,t.next=d,n.lastEffect=t)),t}function dc(){return ir().memoizedState}function Da(t,n,l,d){var f=vr();Lt.flags|=t,f.memoizedState=Xi(1|n,l,void 0,d===void 0?null:d)}function Oa(t,n,l,d){var f=ir();d=d===void 0?null:d;var y=void 0;if(ts!==null){var C=ts.memoizedState;if(y=C.destroy,d!==null&&Wo(d,C.deps)){f.memoizedState=Xi(n,l,y,d);return}}Lt.flags|=t,f.memoizedState=Xi(1|n,l,y,d)}function xc(t,n){return Da(8390656,8,t,n)}function Xo(t,n){return Oa(2048,8,t,n)}function mc(t,n){return Oa(4,2,t,n)}function hc(t,n){return Oa(4,4,t,n)}function pc(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function fc(t,n,l){return l=l!=null?l.concat([t]):null,Oa(4,4,pc.bind(null,n,t),l)}function Yo(){}function gc(t,n){var l=ir();n=n===void 0?null:n;var d=l.memoizedState;return d!==null&&n!==null&&Wo(n,d[1])?d[0]:(l.memoizedState=[t,n],t)}function yc(t,n){var l=ir();n=n===void 0?null:n;var d=l.memoizedState;return d!==null&&n!==null&&Wo(n,d[1])?d[0]:(t=t(),l.memoizedState=[t,n],t)}function Ec(t,n,l){return(Pn&21)===0?(t.baseState&&(t.baseState=!1,Bs=!0),t.memoizedState=l):(re(l,n)||(l=Kt(),Lt.lanes|=l,Dn|=l,t.baseState=!0),n)}function Tu(t,n){var l=it;it=l!==0&&4>l?l:4,t(!0);var d=Uo.transition;Uo.transition={};try{t(!1),n()}finally{it=l,Uo.transition=d}}function jc(){return ir().memoizedState}function _u(t,n,l){var d=un(t);if(l={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null},wc(t))bc(n,l);else if(l=$l(t,n,l,d),l!==null){var f=Ts();fr(l,t,d,f),Rc(l,n,d)}}function Mu(t,n,l){var d=un(t),f={lane:d,action:l,hasEagerState:!1,eagerState:null,next:null};if(wc(t))bc(n,f);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=n.lastRenderedReducer,y!==null))try{var C=n.lastRenderedState,B=y(C,l);if(f.hasEagerState=!0,f.eagerState=B,re(B,C)){var Y=n.interleaved;Y===null?(f.next=f,Po(n)):(f.next=Y.next,Y.next=f),n.interleaved=f;return}}catch{}l=$l(t,n,f,d),l!==null&&(f=Ts(),fr(l,t,d,f),Rc(l,n,d))}}function wc(t){var n=t.alternate;return t===Lt||n!==null&&n===Lt}function bc(t,n){zi=Pa=!0;var l=t.pending;l===null?n.next=n:(n.next=l.next,l.next=n),t.pending=n}function Rc(t,n,l){if((l&4194240)!==0){var d=n.lanes;d&=t.pendingLanes,l|=d,n.lanes=l,Ut(t,l)}}var Ba={readContext:nr,useCallback:Rs,useContext:Rs,useEffect:Rs,useImperativeHandle:Rs,useInsertionEffect:Rs,useLayoutEffect:Rs,useMemo:Rs,useReducer:Rs,useRef:Rs,useState:Rs,useDebugValue:Rs,useDeferredValue:Rs,useTransition:Rs,useMutableSource:Rs,useSyncExternalStore:Rs,useId:Rs,unstable_isNewReconciler:!1},Pu={readContext:nr,useCallback:function(t,n){return vr().memoizedState=[t,n===void 0?null:n],t},useContext:nr,useEffect:xc,useImperativeHandle:function(t,n,l){return l=l!=null?l.concat([t]):null,Da(4194308,4,pc.bind(null,n,t),l)},useLayoutEffect:function(t,n){return Da(4194308,4,t,n)},useInsertionEffect:function(t,n){return Da(4,2,t,n)},useMemo:function(t,n){var l=vr();return n=n===void 0?null:n,t=t(),l.memoizedState=[t,n],t},useReducer:function(t,n,l){var d=vr();return n=l!==void 0?l(n):n,d.memoizedState=d.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},d.queue=t,t=t.dispatch=_u.bind(null,Lt,t),[d.memoizedState,t]},useRef:function(t){var n=vr();return t={current:t},n.memoizedState=t},useState:uc,useDebugValue:Yo,useDeferredValue:function(t){return vr().memoizedState=t},useTransition:function(){var t=uc(!1),n=t[0];return t=Tu.bind(null,t[1]),vr().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,l){var d=Lt,f=vr();if(Dt){if(l===void 0)throw Error(x(407));l=l()}else{if(l=n(),os===null)throw Error(x(349));(Pn&30)!==0||ic(d,n,l)}f.memoizedState=l;var y={value:l,getSnapshot:n};return f.queue=y,xc(oc.bind(null,d,y,t),[t]),d.flags|=2048,Xi(9,ac.bind(null,d,y,l,n),void 0,null),l},useId:function(){var t=vr(),n=os.identifierPrefix;if(Dt){var l=Dr,d=Pr;l=(d&~(1<<32-As(d)-1)).toString(32)+l,n=":"+n+"R"+l,l=Gi++,0<l&&(n+="H"+l.toString(32)),n+=":"}else l=Iu++,n=":"+n+"r"+l.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},Du={readContext:nr,useCallback:gc,useContext:nr,useEffect:Xo,useImperativeHandle:fc,useInsertionEffect:mc,useLayoutEffect:hc,useMemo:yc,useReducer:Go,useRef:dc,useState:function(){return Go(Vi)},useDebugValue:Yo,useDeferredValue:function(t){var n=ir();return Ec(n,ts.memoizedState,t)},useTransition:function(){var t=Go(Vi)[0],n=ir().memoizedState;return[t,n]},useMutableSource:rc,useSyncExternalStore:nc,useId:jc,unstable_isNewReconciler:!1},Ou={readContext:nr,useCallback:gc,useContext:nr,useEffect:Xo,useImperativeHandle:fc,useInsertionEffect:mc,useLayoutEffect:hc,useMemo:yc,useReducer:Vo,useRef:dc,useState:function(){return Vo(Vi)},useDebugValue:Yo,useDeferredValue:function(t){var n=ir();return ts===null?n.memoizedState=t:Ec(n,ts.memoizedState,t)},useTransition:function(){var t=Vo(Vi)[0],n=ir().memoizedState;return[t,n]},useMutableSource:rc,useSyncExternalStore:nc,useId:jc,unstable_isNewReconciler:!1};function mr(t,n){if(t&&t.defaultProps){n=V({},n),t=t.defaultProps;for(var l in t)n[l]===void 0&&(n[l]=t[l]);return n}return n}function Zo(t,n,l,d){n=t.memoizedState,l=l(d,n),l=l==null?n:V({},n,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var La={isMounted:function(t){return(t=t._reactInternals)?Ps(t)===t:!1},enqueueSetState:function(t,n,l){t=t._reactInternals;var d=Ts(),f=un(t),y=Br(d,f);y.payload=n,l!=null&&(y.callback=l),n=an(t,y,f),n!==null&&(fr(n,t,f,d),Ia(n,t,f))},enqueueReplaceState:function(t,n,l){t=t._reactInternals;var d=Ts(),f=un(t),y=Br(d,f);y.tag=1,y.payload=n,l!=null&&(y.callback=l),n=an(t,y,f),n!==null&&(fr(n,t,f,d),Ia(n,t,f))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var l=Ts(),d=un(t),f=Br(l,d);f.tag=2,n!=null&&(f.callback=n),n=an(t,f,d),n!==null&&(fr(n,t,d,l),Ia(n,t,d))}};function vc(t,n,l,d,f,y,C){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,y,C):n.prototype&&n.prototype.isPureReactComponent?!he(l,d)||!he(f,y):!0}function Nc(t,n,l){var d=!1,f=sn,y=n.contextType;return typeof y=="object"&&y!==null?y=nr(y):(f=Os(n)?An:bs.current,d=n.contextTypes,y=(d=d!=null)?ei(t,f):sn),n=new n(l,y),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=La,t.stateNode=n,n._reactInternals=t,d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=f,t.__reactInternalMemoizedMaskedChildContext=y),n}function Cc(t,n,l,d){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,d),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,d),n.state!==t&&La.enqueueReplaceState(n,n.state,null)}function Qo(t,n,l,d){var f=t.stateNode;f.props=l,f.state=t.memoizedState,f.refs={},Do(t);var y=n.contextType;typeof y=="object"&&y!==null?f.context=nr(y):(y=Os(n)?An:bs.current,f.context=ei(t,y)),f.state=t.memoizedState,y=n.getDerivedStateFromProps,typeof y=="function"&&(Zo(t,n,y,l),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(n=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),n!==f.state&&La.enqueueReplaceState(f,f.state,null),Ta(t,l,f,d),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308)}function li(t,n){try{var l="",d=n;do l+=Ae(d),d=d.return;while(d);var f=l}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:t,source:n,stack:f,digest:null}}function qo(t,n,l){return{value:t,source:null,stack:l??null,digest:n??null}}function Ko(t,n){try{console.error(n.value)}catch(l){setTimeout(function(){throw l})}}var Bu=typeof WeakMap=="function"?WeakMap:Map;function Sc(t,n,l){l=Br(-1,l),l.tag=3,l.payload={element:null};var d=n.value;return l.callback=function(){Va||(Va=!0,xl=d),Ko(t,n)},l}function kc(t,n,l){l=Br(-1,l),l.tag=3;var d=t.type.getDerivedStateFromError;if(typeof d=="function"){var f=n.value;l.payload=function(){return d(f)},l.callback=function(){Ko(t,n)}}var y=t.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Ko(t,n),typeof d!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var C=n.stack;this.componentDidCatch(n.value,{componentStack:C!==null?C:""})}),l}function Ac(t,n,l){var d=t.pingCache;if(d===null){d=t.pingCache=new Bu;var f=new Set;d.set(n,f)}else f=d.get(n),f===void 0&&(f=new Set,d.set(n,f));f.has(l)||(f.add(l),t=Ku.bind(null,t,n,l),n.then(t,t))}function Ic(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Tc(t,n,l,d,f){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(n=Br(-1,1),n.tag=2,an(l,n,1))),l.lanes|=1),t):(t.flags|=65536,t.lanes=f,t)}var Lu=Q.ReactCurrentOwner,Bs=!1;function Is(t,n,l,d){n.child=t===null?Kl(n,null,l,d):ni(n,t.child,l,d)}function _c(t,n,l,d,f){l=l.render;var y=n.ref;return ai(n,f),d=Ho(t,n,l,d,y,f),l=zo(),t!==null&&!Bs?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~f,Lr(t,n,f)):(Dt&&l&&No(n),n.flags|=1,Is(t,n,d,f),n.child)}function Mc(t,n,l,d,f){if(t===null){var y=l.type;return typeof y=="function"&&!El(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(n.tag=15,n.type=y,Pc(t,n,y,d,f)):(t=Ka(l.type,null,d,n,n.mode,f),t.ref=n.ref,t.return=n,n.child=t)}if(y=t.child,(t.lanes&f)===0){var C=y.memoizedProps;if(l=l.compare,l=l!==null?l:he,l(C,d)&&t.ref===n.ref)return Lr(t,n,f)}return n.flags|=1,t=xn(y,d),t.ref=n.ref,t.return=n,n.child=t}function Pc(t,n,l,d,f){if(t!==null){var y=t.memoizedProps;if(he(y,d)&&t.ref===n.ref)if(Bs=!1,n.pendingProps=d=y,(t.lanes&f)!==0)(t.flags&131072)!==0&&(Bs=!0);else return n.lanes=t.lanes,Lr(t,n,f)}return $o(t,n,l,d,f)}function Dc(t,n,l){var d=n.pendingProps,f=d.children,y=t!==null?t.memoizedState:null;if(d.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(ui,Qs),Qs|=l;else{if((l&1073741824)===0)return t=y!==null?y.baseLanes|l:l,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,It(ui,Qs),Qs|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:l,It(ui,Qs),Qs|=d}else y!==null?(d=y.baseLanes|l,n.memoizedState=null):d=l,It(ui,Qs),Qs|=d;return Is(t,n,f,l),n.child}function Oc(t,n){var l=n.ref;(t===null&&l!==null||t!==null&&t.ref!==l)&&(n.flags|=512,n.flags|=2097152)}function $o(t,n,l,d,f){var y=Os(l)?An:bs.current;return y=ei(n,y),ai(n,f),l=Ho(t,n,l,d,y,f),d=zo(),t!==null&&!Bs?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~f,Lr(t,n,f)):(Dt&&d&&No(n),n.flags|=1,Is(t,n,l,f),n.child)}function Bc(t,n,l,d,f){if(Os(l)){var y=!0;ba(n)}else y=!1;if(ai(n,f),n.stateNode===null)Ua(t,n),Nc(n,l,d),Qo(n,l,d,f),d=!0;else if(t===null){var C=n.stateNode,B=n.memoizedProps;C.props=B;var Y=C.context,ge=l.contextType;typeof ge=="object"&&ge!==null?ge=nr(ge):(ge=Os(l)?An:bs.current,ge=ei(n,ge));var Ce=l.getDerivedStateFromProps,Se=typeof Ce=="function"||typeof C.getSnapshotBeforeUpdate=="function";Se||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(B!==d||Y!==ge)&&Cc(n,C,d,ge),nn=!1;var Re=n.memoizedState;C.state=Re,Ta(n,d,C,f),Y=n.memoizedState,B!==d||Re!==Y||Ds.current||nn?(typeof Ce=="function"&&(Zo(n,l,Ce,d),Y=n.memoizedState),(B=nn||vc(n,l,B,d,Re,Y,ge))?(Se||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(n.flags|=4194308)):(typeof C.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=d,n.memoizedState=Y),C.props=d,C.state=Y,C.context=ge,d=B):(typeof C.componentDidMount=="function"&&(n.flags|=4194308),d=!1)}else{C=n.stateNode,Jl(t,n),B=n.memoizedProps,ge=n.type===n.elementType?B:mr(n.type,B),C.props=ge,Se=n.pendingProps,Re=C.context,Y=l.contextType,typeof Y=="object"&&Y!==null?Y=nr(Y):(Y=Os(l)?An:bs.current,Y=ei(n,Y));var De=l.getDerivedStateFromProps;(Ce=typeof De=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(B!==Se||Re!==Y)&&Cc(n,C,d,Y),nn=!1,Re=n.memoizedState,C.state=Re,Ta(n,d,C,f);var Fe=n.memoizedState;B!==Se||Re!==Fe||Ds.current||nn?(typeof De=="function"&&(Zo(n,l,De,d),Fe=n.memoizedState),(ge=nn||vc(n,l,ge,d,Re,Fe,Y)||!1)?(Ce||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(d,Fe,Y),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(d,Fe,Y)),typeof C.componentDidUpdate=="function"&&(n.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof C.componentDidUpdate!="function"||B===t.memoizedProps&&Re===t.memoizedState||(n.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||B===t.memoizedProps&&Re===t.memoizedState||(n.flags|=1024),n.memoizedProps=d,n.memoizedState=Fe),C.props=d,C.state=Fe,C.context=Y,d=ge):(typeof C.componentDidUpdate!="function"||B===t.memoizedProps&&Re===t.memoizedState||(n.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||B===t.memoizedProps&&Re===t.memoizedState||(n.flags|=1024),d=!1)}return Jo(t,n,l,d,y,f)}function Jo(t,n,l,d,f,y){Oc(t,n);var C=(n.flags&128)!==0;if(!d&&!C)return f&&Hl(n,l,!1),Lr(t,n,y);d=n.stateNode,Lu.current=n;var B=C&&typeof l.getDerivedStateFromError!="function"?null:d.render();return n.flags|=1,t!==null&&C?(n.child=ni(n,t.child,null,y),n.child=ni(n,null,B,y)):Is(t,n,B,y),n.memoizedState=d.state,f&&Hl(n,l,!0),n.child}function Lc(t){var n=t.stateNode;n.pendingContext?Ul(t,n.pendingContext,n.pendingContext!==n.context):n.context&&Ul(t,n.context,!1),Oo(t,n.containerInfo)}function Fc(t,n,l,d,f){return ri(),Ao(f),n.flags|=256,Is(t,n,l,d),n.child}var el={dehydrated:null,treeContext:null,retryLane:0};function tl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Uc(t,n,l){var d=n.pendingProps,f=Bt.current,y=!1,C=(n.flags&128)!==0,B;if((B=C)||(B=t!==null&&t.memoizedState===null?!1:(f&2)!==0),B?(y=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(f|=1),It(Bt,f&1),t===null)return ko(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(C=d.children,t=d.fallback,y?(d=n.mode,y=n.child,C={mode:"hidden",children:C},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=C):y=$a(C,d,0,null),t=Fn(t,d,l,null),y.return=n,t.return=n,y.sibling=t,n.child=y,n.child.memoizedState=tl(l),n.memoizedState=el,t):sl(n,C));if(f=t.memoizedState,f!==null&&(B=f.dehydrated,B!==null))return Fu(t,n,C,d,B,f,l);if(y){y=d.fallback,C=n.mode,f=t.child,B=f.sibling;var Y={mode:"hidden",children:d.children};return(C&1)===0&&n.child!==f?(d=n.child,d.childLanes=0,d.pendingProps=Y,n.deletions=null):(d=xn(f,Y),d.subtreeFlags=f.subtreeFlags&14680064),B!==null?y=xn(B,y):(y=Fn(y,C,l,null),y.flags|=2),y.return=n,d.return=n,d.sibling=y,n.child=d,d=y,y=n.child,C=t.child.memoizedState,C=C===null?tl(l):{baseLanes:C.baseLanes|l,cachePool:null,transitions:C.transitions},y.memoizedState=C,y.childLanes=t.childLanes&~l,n.memoizedState=el,d}return y=t.child,t=y.sibling,d=xn(y,{mode:"visible",children:d.children}),(n.mode&1)===0&&(d.lanes=l),d.return=n,d.sibling=null,t!==null&&(l=n.deletions,l===null?(n.deletions=[t],n.flags|=16):l.push(t)),n.child=d,n.memoizedState=null,d}function sl(t,n){return n=$a({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function Fa(t,n,l,d){return d!==null&&Ao(d),ni(n,t.child,null,l),t=sl(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Fu(t,n,l,d,f,y,C){if(l)return n.flags&256?(n.flags&=-257,d=qo(Error(x(422))),Fa(t,n,C,d)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(y=d.fallback,f=n.mode,d=$a({mode:"visible",children:d.children},f,0,null),y=Fn(y,f,C,null),y.flags|=2,d.return=n,y.return=n,d.sibling=y,n.child=d,(n.mode&1)!==0&&ni(n,t.child,null,C),n.child.memoizedState=tl(C),n.memoizedState=el,y);if((n.mode&1)===0)return Fa(t,n,C,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var B=d.dgst;return d=B,y=Error(x(419)),d=qo(y,d,void 0),Fa(t,n,C,d)}if(B=(C&t.childLanes)!==0,Bs||B){if(d=os,d!==null){switch(C&-C){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|C))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,Or(t,f),fr(d,t,f,-1))}return yl(),d=qo(Error(x(421))),Fa(t,n,C,d)}return f.data==="$?"?(n.flags|=128,n.child=t.child,n=$u.bind(null,t),f._reactRetry=n,null):(t=y.treeContext,Zs=en(f.nextSibling),Ys=n,Dt=!0,xr=null,t!==null&&(sr[rr++]=Pr,sr[rr++]=Dr,sr[rr++]=In,Pr=t.id,Dr=t.overflow,In=n),n=sl(n,d.children),n.flags|=4096,n)}function Wc(t,n,l){t.lanes|=n;var d=t.alternate;d!==null&&(d.lanes|=n),Mo(t.return,n,l)}function rl(t,n,l,d,f){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:d,tail:l,tailMode:f}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=l,y.tailMode=f)}function Hc(t,n,l){var d=n.pendingProps,f=d.revealOrder,y=d.tail;if(Is(t,n,d.children,l),d=Bt.current,(d&2)!==0)d=d&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wc(t,l,n);else if(t.tag===19)Wc(t,l,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}d&=1}if(It(Bt,d),(n.mode&1)===0)n.memoizedState=null;else switch(f){case"forwards":for(l=n.child,f=null;l!==null;)t=l.alternate,t!==null&&_a(t)===null&&(f=l),l=l.sibling;l=f,l===null?(f=n.child,n.child=null):(f=l.sibling,l.sibling=null),rl(n,!1,f,l,y);break;case"backwards":for(l=null,f=n.child,n.child=null;f!==null;){if(t=f.alternate,t!==null&&_a(t)===null){n.child=f;break}t=f.sibling,f.sibling=l,l=f,f=t}rl(n,!0,l,null,y);break;case"together":rl(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ua(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Lr(t,n,l){if(t!==null&&(n.dependencies=t.dependencies),Dn|=n.lanes,(l&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(x(153));if(n.child!==null){for(t=n.child,l=xn(t,t.pendingProps),n.child=l,l.return=n;t.sibling!==null;)t=t.sibling,l=l.sibling=xn(t,t.pendingProps),l.return=n;l.sibling=null}return n.child}function Uu(t,n,l){switch(n.tag){case 3:Lc(n),ri();break;case 5:sc(n);break;case 1:Os(n.type)&&ba(n);break;case 4:Oo(n,n.stateNode.containerInfo);break;case 10:var d=n.type._context,f=n.memoizedProps.value;It(ka,d._currentValue),d._currentValue=f;break;case 13:if(d=n.memoizedState,d!==null)return d.dehydrated!==null?(It(Bt,Bt.current&1),n.flags|=128,null):(l&n.child.childLanes)!==0?Uc(t,n,l):(It(Bt,Bt.current&1),t=Lr(t,n,l),t!==null?t.sibling:null);It(Bt,Bt.current&1);break;case 19:if(d=(l&n.childLanes)!==0,(t.flags&128)!==0){if(d)return Hc(t,n,l);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),It(Bt,Bt.current),d)break;return null;case 22:case 23:return n.lanes=0,Dc(t,n,l)}return Lr(t,n,l)}var zc,nl,Gc,Vc;zc=function(t,n){for(var l=n.child;l!==null;){if(l.tag===5||l.tag===6)t.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},nl=function(){},Gc=function(t,n,l,d){var f=t.memoizedProps;if(f!==d){t=n.stateNode,Mn(Rr.current);var y=null;switch(l){case"input":f=fs(t,f),d=fs(t,d),y=[];break;case"select":f=V({},f,{value:void 0}),d=V({},d,{value:void 0}),y=[];break;case"textarea":f=gr(t,f),d=gr(t,d),y=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(t.onclick=Ea)}gt(l,d);var C;l=null;for(ge in f)if(!d.hasOwnProperty(ge)&&f.hasOwnProperty(ge)&&f[ge]!=null)if(ge==="style"){var B=f[ge];for(C in B)B.hasOwnProperty(C)&&(l||(l={}),l[C]="")}else ge!=="dangerouslySetInnerHTML"&&ge!=="children"&&ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&ge!=="autoFocus"&&(j.hasOwnProperty(ge)?y||(y=[]):(y=y||[]).push(ge,null));for(ge in d){var Y=d[ge];if(B=f?.[ge],d.hasOwnProperty(ge)&&Y!==B&&(Y!=null||B!=null))if(ge==="style")if(B){for(C in B)!B.hasOwnProperty(C)||Y&&Y.hasOwnProperty(C)||(l||(l={}),l[C]="");for(C in Y)Y.hasOwnProperty(C)&&B[C]!==Y[C]&&(l||(l={}),l[C]=Y[C])}else l||(y||(y=[]),y.push(ge,l)),l=Y;else ge==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,B=B?B.__html:void 0,Y!=null&&B!==Y&&(y=y||[]).push(ge,Y)):ge==="children"?typeof Y!="string"&&typeof Y!="number"||(y=y||[]).push(ge,""+Y):ge!=="suppressContentEditableWarning"&&ge!=="suppressHydrationWarning"&&(j.hasOwnProperty(ge)?(Y!=null&&ge==="onScroll"&&_t("scroll",t),y||B===Y||(y=[])):(y=y||[]).push(ge,Y))}l&&(y=y||[]).push("style",l);var ge=y;(n.updateQueue=ge)&&(n.flags|=4)}},Vc=function(t,n,l,d){l!==d&&(n.flags|=4)};function Yi(t,n){if(!Dt)switch(t.tailMode){case"hidden":n=t.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var d=null;l!==null;)l.alternate!==null&&(d=l),l=l.sibling;d===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function vs(t){var n=t.alternate!==null&&t.alternate.child===t.child,l=0,d=0;if(n)for(var f=t.child;f!==null;)l|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)l|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=d,t.childLanes=l,n}function Wu(t,n,l){var d=n.pendingProps;switch(Co(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vs(n),null;case 1:return Os(n.type)&&wa(),vs(n),null;case 3:return d=n.stateNode,oi(),Mt(Ds),Mt(bs),Fo(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(t===null||t.child===null)&&(Ca(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,xr!==null&&(pl(xr),xr=null))),nl(t,n),vs(n),null;case 5:Bo(n);var f=Mn(Hi.current);if(l=n.type,t!==null&&n.stateNode!=null)Gc(t,n,l,d,f),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!d){if(n.stateNode===null)throw Error(x(166));return vs(n),null}if(t=Mn(Rr.current),Ca(n)){d=n.stateNode,l=n.type;var y=n.memoizedProps;switch(d[br]=n,d[Bi]=y,t=(n.mode&1)!==0,l){case"dialog":_t("cancel",d),_t("close",d);break;case"iframe":case"object":case"embed":_t("load",d);break;case"video":case"audio":for(f=0;f<Pi.length;f++)_t(Pi[f],d);break;case"source":_t("error",d);break;case"img":case"image":case"link":_t("error",d),_t("load",d);break;case"details":_t("toggle",d);break;case"input":rs(d,y),_t("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},_t("invalid",d);break;case"textarea":hn(d,y),_t("invalid",d)}gt(l,y),f=null;for(var C in y)if(y.hasOwnProperty(C)){var B=y[C];C==="children"?typeof B=="string"?d.textContent!==B&&(y.suppressHydrationWarning!==!0&&ya(d.textContent,B,t),f=["children",B]):typeof B=="number"&&d.textContent!==""+B&&(y.suppressHydrationWarning!==!0&&ya(d.textContent,B,t),f=["children",""+B]):j.hasOwnProperty(C)&&B!=null&&C==="onScroll"&&_t("scroll",d)}switch(l){case"input":dt(d),ft(d,y,!0);break;case"textarea":dt(d),Ur(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=Ea)}d=f,n.updateQueue=d,d!==null&&(n.flags|=4)}else{C=f.nodeType===9?f:f.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gs(l)),t==="http://www.w3.org/1999/xhtml"?l==="script"?(t=C.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof d.is=="string"?t=C.createElement(l,{is:d.is}):(t=C.createElement(l),l==="select"&&(C=t,d.multiple?C.multiple=!0:d.size&&(C.size=d.size))):t=C.createElementNS(t,l),t[br]=n,t[Bi]=d,zc(t,n,!1,!1),n.stateNode=t;e:{switch(C=Ct(l,d),l){case"dialog":_t("cancel",t),_t("close",t),f=d;break;case"iframe":case"object":case"embed":_t("load",t),f=d;break;case"video":case"audio":for(f=0;f<Pi.length;f++)_t(Pi[f],t);f=d;break;case"source":_t("error",t),f=d;break;case"img":case"image":case"link":_t("error",t),_t("load",t),f=d;break;case"details":_t("toggle",t),f=d;break;case"input":rs(t,d),f=fs(t,d),_t("invalid",t);break;case"option":f=d;break;case"select":t._wrapperState={wasMultiple:!!d.multiple},f=V({},d,{value:void 0}),_t("invalid",t);break;case"textarea":hn(t,d),f=gr(t,d),_t("invalid",t);break;default:f=d}gt(l,f),B=f;for(y in B)if(B.hasOwnProperty(y)){var Y=B[y];y==="style"?Ne(t,Y):y==="dangerouslySetInnerHTML"?(Y=Y?Y.__html:void 0,Y!=null&&Xe(t,Y)):y==="children"?typeof Y=="string"?(l!=="textarea"||Y!=="")&&bt(t,Y):typeof Y=="number"&&bt(t,""+Y):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(j.hasOwnProperty(y)?Y!=null&&y==="onScroll"&&_t("scroll",t):Y!=null&&te(t,y,Y,C))}switch(l){case"input":dt(t),ft(t,d,!1);break;case"textarea":dt(t),Ur(t);break;case"option":d.value!=null&&t.setAttribute("value",""+Le(d.value));break;case"select":t.multiple=!!d.multiple,y=d.value,y!=null?Pe(t,!!d.multiple,y,!1):d.defaultValue!=null&&Pe(t,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(t.onclick=Ea)}switch(l){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return vs(n),null;case 6:if(t&&n.stateNode!=null)Vc(t,n,t.memoizedProps,d);else{if(typeof d!="string"&&n.stateNode===null)throw Error(x(166));if(l=Mn(Hi.current),Mn(Rr.current),Ca(n)){if(d=n.stateNode,l=n.memoizedProps,d[br]=n,(y=d.nodeValue!==l)&&(t=Ys,t!==null))switch(t.tag){case 3:ya(d.nodeValue,l,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ya(d.nodeValue,l,(t.mode&1)!==0)}y&&(n.flags|=4)}else d=(l.nodeType===9?l:l.ownerDocument).createTextNode(d),d[br]=n,n.stateNode=d}return vs(n),null;case 13:if(Mt(Bt),d=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Dt&&Zs!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Zl(),ri(),n.flags|=98560,y=!1;else if(y=Ca(n),d!==null&&d.dehydrated!==null){if(t===null){if(!y)throw Error(x(318));if(y=n.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(x(317));y[br]=n}else ri(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;vs(n),y=!1}else xr!==null&&(pl(xr),xr=null),y=!0;if(!y)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=l,n):(d=d!==null,d!==(t!==null&&t.memoizedState!==null)&&d&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(Bt.current&1)!==0?ss===0&&(ss=3):yl())),n.updateQueue!==null&&(n.flags|=4),vs(n),null);case 4:return oi(),nl(t,n),t===null&&Di(n.stateNode.containerInfo),vs(n),null;case 10:return _o(n.type._context),vs(n),null;case 17:return Os(n.type)&&wa(),vs(n),null;case 19:if(Mt(Bt),y=n.memoizedState,y===null)return vs(n),null;if(d=(n.flags&128)!==0,C=y.rendering,C===null)if(d)Yi(y,!1);else{if(ss!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(C=_a(t),C!==null){for(n.flags|=128,Yi(y,!1),d=C.updateQueue,d!==null&&(n.updateQueue=d,n.flags|=4),n.subtreeFlags=0,d=l,l=n.child;l!==null;)y=l,t=d,y.flags&=14680066,C=y.alternate,C===null?(y.childLanes=0,y.lanes=t,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=C.childLanes,y.lanes=C.lanes,y.child=C.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=C.memoizedProps,y.memoizedState=C.memoizedState,y.updateQueue=C.updateQueue,y.type=C.type,t=C.dependencies,y.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),l=l.sibling;return It(Bt,Bt.current&1|2),n.child}t=t.sibling}y.tail!==null&&Et()>di&&(n.flags|=128,d=!0,Yi(y,!1),n.lanes=4194304)}else{if(!d)if(t=_a(C),t!==null){if(n.flags|=128,d=!0,l=t.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),Yi(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!Dt)return vs(n),null}else 2*Et()-y.renderingStartTime>di&&l!==1073741824&&(n.flags|=128,d=!0,Yi(y,!1),n.lanes=4194304);y.isBackwards?(C.sibling=n.child,n.child=C):(l=y.last,l!==null?l.sibling=C:n.child=C,y.last=C)}return y.tail!==null?(n=y.tail,y.rendering=n,y.tail=n.sibling,y.renderingStartTime=Et(),n.sibling=null,l=Bt.current,It(Bt,d?l&1|2:l&1),n):(vs(n),null);case 22:case 23:return gl(),d=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==d&&(n.flags|=8192),d&&(n.mode&1)!==0?(Qs&1073741824)!==0&&(vs(n),n.subtreeFlags&6&&(n.flags|=8192)):vs(n),null;case 24:return null;case 25:return null}throw Error(x(156,n.tag))}function Hu(t,n){switch(Co(n),n.tag){case 1:return Os(n.type)&&wa(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return oi(),Mt(Ds),Mt(bs),Fo(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return Bo(n),null;case 13:if(Mt(Bt),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(x(340));ri()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Mt(Bt),null;case 4:return oi(),null;case 10:return _o(n.type._context),null;case 22:case 23:return gl(),null;case 24:return null;default:return null}}var Wa=!1,Ns=!1,zu=typeof WeakSet=="function"?WeakSet:Set,Be=null;function ci(t,n){var l=t.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(d){Ht(t,n,d)}else l.current=null}function il(t,n,l){try{l()}catch(d){Ht(t,n,d)}}var Xc=!1;function Gu(t,n){if(go=jr,t=ot(),tt(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var d=l.getSelection&&l.getSelection();if(d&&d.rangeCount!==0){l=d.anchorNode;var f=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var C=0,B=-1,Y=-1,ge=0,Ce=0,Se=t,Re=null;t:for(;;){for(var De;Se!==l||f!==0&&Se.nodeType!==3||(B=C+f),Se!==y||d!==0&&Se.nodeType!==3||(Y=C+d),Se.nodeType===3&&(C+=Se.nodeValue.length),(De=Se.firstChild)!==null;)Re=Se,Se=De;for(;;){if(Se===t)break t;if(Re===l&&++ge===f&&(B=C),Re===y&&++Ce===d&&(Y=C),(De=Se.nextSibling)!==null)break;Se=Re,Re=Se.parentNode}Se=De}l=B===-1||Y===-1?null:{start:B,end:Y}}else l=null}l=l||{start:0,end:0}}else l=null;for(yo={focusedElem:t,selectionRange:l},jr=!1,Be=n;Be!==null;)if(n=Be,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Be=t;else for(;Be!==null;){n=Be;try{var Fe=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Fe!==null){var We=Fe.memoizedProps,Yt=Fe.memoizedState,le=n.stateNode,$=le.getSnapshotBeforeUpdate(n.elementType===n.type?We:mr(n.type,We),Yt);le.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var de=n.stateNode.containerInfo;de.nodeType===1?de.textContent="":de.nodeType===9&&de.documentElement&&de.removeChild(de.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(_e){Ht(n,n.return,_e)}if(t=n.sibling,t!==null){t.return=n.return,Be=t;break}Be=n.return}return Fe=Xc,Xc=!1,Fe}function Zi(t,n,l){var d=n.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&t)===t){var y=f.destroy;f.destroy=void 0,y!==void 0&&il(n,l,y)}f=f.next}while(f!==d)}}function Ha(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&t)===t){var d=l.create;l.destroy=d()}l=l.next}while(l!==n)}}function al(t){var n=t.ref;if(n!==null){var l=t.stateNode;t.tag,t=l,typeof n=="function"?n(t):n.current=t}}function Yc(t){var n=t.alternate;n!==null&&(t.alternate=null,Yc(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[br],delete n[Bi],delete n[bo],delete n[Cu],delete n[Su])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zc(t){return t.tag===5||t.tag===3||t.tag===4}function Qc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zc(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ol(t,n,l){var d=t.tag;if(d===5||d===6)t=t.stateNode,n?l.nodeType===8?l.parentNode.insertBefore(t,n):l.insertBefore(t,n):(l.nodeType===8?(n=l.parentNode,n.insertBefore(t,l)):(n=l,n.appendChild(t)),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=Ea));else if(d!==4&&(t=t.child,t!==null))for(ol(t,n,l),t=t.sibling;t!==null;)ol(t,n,l),t=t.sibling}function ll(t,n,l){var d=t.tag;if(d===5||d===6)t=t.stateNode,n?l.insertBefore(t,n):l.appendChild(t);else if(d!==4&&(t=t.child,t!==null))for(ll(t,n,l),t=t.sibling;t!==null;)ll(t,n,l),t=t.sibling}var hs=null,hr=!1;function on(t,n,l){for(l=l.child;l!==null;)qc(t,n,l),l=l.sibling}function qc(t,n,l){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(xt,l)}catch{}switch(l.tag){case 5:Ns||ci(l,n);case 6:var d=hs,f=hr;hs=null,on(t,n,l),hs=d,hr=f,hs!==null&&(hr?(t=hs,l=l.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)):hs.removeChild(l.stateNode));break;case 18:hs!==null&&(hr?(t=hs,l=l.stateNode,t.nodeType===8?wo(t.parentNode,l):t.nodeType===1&&wo(t,l),cr(t)):wo(hs,l.stateNode));break;case 4:d=hs,f=hr,hs=l.stateNode.containerInfo,hr=!0,on(t,n,l),hs=d,hr=f;break;case 0:case 11:case 14:case 15:if(!Ns&&(d=l.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var y=f,C=y.destroy;y=y.tag,C!==void 0&&((y&2)!==0||(y&4)!==0)&&il(l,n,C),f=f.next}while(f!==d)}on(t,n,l);break;case 1:if(!Ns&&(ci(l,n),d=l.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=l.memoizedProps,d.state=l.memoizedState,d.componentWillUnmount()}catch(B){Ht(l,n,B)}on(t,n,l);break;case 21:on(t,n,l);break;case 22:l.mode&1?(Ns=(d=Ns)||l.memoizedState!==null,on(t,n,l),Ns=d):on(t,n,l);break;default:on(t,n,l)}}function Kc(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var l=t.stateNode;l===null&&(l=t.stateNode=new zu),n.forEach(function(d){var f=Ju.bind(null,t,d);l.has(d)||(l.add(d),d.then(f,f))})}}function pr(t,n){var l=n.deletions;if(l!==null)for(var d=0;d<l.length;d++){var f=l[d];try{var y=t,C=n,B=C;e:for(;B!==null;){switch(B.tag){case 5:hs=B.stateNode,hr=!1;break e;case 3:hs=B.stateNode.containerInfo,hr=!0;break e;case 4:hs=B.stateNode.containerInfo,hr=!0;break e}B=B.return}if(hs===null)throw Error(x(160));qc(y,C,f),hs=null,hr=!1;var Y=f.alternate;Y!==null&&(Y.return=null),f.return=null}catch(ge){Ht(f,n,ge)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)$c(n,t),n=n.sibling}function $c(t,n){var l=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pr(n,t),Nr(t),d&4){try{Zi(3,t,t.return),Ha(3,t)}catch(We){Ht(t,t.return,We)}try{Zi(5,t,t.return)}catch(We){Ht(t,t.return,We)}}break;case 1:pr(n,t),Nr(t),d&512&&l!==null&&ci(l,l.return);break;case 5:if(pr(n,t),Nr(t),d&512&&l!==null&&ci(l,l.return),t.flags&32){var f=t.stateNode;try{bt(f,"")}catch(We){Ht(t,t.return,We)}}if(d&4&&(f=t.stateNode,f!=null)){var y=t.memoizedProps,C=l!==null?l.memoizedProps:y,B=t.type,Y=t.updateQueue;if(t.updateQueue=null,Y!==null)try{B==="input"&&y.type==="radio"&&y.name!=null&&cs(f,y),Ct(B,C);var ge=Ct(B,y);for(C=0;C<Y.length;C+=2){var Ce=Y[C],Se=Y[C+1];Ce==="style"?Ne(f,Se):Ce==="dangerouslySetInnerHTML"?Xe(f,Se):Ce==="children"?bt(f,Se):te(f,Ce,Se,ge)}switch(B){case"input":Tt(f,y);break;case"textarea":Ss(f,y);break;case"select":var Re=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var De=y.value;De!=null?Pe(f,!!y.multiple,De,!1):Re!==!!y.multiple&&(y.defaultValue!=null?Pe(f,!!y.multiple,y.defaultValue,!0):Pe(f,!!y.multiple,y.multiple?[]:"",!1))}f[Bi]=y}catch(We){Ht(t,t.return,We)}}break;case 6:if(pr(n,t),Nr(t),d&4){if(t.stateNode===null)throw Error(x(162));f=t.stateNode,y=t.memoizedProps;try{f.nodeValue=y}catch(We){Ht(t,t.return,We)}}break;case 3:if(pr(n,t),Nr(t),d&4&&l!==null&&l.memoizedState.isDehydrated)try{cr(n.containerInfo)}catch(We){Ht(t,t.return,We)}break;case 4:pr(n,t),Nr(t);break;case 13:pr(n,t),Nr(t),f=t.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(dl=Et())),d&4&&Kc(t);break;case 22:if(Ce=l!==null&&l.memoizedState!==null,t.mode&1?(Ns=(ge=Ns)||Ce,pr(n,t),Ns=ge):pr(n,t),Nr(t),d&8192){if(ge=t.memoizedState!==null,(t.stateNode.isHidden=ge)&&!Ce&&(t.mode&1)!==0)for(Be=t,Ce=t.child;Ce!==null;){for(Se=Be=Ce;Be!==null;){switch(Re=Be,De=Re.child,Re.tag){case 0:case 11:case 14:case 15:Zi(4,Re,Re.return);break;case 1:ci(Re,Re.return);var Fe=Re.stateNode;if(typeof Fe.componentWillUnmount=="function"){d=Re,l=Re.return;try{n=d,Fe.props=n.memoizedProps,Fe.state=n.memoizedState,Fe.componentWillUnmount()}catch(We){Ht(d,l,We)}}break;case 5:ci(Re,Re.return);break;case 22:if(Re.memoizedState!==null){tu(Se);continue}}De!==null?(De.return=Re,Be=De):tu(Se)}Ce=Ce.sibling}e:for(Ce=null,Se=t;;){if(Se.tag===5){if(Ce===null){Ce=Se;try{f=Se.stateNode,ge?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(B=Se.stateNode,Y=Se.memoizedProps.style,C=Y!=null&&Y.hasOwnProperty("display")?Y.display:null,B.style.display=Ke("display",C))}catch(We){Ht(t,t.return,We)}}}else if(Se.tag===6){if(Ce===null)try{Se.stateNode.nodeValue=ge?"":Se.memoizedProps}catch(We){Ht(t,t.return,We)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===t)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===t)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===t)break e;Ce===Se&&(Ce=null),Se=Se.return}Ce===Se&&(Ce=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:pr(n,t),Nr(t),d&4&&Kc(t);break;case 21:break;default:pr(n,t),Nr(t)}}function Nr(t){var n=t.flags;if(n&2){try{e:{for(var l=t.return;l!==null;){if(Zc(l)){var d=l;break e}l=l.return}throw Error(x(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(bt(f,""),d.flags&=-33);var y=Qc(t);ll(t,y,f);break;case 3:case 4:var C=d.stateNode.containerInfo,B=Qc(t);ol(t,B,C);break;default:throw Error(x(161))}}catch(Y){Ht(t,t.return,Y)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Vu(t,n,l){Be=t,Jc(t)}function Jc(t,n,l){for(var d=(t.mode&1)!==0;Be!==null;){var f=Be,y=f.child;if(f.tag===22&&d){var C=f.memoizedState!==null||Wa;if(!C){var B=f.alternate,Y=B!==null&&B.memoizedState!==null||Ns;B=Wa;var ge=Ns;if(Wa=C,(Ns=Y)&&!ge)for(Be=f;Be!==null;)C=Be,Y=C.child,C.tag===22&&C.memoizedState!==null?su(f):Y!==null?(Y.return=C,Be=Y):su(f);for(;y!==null;)Be=y,Jc(y),y=y.sibling;Be=f,Wa=B,Ns=ge}eu(t)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,Be=y):eu(t)}}function eu(t){for(;Be!==null;){var n=Be;if((n.flags&8772)!==0){var l=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Ns||Ha(5,n);break;case 1:var d=n.stateNode;if(n.flags&4&&!Ns)if(l===null)d.componentDidMount();else{var f=n.elementType===n.type?l.memoizedProps:mr(n.type,l.memoizedProps);d.componentDidUpdate(f,l.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=n.updateQueue;y!==null&&tc(n,y,d);break;case 3:var C=n.updateQueue;if(C!==null){if(l=null,n.child!==null)switch(n.child.tag){case 5:l=n.child.stateNode;break;case 1:l=n.child.stateNode}tc(n,C,l)}break;case 5:var B=n.stateNode;if(l===null&&n.flags&4){l=B;var Y=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":Y.autoFocus&&l.focus();break;case"img":Y.src&&(l.src=Y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var ge=n.alternate;if(ge!==null){var Ce=ge.memoizedState;if(Ce!==null){var Se=Ce.dehydrated;Se!==null&&cr(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}Ns||n.flags&512&&al(n)}catch(Re){Ht(n,n.return,Re)}}if(n===t){Be=null;break}if(l=n.sibling,l!==null){l.return=n.return,Be=l;break}Be=n.return}}function tu(t){for(;Be!==null;){var n=Be;if(n===t){Be=null;break}var l=n.sibling;if(l!==null){l.return=n.return,Be=l;break}Be=n.return}}function su(t){for(;Be!==null;){var n=Be;try{switch(n.tag){case 0:case 11:case 15:var l=n.return;try{Ha(4,n)}catch(Y){Ht(n,l,Y)}break;case 1:var d=n.stateNode;if(typeof d.componentDidMount=="function"){var f=n.return;try{d.componentDidMount()}catch(Y){Ht(n,f,Y)}}var y=n.return;try{al(n)}catch(Y){Ht(n,y,Y)}break;case 5:var C=n.return;try{al(n)}catch(Y){Ht(n,C,Y)}}}catch(Y){Ht(n,n.return,Y)}if(n===t){Be=null;break}var B=n.sibling;if(B!==null){B.return=n.return,Be=B;break}Be=n.return}}var Xu=Math.ceil,za=Q.ReactCurrentDispatcher,cl=Q.ReactCurrentOwner,ar=Q.ReactCurrentBatchConfig,ht=0,os=null,Qt=null,ps=0,Qs=0,ui=tn(0),ss=0,Qi=null,Dn=0,Ga=0,ul=0,qi=null,Ls=null,dl=0,di=1/0,Fr=null,Va=!1,xl=null,ln=null,Xa=!1,cn=null,Ya=0,Ki=0,ml=null,Za=-1,Qa=0;function Ts(){return(ht&6)!==0?Et():Za!==-1?Za:Za=Et()}function un(t){return(t.mode&1)===0?1:(ht&2)!==0&&ps!==0?ps&-ps:Au.transition!==null?(Qa===0&&(Qa=Kt()),Qa):(t=it,t!==0||(t=window.event,t=t===void 0?16:vi(t.type)),t)}function fr(t,n,l,d){if(50<Ki)throw Ki=0,ml=null,Error(x(185));T(t,l,d),((ht&2)===0||t!==os)&&(t===os&&((ht&2)===0&&(Ga|=l),ss===4&&dn(t,ps)),Fs(t,d),l===1&&ht===0&&(n.mode&1)===0&&(di=Et()+500,Ra&&rn()))}function Fs(t,n){var l=t.callbackNode;Gr(t,n);var d=zs(t,t===os?ps:0);if(d===0)l!==null&&ns(l),t.callbackNode=null,t.callbackPriority=0;else if(n=d&-d,t.callbackPriority!==n){if(l!=null&&ns(l),n===1)t.tag===0?ku(nu.bind(null,t)):zl(nu.bind(null,t)),vu(function(){(ht&6)===0&&rn()}),l=null;else{switch(na(d)){case 1:l=we;break;case 4:l=sa;break;case 16:l=vt;break;case 536870912:l=ra;break;default:l=vt}l=xu(l,ru.bind(null,t))}t.callbackPriority=n,t.callbackNode=l}}function ru(t,n){if(Za=-1,Qa=0,(ht&6)!==0)throw Error(x(327));var l=t.callbackNode;if(xi()&&t.callbackNode!==l)return null;var d=zs(t,t===os?ps:0);if(d===0)return null;if((d&30)!==0||(d&t.expiredLanes)!==0||n)n=qa(t,d);else{n=d;var f=ht;ht|=2;var y=au();(os!==t||ps!==n)&&(Fr=null,di=Et()+500,Bn(t,n));do try{Qu();break}catch(B){iu(t,B)}while(!0);To(),za.current=y,ht=f,Qt!==null?n=0:(os=null,ps=0,n=ss)}if(n!==0){if(n===2&&(f=jt(t),f!==0&&(d=f,n=hl(t,f))),n===1)throw l=Qi,Bn(t,0),dn(t,d),Fs(t,Et()),l;if(n===6)dn(t,d);else{if(f=t.current.alternate,(d&30)===0&&!Yu(f)&&(n=qa(t,d),n===2&&(y=jt(t),y!==0&&(d=y,n=hl(t,y))),n===1))throw l=Qi,Bn(t,0),dn(t,d),Fs(t,Et()),l;switch(t.finishedWork=f,t.finishedLanes=d,n){case 0:case 1:throw Error(x(345));case 2:Ln(t,Ls,Fr);break;case 3:if(dn(t,d),(d&130023424)===d&&(n=dl+500-Et(),10<n)){if(zs(t,0)!==0)break;if(f=t.suspendedLanes,(f&d)!==d){Ts(),t.pingedLanes|=t.suspendedLanes&f;break}t.timeoutHandle=jo(Ln.bind(null,t,Ls,Fr),n);break}Ln(t,Ls,Fr);break;case 4:if(dn(t,d),(d&4194240)===d)break;for(n=t.eventTimes,f=-1;0<d;){var C=31-As(d);y=1<<C,C=n[C],C>f&&(f=C),d&=~y}if(d=f,d=Et()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*Xu(d/1960))-d,10<d){t.timeoutHandle=jo(Ln.bind(null,t,Ls,Fr),d);break}Ln(t,Ls,Fr);break;case 5:Ln(t,Ls,Fr);break;default:throw Error(x(329))}}}return Fs(t,Et()),t.callbackNode===l?ru.bind(null,t):null}function hl(t,n){var l=qi;return t.current.memoizedState.isDehydrated&&(Bn(t,n).flags|=256),t=qa(t,n),t!==2&&(n=Ls,Ls=l,n!==null&&pl(n)),t}function pl(t){Ls===null?Ls=t:Ls.push.apply(Ls,t)}function Yu(t){for(var n=t;;){if(n.flags&16384){var l=n.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var d=0;d<l.length;d++){var f=l[d],y=f.getSnapshot;f=f.value;try{if(!re(y(),f))return!1}catch{return!1}}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function dn(t,n){for(n&=~ul,n&=~Ga,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var l=31-As(n),d=1<<l;t[l]=-1,n&=~d}}function nu(t){if((ht&6)!==0)throw Error(x(327));xi();var n=zs(t,0);if((n&1)===0)return Fs(t,Et()),null;var l=qa(t,n);if(t.tag!==0&&l===2){var d=jt(t);d!==0&&(n=d,l=hl(t,d))}if(l===1)throw l=Qi,Bn(t,0),dn(t,n),Fs(t,Et()),l;if(l===6)throw Error(x(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Ln(t,Ls,Fr),Fs(t,Et()),null}function fl(t,n){var l=ht;ht|=1;try{return t(n)}finally{ht=l,ht===0&&(di=Et()+500,Ra&&rn())}}function On(t){cn!==null&&cn.tag===0&&(ht&6)===0&&xi();var n=ht;ht|=1;var l=ar.transition,d=it;try{if(ar.transition=null,it=1,t)return t()}finally{it=d,ar.transition=l,ht=n,(ht&6)===0&&rn()}}function gl(){Qs=ui.current,Mt(ui)}function Bn(t,n){t.finishedWork=null,t.finishedLanes=0;var l=t.timeoutHandle;if(l!==-1&&(t.timeoutHandle=-1,Ru(l)),Qt!==null)for(l=Qt.return;l!==null;){var d=l;switch(Co(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&wa();break;case 3:oi(),Mt(Ds),Mt(bs),Fo();break;case 5:Bo(d);break;case 4:oi();break;case 13:Mt(Bt);break;case 19:Mt(Bt);break;case 10:_o(d.type._context);break;case 22:case 23:gl()}l=l.return}if(os=t,Qt=t=xn(t.current,null),ps=Qs=n,ss=0,Qi=null,ul=Ga=Dn=0,Ls=qi=null,_n!==null){for(n=0;n<_n.length;n++)if(l=_n[n],d=l.interleaved,d!==null){l.interleaved=null;var f=d.next,y=l.pending;if(y!==null){var C=y.next;y.next=f,d.next=C}l.pending=d}_n=null}return t}function iu(t,n){do{var l=Qt;try{if(To(),Ma.current=Ba,Pa){for(var d=Lt.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}Pa=!1}if(Pn=0,as=ts=Lt=null,zi=!1,Gi=0,cl.current=null,l===null||l.return===null){ss=1,Qi=n,Qt=null;break}e:{var y=t,C=l.return,B=l,Y=n;if(n=ps,B.flags|=32768,Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var ge=Y,Ce=B,Se=Ce.tag;if((Ce.mode&1)===0&&(Se===0||Se===11||Se===15)){var Re=Ce.alternate;Re?(Ce.updateQueue=Re.updateQueue,Ce.memoizedState=Re.memoizedState,Ce.lanes=Re.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var De=Ic(C);if(De!==null){De.flags&=-257,Tc(De,C,B,y,n),De.mode&1&&Ac(y,ge,n),n=De,Y=ge;var Fe=n.updateQueue;if(Fe===null){var We=new Set;We.add(Y),n.updateQueue=We}else Fe.add(Y);break e}else{if((n&1)===0){Ac(y,ge,n),yl();break e}Y=Error(x(426))}}else if(Dt&&B.mode&1){var Yt=Ic(C);if(Yt!==null){(Yt.flags&65536)===0&&(Yt.flags|=256),Tc(Yt,C,B,y,n),Ao(li(Y,B));break e}}y=Y=li(Y,B),ss!==4&&(ss=2),qi===null?qi=[y]:qi.push(y),y=C;do{switch(y.tag){case 3:y.flags|=65536,n&=-n,y.lanes|=n;var le=Sc(y,Y,n);ec(y,le);break e;case 1:B=Y;var $=y.type,de=y.stateNode;if((y.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||de!==null&&typeof de.componentDidCatch=="function"&&(ln===null||!ln.has(de)))){y.flags|=65536,n&=-n,y.lanes|=n;var _e=kc(y,B,n);ec(y,_e);break e}}y=y.return}while(y!==null)}lu(l)}catch(He){n=He,Qt===l&&l!==null&&(Qt=l=l.return);continue}break}while(!0)}function au(){var t=za.current;return za.current=Ba,t===null?Ba:t}function yl(){(ss===0||ss===3||ss===2)&&(ss=4),os===null||(Dn&268435455)===0&&(Ga&268435455)===0||dn(os,ps)}function qa(t,n){var l=ht;ht|=2;var d=au();(os!==t||ps!==n)&&(Fr=null,Bn(t,n));do try{Zu();break}catch(f){iu(t,f)}while(!0);if(To(),ht=l,za.current=d,Qt!==null)throw Error(x(261));return os=null,ps=0,ss}function Zu(){for(;Qt!==null;)ou(Qt)}function Qu(){for(;Qt!==null&&!St();)ou(Qt)}function ou(t){var n=du(t.alternate,t,Qs);t.memoizedProps=t.pendingProps,n===null?lu(t):Qt=n,cl.current=null}function lu(t){var n=t;do{var l=n.alternate;if(t=n.return,(n.flags&32768)===0){if(l=Wu(l,n,Qs),l!==null){Qt=l;return}}else{if(l=Hu(l,n),l!==null){l.flags&=32767,Qt=l;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ss=6,Qt=null;return}}if(n=n.sibling,n!==null){Qt=n;return}Qt=n=t}while(n!==null);ss===0&&(ss=5)}function Ln(t,n,l){var d=it,f=ar.transition;try{ar.transition=null,it=1,qu(t,n,l,d)}finally{ar.transition=f,it=d}return null}function qu(t,n,l,d){do xi();while(cn!==null);if((ht&6)!==0)throw Error(x(327));l=t.finishedWork;var f=t.finishedLanes;if(l===null)return null;if(t.finishedWork=null,t.finishedLanes=0,l===t.current)throw Error(x(177));t.callbackNode=null,t.callbackPriority=0;var y=l.lanes|l.childLanes;if(ze(t,y),t===os&&(Qt=os=null,ps=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Xa||(Xa=!0,xu(vt,function(){return xi(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=ar.transition,ar.transition=null;var C=it;it=1;var B=ht;ht|=4,cl.current=null,Gu(t,l),$c(l,t),ws(yo),jr=!!go,yo=go=null,t.current=l,Vu(l),ta(),ht=B,it=C,ar.transition=y}else t.current=l;if(Xa&&(Xa=!1,cn=t,Ya=f),y=t.pendingLanes,y===0&&(ln=null),ct(l.stateNode),Fs(t,Et()),n!==null)for(d=t.onRecoverableError,l=0;l<n.length;l++)f=n[l],d(f.value,{componentStack:f.stack,digest:f.digest});if(Va)throw Va=!1,t=xl,xl=null,t;return(Ya&1)!==0&&t.tag!==0&&xi(),y=t.pendingLanes,(y&1)!==0?t===ml?Ki++:(Ki=0,ml=t):Ki=0,rn(),null}function xi(){if(cn!==null){var t=na(Ya),n=ar.transition,l=it;try{if(ar.transition=null,it=16>t?16:t,cn===null)var d=!1;else{if(t=cn,cn=null,Ya=0,(ht&6)!==0)throw Error(x(331));var f=ht;for(ht|=4,Be=t.current;Be!==null;){var y=Be,C=y.child;if((Be.flags&16)!==0){var B=y.deletions;if(B!==null){for(var Y=0;Y<B.length;Y++){var ge=B[Y];for(Be=ge;Be!==null;){var Ce=Be;switch(Ce.tag){case 0:case 11:case 15:Zi(8,Ce,y)}var Se=Ce.child;if(Se!==null)Se.return=Ce,Be=Se;else for(;Be!==null;){Ce=Be;var Re=Ce.sibling,De=Ce.return;if(Yc(Ce),Ce===ge){Be=null;break}if(Re!==null){Re.return=De,Be=Re;break}Be=De}}}var Fe=y.alternate;if(Fe!==null){var We=Fe.child;if(We!==null){Fe.child=null;do{var Yt=We.sibling;We.sibling=null,We=Yt}while(We!==null)}}Be=y}}if((y.subtreeFlags&2064)!==0&&C!==null)C.return=y,Be=C;else e:for(;Be!==null;){if(y=Be,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Zi(9,y,y.return)}var le=y.sibling;if(le!==null){le.return=y.return,Be=le;break e}Be=y.return}}var $=t.current;for(Be=$;Be!==null;){C=Be;var de=C.child;if((C.subtreeFlags&2064)!==0&&de!==null)de.return=C,Be=de;else e:for(C=$;Be!==null;){if(B=Be,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:Ha(9,B)}}catch(He){Ht(B,B.return,He)}if(B===C){Be=null;break e}var _e=B.sibling;if(_e!==null){_e.return=B.return,Be=_e;break e}Be=B.return}}if(ht=f,rn(),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(xt,t)}catch{}d=!0}return d}finally{it=l,ar.transition=n}}return!1}function cu(t,n,l){n=li(l,n),n=Sc(t,n,1),t=an(t,n,1),n=Ts(),t!==null&&(T(t,1,n),Fs(t,n))}function Ht(t,n,l){if(t.tag===3)cu(t,t,l);else for(;n!==null;){if(n.tag===3){cu(n,t,l);break}else if(n.tag===1){var d=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(ln===null||!ln.has(d))){t=li(l,t),t=kc(n,t,1),n=an(n,t,1),t=Ts(),n!==null&&(T(n,1,t),Fs(n,t));break}}n=n.return}}function Ku(t,n,l){var d=t.pingCache;d!==null&&d.delete(n),n=Ts(),t.pingedLanes|=t.suspendedLanes&l,os===t&&(ps&l)===l&&(ss===4||ss===3&&(ps&130023424)===ps&&500>Et()-dl?Bn(t,0):ul|=l),Fs(t,n)}function uu(t,n){n===0&&((t.mode&1)===0?n=1:(n=Hn,Hn<<=1,(Hn&130023424)===0&&(Hn=4194304)));var l=Ts();t=Or(t,n),t!==null&&(T(t,n,l),Fs(t,l))}function $u(t){var n=t.memoizedState,l=0;n!==null&&(l=n.retryLane),uu(t,l)}function Ju(t,n){var l=0;switch(t.tag){case 13:var d=t.stateNode,f=t.memoizedState;f!==null&&(l=f.retryLane);break;case 19:d=t.stateNode;break;default:throw Error(x(314))}d!==null&&d.delete(n),uu(t,l)}var du;du=function(t,n,l){if(t!==null)if(t.memoizedProps!==n.pendingProps||Ds.current)Bs=!0;else{if((t.lanes&l)===0&&(n.flags&128)===0)return Bs=!1,Uu(t,n,l);Bs=(t.flags&131072)!==0}else Bs=!1,Dt&&(n.flags&1048576)!==0&&Gl(n,Na,n.index);switch(n.lanes=0,n.tag){case 2:var d=n.type;Ua(t,n),t=n.pendingProps;var f=ei(n,bs.current);ai(n,l),f=Ho(null,n,d,t,f,l);var y=zo();return n.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Os(d)?(y=!0,ba(n)):y=!1,n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Do(n),f.updater=La,n.stateNode=f,f._reactInternals=n,Qo(n,d,t,l),n=Jo(null,n,d,!0,y,l)):(n.tag=0,Dt&&y&&No(n),Is(null,n,f,l),n=n.child),n;case 16:d=n.elementType;e:{switch(Ua(t,n),t=n.pendingProps,f=d._init,d=f(d._payload),n.type=d,f=n.tag=td(d),t=mr(d,t),f){case 0:n=$o(null,n,d,t,l);break e;case 1:n=Bc(null,n,d,t,l);break e;case 11:n=_c(null,n,d,t,l);break e;case 14:n=Mc(null,n,d,mr(d.type,t),l);break e}throw Error(x(306,d,""))}return n;case 0:return d=n.type,f=n.pendingProps,f=n.elementType===d?f:mr(d,f),$o(t,n,d,f,l);case 1:return d=n.type,f=n.pendingProps,f=n.elementType===d?f:mr(d,f),Bc(t,n,d,f,l);case 3:e:{if(Lc(n),t===null)throw Error(x(387));d=n.pendingProps,y=n.memoizedState,f=y.element,Jl(t,n),Ta(n,d,null,l);var C=n.memoizedState;if(d=C.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},n.updateQueue.baseState=y,n.memoizedState=y,n.flags&256){f=li(Error(x(423)),n),n=Fc(t,n,d,l,f);break e}else if(d!==f){f=li(Error(x(424)),n),n=Fc(t,n,d,l,f);break e}else for(Zs=en(n.stateNode.containerInfo.firstChild),Ys=n,Dt=!0,xr=null,l=Kl(n,null,d,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ri(),d===f){n=Lr(t,n,l);break e}Is(t,n,d,l)}n=n.child}return n;case 5:return sc(n),t===null&&ko(n),d=n.type,f=n.pendingProps,y=t!==null?t.memoizedProps:null,C=f.children,Eo(d,f)?C=null:y!==null&&Eo(d,y)&&(n.flags|=32),Oc(t,n),Is(t,n,C,l),n.child;case 6:return t===null&&ko(n),null;case 13:return Uc(t,n,l);case 4:return Oo(n,n.stateNode.containerInfo),d=n.pendingProps,t===null?n.child=ni(n,null,d,l):Is(t,n,d,l),n.child;case 11:return d=n.type,f=n.pendingProps,f=n.elementType===d?f:mr(d,f),_c(t,n,d,f,l);case 7:return Is(t,n,n.pendingProps,l),n.child;case 8:return Is(t,n,n.pendingProps.children,l),n.child;case 12:return Is(t,n,n.pendingProps.children,l),n.child;case 10:e:{if(d=n.type._context,f=n.pendingProps,y=n.memoizedProps,C=f.value,It(ka,d._currentValue),d._currentValue=C,y!==null)if(re(y.value,C)){if(y.children===f.children&&!Ds.current){n=Lr(t,n,l);break e}}else for(y=n.child,y!==null&&(y.return=n);y!==null;){var B=y.dependencies;if(B!==null){C=y.child;for(var Y=B.firstContext;Y!==null;){if(Y.context===d){if(y.tag===1){Y=Br(-1,l&-l),Y.tag=2;var ge=y.updateQueue;if(ge!==null){ge=ge.shared;var Ce=ge.pending;Ce===null?Y.next=Y:(Y.next=Ce.next,Ce.next=Y),ge.pending=Y}}y.lanes|=l,Y=y.alternate,Y!==null&&(Y.lanes|=l),Mo(y.return,l,n),B.lanes|=l;break}Y=Y.next}}else if(y.tag===10)C=y.type===n.type?null:y.child;else if(y.tag===18){if(C=y.return,C===null)throw Error(x(341));C.lanes|=l,B=C.alternate,B!==null&&(B.lanes|=l),Mo(C,l,n),C=y.sibling}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===n){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}Is(t,n,f.children,l),n=n.child}return n;case 9:return f=n.type,d=n.pendingProps.children,ai(n,l),f=nr(f),d=d(f),n.flags|=1,Is(t,n,d,l),n.child;case 14:return d=n.type,f=mr(d,n.pendingProps),f=mr(d.type,f),Mc(t,n,d,f,l);case 15:return Pc(t,n,n.type,n.pendingProps,l);case 17:return d=n.type,f=n.pendingProps,f=n.elementType===d?f:mr(d,f),Ua(t,n),n.tag=1,Os(d)?(t=!0,ba(n)):t=!1,ai(n,l),Nc(n,d,f),Qo(n,d,f,l),Jo(null,n,d,!0,t,l);case 19:return Hc(t,n,l);case 22:return Dc(t,n,l)}throw Error(x(156,n.tag))};function xu(t,n){return Ws(t,n)}function ed(t,n,l,d){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(t,n,l,d){return new ed(t,n,l,d)}function El(t){return t=t.prototype,!(!t||!t.isReactComponent)}function td(t){if(typeof t=="function")return El(t)?1:0;if(t!=null){if(t=t.$$typeof,t===L)return 11;if(t===I)return 14}return 2}function xn(t,n){var l=t.alternate;return l===null?(l=or(t.tag,n,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=n,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&14680064,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,n=t.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l}function Ka(t,n,l,d,f,y){var C=2;if(d=t,typeof t=="function")El(t)&&(C=1);else if(typeof t=="string")C=5;else e:switch(t){case F:return Fn(l.children,f,y,n);case U:C=8,f|=8;break;case K:return t=or(12,l,n,f|2),t.elementType=K,t.lanes=y,t;case W:return t=or(13,l,n,f),t.elementType=W,t.lanes=y,t;case me:return t=or(19,l,n,f),t.elementType=me,t.lanes=y,t;case se:return $a(l,f,y,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ne:C=10;break e;case be:C=9;break e;case L:C=11;break e;case I:C=14;break e;case pe:C=16,d=null;break e}throw Error(x(130,t==null?t:typeof t,""))}return n=or(C,l,n,f),n.elementType=t,n.type=d,n.lanes=y,n}function Fn(t,n,l,d){return t=or(7,t,d,n),t.lanes=l,t}function $a(t,n,l,d){return t=or(22,t,d,n),t.elementType=se,t.lanes=l,t.stateNode={isHidden:!1},t}function jl(t,n,l){return t=or(6,t,null,n),t.lanes=l,t}function wl(t,n,l){return n=or(4,t.children!==null?t.children:[],t.key,n),n.lanes=l,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function sd(t,n,l,d,f){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=oe(0),this.expirationTimes=oe(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=oe(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function bl(t,n,l,d,f,y,C,B,Y){return t=new sd(t,n,l,B,Y),n===1?(n=1,y===!0&&(n|=8)):n=0,y=or(3,null,null,n),t.current=y,y.stateNode=t,y.memoizedState={element:d,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Do(y),t}function rd(t,n,l){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ce,key:d==null?null:""+d,children:t,containerInfo:n,implementation:l}}function mu(t){if(!t)return sn;t=t._reactInternals;e:{if(Ps(t)!==t||t.tag!==1)throw Error(x(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Os(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(x(171))}if(t.tag===1){var l=t.type;if(Os(l))return Wl(t,l,n)}return n}function hu(t,n,l,d,f,y,C,B,Y){return t=bl(l,d,!0,t,f,y,C,B,Y),t.context=mu(null),l=t.current,d=Ts(),f=un(l),y=Br(d,f),y.callback=n??null,an(l,y,f),t.current.lanes=f,T(t,f,d),Fs(t,d),t}function Ja(t,n,l,d){var f=n.current,y=Ts(),C=un(f);return l=mu(l),n.context===null?n.context=l:n.pendingContext=l,n=Br(y,C),n.payload={element:t},d=d===void 0?null:d,d!==null&&(n.callback=d),t=an(f,n,C),t!==null&&(fr(t,f,C,y),Ia(t,f,C)),C}function eo(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function pu(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<n?l:n}}function Rl(t,n){pu(t,n),(t=t.alternate)&&pu(t,n)}function nd(){return null}var fu=typeof reportError=="function"?reportError:function(t){console.error(t)};function vl(t){this._internalRoot=t}to.prototype.render=vl.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(x(409));Ja(t,n,null,null)},to.prototype.unmount=vl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;On(function(){Ja(null,t,null,null)}),n[_r]=null}};function to(t){this._internalRoot=t}to.prototype.unstable_scheduleHydration=function(t){if(t){var n=kt();t={blockedOn:null,target:t,priority:n};for(var l=0;l<ds.length&&n!==0&&n<ds[l].priority;l++);ds.splice(l,0,t),l===0&&aa(t)}};function Nl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function so(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gu(){}function id(t,n,l,d,f){if(f){if(typeof d=="function"){var y=d;d=function(){var ge=eo(C);y.call(ge)}}var C=hu(n,d,t,0,null,!1,!1,"",gu);return t._reactRootContainer=C,t[_r]=C.current,Di(t.nodeType===8?t.parentNode:t),On(),C}for(;f=t.lastChild;)t.removeChild(f);if(typeof d=="function"){var B=d;d=function(){var ge=eo(Y);B.call(ge)}}var Y=bl(t,0,!1,null,null,!1,!1,"",gu);return t._reactRootContainer=Y,t[_r]=Y.current,Di(t.nodeType===8?t.parentNode:t),On(function(){Ja(n,Y,l,d)}),Y}function ro(t,n,l,d,f){var y=l._reactRootContainer;if(y){var C=y;if(typeof f=="function"){var B=f;f=function(){var Y=eo(C);B.call(Y)}}Ja(n,C,t,f)}else C=id(l,n,t,f,d);return eo(C)}zn=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var l=Nt(n.pendingLanes);l!==0&&(Ut(n,l|1),Fs(n,Et()),(ht&6)===0&&(di=Et()+500,rn()))}break;case 13:On(function(){var d=Or(t,1);if(d!==null){var f=Ts();fr(d,t,1,f)}}),Rl(t,1)}},js=function(t){if(t.tag===13){var n=Or(t,134217728);if(n!==null){var l=Ts();fr(n,t,134217728,l)}Rl(t,134217728)}},Ve=function(t){if(t.tag===13){var n=un(t),l=Or(t,n);if(l!==null){var d=Ts();fr(l,t,n,d)}Rl(t,n)}},kt=function(){return it},wi=function(t,n){var l=it;try{return it=t,n()}finally{it=l}},Un=function(t,n,l){switch(n){case"input":if(Tt(t,l),n=l.name,l.type==="radio"&&n!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<l.length;n++){var d=l[n];if(d!==t&&d.form===t.form){var f=ja(d);if(!f)throw Error(x(90));Cs(d),Tt(d,f)}}}break;case"textarea":Ss(t,l);break;case"select":n=l.value,n!=null&&Pe(t,!!l.multiple,n,!1)}},Wn=fl,qt=On;var ad={usingClientEntryPoint:!1,Events:[Li,$n,ja,hi,Ms,fl]},$i={findFiberByHostInstance:kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},od={bundleType:$i.bundleType,version:$i.version,rendererPackageName:$i.rendererPackageName,rendererConfig:$i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ji(t),t===null?null:t.stateNode},findFiberByHostInstance:$i.findFiberByHostInstance||nd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var no=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!no.isDisabled&&no.supportsFiber)try{xt=no.inject(od),nt=no}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ad,reactDom_production_min.createPortal=function(t,n){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nl(n))throw Error(x(200));return rd(t,n,null,l)},reactDom_production_min.createRoot=function(t,n){if(!Nl(t))throw Error(x(299));var l=!1,d="",f=fu;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(d=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),n=bl(t,1,!1,null,null,l,!1,d,f),t[_r]=n.current,Di(t.nodeType===8?t.parentNode:t),new vl(n)},reactDom_production_min.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(x(188)):(t=Object.keys(t).join(","),Error(x(268,t)));return t=Ji(n),t=t===null?null:t.stateNode,t},reactDom_production_min.flushSync=function(t){return On(t)},reactDom_production_min.hydrate=function(t,n,l){if(!so(n))throw Error(x(200));return ro(null,t,n,!0,l)},reactDom_production_min.hydrateRoot=function(t,n,l){if(!Nl(t))throw Error(x(405));var d=l!=null&&l.hydratedSources||null,f=!1,y="",C=fu;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),n=hu(n,null,t,1,l??null,f,!1,y,C),t[_r]=n.current,Di(t),d)for(t=0;t<d.length;t++)l=d[t],f=l._getVersion,f=f(l._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[l,f]:n.mutableSourceEagerHydrationData.push(l,f);return new to(n)},reactDom_production_min.render=function(t,n,l){if(!so(n))throw Error(x(200));return ro(null,t,n,!1,l)},reactDom_production_min.unmountComponentAtNode=function(t){if(!so(t))throw Error(x(40));return t._reactRootContainer?(On(function(){ro(null,null,t,!1,function(){t._reactRootContainer=null,t[_r]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=fl,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(t,n,l,d){if(!so(l))throw Error(x(200));if(t==null||t._reactInternals===void 0)throw Error(x(38));return ro(t,n,l,!1,d)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(h){console.error(h)}}return u(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var u=requireReactDom();return client.createRoot=u.createRoot,client.hydrateRoot=u.hydrateRoot,client}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);console.warn("Supabase credentials not found. Running in offline mode.");const supabase=null,isSupabaseConfigured=()=>!1,AuthContext=reactExports.createContext({}),useAuth=()=>reactExports.useContext(AuthContext);function AuthProvider({children:u}){const[h,x]=reactExports.useState(null),[E,j]=reactExports.useState(!0),[g,N]=reactExports.useState({strava:!1,garmin:!1});reactExports.useEffect(()=>{{j(!1);return}},[]);const je={user:h,loading:E,sendPhoneOTP:async ue=>({error:{message:"Authentication not configured."}}),verifyPhoneOTP:async(ue,te)=>({error:{message:"Authentication not configured."}}),signInWithGoogle:async()=>(console.error("Supabase not configured"),{error:{message:"Authentication not configured. Please check your Supabase credentials."}}),signInWithApple:async()=>({error:{message:"Authentication not configured."}}),signOut:async()=>{},connectStrava:async()=>({error:{message:"Strava not configured. Add VITE_STRAVA_CLIENT_ID to your environment."}}),connectGarmin:async()=>({error:{message:"Garmin not configured. Add VITE_GARMIN_CLIENT_ID to your environment."}}),handleStravaCallback:async(ue,te)=>{const Q=localStorage.getItem("strava_oauth_state");if(te!==Q)return{error:{message:"Invalid state parameter. Please try again."}};localStorage.removeItem("strava_oauth_state");try{const xe=await fetch("/api/auth/strava/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:ue})});if(!xe.ok)throw new Error("Failed to exchange Strava token");const ce=await xe.json();return h&&isSupabaseConfigured(),{data:ce,error:null}}catch(xe){return console.error("Strava callback error:",xe),{error:{message:xe.message}}}},handleGarminCallback:async(ue,te,Q)=>{const xe=localStorage.getItem("garmin_oauth_state");if(Q!==xe)return{error:{message:"Invalid state parameter. Please try again."}};localStorage.removeItem("garmin_oauth_state");try{const ce=await fetch("/api/auth/garmin/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oauthToken:ue,oauthVerifier:te})});if(!ce.ok)throw new Error("Failed to exchange Garmin token");const F=await ce.json();return h&&isSupabaseConfigured(),{data:F,error:null}}catch(ce){return console.error("Garmin callback error:",ce),{error:{message:ce.message}}}},disconnectProvider:async ue=>{},connectedProviders:g,isAuthenticated:!!h,isConfigured:isSupabaseConfigured()};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:je,children:u})}const getUserId=async()=>null,saveProfile=async u=>(await getUserId(),localStorage.setItem("motus_profile",JSON.stringify(u)),{data:u,error:null}),loadProfile=async()=>{await getUserId();{const u=localStorage.getItem("motus_profile");return{data:u?JSON.parse(u):null,error:null}}},saveProgram=async u=>(await getUserId(),localStorage.setItem("motus_program",JSON.stringify(u)),{data:u,error:null}),loadProgram=async()=>{await getUserId();{const u=localStorage.getItem("motus_program");return{data:u?JSON.parse(u):null,error:null}}},saveMeals=async u=>(await getUserId(),localStorage.setItem("motus_meals",JSON.stringify(u)),{data:u,error:null}),loadMeals=async()=>{await getUserId();{const u=localStorage.getItem("motus_meals");return{data:u?JSON.parse(u):[],error:null}}},saveWorkouts=async u=>(await getUserId(),localStorage.setItem("motus_workouts",JSON.stringify(u)),{data:u,error:null}),loadWorkouts=async()=>{await getUserId();{const u=localStorage.getItem("motus_workouts");return{data:u?JSON.parse(u):[],error:null}}},syncLocalToCloud=async()=>{await getUserId()},saveSubscription=async u=>(await getUserId(),localStorage.setItem("motus_subscription",JSON.stringify(u)),{data:u,error:null}),loadSubscription=async()=>{await getUserId();{const u=localStorage.getItem("motus_subscription");return{data:u?JSON.parse(u):null,error:null}}},loadReferrals=async()=>(await getUserId(),{data:[],error:null}),completeReferral=async(u,h)=>({data:null,error:new Error("Supabase not configured")}),saveNutritionPreferences=async u=>(await getUserId(),localStorage.setItem("motus_nutrition_preferences",JSON.stringify(u)),{data:u,error:null}),loadNutritionPreferences=async()=>{await getUserId();{const u=localStorage.getItem("motus_nutrition_preferences");return{data:u?JSON.parse(u):null,error:null}}},SubscriptionContext=reactExports.createContext(null);function SubscriptionProvider({children:u}){const{user:h,isAuthenticated:x}=useAuth(),[E,j]=reactExports.useState(null),[g,N]=reactExports.useState([]),[k,A]=reactExports.useState(!0),w=localStorage.getItem("motus_bypass_paywall")==="true"||localStorage.getItem("motus_tylers_friend")==="true",M=reactExports.useCallback(()=>{if(w)return!0;if(!E)return!1;const Q=new Date,xe=E.current_period_end?new Date(E.current_period_end):null;return E.status==="active"&&E.subscription_type==="paid"?!xe||Q<xe:E.status==="referral"||E.status==="active"?xe&&Q<xe:!1},[E,w]);reactExports.useEffect(()=>{(async()=>{if(!x||!h){j(null),N([]),A(!1);return}A(!0);try{const{data:xe}=await loadSubscription();j(xe);const{data:ce}=await loadReferrals();N(ce||[])}catch(xe){console.error("Error loading subscription:",xe)}A(!1)})()},[x,h]);const _=reactExports.useCallback(async()=>{if(!x||!h)return null;const{data:Q}=await loadSubscription();if(Q)return j(Q),Q;const xe={status:"trial",subscription_type:null,referral_count:0,created_at:new Date().toISOString()},{data:ce,error:F}=await saveSubscription(xe);return!F&&ce?(j(ce),ce):null},[x,h]),J=reactExports.useCallback(async Q=>{const xe={...E,status:"active",subscription_type:"paid",stripe_customer_id:Q.customerId,stripe_subscription_id:Q.subscriptionId,current_period_start:new Date().toISOString(),current_period_end:Q.currentPeriodEnd,updated_at:new Date().toISOString()},{data:ce,error:F}=await saveSubscription(xe);return!F&&ce?(j(ce),ce):null},[E]),z=reactExports.useCallback(async(Q,xe)=>{const{data:ce,error:F}=await completeReferral();if(!F){const{data:U}=await loadSubscription();j(U);const{data:K}=await loadReferrals();N(K||[])}return{data:ce,error:F}},[]),O=E?.referral_count||0,q=E?.referral_code||null,ae=Math.max(0,3-O),je=reactExports.useCallback(()=>{if(!E||E.subscription_type!=="referral")return!1;const Q=E.current_period_end?new Date(E.current_period_end):null;return Q&&new Date<Q},[E]),ue=reactExports.useCallback(()=>{localStorage.setItem("motus_tylers_friend","true"),window.location.reload()},[]),te={subscription:E,referrals:g,loading:k,isSubscribed:M(),bypassPaywall:w,referralCount:O,referralCode:q,referralsNeeded:ae,isReferralActive:je(),initializeSubscription:_,activatePaidSubscription:J,processReferralCompletion:z,activateTylersFriend:ue};return jsxRuntimeExports.jsx(SubscriptionContext.Provider,{value:te,children:u})}function useSubscription(){const u=reactExports.useContext(SubscriptionContext);if(!u)throw new Error("useSubscription must be used within a SubscriptionProvider");return u}var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const toKebabCase=u=>u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(u,h)=>{const x=reactExports.forwardRef(({color:E="currentColor",size:j=24,strokeWidth:g=2,absoluteStrokeWidth:N,className:k="",children:A,...w},M)=>reactExports.createElement("svg",{ref:M,...defaultAttributes,width:j,height:j,stroke:E,strokeWidth:N?Number(g)*24/Number(j):g,className:["lucide",`lucide-${toKebabCase(u)}`,k].join(" "),...w},[...h.map(([_,J])=>reactExports.createElement(_,J)),...Array.isArray(A)?A:[A]]));return x.displayName=`${u}`,x};const Activity=createLucideIcon("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const AlertCircle=createLucideIcon("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const AlertTriangle=createLucideIcon("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Apple=createLucideIcon("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);const ArrowLeft=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const BarChart2=createLucideIcon("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);const BarChart3=createLucideIcon("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Barcode=createLucideIcon("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);const Brain=createLucideIcon("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);const Calculator=createLucideIcon("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const Calendar=createLucideIcon("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const Camera=createLucideIcon("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const CheckCircle=createLucideIcon("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const ChefHat=createLucideIcon("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Circle=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Copy=createLucideIcon("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const CreditCard=createLucideIcon("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Dumbbell=createLucideIcon("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);const ExternalLink=createLucideIcon("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);const Flame=createLucideIcon("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const Gift=createLucideIcon("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);const Heart=createLucideIcon("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const Home=createLucideIcon("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const Info=createLucideIcon("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Instagram=createLucideIcon("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);const Keyboard=createLucideIcon("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const Layers=createLucideIcon("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Leaf=createLucideIcon("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);const Loader2=createLucideIcon("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Lock=createLucideIcon("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const Mail=createLucideIcon("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const MessageSquare=createLucideIcon("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const Package=createLucideIcon("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const PenLine=createLucideIcon("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const Pen=createLucideIcon("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const Phone=createLucideIcon("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Plane=createLucideIcon("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);const Play=createLucideIcon("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const RefreshCw=createLucideIcon("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Save=createLucideIcon("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const Scale=createLucideIcon("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Send=createLucideIcon("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const Shield=createLucideIcon("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const ShoppingCart=createLucideIcon("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const Sparkles=createLucideIcon("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const Target=createLucideIcon("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const TrendingUp=createLucideIcon("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Users=createLucideIcon("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Utensils=createLucideIcon("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Zap=createLucideIcon("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),FEATURES=[{icon:Brain,title:"Intelligent Programming",description:"Periodized training blocks built from proven methodologies. Auto-regulated progression based on your actual performance data."},{icon:Target,title:"Sport-Specific Periodization",description:"Whether you're peaking for a meet, racing a marathon, or training for a triathlonyour mesocycles are structured for your event."},{icon:Utensils,title:"Performance Nutrition",description:"Macros calibrated to your training load and body composition goals. Nutrient timing aligned with your session schedule."},{icon:TrendingUp,title:"Progressive Overload Engine",description:"Systematic volume and intensity progression with strategic deloads. No guesswork, no stalled progress."},{icon:Activity,title:"Session Tracking",description:"Log sets, reps, RPE, and actual loads. Track deviations from prescribed work to inform future programming."},{icon:BarChart3,title:"Performance Analytics",description:"Volume load trends, strength curve analysis, and training density metrics. Data-driven decisions, not guesswork."}];function LandingPage({onGetStarted:u,onShowPrivacy:h,onShowTerms:x}){return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-950 text-white overflow-x-hidden",children:[jsxRuntimeExports.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-dark-950/80 backdrop-blur-lg border-b border-dark-800",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-accent-primary to-accent-primaryHover rounded-xl flex items-center justify-center",children:jsxRuntimeExports.jsx(Zap,{className:"w-6 h-6 text-dark-950"})}),jsxRuntimeExports.jsx("span",{className:"text-2xl font-display font-bold tracking-tight",children:"MOTUS"})]}),jsxRuntimeExports.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[jsxRuntimeExports.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors",children:"Features"}),jsxRuntimeExports.jsx("a",{href:"#how-it-works",className:"text-gray-400 hover:text-white transition-colors",children:"How It Works"}),jsxRuntimeExports.jsx("a",{href:"#programs",className:"text-gray-400 hover:text-white transition-colors",children:"Programs"})]}),jsxRuntimeExports.jsx("button",{onClick:u,className:"px-5 py-2.5 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-semibold rounded-lg transition-all hover:scale-105",children:"Get Started"})]})}),jsxRuntimeExports.jsxs("section",{className:"relative min-h-screen flex items-center justify-center pt-20 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-dark-950 via-dark-900 to-dark-950"}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-accent-primary/10 rounded-full blur-3xl"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent-secondary/10 rounded-full blur-3xl"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-5",children:jsxRuntimeExports.jsx("div",{className:"h-full w-full",style:{backgroundImage:"linear-gradient(rgba(212,168,83,0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(212,168,83,0.3) 1px, transparent 1px)",backgroundSize:"50px 50px"}})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-accent-primary/10 border border-accent-primary/30 rounded-full mb-8",children:[jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4 text-accent-primary"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-accent-primary font-medium",children:"Periodized Training + Precision Nutrition"})]}),jsxRuntimeExports.jsxs("h1",{className:"text-5xl md:text-7xl lg:text-8xl font-display font-bold tracking-tight mb-6",children:[jsxRuntimeExports.jsx("span",{className:"block",children:"TRAIN WITH"}),jsxRuntimeExports.jsx("span",{className:"block bg-gradient-to-r from-accent-primary via-accent-primaryHover to-accent-secondary bg-clip-text text-transparent",children:"INTENT."})]}),jsxRuntimeExports.jsxs("p",{className:"text-xl md:text-2xl text-gray-400 max-w-3xl mx-auto mb-10 leading-relaxed",children:["Structured programming for serious athletes. ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Periodized workouts"}),","," ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"calibrated nutrition"}),", and"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"intelligent progression"}),"all in one platform."]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-16",children:jsxRuntimeExports.jsxs("button",{onClick:u,className:"group px-8 py-4 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-bold text-lg rounded-xl transition-all hover:scale-105 flex items-center gap-2 shadow-lg shadow-accent-primary/25",children:["Build Your Program",jsxRuntimeExports.jsx(ArrowRight,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[jsxRuntimeExports.jsx(Layers,{className:"w-5 h-5 text-accent-primary"}),jsxRuntimeExports.jsx("span",{children:"Mesocycle-based periodization"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[jsxRuntimeExports.jsx(Clock,{className:"w-5 h-5 text-accent-primary"}),jsxRuntimeExports.jsx("span",{children:"Auto-regulated deloads"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[jsxRuntimeExports.jsx(Shield,{className:"w-5 h-5 text-accent-primary"}),jsxRuntimeExports.jsx("span",{children:"Research-backed protocols"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-10 border-2 border-gray-600 rounded-full flex items-start justify-center p-2",children:jsxRuntimeExports.jsx("div",{className:"w-1.5 h-3 bg-accent-primary rounded-full animate-pulse"})})})]}),jsxRuntimeExports.jsx("section",{className:"py-24 bg-dark-900",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-6",children:jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["You Know What You're Doing. ",jsxRuntimeExports.jsx("span",{className:"text-accent-danger",children:"Your Tools Should Too."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 text-gray-400",children:[jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Generic apps that don't understand periodization or peaking"]}),jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Nutrition trackers disconnected from your training load"]}),jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-danger mt-1",children:""}),"No intelligent programmingjust random workouts"]}),jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Fragmented tools that don't talk to each other"]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["MOTUS Gets It. ",jsxRuntimeExports.jsx("span",{className:"text-accent-success",children:"Built for Athletes."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 text-gray-400",children:[jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Proper periodization with base, build, peak, and taper phases"})]}),jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Nutrition that scales with your training volume and intensity"})]}),jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Progressive overload with strategic deload weeks built in"})]}),jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:"One integrated platformworkouts, nutrition, and tracking"})]})]})]})]})})}),jsxRuntimeExports.jsx("section",{id:"features",className:"py-24 bg-dark-950",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Built for ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:"Performance"})]}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Every feature designed around how serious athletes actually train."})]}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:FEATURES.map((E,j)=>jsxRuntimeExports.jsxs("div",{className:"group p-6 bg-dark-900 border border-dark-700 rounded-2xl hover:border-accent-primary/50 transition-all hover:-translate-y-1",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-accent-primary/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-accent-primary/20 transition-colors",children:jsxRuntimeExports.jsx(E.icon,{className:"w-6 h-6 text-accent-primary"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-2",children:E.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:E.description})]},j))})]})}),jsxRuntimeExports.jsx("section",{id:"how-it-works",className:"py-24 bg-dark-900",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Setup in ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:"5 Minutes"})]}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-400",children:"Input your data. Get your program. Start training."})]}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{step:"01",title:"Define Your Goal",description:"Select your primary focusstrength, endurance, hypertrophy, or triathlon. Set your target event or timeline.",icon:Target},{step:"02",title:"Input Your Baseline",description:"Current lifts, recent race times, training history. We need real numbers to build a real program.",icon:Brain},{step:"03",title:"Execute & Track",description:"Follow your periodized program. Log your sessions. Let the system adjust based on your actual performance.",icon:TrendingUp}].map((E,j)=>jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"text-7xl font-display font-bold text-dark-800 absolute -top-4 -left-2",children:E.step}),jsxRuntimeExports.jsxs("div",{className:"relative bg-dark-800 border border-dark-700 rounded-2xl p-6 pt-12",children:[jsxRuntimeExports.jsx("div",{className:"w-14 h-14 bg-accent-primary rounded-xl flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(E.icon,{className:"w-7 h-7 text-dark-950"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-2",children:E.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:E.description})]}),j<2&&jsxRuntimeExports.jsx("div",{className:"hidden md:block absolute top-1/2 -right-4 transform -translate-y-1/2",children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-8 h-8 text-dark-600"})})]},j))})]})}),jsxRuntimeExports.jsx("section",{id:"programs",className:"py-24 bg-dark-950",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Specialized ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:"Programming"})]}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-400",children:"Structured training systems for your discipline"})]}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"Strength",subtitle:"Powerlifting & Strength Sport",description:"Periodized programming for squat, bench, and deadlift. Volume blocks, intensity blocks, and peaking protocols.",icon:"",color:"from-red-500/20 to-orange-500/20",border:"border-red-500/30"},{title:"Endurance",subtitle:"Running & Cycling",description:"5K to marathon and beyond. Pace-based training zones, mileage progression, and taper protocols.",icon:"",color:"from-blue-500/20 to-cyan-500/20",border:"border-blue-500/30"},{title:"Hypertrophy",subtitle:"Bodybuilding & Physique",description:"Volume-driven programming for muscle development. Progressive overload with strategic deloads.",icon:"",color:"from-purple-500/20 to-pink-500/20",border:"border-purple-500/30"},{title:"Triathlon",subtitle:"Swim  Bike  Run",description:"Multi-sport periodization with brick workouts and double days. Injury-prevention strength work built in.",icon:"",color:"from-accent-primary/20 to-yellow-500/20",border:"border-accent-primary/30"}].map((E,j)=>jsxRuntimeExports.jsxs("div",{className:`p-6 rounded-2xl bg-gradient-to-br ${E.color} border ${E.border} hover:scale-105 transition-transform cursor-pointer`,children:[jsxRuntimeExports.jsx("span",{className:"text-4xl mb-4 block",children:E.icon}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-1",children:E.title}),jsxRuntimeExports.jsx("p",{className:"text-accent-primary text-sm font-medium mb-3",children:E.subtitle}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:E.description})]},j))})]})}),jsxRuntimeExports.jsxs("section",{className:"py-24 bg-dark-900 relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent-primary/5 via-transparent to-accent-secondary/5"}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-px bg-gradient-to-r from-transparent via-accent-primary/50 to-transparent"}),jsxRuntimeExports.jsxs("div",{className:"relative max-w-4xl mx-auto px-6 text-center",children:[jsxRuntimeExports.jsxs("h2",{className:"text-4xl md:text-6xl font-display font-bold mb-6",children:["Stop Guessing. ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:"Start Training."})]}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-400 mb-10 max-w-2xl mx-auto",children:"Your personalized program is 5 minutes away."}),jsxRuntimeExports.jsxs("button",{onClick:u,className:"group px-10 py-5 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-bold text-xl rounded-xl transition-all hover:scale-105 flex items-center gap-3 mx-auto shadow-lg shadow-accent-primary/25",children:["Build My Program",jsxRuntimeExports.jsx(ArrowRight,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]})]})]}),jsxRuntimeExports.jsx("footer",{className:"py-12 bg-dark-950 border-t border-dark-800",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-6",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-accent-primary to-accent-primaryHover rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(Zap,{className:"w-5 h-5 text-dark-950"})}),jsxRuntimeExports.jsx("span",{className:"text-xl font-display font-bold",children:"MOTUS"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[jsxRuntimeExports.jsx("button",{onClick:h,className:"hover:text-white transition-colors",children:"Privacy"}),jsxRuntimeExports.jsx("button",{onClick:x,className:"hover:text-white transition-colors",children:"Terms"}),jsxRuntimeExports.jsx("a",{href:"mailto:support@motusfit.app",className:"hover:text-white transition-colors",children:"Contact"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:" 2024 MOTUS. Train With Intent."})]})})})]})}const variants={primary:"bg-accent-primary hover:bg-accent-primaryHover active:bg-accent-primaryMuted text-dark-900 font-semibold shadow-sm",secondary:"bg-dark-700 hover:bg-dark-600 text-white border border-dark-500 hover:border-dark-400",ghost:"bg-transparent hover:bg-dark-800 text-text-secondary hover:text-white",danger:"bg-accent-danger hover:bg-red-500 text-white",success:"bg-accent-success hover:bg-green-500 text-dark-900 font-semibold",outline:"bg-transparent border-2 border-accent-primary text-accent-primary hover:bg-accent-primary hover:text-dark-900"},sizes={sm:"px-3 py-1.5 text-sm rounded-md",md:"px-5 py-2.5 text-sm rounded-lg",lg:"px-6 py-3 text-base rounded-lg",xl:"px-8 py-4 text-lg rounded-xl"};function Button({children:u,variant:h="primary",size:x="md",disabled:E=!1,fullWidth:j=!1,onClick:g,type:N="button",className:k="",icon:A,iconPosition:w="left",...M}){return jsxRuntimeExports.jsxs("button",{type:N,onClick:g,disabled:E,className:`
        ${variants[h]}
        ${sizes[x]}
        ${j?"w-full":""}
        ${E?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        font-medium tracking-wide
        transition-all duration-200
        focus:outline-none focus:ring-2 focus:ring-accent-primary/50 focus:ring-offset-2 focus:ring-offset-dark-900
        inline-flex items-center justify-center gap-2
        ${k}
      `,...M,children:[A&&w==="left"&&jsxRuntimeExports.jsx("span",{className:"flex-shrink-0",children:A}),u,A&&w==="right"&&jsxRuntimeExports.jsx("span",{className:"flex-shrink-0",children:A})]})}function Card({children:u,className:h="",hover:x=!1,onClick:E,variant:j="default",padding:g=!0}){const N="rounded-xl transition-all duration-300",k={default:"bg-dark-800 border border-dark-600",elevated:"bg-dark-800 border border-dark-600 shadow-lg shadow-black/20",outlined:"bg-transparent border border-dark-500",solid:"bg-dark-700"},A=x?"hover:border-dark-400 hover:shadow-gold cursor-pointer":"";return jsxRuntimeExports.jsx("div",{onClick:E,className:`
        ${N}
        ${k[j]}
        ${A}
        ${h}
      `,children:u})}function CardBody({children:u,className:h=""}){return jsxRuntimeExports.jsx("div",{className:`p-6 ${h}`,children:u})}function Input({label:u,type:h="text",value:x,onChange:E,placeholder:j,error:g,helper:N,disabled:k=!1,className:A="",size:w="md",...M}){const _={sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-base",lg:"px-5 py-4 text-lg"};return jsxRuntimeExports.jsxs("div",{className:`space-y-2 ${A}`,children:[u&&jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:u}),jsxRuntimeExports.jsx("input",{type:h,value:x,onChange:E,placeholder:j,disabled:k,className:`
          w-full ${_[w]}
          bg-dark-700 border rounded-lg
          text-white placeholder-dark-400
          focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary
          hover:border-dark-400
          transition-colors duration-200
          ${g?"border-accent-danger focus:border-accent-danger focus:ring-accent-danger":"border-dark-600"}
          ${k?"opacity-50 cursor-not-allowed bg-dark-800":""}
        `,...M}),g&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-accent-danger flex items-center gap-1",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),g]}),N&&!g&&jsxRuntimeExports.jsx("p",{className:"text-sm text-text-muted",children:N})]})}function Modal({isOpen:u,onClose:h,title:x,children:E,size:j="md",showClose:g=!0}){const N=reactExports.useRef(null),k=reactExports.useRef(h),A=reactExports.useRef(!1);k.current=h;const w={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[90vw]"};return reactExports.useEffect(()=>{const M=_=>{_.key==="Escape"&&k.current()};return u?(document.addEventListener("keydown",M),document.body.style.overflow="hidden",A.current||(N.current?.focus(),A.current=!0)):A.current=!1,()=>{document.removeEventListener("keydown",M),document.body.style.overflow="unset"}},[u]),u?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-dark-950/80 backdrop-blur-sm",onClick:h}),jsxRuntimeExports.jsxs("div",{ref:N,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",tabIndex:-1,className:`
          relative w-full ${w[j]}
          bg-dark-800 rounded-2xl
          border border-dark-600
          shadow-2xl shadow-black/50
          animate-in fade-in zoom-in-95 duration-200
        `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-dark-600",children:[jsxRuntimeExports.jsx("h2",{id:"modal-title",className:"text-xl font-semibold text-white tracking-tight",children:x}),g&&jsxRuntimeExports.jsx("button",{onClick:h,className:"p-2 rounded-lg text-dark-400 hover:text-white hover:bg-dark-700 transition-colors","aria-label":"Close modal",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"px-6 py-5 max-h-[70vh] overflow-y-auto",children:E})]})]}):null}function ProgressBar({value:u,max:h=100,color:x="primary",showLabel:E=!1,size:j="md",className:g=""}){const N=Math.min(Math.max(u/h*100,0),100),k={primary:"bg-accent-primary",secondary:"bg-text-secondary",success:"bg-accent-success",warning:"bg-accent-warning",danger:"bg-accent-danger",gold:"bg-gradient-to-r from-accent-primaryMuted via-accent-primary to-accent-primaryHover"},A={xs:"h-1",sm:"h-1.5",md:"h-2",lg:"h-3",xl:"h-4"};return jsxRuntimeExports.jsxs("div",{className:`w-full ${g}`,children:[jsxRuntimeExports.jsx("div",{className:`w-full bg-dark-700 rounded-full ${A[j]} overflow-hidden`,children:jsxRuntimeExports.jsx("div",{className:`${k[x]} ${A[j]} rounded-full transition-all duration-500 ease-out`,style:{width:`${N}%`}})}),E&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-1.5 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:u}),jsxRuntimeExports.jsx("span",{className:"text-text-muted",children:h})]})]})}const TABS=[{id:"dashboard",label:"Home",icon:Home,requiresSubscription:!1},{id:"program",label:"Program",icon:Calendar,requiresSubscription:!0},{id:"nutrition",label:"Nutrition",icon:Utensils,requiresSubscription:!0},{id:"stats",label:"Stats",icon:BarChart3,requiresSubscription:!0},{id:"profile",label:"Profile",icon:User,requiresSubscription:!1}];function TabBar({activeTab:u,onChange:h,isSubscribed:x=!0}){return jsxRuntimeExports.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-dark-900/95 backdrop-blur-md border-t border-dark-700 px-2 pt-2 z-50",style:{paddingBottom:"max(0.5rem, env(safe-area-inset-bottom))"},children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:TABS.map(E=>{const j=u===E.id,g=!x&&E.requiresSubscription,N=E.icon;return jsxRuntimeExports.jsxs("button",{onClick:()=>h(E.id),className:`
                flex flex-col items-center px-4 py-2 rounded-xl transition-all duration-200 relative
                ${j?"text-accent-primary":g?"text-dark-500":"text-dark-400 hover:text-text-secondary"}
              `,children:[jsxRuntimeExports.jsxs("div",{className:`
                relative p-1.5 rounded-lg transition-all duration-200
                ${j?"bg-accent-primary/10":""}
              `,children:[jsxRuntimeExports.jsx(N,{className:`w-5 h-5 ${j?"stroke-[2.5]":"stroke-[1.5]"} ${g?"opacity-50":""}`}),j&&!g&&jsxRuntimeExports.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-accent-primary rounded-full"}),g&&jsxRuntimeExports.jsx("div",{className:"absolute -top-1 -right-1 w-3.5 h-3.5 bg-dark-600 rounded-full flex items-center justify-center border border-dark-500",children:jsxRuntimeExports.jsx(Lock,{className:"w-2 h-2 text-accent-warning"})})]}),jsxRuntimeExports.jsx("span",{className:`text-xs mt-1 ${j?"font-semibold":"font-medium"} ${g?"opacity-50":""}`,children:E.label})]},E.id)})})})}function ProgressWidget({profile:u,program:h,meals:x,workouts:E,todaysMeals:j,todaysWorkouts:g}){const N=()=>{let je=null;if(u?.raceDate?je=new Date(u.raceDate):u?.aestheticGoalDate?je=new Date(u.aestheticGoalDate):u?.targetDate&&(je=new Date(u.targetDate)),je){const te=je-new Date,Q=Math.ceil(te/(1e3*60*60*24));return Q>0?Q:null}return null},k=()=>{const je=N(),ue=u?.programType||h?.primaryGoal,te=u?.programSubtype||h?.primarySubtype,Q=h?.currentPhase||"Base",xe=h?.currentWeek||1,ce=h?.mesocycleWeeks||5;if(ue==="endurance"){if(te==="marathon"||te==="running"){const U=u?.raceDistance||"race";return je?`Your ${U} is ${je} days away! Every run gets you closer to the finish line. `:"Building your aerobic base. Consistency beats intensity at this stage!"}return te==="triathlon"?je?`${je} days until race day! Swim, bike, run - you've got this! `:"Training all three disciplines builds an unstoppable athlete.":"Endurance is built one workout at a time. Keep moving forward!"}if(ue==="strength"){const U=u?.strengthGoals?.filter(K=>K.target)||[];return U.length>0?`${U.length} lift targets set. Progressive overload is your path to strength! `:`${Q} phase - building the foundation for serious strength gains.`}if(ue==="aesthetic"){const U=u?.targetBodyFat;return U?`Working toward ${U}% body fat. Trust the process - gains take time! `:"Sculpting takes patience. Your dedication will pay off!"}if(ue==="fatloss"){const U=u?.targetWeight;return U?`On track to ${U} ${u?.weightUnit||"lbs"}. Small daily wins add up! `:"Fat loss is a marathon, not a sprint. Stay consistent!"}return{Base:`Building your foundation in the ${Q} phase. This sets you up for success!`,Build:`${Q} phase - time to push your limits and grow stronger!`,Peak:`${Q} phase - you're at your strongest. Time to perform!`,Deload:"Recovery week - your body adapts and grows during rest. Embrace it!"}[Q]||`Week ${xe} of ${ce} - keep showing up!`},A=()=>{const je=new Date().getDay()||7,ue=h?.weeklySchedule?.find(ce=>ce.day===je),te=ue?.isRestDay,Q=ue?.sessions||[],xe=g?.length||0;return{isRestDay:te,totalSessions:Q.length,completedSessions:xe,sessionNames:Q.map(ce=>ce.focus).join(" + ")}},w=()=>{const je=h?.daysPerWeek||u?.desiredTrainingDays||4,ue=new Date,te=new Date(ue);te.setDate(ue.getDate()-ue.getDay()+1);const Q=E?.filter(xe=>{const ce=new Date(xe.loggedAt||xe.completedAt);return ce>=te&&ce<=ue})||[];return{completed:Q.length,target:je,percentage:Math.min(Q.length/je*100,100)}},M=()=>{const je=u?.macros?.calories||u?.tdee||2e3,ue=j?.reduce((xe,ce)=>xe+(ce.calories||0),0)||0,te=je-ue,Q=ue/je*100;return{consumed:ue,target:je,remaining:Math.max(te,0),percentOfTarget:Q,mealsLogged:j?.length||0}},_=()=>{const je=h?.currentWeek||1,ue=h?.mesocycleWeeks||5;return{currentWeek:je,totalWeeks:ue,percentage:je/ue*100,phase:h?.currentPhase||"Base"}},J=N(),z=A(),O=w(),q=M(),ae=_();return jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-3 border-b border-dark-600",children:jsxRuntimeExports.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"w-5 h-5 text-accent-primary"}),"Daily Summary"]})}),jsxRuntimeExports.jsxs("div",{className:"mx-4 mt-4 p-4 rounded-lg bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30",children:[J&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 text-accent-primary"}),jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-white",children:J}),jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"days to go"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-200",children:k()})]}),jsxRuntimeExports.jsxs("div",{className:"mx-4 mt-4 p-3 rounded-lg bg-dark-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-5 h-5 text-accent-secondary"}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Today"})]}),z.isRestDay?jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:" Rest Day"}):jsxRuntimeExports.jsxs("span",{className:"text-gray-300",children:[z.completedSessions,"/",z.totalSessions," sessions"]})]}),!z.isRestDay&&z.sessionNames&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mt-1 ml-7",children:z.sessionNames})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-4 h-4"}),"This Week"]}),jsxRuntimeExports.jsxs("span",{className:"text-white font-medium",children:[O.completed,"/",O.target," workouts"]})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full rounded-full transition-all duration-500 bg-accent-primary",style:{width:`${O.percentage}%`}})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Utensils,{className:"w-4 h-4"}),"Calories Today"]}),jsxRuntimeExports.jsxs("span",{className:`font-medium ${q.percentOfTarget>100?"text-orange-400":"text-green-400"}`,children:[q.consumed.toLocaleString()," / ",q.target.toLocaleString()]})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${q.percentOfTarget<=100?"bg-green-500":"bg-orange-500"}`,style:{width:`${Math.min(q.percentOfTarget,100)}%`}})}),q.remaining>0&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[q.remaining," kcal remaining"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Flame,{className:"w-4 h-4"}),ae.phase," Phase"]}),jsxRuntimeExports.jsxs("span",{className:"text-white font-medium",children:["Week ",ae.currentWeek," of ",ae.totalWeeks]})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-accent-secondary rounded-full transition-all duration-500",style:{width:`${ae.percentage}%`}})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[jsxRuntimeExports.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:E?.length||0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Total Workouts"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:x?.length||0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Meals Logged"})]})]})]})]})}function ProgramOverview({profile:u,program:h}){const[x,E]=reactExports.useState(!0);if(!h)return null;const{name:j,description:g,totalWeeks:N,currentWeek:k,currentPhase:A,phases:w,athleteLevel:M,daysPerWeek:_,paces:J,baseline:z,progressionRules:O,primaryGoal:q,primarySubtype:ae,secondaryGoal:je,isHybrid:ue,allowDoubleDays:te,weeksUntilGoal:Q}=h,xe=()=>{if(!w||w.length===0)return[];const L=[];let W=null;return w.forEach((me,I)=>{const pe=I+1;!W||W.name!==me?(W&&L.push(W),W={name:me,startWeek:pe,endWeek:pe,weeks:1}):(W.endWeek=pe,W.weeks++)}),W&&L.push(W),L},ce=L=>{const W={Base:{focus:"Building aerobic foundation & movement patterns",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Increasing volume & introducing intensity",intensity:"Moderate",icon:""},"Build 2":{focus:"Peak volume & race-specific workouts",intensity:"Moderate-High",icon:""},Build:{focus:"Increasing mileage & race-specific workouts",intensity:"Moderate-High",icon:""},Peak:{focus:"Sharpening fitness & race simulation",intensity:"High",icon:""},Taper:{focus:"Reducing volume for race readiness",intensity:"Low (recovery)",icon:""},Deload:{focus:"Active recovery & adaptation",intensity:"Low",icon:""}},me={Base:{focus:"Building movement patterns & work capacity",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Progressive overload & strength gains",intensity:"Moderate",icon:""},"Build 2":{focus:"Heavy singles & competition prep",intensity:"Moderate-High",icon:""},Build:{focus:"Progressive overload & strength gains",intensity:"Moderate-High",icon:""},Peak:{focus:"Testing maxes & competition preparation",intensity:"High",icon:""},Taper:{focus:"Reducing volume for max strength",intensity:"Low (maintain)",icon:""},Deload:{focus:"Active recovery & CNS restoration",intensity:"Low",icon:""}},I={Base:{focus:"Building mind-muscle connection & form",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Increasing volume & hypertrophy",intensity:"Moderate",icon:""},"Build 2":{focus:"Peak volume & maximum pump",intensity:"Moderate-High",icon:""},Build:{focus:"Progressive overload & muscle building",intensity:"Moderate-High",icon:""},Peak:{focus:"Maximum intensity & muscle definition",intensity:"High",icon:""},Taper:{focus:"Reducing fatigue for peak aesthetics",intensity:"Low (maintain)",icon:""},Deload:{focus:"Active recovery & muscle repair",intensity:"Low",icon:""}};let pe;return q==="endurance"?pe=W:q==="strength"?pe=me:q==="aesthetic"?pe=I:pe=me,pe[L]||{focus:"Training adaptation",intensity:"Moderate",icon:""}},F=()=>{if(q!=="endurance"||!z?.endurance)return null;const L=z.endurance.currentMileage||20,W=M==="elite"?60:M==="advanced"?50:40,me=[];let I=L;for(let pe=1;pe<=N;pe++)(pe===1||pe===Math.floor(N*.25)||pe===Math.floor(N*.5)||pe===Math.floor(N*.75)||pe===N-2||pe===N)&&me.push({week:pe,mileage:Math.round(I)}),I=Math.min(I*1.05,W);return{starting:L,peak:W,milestones:me}},U=()=>{const W=(h.weeklySchedule||[]).filter(I=>!I.isRestDay),me=W.reduce((I,pe)=>I+(pe.sessions?.reduce((se,ie)=>se+(ie.exercises?.length||0),0)||0),0);return{workoutDays:W.length,totalExercises:me,avgExercisesPerDay:Math.round(me/Math.max(W.length,1))}},K=xe(),ne=F(),be=U();return jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>E(!x),className:"w-full px-4 py-3 border-b border-dark-600 flex items-center justify-between hover:bg-dark-700 transition-colors",children:[jsxRuntimeExports.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[jsxRuntimeExports.jsx(BarChart2,{className:"w-5 h-5 text-accent-primary"}),"Program Overview"]}),x?jsxRuntimeExports.jsx(ChevronUp,{className:"w-5 h-5 text-gray-400"}):jsxRuntimeExports.jsx(ChevronDown,{className:"w-5 h-5 text-gray-400"})]}),x&&jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-5",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:j}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:g}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-xs",children:[jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-full text-gray-300",children:[N," weeks"]}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-full text-gray-300",children:[_," days/week"]}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-accent-primary/30 rounded-full text-accent-primary",children:[M," level"]}),Q&&jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-accent-secondary/30 rounded-full text-accent-secondary",children:[Q," weeks to race"]})]})]}),(ue||ae==="triathlon")&&jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg bg-dark-700 border border-dark-500",children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-white mb-3 flex items-center gap-2",children:[ae==="triathlon"?"":"",ae==="triathlon"?"Triathlon Training Structure":"Hybrid Program Structure"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3 text-sm",children:ae==="triathlon"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:"text-gray-300",children:["This program combines ",jsxRuntimeExports.jsx("span",{className:"text-cyan-400 font-medium",children:"swim"}),","," ",jsxRuntimeExports.jsx("span",{className:"text-orange-400 font-medium",children:"bike"}),", and"," ",jsxRuntimeExports.jsx("span",{className:"text-green-400 font-medium",children:"run"})," training with"," ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary font-medium",children:"injury prevention strength"})," work."]}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 text-gray-400",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{children:"3 strength sessions/week (hip stability, core, shoulders)"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{children:"Double day sessions (AM cardio + PM strength)"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{children:"Brick workouts for race-day transitions"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{children:"Periodized build to peak race fitness"})]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:"text-gray-300",children:["This hybrid program balances ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary font-medium",children:q})," training with ",jsxRuntimeExports.jsx("span",{className:"text-accent-secondary font-medium",children:je})," work for well-rounded athletic development."]}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 text-gray-400",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsxs("span",{children:["Minimum 3 ",je," sessions strategically placed"]})]}),te&&jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{children:"Double days on recovery/easy training days"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{children:"Smart scheduling to avoid interference"})]})]})]})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4"}),"Training Phases"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:K.map((L,W)=>{const me=ce(L.name),I=L.name===A,pe={Base:{border:"border-l-blue-500",bg:"bg-blue-500/5"},Build:{border:"border-l-orange-500",bg:"bg-orange-500/5"},"Build 1":{border:"border-l-orange-500",bg:"bg-orange-500/5"},"Build 2":{border:"border-l-red-500",bg:"bg-red-500/5"},Peak:{border:"border-l-purple-500",bg:"bg-purple-500/5"},Taper:{border:"border-l-cyan-500",bg:"bg-cyan-500/5"},Deload:{border:"border-l-green-500",bg:"bg-green-500/5"}},se=pe[L.name]||pe.Base,ie=()=>{if(L.weeks===1)return`Week ${L.startWeek}`;if(L.weeks<=3){const Ee=[];for(let V=L.startWeek;V<=L.endWeek;V++)Ee.push(V);return`Weeks ${Ee.join(", ")}`}else return`Weeks ${L.startWeek}${L.endWeek}`};return jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${se.border} ${I?"bg-accent-primary/20 border border-l-4 border-accent-primary/50":`${se.bg} border border-dark-600`}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:me.icon}),jsxRuntimeExports.jsx("span",{className:"font-medium text-white",children:L.name}),I&&jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-0.5 bg-accent-primary rounded-full text-white",children:"Current"})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-accent-primary font-medium",children:ie()}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",L.weeks," ",L.weeks===1?"week":"weeks",")"]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:me.focus}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Intensity: ",me.intensity]})]},W)})})]}),ne&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-4 h-4"}),"Weekly Mileage Progression"]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Start"}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Peak"})]}),jsxRuntimeExports.jsxs("div",{className:"relative h-8 bg-dark-600 rounded-full overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-accent-primary to-accent-secondary rounded-full",style:{width:`${ne.starting/ne.peak*100}%`}}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs font-medium text-white",children:[ne.starting," mi"]}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-medium text-white",children:[ne.peak," mi"]})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 grid grid-cols-3 gap-2 text-center",children:ne.milestones.slice(0,3).map((L,W)=>jsxRuntimeExports.jsxs("div",{className:"text-xs",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-500",children:["Wk ",L.week]}),jsxRuntimeExports.jsxs("p",{className:"text-white font-medium",children:[L.mileage," mi"]})]},W))})]})]}),J&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4"}),"Your Training Paces"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{label:"Easy",pace:J.easyPace,zone:"Zone 2"},{label:"Tempo",pace:J.tempoPace,zone:"Zone 3-4"},{label:"Interval",pace:J.intervalPace,zone:"Zone 4-5"},{label:"Long Run",pace:J.longRunPace,zone:"Zone 2"}].map((L,W)=>jsxRuntimeExports.jsxs("div",{className:"p-2 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:L.label}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-white",children:L.pace}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:L.zone})]},W))}),J.currentPace&&J.goalPace!==J.currentPace&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Current: ",J.currentPace,"  Goal: ",J.goalPace]})]}),z?.strength?.lifts?.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-4 h-4"}),"Your Lift Targets"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:z.strength.lifts.map((L,W)=>jsxRuntimeExports.jsxs("div",{className:"p-2 bg-dark-700 rounded-lg flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-white",children:L.exercise}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:[L.current1RM,"lbs"]}),jsxRuntimeExports.jsx("span",{className:"text-gray-500 mx-1",children:""}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-accent-secondary font-medium",children:[L.target1RM,"lbs"]})]})]},W))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),"Weekly Structure"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:be.workoutDays}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Workout Days"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:be.totalExercises}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Exercises/Week"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:7-be.workoutDays}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Rest Days"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4"}),"Program Principles"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[O&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[O.mileageIncrease&&jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-4 h-4 text-accent-warning mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:O.mileageIncrease})]}),O.strengthIncrease&&jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-4 h-4 text-accent-success mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:O.strengthIncrease})]}),O.deloadProtocol&&jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4 text-accent-primary mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:O.deloadProtocol})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[jsxRuntimeExports.jsx(Target,{className:"w-4 h-4 text-accent-secondary mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"RPE-based intensity to auto-regulate based on daily readiness"})]})]})]})]})]})}var Html5QrcodeSupportedFormats;(function(u){u[u.QR_CODE=0]="QR_CODE",u[u.AZTEC=1]="AZTEC",u[u.CODABAR=2]="CODABAR",u[u.CODE_39=3]="CODE_39",u[u.CODE_93=4]="CODE_93",u[u.CODE_128=5]="CODE_128",u[u.DATA_MATRIX=6]="DATA_MATRIX",u[u.MAXICODE=7]="MAXICODE",u[u.ITF=8]="ITF",u[u.EAN_13=9]="EAN_13",u[u.EAN_8=10]="EAN_8",u[u.PDF_417=11]="PDF_417",u[u.RSS_14=12]="RSS_14",u[u.RSS_EXPANDED=13]="RSS_EXPANDED",u[u.UPC_A=14]="UPC_A",u[u.UPC_E=15]="UPC_E",u[u.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Html5QrcodeSupportedFormats||(Html5QrcodeSupportedFormats={}));var html5QrcodeSupportedFormatsTextMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,"QR_CODE"],[Html5QrcodeSupportedFormats.AZTEC,"AZTEC"],[Html5QrcodeSupportedFormats.CODABAR,"CODABAR"],[Html5QrcodeSupportedFormats.CODE_39,"CODE_39"],[Html5QrcodeSupportedFormats.CODE_93,"CODE_93"],[Html5QrcodeSupportedFormats.CODE_128,"CODE_128"],[Html5QrcodeSupportedFormats.DATA_MATRIX,"DATA_MATRIX"],[Html5QrcodeSupportedFormats.MAXICODE,"MAXICODE"],[Html5QrcodeSupportedFormats.ITF,"ITF"],[Html5QrcodeSupportedFormats.EAN_13,"EAN_13"],[Html5QrcodeSupportedFormats.EAN_8,"EAN_8"],[Html5QrcodeSupportedFormats.PDF_417,"PDF_417"],[Html5QrcodeSupportedFormats.RSS_14,"RSS_14"],[Html5QrcodeSupportedFormats.RSS_EXPANDED,"RSS_EXPANDED"],[Html5QrcodeSupportedFormats.UPC_A,"UPC_A"],[Html5QrcodeSupportedFormats.UPC_E,"UPC_E"],[Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),DecodedTextType;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.URL=1]="URL"})(DecodedTextType||(DecodedTextType={}));function isValidHtml5QrcodeSupportedFormats(u){return Object.values(Html5QrcodeSupportedFormats).includes(u)}var Html5QrcodeScanType;(function(u){u[u.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",u[u.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Html5QrcodeScanType||(Html5QrcodeScanType={}));var Html5QrcodeConstants=(function(){function u(){}return u.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",u.SCAN_DEFAULT_FPS=2,u.DEFAULT_DISABLE_FLIP=!1,u.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,u.DEFAULT_SUPPORTED_SCAN_TYPE=[Html5QrcodeScanType.SCAN_TYPE_CAMERA,Html5QrcodeScanType.SCAN_TYPE_FILE],u})(),QrcodeResultFormat=(function(){function u(h,x){this.format=h,this.formatName=x}return u.prototype.toString=function(){return this.formatName},u.create=function(h){if(!html5QrcodeSupportedFormatsTextMap.has(h))throw"".concat(h," not in html5QrcodeSupportedFormatsTextMap");return new u(h,html5QrcodeSupportedFormatsTextMap.get(h))},u})(),Html5QrcodeResultFactory=(function(){function u(){}return u.createFromText=function(h){var x={text:h};return{decodedText:h,result:x}},u.createFromQrcodeResult=function(h){return{decodedText:h.text,result:h}},u})(),Html5QrcodeErrorTypes;(function(u){u[u.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",u[u.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",u[u.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Html5QrcodeErrorTypes||(Html5QrcodeErrorTypes={}));var Html5QrcodeErrorFactory=(function(){function u(){}return u.createFrom=function(h){return{errorMessage:h,type:Html5QrcodeErrorTypes.UNKWOWN_ERROR}},u})(),BaseLoggger=(function(){function u(h){this.verbose=h}return u.prototype.log=function(h){this.verbose&&console.log(h)},u.prototype.warn=function(h){this.verbose&&console.warn(h)},u.prototype.logError=function(h,x){(this.verbose||x===!0)&&console.error(h)},u.prototype.logErrors=function(h){if(h.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(h)},u})();function isNullOrUndefined(u){return typeof u>"u"||u===null}var Html5QrcodeStrings=(function(){function u(){}return u.codeParseError=function(h){return"QR code parse error, error = ".concat(h)},u.errorGettingUserMedia=function(h){return"Error getting userMedia, error = ".concat(h)},u.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},u.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},u.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},u.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},u.scannerPaused=function(){return"Scanner paused"},u})(),VideoConstraintsUtil=(function(){function u(){}return u.isMediaStreamConstraintsValid=function(h,x){if(typeof h!="object"){var E=typeof h;return x.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(E,"."),!0),!1}for(var j=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(j),N=Object.keys(h),k=0,A=N;k<A.length;k++){var w=A[k];if(g.has(w))return x.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},u})(),zxingJs_umd$1={exports:{}},zxingJs_umd=zxingJs_umd$1.exports,hasRequiredZxingJs_umd;function requireZxingJs_umd(){return hasRequiredZxingJs_umd||(hasRequiredZxingJs_umd=1,(function(u,h){(function(x,E){E(h)})(zxingJs_umd,(function(x){function E(R){return R==null}var j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(R,e){R.__proto__=e}||function(R,e){for(var s in e)e.hasOwnProperty(s)&&(R[s]=e[s])};function g(R,e){j(R,e);function s(){this.constructor=R}R.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}function N(R,e){var s=Object.setPrototypeOf;s?s(R,e):R.__proto__=e}function k(R,e){e===void 0&&(e=R.constructor);var s=Error.captureStackTrace;s&&s(R,e)}var A=(function(R){g(e,R);function e(s){var r=this.constructor,i=R.call(this,s)||this;return Object.defineProperty(i,"name",{value:r.name,enumerable:!1}),N(i,r.prototype),k(i),i}return e})(Error);class w extends A{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}w.kind="Exception";class M extends w{}M.kind="ArgumentException";class _ extends w{}_.kind="IllegalArgumentException";class J{constructor(e){if(this.binarizer=e,e===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,s){return this.binarizer.getBlackRow(e,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,s,r,i){const a=this.binarizer.getLuminanceSource().crop(e,s,r,i);return new J(this.binarizer.createBinarizer(a))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new J(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new J(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class z extends w{static getChecksumInstance(){return new z}}z.kind="ChecksumException";class O{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class q{static arraycopy(e,s,r,i,a){for(;a--;)r[i++]=e[s++]}static currentTimeMillis(){return Date.now()}}class ae extends w{}ae.kind="IndexOutOfBoundsException";class je extends ae{constructor(e=void 0,s=void 0){super(s),this.index=e,this.message=s}}je.kind="ArrayIndexOutOfBoundsException";class ue{static fill(e,s){for(let r=0,i=e.length;r<i;r++)e[r]=s}static fillWithin(e,s,r,i){ue.rangeCheck(e.length,s,r);for(let a=s;a<r;a++)e[a]=i}static rangeCheck(e,s,r){if(s>r)throw new _("fromIndex("+s+") > toIndex("+r+")");if(s<0)throw new je(s);if(r>e)throw new je(r)}static asList(...e){return e}static create(e,s,r){return Array.from({length:e}).map(a=>Array.from({length:s}).fill(r))}static createInt32Array(e,s,r){return Array.from({length:e}).map(a=>Int32Array.from({length:s}).fill(r))}static equals(e,s){if(!e||!s||!e.length||!s.length||e.length!==s.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==s[r])return!1;return!0}static hashCode(e){if(e===null)return 0;let s=1;for(const r of e)s=31*s+r;return s}static fillUint8Array(e,s){for(let r=0;r!==e.length;r++)e[r]=s}static copyOf(e,s){return e.slice(0,s)}static copyOfUint8Array(e,s){if(e.length<=s){const r=new Uint8Array(s);return r.set(e),r}return e.slice(0,s)}static copyOfRange(e,s,r){const i=r-s,a=new Int32Array(i);return q.arraycopy(e,s,a,0,i),a}static binarySearch(e,s,r){r===void 0&&(r=ue.numberComparator);let i=0,a=e.length-1;for(;i<=a;){const o=a+i>>1,c=r(s,e[o]);if(c>0)i=o+1;else if(c<0)a=o-1;else return o}return-i-1}static numberComparator(e,s){return e-s}}class te{static numberOfTrailingZeros(e){let s;if(e===0)return 32;let r=31;return s=e<<16,s!==0&&(r-=16,e=s),s=e<<8,s!==0&&(r-=8,e=s),s=e<<4,s!==0&&(r-=4,e=s),s=e<<2,s!==0&&(r-=2,e=s),r-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let s=1;return e>>>16||(s+=16,e<<=16),e>>>24||(s+=8,e<<=8),e>>>28||(s+=4,e<<=4),e>>>30||(s+=2,e<<=2),s-=e>>>31,s}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,s){return Math.trunc(e/s)}static parseInt(e,s=void 0){return parseInt(e,s)}}te.MIN_VALUE_32_BITS=-2147483648,te.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Q{constructor(e,s){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,s==null?this.bits=Q.makeArray(e):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const s=Q.makeArray(e);q.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const s=this.size;if(e>=s)return s;const r=this.bits;let i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);const o=r.length;for(;a===0;){if(++i===o)return s;a=r[i]}const c=i*32+te.numberOfTrailingZeros(a);return c>s?s:c}getNextUnset(e){const s=this.size;if(e>=s)return s;const r=this.bits;let i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);const o=r.length;for(;a===0;){if(++i===o)return s;a=~r[i]}const c=i*32+te.numberOfTrailingZeros(a);return c>s?s:c}setBulk(e,s){this.bits[Math.floor(e/32)]=s}setRange(e,s){if(s<e||e<0||s>this.size)throw new _;if(s===e)return;s--;const r=Math.floor(e/32),i=Math.floor(s/32),a=this.bits;for(let o=r;o<=i;o++){const c=o>r?0:e&31,p=(2<<(o<i?31:s&31))-(1<<c);a[o]|=p}}clear(){const e=this.bits.length,s=this.bits;for(let r=0;r<e;r++)s[r]=0}isRange(e,s,r){if(s<e||e<0||s>this.size)throw new _;if(s===e)return!0;s--;const i=Math.floor(e/32),a=Math.floor(s/32),o=this.bits;for(let c=i;c<=a;c++){const m=c>i?0:e&31,b=(2<<(c<a?31:s&31))-(1<<m)&4294967295;if((o[c]&b)!==(r?b:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,s){if(s<0||s>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let r=s;r>0;r--)this.appendBit((e>>r-1&1)===1)}appendBitArray(e){const s=e.size;this.ensureCapacity(this.size+s);for(let r=0;r<s;r++)this.appendBit(e.get(r))}xor(e){if(this.size!==e.size)throw new _("Sizes don't match");const s=this.bits;for(let r=0,i=s.length;r<i;r++)s[r]^=e.bits[r]}toBytes(e,s,r,i){for(let a=0;a<i;a++){let o=0;for(let c=0;c<8;c++)this.get(e)&&(o|=1<<7-c),e++;s[r+a]=o}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),r=s+1,i=this.bits;for(let a=0;a<r;a++){let o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[s-a]=o}if(this.size!==r*32){const a=r*32-this.size;let o=e[0]>>>a;for(let c=1;c<r;c++){const m=e[c];o|=m<<32-a,e[c-1]=o,o=m>>>a}e[r-1]=o}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof Q))return!1;const s=e;return this.size===s.size&&ue.equals(this.bits,s.bits)}hashCode(){return 31*this.size+ue.hashCode(this.bits)}toString(){let e="";for(let s=0,r=this.size;s<r;s++)(s&7)===0&&(e+=" "),e+=this.get(s)?"X":".";return e}clone(){return new Q(this.size,this.bits.slice())}}var xe;(function(R){R[R.OTHER=0]="OTHER",R[R.PURE_BARCODE=1]="PURE_BARCODE",R[R.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",R[R.TRY_HARDER=3]="TRY_HARDER",R[R.CHARACTER_SET=4]="CHARACTER_SET",R[R.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",R[R.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",R[R.ASSUME_GS1=7]="ASSUME_GS1",R[R.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",R[R.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",R[R.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(xe||(xe={}));var ce=xe;class F extends w{static getFormatInstance(){return new F}}F.kind="FormatException";var U;(function(R){R[R.Cp437=0]="Cp437",R[R.ISO8859_1=1]="ISO8859_1",R[R.ISO8859_2=2]="ISO8859_2",R[R.ISO8859_3=3]="ISO8859_3",R[R.ISO8859_4=4]="ISO8859_4",R[R.ISO8859_5=5]="ISO8859_5",R[R.ISO8859_6=6]="ISO8859_6",R[R.ISO8859_7=7]="ISO8859_7",R[R.ISO8859_8=8]="ISO8859_8",R[R.ISO8859_9=9]="ISO8859_9",R[R.ISO8859_10=10]="ISO8859_10",R[R.ISO8859_11=11]="ISO8859_11",R[R.ISO8859_13=12]="ISO8859_13",R[R.ISO8859_14=13]="ISO8859_14",R[R.ISO8859_15=14]="ISO8859_15",R[R.ISO8859_16=15]="ISO8859_16",R[R.SJIS=16]="SJIS",R[R.Cp1250=17]="Cp1250",R[R.Cp1251=18]="Cp1251",R[R.Cp1252=19]="Cp1252",R[R.Cp1256=20]="Cp1256",R[R.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",R[R.UTF8=22]="UTF8",R[R.ASCII=23]="ASCII",R[R.Big5=24]="Big5",R[R.GB18030=25]="GB18030",R[R.EUC_KR=26]="EUC_KR"})(U||(U={}));class K{constructor(e,s,r,...i){this.valueIdentifier=e,this.name=r,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=i,K.VALUE_IDENTIFIER_TO_ECI.set(e,this),K.NAME_TO_ECI.set(r,this);const a=this.values;for(let o=0,c=a.length;o!==c;o++){const m=a[o];K.VALUES_TO_ECI.set(m,this)}for(const o of i)K.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new F("incorect value");const s=K.VALUES_TO_ECI.get(e);if(s===void 0)throw new F("incorect value");return s}static getCharacterSetECIByName(e){const s=K.NAME_TO_ECI.get(e);if(s===void 0)throw new F("incorect value");return s}equals(e){if(!(e instanceof K))return!1;const s=e;return this.getName()===s.getName()}}K.VALUE_IDENTIFIER_TO_ECI=new Map,K.VALUES_TO_ECI=new Map,K.NAME_TO_ECI=new Map,K.Cp437=new K(U.Cp437,Int32Array.from([0,2]),"Cp437"),K.ISO8859_1=new K(U.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),K.ISO8859_2=new K(U.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),K.ISO8859_3=new K(U.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),K.ISO8859_4=new K(U.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),K.ISO8859_5=new K(U.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),K.ISO8859_6=new K(U.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),K.ISO8859_7=new K(U.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),K.ISO8859_8=new K(U.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),K.ISO8859_9=new K(U.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),K.ISO8859_10=new K(U.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),K.ISO8859_11=new K(U.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),K.ISO8859_13=new K(U.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),K.ISO8859_14=new K(U.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),K.ISO8859_15=new K(U.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),K.ISO8859_16=new K(U.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),K.SJIS=new K(U.SJIS,20,"SJIS","Shift_JIS"),K.Cp1250=new K(U.Cp1250,21,"Cp1250","windows-1250"),K.Cp1251=new K(U.Cp1251,22,"Cp1251","windows-1251"),K.Cp1252=new K(U.Cp1252,23,"Cp1252","windows-1252"),K.Cp1256=new K(U.Cp1256,24,"Cp1256","windows-1256"),K.UnicodeBigUnmarked=new K(U.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),K.UTF8=new K(U.UTF8,26,"UTF8","UTF-8"),K.ASCII=new K(U.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),K.Big5=new K(U.Big5,28,"Big5"),K.GB18030=new K(U.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),K.EUC_KR=new K(U.EUC_KR,30,"EUC_KR","EUC-KR");class ne extends w{}ne.kind="UnsupportedOperationException";class be{static decode(e,s){const r=this.encodingName(s);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)}static shouldDecodeOnFallback(e){return!be.isBrowser()&&e==="ISO-8859-1"}static encode(e,s){const r=this.encodingName(s);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof K?e:K.getCharacterSetECIByName(e)}static decodeFallback(e,s){const r=this.encodingCharacterSet(s);if(be.isDecodeFallbackSupported(r)){let i="";for(let a=0,o=e.length;a<o;a++){let c=e[a].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(K.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new ne(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(K.UTF8)||e.equals(K.ISO8859_1)||e.equals(K.ASCII)}static encodeFallback(e){const r=btoa(unescape(encodeURIComponent(e))).split(""),i=[];for(let a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)}}class L{static castAsNonUtf8Char(e,s=null){const r=s?s.getName():this.ISO88591;return be.decode(new Uint8Array([e]),r)}static guessEncoding(e,s){if(s!=null&&s.get(ce.CHARACTER_SET)!==void 0)return s.get(ce.CHARACTER_SET).toString();const r=e.length;let i=!0,a=!0,o=!0,c=0,m=0,p=0,b=0,v=0,S=0,P=0,H=0,Z=0,re=0,he=0;const ke=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Ie=0;Ie<r&&(i||a||o);Ie++){const ve=e[Ie]&255;o&&(c>0?(ve&128)===0?o=!1:c--:(ve&128)!==0&&((ve&64)===0?o=!1:(c++,(ve&32)===0?m++:(c++,(ve&16)===0?p++:(c++,(ve&8)===0?b++:o=!1))))),i&&(ve>127&&ve<160?i=!1:ve>159&&(ve<192||ve===215||ve===247)&&he++),a&&(v>0?ve<64||ve===127||ve>252?a=!1:v--:ve===128||ve===160||ve>239?a=!1:ve>160&&ve<224?(S++,H=0,P++,P>Z&&(Z=P)):ve>127?(v++,P=0,H++,H>re&&(re=H)):(P=0,H=0))}return o&&c>0&&(o=!1),a&&v>0&&(a=!1),o&&(ke||m+p+b>0)?L.UTF8:a&&(L.ASSUME_SHIFT_JIS||Z>=3||re>=3)?L.SHIFT_JIS:i&&a?Z===2&&S===2||he*10>=r?L.SHIFT_JIS:L.ISO88591:i?L.ISO88591:a?L.SHIFT_JIS:o?L.UTF8:L.PLATFORM_DEFAULT_ENCODING}static format(e,...s){let r=-1;function i(o,c,m,p,b,v){if(o==="%%")return"%";if(s[++r]===void 0)return;o=p?parseInt(p.substr(1)):void 0;let S=b?parseInt(b.substr(1)):void 0,P;switch(v){case"s":P=s[r];break;case"c":P=s[r][0];break;case"f":P=parseFloat(s[r]).toFixed(o);break;case"p":P=parseFloat(s[r]).toPrecision(o);break;case"e":P=parseFloat(s[r]).toExponential(o);break;case"x":P=parseInt(s[r]).toString(S||16);break;case"d":P=parseFloat(parseInt(s[r],S||10).toPrecision(o)).toFixed(0);break}P=typeof P=="object"?JSON.stringify(P):(+P).toString(S);let H=parseInt(m),Z=m&&m[0]+""=="0"?"0":" ";for(;P.length<H;)P=c!==void 0?P+Z:Z+P;return P}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)}static getBytes(e,s){return be.encode(e,s)}static getCharCode(e,s=0){return e.charCodeAt(s)}static getCharAt(e){return String.fromCharCode(e)}}L.SHIFT_JIS=K.SJIS.getName(),L.GB2312="GB2312",L.ISO88591=K.ISO8859_1.getName(),L.EUC_JP="EUC_JP",L.UTF8=K.UTF8.getName(),L.PLATFORM_DEFAULT_ENCODING=L.UTF8,L.ASSUME_SHIFT_JIS=!1;class W{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=L.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,s,r){for(let i=s;s<s+r;i++)this.append(e[i]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,s){this.value=this.value.substr(0,e)+s+this.value.substr(e+1)}substring(e,s){return this.value.substring(e,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,s){this.value=this.value.substr(0,e)+s+this.value.substr(e+s.length)}}class me{constructor(e,s,r,i){if(this.width=e,this.height=s,this.rowSize=r,this.bits=i,s==null&&(s=e),this.height=s,e<1||s<1)throw new _("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const s=e.length,r=e[0].length,i=new me(r,s);for(let a=0;a<s;a++){const o=e[a];for(let c=0;c<r;c++)o[c]&&i.set(c,a)}return i}static parseFromString(e,s,r){if(e===null)throw new _("stringRepresentation cannot be null");const i=new Array(e.length);let a=0,o=0,c=-1,m=0,p=0;for(;p<e.length;)if(e.charAt(p)===`
`||e.charAt(p)==="\r"){if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new _("row lengths do not match");o=a,m++}p++}else if(e.substring(p,p+s.length)===s)p+=s.length,i[a]=!0,a++;else if(e.substring(p,p+r.length)===r)p+=r.length,i[a]=!1,a++;else throw new _("illegal character encountered: "+e.substring(p));if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new _("row lengths do not match");m++}const b=new me(c,m);for(let v=0;v<a;v++)i[v]&&b.set(Math.floor(v%c),Math.floor(v/c));return b}get(e,s){const r=s*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0}set(e,s){const r=s*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295}unset(e,s){const r=s*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)}flip(e,s){const r=s*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new _("input matrix dimensions do not match");const s=new Q(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits;for(let a=0,o=this.height;a<o;a++){const c=a*r,m=e.getRow(a,s).getBitArray();for(let p=0;p<r;p++)i[c+p]^=m[p]}}clear(){const e=this.bits,s=e.length;for(let r=0;r<s;r++)e[r]=0}setRegion(e,s,r,i){if(s<0||e<0)throw new _("Left and top must be nonnegative");if(i<1||r<1)throw new _("Height and width must be at least 1");const a=e+r,o=s+i;if(o>this.height||a>this.width)throw new _("The region must fit inside the matrix");const c=this.rowSize,m=this.bits;for(let p=s;p<o;p++){const b=p*c;for(let v=e;v<a;v++)m[b+Math.floor(v/32)]|=1<<(v&31)&4294967295}}getRow(e,s){s==null||s.getSize()<this.width?s=new Q(this.width):s.clear();const r=this.rowSize,i=this.bits,a=e*r;for(let o=0;o<r;o++)s.setBulk(o*32,i[a+o]);return s}setRow(e,s){q.arraycopy(s.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),s=this.getHeight();let r=new Q(e),i=new Q(e);for(let a=0,o=Math.floor((s+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(s-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(s-1-a,r)}getEnclosingRectangle(){const e=this.width,s=this.height,r=this.rowSize,i=this.bits;let a=e,o=s,c=-1,m=-1;for(let p=0;p<s;p++)for(let b=0;b<r;b++){const v=i[p*r+b];if(v!==0){if(p<o&&(o=p),p>m&&(m=p),b*32<a){let S=0;for(;(v<<31-S&4294967295)===0;)S++;b*32+S<a&&(a=b*32+S)}if(b*32+31>c){let S=31;for(;!(v>>>S);)S--;b*32+S>c&&(c=b*32+S)}}}return c<a||m<o?null:Int32Array.from([a,o,c-a+1,m-o+1])}getTopLeftOnBit(){const e=this.rowSize,s=this.bits;let r=0;for(;r<s.length&&s[r]===0;)r++;if(r===s.length)return null;const i=r/e;let a=r%e*32;const o=s[r];let c=0;for(;(o<<31-c&4294967295)===0;)c++;return a+=c,Int32Array.from([a,i])}getBottomRightOnBit(){const e=this.rowSize,s=this.bits;let r=s.length-1;for(;r>=0&&s[r]===0;)r--;if(r<0)return null;const i=Math.floor(r/e);let a=Math.floor(r%e)*32;const o=s[r];let c=31;for(;!(o>>>c);)c--;return a+=c,Int32Array.from([a,i])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof me))return!1;const s=e;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&ue.equals(this.bits,s.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ue.hashCode(this.bits),e}toString(e="X ",s="  ",r=`
`){return this.buildToString(e,s,r)}buildToString(e,s,r){let i=new W;for(let a=0,o=this.height;a<o;a++){for(let c=0,m=this.width;c<m;c++)i.append(this.get(c,a)?e:s);i.append(r)}return i.toString()}clone(){return new me(this.width,this.height,this.rowSize,this.bits.slice())}}class I extends w{static getNotFoundInstance(){return new I}}I.kind="NotFoundException";class pe extends O{constructor(e){super(e),this.luminances=pe.EMPTY,this.buckets=new Int32Array(pe.LUMINANCE_BUCKETS)}getBlackRow(e,s){const r=this.getLuminanceSource(),i=r.getWidth();s==null||s.getSize()<i?s=new Q(i):s.clear(),this.initArrays(i);const a=r.getRow(e,this.luminances),o=this.buckets;for(let m=0;m<i;m++)o[(a[m]&255)>>pe.LUMINANCE_SHIFT]++;const c=pe.estimateBlackPoint(o);if(i<3)for(let m=0;m<i;m++)(a[m]&255)<c&&s.set(m);else{let m=a[0]&255,p=a[1]&255;for(let b=1;b<i-1;b++){const v=a[b+1]&255;(p*4-m-v)/2<c&&s.set(b),m=p,p=v}}return s}getBlackMatrix(){const e=this.getLuminanceSource(),s=e.getWidth(),r=e.getHeight(),i=new me(s,r);this.initArrays(s);const a=this.buckets;for(let m=1;m<5;m++){const p=Math.floor(r*m/5),b=e.getRow(p,this.luminances),v=Math.floor(s*4/5);for(let S=Math.floor(s/5);S<v;S++){const P=b[S]&255;a[P>>pe.LUMINANCE_SHIFT]++}}const o=pe.estimateBlackPoint(a),c=e.getMatrix();for(let m=0;m<r;m++){const p=m*s;for(let b=0;b<s;b++)(c[p+b]&255)<o&&i.set(b,m)}return i}createBinarizer(e){return new pe(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const s=this.buckets;for(let r=0;r<pe.LUMINANCE_BUCKETS;r++)s[r]=0}static estimateBlackPoint(e){const s=e.length;let r=0,i=0,a=0;for(let b=0;b<s;b++)e[b]>a&&(i=b,a=e[b]),e[b]>r&&(r=e[b]);let o=0,c=0;for(let b=0;b<s;b++){const v=b-i,S=e[b]*v*v;S>c&&(o=b,c=S)}if(i>o){const b=i;i=o,o=b}if(o-i<=s/16)throw new I;let m=o-1,p=-1;for(let b=o-1;b>i;b--){const v=b-i,S=v*v*(o-b)*(r-e[b]);S>p&&(m=b,p=S)}return m<<pe.LUMINANCE_SHIFT}}pe.LUMINANCE_BITS=5,pe.LUMINANCE_SHIFT=8-pe.LUMINANCE_BITS,pe.LUMINANCE_BUCKETS=1<<pe.LUMINANCE_BITS,pe.EMPTY=Uint8ClampedArray.from([0]);class se extends pe{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),s=e.getWidth(),r=e.getHeight();if(s>=se.MINIMUM_DIMENSION&&r>=se.MINIMUM_DIMENSION){const i=e.getMatrix();let a=s>>se.BLOCK_SIZE_POWER;(s&se.BLOCK_SIZE_MASK)!==0&&a++;let o=r>>se.BLOCK_SIZE_POWER;(r&se.BLOCK_SIZE_MASK)!==0&&o++;const c=se.calculateBlackPoints(i,a,o,s,r),m=new me(s,r);se.calculateThresholdForBlock(i,a,o,s,r,c,m),this.matrix=m}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new se(e)}static calculateThresholdForBlock(e,s,r,i,a,o,c){const m=a-se.BLOCK_SIZE,p=i-se.BLOCK_SIZE;for(let b=0;b<r;b++){let v=b<<se.BLOCK_SIZE_POWER;v>m&&(v=m);const S=se.cap(b,2,r-3);for(let P=0;P<s;P++){let H=P<<se.BLOCK_SIZE_POWER;H>p&&(H=p);const Z=se.cap(P,2,s-3);let re=0;for(let ke=-2;ke<=2;ke++){const Ie=o[S+ke];re+=Ie[Z-2]+Ie[Z-1]+Ie[Z]+Ie[Z+1]+Ie[Z+2]}const he=re/25;se.thresholdBlock(e,H,v,he,i,c)}}}static cap(e,s,r){return e<s?s:e>r?r:e}static thresholdBlock(e,s,r,i,a,o){for(let c=0,m=r*a+s;c<se.BLOCK_SIZE;c++,m+=a)for(let p=0;p<se.BLOCK_SIZE;p++)(e[m+p]&255)<=i&&o.set(s+p,r+c)}static calculateBlackPoints(e,s,r,i,a){const o=a-se.BLOCK_SIZE,c=i-se.BLOCK_SIZE,m=new Array(r);for(let p=0;p<r;p++){m[p]=new Int32Array(s);let b=p<<se.BLOCK_SIZE_POWER;b>o&&(b=o);for(let v=0;v<s;v++){let S=v<<se.BLOCK_SIZE_POWER;S>c&&(S=c);let P=0,H=255,Z=0;for(let he=0,ke=b*i+S;he<se.BLOCK_SIZE;he++,ke+=i){for(let Ie=0;Ie<se.BLOCK_SIZE;Ie++){const ve=e[ke+Ie]&255;P+=ve,ve<H&&(H=ve),ve>Z&&(Z=ve)}if(Z-H>se.MIN_DYNAMIC_RANGE)for(he++,ke+=i;he<se.BLOCK_SIZE;he++,ke+=i)for(let Ie=0;Ie<se.BLOCK_SIZE;Ie++)P+=e[ke+Ie]&255}let re=P>>se.BLOCK_SIZE_POWER*2;if(Z-H<=se.MIN_DYNAMIC_RANGE&&(re=H/2,p>0&&v>0)){const he=(m[p-1][v]+2*m[p][v-1]+m[p-1][v-1])/4;H<he&&(re=he)}m[p][v]=re}}return m}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class ie{constructor(e,s){this.width=e,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,s,r,i){throw new ne("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ne("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ne("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let s=new W;for(let r=0;r<this.height;r++){const i=this.getRow(r,e);for(let a=0;a<this.width;a++){const o=i[a]&255;let c;o<64?c="#":o<128?c="+":o<192?c=".":c=" ",s.append(c)}s.append(`
`)}return s.toString()}}class Ee extends ie{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,s){const r=this.delegate.getRow(e,s),i=this.getWidth();for(let a=0;a<i;a++)r[a]=255-(r[a]&255);return r}getMatrix(){const e=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(s);for(let i=0;i<s;i++)r[i]=255-(e[i]&255);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(e,s,r,i){return new Ee(this.delegate.crop(e,s,r,i))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ee(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ee(this.delegate.rotateCounterClockwise45())}}class V extends ie{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=V.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const s=e.getContext("2d").getImageData(0,0,e.width,e.height);return V.toGrayscaleBuffer(s.data,e.width,e.height)}static toGrayscaleBuffer(e,s,r){const i=new Uint8ClampedArray(s*r);for(let a=0,o=0,c=e.length;a<c;a+=4,o++){let m;if(e[a+3]===0)m=255;else{const b=e[a],v=e[a+1],S=e[a+2];m=306*b+601*v+117*S+512>>10}i[o]=m}return i}getRow(e,s){if(e<0||e>=this.getHeight())throw new _("Requested row is outside the image: "+e);const r=this.getWidth(),i=e*r;return s===null?s=this.buffer.slice(i,i+r):(s.length<r&&(s=new Uint8ClampedArray(r)),s.set(this.buffer.slice(i,i+r))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,s,r,i){return super.crop(e,s,r,i),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const s=this.getTempCanvasElement(),r=s.getContext("2d"),i=e*V.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*o),m=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*o);return s.width=c,s.height=m,r.translate(c/2,m/2),r.rotate(i),r.drawImage(this.canvas,a/-2,o/-2),this.buffer=V.makeBufferFromCanvasImageData(s),this}invert(){return new Ee(this)}}V.DEGREE_TO_RADIANS=Math.PI/180;class D{constructor(e,s,r){this.deviceId=e,this.label=s,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var G=(globalThis||commonjsGlobal||self||window||void 0)&&(globalThis||commonjsGlobal||self||window||void 0).__awaiter||function(R,e,s,r){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function c(b){try{p(r.next(b))}catch(v){o(v)}}function m(b){try{p(r.throw(b))}catch(v){o(v)}}function p(b){b.done?a(b.value):i(b.value).then(c,m)}p((r=r.apply(R,e||[])).next())})};class Te{constructor(e,s=500,r){this.reader=e,this.timeBetweenScansMillis=s,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return G(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const r of e){const i=r.kind==="video"?"videoinput":r.kind;if(i!=="videoinput")continue;const a=r.deviceId||r.id,o=r.label||`Video device ${s.length+1}`,c=r.groupId,m={deviceId:a,label:o,kind:i,groupId:c};s.push(m)}return s})}getVideoInputDevices(){return G(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new D(s.deviceId,s.label))})}findDeviceById(e){return G(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(r=>r.deviceId===e):null})}decodeFromInputVideoDevice(e,s){return G(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,s)})}decodeOnceFromVideoDevice(e,s){return G(this,void 0,void 0,function*(){this.reset();let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const i={video:r};return yield this.decodeOnceFromConstraints(i,s)})}decodeOnceFromConstraints(e,s){return G(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(r,s)})}decodeOnceFromStream(e,s){return G(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,s);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(e,s,r){return G(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,s,r)})}decodeFromVideoDevice(e,s,r){return G(this,void 0,void 0,function*(){let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const a={video:i};return yield this.decodeFromConstraints(a,s,r)})}decodeFromConstraints(e,s,r){return G(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(i,s,r)})}decodeFromStream(e,s,r){return G(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,s);return yield this.decodeContinuously(i,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,s){return G(this,void 0,void 0,function*(){const r=this.prepareVideoElement(s);return this.addVideoSource(r,e),this.videoElement=r,this.stream=e,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(e){return new Promise((s,r)=>this.playVideoOnLoad(e,()=>s()))}playVideoOnLoad(e,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",s),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return G(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,s){const r=document.getElementById(e);if(!r)throw new M(`element with id '${e}' not found`);if(r.nodeName.toLowerCase()!==s.toLowerCase())throw new M(`element with id '${e}' must be an ${s} element`);return r}decodeFromImage(e,s){if(!e&&!s)throw new M("either imageElement with a src set or an url must be provided");return s&&!e?this.decodeFromImageUrl(s):this.decodeFromImageElement(e)}decodeFromVideo(e,s){if(!e&&!s)throw new M("Either an element with a src set or an URL must be provided");return s&&!e?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,s,r){if(e===void 0&&s===void 0)throw new M("Either an element with a src set or an URL must be provided");return s&&!e?this.decodeFromVideoUrlContinuously(s,r):this.decodeFromVideoElementContinuously(e,r)}decodeFromImageElement(e){if(!e)throw new M("An image element must be provided.");this.reset();const s=this.prepareImageElement(e);this.imageElement=s;let r;return this.isImageLoaded(s)?r=this.decodeOnce(s,!1,!0):r=this._decodeOnLoadImage(s),r}decodeFromVideoElement(e){const s=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(e,s){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,s)}_decodeFromVideoElementSetup(e){if(!e)throw new M("A video element must be provided.");this.reset();const s=this.prepareVideoElement(e);return this.videoElement=s,s}decodeFromImageUrl(e){if(!e)throw new M("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const r=this._decodeOnLoadImage(s);return s.src=e,r}decodeFromVideoUrl(e){if(!e)throw new M("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),r=this.decodeFromVideoElement(s);return s.src=e,r}decodeFromVideoUrlContinuously(e,s){if(!e)throw new M("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,s);return r.src=e,i}_decodeOnLoadImage(e){return new Promise((s,r)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(s,r),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return G(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,s){return G(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,s)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let s;return typeof e>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof e=="string"&&(s=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(s=e),s}prepareVideoElement(e){let s;return!e&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof e=="string"&&(s=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(s=e),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(e,s=!0,r=!0){this._stopAsyncDecode=!1;const i=(a,o)=>{if(this._stopAsyncDecode){o(new I("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const c=this.decode(e);a(c)}catch(c){const m=s&&c instanceof I,b=(c instanceof z||c instanceof F)&&r;if(m||b)return setTimeout(i,this._timeBetweenDecodingAttempts,a,o);o(c)}};return new Promise((a,o)=>i(a,o))}decodeContinuously(e,s){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const i=this.decode(e);s(i,null),setTimeout(r,this.timeBetweenScansMillis)}catch(i){s(null,i);const a=i instanceof z||i instanceof F,o=i instanceof I;(a||o)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(e){const s=this.createBinaryBitmap(e);return this.decodeBitmap(s)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,s,r){s||(s={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(e,s,r=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const s=this.getCaptureCanvas(e),r=new V(s),i=new se(r);return new J(i)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const r=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=r}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const s=this.createCaptureCanvas(e);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),s.style.width=r+"px",s.style.height=i+"px",s.width=r,s.height=i,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,s){try{e.srcObject=s}catch{e.src=URL.createObjectURL(s)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class ee{constructor(e,s,r=s==null?0:8*s.length,i,a,o=q.currentTimeMillis()){this.text=e,this.rawBytes=s,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=s,r==null?this.numBits=s==null?0:8*s.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=q.currentTimeMillis():this.timestamp=o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,s)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const s=this.resultPoints;if(s===null)this.resultPoints=e;else if(e!==null&&e.length>0){const r=new Array(s.length+e.length);q.arraycopy(s,0,r,0,s.length),q.arraycopy(e,0,r,s.length,e.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ae;(function(R){R[R.AZTEC=0]="AZTEC",R[R.CODABAR=1]="CODABAR",R[R.CODE_39=2]="CODE_39",R[R.CODE_93=3]="CODE_93",R[R.CODE_128=4]="CODE_128",R[R.DATA_MATRIX=5]="DATA_MATRIX",R[R.EAN_8=6]="EAN_8",R[R.EAN_13=7]="EAN_13",R[R.ITF=8]="ITF",R[R.MAXICODE=9]="MAXICODE",R[R.PDF_417=10]="PDF_417",R[R.QR_CODE=11]="QR_CODE",R[R.RSS_14=12]="RSS_14",R[R.RSS_EXPANDED=13]="RSS_EXPANDED",R[R.UPC_A=14]="UPC_A",R[R.UPC_E=15]="UPC_E",R[R.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ae||(Ae={}));var ye=Ae,Ge;(function(R){R[R.OTHER=0]="OTHER",R[R.ORIENTATION=1]="ORIENTATION",R[R.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",R[R.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",R[R.ISSUE_NUMBER=4]="ISSUE_NUMBER",R[R.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",R[R.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",R[R.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",R[R.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",R[R.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",R[R.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ge||(Ge={}));var Le=Ge;class Ue{constructor(e,s,r,i,a=-1,o=-1){this.rawBytes=e,this.text=s,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class $e{exp(e){return this.expTable[e]}log(e){if(e===0)throw new _;return this.logTable[e]}static addOrSubtract(e,s){return e^s}}class dt{constructor(e,s){if(s.length===0)throw new _;this.field=e;const r=s.length;if(r>1&&s[0]===0){let i=1;for(;i<r&&s[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),q.arraycopy(s,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const s=this.coefficients;let r;if(e===1){r=0;for(let o=0,c=s.length;o!==c;o++){const m=s[o];r=$e.addOrSubtract(r,m)}return r}r=s[0];const i=s.length,a=this.field;for(let o=1;o<i;o++)r=$e.addOrSubtract(a.multiply(e,r),s[o]);return r}addOrSubtract(e){if(!this.field.equals(e.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let s=this.coefficients,r=e.coefficients;if(s.length>r.length){const o=s;s=r,r=o}let i=new Int32Array(r.length);const a=r.length-s.length;q.arraycopy(r,0,i,0,a);for(let o=a;o<r.length;o++)i[o]=$e.addOrSubtract(s[o-a],r[o]);return new dt(this.field,i)}multiply(e){if(!this.field.equals(e.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const s=this.coefficients,r=s.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=this.field;for(let m=0;m<r;m++){const p=s[m];for(let b=0;b<a;b++)o[m+b]=$e.addOrSubtract(o[m+b],c.multiply(p,i[b]))}return new dt(c,o)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const s=this.coefficients.length,r=this.field,i=new Int32Array(s),a=this.coefficients;for(let o=0;o<s;o++)i[o]=r.multiply(a[o],e);return new dt(r,i)}multiplyByMonomial(e,s){if(e<0)throw new _;if(s===0)return this.field.getZero();const r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field;for(let c=0;c<i;c++)a[c]=o.multiply(r[c],s);return new dt(o,a)}divide(e){if(!this.field.equals(e.field))throw new _("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new _("Divide by 0");const s=this.field;let r=s.getZero(),i=this;const a=e.getCoefficient(e.getDegree()),o=s.inverse(a);for(;i.getDegree()>=e.getDegree()&&!i.isZero();){const c=i.getDegree()-e.getDegree(),m=s.multiply(i.getCoefficient(i.getDegree()),o),p=e.multiplyByMonomial(c,m),b=s.buildMonomial(c,m);r=r.addOrSubtract(b),i=i.addOrSubtract(p)}return[r,i]}toString(){let e="";for(let s=this.getDegree();s>=0;s--){let r=this.getCoefficient(s);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),s===0||r!==1){const i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}s!==0&&(s===1?e+="x":(e+="x^",e+=s))}}return e}}class Cs extends w{}Cs.kind="ArithmeticException";class rt extends $e{constructor(e,s,r){super(),this.primitive=e,this.size=s,this.generatorBase=r;const i=new Int32Array(s);let a=1;for(let c=0;c<s;c++)i[c]=a,a*=2,a>=s&&(a^=e,a&=s-1);this.expTable=i;const o=new Int32Array(s);for(let c=0;c<s-1;c++)o[i[c]]=c;this.logTable=o,this.zero=new dt(this,Int32Array.from([0])),this.one=new dt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,s){if(e<0)throw new _;if(s===0)return this.zero;const r=new Int32Array(e+1);return r[0]=s,new dt(this,r)}inverse(e){if(e===0)throw new Cs;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,s){return e===0||s===0?0:this.expTable[(this.logTable[e]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+te.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}rt.AZTEC_DATA_12=new rt(4201,4096,1),rt.AZTEC_DATA_10=new rt(1033,1024,1),rt.AZTEC_DATA_6=new rt(67,64,1),rt.AZTEC_PARAM=new rt(19,16,1),rt.QR_CODE_FIELD_256=new rt(285,256,0),rt.DATA_MATRIX_FIELD_256=new rt(301,256,1),rt.AZTEC_DATA_8=rt.DATA_MATRIX_FIELD_256,rt.MAXICODE_FIELD_64=rt.AZTEC_DATA_6;class fs extends w{}fs.kind="ReedSolomonException";class rs extends w{}rs.kind="IllegalStateException";class cs{constructor(e){this.field=e}decode(e,s){const r=this.field,i=new dt(r,e),a=new Int32Array(s);let o=!0;for(let P=0;P<s;P++){const H=i.evaluateAt(r.exp(P+r.getGeneratorBase()));a[a.length-1-P]=H,H!==0&&(o=!1)}if(o)return;const c=new dt(r,a),m=this.runEuclideanAlgorithm(r.buildMonomial(s,1),c,s),p=m[0],b=m[1],v=this.findErrorLocations(p),S=this.findErrorMagnitudes(b,v);for(let P=0;P<v.length;P++){const H=e.length-1-r.log(v[P]);if(H<0)throw new fs("Bad error location");e[H]=rt.addOrSubtract(e[H],S[P])}}runEuclideanAlgorithm(e,s,r){if(e.getDegree()<s.getDegree()){const P=e;e=s,s=P}const i=this.field;let a=e,o=s,c=i.getZero(),m=i.getOne();for(;o.getDegree()>=(r/2|0);){let P=a,H=c;if(a=o,c=m,a.isZero())throw new fs("r_{i-1} was zero");o=P;let Z=i.getZero();const re=a.getCoefficient(a.getDegree()),he=i.inverse(re);for(;o.getDegree()>=a.getDegree()&&!o.isZero();){const ke=o.getDegree()-a.getDegree(),Ie=i.multiply(o.getCoefficient(o.getDegree()),he);Z=Z.addOrSubtract(i.buildMonomial(ke,Ie)),o=o.addOrSubtract(a.multiplyByMonomial(ke,Ie))}if(m=Z.multiply(c).addOrSubtract(H),o.getDegree()>=a.getDegree())throw new rs("Division algorithm failed to reduce polynomial?")}const p=m.getCoefficient(0);if(p===0)throw new fs("sigmaTilde(0) was zero");const b=i.inverse(p),v=m.multiplyScalar(b),S=o.multiplyScalar(b);return[v,S]}findErrorLocations(e){const s=e.getDegree();if(s===1)return Int32Array.from([e.getCoefficient(1)]);const r=new Int32Array(s);let i=0;const a=this.field;for(let o=1;o<a.getSize()&&i<s;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==s)throw new fs("Error locator degree does not match number of roots");return r}findErrorMagnitudes(e,s){const r=s.length,i=new Int32Array(r),a=this.field;for(let o=0;o<r;o++){const c=a.inverse(s[o]);let m=1;for(let p=0;p<r;p++)if(o!==p){const b=a.multiply(s[p],c),v=(b&1)===0?b|1:b&-2;m=a.multiply(m,v)}i[o]=a.multiply(e.evaluateAt(c),a.inverse(m)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],c))}return i}}var Tt;(function(R){R[R.UPPER=0]="UPPER",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.DIGIT=3]="DIGIT",R[R.PUNCT=4]="PUNCT",R[R.BINARY=5]="BINARY"})(Tt||(Tt={}));class ft{decode(e){this.ddata=e;let s=e.getBits(),r=this.extractBits(s),i=this.correctBits(r),a=ft.convertBoolArrayToByteArray(i),o=ft.getEncodedData(i),c=new Ue(a,o,null,null);return c.setNumBits(i.length),c}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let s=e.length,r=Tt.UPPER,i=Tt.UPPER,a="",o=0;for(;o<s;)if(i===Tt.BINARY){if(s-o<5)break;let c=ft.readCode(e,o,5);if(o+=5,c===0){if(s-o<11)break;c=ft.readCode(e,o,11)+31,o+=11}for(let m=0;m<c;m++){if(s-o<8){o=s;break}const p=ft.readCode(e,o,8);a+=L.castAsNonUtf8Char(p),o+=8}i=r}else{let c=i===Tt.DIGIT?4:5;if(s-o<c)break;let m=ft.readCode(e,o,c);o+=c;let p=ft.getCharacter(i,m);p.startsWith("CTRL_")?(r=i,i=ft.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a}static getTable(e){switch(e){case"L":return Tt.LOWER;case"P":return Tt.PUNCT;case"M":return Tt.MIXED;case"D":return Tt.DIGIT;case"B":return Tt.BINARY;default:return Tt.UPPER}}static getCharacter(e,s){switch(e){case Tt.UPPER:return ft.UPPER_TABLE[s];case Tt.LOWER:return ft.LOWER_TABLE[s];case Tt.MIXED:return ft.MIXED_TABLE[s];case Tt.PUNCT:return ft.PUNCT_TABLE[s];case Tt.DIGIT:return ft.DIGIT_TABLE[s];default:throw new rs("Bad table")}}correctBits(e){let s,r;this.ddata.getNbLayers()<=2?(r=6,s=rt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,s=rt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,s=rt.AZTEC_DATA_10):(r=12,s=rt.AZTEC_DATA_12);let i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new F;let o=e.length%r,c=new Int32Array(a);for(let S=0;S<a;S++,o+=r)c[S]=ft.readCode(e,o,r);try{new cs(s).decode(c,a-i)}catch(S){throw new F(S)}let m=(1<<r)-1,p=0;for(let S=0;S<i;S++){let P=c[S];if(P===0||P===m)throw new F;(P===1||P===m-1)&&p++}let b=new Array(i*r-p),v=0;for(let S=0;S<i;S++){let P=c[S];if(P===1||P===m-1)b.fill(P>1,v,v+r-1),v+=r-1;else for(let H=r-1;H>=0;--H)b[v++]=(P&1<<H)!==0}return b}extractBits(e){let s=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(s?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,s));if(s)for(let c=0;c<a.length;c++)a[c]=c;else{let c=i+1+2*te.truncDivision(te.truncDivision(i,2)-1,15),m=i/2,p=te.truncDivision(c,2);for(let b=0;b<m;b++){let v=b+te.truncDivision(b,15);a[m-b-1]=p-v-1,a[m+b]=p+v+1}}for(let c=0,m=0;c<r;c++){let p=(r-c)*4+(s?9:12),b=c*2,v=i-1-b;for(let S=0;S<p;S++){let P=S*2;for(let H=0;H<2;H++)o[m+P+H]=e.get(a[b+H],a[b+S]),o[m+2*p+P+H]=e.get(a[b+S],a[v-H]),o[m+4*p+P+H]=e.get(a[v-H],a[v-S]),o[m+6*p+P+H]=e.get(a[v-S],a[b+H])}m+=p*8}return o}static readCode(e,s,r){let i=0;for(let a=s;a<s+r;a++)i<<=1,e[a]&&(i|=1);return i}static readByte(e,s){let r=e.length-s;return r>=8?ft.readCode(e,s,8):ft.readCode(e,s,r)<<8-r}static convertBoolArrayToByteArray(e){let s=new Uint8Array((e.length+7)/8);for(let r=0;r<s.length;r++)s[r]=ft.readByte(e,8*r);return s}totalBitsInLayer(e,s){return((s?88:112)+16*e)*e}}ft.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ft.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ft.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ft.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ft.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class at{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,s,r,i){const a=e-r,o=s-i;return Math.sqrt(a*a+o*o)}static sum(e){let s=0;for(let r=0,i=e.length;r!==i;r++){const a=e[r];s+=a}return s}}class qs{static floatToIntBits(e){return e}}qs.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Pe{constructor(e,s){this.x=e,this.y=s}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Pe){const s=e;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*qs.floatToIntBits(this.x)+qs.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const s=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]);let a,o,c;if(r>=s&&r>=i?(o=e[0],a=e[1],c=e[2]):i>=r&&i>=s?(o=e[1],a=e[0],c=e[2]):(o=e[2],a=e[0],c=e[1]),this.crossProductZ(a,o,c)<0){const m=a;a=c,c=m}e[0]=a,e[1]=o,e[2]=c}static distance(e,s){return at.distance(e.x,e.y,s.x,s.y)}static crossProductZ(e,s,r){const i=s.x,a=s.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)}}class gr{constructor(e,s){this.bits=e,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class hn extends gr{constructor(e,s,r,i,a){super(e,s),this.compact=r,this.nbDatablocks=i,this.nbLayers=a}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ss{constructor(e,s,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),s==null&&(s=Ss.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);const a=s/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new I}detect(){let e=this.leftInit,s=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,c=!1,m=!1,p=!1,b=!1,v=!1;const S=this.width,P=this.height;for(;o;){o=!1;let H=!0;for(;(H||!m)&&s<S;)H=this.containsBlackPoint(r,i,s,!1),H?(s++,o=!0,m=!0):m||s++;if(s>=S){a=!0;break}let Z=!0;for(;(Z||!p)&&i<P;)Z=this.containsBlackPoint(e,s,i,!0),Z?(i++,o=!0,p=!0):p||i++;if(i>=P){a=!0;break}let re=!0;for(;(re||!b)&&e>=0;)re=this.containsBlackPoint(r,i,e,!1),re?(e--,o=!0,b=!0):b||e--;if(e<0){a=!0;break}let he=!0;for(;(he||!v)&&r>=0;)he=this.containsBlackPoint(e,s,r,!0),he?(r--,o=!0,v=!0):v||r--;if(r<0){a=!0;break}o&&(c=!0)}if(!a&&c){const H=s-e;let Z=null;for(let Ie=1;Z===null&&Ie<H;Ie++)Z=this.getBlackPointOnSegment(e,i-Ie,e+Ie,i);if(Z==null)throw new I;let re=null;for(let Ie=1;re===null&&Ie<H;Ie++)re=this.getBlackPointOnSegment(e,r+Ie,e+Ie,r);if(re==null)throw new I;let he=null;for(let Ie=1;he===null&&Ie<H;Ie++)he=this.getBlackPointOnSegment(s,r+Ie,s-Ie,r);if(he==null)throw new I;let ke=null;for(let Ie=1;ke===null&&Ie<H;Ie++)ke=this.getBlackPointOnSegment(s,i-Ie,s-Ie,i);if(ke==null)throw new I;return this.centerEdges(ke,Z,he,re)}else throw new I}getBlackPointOnSegment(e,s,r,i){const a=at.round(at.distance(e,s,r,i)),o=(r-e)/a,c=(i-s)/a,m=this.image;for(let p=0;p<a;p++){const b=at.round(e+p*o),v=at.round(s+p*c);if(m.get(b,v))return new Pe(b,v)}return null}centerEdges(e,s,r,i){const a=e.getX(),o=e.getY(),c=s.getX(),m=s.getY(),p=r.getX(),b=r.getY(),v=i.getX(),S=i.getY(),P=Ss.CORR;return a<this.width/2?[new Pe(v-P,S+P),new Pe(c+P,m+P),new Pe(p-P,b-P),new Pe(a+P,o-P)]:[new Pe(v+P,S+P),new Pe(c+P,m-P),new Pe(p-P,b+P),new Pe(a-P,o-P)]}containsBlackPoint(e,s,r,i){const a=this.image;if(i){for(let o=e;o<=s;o++)if(a.get(o,r))return!0}else for(let o=e;o<=s;o++)if(a.get(r,o))return!0;return!1}}Ss.INIT_SIZE=10,Ss.CORR=1;class Ur{static checkAndNudgePoints(e,s){const r=e.getWidth(),i=e.getHeight();let a=!0;for(let o=0;o<s.length&&a;o+=2){const c=Math.floor(s[o]),m=Math.floor(s[o+1]);if(c<-1||c>r||m<-1||m>i)throw new I;a=!1,c===-1?(s[o]=0,a=!0):c===r&&(s[o]=r-1,a=!0),m===-1?(s[o+1]=0,a=!0):m===i&&(s[o+1]=i-1,a=!0)}a=!0;for(let o=s.length-2;o>=0&&a;o-=2){const c=Math.floor(s[o]),m=Math.floor(s[o+1]);if(c<-1||c>r||m<-1||m>i)throw new I;a=!1,c===-1?(s[o]=0,a=!0):c===r&&(s[o]=r-1,a=!0),m===-1?(s[o+1]=0,a=!0):m===i&&(s[o+1]=i-1,a=!0)}}}class gs{constructor(e,s,r,i,a,o,c,m,p){this.a11=e,this.a21=s,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=c,this.a23=m,this.a33=p}static quadrilateralToQuadrilateral(e,s,r,i,a,o,c,m,p,b,v,S,P,H,Z,re){const he=gs.quadrilateralToSquare(e,s,r,i,a,o,c,m);return gs.squareToQuadrilateral(p,b,v,S,P,H,Z,re).times(he)}transformPoints(e){const s=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,m=this.a23,p=this.a31,b=this.a32,v=this.a33;for(let S=0;S<s;S+=2){const P=e[S],H=e[S+1],Z=a*P+m*H+v;e[S]=(r*P+o*H+p)/Z,e[S+1]=(i*P+c*H+b)/Z}}transformPointsWithValues(e,s){const r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,m=this.a23,p=this.a31,b=this.a32,v=this.a33,S=e.length;for(let P=0;P<S;P++){const H=e[P],Z=s[P],re=a*H+m*Z+v;e[P]=(r*H+o*Z+p)/re,s[P]=(i*H+c*Z+b)/re}}static squareToQuadrilateral(e,s,r,i,a,o,c,m){const p=e-r+a-c,b=s-i+o-m;if(p===0&&b===0)return new gs(r-e,a-r,e,i-s,o-i,s,0,0,1);{const v=r-a,S=c-a,P=i-o,H=m-o,Z=v*H-S*P,re=(p*H-S*b)/Z,he=(v*b-p*P)/Z;return new gs(r-e+re*r,c-e+he*c,e,i-s+re*i,m-s+he*m,s,re,he,1)}}static quadrilateralToSquare(e,s,r,i,a,o,c,m){return gs.squareToQuadrilateral(e,s,r,i,a,o,c,m).buildAdjoint()}buildAdjoint(){return new gs(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new gs(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class Wr extends Ur{sampleGrid(e,s,r,i,a,o,c,m,p,b,v,S,P,H,Z,re,he,ke,Ie){const ve=gs.quadrilateralToQuadrilateral(i,a,o,c,m,p,b,v,S,P,H,Z,re,he,ke,Ie);return this.sampleGridWithTransform(e,s,r,ve)}sampleGridWithTransform(e,s,r,i){if(s<=0||r<=0)throw new I;const a=new me(s,r),o=new Float32Array(2*s);for(let c=0;c<r;c++){const m=o.length,p=c+.5;for(let b=0;b<m;b+=2)o[b]=b/2+.5,o[b+1]=p;i.transformPoints(o),Ur.checkAndNudgePoints(e,o);try{for(let b=0;b<m;b+=2)e.get(Math.floor(o[b]),Math.floor(o[b+1]))&&a.set(b/2,c)}catch{throw new I}}return a}}class Oe{static setGridSampler(e){Oe.gridSampler=e}static getInstance(){return Oe.gridSampler}}Oe.gridSampler=new Wr;class Xe{constructor(e,s){this.x=e,this.y=s}toResultPoint(){return new Pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class bt{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let s=this.getMatrixCenter(),r=this.getBullsEyeCorners(s);if(e){let o=r[0];r[0]=r[2],r[2]=o}this.extractParameters(r);let i=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),a=this.getMatrixCornerPoints(r);return new hn(i,a,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new I;let s=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],s),this.sampleLine(e[1],e[2],s),this.sampleLine(e[2],e[3],s),this.sampleLine(e[3],e[0],s)]);this.shift=this.getRotation(r,s);let i=0;for(let o=0;o<4;o++){let c=r[(this.shift+o)%4];this.compact?(i<<=7,i+=c>>1&127):(i<<=10,i+=(c>>2&992)+(c>>1&31))}let a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)}getRotation(e,s){let r=0;e.forEach((i,a,o)=>{let c=(i>>s-2<<1)+(i&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(let i=0;i<4;i++)if(te.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new I}getCorrectedParameterData(e,s){let r,i;s?(r=7,i=2):(r=10,i=4);let a=r-i,o=new Int32Array(r);for(let m=r-1;m>=0;--m)o[m]=e&15,e>>=4;try{new cs(rt.AZTEC_PARAM).decode(o,a)}catch{throw new I}let c=0;for(let m=0;m<i;m++)c=(c<<4)+o[m];return c}getBullsEyeCorners(e){let s=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let v=this.getFirstDifferent(s,o,1,-1),S=this.getFirstDifferent(r,o,1,1),P=this.getFirstDifferent(i,o,-1,1),H=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){let Z=this.distancePoint(H,v)*this.nbCenterLayers/(this.distancePoint(a,s)*(this.nbCenterLayers+2));if(Z<.75||Z>1.25||!this.isWhiteOrBlackRectangle(v,S,P,H))break}s=v,r=S,i=P,a=H,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new I;this.compact=this.nbCenterLayers===5;let c=new Pe(s.getX()+.5,s.getY()-.5),m=new Pe(r.getX()+.5,r.getY()+.5),p=new Pe(i.getX()-.5,i.getY()+.5),b=new Pe(a.getX()-.5,a.getY()-.5);return this.expandSquare([c,m,p,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,s,r,i;try{let c=new Ss(this.image).detect();e=c[0],s=c[1],r=c[2],i=c[3]}catch{let m=this.image.getWidth()/2,p=this.image.getHeight()/2;e=this.getFirstDifferent(new Xe(m+7,p-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Xe(m+7,p+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Xe(m-7,p+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Xe(m-7,p-7),!1,-1,-1).toResultPoint()}let a=at.round((e.getX()+i.getX()+s.getX()+r.getX())/4),o=at.round((e.getY()+i.getY()+s.getY()+r.getY())/4);try{let c=new Ss(this.image,15,a,o).detect();e=c[0],s=c[1],r=c[2],i=c[3]}catch{e=this.getFirstDifferent(new Xe(a+7,o-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Xe(a+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Xe(a-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Xe(a-7,o-7),!1,-1,-1).toResultPoint()}return a=at.round((e.getX()+i.getX()+s.getX()+r.getX())/4),o=at.round((e.getY()+i.getY()+s.getY()+r.getY())/4),new Xe(a,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,s,r,i,a){let o=Oe.getInstance(),c=this.getDimension(),m=c/2-this.nbCenterLayers,p=c/2+this.nbCenterLayers;return o.sampleGrid(e,c,c,m,m,p,m,p,p,m,p,s.getX(),s.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())}sampleLine(e,s,r){let i=0,a=this.distanceResultPoint(e,s),o=a/r,c=e.getX(),m=e.getY(),p=o*(s.getX()-e.getX())/a,b=o*(s.getY()-e.getY())/a;for(let v=0;v<r;v++)this.image.get(at.round(c+v*p),at.round(m+v*b))&&(i|=1<<r-v-1);return i}isWhiteOrBlackRectangle(e,s,r,i){let a=3;e=new Xe(e.getX()-a,e.getY()+a),s=new Xe(s.getX()-a,s.getY()-a),r=new Xe(r.getX()+a,r.getY()-a),i=new Xe(i.getX()+a,i.getY()+a);let o=this.getColor(i,e);if(o===0)return!1;let c=this.getColor(e,s);return c!==o||(c=this.getColor(s,r),c!==o)?!1:(c=this.getColor(r,i),c===o)}getColor(e,s){let r=this.distancePoint(e,s),i=(s.getX()-e.getX())/r,a=(s.getY()-e.getY())/r,o=0,c=e.getX(),m=e.getY(),p=this.image.get(e.getX(),e.getY()),b=Math.ceil(r);for(let S=0;S<b;S++)c+=i,m+=a,this.image.get(at.round(c),at.round(m))!==p&&o++;let v=o/r;return v>.1&&v<.9?0:v<=.1===p?1:-1}getFirstDifferent(e,s,r,i){let a=e.getX()+r,o=e.getY()+i;for(;this.isValid(a,o)&&this.image.get(a,o)===s;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===s;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===s;)o+=i;return o-=i,new Xe(a,o)}expandSquare(e,s,r){let i=r/(2*s),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,m=(e[0].getY()+e[2].getY())/2,p=new Pe(c+i*a,m+i*o),b=new Pe(c-i*a,m-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,m=(e[1].getY()+e[3].getY())/2;let v=new Pe(c+i*a,m+i*o),S=new Pe(c-i*a,m-i*o);return[p,v,b,S]}isValid(e,s){return e>=0&&e<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(e){let s=at.round(e.getX()),r=at.round(e.getY());return this.isValid(s,r)}distancePoint(e,s){return at.distance(e.getX(),e.getY(),s.getX(),s.getY())}distanceResultPoint(e,s){return at.distance(e.getX(),e.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(te.truncDivision(this.nbLayers-4,8)+1)+15}}class Ft{decode(e,s=null){let r=null,i=new bt(e.getBlackMatrix()),a=null,o=null;try{let b=i.detectMirror(!1);a=b.getPoints(),this.reportFoundResultPoints(s,a),o=new ft().decode(b)}catch(b){r=b}if(o==null)try{let b=i.detectMirror(!0);a=b.getPoints(),this.reportFoundResultPoints(s,a),o=new ft().decode(b)}catch(b){throw r??b}let c=new ee(o.getText(),o.getRawBytes(),o.getNumBits(),a,ye.AZTEC,q.currentTimeMillis()),m=o.getByteSegments();m!=null&&c.putMetadata(Le.BYTE_SEGMENTS,m);let p=o.getECLevel();return p!=null&&c.putMetadata(Le.ERROR_CORRECTION_LEVEL,p),c}reportFoundResultPoints(e,s){if(e!=null){let r=e.get(ce.NEED_RESULT_POINT_CALLBACK);r!=null&&s.forEach((i,a,o)=>{r.foundPossibleResultPoint(i)})}}reset(){}}class ks extends Te{constructor(e=500){super(new Ft,e)}}class Ke{decode(e,s){try{return this.doDecode(e,s)}catch{if(s&&s.get(ce.TRY_HARDER)===!0&&e.isRotateSupported()){const a=e.rotateCounterClockwise(),o=this.doDecode(a,s),c=o.getResultMetadata();let m=270;c!==null&&c.get(Le.ORIENTATION)===!0&&(m=m+c.get(Le.ORIENTATION)%360),o.putMetadata(Le.ORIENTATION,m);const p=o.getResultPoints();if(p!==null){const b=a.getHeight();for(let v=0;v<p.length;v++)p[v]=new Pe(b-p[v].getY()-1,p[v].getX())}return o}else throw new I}}reset(){}doDecode(e,s){const r=e.getWidth(),i=e.getHeight();let a=new Q(r);const o=s&&s.get(ce.TRY_HARDER)===!0,c=Math.max(1,i>>(o?8:5));let m;o?m=i:m=15;const p=Math.trunc(i/2);for(let b=0;b<m;b++){const v=Math.trunc((b+1)/2),S=(b&1)===0,P=p+c*(S?v:-v);if(P<0||P>=i)break;try{a=e.getBlackRow(P,a)}catch{continue}for(let H=0;H<2;H++){if(H===1&&(a.reverse(),s&&s.get(ce.NEED_RESULT_POINT_CALLBACK)===!0)){const Z=new Map;s.forEach((re,he)=>Z.set(he,re)),Z.delete(ce.NEED_RESULT_POINT_CALLBACK),s=Z}try{const Z=this.decodeRow(P,a,s);if(H===1){Z.putMetadata(Le.ORIENTATION,180);const re=Z.getResultPoints();re!==null&&(re[0]=new Pe(r-re[0].getX()-1,re[0].getY()),re[1]=new Pe(r-re[1].getX()-1,re[1].getY()))}return Z}catch{}}}throw new I}static recordPattern(e,s,r){const i=r.length;for(let p=0;p<i;p++)r[p]=0;const a=e.getSize();if(s>=a)throw new I;let o=!e.get(s),c=0,m=s;for(;m<a;){if(e.get(m)!==o)r[c]++;else{if(++c===i)break;r[c]=1,o=!o}m++}if(!(c===i||c===i-1&&m===a))throw new I}static recordPatternInReverse(e,s,r){let i=r.length,a=e.get(s);for(;s>0&&i>=0;)e.get(--s)!==a&&(i--,a=!a);if(i>=0)throw new I;Ke.recordPattern(e,s+1,r)}static patternMatchVariance(e,s,r){const i=e.length;let a=0,o=0;for(let p=0;p<i;p++)a+=e[p],o+=s[p];if(a<o)return Number.POSITIVE_INFINITY;const c=a/o;r*=c;let m=0;for(let p=0;p<i;p++){const b=e[p],v=s[p]*c,S=b>v?b-v:v-b;if(S>r)return Number.POSITIVE_INFINITY;m+=S}return m/a}}class Ne extends Ke{static findStartPattern(e){const s=e.getSize(),r=e.getNextSet(0);let i=0,a=Int32Array.from([0,0,0,0,0,0]),o=r,c=!1;const m=6;for(let p=r;p<s;p++)if(e.get(p)!==c)a[i]++;else{if(i===m-1){let b=Ne.MAX_AVG_VARIANCE,v=-1;for(let S=Ne.CODE_START_A;S<=Ne.CODE_START_C;S++){const P=Ke.patternMatchVariance(a,Ne.CODE_PATTERNS[S],Ne.MAX_INDIVIDUAL_VARIANCE);P<b&&(b=P,v=S)}if(v>=0&&e.isRange(Math.max(0,o-(p-o)/2),o,!1))return Int32Array.from([o,p,v]);o+=a[0]+a[1],a=a.slice(2,a.length-1),a[i-1]=0,a[i]=0,i--}else i++;a[i]=1,c=!c}throw new I}static decodeCode(e,s,r){Ke.recordPattern(e,r,s);let i=Ne.MAX_AVG_VARIANCE,a=-1;for(let o=0;o<Ne.CODE_PATTERNS.length;o++){const c=Ne.CODE_PATTERNS[o],m=this.patternMatchVariance(s,c,Ne.MAX_INDIVIDUAL_VARIANCE);m<i&&(i=m,a=o)}if(a>=0)return a;throw new I}decodeRow(e,s,r){const i=r&&r.get(ce.ASSUME_GS1)===!0,a=Ne.findStartPattern(s),o=a[2];let c=0;const m=new Uint8Array(20);m[c++]=o;let p;switch(o){case Ne.CODE_START_A:p=Ne.CODE_CODE_A;break;case Ne.CODE_START_B:p=Ne.CODE_CODE_B;break;case Ne.CODE_START_C:p=Ne.CODE_CODE_C;break;default:throw new F}let b=!1,v=!1,S="",P=a[0],H=a[1];const Z=Int32Array.from([0,0,0,0,0,0]);let re=0,he=0,ke=o,Ie=0,ve=!0,ot=!1,tt=!1;for(;!b;){const dr=v;switch(v=!1,re=he,he=Ne.decodeCode(s,Z,H),m[c++]=he,he!==Ne.CODE_STOP&&(ve=!0),he!==Ne.CODE_STOP&&(Ie++,ke+=Ie*he),P=H,H+=Z.reduce(($r,Mi)=>$r+Mi,0),he){case Ne.CODE_START_A:case Ne.CODE_START_B:case Ne.CODE_START_C:throw new F}switch(p){case Ne.CODE_CODE_A:if(he<64)tt===ot?S+=String.fromCharCode(32+he):S+=String.fromCharCode(32+he+128),tt=!1;else if(he<96)tt===ot?S+=String.fromCharCode(he-64):S+=String.fromCharCode(he+64),tt=!1;else switch(he!==Ne.CODE_STOP&&(ve=!1),he){case Ne.CODE_FNC_1:i&&(S.length===0?S+="]C1":S+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_A:!ot&&tt?(ot=!0,tt=!1):ot&&tt?(ot=!1,tt=!1):tt=!0;break;case Ne.CODE_SHIFT:v=!0,p=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_B:p=Ne.CODE_CODE_B;break;case Ne.CODE_CODE_C:p=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:b=!0;break}break;case Ne.CODE_CODE_B:if(he<96)tt===ot?S+=String.fromCharCode(32+he):S+=String.fromCharCode(32+he+128),tt=!1;else switch(he!==Ne.CODE_STOP&&(ve=!1),he){case Ne.CODE_FNC_1:i&&(S.length===0?S+="]C1":S+="");break;case Ne.CODE_FNC_2:case Ne.CODE_FNC_3:break;case Ne.CODE_FNC_4_B:!ot&&tt?(ot=!0,tt=!1):ot&&tt?(ot=!1,tt=!1):tt=!0;break;case Ne.CODE_SHIFT:v=!0,p=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_A:p=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_C:p=Ne.CODE_CODE_C;break;case Ne.CODE_STOP:b=!0;break}break;case Ne.CODE_CODE_C:if(he<100)he<10&&(S+="0"),S+=he;else switch(he!==Ne.CODE_STOP&&(ve=!1),he){case Ne.CODE_FNC_1:i&&(S.length===0?S+="]C1":S+="");break;case Ne.CODE_CODE_A:p=Ne.CODE_CODE_A;break;case Ne.CODE_CODE_B:p=Ne.CODE_CODE_B;break;case Ne.CODE_STOP:b=!0;break}break}dr&&(p=p===Ne.CODE_CODE_A?Ne.CODE_CODE_B:Ne.CODE_CODE_A)}const ws=H-P;if(H=s.getNextUnset(H),!s.isRange(H,Math.min(s.getSize(),H+(H-P)/2),!1))throw new I;if(ke-=Ie*re,ke%103!==re)throw new z;const Xs=S.length;if(Xs===0)throw new I;Xs>0&&ve&&(p===Ne.CODE_CODE_C?S=S.substring(0,Xs-2):S=S.substring(0,Xs-1));const Xt=(a[1]+a[0])/2,yt=P+ws/2,Ot=m.length,ms=new Uint8Array(Ot);for(let dr=0;dr<Ot;dr++)ms[dr]=m[dr];const Tr=[new Pe(Xt,e),new Pe(yt,e)];return new ee(S,ms,0,Tr,ye.CODE_128,new Date().getTime())}}Ne.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ne.MAX_AVG_VARIANCE=.25,Ne.MAX_INDIVIDUAL_VARIANCE=.7,Ne.CODE_SHIFT=98,Ne.CODE_CODE_C=99,Ne.CODE_CODE_B=100,Ne.CODE_CODE_A=101,Ne.CODE_FNC_1=102,Ne.CODE_FNC_2=97,Ne.CODE_FNC_3=96,Ne.CODE_FNC_4_A=101,Ne.CODE_FNC_4_B=100,Ne.CODE_START_A=103,Ne.CODE_START_B=104,Ne.CODE_START_C=105,Ne.CODE_STOP=106;class zt extends Ke{constructor(e=!1,s=!1){super(),this.usingCheckDigit=e,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,s,r){let i=this.counters;i.fill(0),this.decodeRowResult="";let a=zt.findAsteriskPattern(s,i),o=s.getNextSet(a[1]),c=s.getSize(),m,p;do{zt.recordPattern(s,o,i);let Z=zt.toNarrowWidePattern(i);if(Z<0)throw new I;m=zt.patternToChar(Z),this.decodeRowResult+=m,p=o;for(let re of i)o+=re;o=s.getNextSet(o)}while(m!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b=0;for(let Z of i)b+=Z;let v=o-p-b;if(o!==c&&v*2<b)throw new I;if(this.usingCheckDigit){let Z=this.decodeRowResult.length-1,re=0;for(let he=0;he<Z;he++)re+=zt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(he));if(this.decodeRowResult.charAt(Z)!==zt.ALPHABET_STRING.charAt(re%43))throw new z;this.decodeRowResult=this.decodeRowResult.substring(0,Z)}if(this.decodeRowResult.length===0)throw new I;let S;this.extendedMode?S=zt.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let P=(a[1]+a[0])/2,H=p+b/2;return new ee(S,null,0,[new Pe(P,e),new Pe(H,e)],ye.CODE_39,new Date().getTime())}static findAsteriskPattern(e,s){let r=e.getSize(),i=e.getNextSet(0),a=0,o=i,c=!1,m=s.length;for(let p=i;p<r;p++)if(e.get(p)!==c)s[a]++;else{if(a===m-1){if(this.toNarrowWidePattern(s)===zt.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((p-o)/2)),o,!1))return[o,p];o+=s[0]+s[1],s.copyWithin(0,2,2+a-1),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,c=!c}throw new I}static toNarrowWidePattern(e){let s=e.length,r=0,i;do{let a=2147483647;for(let m of e)m<a&&m>r&&(a=m);r=a,i=0;let o=0,c=0;for(let m=0;m<s;m++){let p=e[m];p>r&&(c|=1<<s-1-m,i++,o+=p)}if(i===3){for(let m=0;m<s&&i>0;m++){let p=e[m];if(p>r&&(i--,p*2>=o))return-1}return c}}while(i>3);return-1}static patternToChar(e){for(let s=0;s<zt.CHARACTER_ENCODINGS.length;s++)if(zt.CHARACTER_ENCODINGS[s]===e)return zt.ALPHABET_STRING.charAt(s);if(e===zt.ASTERISK_ENCODING)return"*";throw new I}static decodeExtended(e){let s=e.length,r="";for(let i=0;i<s;i++){let a=e.charAt(i);if(a==="+"||a==="$"||a==="%"||a==="/"){let o=e.charAt(i+1),c="\0";switch(a){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new F;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new F;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new F;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new F;break}r+=c,i++}else r+=a}return r}}zt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",zt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],zt.ASTERISK_ENCODING=148;class gt extends Ke{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,s,r){let i=this.decodeStart(s),a=this.decodeEnd(s),o=new W;gt.decodeMiddle(s,i[1],a[0],o);let c=o.toString(),m=null;r!=null&&(m=r.get(ce.ALLOWED_LENGTHS)),m==null&&(m=gt.DEFAULT_ALLOWED_LENGTHS);let p=c.length,b=!1,v=0;for(let H of m){if(p===H){b=!0;break}H>v&&(v=H)}if(!b&&p>v&&(b=!0),!b)throw new F;const S=[new Pe(i[1],e),new Pe(a[0],e)];return new ee(c,null,0,S,ye.ITF,new Date().getTime())}static decodeMiddle(e,s,r,i){let a=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(a.fill(0),o.fill(0),c.fill(0);s<r;){Ke.recordPattern(e,s,a);for(let p=0;p<5;p++){let b=2*p;o[p]=a[b],c[p]=a[b+1]}let m=gt.decodeDigit(o);i.append(m.toString()),m=this.decodeDigit(c),i.append(m.toString()),a.forEach(function(p){s+=p})}}decodeStart(e){let s=gt.skipWhiteSpace(e),r=gt.findGuardPattern(e,s,gt.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r}validateQuietZone(e,s){let r=this.narrowLineWidth*10;r=r<s?r:s;for(let i=s-1;r>0&&i>=0&&!e.get(i);i--)r--;if(r!==0)throw new I}static skipWhiteSpace(e){const s=e.getSize(),r=e.getNextSet(0);if(r===s)throw new I;return r}decodeEnd(e){e.reverse();try{let s=gt.skipWhiteSpace(e),r;try{r=gt.findGuardPattern(e,s,gt.END_PATTERN_REVERSED[0])}catch(a){a instanceof I&&(r=gt.findGuardPattern(e,s,gt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);let i=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-i,r}finally{e.reverse()}}static findGuardPattern(e,s,r){let i=r.length,a=new Int32Array(i),o=e.getSize(),c=!1,m=0,p=s;a.fill(0);for(let b=s;b<o;b++)if(e.get(b)!==c)a[m]++;else{if(m===i-1){if(Ke.patternMatchVariance(a,r,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE)return[p,b];p+=a[0]+a[1],q.arraycopy(a,2,a,0,m-1),a[m-1]=0,a[m]=0,m--}else m++;a[m]=1,c=!c}throw new I}static decodeDigit(e){let s=gt.MAX_AVG_VARIANCE,r=-1,i=gt.PATTERNS.length;for(let a=0;a<i;a++){let o=gt.PATTERNS[a],c=Ke.patternMatchVariance(e,o,gt.MAX_INDIVIDUAL_VARIANCE);c<s?(s=c,r=a):c===s&&(r=-1)}if(r>=0)return r%10;throw new I}}gt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],gt.MAX_AVG_VARIANCE=.38,gt.MAX_INDIVIDUAL_VARIANCE=.5,gt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],gt.START_PATTERN=Int32Array.from([1,1,1,1]),gt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ct extends Ke{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let s=!1,r,i=0,a=Int32Array.from([0,0,0]);for(;!s;){a=Int32Array.from([0,0,0]),r=Ct.findGuardPattern(e,i,!1,this.START_END_PATTERN,a);let o=r[0];i=r[1];let c=o-(i-o);c>=0&&(s=e.isRange(c,o,!1))}return r}static checkChecksum(e){return Ct.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let s=e.length;if(s===0)return!1;let r=parseInt(e.charAt(s-1),10);return Ct.getStandardUPCEANChecksum(e.substring(0,s-1))===r}static getStandardUPCEANChecksum(e){let s=e.length,r=0;for(let i=s-1;i>=0;i-=2){let a=e.charAt(i).charCodeAt(0)-48;if(a<0||a>9)throw new F;r+=a}r*=3;for(let i=s-2;i>=0;i-=2){let a=e.charAt(i).charCodeAt(0)-48;if(a<0||a>9)throw new F;r+=a}return(1e3-r)%10}static decodeEnd(e,s){return Ct.findGuardPattern(e,s,!1,Ct.START_END_PATTERN,new Int32Array(Ct.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,s,r,i){return this.findGuardPattern(e,s,r,i,new Int32Array(i.length))}static findGuardPattern(e,s,r,i,a){let o=e.getSize();s=r?e.getNextUnset(s):e.getNextSet(s);let c=0,m=s,p=i.length,b=r;for(let v=s;v<o;v++)if(e.get(v)!==b)a[c]++;else{if(c===p-1){if(Ke.patternMatchVariance(a,i,Ct.MAX_INDIVIDUAL_VARIANCE)<Ct.MAX_AVG_VARIANCE)return Int32Array.from([m,v]);m+=a[0]+a[1];let S=a.slice(2,a.length-1);for(let P=0;P<c-1;P++)a[P]=S[P];a[c-1]=0,a[c]=0,c--}else c++;a[c]=1,b=!b}throw new I}static decodeDigit(e,s,r,i){this.recordPattern(e,r,s);let a=this.MAX_AVG_VARIANCE,o=-1,c=i.length;for(let m=0;m<c;m++){let p=i[m],b=Ke.patternMatchVariance(s,p,Ct.MAX_INDIVIDUAL_VARIANCE);b<a&&(a=b,o=m)}if(o>=0)return o;throw new I}}Ct.MAX_AVG_VARIANCE=.48,Ct.MAX_INDIVIDUAL_VARIANCE=.7,Ct.START_END_PATTERN=Int32Array.from([1,1,1]),Ct.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ct.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ct.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Cr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,s,r){let i=this.decodeRowStringBuffer,a=this.decodeMiddle(s,r,i),o=i.toString(),c=Cr.parseExtensionString(o),m=[new Pe((r[0]+r[1])/2,e),new Pe(a,e)],p=new ee(o,null,0,m,ye.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&p.putAllMetadata(c),p}decodeMiddle(e,s,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o=s[1],c=0;for(let p=0;p<5&&o<a;p++){let b=Ct.decodeDigit(e,i,o,Ct.L_AND_G_PATTERNS);r+=String.fromCharCode(48+b%10);for(let v of i)o+=v;b>=10&&(c|=1<<4-p),p!==4&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(r.length!==5)throw new I;let m=this.determineCheckDigit(c);if(Cr.extensionChecksum(r.toString())!==m)throw new I;return o}static extensionChecksum(e){let s=e.length,r=0;for(let i=s-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(let i=s-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10}determineCheckDigit(e){for(let s=0;s<10;s++)if(e===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new I}static parseExtensionString(e){if(e.length!==5)return null;let s=Cr.parseExtension5String(e);return s==null?null:new Map([[Le.SUGGESTED_PRICE,s]])}static parseExtension5String(e){let s;switch(e.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return s+i+"."+o}}class pn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,s,r){let i=this.decodeRowStringBuffer,a=this.decodeMiddle(s,r,i),o=i.toString(),c=pn.parseExtensionString(o),m=[new Pe((r[0]+r[1])/2,e),new Pe(a,e)],p=new ee(o,null,0,m,ye.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&p.putAllMetadata(c),p}decodeMiddle(e,s,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o=s[1],c=0;for(let m=0;m<2&&o<a;m++){let p=Ct.decodeDigit(e,i,o,Ct.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);for(let b of i)o+=b;p>=10&&(c|=1<<1-m),m!==1&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(r.length!==2)throw new I;if(parseInt(r.toString())%4!==c)throw new I;return o}static parseExtensionString(e){return e.length!==2?null:new Map([[Le.ISSUE_NUMBER,parseInt(e)]])}}class Un{static decodeRow(e,s,r){let i=Ct.findGuardPattern(s,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Cr().decodeRow(e,s,i)}catch{return new pn().decodeRow(e,s,i)}}}Un.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class lt extends Ct{constructor(){super(),this.decodeRowStringBuffer="",lt.L_AND_G_PATTERNS=lt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let s=lt.L_PATTERNS[e-10],r=new Int32Array(s.length);for(let i=0;i<s.length;i++)r[i]=s[s.length-i-1];lt.L_AND_G_PATTERNS[e]=r}}decodeRow(e,s,r){let i=lt.findStartGuardPattern(s),a=r==null?null:r.get(ce.NEED_RESULT_POINT_CALLBACK);if(a!=null){const ve=new Pe((i[0]+i[1])/2,e);a.foundPossibleResultPoint(ve)}let o=this.decodeMiddle(s,i,this.decodeRowStringBuffer),c=o.rowOffset,m=o.resultString;if(a!=null){const ve=new Pe(c,e);a.foundPossibleResultPoint(ve)}let p=this.decodeEnd(s,c);if(a!=null){const ve=new Pe((p[0]+p[1])/2,e);a.foundPossibleResultPoint(ve)}let b=p[1],v=b+(b-p[0]);if(v>=s.getSize()||!s.isRange(b,v,!1))throw new I;let S=m.toString();if(S.length<8)throw new F;if(!lt.checkChecksum(S))throw new z;let P=(i[1]+i[0])/2,H=(p[1]+p[0])/2,Z=this.getBarcodeFormat(),re=[new Pe(P,e),new Pe(H,e)],he=new ee(S,null,0,re,Z,new Date().getTime()),ke=0;try{let ve=Un.decodeRow(e,s,p[1]);he.putMetadata(Le.UPC_EAN_EXTENSION,ve.getText()),he.putAllMetadata(ve.getResultMetadata()),he.addResultPoints(ve.getResultPoints()),ke=ve.getText().length}catch{}let Ie=r==null?null:r.get(ce.ALLOWED_EAN_EXTENSIONS);if(Ie!=null){let ve=!1;for(let ot in Ie)if(ke.toString()===ot){ve=!0;break}if(!ve)throw new I}return he}decodeEnd(e,s){return lt.findGuardPattern(e,s,!1,lt.START_END_PATTERN,new Int32Array(lt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return lt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let s=e.length;if(s===0)return!1;let r=parseInt(e.charAt(s-1),10);return lt.getStandardUPCEANChecksum(e.substring(0,s-1))===r}static getStandardUPCEANChecksum(e){let s=e.length,r=0;for(let i=s-1;i>=0;i-=2){let a=e.charAt(i).charCodeAt(0)-48;if(a<0||a>9)throw new F;r+=a}r*=3;for(let i=s-2;i>=0;i-=2){let a=e.charAt(i).charCodeAt(0)-48;if(a<0||a>9)throw new F;r+=a}return(1e3-r)%10}}class _s extends lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,s,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o=s[1],c=0;for(let p=0;p<6&&o<a;p++){let b=lt.decodeDigit(e,i,o,lt.L_AND_G_PATTERNS);r+=String.fromCharCode(48+b%10);for(let v of i)o+=v;b>=10&&(c|=1<<5-p)}r=_s.determineFirstDigit(r,c),o=lt.findGuardPattern(e,o,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<6&&o<a;p++){let b=lt.decodeDigit(e,i,o,lt.L_PATTERNS);r+=String.fromCharCode(48+b);for(let v of i)o+=v}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return ye.EAN_13}static determineFirstDigit(e,s){for(let r=0;r<10;r++)if(s===this.FIRST_DIGIT_ENCODINGS[r])return e=String.fromCharCode(48+r)+e,e;throw new I}}_s.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class mi extends lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,s,r){const i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o=s[1];for(let m=0;m<4&&o<a;m++){let p=lt.decodeDigit(e,i,o,lt.L_PATTERNS);r+=String.fromCharCode(48+p);for(let b of i)o+=b}o=lt.findGuardPattern(e,o,!0,lt.MIDDLE_PATTERN,new Int32Array(lt.MIDDLE_PATTERN.length).fill(0))[1];for(let m=0;m<4&&o<a;m++){let p=lt.decodeDigit(e,i,o,lt.L_PATTERNS);r+=String.fromCharCode(48+p);for(let b of i)o+=b}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return ye.EAN_8}}class hi extends lt{constructor(){super(...arguments),this.ean13Reader=new _s}getBarcodeFormat(){return ye.UPC_A}decode(e,s){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,s,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,s,r))}decodeMiddle(e,s,r){return this.ean13Reader.decodeMiddle(e,s,r)}maybeReturnResult(e){let s=e.getText();if(s.charAt(0)==="0"){let r=new ee(s.substring(1),null,null,e.getResultPoints(),ye.UPC_A);return e.getResultMetadata()!=null&&r.putAllMetadata(e.getResultMetadata()),r}else throw new I}reset(){this.ean13Reader.reset()}}class Ms extends lt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,s,r){const i=this.decodeMiddleCounters.map(p=>p);i[0]=0,i[1]=0,i[2]=0,i[3]=0;const a=e.getSize();let o=s[1],c=0;for(let p=0;p<6&&o<a;p++){const b=Ms.decodeDigit(e,i,o,Ms.L_AND_G_PATTERNS);r+=String.fromCharCode(48+b%10);for(let v of i)o+=v;b>=10&&(c|=1<<5-p)}let m=Ms.determineNumSysAndCheckDigit(r,c);return{rowOffset:o,resultString:m}}decodeEnd(e,s){return Ms.findGuardPatternWithoutCounters(e,s,!0,Ms.MIDDLE_END_PATTERN)}checkChecksum(e){return lt.checkChecksum(Ms.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,s){for(let r=0;r<=1;r++)for(let i=0;i<10;i++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][i]){let a=String.fromCharCode(48+r),o=String.fromCharCode(48+i);return a+e+o}throw I.getNotFoundInstance()}getBarcodeFormat(){return ye.UPC_E}static convertUPCEtoUPCA(e){const s=e.slice(1,7).split("").map(a=>a.charCodeAt(0)),r=new W;r.append(e.charAt(0));let i=s[5];switch(i){case 0:case 1:case 2:r.appendChars(s,0,2),r.append(i),r.append("0000"),r.appendChars(s,2,3);break;case 3:r.appendChars(s,0,3),r.append("00000"),r.appendChars(s,3,2);break;case 4:r.appendChars(s,0,4),r.append("00000"),r.append(s[4]);break;default:r.appendChars(s,0,5),r.append("0000"),r.append(i);break}return e.length>=8&&r.append(e.charAt(7)),r.toString()}}Ms.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ms.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Wn extends Ke{constructor(e){super();let s=e==null?null:e.get(ce.POSSIBLE_FORMATS),r=[];E(s)?(r.push(new _s),r.push(new hi),r.push(new mi),r.push(new Ms)):(s.indexOf(ye.EAN_13)>-1&&r.push(new _s),s.indexOf(ye.UPC_A)>-1&&r.push(new hi),s.indexOf(ye.EAN_8)>-1&&r.push(new mi),s.indexOf(ye.UPC_E)>-1&&r.push(new Ms)),this.readers=r}decodeRow(e,s,r){for(let i of this.readers)try{const a=i.decodeRow(e,s,r),o=a.getBarcodeFormat()===ye.EAN_13&&a.getText().charAt(0)==="0",c=r==null?null:r.get(ce.POSSIBLE_FORMATS),m=c==null||c.includes(ye.UPC_A);if(o&&m){const p=a.getRawBytes(),b=new ee(a.getText().substring(1),p,p?p.length:null,a.getResultPoints(),ye.UPC_A);return b.putAllMetadata(a.getResultMetadata()),b}return a}catch{}throw new I}reset(){for(let e of this.readers)e.reset()}}class qt extends Ke{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,s){for(let r=0;r<s.length;r++)if(Ke.patternMatchVariance(e,s[r],qt.MAX_INDIVIDUAL_VARIANCE)<qt.MAX_AVG_VARIANCE)return r;throw new I}static count(e){return at.sum(new Int32Array(e))}static increment(e,s){let r=0,i=s[0];for(let a=1;a<e.length;a++)s[a]>i&&(i=s[a],r=a);e[r]++}static decrement(e,s){let r=0,i=s[0];for(let a=1;a<e.length;a++)s[a]<i&&(i=s[a],r=a);e[r]--}static isFinderPattern(e){let s=e[0]+e[1],r=s+e[2]+e[3],i=s/r;if(i>=qt.MIN_FINDER_PATTERN_RATIO&&i<=qt.MAX_FINDER_PATTERN_RATIO){let a=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;for(let c of e)c>o&&(o=c),c<a&&(a=c);return o<10*a}return!1}}qt.MAX_AVG_VARIANCE=.2,qt.MAX_INDIVIDUAL_VARIANCE=.45,qt.MIN_FINDER_PATTERN_RATIO=9.5/12,qt.MAX_FINDER_PATTERN_RATIO=12.5/14;class yr{constructor(e,s){this.value=e,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof yr))return!1;const s=e;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class fn{constructor(e,s,r,i,a){this.value=e,this.startEnd=s,this.value=e,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Pe(r,a)),this.resultPoints.push(new Pe(i,a))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof fn))return!1;const s=e;return this.value===s.value}hashCode(){return this.value}}class ys{constructor(){}static getRSSvalue(e,s,r){let i=0;for(let m of e)i+=m;let a=0,o=0,c=e.length;for(let m=0;m<c-1;m++){let p;for(p=1,o|=1<<m;p<e[m];p++,o&=~(1<<m)){let b=ys.combins(i-p-1,c-m-2);if(r&&o===0&&i-p-(c-m-1)>=c-m-1&&(b-=ys.combins(i-p-(c-m),c-m-2)),c-m-1>1){let v=0;for(let S=i-p-(c-m-2);S>s;S--)v+=ys.combins(i-p-S-1,c-m-3);b-=v*(c-1-m)}else i-p>s&&b--;a+=b}i-=p}return a}static combins(e,s){let r,i;e-s>s?(i=s,r=e-s):(i=e-s,r=s);let a=1,o=1;for(let c=e;c>r;c--)a*=c,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a}}class pi{static buildBitArray(e){let s=e.length*2-1;e[e.length-1].getRightChar()==null&&(s-=1);let r=12*s,i=new Q(r),a=0,c=e[0].getRightChar().getValue();for(let m=11;m>=0;--m)(c&1<<m)!=0&&i.set(a),a++;for(let m=1;m<e.length;++m){let p=e[m],b=p.getLeftChar().getValue();for(let v=11;v>=0;--v)(b&1<<v)!=0&&i.set(a),a++;if(p.getRightChar()!=null){let v=p.getRightChar().getValue();for(let S=11;S>=0;--S)(v&1<<S)!=0&&i.set(a),a++}}return i}}class Us{constructor(e,s){s?this.decodedInformation=null:(this.finished=e,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class fi{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Zt extends fi{constructor(e,s){super(e),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Zt.FNC1}}Zt.FNC1="$";class Ks extends fi{constructor(e,s,r){super(e),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class us extends fi{constructor(e,s,r){if(super(e),s<0||s>10||r<0||r>10)throw new F;this.firstDigit=s,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===us.FNC1}isSecondDigitFNC1(){return this.secondDigit===us.FNC1}isAnyFNC1(){return this.firstDigit===us.FNC1||this.secondDigit===us.FNC1}}us.FNC1=10;class Me{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new I;let s=e.substring(0,2);for(let a of Me.TWO_DIGIT_DATA_LENGTH)if(a[0]===s)return a[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(2,a[2],e):Me.processFixedAI(2,a[1],e);if(e.length<3)throw new I;let r=e.substring(0,3);for(let a of Me.THREE_DIGIT_DATA_LENGTH)if(a[0]===r)return a[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(3,a[2],e):Me.processFixedAI(3,a[1],e);for(let a of Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(a[0]===r)return a[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,a[2],e):Me.processFixedAI(4,a[1],e);if(e.length<4)throw new I;let i=e.substring(0,4);for(let a of Me.FOUR_DIGIT_DATA_LENGTH)if(a[0]===i)return a[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,a[2],e):Me.processFixedAI(4,a[1],e);throw new I}static processFixedAI(e,s,r){if(r.length<e)throw new I;let i=r.substring(0,e);if(r.length<e+s)throw new I;let a=r.substring(e,e+s),o=r.substring(e+s),c="("+i+")"+a,m=Me.parseFieldsInGeneralPurpose(o);return m==null?c:c+m}static processVariableAI(e,s,r){let i=r.substring(0,e),a;r.length<e+s?a=r.length:a=e+s;let o=r.substring(e,a),c=r.substring(a),m="("+i+")"+o,p=Me.parseFieldsInGeneralPurpose(c);return p==null?m:m+p}}Me.VARIABLE_LENGTH=[],Me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Me.VARIABLE_LENGTH,20],["22",Me.VARIABLE_LENGTH,29],["30",Me.VARIABLE_LENGTH,8],["37",Me.VARIABLE_LENGTH,8],["90",Me.VARIABLE_LENGTH,30],["91",Me.VARIABLE_LENGTH,30],["92",Me.VARIABLE_LENGTH,30],["93",Me.VARIABLE_LENGTH,30],["94",Me.VARIABLE_LENGTH,30],["95",Me.VARIABLE_LENGTH,30],["96",Me.VARIABLE_LENGTH,30],["97",Me.VARIABLE_LENGTH,3],["98",Me.VARIABLE_LENGTH,30],["99",Me.VARIABLE_LENGTH,30]],Me.THREE_DIGIT_DATA_LENGTH=[["240",Me.VARIABLE_LENGTH,30],["241",Me.VARIABLE_LENGTH,30],["242",Me.VARIABLE_LENGTH,6],["250",Me.VARIABLE_LENGTH,30],["251",Me.VARIABLE_LENGTH,30],["253",Me.VARIABLE_LENGTH,17],["254",Me.VARIABLE_LENGTH,20],["400",Me.VARIABLE_LENGTH,30],["401",Me.VARIABLE_LENGTH,30],["402",17],["403",Me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Me.VARIABLE_LENGTH,20],["421",Me.VARIABLE_LENGTH,15],["422",3],["423",Me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Me.VARIABLE_LENGTH,15],["391",Me.VARIABLE_LENGTH,18],["392",Me.VARIABLE_LENGTH,15],["393",Me.VARIABLE_LENGTH,18],["703",Me.VARIABLE_LENGTH,30]],Me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Me.VARIABLE_LENGTH,20],["8003",Me.VARIABLE_LENGTH,30],["8004",Me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Me.VARIABLE_LENGTH,30],["8008",Me.VARIABLE_LENGTH,12],["8018",18],["8020",Me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Me.VARIABLE_LENGTH,70],["8200",Me.VARIABLE_LENGTH,70]];class Hr{constructor(e){this.buffer=new W,this.information=e}decodeAllCodes(e,s){let r=s,i=null;do{let a=this.decodeGeneralPurposeField(r,i),o=Me.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let s=e;s<e+3;++s)if(this.information.get(s))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let a=this.extractNumericValueFromBitArray(e,4);return a===0?new us(this.information.getSize(),us.FNC1,us.FNC1):new us(this.information.getSize(),a-1,us.FNC1)}let s=this.extractNumericValueFromBitArray(e,7),r=(s-8)/11,i=(s-8)%11;return new us(e+7,r,i)}extractNumericValueFromBitArray(e,s){return Hr.extractNumericValueFromBitArray(this.information,e,s)}static extractNumericValueFromBitArray(e,s,r){let i=0;for(let a=0;a<r;++a)e.get(s+a)&&(i|=1<<r-a-1);return i}decodeGeneralPurposeField(e,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(e);let r=this.parseBlocks();return r!=null&&r.isRemaining()?new Ks(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Ks(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,s;do{let r=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),e=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),e=s.isFinished()):(s=this.parseNumericBlock(),e=s.isFinished()),!(r!==this.current.getPosition())&&!e)break}while(!e);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let s;return e.isSecondDigitFNC1()?s=new Ks(this.current.getPosition(),this.buffer.toString()):s=new Ks(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Us(!0,s)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let s=new Ks(this.current.getPosition(),this.buffer.toString());return new Us(!0,s)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Us(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let s=new Ks(this.current.getPosition(),this.buffer.toString());return new Us(!0,s)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Us(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let s=new Ks(this.current.getPosition(),this.buffer.toString());return new Us(!0,s)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Us(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,5);if(s>=5&&s<16)return!0;if(e+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253}decodeIsoIec646(e){let s=this.extractNumericValueFromBitArray(e,5);if(s===15)return new Zt(e+5,Zt.FNC1);if(s>=5&&s<15)return new Zt(e+5,"0"+(s-5));let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Zt(e+7,""+(r+1));if(r>=90&&r<116)return new Zt(e+7,""+(r+7));let i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new F}return new Zt(e+8,a)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,5);if(s>=5&&s<16)return!0;if(e+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63}decodeAlphanumeric(e){let s=this.extractNumericValueFromBitArray(e,5);if(s===15)return new Zt(e+5,Zt.FNC1);if(s>=5&&s<15)return new Zt(e+5,"0"+(s-5));let r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Zt(e+6,""+(r+33));let i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new rs("Decoding invalid alphanumeric value: "+r)}return new Zt(e+6,i)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let s=0;s<5&&s+e<this.information.getSize();++s)if(s===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+s))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let s=e;s<e+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let s=0;s<4&&s+e<this.information.getSize();++s)if(this.information.get(e+s))return!1;return!0}}class gi{constructor(e){this.information=e,this.generalDecoder=new Hr(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Es extends gi{constructor(e){super(e)}encodeCompressedGtin(e,s){e.append("(01)");let r=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,s,r)}encodeCompressedGtinWithoutAI(e,s,r){for(let i=0;i<4;++i){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*i,10);a/100===0&&e.append("0"),a/10===0&&e.append("0"),e.append(a)}Es.appendCheckDigit(e,r)}static appendCheckDigit(e,s){let r=0;for(let i=0;i<13;i++){let a=e.charAt(i+s).charCodeAt(0)-48;r+=(i&1)===0?3*a:a}r=10-r%10,r===10&&(r=0),e.append(r)}}Es.GTIN_SIZE=40;class Ps extends Es{constructor(e){super(e)}parseInformation(){let e=new W;e.append("(01)");let s=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(Ps.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,Ps.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(e,Ps.HEADER_SIZE+44)}}Ps.HEADER_SIZE=4;class gn extends gi{constructor(e){super(e)}parseInformation(){let e=new W;return this.getGeneralDecoder().decodeAllCodes(e,gn.HEADER_SIZE)}}gn.HEADER_SIZE=5;class yn extends Es{constructor(e){super(e)}encodeCompressedWeight(e,s,r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(s,r);this.addWeightCode(e,i);let a=this.checkWeight(i),o=1e5;for(let c=0;c<5;++c)a/o===0&&e.append("0"),o/=10;e.append(a)}}class $s extends yn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=$s.HEADER_SIZE+yn.GTIN_SIZE+$s.WEIGHT_SIZE)throw new I;let e=new W;return this.encodeCompressedGtin(e,$s.HEADER_SIZE),this.encodeCompressedWeight(e,$s.HEADER_SIZE+yn.GTIN_SIZE,$s.WEIGHT_SIZE),e.toString()}}$s.HEADER_SIZE=5,$s.WEIGHT_SIZE=15;class Ji extends $s{constructor(e){super(e)}addWeightCode(e,s){e.append("(3103)")}checkWeight(e){return e}}class ea extends $s{constructor(e){super(e)}addWeightCode(e,s){s<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Ws extends Es{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Ws.HEADER_SIZE+Es.GTIN_SIZE)throw new I;let e=new W;this.encodeCompressedGtin(e,Ws.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Ws.HEADER_SIZE+Es.GTIN_SIZE,Ws.LAST_DIGIT_SIZE);e.append("(392"),e.append(s),e.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(Ws.HEADER_SIZE+Es.GTIN_SIZE+Ws.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()}}Ws.HEADER_SIZE=8,Ws.LAST_DIGIT_SIZE=2;class ns extends Es{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<ns.HEADER_SIZE+Es.GTIN_SIZE)throw new I;let e=new W;this.encodeCompressedGtin(e,ns.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(ns.HEADER_SIZE+Es.GTIN_SIZE,ns.LAST_DIGIT_SIZE);e.append("(393"),e.append(s),e.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(ns.HEADER_SIZE+Es.GTIN_SIZE+ns.LAST_DIGIT_SIZE,ns.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);let i=this.getGeneralDecoder().decodeGeneralPurposeField(ns.HEADER_SIZE+Es.GTIN_SIZE+ns.LAST_DIGIT_SIZE+ns.FIRST_THREE_DIGITS_SIZE,null);return e.append(i.getNewString()),e.toString()}}ns.HEADER_SIZE=8,ns.LAST_DIGIT_SIZE=2,ns.FIRST_THREE_DIGITS_SIZE=10;class St extends yn{constructor(e,s,r){super(e),this.dateCode=r,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE+St.DATE_SIZE)throw new I;let e=new W;return this.encodeCompressedGtin(e,St.HEADER_SIZE),this.encodeCompressedWeight(e,St.HEADER_SIZE+St.GTIN_SIZE,St.WEIGHT_SIZE),this.encodeCompressedDate(e,St.HEADER_SIZE+St.GTIN_SIZE+St.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,s){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(s,St.DATE_SIZE);if(r==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let i=r%32;r/=32;let a=r%12+1;r/=12;let o=r;o/10==0&&e.append("0"),e.append(o),a/10==0&&e.append("0"),e.append(a),i/10==0&&e.append("0"),e.append(i)}addWeightCode(e,s){e.append("("),e.append(this.firstAIdigits),e.append(s/1e5),e.append(")")}checkWeight(e){return e%1e5}}St.HEADER_SIZE=8,St.WEIGHT_SIZE=20,St.DATE_SIZE=16;function ta(R){try{if(R.get(1))return new Ps(R);if(!R.get(2))return new gn(R);switch(Hr.extractNumericValueFromBitArray(R,1,4)){case 4:return new Ji(R);case 5:return new ea(R)}switch(Hr.extractNumericValueFromBitArray(R,1,5)){case 12:return new Ws(R);case 13:return new ns(R)}switch(Hr.extractNumericValueFromBitArray(R,1,7)){case 56:return new St(R,"310","11");case 57:return new St(R,"320","11");case 58:return new St(R,"310","13");case 59:return new St(R,"320","13");case 60:return new St(R,"310","15");case 61:return new St(R,"320","15");case 62:return new St(R,"310","17");case 63:return new St(R,"320","17")}}catch(e){throw console.log(e),new rs("unknown decoder: "+R)}}class Et{constructor(e,s,r,i){this.leftchar=e,this.rightchar=s,this.finderpattern=r,this.maybeLast=i}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,s){return e instanceof Et?Et.equalsOrNull(e.leftchar,s.leftchar)&&Et.equalsOrNull(e.rightchar,s.rightchar)&&Et.equalsOrNull(e.finderpattern,s.finderpattern):!1}static equalsOrNull(e,s){return e===null?s===null:Et.equals(e,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class yi{constructor(e,s,r){this.pairs=e,this.rowNumber=s,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,s){return e instanceof yi?this.checkEqualitity(e,s)&&e.wasReversed===s.wasReversed:!1}checkEqualitity(e,s){if(!e||!s)return;let r;return e.forEach((i,a)=>{s.forEach(o=>{i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}}class we extends qt{constructor(e){super(...arguments),this.pairs=new Array(we.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,s,r){this.pairs.length=0,this.startFromEven=!1;try{return we.constructResult(this.decodeRow2pairs(e,s))}catch(i){this.verbose&&console.log(i)}return this.pairs.length=0,this.startFromEven=!0,we.constructResult(this.decodeRow2pairs(e,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,s){let r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,e))}catch(a){if(a instanceof I){if(!this.pairs.length)throw new I;r=!0}}if(this.checkChecksum())return this.pairs;let i;if(this.rows.length?i=!0:i=!1,this.storeRow(e,!1),i){let a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new I}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(r){this.verbose&&console.log(r)}return e&&(this.rows=this.rows.reverse()),s}checkRows(e,s){for(let r=s;r<this.rows.length;r++){let i=this.rows[r];this.pairs.length=0;for(let o of e)this.pairs.push(o.getPairs());if(this.pairs.push(i.getPairs()),!we.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let a=new Array(e);a.push(i);try{return this.checkRows(a,r+1)}catch(o){this.verbose&&console.log(o)}}throw new I}static isValidSequence(e){for(let s of we.FINDER_PATTERN_SEQUENCES){if(e.length>s.length)continue;let r=!0;for(let i=0;i<e.length;i++)if(e[i].getFinderPattern().getValue()!=s[i]){r=!1;break}if(r)return!0}return!1}storeRow(e,s){let r=0,i=!1,a=!1;for(;r<this.rows.length;){let o=this.rows[r];if(o.getRowNumber()>e){a=o.isEquivalent(this.pairs);break}i=o.isEquivalent(this.pairs),r++}a||i||we.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new yi(this.pairs,e,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,s){for(let r of s)if(r.getPairs().length!==e.length){for(let i of r.getPairs())for(let a of e)if(Et.equals(i,a))break}}static isPartialRow(e,s){for(let r of s){let i=!0;for(let a of e){let o=!1;for(let c of r.getPairs())if(a.equals(c)){o=!0;break}if(!o){i=!1;break}}if(i)return!0}return!1}getRows(){return this.rows}static constructResult(e){let s=pi.buildBitArray(e),i=ta(s).parseInformation(),a=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),c=[a[0],a[1],o[0],o[1]];return new ee(i,null,null,c,ye.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),s=e.getLeftChar(),r=e.getRightChar();if(r==null)return!1;let i=r.getChecksumPortion(),a=2;for(let c=1;c<this.pairs.size();++c){let m=this.pairs.get(c);i+=m.getLeftChar().getChecksumPortion(),a++;let p=m.getRightChar();p!=null&&(i+=p.getChecksumPortion(),a++)}return i%=211,211*(a-4)+i==s.getValue()}static getNextSecondBar(e,s){let r;return e.get(s)?(r=e.getNextUnset(s),r=e.getNextSet(r)):(r=e.getNextSet(s),r=e.getNextUnset(r)),r}retrieveNextPair(e,s,r){let i=s.length%2==0;this.startFromEven&&(i=!i);let a,o=!0,c=-1;do this.findNextPair(e,s,c),a=this.parseFoundFinderPattern(e,r,i),a==null?c=we.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);let m=this.decodeDataCharacter(e,a,i,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new I;let p;try{p=this.decodeDataCharacter(e,a,i,!1)}catch(b){p=null,this.verbose&&console.log(b)}return new Et(m,p,a,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,s,r){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o;r>=0?o=r:this.isEmptyPair(s)?o=0:o=s[s.length-1].getFinderPattern().getStartEnd()[1];let c=s.length%2!=0;this.startFromEven&&(c=!c);let m=!1;for(;o<a&&(m=!e.get(o),!!m);)o++;let p=0,b=o;for(let v=o;v<a;v++)if(e.get(v)!=m)i[p]++;else{if(p==3){if(c&&we.reverseCounters(i),we.isFinderPattern(i)){this.startEnd[0]=b,this.startEnd[1]=v;return}c&&we.reverseCounters(i),b+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,p--}else p++;i[p]=1,m=!m}throw new I}static reverseCounters(e){let s=e.length;for(let r=0;r<s/2;++r){let i=e[r];e[r]=e[s-r-1],e[s-r-1]=i}}parseFoundFinderPattern(e,s,r){let i,a,o;if(r){let p=this.startEnd[0]-1;for(;p>=0&&!e.get(p);)p--;p++,i=this.startEnd[0]-p,a=p,o=this.startEnd[1]}else a=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),i=o-this.startEnd[1];let c=this.getDecodeFinderCounters();q.arraycopy(c,0,c,1,c.length-1),c[0]=i;let m;try{m=this.parseFinderValue(c,we.FINDER_PATTERNS)}catch{return null}return new fn(m,[a,o],a,o,s)}decodeDataCharacter(e,s,r,i){let a=this.getDataCharacterCounters();for(let yt=0;yt<a.length;yt++)a[yt]=0;if(i)we.recordPatternInReverse(e,s.getStartEnd()[0],a);else{we.recordPattern(e,s.getStartEnd()[1],a);for(let yt=0,Ot=a.length-1;yt<Ot;yt++,Ot--){let ms=a[yt];a[yt]=a[Ot],a[Ot]=ms}}let o=17,c=at.sum(new Int32Array(a))/o,m=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(c-m)/m>.3)throw new I;let p=this.getOddCounts(),b=this.getEvenCounts(),v=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let yt=0;yt<a.length;yt++){let Ot=1*a[yt]/c,ms=Ot+.5;if(ms<1){if(Ot<.3)throw new I;ms=1}else if(ms>8){if(Ot>8.7)throw new I;ms=8}let Tr=yt/2;(yt&1)==0?(p[Tr]=ms,v[Tr]=Ot-ms):(b[Tr]=ms,S[Tr]=Ot-ms)}this.adjustOddEvenCounts(o);let P=4*s.getValue()+(r?0:2)+(i?0:1)-1,H=0,Z=0;for(let yt=p.length-1;yt>=0;yt--){if(we.isNotA1left(s,r,i)){let Ot=we.WEIGHTS[P][2*yt];Z+=p[yt]*Ot}H+=p[yt]}let re=0;for(let yt=b.length-1;yt>=0;yt--)if(we.isNotA1left(s,r,i)){let Ot=we.WEIGHTS[P][2*yt+1];re+=b[yt]*Ot}let he=Z+re;if((H&1)!=0||H>13||H<4)throw new I;let ke=(13-H)/2,Ie=we.SYMBOL_WIDEST[ke],ve=9-Ie,ot=ys.getRSSvalue(p,Ie,!0),tt=ys.getRSSvalue(b,ve,!1),ws=we.EVEN_TOTAL_SUBSET[ke],Xs=we.GSUM[ke],Xt=ot*ws+tt+Xs;return new yr(Xt,he)}static isNotA1left(e,s,r){return!(e.getValue()==0&&s&&r)}adjustOddEvenCounts(e){let s=at.sum(new Int32Array(this.getOddCounts())),r=at.sum(new Int32Array(this.getEvenCounts())),i=!1,a=!1;s>13?a=!0:s<4&&(i=!0);let o=!1,c=!1;r>13?c=!0:r<4&&(o=!0);let m=s+r-e,p=(s&1)==1,b=(r&1)==0;if(m==1)if(p){if(b)throw new I;a=!0}else{if(!b)throw new I;c=!0}else if(m==-1)if(p){if(b)throw new I;i=!0}else{if(!b)throw new I;o=!0}else if(m==0){if(p){if(!b)throw new I;s<r?(i=!0,c=!0):(a=!0,o=!0)}else if(b)throw new I}else throw new I;if(i){if(a)throw new I;we.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&we.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new I;we.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&we.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}we.SYMBOL_WIDEST=[7,5,4,3,1],we.EVEN_TOTAL_SUBSET=[4,20,52,104,204],we.GSUM=[0,348,1388,2948,3988],we.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],we.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],we.FINDER_PAT_A=0,we.FINDER_PAT_B=1,we.FINDER_PAT_C=2,we.FINDER_PAT_D=3,we.FINDER_PAT_E=4,we.FINDER_PAT_F=5,we.FINDER_PATTERN_SEQUENCES=[[we.FINDER_PAT_A,we.FINDER_PAT_A],[we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B],[we.FINDER_PAT_A,we.FINDER_PAT_C,we.FINDER_PAT_B,we.FINDER_PAT_D],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_C],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_D,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_D],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_E],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F]],we.MAX_PAIRS=11;class sa extends yr{constructor(e,s,r){super(e,s),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class vt extends qt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,s,r){const i=this.decodePair(s,!1,e,r);vt.addOrTally(this.possibleLeftPairs,i),s.reverse();let a=this.decodePair(s,!0,e,r);vt.addOrTally(this.possibleRightPairs,a),s.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1){for(let c of this.possibleRightPairs)if(c.getCount()>1&&vt.checkChecksum(o,c))return vt.constructResult(o,c)}throw new I}static addOrTally(e,s){if(s==null)return;let r=!1;for(let i of e)if(i.getValue()===s.getValue()){i.incrementCount(),r=!0;break}r||e.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,s){let r=4537077*e.getValue()+s.getValue(),i=new String(r).toString(),a=new W;for(let p=13-i.length;p>0;p--)a.append("0");a.append(i);let o=0;for(let p=0;p<13;p++){let b=a.charAt(p).charCodeAt(0)-48;o+=(p&1)===0?3*b:b}o=10-o%10,o===10&&(o=0),a.append(o.toString());let c=e.getFinderPattern().getResultPoints(),m=s.getFinderPattern().getResultPoints();return new ee(a.toString(),null,0,[c[0],c[1],m[0],m[1]],ye.RSS_14,new Date().getTime())}static checkChecksum(e,s){let r=(e.getChecksumPortion()+16*s.getChecksumPortion())%79,i=9*e.getFinderPattern().getValue()+s.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,r===i}decodePair(e,s,r,i){try{let a=this.findFinderPattern(e,s),o=this.parseFoundFinderPattern(e,r,s,a),c=i==null?null:i.get(ce.NEED_RESULT_POINT_CALLBACK);if(c!=null){let b=(a[0]+a[1])/2;s&&(b=e.getSize()-1-b),c.foundPossibleResultPoint(new Pe(b,r))}let m=this.decodeDataCharacter(e,o,!0),p=this.decodeDataCharacter(e,o,!1);return new sa(1597*m.getValue()+p.getValue(),m.getChecksumPortion()+4*p.getChecksumPortion(),o)}catch{return null}}decodeDataCharacter(e,s,r){let i=this.getDataCharacterCounters();for(let re=0;re<i.length;re++)i[re]=0;if(r)Ke.recordPatternInReverse(e,s.getStartEnd()[0],i);else{Ke.recordPattern(e,s.getStartEnd()[1]+1,i);for(let re=0,he=i.length-1;re<he;re++,he--){let ke=i[re];i[re]=i[he],i[he]=ke}}let a=r?16:15,o=at.sum(new Int32Array(i))/a,c=this.getOddCounts(),m=this.getEvenCounts(),p=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let re=0;re<i.length;re++){let he=i[re]/o,ke=Math.floor(he+.5);ke<1?ke=1:ke>8&&(ke=8);let Ie=Math.floor(re/2);(re&1)===0?(c[Ie]=ke,p[Ie]=he-ke):(m[Ie]=ke,b[Ie]=he-ke)}this.adjustOddEvenCounts(r,a);let v=0,S=0;for(let re=c.length-1;re>=0;re--)S*=9,S+=c[re],v+=c[re];let P=0,H=0;for(let re=m.length-1;re>=0;re--)P*=9,P+=m[re],H+=m[re];let Z=S+3*P;if(r){if((v&1)!==0||v>12||v<4)throw new I;let re=(12-v)/2,he=vt.OUTSIDE_ODD_WIDEST[re],ke=9-he,Ie=ys.getRSSvalue(c,he,!1),ve=ys.getRSSvalue(m,ke,!0),ot=vt.OUTSIDE_EVEN_TOTAL_SUBSET[re],tt=vt.OUTSIDE_GSUM[re];return new yr(Ie*ot+ve+tt,Z)}else{if((H&1)!==0||H>10||H<4)throw new I;let re=(10-H)/2,he=vt.INSIDE_ODD_WIDEST[re],ke=9-he,Ie=ys.getRSSvalue(c,he,!0),ve=ys.getRSSvalue(m,ke,!1),ot=vt.INSIDE_ODD_TOTAL_SUBSET[re],tt=vt.INSIDE_GSUM[re];return new yr(ve*ot+Ie+tt,Z)}}findFinderPattern(e,s){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),a=!1,o=0;for(;o<i&&(a=!e.get(o),s!==a);)o++;let c=0,m=o;for(let p=o;p<i;p++)if(e.get(p)!==a)r[c]++;else{if(c===3){if(qt.isFinderPattern(r))return[m,p];m+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,c--}else c++;r[c]=1,a=!a}throw new I}parseFoundFinderPattern(e,s,r,i){let a=e.get(i[0]),o=i[0]-1;for(;o>=0&&a!==e.get(o);)o--;o++;const c=i[0]-o,m=this.getDecodeFinderCounters(),p=new Int32Array(m.length);q.arraycopy(m,0,p,1,m.length-1),p[0]=c;const b=this.parseFinderValue(p,vt.FINDER_PATTERNS);let v=o,S=i[1];return r&&(v=e.getSize()-1-v,S=e.getSize()-1-S),new fn(b,[o,i[1]],v,S,s)}adjustOddEvenCounts(e,s){let r=at.sum(new Int32Array(this.getOddCounts())),i=at.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1,c=!1,m=!1;e?(r>12?o=!0:r<4&&(a=!0),i>12?m=!0:i<4&&(c=!0)):(r>11?o=!0:r<5&&(a=!0),i>10?m=!0:i<4&&(c=!0));let p=r+i-s,b=(r&1)===(e?1:0),v=(i&1)===1;if(p===1)if(b){if(v)throw new I;o=!0}else{if(!v)throw new I;m=!0}else if(p===-1)if(b){if(v)throw new I;a=!0}else{if(!v)throw new I;c=!0}else if(p===0){if(b){if(!v)throw new I;r<i?(a=!0,m=!0):(o=!0,c=!0)}else if(v)throw new I}else throw new I;if(a){if(o)throw new I;qt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&qt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(m)throw new I;qt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&qt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}vt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],vt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],vt.OUTSIDE_GSUM=[0,161,961,2015,2715],vt.INSIDE_GSUM=[0,336,1036,1516],vt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],vt.INSIDE_ODD_WIDEST=[2,4,6,8],vt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class zr extends Ke{constructor(e,s){super(),this.readers=[],this.verbose=s===!0;const r=e?e.get(ce.POSSIBLE_FORMATS):null,i=e&&e.get(ce.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;r?((r.includes(ye.EAN_13)||r.includes(ye.UPC_A)||r.includes(ye.EAN_8)||r.includes(ye.UPC_E))&&this.readers.push(new Wn(e)),r.includes(ye.CODE_39)&&this.readers.push(new zt(i)),r.includes(ye.CODE_128)&&this.readers.push(new Ne),r.includes(ye.ITF)&&this.readers.push(new gt),r.includes(ye.RSS_14)&&this.readers.push(new vt),r.includes(ye.RSS_EXPANDED)&&this.readers.push(new we(this.verbose))):(this.readers.push(new Wn(e)),this.readers.push(new zt),this.readers.push(new Wn(e)),this.readers.push(new Ne),this.readers.push(new gt),this.readers.push(new vt),this.readers.push(new we(this.verbose)))}decodeRow(e,s,r){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,s,r)}catch{}throw new I}reset(){this.readers.forEach(e=>e.reset())}}class ra extends Te{constructor(e=500,s){super(new zr(s),e,s)}}class xt{constructor(e,s,r){this.ecCodewords=e,this.ecBlocks=[s],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class nt{constructor(e,s){this.count=e,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ct{constructor(e,s,r,i,a,o){this.versionNumber=e,this.symbolSizeRows=s,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;let c=0;const m=o.getECCodewords(),p=o.getECBlocks();for(let b of p)c+=b.getCount()*(b.getDataCodewords()+m);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,s){if((e&1)!==0||(s&1)!==0)throw new F;for(let r of ct.VERSIONS)if(r.symbolSizeRows===e&&r.symbolSizeColumns===s)return r;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new ct(1,10,10,8,8,new xt(5,new nt(1,3))),new ct(2,12,12,10,10,new xt(7,new nt(1,5))),new ct(3,14,14,12,12,new xt(10,new nt(1,8))),new ct(4,16,16,14,14,new xt(12,new nt(1,12))),new ct(5,18,18,16,16,new xt(14,new nt(1,18))),new ct(6,20,20,18,18,new xt(18,new nt(1,22))),new ct(7,22,22,20,20,new xt(20,new nt(1,30))),new ct(8,24,24,22,22,new xt(24,new nt(1,36))),new ct(9,26,26,24,24,new xt(28,new nt(1,44))),new ct(10,32,32,14,14,new xt(36,new nt(1,62))),new ct(11,36,36,16,16,new xt(42,new nt(1,86))),new ct(12,40,40,18,18,new xt(48,new nt(1,114))),new ct(13,44,44,20,20,new xt(56,new nt(1,144))),new ct(14,48,48,22,22,new xt(68,new nt(1,174))),new ct(15,52,52,24,24,new xt(42,new nt(2,102))),new ct(16,64,64,14,14,new xt(56,new nt(2,140))),new ct(17,72,72,16,16,new xt(36,new nt(4,92))),new ct(18,80,80,18,18,new xt(48,new nt(4,114))),new ct(19,88,88,20,20,new xt(56,new nt(4,144))),new ct(20,96,96,22,22,new xt(68,new nt(4,174))),new ct(21,104,104,24,24,new xt(56,new nt(6,136))),new ct(22,120,120,18,18,new xt(68,new nt(6,175))),new ct(23,132,132,20,20,new xt(62,new nt(8,163))),new ct(24,144,144,22,22,new xt(62,new nt(8,156),new nt(2,155))),new ct(25,8,18,6,16,new xt(7,new nt(1,5))),new ct(26,8,32,6,14,new xt(11,new nt(1,10))),new ct(27,12,26,10,24,new xt(14,new nt(1,16))),new ct(28,12,36,10,16,new xt(18,new nt(1,22))),new ct(29,16,36,14,16,new xt(24,new nt(1,32))),new ct(30,16,48,14,22,new xt(28,new nt(1,49)))]}}ct.VERSIONS=ct.buildVersions();class As{constructor(e){const s=e.getHeight();if(s<8||s>144||(s&1)!==0)throw new F;this.version=As.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new me(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const s=e.getHeight(),r=e.getWidth();return ct.getVersionForDimensions(s,r)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let s=0,r=4,i=0;const a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let c=!1,m=!1,p=!1,b=!1;do if(r===a&&i===0&&!c)e[s++]=this.readCorner1(a,o)&255,r-=2,i+=2,c=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!m)e[s++]=this.readCorner2(a,o)&255,r-=2,i+=2,m=!0;else if(r===a+4&&i===2&&(o&7)===0&&!p)e[s++]=this.readCorner3(a,o)&255,r-=2,i+=2,p=!0;else if(r===a-2&&i===0&&(o&7)===4&&!b)e[s++]=this.readCorner4(a,o)&255,r-=2,i+=2,b=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[s++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[s++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(s!==this.version.getTotalCodewords())throw new F;return e}readModule(e,s,r,i){return e<0&&(e+=r,s+=4-(r+4&7)),s<0&&(s+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(s,e),this.mappingBitMatrix.get(s,e)}readUtah(e,s,r,i){let a=0;return this.readModule(e-2,s-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,s-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,s-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,s-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,s,r,i)&&(a|=1),a<<=1,this.readModule(e,s-2,r,i)&&(a|=1),a<<=1,this.readModule(e,s-1,r,i)&&(a|=1),a<<=1,this.readModule(e,s,r,i)&&(a|=1),a}readCorner1(e,s){let r=0;return this.readModule(e-1,0,e,s)&&(r|=1),r<<=1,this.readModule(e-1,1,e,s)&&(r|=1),r<<=1,this.readModule(e-1,2,e,s)&&(r|=1),r<<=1,this.readModule(0,s-2,e,s)&&(r|=1),r<<=1,this.readModule(0,s-1,e,s)&&(r|=1),r<<=1,this.readModule(1,s-1,e,s)&&(r|=1),r<<=1,this.readModule(2,s-1,e,s)&&(r|=1),r<<=1,this.readModule(3,s-1,e,s)&&(r|=1),r}readCorner2(e,s){let r=0;return this.readModule(e-3,0,e,s)&&(r|=1),r<<=1,this.readModule(e-2,0,e,s)&&(r|=1),r<<=1,this.readModule(e-1,0,e,s)&&(r|=1),r<<=1,this.readModule(0,s-4,e,s)&&(r|=1),r<<=1,this.readModule(0,s-3,e,s)&&(r|=1),r<<=1,this.readModule(0,s-2,e,s)&&(r|=1),r<<=1,this.readModule(0,s-1,e,s)&&(r|=1),r<<=1,this.readModule(1,s-1,e,s)&&(r|=1),r}readCorner3(e,s){let r=0;return this.readModule(e-1,0,e,s)&&(r|=1),r<<=1,this.readModule(e-1,s-1,e,s)&&(r|=1),r<<=1,this.readModule(0,s-3,e,s)&&(r|=1),r<<=1,this.readModule(0,s-2,e,s)&&(r|=1),r<<=1,this.readModule(0,s-1,e,s)&&(r|=1),r<<=1,this.readModule(1,s-3,e,s)&&(r|=1),r<<=1,this.readModule(1,s-2,e,s)&&(r|=1),r<<=1,this.readModule(1,s-1,e,s)&&(r|=1),r}readCorner4(e,s){let r=0;return this.readModule(e-3,0,e,s)&&(r|=1),r<<=1,this.readModule(e-2,0,e,s)&&(r|=1),r<<=1,this.readModule(e-1,0,e,s)&&(r|=1),r<<=1,this.readModule(0,s-2,e,s)&&(r|=1),r<<=1,this.readModule(0,s-1,e,s)&&(r|=1),r<<=1,this.readModule(1,s-1,e,s)&&(r|=1),r<<=1,this.readModule(2,s-1,e,s)&&(r|=1),r<<=1,this.readModule(3,s-1,e,s)&&(r|=1),r}extractDataRegion(e){const s=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==s)throw new _("Dimension of bitMatrix must match the version size");const i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=s/i|0,c=r/a|0,m=o*i,p=c*a,b=new me(p,m);for(let v=0;v<o;++v){const S=v*i;for(let P=0;P<c;++P){const H=P*a;for(let Z=0;Z<i;++Z){const re=v*(i+2)+1+Z,he=S+Z;for(let ke=0;ke<a;++ke){const Ie=P*(a+2)+1+ke;if(e.get(Ie,re)){const ve=H+ke;b.set(ve,he)}}}}}return b}}class Ei{constructor(e,s){this.numDataCodewords=e,this.codewords=s}static getDataBlocks(e,s){const r=s.getECBlocks();let i=0;const a=r.getECBlocks();for(let Z of a)i+=Z.getCount();const o=new Array(i);let c=0;for(let Z of a)for(let re=0;re<Z.getCount();re++){const he=Z.getDataCodewords(),ke=r.getECCodewords()+he;o[c++]=new Ei(he,new Uint8Array(ke))}const p=o[0].codewords.length-r.getECCodewords(),b=p-1;let v=0;for(let Z=0;Z<b;Z++)for(let re=0;re<c;re++)o[re].codewords[Z]=e[v++];const S=s.getVersionNumber()===24,P=S?8:c;for(let Z=0;Z<P;Z++)o[Z].codewords[p-1]=e[v++];const H=o[0].codewords.length;for(let Z=p;Z<H;Z++)for(let re=0;re<c;re++){const he=S?(re+8)%c:re,ke=S&&he>7?Z-1:Z;o[he].codewords[ke]=e[v++]}if(v!==e.length)throw new _;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ji{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new _(""+e);let s=0,r=this.bitOffset,i=this.byteOffset;const a=this.bytes;if(r>0){const o=8-r,c=e<o?e:o,m=o-c,p=255>>8-c<<m;s=(a[i]&p)>>m,e-=c,r+=c,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)s=s<<8|a[i]&255,i++,e-=8;if(e>0){const o=8-e,c=255>>o<<o;s=s<<e|(a[i]&c)>>o,r+=e}}return this.bitOffset=r,this.byteOffset=i,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Gt;(function(R){R[R.PAD_ENCODE=0]="PAD_ENCODE",R[R.ASCII_ENCODE=1]="ASCII_ENCODE",R[R.C40_ENCODE=2]="C40_ENCODE",R[R.TEXT_ENCODE=3]="TEXT_ENCODE",R[R.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",R[R.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",R[R.BASE256_ENCODE=6]="BASE256_ENCODE"})(Gt||(Gt={}));class Hs{static decode(e){const s=new ji(e),r=new W,i=new W,a=new Array;let o=Gt.ASCII_ENCODE;do if(o===Gt.ASCII_ENCODE)o=this.decodeAsciiSegment(s,r,i);else{switch(o){case Gt.C40_ENCODE:this.decodeC40Segment(s,r);break;case Gt.TEXT_ENCODE:this.decodeTextSegment(s,r);break;case Gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,r);break;case Gt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,r);break;case Gt.BASE256_ENCODE:this.decodeBase256Segment(s,r,a);break;default:throw new F}o=Gt.ASCII_ENCODE}while(o!==Gt.PAD_ENCODE&&s.available()>0);return i.length()>0&&r.append(i.toString()),new Ue(e,r.toString(),a.length===0?null:a,null)}static decodeAsciiSegment(e,s,r){let i=!1;do{let a=e.readBits(8);if(a===0)throw new F;if(a<=128)return i&&(a+=128),s.append(String.fromCharCode(a-1)),Gt.ASCII_ENCODE;if(a===129)return Gt.PAD_ENCODE;if(a<=229){const o=a-130;o<10&&s.append("0"),s.append(""+o)}else switch(a){case 230:return Gt.C40_ENCODE;case 231:return Gt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:s.append("[)>05"),r.insert(0,"");break;case 237:s.append("[)>06"),r.insert(0,"");break;case 238:return Gt.ANSIX12_ENCODE;case 239:return Gt.TEXT_ENCODE;case 240:return Gt.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new F;break}}while(e.available()>0);return Gt.ASCII_ENCODE}static decodeC40Segment(e,s){let r=!1;const i=[];let a=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(let c=0;c<3;c++){const m=i[c];switch(a){case 0:if(m<3)a=m+1;else if(m<this.C40_BASIC_SET_CHARS.length){const p=this.C40_BASIC_SET_CHARS[m];r?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),r=!1):s.append(p)}else throw new F;break;case 1:r?(s.append(String.fromCharCode(m+128)),r=!1):s.append(String.fromCharCode(m)),a=0;break;case 2:if(m<this.C40_SHIFT2_SET_CHARS.length){const p=this.C40_SHIFT2_SET_CHARS[m];r?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),r=!1):s.append(p)}else switch(m){case 27:s.append("");break;case 30:r=!0;break;default:throw new F}a=0;break;case 3:r?(s.append(String.fromCharCode(m+224)),r=!1):s.append(String.fromCharCode(m+96)),a=0;break;default:throw new F}}}while(e.available()>0)}static decodeTextSegment(e,s){let r=!1,i=[],a=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(let c=0;c<3;c++){const m=i[c];switch(a){case 0:if(m<3)a=m+1;else if(m<this.TEXT_BASIC_SET_CHARS.length){const p=this.TEXT_BASIC_SET_CHARS[m];r?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),r=!1):s.append(p)}else throw new F;break;case 1:r?(s.append(String.fromCharCode(m+128)),r=!1):s.append(String.fromCharCode(m)),a=0;break;case 2:if(m<this.TEXT_SHIFT2_SET_CHARS.length){const p=this.TEXT_SHIFT2_SET_CHARS[m];r?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),r=!1):s.append(p)}else switch(m){case 27:s.append("");break;case 30:r=!0;break;default:throw new F}a=0;break;case 3:if(m<this.TEXT_SHIFT3_SET_CHARS.length){const p=this.TEXT_SHIFT3_SET_CHARS[m];r?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),r=!1):s.append(p),a=0}else throw new F;break;default:throw new F}}}while(e.available()>0)}static decodeAnsiX12Segment(e,s){const r=[];do{if(e.available()===8)return;const i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(let a=0;a<3;a++){const o=r[a];switch(o){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(o<14)s.append(String.fromCharCode(o+44));else if(o<40)s.append(String.fromCharCode(o+51));else throw new F;break}}}while(e.available()>0)}static parseTwoBytes(e,s,r){let i=(e<<8)+s-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40}static decodeEdifactSegment(e,s){do{if(e.available()<=16)return;for(let r=0;r<4;r++){let i=e.readBits(6);if(i===31){const a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),s.append(String.fromCharCode(i))}}while(e.available()>0)}static decodeBase256Segment(e,s,r){let i=1+e.getByteOffset();const a=this.unrandomize255State(e.readBits(8),i++);let o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new F;const c=new Uint8Array(o);for(let m=0;m<o;m++){if(e.available()<8)throw new F;c[m]=this.unrandomize255State(e.readBits(8),i++)}r.push(c);try{s.append(be.decode(c,L.ISO88591))}catch(m){throw new rs("Platform does not support required encoding: "+m.message)}}static unrandomize255State(e,s){const r=149*s%255+1,i=e-r;return i>=0?i:i+256}}Hs.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Hs.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Hs.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Hs.TEXT_SHIFT2_SET_CHARS=Hs.C40_SHIFT2_SET_CHARS,Hs.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Hn{constructor(){this.rsDecoder=new cs(rt.DATA_MATRIX_FIELD_256)}decode(e){const s=new As(e),r=s.getVersion(),i=s.readCodewords(),a=Ei.getDataBlocks(i,r);let o=0;for(let p of a)o+=p.getNumDataCodewords();const c=new Uint8Array(o),m=a.length;for(let p=0;p<m;p++){const b=a[p],v=b.getCodewords(),S=b.getNumDataCodewords();this.correctErrors(v,S);for(let P=0;P<S;P++)c[P*m+p]=v[P]}return Hs.decode(c)}correctErrors(e,s){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-s)}catch{throw new z}for(let i=0;i<s;i++)e[i]=r[i]}}class Nt{constructor(e){this.image=e,this.rectangleDetector=new Ss(this.image)}detect(){const e=this.rectangleDetector.detect();let s=this.detectSolid1(e);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new I;s=this.shiftToModuleCenter(s);const r=s[0],i=s[1],a=s[2],o=s[3];let c=this.transitionsBetween(r,o)+1,m=this.transitionsBetween(a,o)+1;(c&1)===1&&(c+=1),(m&1)===1&&(m+=1),4*c<7*m&&4*m<7*c&&(c=m=Math.max(c,m));let p=Nt.sampleGrid(this.image,r,i,a,o,c,m);return new gr(p,[r,i,a,o])}static shiftPoint(e,s,r){let i=(s.getX()-e.getX())/(r+1),a=(s.getY()-e.getY())/(r+1);return new Pe(e.getX()+i,e.getY()+a)}static moveAway(e,s,r){let i=e.getX(),a=e.getY();return i<s?i-=1:i+=1,a<r?a-=1:a+=1,new Pe(i,a)}detectSolid1(e){let s=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(s,r),c=this.transitionsBetween(r,i),m=this.transitionsBetween(i,a),p=this.transitionsBetween(a,s),b=o,v=[a,s,r,i];return b>c&&(b=c,v[0]=s,v[1]=r,v[2]=i,v[3]=a),b>m&&(b=m,v[0]=r,v[1]=i,v[2]=a,v[3]=s),b>p&&(v[0]=i,v[1]=a,v[2]=s,v[3]=r),v}detectSolid2(e){let s=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(s,a),c=Nt.shiftPoint(r,i,(o+1)*4),m=Nt.shiftPoint(i,r,(o+1)*4),p=this.transitionsBetween(c,s),b=this.transitionsBetween(m,a);return p<b?(e[0]=s,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=s),e}correctTopRight(e){let s=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(s,a),c=this.transitionsBetween(r,a),m=Nt.shiftPoint(s,r,(c+1)*4),p=Nt.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(m,a),c=this.transitionsBetween(p,a);let b=new Pe(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),v=new Pe(a.getX()+(s.getX()-r.getX())/(c+1),a.getY()+(s.getY()-r.getY())/(c+1));if(!this.isValid(b))return this.isValid(v)?v:null;if(!this.isValid(v))return b;let S=this.transitionsBetween(m,b)+this.transitionsBetween(p,b),P=this.transitionsBetween(m,v)+this.transitionsBetween(p,v);return S>P?b:v}shiftToModuleCenter(e){let s=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(s,a)+1,c=this.transitionsBetween(i,a)+1,m=Nt.shiftPoint(s,r,c*4),p=Nt.shiftPoint(i,r,o*4);o=this.transitionsBetween(m,a)+1,c=this.transitionsBetween(p,a)+1,(o&1)===1&&(o+=1),(c&1)===1&&(c+=1);let b=(s.getX()+r.getX()+i.getX()+a.getX())/4,v=(s.getY()+r.getY()+i.getY()+a.getY())/4;s=Nt.moveAway(s,b,v),r=Nt.moveAway(r,b,v),i=Nt.moveAway(i,b,v),a=Nt.moveAway(a,b,v);let S,P;return m=Nt.shiftPoint(s,r,c*4),m=Nt.shiftPoint(m,a,o*4),S=Nt.shiftPoint(r,s,c*4),S=Nt.shiftPoint(S,i,o*4),p=Nt.shiftPoint(i,a,c*4),p=Nt.shiftPoint(p,r,o*4),P=Nt.shiftPoint(a,i,c*4),P=Nt.shiftPoint(P,s,o*4),[m,S,p,P]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,s,r,i,a,o,c){return Oe.getInstance().sampleGrid(e,o,c,.5,.5,o-.5,.5,o-.5,c-.5,.5,c-.5,s.getX(),s.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())}transitionsBetween(e,s){let r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(s.getX()),o=Math.trunc(s.getY()),c=Math.abs(o-i)>Math.abs(a-r);if(c){let Z=r;r=i,i=Z,Z=a,a=o,o=Z}let m=Math.abs(a-r),p=Math.abs(o-i),b=-m/2,v=i<o?1:-1,S=r<a?1:-1,P=0,H=this.image.get(c?i:r,c?r:i);for(let Z=r,re=i;Z!==a;Z+=S){let he=this.image.get(c?re:Z,c?Z:re);if(he!==H&&(P++,H=he),b+=p,b>0){if(re===o)break;re+=v,b-=m}}return P}}class zs{constructor(){this.decoder=new Hn}decode(e,s=null){let r,i;if(s!=null&&s.has(ce.PURE_BARCODE)){const p=zs.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(p),i=zs.NO_POINTS}else{const p=new Nt(e.getBlackMatrix()).detect();r=this.decoder.decode(p.getBits()),i=p.getPoints()}const a=r.getRawBytes(),o=new ee(r.getText(),a,8*a.length,i,ye.DATA_MATRIX,q.currentTimeMillis()),c=r.getByteSegments();c!=null&&o.putMetadata(Le.BYTE_SEGMENTS,c);const m=r.getECLevel();return m!=null&&o.putMetadata(Le.ERROR_CORRECTION_LEVEL,m),o}reset(){}static extractPureBits(e){const s=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(s==null||r==null)throw new I;const i=this.moduleSize(s,e);let a=s[1];const o=r[1];let c=s[0];const p=(r[0]-c+1)/i,b=(o-a+1)/i;if(p<=0||b<=0)throw new I;const v=i/2;a+=v,c+=v;const S=new me(p,b);for(let P=0;P<b;P++){const H=a+P*i;for(let Z=0;Z<p;Z++)e.get(c+Z*i,H)&&S.set(Z,P)}return S}static moduleSize(e,s){const r=s.getWidth();let i=e[0];const a=e[1];for(;i<r&&s.get(i,a);)i++;if(i===r)throw new I;const o=i-e[0];if(o===0)throw new I;return o}}zs.NO_POINTS=[];class io extends Te{constructor(e=500){super(new zs,e)}}var Gr;(function(R){R[R.L=0]="L",R[R.M=1]="M",R[R.Q=2]="Q",R[R.H=3]="H"})(Gr||(Gr={}));class jt{constructor(e,s,r){this.value=e,this.stringValue=s,this.bits=r,jt.FOR_BITS.set(r,this),jt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return jt.L;case"M":return jt.M;case"Q":return jt.Q;case"H":return jt.H;default:throw new M(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof jt))return!1;const s=e;return this.value===s.value}static forBits(e){if(e<0||e>=jt.FOR_BITS.size)throw new _;return jt.FOR_BITS.get(e)}}jt.FOR_BITS=new Map,jt.FOR_VALUE=new Map,jt.L=new jt(Gr.L,"L",1),jt.M=new jt(Gr.M,"M",0),jt.Q=new jt(Gr.Q,"Q",3),jt.H=new jt(Gr.H,"H",2);class Kt{constructor(e){this.errorCorrectionLevel=jt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,s){return te.bitCount(e^s)}static decodeFormatInformation(e,s){const r=Kt.doDecodeFormatInformation(e,s);return r!==null?r:Kt.doDecodeFormatInformation(e^Kt.FORMAT_INFO_MASK_QR,s^Kt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,s){let r=Number.MAX_SAFE_INTEGER,i=0;for(const a of Kt.FORMAT_INFO_DECODE_LOOKUP){const o=a[0];if(o===e||o===s)return new Kt(a[1]);let c=Kt.numBitsDiffering(e,o);c<r&&(i=a[1],r=c),e!==s&&(c=Kt.numBitsDiffering(s,o),c<r&&(i=a[1],r=c))}return r<=3?new Kt(i):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof Kt))return!1;const s=e;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Kt.FORMAT_INFO_MASK_QR=21522,Kt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class oe{constructor(e,...s){this.ecCodewordsPerBlock=e,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const s=this.ecBlocks;for(const r of s)e+=r.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class T{constructor(e,s){this.count=e,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ze{constructor(e,s,...r){this.versionNumber=e,this.alignmentPatternCenters=s,this.ecBlocks=r;let i=0;const a=r[0].getECCodewordsPerBlock(),o=r[0].getECBlocks();for(const c of o)i+=c.getCount()*(c.getDataCodewords()+a);this.totalCodewords=i}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new F;try{return this.getVersionForNumber((e-17)/4)}catch{throw new F}}static getVersionForNumber(e){if(e<1||e>40)throw new _;return ze.VERSIONS[e-1]}static decodeVersionInformation(e){let s=Number.MAX_SAFE_INTEGER,r=0;for(let i=0;i<ze.VERSION_DECODE_INFO.length;i++){const a=ze.VERSION_DECODE_INFO[i];if(a===e)return ze.getVersionForNumber(i+7);const o=Kt.numBitsDiffering(e,a);o<s&&(r=i+7,s=o)}return s<=3?ze.getVersionForNumber(r):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),s=new me(e);s.setRegion(0,0,9,9),s.setRegion(e-8,0,8,9),s.setRegion(0,e-8,9,8);const r=this.alignmentPatternCenters.length;for(let i=0;i<r;i++){const a=this.alignmentPatternCenters[i]-2;for(let o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||s.setRegion(this.alignmentPatternCenters[o]-2,a,5,5)}return s.setRegion(6,9,1,e-17),s.setRegion(9,6,e-17,1),this.versionNumber>6&&(s.setRegion(e-11,0,3,6),s.setRegion(0,e-11,6,3)),s}toString(){return""+this.versionNumber}}ze.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ze.VERSIONS=[new ze(1,new Int32Array(0),new oe(7,new T(1,19)),new oe(10,new T(1,16)),new oe(13,new T(1,13)),new oe(17,new T(1,9))),new ze(2,Int32Array.from([6,18]),new oe(10,new T(1,34)),new oe(16,new T(1,28)),new oe(22,new T(1,22)),new oe(28,new T(1,16))),new ze(3,Int32Array.from([6,22]),new oe(15,new T(1,55)),new oe(26,new T(1,44)),new oe(18,new T(2,17)),new oe(22,new T(2,13))),new ze(4,Int32Array.from([6,26]),new oe(20,new T(1,80)),new oe(18,new T(2,32)),new oe(26,new T(2,24)),new oe(16,new T(4,9))),new ze(5,Int32Array.from([6,30]),new oe(26,new T(1,108)),new oe(24,new T(2,43)),new oe(18,new T(2,15),new T(2,16)),new oe(22,new T(2,11),new T(2,12))),new ze(6,Int32Array.from([6,34]),new oe(18,new T(2,68)),new oe(16,new T(4,27)),new oe(24,new T(4,19)),new oe(28,new T(4,15))),new ze(7,Int32Array.from([6,22,38]),new oe(20,new T(2,78)),new oe(18,new T(4,31)),new oe(18,new T(2,14),new T(4,15)),new oe(26,new T(4,13),new T(1,14))),new ze(8,Int32Array.from([6,24,42]),new oe(24,new T(2,97)),new oe(22,new T(2,38),new T(2,39)),new oe(22,new T(4,18),new T(2,19)),new oe(26,new T(4,14),new T(2,15))),new ze(9,Int32Array.from([6,26,46]),new oe(30,new T(2,116)),new oe(22,new T(3,36),new T(2,37)),new oe(20,new T(4,16),new T(4,17)),new oe(24,new T(4,12),new T(4,13))),new ze(10,Int32Array.from([6,28,50]),new oe(18,new T(2,68),new T(2,69)),new oe(26,new T(4,43),new T(1,44)),new oe(24,new T(6,19),new T(2,20)),new oe(28,new T(6,15),new T(2,16))),new ze(11,Int32Array.from([6,30,54]),new oe(20,new T(4,81)),new oe(30,new T(1,50),new T(4,51)),new oe(28,new T(4,22),new T(4,23)),new oe(24,new T(3,12),new T(8,13))),new ze(12,Int32Array.from([6,32,58]),new oe(24,new T(2,92),new T(2,93)),new oe(22,new T(6,36),new T(2,37)),new oe(26,new T(4,20),new T(6,21)),new oe(28,new T(7,14),new T(4,15))),new ze(13,Int32Array.from([6,34,62]),new oe(26,new T(4,107)),new oe(22,new T(8,37),new T(1,38)),new oe(24,new T(8,20),new T(4,21)),new oe(22,new T(12,11),new T(4,12))),new ze(14,Int32Array.from([6,26,46,66]),new oe(30,new T(3,115),new T(1,116)),new oe(24,new T(4,40),new T(5,41)),new oe(20,new T(11,16),new T(5,17)),new oe(24,new T(11,12),new T(5,13))),new ze(15,Int32Array.from([6,26,48,70]),new oe(22,new T(5,87),new T(1,88)),new oe(24,new T(5,41),new T(5,42)),new oe(30,new T(5,24),new T(7,25)),new oe(24,new T(11,12),new T(7,13))),new ze(16,Int32Array.from([6,26,50,74]),new oe(24,new T(5,98),new T(1,99)),new oe(28,new T(7,45),new T(3,46)),new oe(24,new T(15,19),new T(2,20)),new oe(30,new T(3,15),new T(13,16))),new ze(17,Int32Array.from([6,30,54,78]),new oe(28,new T(1,107),new T(5,108)),new oe(28,new T(10,46),new T(1,47)),new oe(28,new T(1,22),new T(15,23)),new oe(28,new T(2,14),new T(17,15))),new ze(18,Int32Array.from([6,30,56,82]),new oe(30,new T(5,120),new T(1,121)),new oe(26,new T(9,43),new T(4,44)),new oe(28,new T(17,22),new T(1,23)),new oe(28,new T(2,14),new T(19,15))),new ze(19,Int32Array.from([6,30,58,86]),new oe(28,new T(3,113),new T(4,114)),new oe(26,new T(3,44),new T(11,45)),new oe(26,new T(17,21),new T(4,22)),new oe(26,new T(9,13),new T(16,14))),new ze(20,Int32Array.from([6,34,62,90]),new oe(28,new T(3,107),new T(5,108)),new oe(26,new T(3,41),new T(13,42)),new oe(30,new T(15,24),new T(5,25)),new oe(28,new T(15,15),new T(10,16))),new ze(21,Int32Array.from([6,28,50,72,94]),new oe(28,new T(4,116),new T(4,117)),new oe(26,new T(17,42)),new oe(28,new T(17,22),new T(6,23)),new oe(30,new T(19,16),new T(6,17))),new ze(22,Int32Array.from([6,26,50,74,98]),new oe(28,new T(2,111),new T(7,112)),new oe(28,new T(17,46)),new oe(30,new T(7,24),new T(16,25)),new oe(24,new T(34,13))),new ze(23,Int32Array.from([6,30,54,78,102]),new oe(30,new T(4,121),new T(5,122)),new oe(28,new T(4,47),new T(14,48)),new oe(30,new T(11,24),new T(14,25)),new oe(30,new T(16,15),new T(14,16))),new ze(24,Int32Array.from([6,28,54,80,106]),new oe(30,new T(6,117),new T(4,118)),new oe(28,new T(6,45),new T(14,46)),new oe(30,new T(11,24),new T(16,25)),new oe(30,new T(30,16),new T(2,17))),new ze(25,Int32Array.from([6,32,58,84,110]),new oe(26,new T(8,106),new T(4,107)),new oe(28,new T(8,47),new T(13,48)),new oe(30,new T(7,24),new T(22,25)),new oe(30,new T(22,15),new T(13,16))),new ze(26,Int32Array.from([6,30,58,86,114]),new oe(28,new T(10,114),new T(2,115)),new oe(28,new T(19,46),new T(4,47)),new oe(28,new T(28,22),new T(6,23)),new oe(30,new T(33,16),new T(4,17))),new ze(27,Int32Array.from([6,34,62,90,118]),new oe(30,new T(8,122),new T(4,123)),new oe(28,new T(22,45),new T(3,46)),new oe(30,new T(8,23),new T(26,24)),new oe(30,new T(12,15),new T(28,16))),new ze(28,Int32Array.from([6,26,50,74,98,122]),new oe(30,new T(3,117),new T(10,118)),new oe(28,new T(3,45),new T(23,46)),new oe(30,new T(4,24),new T(31,25)),new oe(30,new T(11,15),new T(31,16))),new ze(29,Int32Array.from([6,30,54,78,102,126]),new oe(30,new T(7,116),new T(7,117)),new oe(28,new T(21,45),new T(7,46)),new oe(30,new T(1,23),new T(37,24)),new oe(30,new T(19,15),new T(26,16))),new ze(30,Int32Array.from([6,26,52,78,104,130]),new oe(30,new T(5,115),new T(10,116)),new oe(28,new T(19,47),new T(10,48)),new oe(30,new T(15,24),new T(25,25)),new oe(30,new T(23,15),new T(25,16))),new ze(31,Int32Array.from([6,30,56,82,108,134]),new oe(30,new T(13,115),new T(3,116)),new oe(28,new T(2,46),new T(29,47)),new oe(30,new T(42,24),new T(1,25)),new oe(30,new T(23,15),new T(28,16))),new ze(32,Int32Array.from([6,34,60,86,112,138]),new oe(30,new T(17,115)),new oe(28,new T(10,46),new T(23,47)),new oe(30,new T(10,24),new T(35,25)),new oe(30,new T(19,15),new T(35,16))),new ze(33,Int32Array.from([6,30,58,86,114,142]),new oe(30,new T(17,115),new T(1,116)),new oe(28,new T(14,46),new T(21,47)),new oe(30,new T(29,24),new T(19,25)),new oe(30,new T(11,15),new T(46,16))),new ze(34,Int32Array.from([6,34,62,90,118,146]),new oe(30,new T(13,115),new T(6,116)),new oe(28,new T(14,46),new T(23,47)),new oe(30,new T(44,24),new T(7,25)),new oe(30,new T(59,16),new T(1,17))),new ze(35,Int32Array.from([6,30,54,78,102,126,150]),new oe(30,new T(12,121),new T(7,122)),new oe(28,new T(12,47),new T(26,48)),new oe(30,new T(39,24),new T(14,25)),new oe(30,new T(22,15),new T(41,16))),new ze(36,Int32Array.from([6,24,50,76,102,128,154]),new oe(30,new T(6,121),new T(14,122)),new oe(28,new T(6,47),new T(34,48)),new oe(30,new T(46,24),new T(10,25)),new oe(30,new T(2,15),new T(64,16))),new ze(37,Int32Array.from([6,28,54,80,106,132,158]),new oe(30,new T(17,122),new T(4,123)),new oe(28,new T(29,46),new T(14,47)),new oe(30,new T(49,24),new T(10,25)),new oe(30,new T(24,15),new T(46,16))),new ze(38,Int32Array.from([6,32,58,84,110,136,162]),new oe(30,new T(4,122),new T(18,123)),new oe(28,new T(13,46),new T(32,47)),new oe(30,new T(48,24),new T(14,25)),new oe(30,new T(42,15),new T(32,16))),new ze(39,Int32Array.from([6,26,54,82,110,138,166]),new oe(30,new T(20,117),new T(4,118)),new oe(28,new T(40,47),new T(7,48)),new oe(30,new T(43,24),new T(22,25)),new oe(30,new T(10,15),new T(67,16))),new ze(40,Int32Array.from([6,30,58,86,114,142,170]),new oe(30,new T(19,118),new T(6,119)),new oe(28,new T(18,47),new T(31,48)),new oe(30,new T(34,24),new T(34,25)),new oe(30,new T(20,15),new T(61,16)))];var Ut;(function(R){R[R.DATA_MASK_000=0]="DATA_MASK_000",R[R.DATA_MASK_001=1]="DATA_MASK_001",R[R.DATA_MASK_010=2]="DATA_MASK_010",R[R.DATA_MASK_011=3]="DATA_MASK_011",R[R.DATA_MASK_100=4]="DATA_MASK_100",R[R.DATA_MASK_101=5]="DATA_MASK_101",R[R.DATA_MASK_110=6]="DATA_MASK_110",R[R.DATA_MASK_111=7]="DATA_MASK_111"})(Ut||(Ut={}));class it{constructor(e,s){this.value=e,this.isMasked=s}unmaskBitMatrix(e,s){for(let r=0;r<s;r++)for(let i=0;i<s;i++)this.isMasked(r,i)&&e.flip(i,r)}}it.values=new Map([[Ut.DATA_MASK_000,new it(Ut.DATA_MASK_000,(R,e)=>(R+e&1)===0)],[Ut.DATA_MASK_001,new it(Ut.DATA_MASK_001,(R,e)=>(R&1)===0)],[Ut.DATA_MASK_010,new it(Ut.DATA_MASK_010,(R,e)=>e%3===0)],[Ut.DATA_MASK_011,new it(Ut.DATA_MASK_011,(R,e)=>(R+e)%3===0)],[Ut.DATA_MASK_100,new it(Ut.DATA_MASK_100,(R,e)=>(Math.floor(R/2)+Math.floor(e/3)&1)===0)],[Ut.DATA_MASK_101,new it(Ut.DATA_MASK_101,(R,e)=>R*e%6===0)],[Ut.DATA_MASK_110,new it(Ut.DATA_MASK_110,(R,e)=>R*e%6<3)],[Ut.DATA_MASK_111,new it(Ut.DATA_MASK_111,(R,e)=>(R+e+R*e%3&1)===0)]]);class na{constructor(e){const s=e.getHeight();if(s<21||(s&3)!==1)throw new F;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let a=0;a<6;a++)e=this.copyBit(a,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let a=5;a>=0;a--)e=this.copyBit(8,a,e);const s=this.bitMatrix.getHeight();let r=0;const i=s-7;for(let a=s-1;a>=i;a--)r=this.copyBit(8,a,r);for(let a=s-8;a<s;a++)r=this.copyBit(a,8,r);if(this.parsedFormatInfo=Kt.decodeFormatInformation(e,r),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),s=Math.floor((e-17)/4);if(s<=6)return ze.getVersionForNumber(s);let r=0;const i=e-11;for(let o=5;o>=0;o--)for(let c=e-9;c>=i;c--)r=this.copyBit(c,o,r);let a=ze.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(let o=5;o>=0;o--)for(let c=e-9;c>=i;c--)r=this.copyBit(o,c,r);if(a=ze.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new F}copyBit(e,s,r){return(this.isMirror?this.bitMatrix.get(s,e):this.bitMatrix.get(e,s))?r<<1|1:r<<1}readCodewords(){const e=this.readFormatInformation(),s=this.readVersion(),r=it.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);const a=s.buildFunctionPattern();let o=!0;const c=new Uint8Array(s.getTotalCodewords());let m=0,p=0,b=0;for(let v=i-1;v>0;v-=2){v===6&&v--;for(let S=0;S<i;S++){const P=o?i-1-S:S;for(let H=0;H<2;H++)a.get(v-H,P)||(b++,p<<=1,this.bitMatrix.get(v-H,P)&&(p|=1),b===8&&(c[m++]=p,b=0,p=0))}o=!o}if(m!==s.getTotalCodewords())throw new F;return c}remask(){if(this.parsedFormatInfo===null)return;const e=it.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,s)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let s=0,r=e.getWidth();s<r;s++)for(let i=s+1,a=e.getHeight();i<a;i++)e.get(s,i)!==e.get(i,s)&&(e.flip(i,s),e.flip(s,i))}}class zn{constructor(e,s){this.numDataCodewords=e,this.codewords=s}static getDataBlocks(e,s,r){if(e.length!==s.getTotalCodewords())throw new _;const i=s.getECBlocksForLevel(r);let a=0;const o=i.getECBlocks();for(const H of o)a+=H.getCount();const c=new Array(a);let m=0;for(const H of o)for(let Z=0;Z<H.getCount();Z++){const re=H.getDataCodewords(),he=i.getECCodewordsPerBlock()+re;c[m++]=new zn(re,new Uint8Array(he))}const p=c[0].codewords.length;let b=c.length-1;for(;b>=0&&c[b].codewords.length!==p;)b--;b++;const v=p-i.getECCodewordsPerBlock();let S=0;for(let H=0;H<v;H++)for(let Z=0;Z<m;Z++)c[Z].codewords[H]=e[S++];for(let H=b;H<m;H++)c[H].codewords[v]=e[S++];const P=c[0].codewords.length;for(let H=v;H<P;H++)for(let Z=0;Z<m;Z++){const re=Z<b?H:H+1;c[Z].codewords[re]=e[S++]}return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var js;(function(R){R[R.TERMINATOR=0]="TERMINATOR",R[R.NUMERIC=1]="NUMERIC",R[R.ALPHANUMERIC=2]="ALPHANUMERIC",R[R.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",R[R.BYTE=4]="BYTE",R[R.ECI=5]="ECI",R[R.KANJI=6]="KANJI",R[R.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",R[R.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",R[R.HANZI=9]="HANZI"})(js||(js={}));class Ve{constructor(e,s,r,i){this.value=e,this.stringValue=s,this.characterCountBitsForVersions=r,this.bits=i,Ve.FOR_BITS.set(i,this),Ve.FOR_VALUE.set(e,this)}static forBits(e){const s=Ve.FOR_BITS.get(e);if(s===void 0)throw new _;return s}getCharacterCountBits(e){const s=e.getVersionNumber();let r;return s<=9?r=0:s<=26?r=1:r=2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Ve))return!1;const s=e;return this.value===s.value}toString(){return this.stringValue}}Ve.FOR_BITS=new Map,Ve.FOR_VALUE=new Map,Ve.TERMINATOR=new Ve(js.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ve.NUMERIC=new Ve(js.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ve.ALPHANUMERIC=new Ve(js.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ve.STRUCTURED_APPEND=new Ve(js.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ve.BYTE=new Ve(js.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ve.ECI=new Ve(js.ECI,"ECI",Int32Array.from([0,0,0]),7),Ve.KANJI=new Ve(js.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ve.FNC1_FIRST_POSITION=new Ve(js.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ve.FNC1_SECOND_POSITION=new Ve(js.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ve.HANZI=new Ve(js.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class kt{static decode(e,s,r,i){const a=new ji(e);let o=new W;const c=new Array;let m=-1,p=-1;try{let b=null,v=!1,S;do{if(a.available()<4)S=Ve.TERMINATOR;else{const P=a.readBits(4);S=Ve.forBits(P)}switch(S){case Ve.TERMINATOR:break;case Ve.FNC1_FIRST_POSITION:case Ve.FNC1_SECOND_POSITION:v=!0;break;case Ve.STRUCTURED_APPEND:if(a.available()<16)throw new F;m=a.readBits(8),p=a.readBits(8);break;case Ve.ECI:const P=kt.parseECIValue(a);if(b=K.getCharacterSetECIByValue(P),b===null)throw new F;break;case Ve.HANZI:const H=a.readBits(4),Z=a.readBits(S.getCharacterCountBits(s));H===kt.GB2312_SUBSET&&kt.decodeHanziSegment(a,o,Z);break;default:const re=a.readBits(S.getCharacterCountBits(s));switch(S){case Ve.NUMERIC:kt.decodeNumericSegment(a,o,re);break;case Ve.ALPHANUMERIC:kt.decodeAlphanumericSegment(a,o,re,v);break;case Ve.BYTE:kt.decodeByteSegment(a,o,re,b,c,i);break;case Ve.KANJI:kt.decodeKanjiSegment(a,o,re);break;default:throw new F}break}}while(S!==Ve.TERMINATOR)}catch{throw new F}return new Ue(e,o.toString(),c.length===0?null:c,r===null?null:r.toString(),m,p)}static decodeHanziSegment(e,s,r){if(r*13>e.available())throw new F;const i=new Uint8Array(2*r);let a=0;for(;r>0;){const o=e.readBits(13);let c=o/96<<8&4294967295|o%96;c<959?c+=41377:c+=42657,i[a]=c>>8&255,i[a+1]=c&255,a+=2,r--}try{s.append(be.decode(i,L.GB2312))}catch(o){throw new F(o)}}static decodeKanjiSegment(e,s,r){if(r*13>e.available())throw new F;const i=new Uint8Array(2*r);let a=0;for(;r>0;){const o=e.readBits(13);let c=o/192<<8&4294967295|o%192;c<7936?c+=33088:c+=49472,i[a]=c>>8,i[a+1]=c,a+=2,r--}try{s.append(be.decode(i,L.SHIFT_JIS))}catch(o){throw new F(o)}}static decodeByteSegment(e,s,r,i,a,o){if(8*r>e.available())throw new F;const c=new Uint8Array(r);for(let p=0;p<r;p++)c[p]=e.readBits(8);let m;i===null?m=L.guessEncoding(c,o):m=i.getName();try{s.append(be.decode(c,m))}catch(p){throw new F(p)}a.push(c)}static toAlphaNumericChar(e){if(e>=kt.ALPHANUMERIC_CHARS.length)throw new F;return kt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,s,r,i){const a=s.length();for(;r>1;){if(e.available()<11)throw new F;const o=e.readBits(11);s.append(kt.toAlphaNumericChar(Math.floor(o/45))),s.append(kt.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new F;s.append(kt.toAlphaNumericChar(e.readBits(6)))}if(i)for(let o=a;o<s.length();o++)s.charAt(o)==="%"&&(o<s.length()-1&&s.charAt(o+1)==="%"?s.deleteCharAt(o+1):s.setCharAt(o,""))}static decodeNumericSegment(e,s,r){for(;r>=3;){if(e.available()<10)throw new F;const i=e.readBits(10);if(i>=1e3)throw new F;s.append(kt.toAlphaNumericChar(Math.floor(i/100))),s.append(kt.toAlphaNumericChar(Math.floor(i/10)%10)),s.append(kt.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new F;const i=e.readBits(7);if(i>=100)throw new F;s.append(kt.toAlphaNumericChar(Math.floor(i/10))),s.append(kt.toAlphaNumericChar(i%10))}else if(r===1){if(e.available()<4)throw new F;const i=e.readBits(4);if(i>=10)throw new F;s.append(kt.toAlphaNumericChar(i))}}static parseECIValue(e){const s=e.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const r=e.readBits(8);return(s&63)<<8&4294967295|r}if((s&224)===192){const r=e.readBits(16);return(s&31)<<16&4294967295|r}throw new F}}kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",kt.GB2312_SUBSET=1;class wi{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const s=e[0];e[0]=e[2],e[2]=s}}class bi{constructor(){this.rsDecoder=new cs(rt.QR_CODE_FIELD_256)}decodeBooleanArray(e,s){return this.decodeBitMatrix(me.parseFromBooleanArray(e),s)}decodeBitMatrix(e,s){const r=new na(e);let i=null;try{return this.decodeBitMatrixParser(r,s)}catch(a){i=a}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const a=this.decodeBitMatrixParser(r,s);return a.setOther(new wi(!0)),a}catch(a){throw i!==null?i:a}}decodeBitMatrixParser(e,s){const r=e.readVersion(),i=e.readFormatInformation().getErrorCorrectionLevel(),a=e.readCodewords(),o=zn.getDataBlocks(a,r,i);let c=0;for(const b of o)c+=b.getNumDataCodewords();const m=new Uint8Array(c);let p=0;for(const b of o){const v=b.getCodewords(),S=b.getNumDataCodewords();this.correctErrors(v,S);for(let P=0;P<S;P++)m[p++]=v[P]}return kt.decode(m,r,i,s)}correctErrors(e,s){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-s)}catch{throw new z}for(let i=0;i<s;i++)e[i]=r[i]}}class Vr extends Pe{constructor(e,s,r){super(e,s),this.estimatedModuleSize=r}aboutEquals(e,s,r){if(Math.abs(s-this.getY())<=e&&Math.abs(r-this.getX())<=e){const i=Math.abs(e-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1}combineEstimate(e,s,r){const i=(this.getX()+s)/2,a=(this.getY()+e)/2,o=(this.estimatedModuleSize+r)/2;return new Vr(i,a,o)}}class Gs{constructor(e,s,r,i,a,o,c){this.image=e,this.startX=s,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,s=this.height,r=this.width,i=e+r,a=this.startY+s/2,o=new Int32Array(3),c=this.image;for(let m=0;m<s;m++){const p=a+((m&1)===0?Math.floor((m+1)/2):-Math.floor((m+1)/2));o[0]=0,o[1]=0,o[2]=0;let b=e;for(;b<i&&!c.get(b,p);)b++;let v=0;for(;b<i;){if(c.get(b,p))if(v===1)o[1]++;else if(v===2){if(this.foundPatternCross(o)){const S=this.handlePossibleCenter(o,p,b);if(S!==null)return S}o[0]=o[2],o[1]=1,o[2]=0,v=1}else o[++v]++;else v===1&&v++,o[v]++;b++}if(this.foundPatternCross(o)){const S=this.handlePossibleCenter(o,p,i);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new I}static centerFromEnd(e,s){return s-e[2]-e[1]/2}foundPatternCross(e){const s=this.moduleSize,r=s/2;for(let i=0;i<3;i++)if(Math.abs(s-e[i])>=r)return!1;return!0}crossCheckVertical(e,s,r,i){const a=this.image,o=a.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;let m=e;for(;m>=0&&a.get(s,m)&&c[1]<=r;)c[1]++,m--;if(m<0||c[1]>r)return NaN;for(;m>=0&&!a.get(s,m)&&c[0]<=r;)c[0]++,m--;if(c[0]>r)return NaN;for(m=e+1;m<o&&a.get(s,m)&&c[1]<=r;)c[1]++,m++;if(m===o||c[1]>r)return NaN;for(;m<o&&!a.get(s,m)&&c[2]<=r;)c[2]++,m++;if(c[2]>r)return NaN;const p=c[0]+c[1]+c[2];return 5*Math.abs(p-i)>=2*i?NaN:this.foundPatternCross(c)?Gs.centerFromEnd(c,m):NaN}handlePossibleCenter(e,s,r){const i=e[0]+e[1]+e[2],a=Gs.centerFromEnd(e,r),o=this.crossCheckVertical(s,a,2*e[1],i);if(!isNaN(o)){const c=(e[0]+e[1]+e[2])/3;for(const p of this.possibleCenters)if(p.aboutEquals(c,o,a))return p.combineEstimate(o,a,c);const m=new Vr(a,o,c);this.possibleCenters.push(m),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(m)}return null}}class Js extends Pe{constructor(e,s,r,i){super(e,s),this.estimatedModuleSize=r,this.count=i,i===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,s,r){if(Math.abs(s-this.getY())<=e&&Math.abs(r-this.getX())<=e){const i=Math.abs(e-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1}combineEstimate(e,s,r){const i=this.count+1,a=(this.count*this.getX()+s)/i,o=(this.count*this.getY()+e)/i,c=(this.count*this.estimatedModuleSize+r)/i;return new Js(a,o,c,i)}}class Er{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Pt{constructor(e,s){this.image=e,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const s=e!=null&&e.get(ce.TRY_HARDER)!==void 0,r=e!=null&&e.get(ce.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth();let c=Math.floor(3*a/(4*Pt.MAX_MODULES));(c<Pt.MIN_SKIP||s)&&(c=Pt.MIN_SKIP);let m=!1;const p=new Int32Array(5);for(let v=c-1;v<a&&!m;v+=c){p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0;let S=0;for(let P=0;P<o;P++)if(i.get(P,v))(S&1)===1&&S++,p[S]++;else if((S&1)===0)if(S===4)if(Pt.foundPatternCross(p)){if(this.handlePossibleCenter(p,v,P,r)===!0)if(c=2,this.hasSkipped===!0)m=this.haveMultiplyConfirmedCenters();else{const Z=this.findRowSkip();Z>p[2]&&(v+=Z-p[2]-c,P=o-1)}else{p[0]=p[2],p[1]=p[3],p[2]=p[4],p[3]=1,p[4]=0,S=3;continue}S=0,p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0}else p[0]=p[2],p[1]=p[3],p[2]=p[4],p[3]=1,p[4]=0,S=3;else p[++S]++;else p[S]++;Pt.foundPatternCross(p)&&this.handlePossibleCenter(p,v,o,r)===!0&&(c=p[0],this.hasSkipped&&(m=this.haveMultiplyConfirmedCenters()))}const b=this.selectBestPatterns();return Pe.orderBestPatterns(b),new Er(b)}static centerFromEnd(e,s){return s-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let s=0;for(let a=0;a<5;a++){const o=e[a];if(o===0)return!1;s+=o}if(s<7)return!1;const r=s/7,i=r/2;return Math.abs(r-e[0])<i&&Math.abs(r-e[1])<i&&Math.abs(3*r-e[2])<3*i&&Math.abs(r-e[3])<i&&Math.abs(r-e[4])<i}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,s,r,i){const a=this.getCrossCheckStateCount();let o=0;const c=this.image;for(;e>=o&&s>=o&&c.get(s-o,e-o);)a[2]++,o++;if(e<o||s<o)return!1;for(;e>=o&&s>=o&&!c.get(s-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||s<o||a[1]>r)return!1;for(;e>=o&&s>=o&&c.get(s-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;const m=c.getHeight(),p=c.getWidth();for(o=1;e+o<m&&s+o<p&&c.get(s+o,e+o);)a[2]++,o++;if(e+o>=m||s+o>=p)return!1;for(;e+o<m&&s+o<p&&!c.get(s+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=m||s+o>=p||a[3]>=r)return!1;for(;e+o<m&&s+o<p&&c.get(s+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;const b=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(b-i)<2*i&&Pt.foundPatternCross(a)}crossCheckVertical(e,s,r,i){const a=this.image,o=a.getHeight(),c=this.getCrossCheckStateCount();let m=e;for(;m>=0&&a.get(s,m);)c[2]++,m--;if(m<0)return NaN;for(;m>=0&&!a.get(s,m)&&c[1]<=r;)c[1]++,m--;if(m<0||c[1]>r)return NaN;for(;m>=0&&a.get(s,m)&&c[0]<=r;)c[0]++,m--;if(c[0]>r)return NaN;for(m=e+1;m<o&&a.get(s,m);)c[2]++,m++;if(m===o)return NaN;for(;m<o&&!a.get(s,m)&&c[3]<r;)c[3]++,m++;if(m===o||c[3]>=r)return NaN;for(;m<o&&a.get(s,m)&&c[4]<r;)c[4]++,m++;if(c[4]>=r)return NaN;const p=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(p-i)>=2*i?NaN:Pt.foundPatternCross(c)?Pt.centerFromEnd(c,m):NaN}crossCheckHorizontal(e,s,r,i){const a=this.image,o=a.getWidth(),c=this.getCrossCheckStateCount();let m=e;for(;m>=0&&a.get(m,s);)c[2]++,m--;if(m<0)return NaN;for(;m>=0&&!a.get(m,s)&&c[1]<=r;)c[1]++,m--;if(m<0||c[1]>r)return NaN;for(;m>=0&&a.get(m,s)&&c[0]<=r;)c[0]++,m--;if(c[0]>r)return NaN;for(m=e+1;m<o&&a.get(m,s);)c[2]++,m++;if(m===o)return NaN;for(;m<o&&!a.get(m,s)&&c[3]<r;)c[3]++,m++;if(m===o||c[3]>=r)return NaN;for(;m<o&&a.get(m,s)&&c[4]<r;)c[4]++,m++;if(c[4]>=r)return NaN;const p=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(p-i)>=i?NaN:Pt.foundPatternCross(c)?Pt.centerFromEnd(c,m):NaN}handlePossibleCenter(e,s,r,i){const a=e[0]+e[1]+e[2]+e[3]+e[4];let o=Pt.centerFromEnd(e,r),c=this.crossCheckVertical(s,Math.floor(o),e[2],a);if(!isNaN(c)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(c),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(o),e[2],a)))){const m=a/7;let p=!1;const b=this.possibleCenters;for(let v=0,S=b.length;v<S;v++){const P=b[v];if(P.aboutEquals(m,c,o)){b[v]=P.combineEstimate(c,o,m),p=!0;break}}if(!p){const v=new Js(o,c,m);b.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const r of this.possibleCenters)if(r.getCount()>=Pt.CENTER_QUORUM)if(s==null)s=r;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-r.getX())-Math.abs(s.getY()-r.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,s=0;const r=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=Pt.CENTER_QUORUM&&(e++,s+=o.getEstimatedModuleSize());if(e<3)return!1;const i=s/r;let a=0;for(const o of this.possibleCenters)a+=Math.abs(o.getEstimatedModuleSize()-i);return a<=.05*s}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new I;const s=this.possibleCenters;let r;if(e>3){let i=0,a=0;for(const m of this.possibleCenters){const p=m.getEstimatedModuleSize();i+=p,a+=p*p}r=i/e;let o=Math.sqrt(a/e-r*r);s.sort((m,p)=>{const b=Math.abs(p.getEstimatedModuleSize()-r),v=Math.abs(m.getEstimatedModuleSize()-r);return b<v?-1:b>v?1:0});const c=Math.max(.2*r,o);for(let m=0;m<s.length&&s.length>3;m++){const p=s[m];Math.abs(p.getEstimatedModuleSize()-r)>c&&(s.splice(m,1),m--)}}if(s.length>3){let i=0;for(const a of s)i+=a.getEstimatedModuleSize();r=i/s.length,s.sort((a,o)=>{if(o.getCount()===a.getCount()){const c=Math.abs(o.getEstimatedModuleSize()-r),m=Math.abs(a.getEstimatedModuleSize()-r);return c<m?1:c>m?-1:0}else return o.getCount()-a.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Pt.CENTER_QUORUM=2,Pt.MIN_SKIP=3,Pt.MAX_MODULES=57;class lr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(ce.NEED_RESULT_POINT_CALLBACK);const r=new Pt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(r)}processFinderPatternInfo(e){const s=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(s,r,i);if(a<1)throw new I("No pattern found in proccess finder.");const o=lr.computeDimension(s,r,i,a),c=ze.getProvisionalVersionForDimension(o),m=c.getDimensionForVersion()-7;let p=null;if(c.getAlignmentPatternCenters().length>0){const P=r.getX()-s.getX()+i.getX(),H=r.getY()-s.getY()+i.getY(),Z=1-3/m,re=Math.floor(s.getX()+Z*(P-s.getX())),he=Math.floor(s.getY()+Z*(H-s.getY()));for(let ke=4;ke<=16;ke<<=1)try{p=this.findAlignmentInRegion(a,re,he,ke);break}catch(Ie){if(!(Ie instanceof I))throw Ie}}const b=lr.createTransform(s,r,i,p,o),v=lr.sampleGrid(this.image,b,o);let S;return p===null?S=[i,s,r]:S=[i,s,r,p],new gr(v,S)}static createTransform(e,s,r,i,a){const o=a-3.5;let c,m,p,b;return i!==null?(c=i.getX(),m=i.getY(),p=o-3,b=p):(c=s.getX()-e.getX()+r.getX(),m=s.getY()-e.getY()+r.getY(),p=o,b=o),gs.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,p,b,3.5,o,e.getX(),e.getY(),s.getX(),s.getY(),c,m,r.getX(),r.getY())}static sampleGrid(e,s,r){return Oe.getInstance().sampleGridWithTransform(e,r,r,s)}static computeDimension(e,s,r,i){const a=at.round(Pe.distance(e,s)/i),o=at.round(Pe.distance(e,r)/i);let c=Math.floor((a+o)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new I("Dimensions could be not found.")}return c}calculateModuleSize(e,s,r){return(this.calculateModuleSizeOneWay(e,s)+this.calculateModuleSizeOneWay(e,r))/2}calculateModuleSizeOneWay(e,s){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(s.getX()),Math.floor(s.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14}sizeOfBlackWhiteBlackRunBothWays(e,s,r,i){let a=this.sizeOfBlackWhiteBlackRun(e,s,r,i),o=1,c=e-(r-e);c<0?(o=e/(e-c),c=0):c>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);let m=Math.floor(s-(i-s)*o);return o=1,m<0?(o=s/(s-m),m=0):m>=this.image.getHeight()&&(o=(this.image.getHeight()-1-s)/(m-s),m=this.image.getHeight()-1),c=Math.floor(e+(c-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,s,c,m),a-1}sizeOfBlackWhiteBlackRun(e,s,r,i){const a=Math.abs(i-s)>Math.abs(r-e);if(a){let P=e;e=s,s=P,P=r,r=i,i=P}const o=Math.abs(r-e),c=Math.abs(i-s);let m=-o/2;const p=e<r?1:-1,b=s<i?1:-1;let v=0;const S=r+p;for(let P=e,H=s;P!==S;P+=p){const Z=a?H:P,re=a?P:H;if(v===1===this.image.get(Z,re)){if(v===2)return at.distance(P,H,e,s);v++}if(m+=c,m>0){if(H===i)break;H+=b,m-=o}}return v===2?at.distance(r+p,i,e,s):NaN}findAlignmentInRegion(e,s,r,i){const a=Math.floor(i*e),o=Math.max(0,s-a),c=Math.min(this.image.getWidth()-1,s+a);if(c-o<e*3)throw new I("Alignment top exceeds estimated module size.");const m=Math.max(0,r-a),p=Math.min(this.image.getHeight()-1,r+a);if(p-m<e*3)throw new I("Alignment bottom exceeds estimated module size.");return new Gs(this.image,o,m,c-o,p-m,e,this.resultPointCallback).find()}}class ds{constructor(){this.decoder=new bi}getDecoder(){return this.decoder}decode(e,s){let r,i;if(s!=null&&s.get(ce.PURE_BARCODE)!==void 0){const m=ds.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(m,s),i=ds.NO_POINTS}else{const m=new lr(e.getBlackMatrix()).detect(s);r=this.decoder.decodeBitMatrix(m.getBits(),s),i=m.getPoints()}r.getOther()instanceof wi&&r.getOther().applyMirroredCorrection(i);const a=new ee(r.getText(),r.getRawBytes(),void 0,i,ye.QR_CODE,void 0),o=r.getByteSegments();o!==null&&a.putMetadata(Le.BYTE_SEGMENTS,o);const c=r.getECLevel();return c!==null&&a.putMetadata(Le.ERROR_CORRECTION_LEVEL,c),r.hasStructuredAppend()&&(a.putMetadata(Le.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(Le.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a}reset(){}static extractPureBits(e){const s=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(s===null||r===null)throw new I;const i=this.moduleSize(s,e);let a=s[1],o=r[1],c=s[0],m=r[0];if(c>=m||a>=o)throw new I;if(o-a!==m-c&&(m=c+(o-a),m>=e.getWidth()))throw new I;const p=Math.round((m-c+1)/i),b=Math.round((o-a+1)/i);if(p<=0||b<=0)throw new I;if(b!==p)throw new I;const v=Math.floor(i/2);a+=v,c+=v;const S=c+Math.floor((p-1)*i)-m;if(S>0){if(S>v)throw new I;c-=S}const P=a+Math.floor((b-1)*i)-o;if(P>0){if(P>v)throw new I;a-=P}const H=new me(p,b);for(let Z=0;Z<b;Z++){const re=a+Math.floor(Z*i);for(let he=0;he<p;he++)e.get(c+Math.floor(he*i),re)&&H.set(he,Z)}return H}static moduleSize(e,s){const r=s.getHeight(),i=s.getWidth();let a=e[0],o=e[1],c=!0,m=0;for(;a<i&&o<r;){if(c!==s.get(a,o)){if(++m===5)break;c=!c}a++,o++}if(a===i||o===r)throw new I;return(a-e[0])/7}}ds.NO_POINTS=new Array;class qe{PDF417Common(){}static getBitCountSum(e){return at.sum(e)}static toIntArray(e){if(e==null||!e.length)return qe.EMPTY_INT_ARRAY;const s=new Int32Array(e.length);let r=0;for(const i of e)s[r++]=i;return s}static getCodeword(e){const s=ue.binarySearch(qe.SYMBOL_TABLE,e&262143);return s<0?-1:(qe.CODEWORD_TABLE[s]-1)%qe.NUMBER_OF_CODEWORDS}}qe.NUMBER_OF_CODEWORDS=929,qe.MAX_CODEWORDS_IN_BARCODE=qe.NUMBER_OF_CODEWORDS-1,qe.MIN_ROWS_IN_BARCODE=3,qe.MAX_ROWS_IN_BARCODE=90,qe.MODULES_IN_CODEWORD=17,qe.MODULES_IN_STOP_PATTERN=18,qe.BARS_IN_MODULE=8,qe.EMPTY_INT_ARRAY=new Int32Array([]),qe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),qe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ia{constructor(e,s){this.bits=e,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class et{static detectMultiple(e,s,r){let i=e.getBlackMatrix(),a=et.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=et.detect(r,i)),new ia(i,a)}static detect(e,s){const r=new Array;let i=0,a=0,o=!1;for(;i<s.getHeight();){const c=et.findVertices(s,i,a);if(c[0]==null&&c[3]==null){if(!o)break;o=!1,a=0;for(const m of r)m[1]!=null&&(i=Math.trunc(Math.max(i,m[1].getY()))),m[3]!=null&&(i=Math.max(i,Math.trunc(m[3].getY())));i+=et.ROW_STEP;continue}if(o=!0,r.push(c),!e)break;c[2]!=null?(a=Math.trunc(c[2].getX()),i=Math.trunc(c[2].getY())):(a=Math.trunc(c[4].getX()),i=Math.trunc(c[4].getY()))}return r}static findVertices(e,s,r){const i=e.getHeight(),a=e.getWidth(),o=new Array(8);return et.copyToResult(o,et.findRowsWithPattern(e,i,a,s,r,et.START_PATTERN),et.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),s=Math.trunc(o[4].getY())),et.copyToResult(o,et.findRowsWithPattern(e,i,a,s,r,et.STOP_PATTERN),et.INDEXES_STOP_PATTERN),o}static copyToResult(e,s,r){for(let i=0;i<r.length;i++)e[r[i]]=s[i]}static findRowsWithPattern(e,s,r,i,a,o){const c=new Array(4);let m=!1;const p=new Int32Array(o.length);for(;i<s;i+=et.ROW_STEP){let v=et.findGuardPattern(e,a,i,r,!1,o,p);if(v!=null){for(;i>0;){const S=et.findGuardPattern(e,a,--i,r,!1,o,p);if(S!=null)v=S;else{i++;break}}c[0]=new Pe(v[0],i),c[1]=new Pe(v[1],i),m=!0;break}}let b=i+1;if(m){let v=0,S=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);for(;b<s;b++){const P=et.findGuardPattern(e,S[0],b,r,!1,o,p);if(P!=null&&Math.abs(S[0]-P[0])<et.MAX_PATTERN_DRIFT&&Math.abs(S[1]-P[1])<et.MAX_PATTERN_DRIFT)S=P,v=0;else{if(v>et.SKIPPED_ROW_COUNT_MAX)break;v++}}b-=v+1,c[2]=new Pe(S[0],b),c[3]=new Pe(S[1],b)}return b-i<et.BARCODE_MIN_HEIGHT&&ue.fill(c,null),c}static findGuardPattern(e,s,r,i,a,o,c){ue.fillWithin(c,0,c.length,0);let m=s,p=0;for(;e.get(m,r)&&m>0&&p++<et.MAX_PIXEL_DRIFT;)m--;let b=m,v=0,S=o.length;for(let P=a;b<i;b++)if(e.get(b,r)!==P)c[v]++;else{if(v===S-1){if(et.patternMatchVariance(c,o,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE)return new Int32Array([m,b]);m+=c[0]+c[1],q.arraycopy(c,2,c,0,v-1),c[v-1]=0,c[v]=0,v--}else v++;c[v]=1,P=!P}return v===S-1&&et.patternMatchVariance(c,o,et.MAX_INDIVIDUAL_VARIANCE)<et.MAX_AVG_VARIANCE?new Int32Array([m,b-1]):null}static patternMatchVariance(e,s,r){let i=e.length,a=0,o=0;for(let p=0;p<i;p++)a+=e[p],o+=s[p];if(a<o)return 1/0;let c=a/o;r*=c;let m=0;for(let p=0;p<i;p++){let b=e[p],v=s[p]*c,S=b>v?b-v:v-b;if(S>r)return 1/0;m+=S}return m/a}}et.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),et.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),et.MAX_AVG_VARIANCE=.42,et.MAX_INDIVIDUAL_VARIANCE=.8,et.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),et.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),et.MAX_PIXEL_DRIFT=3,et.MAX_PATTERN_DRIFT=5,et.SKIPPED_ROW_COUNT_MAX=25,et.ROW_STEP=5,et.BARCODE_MIN_HEIGHT=10;class $t{constructor(e,s){if(s.length===0)throw new _;this.field=e;let r=s.length;if(r>1&&s[0]===0){let i=1;for(;i<r&&s[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),q.arraycopy(s,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let i=0;for(let a of this.coefficients)i=this.field.add(i,a);return i}let s=this.coefficients[0],r=this.coefficients.length;for(let i=1;i<r;i++)s=this.field.add(this.field.multiply(e,s),this.coefficients[i]);return s}add(e){if(!this.field.equals(e.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let s=this.coefficients,r=e.coefficients;if(s.length>r.length){let o=s;s=r,r=o}let i=new Int32Array(r.length),a=r.length-s.length;q.arraycopy(r,0,i,0,a);for(let o=a;o<r.length;o++)i[o]=this.field.add(s[o-a],r[o]);return new $t(this.field,i)}subtract(e){if(!this.field.equals(e.field))throw new _("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof $t?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new $t(this.field,new Int32Array([0]));let s=this.coefficients,r=s.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1);for(let c=0;c<r;c++){let m=s[c];for(let p=0;p<a;p++)o[c+p]=this.field.add(o[c+p],this.field.multiply(m,i[p]))}return new $t(this.field,o)}negative(){let e=this.coefficients.length,s=new Int32Array(e);for(let r=0;r<e;r++)s[r]=this.field.subtract(0,this.coefficients[r]);return new $t(this.field,s)}multiplyScalar(e){if(e===0)return new $t(this.field,new Int32Array([0]));if(e===1)return this;let s=this.coefficients.length,r=new Int32Array(s);for(let i=0;i<s;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new $t(this.field,r)}multiplyByMonomial(e,s){if(e<0)throw new _;if(s===0)return new $t(this.field,new Int32Array([0]));let r=this.coefficients.length,i=new Int32Array(r+e);for(let a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],s);return new $t(this.field,i)}toString(){let e=new W;for(let s=this.getDegree();s>=0;s--){let r=this.getCoefficient(s);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(s===0||r!==1)&&e.append(r),s!==0&&(s===1?e.append("x"):(e.append("x^"),e.append(s))))}return e.toString()}}class aa{add(e,s){return(e+s)%this.modulus}subtract(e,s){return(this.modulus+e-s)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new _;return this.logTable[e]}inverse(e){if(e===0)throw new Cs;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,s){return e===0||s===0?0:this.expTable[(this.logTable[e]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Xr extends aa{constructor(e,s){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let r=1;for(let i=0;i<e;i++)this.expTable[i]=r,r=r*s%e;for(let i=0;i<e-1;i++)this.logTable[this.expTable[i]]=i;this.zero=new $t(this,new Int32Array([0])),this.one=new $t(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,s){if(e<0)throw new _;if(s===0)return this.zero;let r=new Int32Array(e+1);return r[0]=s,new $t(this,r)}}Xr.PDF417_GF=new Xr(qe.NUMBER_OF_CODEWORDS,3);class Ri{constructor(){this.field=Xr.PDF417_GF}decode(e,s,r){let i=new $t(this.field,e),a=new Int32Array(s),o=!1;for(let H=s;H>0;H--){let Z=i.evaluateAt(this.field.exp(H));a[s-H]=Z,Z!==0&&(o=!0)}if(!o)return 0;let c=this.field.getOne();if(r!=null)for(const H of r){let Z=this.field.exp(e.length-1-H),re=new $t(this.field,new Int32Array([this.field.subtract(0,Z),1]));c=c.multiply(re)}let m=new $t(this.field,a),p=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),m,s),b=p[0],v=p[1],S=this.findErrorLocations(b),P=this.findErrorMagnitudes(v,b,S);for(let H=0;H<S.length;H++){let Z=e.length-1-this.field.log(S[H]);if(Z<0)throw z.getChecksumInstance();e[Z]=this.field.subtract(e[Z],P[H])}return S.length}runEuclideanAlgorithm(e,s,r){if(e.getDegree()<s.getDegree()){let S=e;e=s,s=S}let i=e,a=s,o=this.field.getZero(),c=this.field.getOne();for(;a.getDegree()>=Math.round(r/2);){let S=i,P=o;if(i=a,o=c,i.isZero())throw z.getChecksumInstance();a=S;let H=this.field.getZero(),Z=i.getCoefficient(i.getDegree()),re=this.field.inverse(Z);for(;a.getDegree()>=i.getDegree()&&!a.isZero();){let he=a.getDegree()-i.getDegree(),ke=this.field.multiply(a.getCoefficient(a.getDegree()),re);H=H.add(this.field.buildMonomial(he,ke)),a=a.subtract(i.multiplyByMonomial(he,ke))}c=H.multiply(o).subtract(P).negative()}let m=c.getCoefficient(0);if(m===0)throw z.getChecksumInstance();let p=this.field.inverse(m),b=c.multiply(p),v=a.multiply(p);return[b,v]}findErrorLocations(e){let s=e.getDegree(),r=new Int32Array(s),i=0;for(let a=1;a<this.field.getSize()&&i<s;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==s)throw z.getChecksumInstance();return r}findErrorMagnitudes(e,s,r){let i=s.getDegree(),a=new Int32Array(i);for(let p=1;p<=i;p++)a[i-p]=this.field.multiply(p,s.getCoefficient(p));let o=new $t(this.field,a),c=r.length,m=new Int32Array(c);for(let p=0;p<c;p++){let b=this.field.inverse(r[p]),v=this.field.subtract(0,e.evaluateAt(b)),S=this.field.inverse(o.evaluateAt(b));m[p]=this.field.multiply(v,S)}return m}}class Sr{constructor(e,s,r,i,a){e instanceof Sr?this.constructor_2(e):this.constructor_1(e,s,r,i,a)}constructor_1(e,s,r,i,a){const o=s==null||r==null,c=i==null||a==null;if(o&&c)throw new I;o?(s=new Pe(0,i.getY()),r=new Pe(0,a.getY())):c&&(i=new Pe(e.getWidth()-1,s.getY()),a=new Pe(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=s,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(s.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(s.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,s){return e==null?s:s==null?e:new Sr(e.image,e.topLeft,e.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(e,s,r){let i=this.topLeft,a=this.bottomLeft,o=this.topRight,c=this.bottomRight;if(e>0){let m=r?this.topLeft:this.topRight,p=Math.trunc(m.getY()-e);p<0&&(p=0);let b=new Pe(m.getX(),p);r?i=b:o=b}if(s>0){let m=r?this.bottomLeft:this.bottomRight,p=Math.trunc(m.getY()+s);p>=this.image.getHeight()&&(p=this.image.getHeight()-1);let b=new Pe(m.getX(),p);r?a=b:c=b}return new Sr(this.image,i,a,o,c)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class En{constructor(e,s,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=s,this.rowCountLowerPart=r,this.rowCount=s+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class cr{constructor(){this.buffer=""}static form(e,s){let r=-1;function i(o,c,m,p,b,v){if(o==="%%")return"%";if(s[++r]===void 0)return;o=p?parseInt(p.substr(1)):void 0;let S=b?parseInt(b.substr(1)):void 0,P;switch(v){case"s":P=s[r];break;case"c":P=s[r][0];break;case"f":P=parseFloat(s[r]).toFixed(o);break;case"p":P=parseFloat(s[r]).toPrecision(o);break;case"e":P=parseFloat(s[r]).toExponential(o);break;case"x":P=parseInt(s[r]).toString(S||16);break;case"d":P=parseFloat(parseInt(s[r],S||10).toPrecision(o)).toFixed(0);break}P=typeof P=="object"?JSON.stringify(P):(+P).toString(S);let H=parseInt(m),Z=m&&m[0]+""=="0"?"0":" ";for(;P.length<H;)P=c!==void 0?P+Z:Z+P;return P}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)}format(e,...s){this.buffer+=cr.form(e,s)}toString(){return this.buffer}}class er{constructor(e){this.boundingBox=new Sr(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let s=this.getCodeword(e);if(s!=null)return s;for(let r=1;r<er.MAX_NEARBY_DISTANCE;r++){let i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(s=this.codewords[i],s!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(s=this.codewords[i],s!=null)))return s}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,s){this.codewords[this.imageRowToCodewordIndex(e)]=s}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new cr;let s=0;for(const r of this.codewords){if(r==null){e.format("%3d:    |   %n",s++);continue}e.format("%3d: %3d|%3d%n",s++,r.getRowNumber(),r.getValue())}return e.toString()}}er.MAX_NEARBY_DISTANCE=5;class jr{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let s=this.values.get(e);s==null&&(s=0),s++,this.values.set(e,s)}getValue(){let e=-1,s=new Array;for(const[r,i]of this.values.entries()){const a={getKey:()=>r,getValue:()=>i};a.getValue()>e?(e=a.getValue(),s=[],s.push(a.getKey())):a.getValue()===e&&s.push(a.getKey())}return qe.toIntArray(s)}getConfidence(e){return this.values.get(e)}}class oa extends er{constructor(e,s){super(e),this._isLeft=s}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,e);let r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),m=-1,p=1,b=0;for(let v=o;v<c;v++){if(s[v]==null)continue;let S=s[v],P=S.getRowNumber()-m;if(P===0)b++;else if(P===1)p=Math.max(p,b),b=1,m=S.getRowNumber();else if(P<0||S.getRowNumber()>=e.getRowCount()||P>v)s[v]=null;else{let H;p>2?H=(p-2)*P:H=P;let Z=H>=v;for(let re=1;re<=H&&!Z;re++)Z=s[v-re]!=null;Z?s[v]=null:(m=S.getRowNumber(),b=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let s=new Int32Array(e.getRowCount());for(let r of this.getCodewords())if(r!=null){let i=r.getRowNumber();if(i>=s.length)continue;s[i]++}return s}adjustIncompleteIndicatorColumnRowNumbers(e){let s=this.getBoundingBox(),r=this._isLeft?s.getTopLeft():s.getTopRight(),i=this._isLeft?s.getBottomLeft():s.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.getCodewords(),m=-1;for(let p=a;p<o;p++){if(c[p]==null)continue;let b=c[p];b.setRowNumberAsRowIndicatorColumn();let v=b.getRowNumber()-m;v===0||(v===1?m=b.getRowNumber():b.getRowNumber()>=e.getRowCount()?c[p]=null:m=b.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),s=new jr,r=new jr,i=new jr,a=new jr;for(let c of e){if(c==null)continue;c.setRowNumberAsRowIndicatorColumn();let m=c.getValue()%30,p=c.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:r.setValue(m*3+1);break;case 1:a.setValue(m/3),i.setValue(m%3);break;case 2:s.setValue(m+1);break}}if(s.getValue().length===0||r.getValue().length===0||i.getValue().length===0||a.getValue().length===0||s.getValue()[0]<1||r.getValue()[0]+i.getValue()[0]<qe.MIN_ROWS_IN_BARCODE||r.getValue()[0]+i.getValue()[0]>qe.MAX_ROWS_IN_BARCODE)return null;let o=new En(s.getValue()[0],r.getValue()[0],i.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,s){for(let r=0;r<e.length;r++){let i=e[r];if(e[r]==null)continue;let a=i.getValue()%30,o=i.getRowNumber();if(o>s.getRowCount()){e[r]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:a*3+1!==s.getRowCountUpperPart()&&(e[r]=null);break;case 1:(Math.trunc(a/3)!==s.getErrorCorrectionLevel()||a%3!==s.getRowCountLowerPart())&&(e[r]=null);break;case 2:a+1!==s.getColumnCount()&&(e[r]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class jn{constructor(e,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=qe.MAX_CODEWORDS_IN_BARCODE,s;do s=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let r=this.detectionResultColumns[s].getCodewords();for(let i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(s,i,r))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++)if(e[r]!=null&&s[r]!=null&&e[r].getRowNumber()===s[r].getRowNumber())for(let i=1;i<=this.barcodeColumnCount;i++){let a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<s.length;r++){if(s[r]==null)continue;let i=s[r].getRowNumber(),a=0;for(let o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){let c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=jn.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,s=this.detectionResultColumns[0].getCodewords();for(let r=0;r<s.length;r++){if(s[r]==null)continue;let i=s[r].getRowNumber(),a=0;for(let o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){let c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=jn.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,s,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),s=0):++s),s}adjustRowNumbers(e,s,r){if(!this.detectionResultColumns[e-1])return;let i=r[s],a=this.detectionResultColumns[e-1].getCodewords(),o=a;this.detectionResultColumns[e+1]!=null&&(o=this.detectionResultColumns[e+1].getCodewords());let c=new Array(14);c[2]=a[s],c[3]=o[s],s>0&&(c[0]=r[s-1],c[4]=a[s-1],c[5]=o[s-1]),s>1&&(c[8]=r[s-2],c[10]=a[s-2],c[11]=o[s-2]),s<r.length-1&&(c[1]=r[s+1],c[6]=a[s+1],c[7]=o[s+1]),s<r.length-2&&(c[9]=r[s+2],c[12]=a[s+2],c[13]=o[s+2]);for(let m of c)if(jn.adjustRowNumber(i,m))return}static adjustRowNumber(e,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===e.getBucket()?(e.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,s){this.detectionResultColumns[e]=s}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new cr;for(let r=0;r<e.getCodewords().length;r++){s.format("CW %3d:",r);for(let i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){s.format("    |   ");continue}let a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){s.format("    |   ");continue}s.format(" %3d|%3d",a.getRowNumber(),a.getValue())}s.format("%n")}return s.toString()}}class kr{constructor(e,s,r,i){this.rowNumber=kr.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(s),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==kr.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}kr.BARCODE_ROW_UNKNOWN=-1;class Jt{static initialize(){for(let e=0;e<qe.SYMBOL_TABLE.length;e++){let s=qe.SYMBOL_TABLE[e],r=s&1;for(let i=0;i<qe.BARS_IN_MODULE;i++){let a=0;for(;(s&1)===r;)a+=1,s>>=1;r=s&1,Jt.RATIOS_TABLE[e]||(Jt.RATIOS_TABLE[e]=new Array(qe.BARS_IN_MODULE)),Jt.RATIOS_TABLE[e][qe.BARS_IN_MODULE-i-1]=Math.fround(a/qe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let s=Jt.getDecodedCodewordValue(Jt.sampleBitCounts(e));return s!==-1?s:Jt.getClosestDecodedValue(e)}static sampleBitCounts(e){let s=at.sum(e),r=new Int32Array(qe.BARS_IN_MODULE),i=0,a=0;for(let o=0;o<qe.MODULES_IN_CODEWORD;o++){let c=s/(2*qe.MODULES_IN_CODEWORD)+o*s/qe.MODULES_IN_CODEWORD;a+e[i]<=c&&(a+=e[i],i++),r[i]++}return r}static getDecodedCodewordValue(e){let s=Jt.getBitValue(e);return qe.getCodeword(s)===-1?-1:s}static getBitValue(e){let s=0;for(let r=0;r<e.length;r++)for(let i=0;i<e[r];i++)s=s<<1|(r%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(e){let s=at.sum(e),r=new Array(qe.BARS_IN_MODULE);if(s>1)for(let o=0;o<r.length;o++)r[o]=Math.fround(e[o]/s);let i=qs.MAX_VALUE,a=-1;this.bSymbolTableReady||Jt.initialize();for(let o=0;o<Jt.RATIOS_TABLE.length;o++){let c=0,m=Jt.RATIOS_TABLE[o];for(let p=0;p<qe.BARS_IN_MODULE;p++){let b=Math.fround(m[p]-r[p]);if(c+=Math.fround(b*b),c>=i)break}c<i&&(i=c,a=qe.SYMBOL_TABLE[o])}return a}}Jt.bSymbolTableReady=!1,Jt.RATIOS_TABLE=new Array(qe.SYMBOL_TABLE.length).map(R=>new Array(qe.BARS_IN_MODULE));class Gn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class vi{static parseLong(e,s=void 0){return parseInt(e,s)}}class ur extends w{}ur.kind="NullPointerException";class Ni{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,s,r){if(e==null)throw new ur;if(s<0||s>e.length||r<0||s+r>e.length||s+r<0)throw new ae;if(r===0)return;for(let i=0;i<r;i++)this.write(e[s+i])}flush(){}close(){}}class Vn extends w{}class la extends Ni{constructor(e=32){if(super(),this.count=0,e<0)throw new _("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let r=this.buf.length<<1;if(r-e<0&&(r=e),r<0){if(e<0)throw new Vn;r=te.MAX_VALUE}this.buf=ue.copyOfUint8Array(this.buf,r)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,s,r){if(s<0||s>e.length||r<0||s+r-e.length>0)throw new ae;this.ensureCapacity(this.count+r),q.arraycopy(e,s,this.buf,this.count,r),this.count+=r}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ue.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var mt;(function(R){R[R.ALPHA=0]="ALPHA",R[R.LOWER=1]="LOWER",R[R.MIXED=2]="MIXED",R[R.PUNCT=3]="PUNCT",R[R.ALPHA_SHIFT=4]="ALPHA_SHIFT",R[R.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(mt||(mt={}));function wn(){if(typeof window<"u")return window.BigInt||null;if(typeof commonjsGlobal<"u")return commonjsGlobal.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let bn;function Wt(R){if(typeof bn>"u"&&(bn=wn()),bn===null)throw new Error("BigInt is not supported!");return bn(R)}function Yr(){let R=[];R[0]=Wt(1);let e=Wt(900);R[1]=e;for(let s=2;s<16;s++)R[s]=R[s-1]*e;return R}class fe{static decode(e,s){let r=new W(""),i=K.ISO8859_1;r.enableDecoding(i);let a=1,o=e[a++],c=new Gn;for(;a<e[0];){switch(o){case fe.TEXT_COMPACTION_MODE_LATCH:a=fe.textCompaction(e,a,r);break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:a=fe.byteCompaction(o,e,i,a,r);break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case fe.NUMERIC_COMPACTION_MODE_LATCH:a=fe.numericCompaction(e,a,r);break;case fe.ECI_CHARSET:K.getCharacterSetECIByValue(e[a++]);break;case fe.ECI_GENERAL_PURPOSE:a+=2;break;case fe.ECI_USER_DEFINED:a++;break;case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=fe.decodeMacroBlock(e,a,c);break;case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:throw new F;default:a--,a=fe.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw F.getFormatInstance()}if(r.length()===0)throw F.getFormatInstance();let m=new Ue(null,r.toString(),null,s);return m.setOther(c),m}static decodeMacroBlock(e,s,r){if(s+fe.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw F.getFormatInstance();let i=new Int32Array(fe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let c=0;c<fe.NUMBER_OF_SEQUENCE_CODEWORDS;c++,s++)i[c]=e[s];r.setSegmentIndex(te.parseInt(fe.decodeBase900toBase10(i,fe.NUMBER_OF_SEQUENCE_CODEWORDS)));let a=new W;s=fe.textCompaction(e,s,a),r.setFileId(a.toString());let o=-1;for(e[s]===fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=s+1);s<e[0];)switch(e[s]){case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,e[s]){case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let c=new W;s=fe.textCompaction(e,s+1,c),r.setFileName(c.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let m=new W;s=fe.textCompaction(e,s+1,m),r.setSender(m.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let p=new W;s=fe.textCompaction(e,s+1,p),r.setAddressee(p.toString());break;case fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let b=new W;s=fe.numericCompaction(e,s+1,b),r.setSegmentCount(te.parseInt(b.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let v=new W;s=fe.numericCompaction(e,s+1,v),r.setTimestamp(vi.parseLong(v.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new W;s=fe.numericCompaction(e,s+1,S),r.setChecksum(te.parseInt(S.toString()));break;case fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let P=new W;s=fe.numericCompaction(e,s+1,P),r.setFileSize(vi.parseLong(P.toString()));break;default:throw F.getFormatInstance()}break;case fe.MACRO_PDF417_TERMINATOR:s++,r.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(o!==-1){let c=s-o;r.isLastSegment()&&c--,r.setOptionalData(ue.copyOfRange(e,o,o+c))}return s}static textCompaction(e,s,r){let i=new Int32Array((e[0]-s)*2),a=new Int32Array((e[0]-s)*2),o=0,c=!1;for(;s<e[0]&&!c;){let m=e[s++];if(m<fe.TEXT_COMPACTION_MODE_LATCH)i[o]=m/30,i[o+1]=m%30,o+=2;else switch(m){case fe.TEXT_COMPACTION_MODE_LATCH:i[o++]=fe.TEXT_COMPACTION_MODE_LATCH;break;case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:s--,c=!0;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,m=e[s++],a[o]=m,o++;break}}return fe.decodeTextCompaction(i,a,o,r),s}static decodeTextCompaction(e,s,r,i){let a=mt.ALPHA,o=mt.ALPHA,c=0;for(;c<r;){let m=e[c],p="";switch(a){case mt.ALPHA:if(m<26)p=String.fromCharCode(65+m);else switch(m){case 26:p=" ";break;case fe.LL:a=mt.LOWER;break;case fe.ML:a=mt.MIXED;break;case fe.PS:o=a,a=mt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(s[c]);break;case fe.TEXT_COMPACTION_MODE_LATCH:a=mt.ALPHA;break}break;case mt.LOWER:if(m<26)p=String.fromCharCode(97+m);else switch(m){case 26:p=" ";break;case fe.AS:o=a,a=mt.ALPHA_SHIFT;break;case fe.ML:a=mt.MIXED;break;case fe.PS:o=a,a=mt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(s[c]);break;case fe.TEXT_COMPACTION_MODE_LATCH:a=mt.ALPHA;break}break;case mt.MIXED:if(m<fe.PL)p=fe.MIXED_CHARS[m];else switch(m){case fe.PL:a=mt.PUNCT;break;case 26:p=" ";break;case fe.LL:a=mt.LOWER;break;case fe.AL:a=mt.ALPHA;break;case fe.PS:o=a,a=mt.PUNCT_SHIFT;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(s[c]);break;case fe.TEXT_COMPACTION_MODE_LATCH:a=mt.ALPHA;break}break;case mt.PUNCT:if(m<fe.PAL)p=fe.PUNCT_CHARS[m];else switch(m){case fe.PAL:a=mt.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(s[c]);break;case fe.TEXT_COMPACTION_MODE_LATCH:a=mt.ALPHA;break}break;case mt.ALPHA_SHIFT:if(a=o,m<26)p=String.fromCharCode(65+m);else switch(m){case 26:p=" ";break;case fe.TEXT_COMPACTION_MODE_LATCH:a=mt.ALPHA;break}break;case mt.PUNCT_SHIFT:if(a=o,m<fe.PAL)p=fe.PUNCT_CHARS[m];else switch(m){case fe.PAL:a=mt.ALPHA;break;case fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(s[c]);break;case fe.TEXT_COMPACTION_MODE_LATCH:a=mt.ALPHA;break}break}p!==""&&i.append(p),c++}}static byteCompaction(e,s,r,i,a){let o=new la,c=0,m=0,p=!1;switch(e){case fe.BYTE_COMPACTION_MODE_LATCH:let b=new Int32Array(6),v=s[i++];for(;i<s[0]&&!p;)switch(b[c++]=v,m=900*m+v,v=s[i++],v){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:i--,p=!0;break;default:if(c%5===0&&c>0){for(let S=0;S<6;++S)o.write(Number(Wt(m)>>Wt(8*(5-S))));m=0,c=0}break}i===s[0]&&v<fe.TEXT_COMPACTION_MODE_LATCH&&(b[c++]=v);for(let S=0;S<c;S++)o.write(b[S]);break;case fe.BYTE_COMPACTION_MODE_LATCH_6:for(;i<s[0]&&!p;){let S=s[i++];if(S<fe.TEXT_COMPACTION_MODE_LATCH)c++,m=900*m+S;else switch(S){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.NUMERIC_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:i--,p=!0;break}if(c%5===0&&c>0){for(let P=0;P<6;++P)o.write(Number(Wt(m)>>Wt(8*(5-P))));m=0,c=0}}break}return a.append(be.decode(o.toByteArray(),r)),i}static numericCompaction(e,s,r){let i=0,a=!1,o=new Int32Array(fe.MAX_NUMERIC_CODEWORDS);for(;s<e[0]&&!a;){let c=e[s++];if(s===e[0]&&(a=!0),c<fe.TEXT_COMPACTION_MODE_LATCH)o[i]=c,i++;else switch(c){case fe.TEXT_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH:case fe.BYTE_COMPACTION_MODE_LATCH_6:case fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case fe.MACRO_PDF417_TERMINATOR:s--,a=!0;break}(i%fe.MAX_NUMERIC_CODEWORDS===0||c===fe.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(fe.decodeBase900toBase10(o,i)),i=0)}return s}static decodeBase900toBase10(e,s){let r=Wt(0);for(let a=0;a<s;a++)r+=fe.EXP900[s-a-1]*Wt(e[a]);let i=r.toString();if(i.charAt(0)!=="1")throw new F;return i.substring(1)}}fe.TEXT_COMPACTION_MODE_LATCH=900,fe.BYTE_COMPACTION_MODE_LATCH=901,fe.NUMERIC_COMPACTION_MODE_LATCH=902,fe.BYTE_COMPACTION_MODE_LATCH_6=924,fe.ECI_USER_DEFINED=925,fe.ECI_GENERAL_PURPOSE=926,fe.ECI_CHARSET=927,fe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,fe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,fe.MACRO_PDF417_TERMINATOR=922,fe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,fe.MAX_NUMERIC_CODEWORDS=15,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,fe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,fe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,fe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,fe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,fe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,fe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,fe.PL=25,fe.LL=27,fe.AS=27,fe.ML=28,fe.AL=28,fe.PS=29,fe.PAL=29,fe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,fe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",fe.EXP900=wn()?Yr():[],fe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class st{constructor(){}static decode(e,s,r,i,a,o,c){let m=new Sr(e,s,r,i,a),p=null,b=null,v;for(let H=!0;;H=!1){if(s!=null&&(p=st.getRowIndicatorColumn(e,m,s,!0,o,c)),i!=null&&(b=st.getRowIndicatorColumn(e,m,i,!1,o,c)),v=st.merge(p,b),v==null)throw I.getNotFoundInstance();let Z=v.getBoundingBox();if(H&&Z!=null&&(Z.getMinY()<m.getMinY()||Z.getMaxY()>m.getMaxY()))m=Z;else break}v.setBoundingBox(m);let S=v.getBarcodeColumnCount()+1;v.setDetectionResultColumn(0,p),v.setDetectionResultColumn(S,b);let P=p!=null;for(let H=1;H<=S;H++){let Z=P?H:S-H;if(v.getDetectionResultColumn(Z)!==void 0)continue;let re;Z===0||Z===S?re=new oa(m,Z===0):re=new er(m),v.setDetectionResultColumn(Z,re);let he=-1,ke=he;for(let Ie=m.getMinY();Ie<=m.getMaxY();Ie++){if(he=st.getStartColumn(v,Z,Ie,P),he<0||he>m.getMaxX()){if(ke===-1)continue;he=ke}let ve=st.detectCodeword(e,m.getMinX(),m.getMaxX(),P,he,Ie,o,c);ve!=null&&(re.setCodeword(Ie,ve),ke=he,o=Math.min(o,ve.getWidth()),c=Math.max(c,ve.getWidth()))}}return st.createDecoderResult(v)}static merge(e,s){if(e==null&&s==null)return null;let r=st.getBarcodeMetadata(e,s);if(r==null)return null;let i=Sr.merge(st.adjustBoundingBox(e),st.adjustBoundingBox(s));return new jn(r,i)}static adjustBoundingBox(e){if(e==null)return null;let s=e.getRowHeights();if(s==null)return null;let r=st.getMax(s),i=0;for(let c of s)if(i+=r-c,c>0)break;let a=e.getCodewords();for(let c=0;i>0&&a[c]==null;c++)i--;let o=0;for(let c=s.length-1;c>=0&&(o+=r-s[c],!(s[c]>0));c--);for(let c=a.length-1;o>0&&a[c]==null;c--)o--;return e.getBoundingBox().addMissingRows(i,o,e.isLeft())}static getMax(e){let s=-1;for(let r of e)s=Math.max(s,r);return s}static getBarcodeMetadata(e,s){let r;if(e==null||(r=e.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let i;return s==null||(i=s.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r}static getRowIndicatorColumn(e,s,r,i,a,o){let c=new oa(s,i);for(let m=0;m<2;m++){let p=m===0?1:-1,b=Math.trunc(Math.trunc(r.getX()));for(let v=Math.trunc(Math.trunc(r.getY()));v<=s.getMaxY()&&v>=s.getMinY();v+=p){let S=st.detectCodeword(e,0,e.getWidth(),i,b,v,a,o);S!=null&&(c.setCodeword(v,S),i?b=S.getStartX():b=S.getEndX())}}return c}static adjustCodewordCount(e,s){let r=s[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-st.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>qe.MAX_CODEWORDS_IN_BARCODE)throw I.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)}static createDecoderResult(e){let s=st.createBarcodeMatrix(e);st.adjustCodewordCount(e,s);let r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array;for(let m=0;m<e.getBarcodeRowCount();m++)for(let p=0;p<e.getBarcodeColumnCount();p++){let b=s[m][p+1].getValue(),v=m*e.getBarcodeColumnCount()+p;b.length===0?r.push(v):b.length===1?i[v]=b[0]:(o.push(v),a.push(b))}let c=new Array(a.length);for(let m=0;m<c.length;m++)c[m]=a[m];return st.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,qe.toIntArray(r),qe.toIntArray(o),c)}static createDecoderResultFromAmbiguousValues(e,s,r,i,a){let o=new Int32Array(i.length),c=100;for(;c-- >0;){for(let m=0;m<o.length;m++)s[i[m]]=a[m][o[m]];try{return st.decodeCodewords(s,e,r)}catch(m){if(!(m instanceof z))throw m}if(o.length===0)throw z.getChecksumInstance();for(let m=0;m<o.length;m++)if(o[m]<a[m].length-1){o[m]++;break}else if(o[m]=0,m===o.length-1)throw z.getChecksumInstance()}throw z.getChecksumInstance()}static createBarcodeMatrix(e){let s=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let i=0;i<s.length;i++)for(let a=0;a<s[i].length;a++)s[i][a]=new jr;let r=0;for(let i of e.getDetectionResultColumns()){if(i!=null){for(let a of i.getCodewords())if(a!=null){let o=a.getRowNumber();if(o>=0){if(o>=s.length)continue;s[o][r].setValue(a.getValue())}}}r++}return s}static isValidBarcodeColumn(e,s){return s>=0&&s<=e.getBarcodeColumnCount()+1}static getStartColumn(e,s,r,i){let a=i?1:-1,o=null;if(st.isValidBarcodeColumn(e,s-a)&&(o=e.getDetectionResultColumn(s-a).getCodeword(r)),o!=null)return i?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(s).getCodewordNearby(r),o!=null)return i?o.getStartX():o.getEndX();if(st.isValidBarcodeColumn(e,s-a)&&(o=e.getDetectionResultColumn(s-a).getCodewordNearby(r)),o!=null)return i?o.getEndX():o.getStartX();let c=0;for(;st.isValidBarcodeColumn(e,s-a);){s-=a;for(let m of e.getDetectionResultColumn(s).getCodewords())if(m!=null)return(i?m.getEndX():m.getStartX())+a*c*(m.getEndX()-m.getStartX());c++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,s,r,i,a,o,c,m){a=st.adjustCodewordStartColumn(e,s,r,i,a,o);let p=st.getModuleBitCount(e,s,r,i,a,o);if(p==null)return null;let b,v=at.sum(p);if(i)b=a+v;else{for(let H=0;H<p.length/2;H++){let Z=p[H];p[H]=p[p.length-1-H],p[p.length-1-H]=Z}b=a,a=b-v}if(!st.checkCodewordSkew(v,c,m))return null;let S=Jt.getDecodedValue(p),P=qe.getCodeword(S);return P===-1?null:new kr(a,b,st.getCodewordBucketNumber(S),P)}static getModuleBitCount(e,s,r,i,a,o){let c=a,m=new Int32Array(8),p=0,b=i?1:-1,v=i;for(;(i?c<r:c>=s)&&p<m.length;)e.get(c,o)===v?(m[p]++,c+=b):(p++,v=!v);return p===m.length||c===(i?r:s)&&p===m.length-1?m:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,s,r,i,a,o){let c=a,m=i?-1:1;for(let p=0;p<2;p++){for(;(i?c>=s:c<r)&&i===e.get(c,o);){if(Math.abs(a-c)>st.CODEWORD_SKEW_SIZE)return a;c+=m}m=-m,i=!i}return c}static checkCodewordSkew(e,s,r){return s-st.CODEWORD_SKEW_SIZE<=e&&e<=r+st.CODEWORD_SKEW_SIZE}static decodeCodewords(e,s,r){if(e.length===0)throw F.getFormatInstance();let i=1<<s+1,a=st.correctErrors(e,r,i);st.verifyCodewordCount(e,i);let o=fe.decode(e,""+s);return o.setErrorsCorrected(a),o.setErasures(r.length),o}static correctErrors(e,s,r){if(s!=null&&s.length>r/2+st.MAX_ERRORS||r<0||r>st.MAX_EC_CODEWORDS)throw z.getChecksumInstance();return st.errorCorrection.decode(e,r,s)}static verifyCodewordCount(e,s){if(e.length<4)throw F.getFormatInstance();let r=e[0];if(r>e.length)throw F.getFormatInstance();if(r===0)if(s<e.length)e[0]=e.length-s;else throw F.getFormatInstance()}static getBitCountForCodeword(e){let s=new Int32Array(8),r=0,i=s.length-1;for(;!((e&1)!==r&&(r=e&1,i--,i<0));)s[i]++,e>>=1;return s}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return st.getCodewordBucketNumber(st.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let s=new cr;for(let r=0;r<e.length;r++){s.format("Row %2d: ",r);for(let i=0;i<e[r].length;i++){let a=e[r][i];a.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}s.format("%n")}return s.toString()}}st.CODEWORD_SKEW_SIZE=2,st.MAX_ERRORS=3,st.MAX_EC_CODEWORDS=512,st.errorCorrection=new Ri;class es{decode(e,s=null){let r=es.decode(e,s,!1);if(r==null||r.length===0||r[0]==null)throw I.getNotFoundInstance();return r[0]}decodeMultiple(e,s=null){try{return es.decode(e,s,!0)}catch(r){throw r instanceof F||r instanceof z?I.getNotFoundInstance():r}}static decode(e,s,r){const i=new Array,a=et.detectMultiple(e,s,r);for(const o of a.getPoints()){const c=st.decode(a.getBits(),o[4],o[5],o[6],o[7],es.getMinCodewordWidth(o),es.getMaxCodewordWidth(o)),m=new ee(c.getText(),c.getRawBytes(),void 0,o,ye.PDF_417);m.putMetadata(Le.ERROR_CORRECTION_LEVEL,c.getECLevel());const p=c.getOther();p!=null&&m.putMetadata(Le.PDF417_EXTRA_METADATA,p),i.push(m)}return i.map(o=>o)}static getMaxWidth(e,s){return e==null||s==null?0:Math.trunc(Math.abs(e.getX()-s.getX()))}static getMinWidth(e,s){return e==null||s==null?te.MAX_VALUE:Math.trunc(Math.abs(e.getX()-s.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(es.getMaxWidth(e[0],e[4]),es.getMaxWidth(e[6],e[2])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN),Math.max(es.getMaxWidth(e[1],e[5]),es.getMaxWidth(e[7],e[3])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(es.getMinWidth(e[0],e[4]),es.getMinWidth(e[6],e[2])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN),Math.min(es.getMinWidth(e[1],e[5]),es.getMinWidth(e[7],e[3])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN)))}reset(){}}class Zr extends w{}Zr.kind="ReaderException";class Xn{constructor(e,s){this.verbose=e===!0,s&&this.setHints(s)}decode(e,s){return s&&this.setHints(s),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const s=!E(e)&&e.get(ce.TRY_HARDER)===!0,r=E(e)?null:e.get(ce.POSSIBLE_FORMATS),i=new Array;if(!E(r)){const a=r.some(o=>o===ye.UPC_A||o===ye.UPC_E||o===ye.EAN_13||o===ye.EAN_8||o===ye.CODABAR||o===ye.CODE_39||o===ye.CODE_93||o===ye.CODE_128||o===ye.ITF||o===ye.RSS_14||o===ye.RSS_EXPANDED);a&&!s&&i.push(new zr(e,this.verbose)),r.includes(ye.QR_CODE)&&i.push(new ds),r.includes(ye.DATA_MATRIX)&&i.push(new zs),r.includes(ye.AZTEC)&&i.push(new Ft),r.includes(ye.PDF_417)&&i.push(new es),a&&s&&i.push(new zr(e,this.verbose))}i.length===0&&(s||i.push(new zr(e,this.verbose)),i.push(new ds),i.push(new zs),i.push(new Ft),i.push(new es),s&&i.push(new zr(e,this.verbose))),this.readers=i}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Zr("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(e,this.hints)}catch(r){if(r instanceof Zr)continue}throw new I("No MultiFormat Readers were able to detect the code.")}}class Rn extends Te{constructor(e=null,s=500){const r=new Xn;r.setHints(e),super(r,s)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class Yn extends Te{constructor(e=500){super(new es,e)}}class ca extends Te{constructor(e=500){super(new ds,e)}}var Ci;(function(R){R[R.ERROR_CORRECTION=0]="ERROR_CORRECTION",R[R.CHARACTER_SET=1]="CHARACTER_SET",R[R.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",R[R.MIN_SIZE=3]="MIN_SIZE",R[R.MAX_SIZE=4]="MAX_SIZE",R[R.MARGIN=5]="MARGIN",R[R.PDF417_COMPACT=6]="PDF417_COMPACT",R[R.PDF417_COMPACTION=7]="PDF417_COMPACTION",R[R.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",R[R.AZTEC_LAYERS=9]="AZTEC_LAYERS",R[R.QR_VERSION=10]="QR_VERSION"})(Ci||(Ci={}));var Vt=Ci;class Si{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new dt(e,Int32Array.from([1])))}buildGenerator(e){const s=this.cachedGenerators;if(e>=s.length){let r=s[s.length-1];const i=this.field;for(let a=s.length;a<=e;a++){const o=r.multiply(new dt(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));s.push(o),r=o}}return s[e]}encode(e,s){if(s===0)throw new _("No error correction bytes");const r=e.length-s;if(r<=0)throw new _("No data bytes provided");const i=this.buildGenerator(s),a=new Int32Array(r);q.arraycopy(e,0,a,0,r);let o=new dt(this.field,a);o=o.multiplyByMonomial(s,1);const m=o.divide(i)[1].getCoefficients(),p=s-m.length;for(let b=0;b<p;b++)e[r+b]=0;q.arraycopy(m,0,e,r+p,m.length)}}class At{constructor(){}static applyMaskPenaltyRule1(e){return At.applyMaskPenaltyRule1Internal(e,!0)+At.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let s=0;const r=e.getArray(),i=e.getWidth(),a=e.getHeight();for(let o=0;o<a-1;o++){const c=r[o];for(let m=0;m<i-1;m++){const p=c[m];p===c[m+1]&&p===r[o+1][m]&&p===r[o+1][m+1]&&s++}}return At.N2*s}static applyMaskPenaltyRule3(e){let s=0;const r=e.getArray(),i=e.getWidth(),a=e.getHeight();for(let o=0;o<a;o++)for(let c=0;c<i;c++){const m=r[o];c+6<i&&m[c]===1&&m[c+1]===0&&m[c+2]===1&&m[c+3]===1&&m[c+4]===1&&m[c+5]===0&&m[c+6]===1&&(At.isWhiteHorizontal(m,c-4,c)||At.isWhiteHorizontal(m,c+7,c+11))&&s++,o+6<a&&r[o][c]===1&&r[o+1][c]===0&&r[o+2][c]===1&&r[o+3][c]===1&&r[o+4][c]===1&&r[o+5][c]===0&&r[o+6][c]===1&&(At.isWhiteVertical(r,c,o-4,o)||At.isWhiteVertical(r,c,o+7,o+11))&&s++}return s*At.N3}static isWhiteHorizontal(e,s,r){s=Math.max(s,0),r=Math.min(r,e.length);for(let i=s;i<r;i++)if(e[i]===1)return!1;return!0}static isWhiteVertical(e,s,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(let a=r;a<i;a++)if(e[a][s]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let s=0;const r=e.getArray(),i=e.getWidth(),a=e.getHeight();for(let m=0;m<a;m++){const p=r[m];for(let b=0;b<i;b++)p[b]===1&&s++}const o=e.getHeight()*e.getWidth();return Math.floor(Math.abs(s*2-o)*10/o)*At.N4}static getDataMaskBit(e,s,r){let i,a;switch(e){case 0:i=r+s&1;break;case 1:i=r&1;break;case 2:i=s%3;break;case 3:i=(r+s)%3;break;case 4:i=Math.floor(r/2)+Math.floor(s/3)&1;break;case 5:a=r*s,i=(a&1)+a%3;break;case 6:a=r*s,i=(a&1)+a%3&1;break;case 7:a=r*s,i=a%3+(r+s&1)&1;break;default:throw new _("Invalid mask pattern: "+e)}return i===0}static applyMaskPenaltyRule1Internal(e,s){let r=0;const i=s?e.getHeight():e.getWidth(),a=s?e.getWidth():e.getHeight(),o=e.getArray();for(let c=0;c<i;c++){let m=0,p=-1;for(let b=0;b<a;b++){const v=s?o[c][b]:o[b][c];v===p?m++:(m>=5&&(r+=At.N1+(m-5)),m=1,p=v)}m>=5&&(r+=At.N1+(m-5))}return r}}At.N1=3,At.N2=3,At.N3=40,At.N4=10;class Zn{constructor(e,s){this.width=e,this.height=s;const r=new Array(s);for(let i=0;i!==s;i++)r[i]=new Uint8Array(e);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(e,s){return this.bytes[s][e]}getArray(){return this.bytes}setNumber(e,s,r){this.bytes[s][e]=r}setBoolean(e,s,r){this.bytes[s][e]=r?1:0}clear(e){for(const s of this.bytes)ue.fill(s,e)}equals(e){if(!(e instanceof Zn))return!1;const s=e;if(this.width!==s.width||this.height!==s.height)return!1;for(let r=0,i=this.height;r<i;++r){const a=this.bytes[r],o=s.bytes[r];for(let c=0,m=this.width;c<m;++c)if(a[c]!==o[c])return!1}return!0}toString(){const e=new W;for(let s=0,r=this.height;s<r;++s){const i=this.bytes[s];for(let a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Ar{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new W;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Ar.NUM_MASK_PATTERNS}}Ar.NUM_MASK_PATTERNS=8;class wt extends w{}wt.kind="WriterException";class Ye{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,s,r,i,a){Ye.clearMatrix(a),Ye.embedBasicPatterns(r,a),Ye.embedTypeInfo(s,i,a),Ye.maybeEmbedVersionInfo(r,a),Ye.embedDataBits(e,i,a)}static embedBasicPatterns(e,s){Ye.embedPositionDetectionPatternsAndSeparators(s),Ye.embedDarkDotAtLeftBottomCorner(s),Ye.maybeEmbedPositionAdjustmentPatterns(e,s),Ye.embedTimingPatterns(s)}static embedTypeInfo(e,s,r){const i=new Q;Ye.makeTypeInfoBits(e,s,i);for(let a=0,o=i.getSize();a<o;++a){const c=i.get(i.getSize()-1-a),m=Ye.TYPE_INFO_COORDINATES[a],p=m[0],b=m[1];if(r.setBoolean(p,b,c),a<8){const v=r.getWidth()-a-1;r.setBoolean(v,8,c)}else{const S=r.getHeight()-7+(a-8);r.setBoolean(8,S,c)}}}static maybeEmbedVersionInfo(e,s){if(e.getVersionNumber()<7)return;const r=new Q;Ye.makeVersionInfoBits(e,r);let i=17;for(let a=0;a<6;++a)for(let o=0;o<3;++o){const c=r.get(i);i--,s.setBoolean(a,s.getHeight()-11+o,c),s.setBoolean(s.getHeight()-11+o,a,c)}}static embedDataBits(e,s,r){let i=0,a=-1,o=r.getWidth()-1,c=r.getHeight()-1;for(;o>0;){for(o===6&&(o-=1);c>=0&&c<r.getHeight();){for(let m=0;m<2;++m){const p=o-m;if(!Ye.isEmpty(r.get(p,c)))continue;let b;i<e.getSize()?(b=e.get(i),++i):b=!1,s!==255&&At.getDataMaskBit(s,p,c)&&(b=!b),r.setBoolean(p,c,b)}c+=a}a=-a,c+=a,o-=2}if(i!==e.getSize())throw new wt("Not all bits consumed: "+i+"/"+e.getSize())}static findMSBSet(e){return 32-te.numberOfLeadingZeros(e)}static calculateBCHCode(e,s){if(s===0)throw new _("0 polynomial");const r=Ye.findMSBSet(s);for(e<<=r-1;Ye.findMSBSet(e)>=r;)e^=s<<Ye.findMSBSet(e)-r;return e}static makeTypeInfoBits(e,s,r){if(!Ar.isValidMaskPattern(s))throw new wt("Invalid mask pattern");const i=e.getBits()<<3|s;r.appendBits(i,5);const a=Ye.calculateBCHCode(i,Ye.TYPE_INFO_POLY);r.appendBits(a,10);const o=new Q;if(o.appendBits(Ye.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new wt("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(e,s){s.appendBits(e.getVersionNumber(),6);const r=Ye.calculateBCHCode(e.getVersionNumber(),Ye.VERSION_INFO_POLY);if(s.appendBits(r,12),s.getSize()!==18)throw new wt("should not happen but we got: "+s.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let s=8;s<e.getWidth()-8;++s){const r=(s+1)%2;Ye.isEmpty(e.get(s,6))&&e.setNumber(s,6,r),Ye.isEmpty(e.get(6,s))&&e.setNumber(6,s,r)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new wt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,s,r){for(let i=0;i<8;++i){if(!Ye.isEmpty(r.get(e+i,s)))throw new wt;r.setNumber(e+i,s,0)}}static embedVerticalSeparationPattern(e,s,r){for(let i=0;i<7;++i){if(!Ye.isEmpty(r.get(e,s+i)))throw new wt;r.setNumber(e,s+i,0)}}static embedPositionAdjustmentPattern(e,s,r){for(let i=0;i<5;++i){const a=Ye.POSITION_ADJUSTMENT_PATTERN[i];for(let o=0;o<5;++o)r.setNumber(e+o,s+i,a[o])}}static embedPositionDetectionPattern(e,s,r){for(let i=0;i<7;++i){const a=Ye.POSITION_DETECTION_PATTERN[i];for(let o=0;o<7;++o)r.setNumber(e+o,s+i,a[o])}}static embedPositionDetectionPatternsAndSeparators(e){const s=Ye.POSITION_DETECTION_PATTERN[0].length;Ye.embedPositionDetectionPattern(0,0,e),Ye.embedPositionDetectionPattern(e.getWidth()-s,0,e),Ye.embedPositionDetectionPattern(0,e.getWidth()-s,e);const r=8;Ye.embedHorizontalSeparationPattern(0,r-1,e),Ye.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),Ye.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);const i=7;Ye.embedVerticalSeparationPattern(i,0,e),Ye.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),Ye.embedVerticalSeparationPattern(i,e.getHeight()-i,e)}static maybeEmbedPositionAdjustmentPatterns(e,s){if(e.getVersionNumber()<2)return;const r=e.getVersionNumber()-1,i=Ye.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let a=0,o=i.length;a!==o;a++){const c=i[a];if(c>=0)for(let m=0;m!==o;m++){const p=i[m];p>=0&&Ye.isEmpty(s.get(p,c))&&Ye.embedPositionAdjustmentPattern(p-2,c-2,s)}}}}Ye.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ye.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ye.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ye.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ye.VERSION_INFO_POLY=7973,Ye.TYPE_INFO_POLY=1335,Ye.TYPE_INFO_MASK_PATTERN=21522;class ao{constructor(e,s){this.dataBytes=e,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Rt{constructor(){}static calculateMaskPenalty(e){return At.applyMaskPenaltyRule1(e)+At.applyMaskPenaltyRule2(e)+At.applyMaskPenaltyRule3(e)+At.applyMaskPenaltyRule4(e)}static encode(e,s,r=null){let i=Rt.DEFAULT_BYTE_MODE_ENCODING;const a=r!==null&&r.get(Vt.CHARACTER_SET)!==void 0;a&&(i=r.get(Vt.CHARACTER_SET).toString());const o=this.chooseMode(e,i),c=new Q;if(o===Ve.BYTE&&(a||Rt.DEFAULT_BYTE_MODE_ENCODING!==i)){const Ie=K.getCharacterSetECIByName(i);Ie!==void 0&&this.appendECI(Ie,c)}this.appendModeInfo(o,c);const m=new Q;this.appendBytes(e,o,m,i);let p;if(r!==null&&r.get(Vt.QR_VERSION)!==void 0){const Ie=Number.parseInt(r.get(Vt.QR_VERSION).toString(),10);p=ze.getVersionForNumber(Ie);const ve=this.calculateBitsNeeded(o,c,m,p);if(!this.willFit(ve,p,s))throw new wt("Data too big for requested version")}else p=this.recommendVersion(s,o,c,m);const b=new Q;b.appendBitArray(c);const v=o===Ve.BYTE?m.getSizeInBytes():e.length;this.appendLengthInfo(v,p,o,b),b.appendBitArray(m);const S=p.getECBlocksForLevel(s),P=p.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(P,b);const H=this.interleaveWithECBytes(b,p.getTotalCodewords(),P,S.getNumBlocks()),Z=new Ar;Z.setECLevel(s),Z.setMode(o),Z.setVersion(p);const re=p.getDimensionForVersion(),he=new Zn(re,re),ke=this.chooseMaskPattern(H,s,p,he);return Z.setMaskPattern(ke),Ye.buildMatrix(H,s,p,ke,he),Z.setMatrix(he),Z}static recommendVersion(e,s,r,i){const a=this.calculateBitsNeeded(s,r,i,ze.getVersionForNumber(1)),o=this.chooseVersion(a,e),c=this.calculateBitsNeeded(s,r,i,o);return this.chooseVersion(c,e)}static calculateBitsNeeded(e,s,r,i){return s.getSize()+e.getCharacterCountBits(i)+r.getSize()}static getAlphanumericCode(e){return e<Rt.ALPHANUMERIC_TABLE.length?Rt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,s=null){if(K.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(e))return Ve.KANJI;let r=!1,i=!1;for(let a=0,o=e.length;a<o;++a){const c=e.charAt(a);if(Rt.isDigit(c))r=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return Ve.BYTE}return i?Ve.ALPHANUMERIC:r?Ve.NUMERIC:Ve.BYTE}static isOnlyDoubleByteKanji(e){let s;try{s=be.encode(e,K.SJIS)}catch{return!1}const r=s.length;if(r%2!==0)return!1;for(let i=0;i<r;i+=2){const a=s[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0}static chooseMaskPattern(e,s,r,i){let a=Number.MAX_SAFE_INTEGER,o=-1;for(let c=0;c<Ar.NUM_MASK_PATTERNS;c++){Ye.buildMatrix(e,s,r,c,i);let m=this.calculateMaskPenalty(i);m<a&&(a=m,o=c)}return o}static chooseVersion(e,s){for(let r=1;r<=40;r++){const i=ze.getVersionForNumber(r);if(Rt.willFit(e,i,s))return i}throw new wt("Data too big")}static willFit(e,s,r){const i=s.getTotalCodewords(),o=s.getECBlocksForLevel(r).getTotalECCodewords(),c=i-o,m=(e+7)/8;return c>=m}static terminateBits(e,s){const r=e*8;if(s.getSize()>r)throw new wt("data bits cannot fit in the QR Code"+s.getSize()+" > "+r);for(let o=0;o<4&&s.getSize()<r;++o)s.appendBit(!1);const i=s.getSize()&7;if(i>0)for(let o=i;o<8;o++)s.appendBit(!1);const a=e-s.getSizeInBytes();for(let o=0;o<a;++o)s.appendBits((o&1)===0?236:17,8);if(s.getSize()!==r)throw new wt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,s,r,i,a,o){if(i>=r)throw new wt("Block ID too large");const c=e%r,m=r-c,p=Math.floor(e/r),b=p+1,v=Math.floor(s/r),S=v+1,P=p-v,H=b-S;if(P!==H)throw new wt("EC bytes mismatch");if(r!==m+c)throw new wt("RS blocks mismatch");if(e!==(v+P)*m+(S+H)*c)throw new wt("Total bytes mismatch");i<m?(a[0]=v,o[0]=P):(a[0]=S,o[0]=H)}static interleaveWithECBytes(e,s,r,i){if(e.getSizeInBytes()!==r)throw new wt("Number of bits and data bytes does not match");let a=0,o=0,c=0;const m=new Array;for(let b=0;b<i;++b){const v=new Int32Array(1),S=new Int32Array(1);Rt.getNumDataBytesAndNumECBytesForBlockID(s,r,i,b,v,S);const P=v[0],H=new Uint8Array(P);e.toBytes(8*a,H,0,P);const Z=Rt.generateECBytes(H,S[0]);m.push(new ao(H,Z)),o=Math.max(o,P),c=Math.max(c,Z.length),a+=v[0]}if(r!==a)throw new wt("Data bytes does not match offset");const p=new Q;for(let b=0;b<o;++b)for(const v of m){const S=v.getDataBytes();b<S.length&&p.appendBits(S[b],8)}for(let b=0;b<c;++b)for(const v of m){const S=v.getErrorCorrectionBytes();b<S.length&&p.appendBits(S[b],8)}if(s!==p.getSizeInBytes())throw new wt("Interleaving error: "+s+" and "+p.getSizeInBytes()+" differ.");return p}static generateECBytes(e,s){const r=e.length,i=new Int32Array(r+s);for(let o=0;o<r;o++)i[o]=e[o]&255;new Si(rt.QR_CODE_FIELD_256).encode(i,s);const a=new Uint8Array(s);for(let o=0;o<s;o++)a[o]=i[r+o];return a}static appendModeInfo(e,s){s.appendBits(e.getBits(),4)}static appendLengthInfo(e,s,r,i){const a=r.getCharacterCountBits(s);if(e>=1<<a)throw new wt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)}static appendBytes(e,s,r,i){switch(s){case Ve.NUMERIC:Rt.appendNumericBytes(e,r);break;case Ve.ALPHANUMERIC:Rt.appendAlphanumericBytes(e,r);break;case Ve.BYTE:Rt.append8BitBytes(e,r,i);break;case Ve.KANJI:Rt.appendKanjiBytes(e,r);break;default:throw new wt("Invalid mode: "+s)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const s=Rt.getDigit(e);return s>=0&&s<=9}static appendNumericBytes(e,s){const r=e.length;let i=0;for(;i<r;){const a=Rt.getDigit(e.charAt(i));if(i+2<r){const o=Rt.getDigit(e.charAt(i+1)),c=Rt.getDigit(e.charAt(i+2));s.appendBits(a*100+o*10+c,10),i+=3}else if(i+1<r){const o=Rt.getDigit(e.charAt(i+1));s.appendBits(a*10+o,7),i+=2}else s.appendBits(a,4),i++}}static appendAlphanumericBytes(e,s){const r=e.length;let i=0;for(;i<r;){const a=Rt.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new wt;if(i+1<r){const o=Rt.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new wt;s.appendBits(a*45+o,11),i+=2}else s.appendBits(a,6),i++}}static append8BitBytes(e,s,r){let i;try{i=be.encode(e,r)}catch(a){throw new wt(a)}for(let a=0,o=i.length;a!==o;a++){const c=i[a];s.appendBits(c,8)}}static appendKanjiBytes(e,s){let r;try{r=be.encode(e,K.SJIS)}catch(a){throw new wt(a)}const i=r.length;for(let a=0;a<i;a+=2){const o=r[a]&255,c=r[a+1]&255,m=o<<8&4294967295|c;let p=-1;if(m>=33088&&m<=40956?p=m-33088:m>=57408&&m<=60351&&(p=m-49472),p===-1)throw new wt("Invalid byte sequence");const b=(p>>8)*192+(p&255);s.appendBits(b,13)}}static appendECI(e,s){s.appendBits(Ve.ECI.getBits(),4),s.appendBits(e.getValue(),8)}}Rt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Rt.DEFAULT_BYTE_MODE_ENCODING=K.UTF8.getName();class Ir{write(e,s,r,i=null){if(e.length===0)throw new _("Found empty contents");if(s<0||r<0)throw new _("Requested dimensions are too small: "+s+"x"+r);let a=jt.L,o=Ir.QUIET_ZONE_SIZE;i!==null&&(i.get(Vt.ERROR_CORRECTION)!==void 0&&(a=jt.fromString(i.get(Vt.ERROR_CORRECTION).toString())),i.get(Vt.MARGIN)!==void 0&&(o=Number.parseInt(i.get(Vt.MARGIN).toString(),10)));const c=Rt.encode(e,a,i);return this.renderResult(c,s,r,o)}writeToDom(e,s,r,i,a=null){typeof e=="string"&&(e=document.querySelector(e));const o=this.write(s,r,i,a);e&&e.appendChild(o)}renderResult(e,s,r,i){const a=e.getMatrix();if(a===null)throw new rs;const o=a.getWidth(),c=a.getHeight(),m=o+i*2,p=c+i*2,b=Math.max(s,m),v=Math.max(r,p),S=Math.min(Math.floor(b/m),Math.floor(v/p)),P=Math.floor((b-o*S)/2),H=Math.floor((v-c*S)/2),Z=this.createSVGElement(b,v);for(let re=0,he=H;re<c;re++,he+=S)for(let ke=0,Ie=P;ke<o;ke++,Ie+=S)if(a.get(ke,re)===1){const ve=this.createSvgRectElement(Ie,he,S,S);Z.appendChild(ve)}return Z}createSVGElement(e,s){const r=document.createElementNS(Ir.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",s.toString()),r}createSvgRectElement(e,s,r,i){const a=document.createElementNS(Ir.SVG_NS,"rect");return a.setAttributeNS(null,"x",e.toString()),a.setAttributeNS(null,"y",s.toString()),a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",i.toString()),a.setAttributeNS(null,"fill","#000000"),a}}Ir.QUIET_ZONE_SIZE=4,Ir.SVG_NS="http://www.w3.org/2000/svg";class Qr{encode(e,s,r,i,a){if(e.length===0)throw new _("Found empty contents");if(s!==ye.QR_CODE)throw new _("Can only encode QR_CODE, but got "+s);if(r<0||i<0)throw new _(`Requested dimensions are too small: ${r}x${i}`);let o=jt.L,c=Qr.QUIET_ZONE_SIZE;a!==null&&(a.get(Vt.ERROR_CORRECTION)!==void 0&&(o=jt.fromString(a.get(Vt.ERROR_CORRECTION).toString())),a.get(Vt.MARGIN)!==void 0&&(c=Number.parseInt(a.get(Vt.MARGIN).toString(),10)));const m=Rt.encode(e,o,a);return Qr.renderResult(m,r,i,c)}static renderResult(e,s,r,i){const a=e.getMatrix();if(a===null)throw new rs;const o=a.getWidth(),c=a.getHeight(),m=o+i*2,p=c+i*2,b=Math.max(s,m),v=Math.max(r,p),S=Math.min(Math.floor(b/m),Math.floor(v/p)),P=Math.floor((b-o*S)/2),H=Math.floor((v-c*S)/2),Z=new me(b,v);for(let re=0,he=H;re<c;re++,he+=S)for(let ke=0,Ie=P;ke<o;ke++,Ie+=S)a.get(ke,re)===1&&Z.setRegion(Ie,he,S,S);return Z}}Qr.QUIET_ZONE_SIZE=4;class oo{encode(e,s,r,i,a){let o;if(s===ye.QR_CODE)o=new Qr;else throw new _("No encoder available for format "+s);return o.encode(e,s,r,i,a)}}class tr extends ie{constructor(e,s,r,i,a,o,c,m){if(super(o,c),this.yuvData=e,this.dataWidth=s,this.dataHeight=r,this.left=i,this.top=a,i+o>s||a+c>r)throw new _("Crop rectangle does not fit within image data.");m&&this.reverseHorizontal(o,c)}getRow(e,s){if(e<0||e>=this.getHeight())throw new _("Requested row is outside the image: "+e);const r=this.getWidth();(s==null||s.length<r)&&(s=new Uint8ClampedArray(r));const i=(e+this.top)*this.dataWidth+this.left;return q.arraycopy(this.yuvData,i,s,0,r),s}getMatrix(){const e=this.getWidth(),s=this.getHeight();if(e===this.dataWidth&&s===this.dataHeight)return this.yuvData;const r=e*s,i=new Uint8ClampedArray(r);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return q.arraycopy(this.yuvData,a,i,0,r),i;for(let o=0;o<s;o++){const c=o*e;q.arraycopy(this.yuvData,a,i,c,e),a+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,s,r,i){return new tr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+s,r,i,!1)}renderThumbnail(){const e=this.getWidth()/tr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/tr.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*s),i=this.yuvData;let a=this.top*this.dataWidth+this.left;for(let o=0;o<s;o++){const c=o*e;for(let m=0;m<e;m++){const p=i[a+m*tr.THUMBNAIL_SCALE_FACTOR]&255;r[c+m]=4278190080|p*65793}a+=this.dataWidth*tr.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/tr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/tr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,s){const r=this.yuvData;for(let i=0,a=this.top*this.dataWidth+this.left;i<s;i++,a+=this.dataWidth){const o=a+e/2;for(let c=a,m=a+e-1;c<o;c++,m--){const p=r[c];r[c]=r[m],r[m]=p}}}invert(){return new Ee(this)}}tr.THUMBNAIL_SCALE_FACTOR=2;class vn extends ie{constructor(e,s,r,i,a,o,c){if(super(s,r),this.dataWidth=i,this.dataHeight=a,this.left=o,this.top=c,e.BYTES_PER_ELEMENT===4){const m=s*r,p=new Uint8ClampedArray(m);for(let b=0;b<m;b++){const v=e[b],S=v>>16&255,P=v>>7&510,H=v&255;p[b]=(S+P+H)/4&255}this.luminances=p}else this.luminances=e;if(i===void 0&&(this.dataWidth=s),a===void 0&&(this.dataHeight=r),o===void 0&&(this.left=0),c===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+r>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(e,s){if(e<0||e>=this.getHeight())throw new _("Requested row is outside the image: "+e);const r=this.getWidth();(s==null||s.length<r)&&(s=new Uint8ClampedArray(r));const i=(e+this.top)*this.dataWidth+this.left;return q.arraycopy(this.luminances,i,s,0,r),s}getMatrix(){const e=this.getWidth(),s=this.getHeight();if(e===this.dataWidth&&s===this.dataHeight)return this.luminances;const r=e*s,i=new Uint8ClampedArray(r);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return q.arraycopy(this.luminances,a,i,0,r),i;for(let o=0;o<s;o++){const c=o*e;q.arraycopy(this.luminances,a,i,c,e),a+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,s,r,i){return new vn(this.luminances,r,i,this.dataWidth,this.dataHeight,this.left+e,this.top+s)}invert(){return new Ee(this)}}class ua extends K{static forName(e){return this.getCharacterSetECIByName(e)}}class ki{}ki.ISO_8859_1=K.ISO8859_1;class da{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Ai{static singletonList(e){return[e]}static min(e,s){return e.sort(s)[0]}}class lo{constructor(e){this.previous=e}getPrevious(){return this.previous}}class qr extends lo{constructor(e,s,r){super(e),this.value=s,this.bitCount=r}appendTo(e,s){e.appendBits(this.value,this.bitCount)}add(e,s){return new qr(this,e,s)}addBinaryShift(e,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new qr(this,e,s)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+te.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Ii extends qr{constructor(e,s,r){super(e,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=r}appendTo(e,s){for(let r=0;r<this.binaryShiftByteCount;r++)(r===0||r===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):r===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(s[this.binaryShiftStart+r],8)}addBinaryShift(e,s){return new Ii(this,e,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function co(R,e,s){return new Ii(R,e,s)}function Nn(R,e,s){return new qr(R,e,s)}const uo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],wr=0,Kr=1,is=2,xa=3,Vs=4,ma=new qr(null,0,0),Qn=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ha(R){for(let e of R)ue.fill(e,-1);return R[wr][Vs]=0,R[Kr][Vs]=0,R[Kr][wr]=28,R[xa][Vs]=0,R[is][Vs]=0,R[is][wr]=15,R}const Ti=ha(ue.createInt32Array(6,6));class xs{constructor(e,s,r,i){this.token=e,this.mode=s,this.binaryShiftByteCount=r,this.bitCount=i}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,s){let r=this.bitCount,i=this.token;if(e!==this.mode){let o=Qn[this.mode][e];i=Nn(i,o&65535,o>>16),r+=o>>16}let a=e===is?4:5;return i=Nn(i,s,a),new xs(i,e,0,r+a)}shiftAndAppend(e,s){let r=this.token,i=this.mode===is?4:5;return r=Nn(r,Ti[this.mode][e],i),r=Nn(r,s,5),new xs(r,this.mode,0,this.bitCount+i+5)}addBinaryShiftChar(e){let s=this.token,r=this.mode,i=this.bitCount;if(this.mode===Vs||this.mode===is){let c=Qn[r][wr];s=Nn(s,c&65535,c>>16),i+=c>>16,r=wr}let a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new xs(s,r,this.binaryShiftByteCount+1,i+a);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=co(s,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new xs(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let s=this.bitCount+(Qn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?s+=xs.calculateBinaryShiftCost(e)-xs.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(s+=10),s<=e.bitCount}toBitArray(e){let s=[];for(let i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())s.unshift(i);let r=new Q;for(const i of s)i.appendTo(r,e);return r}toString(){return L.format("%s bits=%d bytes=%d",uo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}xs.INITIAL_STATE=new xs(ma,wr,0,0);function xo(R){const e=L.getCharCode(" "),s=L.getCharCode("."),r=L.getCharCode(",");R[wr][e]=1;const i=L.getCharCode("Z"),a=L.getCharCode("A");for(let S=a;S<=i;S++)R[wr][S]=S-a+2;R[Kr][e]=1;const o=L.getCharCode("z"),c=L.getCharCode("a");for(let S=c;S<=o;S++)R[Kr][S]=S-c+2;R[is][e]=1;const m=L.getCharCode("9"),p=L.getCharCode("0");for(let S=p;S<=m;S++)R[is][S]=S-p+2;R[is][r]=12,R[is][s]=13;const b=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<b.length;S++)R[xa][L.getCharCode(b[S])]=S;const v=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<v.length;S++)L.getCharCode(v[S])>0&&(R[Vs][L.getCharCode(v[S])]=S);return R}const _i=xo(ue.createInt32Array(5,256));class Cn{constructor(e){this.text=e}encode(){const e=L.getCharCode(" "),s=L.getCharCode(`
`);let r=Ai.singletonList(xs.INITIAL_STATE);for(let a=0;a<this.text.length;a++){let o,c=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case L.getCharCode("\r"):o=c===s?2:0;break;case L.getCharCode("."):o=c===e?3:0;break;case L.getCharCode(","):o=c===e?4:0;break;case L.getCharCode(":"):o=c===e?5:0;break;default:o=0}o>0?(r=Cn.updateStateListForPair(r,a,o),a++):r=this.updateStateListForChar(r,a)}return Ai.min(r,(a,o)=>a.getBitCount()-o.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,s){const r=[];for(let i of e)this.updateStateForChar(i,s,r);return Cn.simplifyStates(r)}updateStateForChar(e,s,r){let i=this.text[s]&255,a=_i[e.getMode()][i]>0,o=null;for(let c=0;c<=Vs;c++){let m=_i[c][i];if(m>0){if(o==null&&(o=e.endBinaryShift(s)),!a||c===e.getMode()||c===is){const p=o.latchAndAppend(c,m);r.push(p)}if(!a&&Ti[e.getMode()][c]>=0){const p=o.shiftAndAppend(c,m);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||_i[e.getMode()][i]===0){let c=e.addBinaryShiftChar(s);r.push(c)}}static updateStateListForPair(e,s,r){const i=[];for(let a of e)this.updateStateForPair(a,s,r,i);return this.simplifyStates(i)}static updateStateForPair(e,s,r,i){let a=e.endBinaryShift(s);if(i.push(a.latchAndAppend(Vs,r)),e.getMode()!==Vs&&i.push(a.shiftAndAppend(Vs,r)),r===3||r===4){let o=a.latchAndAppend(is,16-r).latchAndAppend(is,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){let o=e.addBinaryShiftChar(s).addBinaryShiftChar(s+1);i.push(o)}}static simplifyStates(e){let s=[];for(const r of e){let i=!0;for(const a of s){if(a.isBetterThanOrEqualTo(r)){i=!1;break}r.isBetterThanOrEqualTo(a)&&(s=s.filter(o=>o!==a))}i&&s.push(r)}return s}}class ut{constructor(){}static encodeBytes(e){return ut.encode(e,ut.DEFAULT_EC_PERCENT,ut.DEFAULT_AZTEC_LAYERS)}static encode(e,s,r){let i=new Cn(e).encode(),a=te.truncDivision(i.getSize()*s,100)+11,o=i.getSize()+a,c,m,p,b,v;if(r!==ut.DEFAULT_AZTEC_LAYERS){if(c=r<0,m=Math.abs(r),m>(c?ut.MAX_NB_BITS_COMPACT:ut.MAX_NB_BITS))throw new _(L.format("Illegal value %s for layers",r));p=ut.totalBitsInLayer(m,c),b=ut.WORD_SIZE[m];let ve=p-p%b;if(v=ut.stuffBits(i,b),v.getSize()+a>ve)throw new _("Data to large for user specified layer");if(c&&v.getSize()>b*64)throw new _("Data to large for user specified layer")}else{b=0,v=null;for(let ve=0;;ve++){if(ve>ut.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(c=ve<=3,m=c?ve+1:ve,p=ut.totalBitsInLayer(m,c),o>p)continue;(v==null||b!==ut.WORD_SIZE[m])&&(b=ut.WORD_SIZE[m],v=ut.stuffBits(i,b));let ot=p-p%b;if(!(c&&v.getSize()>b*64)&&v.getSize()+a<=ot)break}}let S=ut.generateCheckWords(v,p,b),P=v.getSize()/b,H=ut.generateModeMessage(c,m,P),Z=(c?11:14)+m*4,re=new Int32Array(Z),he;if(c){he=Z;for(let ve=0;ve<re.length;ve++)re[ve]=ve}else{he=Z+1+2*te.truncDivision(te.truncDivision(Z,2)-1,15);let ve=te.truncDivision(Z,2),ot=te.truncDivision(he,2);for(let tt=0;tt<ve;tt++){let ws=tt+te.truncDivision(tt,15);re[ve-tt-1]=ot-ws-1,re[ve+tt]=ot+ws+1}}let ke=new me(he);for(let ve=0,ot=0;ve<m;ve++){let tt=(m-ve)*4+(c?9:12);for(let ws=0;ws<tt;ws++){let Xs=ws*2;for(let Xt=0;Xt<2;Xt++)S.get(ot+Xs+Xt)&&ke.set(re[ve*2+Xt],re[ve*2+ws]),S.get(ot+tt*2+Xs+Xt)&&ke.set(re[ve*2+ws],re[Z-1-ve*2-Xt]),S.get(ot+tt*4+Xs+Xt)&&ke.set(re[Z-1-ve*2-Xt],re[Z-1-ve*2-ws]),S.get(ot+tt*6+Xs+Xt)&&ke.set(re[Z-1-ve*2-ws],re[ve*2+Xt])}ot+=tt*8}if(ut.drawModeMessage(ke,c,he,H),c)ut.drawBullsEye(ke,te.truncDivision(he,2),5);else{ut.drawBullsEye(ke,te.truncDivision(he,2),7);for(let ve=0,ot=0;ve<te.truncDivision(Z,2)-1;ve+=15,ot+=16)for(let tt=te.truncDivision(he,2)&1;tt<he;tt+=2)ke.set(te.truncDivision(he,2)-ot,tt),ke.set(te.truncDivision(he,2)+ot,tt),ke.set(tt,te.truncDivision(he,2)-ot),ke.set(tt,te.truncDivision(he,2)+ot)}let Ie=new da;return Ie.setCompact(c),Ie.setSize(he),Ie.setLayers(m),Ie.setCodeWords(P),Ie.setMatrix(ke),Ie}static drawBullsEye(e,s,r){for(let i=0;i<r;i+=2)for(let a=s-i;a<=s+i;a++)e.set(a,s-i),e.set(a,s+i),e.set(s-i,a),e.set(s+i,a);e.set(s-r,s-r),e.set(s-r+1,s-r),e.set(s-r,s-r+1),e.set(s+r,s-r),e.set(s+r,s-r+1),e.set(s+r,s+r-1)}static generateModeMessage(e,s,r){let i=new Q;return e?(i.appendBits(s-1,2),i.appendBits(r-1,6),i=ut.generateCheckWords(i,28,4)):(i.appendBits(s-1,5),i.appendBits(r-1,11),i=ut.generateCheckWords(i,40,4)),i}static drawModeMessage(e,s,r,i){let a=te.truncDivision(r,2);if(s)for(let o=0;o<7;o++){let c=a-3+o;i.get(o)&&e.set(c,a-5),i.get(o+7)&&e.set(a+5,c),i.get(20-o)&&e.set(c,a+5),i.get(27-o)&&e.set(a-5,c)}else for(let o=0;o<10;o++){let c=a-5+o+te.truncDivision(o,5);i.get(o)&&e.set(c,a-7),i.get(o+10)&&e.set(a+7,c),i.get(29-o)&&e.set(c,a+7),i.get(39-o)&&e.set(a-7,c)}}static generateCheckWords(e,s,r){let i=e.getSize()/r,a=new Si(ut.getGF(r)),o=te.truncDivision(s,r),c=ut.bitsToWords(e,r,o);a.encode(c,o-i);let m=s%r,p=new Q;p.appendBits(0,m);for(const b of Array.from(c))p.appendBits(b,r);return p}static bitsToWords(e,s,r){let i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/s;a<o;a++){let c=0;for(let m=0;m<s;m++)c|=e.get(a*s+m)?1<<s-m-1:0;i[a]=c}return i}static getGF(e){switch(e){case 4:return rt.AZTEC_PARAM;case 6:return rt.AZTEC_DATA_6;case 8:return rt.AZTEC_DATA_8;case 10:return rt.AZTEC_DATA_10;case 12:return rt.AZTEC_DATA_12;default:throw new _("Unsupported word size "+e)}}static stuffBits(e,s){let r=new Q,i=e.getSize(),a=(1<<s)-2;for(let o=0;o<i;o+=s){let c=0;for(let m=0;m<s;m++)(o+m>=i||e.get(o+m))&&(c|=1<<s-1-m);(c&a)===a?(r.appendBits(c&a,s),o--):(c&a)===0?(r.appendBits(c|1,s),o--):r.appendBits(c,s)}return r}static totalBitsInLayer(e,s){return((s?88:112)+16*e)*e}}ut.DEFAULT_EC_PERCENT=33,ut.DEFAULT_AZTEC_LAYERS=0,ut.MAX_NB_BITS=32,ut.MAX_NB_BITS_COMPACT=4,ut.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Sn{encode(e,s,r,i){return this.encodeWithHints(e,s,r,i,null)}encodeWithHints(e,s,r,i,a){let o=ki.ISO_8859_1,c=ut.DEFAULT_EC_PERCENT,m=ut.DEFAULT_AZTEC_LAYERS;return a!=null&&(a.has(Vt.CHARACTER_SET)&&(o=ua.forName(a.get(Vt.CHARACTER_SET).toString())),a.has(Vt.ERROR_CORRECTION)&&(c=te.parseInt(a.get(Vt.ERROR_CORRECTION).toString())),a.has(Vt.AZTEC_LAYERS)&&(m=te.parseInt(a.get(Vt.AZTEC_LAYERS).toString()))),Sn.encodeLayers(e,s,r,i,o,c,m)}static encodeLayers(e,s,r,i,a,o,c){if(s!==ye.AZTEC)throw new _("Can only encode AZTEC, but got "+s);let m=ut.encode(L.getBytes(e,a),o,c);return Sn.renderResult(m,r,i)}static renderResult(e,s,r){let i=e.getMatrix();if(i==null)throw new rs;let a=i.getWidth(),o=i.getHeight(),c=Math.max(s,a),m=Math.max(r,o),p=Math.min(c/a,m/o),b=(c-a*p)/2,v=(m-o*p)/2,S=new me(c,m);for(let P=0,H=v;P<o;P++,H+=p)for(let Z=0,re=b;Z<a;Z++,re+=p)i.get(Z,P)&&S.setRegion(re,H,p,p);return S}}x.AbstractExpandedDecoder=gi,x.ArgumentException=M,x.ArithmeticException=Cs,x.AztecCode=da,x.AztecCodeReader=Ft,x.AztecCodeWriter=Sn,x.AztecDecoder=ft,x.AztecDetector=bt,x.AztecDetectorResult=hn,x.AztecEncoder=ut,x.AztecHighLevelEncoder=Cn,x.AztecPoint=Xe,x.BarcodeFormat=ye,x.Binarizer=O,x.BinaryBitmap=J,x.BitArray=Q,x.BitMatrix=me,x.BitSource=ji,x.BrowserAztecCodeReader=ks,x.BrowserBarcodeReader=ra,x.BrowserCodeReader=Te,x.BrowserDatamatrixCodeReader=io,x.BrowserMultiFormatReader=Rn,x.BrowserPDF417Reader=Yn,x.BrowserQRCodeReader=ca,x.BrowserQRCodeSvgWriter=Ir,x.CharacterSetECI=K,x.ChecksumException=z,x.Code128Reader=Ne,x.Code39Reader=zt,x.DataMatrixDecodedBitStreamParser=Hs,x.DataMatrixReader=zs,x.DecodeHintType=ce,x.DecoderResult=Ue,x.DefaultGridSampler=Wr,x.DetectorResult=gr,x.EAN13Reader=_s,x.EncodeHintType=Vt,x.Exception=w,x.FormatException=F,x.GenericGF=rt,x.GenericGFPoly=dt,x.GlobalHistogramBinarizer=pe,x.GridSampler=Ur,x.GridSamplerInstance=Oe,x.HTMLCanvasElementLuminanceSource=V,x.HybridBinarizer=se,x.ITFReader=gt,x.IllegalArgumentException=_,x.IllegalStateException=rs,x.InvertedLuminanceSource=Ee,x.LuminanceSource=ie,x.MathUtils=at,x.MultiFormatOneDReader=zr,x.MultiFormatReader=Xn,x.MultiFormatWriter=oo,x.NotFoundException=I,x.OneDReader=Ke,x.PDF417DecodedBitStreamParser=fe,x.PDF417DecoderErrorCorrection=Ri,x.PDF417Reader=es,x.PDF417ResultMetadata=Gn,x.PerspectiveTransform=gs,x.PlanarYUVLuminanceSource=tr,x.QRCodeByteMatrix=Zn,x.QRCodeDataMask=it,x.QRCodeDecodedBitStreamParser=kt,x.QRCodeDecoderErrorCorrectionLevel=jt,x.QRCodeDecoderFormatInformation=Kt,x.QRCodeEncoder=Rt,x.QRCodeEncoderQRCode=Ar,x.QRCodeMaskUtil=At,x.QRCodeMatrixUtil=Ye,x.QRCodeMode=Ve,x.QRCodeReader=ds,x.QRCodeVersion=ze,x.QRCodeWriter=Qr,x.RGBLuminanceSource=vn,x.RSS14Reader=vt,x.RSSExpandedReader=we,x.ReaderException=Zr,x.ReedSolomonDecoder=cs,x.ReedSolomonEncoder=Si,x.ReedSolomonException=fs,x.Result=ee,x.ResultMetadataType=Le,x.ResultPoint=Pe,x.StringUtils=L,x.UnsupportedOperationException=ne,x.VideoInputDevice=D,x.WhiteRectangleDetector=Ss,x.WriterException=wt,x.ZXingArrays=ue,x.ZXingCharset=ua,x.ZXingInteger=te,x.ZXingStandardCharsets=ki,x.ZXingStringBuilder=W,x.ZXingStringEncoding=be,x.ZXingSystem=q,x.createAbstractExpandedDecoder=ta,Object.defineProperty(x,"__esModule",{value:!0})}))})(zxingJs_umd$1,zxingJs_umd$1.exports)),zxingJs_umd$1.exports}var zxingJs_umdExports=requireZxingJs_umd();const ZXing=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var ZXingHtml5QrcodeDecoder=(function(){function u(h,x,E){if(this.formatMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,zxingJs_umdExports.BarcodeFormat.QR_CODE],[Html5QrcodeSupportedFormats.AZTEC,zxingJs_umdExports.BarcodeFormat.AZTEC],[Html5QrcodeSupportedFormats.CODABAR,zxingJs_umdExports.BarcodeFormat.CODABAR],[Html5QrcodeSupportedFormats.CODE_39,zxingJs_umdExports.BarcodeFormat.CODE_39],[Html5QrcodeSupportedFormats.CODE_93,zxingJs_umdExports.BarcodeFormat.CODE_93],[Html5QrcodeSupportedFormats.CODE_128,zxingJs_umdExports.BarcodeFormat.CODE_128],[Html5QrcodeSupportedFormats.DATA_MATRIX,zxingJs_umdExports.BarcodeFormat.DATA_MATRIX],[Html5QrcodeSupportedFormats.MAXICODE,zxingJs_umdExports.BarcodeFormat.MAXICODE],[Html5QrcodeSupportedFormats.ITF,zxingJs_umdExports.BarcodeFormat.ITF],[Html5QrcodeSupportedFormats.EAN_13,zxingJs_umdExports.BarcodeFormat.EAN_13],[Html5QrcodeSupportedFormats.EAN_8,zxingJs_umdExports.BarcodeFormat.EAN_8],[Html5QrcodeSupportedFormats.PDF_417,zxingJs_umdExports.BarcodeFormat.PDF_417],[Html5QrcodeSupportedFormats.RSS_14,zxingJs_umdExports.BarcodeFormat.RSS_14],[Html5QrcodeSupportedFormats.RSS_EXPANDED,zxingJs_umdExports.BarcodeFormat.RSS_EXPANDED],[Html5QrcodeSupportedFormats.UPC_A,zxingJs_umdExports.BarcodeFormat.UPC_A],[Html5QrcodeSupportedFormats.UPC_E,zxingJs_umdExports.BarcodeFormat.UPC_E],[Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,zxingJs_umdExports.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ZXing)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=x,this.logger=E;var j=this.createZXingFormats(h),g=new Map;g.set(zxingJs_umdExports.DecodeHintType.POSSIBLE_FORMATS,j),g.set(zxingJs_umdExports.DecodeHintType.TRY_HARDER,!1),this.hints=g}return u.prototype.decodeAsync=function(h){var x=this;return new Promise(function(E,j){try{E(x.decode(h))}catch(g){j(g)}})},u.prototype.decode=function(h){var x=new zxingJs_umdExports.MultiFormatReader(this.verbose,this.hints),E=new zxingJs_umdExports.HTMLCanvasElementLuminanceSource(h),j=new zxingJs_umdExports.BinaryBitmap(new zxingJs_umdExports.HybridBinarizer(E)),g=x.decode(j);return{text:g.text,format:QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},u.prototype.createReverseFormatMap=function(){var h=new Map;return this.formatMap.forEach(function(x,E,j){h.set(x,E)}),h},u.prototype.toHtml5QrcodeSupportedFormats=function(h){if(!this.reverseFormatMap.has(h))throw"reverseFormatMap doesn't have ".concat(h);return this.reverseFormatMap.get(h)},u.prototype.createZXingFormats=function(h){for(var x=[],E=0,j=h;E<j.length;E++){var g=j[E];this.formatMap.has(g)?x.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return x},u.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},u})(),__awaiter$4=function(u,h,x,E){function j(g){return g instanceof x?g:new x(function(N){N(g)})}return new(x||(x=Promise))(function(g,N){function k(M){try{w(E.next(M))}catch(_){N(_)}}function A(M){try{w(E.throw(M))}catch(_){N(_)}}function w(M){M.done?g(M.value):j(M.value).then(k,A)}w((E=E.apply(u,h||[])).next())})},__generator$4=function(u,h){var x={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,j,g,N;return N={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function k(w){return function(M){return A([w,M])}}function A(w){if(E)throw new TypeError("Generator is already executing.");for(;N&&(N=0,w[0]&&(x=0)),x;)try{if(E=1,j&&(g=w[0]&2?j.return:w[0]?j.throw||((g=j.return)&&g.call(j),0):j.next)&&!(g=g.call(j,w[1])).done)return g;switch(j=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return x.label++,{value:w[1],done:!1};case 5:x.label++,j=w[1],w=[0];continue;case 7:w=x.ops.pop(),x.trys.pop();continue;default:if(g=x.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){x=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){x.label=w[1];break}if(w[0]===6&&x.label<g[1]){x.label=g[1],g=w;break}if(g&&x.label<g[2]){x.label=g[2],x.ops.push(w);break}g[2]&&x.ops.pop(),x.trys.pop();continue}w=h.call(u,x)}catch(M){w=[6,M],j=0}finally{E=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},BarcodeDetectorDelegate=(function(){function u(h,x,E){if(this.formatMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,"qr_code"],[Html5QrcodeSupportedFormats.AZTEC,"aztec"],[Html5QrcodeSupportedFormats.CODABAR,"codabar"],[Html5QrcodeSupportedFormats.CODE_39,"code_39"],[Html5QrcodeSupportedFormats.CODE_93,"code_93"],[Html5QrcodeSupportedFormats.CODE_128,"code_128"],[Html5QrcodeSupportedFormats.DATA_MATRIX,"data_matrix"],[Html5QrcodeSupportedFormats.ITF,"itf"],[Html5QrcodeSupportedFormats.EAN_13,"ean_13"],[Html5QrcodeSupportedFormats.EAN_8,"ean_8"],[Html5QrcodeSupportedFormats.PDF_417,"pdf417"],[Html5QrcodeSupportedFormats.UPC_A,"upc_a"],[Html5QrcodeSupportedFormats.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!u.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=x,this.logger=E;var j=this.createBarcodeDetectorFormats(h);if(this.detector=new BarcodeDetector(j),!this.detector)throw"BarcodeDetector detector not supported"}return u.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var h=new BarcodeDetector({formats:["qr_code"]});return typeof h<"u"},u.prototype.decodeAsync=function(h){return __awaiter$4(this,void 0,void 0,function(){var x,E;return __generator$4(this,function(j){switch(j.label){case 0:return[4,this.detector.detect(h)];case 1:if(x=j.sent(),!x||x.length===0)throw"No barcode or QR code detected.";return E=this.selectLargestBarcode(x),[2,{text:E.rawValue,format:QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(E.format)),debugData:this.createDebugData()}]}})})},u.prototype.selectLargestBarcode=function(h){for(var x=null,E=0,j=0,g=h;j<g.length;j++){var N=g[j],k=N.boundingBox.width*N.boundingBox.height;k>E&&(E=k,x=N)}if(!x)throw"No largest barcode found";return x},u.prototype.createBarcodeDetectorFormats=function(h){for(var x=[],E=0,j=h;E<j.length;E++){var g=j[E];this.formatMap.has(g)?x.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:x}},u.prototype.toHtml5QrcodeSupportedFormats=function(h){if(!this.reverseFormatMap.has(h))throw"reverseFormatMap doesn't have ".concat(h);return this.reverseFormatMap.get(h)},u.prototype.createReverseFormatMap=function(){var h=new Map;return this.formatMap.forEach(function(x,E,j){h.set(x,E)}),h},u.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},u})(),__awaiter$3=function(u,h,x,E){function j(g){return g instanceof x?g:new x(function(N){N(g)})}return new(x||(x=Promise))(function(g,N){function k(M){try{w(E.next(M))}catch(_){N(_)}}function A(M){try{w(E.throw(M))}catch(_){N(_)}}function w(M){M.done?g(M.value):j(M.value).then(k,A)}w((E=E.apply(u,h||[])).next())})},__generator$3=function(u,h){var x={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,j,g,N;return N={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function k(w){return function(M){return A([w,M])}}function A(w){if(E)throw new TypeError("Generator is already executing.");for(;N&&(N=0,w[0]&&(x=0)),x;)try{if(E=1,j&&(g=w[0]&2?j.return:w[0]?j.throw||((g=j.return)&&g.call(j),0):j.next)&&!(g=g.call(j,w[1])).done)return g;switch(j=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return x.label++,{value:w[1],done:!1};case 5:x.label++,j=w[1],w=[0];continue;case 7:w=x.ops.pop(),x.trys.pop();continue;default:if(g=x.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){x=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){x.label=w[1];break}if(w[0]===6&&x.label<g[1]){x.label=g[1],g=w;break}if(g&&x.label<g[2]){x.label=g[2],x.ops.push(w);break}g[2]&&x.ops.pop(),x.trys.pop();continue}w=h.call(u,x)}catch(M){w=[6,M],j=0}finally{E=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Html5QrcodeShim=(function(){function u(h,x,E,j){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=E,x&&BarcodeDetectorDelegate.isSupported()?(this.primaryDecoder=new BarcodeDetectorDelegate(h,E,j),this.secondaryDecoder=new ZXingHtml5QrcodeDecoder(h,E,j)):this.primaryDecoder=new ZXingHtml5QrcodeDecoder(h,E,j)}return u.prototype.decodeAsync=function(h){return __awaiter$3(this,void 0,void 0,function(){var x;return __generator$3(this,function(E){switch(E.label){case 0:x=performance.now(),E.label=1;case 1:return E.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(h)];case 2:return[2,E.sent()];case 3:return this.possiblyLogPerformance(x),[7];case 4:return[2]}})})},u.prototype.decodeRobustlyAsync=function(h){return __awaiter$3(this,void 0,void 0,function(){var x,E;return __generator$3(this,function(j){switch(j.label){case 0:x=performance.now(),j.label=1;case 1:return j.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(h)];case 2:return[2,j.sent()];case 3:if(E=j.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(h)];throw E;case 4:return this.possiblyLogPerformance(x),[7];case 5:return[2]}})})},u.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},u.prototype.possiblyLogPerformance=function(h){if(this.verbose){var x=performance.now()-h;this.executionResults.push(x),this.executions++,this.possiblyFlushPerformanceReport()}},u.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var h=0,x=0,E=this.executionResults;x<E.length;x++){var j=E[x];h+=j}var g=h/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},u})(),__extends$1=(function(){var u=function(h,x){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,j){E.__proto__=j}||function(E,j){for(var g in j)Object.prototype.hasOwnProperty.call(j,g)&&(E[g]=j[g])},u(h,x)};return function(h,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");u(h,x);function E(){this.constructor=h}h.prototype=x===null?Object.create(x):(E.prototype=x.prototype,new E)}})(),__awaiter$2=function(u,h,x,E){function j(g){return g instanceof x?g:new x(function(N){N(g)})}return new(x||(x=Promise))(function(g,N){function k(M){try{w(E.next(M))}catch(_){N(_)}}function A(M){try{w(E.throw(M))}catch(_){N(_)}}function w(M){M.done?g(M.value):j(M.value).then(k,A)}w((E=E.apply(u,h||[])).next())})},__generator$2=function(u,h){var x={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,j,g,N;return N={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function k(w){return function(M){return A([w,M])}}function A(w){if(E)throw new TypeError("Generator is already executing.");for(;N&&(N=0,w[0]&&(x=0)),x;)try{if(E=1,j&&(g=w[0]&2?j.return:w[0]?j.throw||((g=j.return)&&g.call(j),0):j.next)&&!(g=g.call(j,w[1])).done)return g;switch(j=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return x.label++,{value:w[1],done:!1};case 5:x.label++,j=w[1],w=[0];continue;case 7:w=x.ops.pop(),x.trys.pop();continue;default:if(g=x.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){x=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){x.label=w[1];break}if(w[0]===6&&x.label<g[1]){x.label=g[1],g=w;break}if(g&&x.label<g[2]){x.label=g[2],x.ops.push(w);break}g[2]&&x.ops.pop(),x.trys.pop();continue}w=h.call(u,x)}catch(M){w=[6,M],j=0}finally{E=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},AbstractCameraCapability=(function(){function u(h,x){this.name=h,this.track=x}return u.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},u.prototype.apply=function(h){var x={};x[this.name]=h;var E={advanced:[x]};return this.track.applyConstraints(E)},u.prototype.value=function(){var h=this.track.getSettings();if(this.name in h){var x=h[this.name];return x}return null},u})(),AbstractRangeCameraCapability=(function(u){__extends$1(h,u);function h(x,E){return u.call(this,x,E)||this}return h.prototype.min=function(){return this.getCapabilities().min},h.prototype.max=function(){return this.getCapabilities().max},h.prototype.step=function(){return this.getCapabilities().step},h.prototype.apply=function(x){var E={};E[this.name]=x;var j={advanced:[E]};return this.track.applyConstraints(j)},h.prototype.getCapabilities=function(){this.failIfNotSupported();var x=this.track.getCapabilities(),E=x[this.name];return{min:E.min,max:E.max,step:E.step}},h.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},h})(AbstractCameraCapability),ZoomFeatureImpl=(function(u){__extends$1(h,u);function h(x){return u.call(this,"zoom",x)||this}return h})(AbstractRangeCameraCapability),TorchFeatureImpl=(function(u){__extends$1(h,u);function h(x){return u.call(this,"torch",x)||this}return h})(AbstractCameraCapability),CameraCapabilitiesImpl=(function(){function u(h){this.track=h}return u.prototype.zoomFeature=function(){return new ZoomFeatureImpl(this.track)},u.prototype.torchFeature=function(){return new TorchFeatureImpl(this.track)},u})(),RenderedCameraImpl=(function(){function u(h,x,E){this.isClosed=!1,this.parentElement=h,this.mediaStream=x,this.callbacks=E,this.surface=this.createVideoElement(this.parentElement.clientWidth),h.append(this.surface)}return u.prototype.createVideoElement=function(h){var x=document.createElement("video");return x.style.width="".concat(h,"px"),x.style.display="block",x.muted=!0,x.setAttribute("muted","true"),x.playsInline=!0,x},u.prototype.setupSurface=function(){var h=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var x=function(){var E=h.surface.clientWidth,j=h.surface.clientHeight;h.callbacks.onRenderSurfaceReady(E,j),h.surface.removeEventListener("playing",x)};this.surface.addEventListener("playing",x),this.surface.srcObject=this.mediaStream,this.surface.play()},u.create=function(h,x,E,j){return __awaiter$2(this,void 0,void 0,function(){var g,N;return __generator$2(this,function(k){switch(k.label){case 0:return g=new u(h,x,j),E.aspectRatio?(N={aspectRatio:E.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(N)]):[3,2];case 1:k.sent(),k.label=2;case 2:return g.setupSurface(),[2,g]}})})},u.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},u.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},u.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},u.prototype.resume=function(h){this.failIfClosed();var x=this,E=function(){setTimeout(h,200),x.surface.removeEventListener("playing",E)};this.surface.addEventListener("playing",E),this.surface.play()},u.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},u.prototype.getSurface=function(){return this.failIfClosed(),this.surface},u.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},u.prototype.applyVideoConstraints=function(h){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(x){if("aspectRatio"in h)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(h)]})})},u.prototype.close=function(){if(this.isClosed)return Promise.resolve();var h=this;return new Promise(function(x,E){var j=h.mediaStream.getVideoTracks(),g=j.length,N=0;h.mediaStream.getVideoTracks().forEach(function(k){h.mediaStream.removeTrack(k),k.stop(),++N,N>=g&&(h.isClosed=!0,h.parentElement.removeChild(h.surface),x())})})},u.prototype.getCapabilities=function(){return new CameraCapabilitiesImpl(this.getFirstTrackOrFail())},u})(),CameraImpl=(function(){function u(h){this.mediaStream=h}return u.prototype.render=function(h,x,E){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(j){return[2,RenderedCameraImpl.create(h,this.mediaStream,x,E)]})})},u.create=function(h){return __awaiter$2(this,void 0,void 0,function(){var x,E;return __generator$2(this,function(j){switch(j.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return x={audio:!1,video:h},[4,navigator.mediaDevices.getUserMedia(x)];case 1:return E=j.sent(),[2,new u(E)]}})})},u})(),__awaiter$1=function(u,h,x,E){function j(g){return g instanceof x?g:new x(function(N){N(g)})}return new(x||(x=Promise))(function(g,N){function k(M){try{w(E.next(M))}catch(_){N(_)}}function A(M){try{w(E.throw(M))}catch(_){N(_)}}function w(M){M.done?g(M.value):j(M.value).then(k,A)}w((E=E.apply(u,h||[])).next())})},__generator$1=function(u,h){var x={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,j,g,N;return N={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function k(w){return function(M){return A([w,M])}}function A(w){if(E)throw new TypeError("Generator is already executing.");for(;N&&(N=0,w[0]&&(x=0)),x;)try{if(E=1,j&&(g=w[0]&2?j.return:w[0]?j.throw||((g=j.return)&&g.call(j),0):j.next)&&!(g=g.call(j,w[1])).done)return g;switch(j=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return x.label++,{value:w[1],done:!1};case 5:x.label++,j=w[1],w=[0];continue;case 7:w=x.ops.pop(),x.trys.pop();continue;default:if(g=x.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){x=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){x.label=w[1];break}if(w[0]===6&&x.label<g[1]){x.label=g[1],g=w;break}if(g&&x.label<g[2]){x.label=g[2],x.ops.push(w);break}g[2]&&x.ops.pop(),x.trys.pop();continue}w=h.call(u,x)}catch(M){w=[6,M],j=0}finally{E=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},CameraFactory=(function(){function u(){}return u.failIfNotSupported=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(h){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new u]})})},u.prototype.create=function(h){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(x){return[2,CameraImpl.create(h)]})})},u})(),__awaiter=function(u,h,x,E){function j(g){return g instanceof x?g:new x(function(N){N(g)})}return new(x||(x=Promise))(function(g,N){function k(M){try{w(E.next(M))}catch(_){N(_)}}function A(M){try{w(E.throw(M))}catch(_){N(_)}}function w(M){M.done?g(M.value):j(M.value).then(k,A)}w((E=E.apply(u,h||[])).next())})},__generator=function(u,h){var x={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,j,g,N;return N={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function k(w){return function(M){return A([w,M])}}function A(w){if(E)throw new TypeError("Generator is already executing.");for(;N&&(N=0,w[0]&&(x=0)),x;)try{if(E=1,j&&(g=w[0]&2?j.return:w[0]?j.throw||((g=j.return)&&g.call(j),0):j.next)&&!(g=g.call(j,w[1])).done)return g;switch(j=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return x.label++,{value:w[1],done:!1};case 5:x.label++,j=w[1],w=[0];continue;case 7:w=x.ops.pop(),x.trys.pop();continue;default:if(g=x.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){x=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){x.label=w[1];break}if(w[0]===6&&x.label<g[1]){x.label=g[1],g=w;break}if(g&&x.label<g[2]){x.label=g[2],x.ops.push(w);break}g[2]&&x.ops.pop(),x.trys.pop();continue}w=h.call(u,x)}catch(M){w=[6,M],j=0}finally{E=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},CameraRetriever=(function(){function u(){}return u.retrieve=function(){if(navigator.mediaDevices)return u.getCamerasFromMediaDevices();var h=MediaStreamTrack;return MediaStreamTrack&&h.getSources?u.getCamerasFromMediaStreamTrack():u.rejectWithError()},u.rejectWithError=function(){var h=Html5QrcodeStrings.unableToQuerySupportedDevices();return u.isHttpsOrLocalhost()||(h=Html5QrcodeStrings.insecureContextCameraQueryError()),Promise.reject(h)},u.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var h=location.host.split(":")[0];return h==="127.0.0.1"||h==="localhost"},u.getCamerasFromMediaDevices=function(){return __awaiter(this,void 0,void 0,function(){var h,x,E,j,g,N,k;return __generator(this,function(A){switch(A.label){case 0:return h=function(w){for(var M=w.getVideoTracks(),_=0,J=M;_<J.length;_++){var z=J[_];z.enabled=!1,z.stop(),w.removeTrack(z)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return x=A.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(E=A.sent(),j=[],g=0,N=E;g<N.length;g++)k=N[g],k.kind==="videoinput"&&j.push({id:k.deviceId,label:k.label});return h(x),[2,j]}})})},u.getCamerasFromMediaStreamTrack=function(){return new Promise(function(h,x){var E=function(g){for(var N=[],k=0,A=g;k<A.length;k++){var w=A[k];w.kind==="video"&&N.push({id:w.id,label:w.label})}h(N)},j=MediaStreamTrack;j.getSources(E)})},u})(),Html5QrcodeScannerState;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.NOT_STARTED=1]="NOT_STARTED",u[u.SCANNING=2]="SCANNING",u[u.PAUSED=3]="PAUSED"})(Html5QrcodeScannerState||(Html5QrcodeScannerState={}));var StateManagerImpl=(function(){function u(){this.state=Html5QrcodeScannerState.NOT_STARTED,this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN}return u.prototype.directTransition=function(h){this.failIfTransitionOngoing(),this.validateTransition(h),this.state=h},u.prototype.startTransition=function(h){return this.failIfTransitionOngoing(),this.validateTransition(h),this.onGoingTransactionNewState=h,this},u.prototype.execute=function(){if(this.onGoingTransactionNewState===Html5QrcodeScannerState.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var h=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN,this.directTransition(h)},u.prototype.cancel=function(){if(this.onGoingTransactionNewState===Html5QrcodeScannerState.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN},u.prototype.getState=function(){return this.state},u.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Html5QrcodeScannerState.UNKNOWN)throw"Cannot transition to a new state, already under transition"},u.prototype.validateTransition=function(h){switch(this.state){case Html5QrcodeScannerState.UNKNOWN:throw"Transition from unknown is not allowed";case Html5QrcodeScannerState.NOT_STARTED:this.failIfNewStateIs(h,[Html5QrcodeScannerState.PAUSED]);break;case Html5QrcodeScannerState.SCANNING:break;case Html5QrcodeScannerState.PAUSED:break}},u.prototype.failIfNewStateIs=function(h,x){for(var E=0,j=x;E<j.length;E++){var g=j[E];if(h===g)throw"Cannot transition from ".concat(this.state," to ").concat(h)}},u})(),StateManagerProxy=(function(){function u(h){this.stateManager=h}return u.prototype.startTransition=function(h){return this.stateManager.startTransition(h)},u.prototype.directTransition=function(h){this.stateManager.directTransition(h)},u.prototype.getState=function(){return this.stateManager.getState()},u.prototype.canScanFile=function(){return this.stateManager.getState()===Html5QrcodeScannerState.NOT_STARTED},u.prototype.isScanning=function(){return this.stateManager.getState()!==Html5QrcodeScannerState.NOT_STARTED},u.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Html5QrcodeScannerState.SCANNING},u.prototype.isPaused=function(){return this.stateManager.getState()===Html5QrcodeScannerState.PAUSED},u})(),StateManagerFactory=(function(){function u(){}return u.create=function(){return new StateManagerProxy(new StateManagerImpl)},u})(),__extends=(function(){var u=function(h,x){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,j){E.__proto__=j}||function(E,j){for(var g in j)Object.prototype.hasOwnProperty.call(j,g)&&(E[g]=j[g])},u(h,x)};return function(h,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");u(h,x);function E(){this.constructor=h}h.prototype=x===null?Object.create(x):(E.prototype=x.prototype,new E)}})(),Constants=(function(u){__extends(h,u);function h(){return u!==null&&u.apply(this,arguments)||this}return h.DEFAULT_WIDTH=300,h.DEFAULT_WIDTH_OFFSET=2,h.FILE_SCAN_MIN_HEIGHT=300,h.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,h.MIN_QR_BOX_SIZE=50,h.SHADED_LEFT=1,h.SHADED_RIGHT=2,h.SHADED_TOP=3,h.SHADED_BOTTOM=4,h.SHADED_REGION_ELEMENT_ID="qr-shaded-region",h.VERBOSE=!1,h.BORDER_SHADER_DEFAULT_COLOR="#ffffff",h.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",h})(Html5QrcodeConstants),InternalHtml5QrcodeConfig=(function(){function u(h,x){this.logger=x,this.fps=Constants.SCAN_DEFAULT_FPS,h?(h.fps&&(this.fps=h.fps),this.disableFlip=h.disableFlip===!0,this.qrbox=h.qrbox,this.aspectRatio=h.aspectRatio,this.videoConstraints=h.videoConstraints):this.disableFlip=Constants.DEFAULT_DISABLE_FLIP}return u.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?VideoConstraintsUtil.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},u.prototype.isShadedBoxEnabled=function(){return!isNullOrUndefined(this.qrbox)},u.create=function(h,x){return new u(h,x)},u})(),Html5Qrcode=(function(){function u(h,x){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(h))throw"HTML Element with id=".concat(h," not found");this.elementId=h,this.verbose=!1;var E;typeof x=="boolean"?this.verbose=x===!0:x&&(E=x,this.verbose=E.verbose===!0,E.experimentalFeatures),this.logger=new BaseLoggger(this.verbose),this.qrcode=new Html5QrcodeShim(this.getSupportedFormats(x),this.getUseBarCodeDetectorIfSupported(E),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=StateManagerFactory.create()}return u.prototype.start=function(h,x,E,j){var g=this;if(!h)throw"cameraIdOrConfig is required";if(!E||typeof E!="function")throw"qrCodeSuccessCallback is required and should be a function.";var N;j?N=j:N=this.verbose?this.logger.log:function(){};var k=InternalHtml5QrcodeConfig.create(x,this.logger);this.clearElement();var A=!1;k.videoConstraints&&(k.isMediaStreamConstraintsValid()?A=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=A,M=document.getElementById(this.elementId);M.clientWidth?M.clientWidth:Constants.DEFAULT_WIDTH,M.style.position="relative",this.shouldScan=!0,this.element=M;var _=this,J=this.stateManagerProxy.startTransition(Html5QrcodeScannerState.SCANNING);return new Promise(function(z,O){var q=w?k.videoConstraints:_.createVideoConstraints(h);if(!q){J.cancel(),O("videoConstraints should be defined");return}var ae={};(!w||k.aspectRatio)&&(ae.aspectRatio=k.aspectRatio);var je={onRenderSurfaceReady:function(ue,te){_.setupUi(ue,te,k),_.isScanning=!0,_.foreverScan(k,E,N)}};CameraFactory.failIfNotSupported().then(function(ue){ue.create(q).then(function(te){return te.render(g.element,ae,je).then(function(Q){_.renderedCamera=Q,J.execute(),z(null)}).catch(function(Q){J.cancel(),O(Q)})}).catch(function(te){J.cancel(),O(Html5QrcodeStrings.errorGettingUserMedia(te))})}).catch(function(ue){J.cancel(),O(Html5QrcodeStrings.cameraStreamingNotSupported())})})},u.prototype.pause=function(h){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Html5QrcodeScannerState.PAUSED),this.showPausedState(),(isNullOrUndefined(h)||h!==!0)&&(h=!1),h&&this.renderedCamera&&this.renderedCamera.pause()},u.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var h=this,x=function(){h.stateManagerProxy.directTransition(Html5QrcodeScannerState.SCANNING),h.hidePausedState()};if(!this.renderedCamera.isPaused()){x();return}this.renderedCamera.resume(function(){x()})},u.prototype.getState=function(){return this.stateManagerProxy.getState()},u.prototype.stop=function(){var h=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var x=this.stateManagerProxy.startTransition(Html5QrcodeScannerState.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var E=function(){if(h.element){var g=document.getElementById(Constants.SHADED_REGION_ELEMENT_ID);g&&h.element.removeChild(g)}},j=this;return this.renderedCamera.close().then(function(){return j.renderedCamera=null,j.element&&(j.element.removeChild(j.canvasElement),j.canvasElement=null),E(),j.qrRegion&&(j.qrRegion=null),j.context&&(j.context=null),x.execute(),j.hidePausedState(),j.isScanning=!1,Promise.resolve()})},u.prototype.scanFile=function(h,x){return this.scanFileV2(h,x).then(function(E){return E.decodedText})},u.prototype.scanFileV2=function(h,x){var E=this;if(!h||!(h instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(isNullOrUndefined(x)&&(x=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(j,g){E.possiblyCloseLastScanImageFile(),E.clearElement(),E.lastScanImageFile=URL.createObjectURL(h);var N=new Image;N.onload=function(){var k=N.width,A=N.height,w=document.getElementById(E.elementId),M=w.clientWidth?w.clientWidth:Constants.DEFAULT_WIDTH,_=Math.max(w.clientHeight?w.clientHeight:A,Constants.FILE_SCAN_MIN_HEIGHT),J=E.computeCanvasDrawConfig(k,A,M,_);if(x){var z=E.createCanvasElement(M,_,"qr-canvas-visible");z.style.display="inline-block",w.appendChild(z);var O=z.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=M,O.canvas.height=_,O.drawImage(N,0,0,k,A,J.x,J.y,J.width,J.height)}var q=Constants.FILE_SCAN_HIDDEN_CANVAS_PADDING,ae=Math.max(N.width,J.width),je=Math.max(N.height,J.height),ue=ae+2*q,te=je+2*q,Q=E.createCanvasElement(ue,te);w.appendChild(Q);var xe=Q.getContext("2d");if(!xe)throw"Unable to get 2d context from canvas";xe.canvas.width=ue,xe.canvas.height=te,xe.drawImage(N,0,0,k,A,q,q,ae,je);try{E.qrcode.decodeRobustlyAsync(Q).then(function(ce){j(Html5QrcodeResultFactory.createFromQrcodeResult(ce))}).catch(g)}catch(ce){g("QR code parse error, error = ".concat(ce))}},N.onerror=g,N.onabort=g,N.onstalled=g,N.onsuspend=g,N.src=URL.createObjectURL(h)})},u.prototype.clear=function(){this.clearElement()},u.getCameras=function(){return CameraRetriever.retrieve()},u.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},u.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},u.prototype.applyVideoConstraints=function(h){if(h){if(!VideoConstraintsUtil.isMediaStreamConstraintsValid(h,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(h)},u.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},u.prototype.getSupportedFormats=function(h){var x=[Html5QrcodeSupportedFormats.QR_CODE,Html5QrcodeSupportedFormats.AZTEC,Html5QrcodeSupportedFormats.CODABAR,Html5QrcodeSupportedFormats.CODE_39,Html5QrcodeSupportedFormats.CODE_93,Html5QrcodeSupportedFormats.CODE_128,Html5QrcodeSupportedFormats.DATA_MATRIX,Html5QrcodeSupportedFormats.MAXICODE,Html5QrcodeSupportedFormats.ITF,Html5QrcodeSupportedFormats.EAN_13,Html5QrcodeSupportedFormats.EAN_8,Html5QrcodeSupportedFormats.PDF_417,Html5QrcodeSupportedFormats.RSS_14,Html5QrcodeSupportedFormats.RSS_EXPANDED,Html5QrcodeSupportedFormats.UPC_A,Html5QrcodeSupportedFormats.UPC_E,Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION];if(!h||typeof h=="boolean"||!h.formatsToSupport)return x;if(!Array.isArray(h.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(h.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var E=[],j=0,g=h.formatsToSupport;j<g.length;j++){var N=g[j];isValidHtml5QrcodeSupportedFormats(N)?E.push(N):this.logger.warn("Invalid format: ".concat(N," passed in config, ignoring."))}if(E.length===0)throw"None of formatsToSupport match supported values.";return E},u.prototype.getUseBarCodeDetectorIfSupported=function(h){if(isNullOrUndefined(h))return!0;if(!isNullOrUndefined(h.useBarCodeDetectorIfSupported))return h.useBarCodeDetectorIfSupported!==!1;if(isNullOrUndefined(h.experimentalFeatures))return!0;var x=h.experimentalFeatures;return isNullOrUndefined(x.useBarCodeDetectorIfSupported)?!0:x.useBarCodeDetectorIfSupported!==!1},u.prototype.validateQrboxSize=function(h,x,E){var j=this,g=E.qrbox;this.validateQrboxConfig(g);var N=this.toQrdimensions(h,x,g),k=function(w){if(w<Constants.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Constants.MIN_QR_BOX_SIZE,"px.")},A=function(w){return w>h&&(j.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=h),w};k(N.width),k(N.height),N.width=A(N.width)},u.prototype.validateQrboxConfig=function(h){if(typeof h!="number"&&typeof h!="function"&&(h.width===void 0||h.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},u.prototype.toQrdimensions=function(h,x,E){if(typeof E=="number")return{width:E,height:E};if(typeof E=="function")try{return E(h,x)}catch(j){throw new Error("qrbox config was passed as a function but it failed with unknown error"+j)}return E},u.prototype.setupUi=function(h,x,E){E.isShadedBoxEnabled()&&this.validateQrboxSize(h,x,E);var j=isNullOrUndefined(E.qrbox)?{width:h,height:x}:E.qrbox;this.validateQrboxConfig(j);var g=this.toQrdimensions(h,x,j);g.height>x&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var N=E.isShadedBoxEnabled()&&g.height<=x,k={x:0,y:0,width:h,height:x},A=N?this.getShadedRegionBounds(h,x,g):k,w=this.createCanvasElement(A.width,A.height),M={willReadFrequently:!0},_=w.getContext("2d",M);_.canvas.width=A.width,_.canvas.height=A.height,this.element.append(w),N&&this.possiblyInsertShadingElement(this.element,h,x,g),this.createScannerPausedUiElement(this.element),this.qrRegion=A,this.context=_,this.canvasElement=w},u.prototype.createScannerPausedUiElement=function(h){var x=document.createElement("div");x.innerText=Html5QrcodeStrings.scannerPaused(),x.style.display="none",x.style.position="absolute",x.style.top="0px",x.style.zIndex="1",x.style.background="rgba(9, 9, 9, 0.46)",x.style.color="#FFECEC",x.style.textAlign="center",x.style.width="100%",h.appendChild(x),this.scannerPausedUiElement=x},u.prototype.scanContext=function(h,x){var E=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(j){return h(j.text,Html5QrcodeResultFactory.createFromQrcodeResult(j)),E.possiblyUpdateShaders(!0),!0}).catch(function(j){E.possiblyUpdateShaders(!1);var g=Html5QrcodeStrings.codeParseError(j);return x(g,Html5QrcodeErrorFactory.createFrom(g)),!1})},u.prototype.foreverScan=function(h,x,E){var j=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),N=g.videoWidth/g.clientWidth,k=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var A=this.qrRegion.width*N,w=this.qrRegion.height*k,M=this.qrRegion.x*N,_=this.qrRegion.y*k;this.context.drawImage(g,M,_,A,w,0,0,this.qrRegion.width,this.qrRegion.height);var J=function(){j.foreverScanTimeout=setTimeout(function(){j.foreverScan(h,x,E)},j.getTimeoutFps(h.fps))};this.scanContext(x,E).then(function(z){!z&&h.disableFlip!==!0?(j.context.translate(j.context.canvas.width,0),j.context.scale(-1,1),j.scanContext(x,E).finally(function(){J()})):J()}).catch(function(z){j.logger.logError("Error happend while scanning context",z),J()})}},u.prototype.createVideoConstraints=function(h){if(typeof h=="string")return{deviceId:{exact:h}};if(typeof h=="object"){var x="facingMode",E="deviceId",j={user:!0,environment:!0},g="exact",N=function(O){if(O in j)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},k=Object.keys(h);if(k.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(k.length," keys");var A=Object.keys(h)[0];if(A!==x&&A!==E)throw"Only '".concat(x,"' and '").concat(E,"' ")+" are supported for 'cameraIdOrConfig'";if(A===x){var w=h.facingMode;if(typeof w=="string"){if(N(w))return{facingMode:w}}else if(typeof w=="object")if(g in w){if(N(w["".concat(g)]))return{facingMode:{exact:w["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var M=typeof w;throw"Invalid type of 'facingMode' = ".concat(M)}}else{var _=h.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(g in _)return{deviceId:{exact:_["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var J=typeof _;throw"Invalid type of 'deviceId' = ".concat(J)}}}var z=typeof h;throw"Invalid type of 'cameraIdOrConfig' = ".concat(z)},u.prototype.computeCanvasDrawConfig=function(h,x,E,j){if(h<=E&&x<=j){var g=(E-h)/2,N=(j-x)/2;return{x:g,y:N,width:h,height:x}}else{var k=h,A=x;return h>E&&(x=E/h*x,h=E),x>j&&(h=j/x*h,x=j),this.logger.log("Image downsampled from "+"".concat(k,"X").concat(A)+" to ".concat(h,"X").concat(x,".")),this.computeCanvasDrawConfig(h,x,E,j)}},u.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var h=document.getElementById(this.elementId);h&&(h.innerHTML="")},u.prototype.possiblyUpdateShaders=function(h){this.qrMatch!==h&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(x){x.style.backgroundColor=h?Constants.BORDER_SHADER_MATCH_COLOR:Constants.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=h)},u.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},u.prototype.createCanvasElement=function(h,x,E){var j=h,g=x,N=document.createElement("canvas");return N.style.width="".concat(j,"px"),N.style.height="".concat(g,"px"),N.style.display="none",N.id=isNullOrUndefined(E)?"qr-canvas":E,N},u.prototype.getShadedRegionBounds=function(h,x,E){if(E.width>h||E.height>x)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(h-E.width)/2,y:(x-E.height)/2,width:E.width,height:E.height}},u.prototype.possiblyInsertShadingElement=function(h,x,E,j){if(!(x-j.width<1||E-j.height<1)){var g=document.createElement("div");g.style.position="absolute";var N=(x-j.width)/2,k=(E-j.height)/2;if(g.style.borderLeft="".concat(N,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(N,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(k,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(k,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(Constants.SHADED_REGION_ELEMENT_ID),x-j.width<11||E-j.height<11)this.hasBorderShaders=!1;else{var A=5,w=40;this.insertShaderBorders(g,w,A,-A,null,0,!0),this.insertShaderBorders(g,w,A,-A,null,0,!1),this.insertShaderBorders(g,w,A,null,-A,0,!0),this.insertShaderBorders(g,w,A,null,-A,0,!1),this.insertShaderBorders(g,A,w+A,-A,null,-A,!0),this.insertShaderBorders(g,A,w+A,null,-A,-A,!0),this.insertShaderBorders(g,A,w+A,-A,null,-A,!1),this.insertShaderBorders(g,A,w+A,null,-A,-A,!1),this.hasBorderShaders=!0}h.append(g)}},u.prototype.insertShaderBorders=function(h,x,E,j,g,N,k){var A=document.createElement("div");A.style.position="absolute",A.style.backgroundColor=Constants.BORDER_SHADER_DEFAULT_COLOR,A.style.width="".concat(x,"px"),A.style.height="".concat(E,"px"),j!==null&&(A.style.top="".concat(j,"px")),g!==null&&(A.style.bottom="".concat(g,"px")),k?A.style.left="".concat(N,"px"):A.style.right="".concat(N,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(A),h.appendChild(A)},u.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},u.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},u.prototype.getTimeoutFps=function(h){return 1e3/h},u})(),Html5QrcodeScannerStatus;(function(u){u[u.STATUS_DEFAULT=0]="STATUS_DEFAULT",u[u.STATUS_SUCCESS=1]="STATUS_SUCCESS",u[u.STATUS_WARNING=2]="STATUS_WARNING",u[u.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Html5QrcodeScannerStatus||(Html5QrcodeScannerStatus={}));function BarcodeScanner({isOpen:u,onScan:h,onClose:x}){const E=reactExports.useRef(null),j=reactExports.useRef(null),[g,N]=reactExports.useState(!1),[k,A]=reactExports.useState(null),[w,M]=reactExports.useState(!1),[_,J]=reactExports.useState(""),[z,O]=reactExports.useState(null),[q,ae]=reactExports.useState([]),je=reactExports.useRef(h);je.current=h;const ue=reactExports.useRef(z);ue.current=z;const te=reactExports.useRef(q);te.current=q;const Q=reactExports.useRef(!1),xe=reactExports.useCallback(async()=>{try{const ne=await Html5Qrcode.getCameras();ae(ne),te.current=ne;const L=ne.find(W=>W.label.toLowerCase().includes("back")||W.label.toLowerCase().includes("rear")||W.label.toLowerCase().includes("environment"))?.id||ne[0]?.id;return O(L),ue.current=L,ne}catch(ne){return console.error("Error getting cameras:",ne),A("Unable to access camera. Please grant camera permissions."),[]}},[]),ce=reactExports.useCallback(async()=>{if(j.current){try{j.current.getState()===2&&await j.current.stop(),j.current.clear()}catch(ne){console.error("Error stopping scanner:",ne)}j.current=null}N(!1)},[]),F=reactExports.useCallback(async()=>{if(!Q.current){Q.current=!0;try{if(await ce(),await new Promise(me=>setTimeout(me,100)),!document.getElementById("barcode-scanner-region")){console.error("Scanner region element not found"),Q.current=!1;return}A(null),N(!1);const be=te.current.length>0?te.current:await xe();if(be.length===0){A("No cameras found. Please connect a camera or use manual entry."),M(!0),Q.current=!1;return}const L=ue.current||be[0]?.id,W=new Html5Qrcode("barcode-scanner-region");j.current=W,await W.start(L,{fps:10,qrbox:{width:300,height:120},formatsToSupport:[0,1,2,3,4,5,6,7,8,9,10,11]},me=>{navigator.vibrate&&navigator.vibrate(100),ce().then(()=>{je.current(me)})},me=>{}),N(!0)}catch(ne){console.error("Scanner start error:",ne),j.current=null,A(ne.message||"Failed to start camera. Please try manual entry."),M(!0)}finally{Q.current=!1}}},[xe,ce]),U=reactExports.useCallback(()=>{_.trim()&&(ce(),je.current(_.trim()),J(""),M(!1))},[_,ce]),K=reactExports.useCallback(async()=>{if(te.current.length<=1)return;const be=(te.current.findIndex(W=>W.id===ue.current)+1)%te.current.length,L=te.current[be].id;await ce(),O(L),ue.current=L},[ce]);return reactExports.useEffect(()=>{let ne=!1;if(u){const be=setTimeout(()=>{ne||F()},200);return()=>{ne=!0,clearTimeout(be),ce()}}else ce(),M(!1),J(""),A(null);return()=>{ne=!0,ce()}},[u,F,ce]),reactExports.useEffect(()=>{u&&z&&!w&&!Q.current&&te.current.length>0&&j.current===null&&F()},[z,u,w,F]),u?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-900/90",children:[jsxRuntimeExports.jsx("button",{onClick:x,className:"p-2 rounded-full bg-dark-800/80 hover:bg-dark-700",children:jsxRuntimeExports.jsx(X,{className:"w-6 h-6 text-white"})}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Scan Barcode"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:q.length>1&&jsxRuntimeExports.jsx("button",{onClick:K,className:"p-2 rounded-full bg-dark-800/80 hover:bg-dark-700",children:jsxRuntimeExports.jsx(Camera,{className:"w-6 h-6 text-white"})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative flex items-center justify-center bg-black",children:[jsxRuntimeExports.jsx("div",{id:"barcode-scanner-region",ref:E,className:"w-full h-full",style:{minHeight:"300px"}}),g&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:jsxRuntimeExports.jsxs("div",{className:"relative w-72 h-40 border-2 border-accent-primary/50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-l-4 border-t-4 border-accent-primary rounded-tl-lg"}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-r-4 border-t-4 border-accent-primary rounded-tr-lg"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-l-4 border-b-4 border-accent-primary rounded-bl-lg"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-r-4 border-b-4 border-accent-primary rounded-br-lg"})]})})]}),jsxRuntimeExports.jsx("div",{className:"p-6 bg-dark-900",children:w?jsxRuntimeExports.jsxs("div",{className:"text-center",children:[k&&jsxRuntimeExports.jsx("p",{className:"text-amber-400 text-sm mb-3",children:k}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mb-3",children:jsxRuntimeExports.jsx("input",{type:"text",value:_,onChange:ne=>J(ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&U(),placeholder:"Enter barcode number",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 text-center text-lg tracking-wider",autoFocus:!0,inputMode:"numeric",pattern:"[0-9]*"})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{M(!1),J(""),A(null),F()},className:"flex-1 px-4 py-3 bg-dark-700 text-white rounded-lg font-medium",children:"Back to Camera"}),jsxRuntimeExports.jsx("button",{onClick:U,disabled:!_.trim(),className:"flex-1 px-4 py-3 bg-accent-primary text-white rounded-lg font-medium disabled:opacity-50",children:"Search"})]})]}):k?jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-red-400 mb-4",children:k}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{A(null),F()},className:"px-6 py-3 bg-accent-primary text-white rounded-lg font-medium",children:"Try Again"}),jsxRuntimeExports.jsxs("button",{onClick:()=>M(!0),className:"px-6 py-3 bg-dark-700 text-white rounded-lg font-medium flex items-center gap-2",children:[jsxRuntimeExports.jsx(Keyboard,{className:"w-4 h-4"}),"Enter Manually"]})]})]}):jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-white text-lg mb-2",children:g?"Position barcode within frame":"Starting camera..."}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Works with UPC, EAN, QR codes, and most product barcodes"}),jsxRuntimeExports.jsxs("button",{onClick:()=>M(!0),className:"text-accent-primary text-sm flex items-center gap-1 mx-auto",children:[jsxRuntimeExports.jsx(Keyboard,{className:"w-4 h-4"}),"Enter barcode manually"]})]})})]}):null}const calculateBMR=(u,h,x,E)=>{const j=10*u+6.25*h-5*x;return E==="male"?j+5:j-161};function calculateAthleteLevel(u){const{trainingHistory:h,yearsTraining:x,currentTrainingDays:E}=u;let j=0;h==="consistent"?j+=40:h==="some"?j+=20:j+=5;const g=parseFloat(x)||0;j+=Math.min(g*3.5,35);const N=parseInt(E)||0;return j+=Math.min(N*4,25),j>=86?{level:"elite",score:j,multiplier:1.4}:j>=61?{level:"advanced",score:j,multiplier:1.2}:j>=31?{level:"intermediate",score:j,multiplier:1}:{level:"beginner",score:j,multiplier:.8}}function calculateProgramLength(u){const{raceDate:h,aestheticGoalDate:x,targetDate:E,strengthGoalDate:j,programType:g,programSubtype:N}=u;let k=null;if(h?k=new Date(h):x?k=new Date(x):j?k=new Date(j):E&&(k=new Date(E)),k){const _=Math.ceil((k-new Date)/(1e3*60*60*24*7));return _>52?{totalWeeks:52,weeksUntilGoal:_}:_<4?{totalWeeks:4,weeksUntilGoal:_}:{totalWeeks:_,weeksUntilGoal:_}}return{totalWeeks:{endurance:{marathon:16,triathlon:20,running:12,cycling:12,swimming:12},strength:{powerlifting:12,olympic:16,strongman:12},aesthetic:{hypertrophy:12,"lean-muscle":16,recomp:16},fatloss:{aggressive:8,moderate:12,slow:16}}[g]?.[N]||12,weeksUntilGoal:null}}function generatePeriodizationPhases(u,h,x){const E=[],g=h==="endurance"&&["running","marathon","triathlon","cycling"].includes(x)?Math.min(3,Math.floor(u*.1)+1):0,N=u-g,k=5;let A=0;for(;A<N;){const w=Math.floor(A/k);if(A%k===4)E.push("Deload");else{const _=Math.ceil(N/k);w===0?E.push("Base"):w>=_-1&&A>=N-4?E.push("Peak"):E.push("Build")}A++}for(let w=0;w<g;w++)E.push("Taper");return E}const RACE_EQUIVALENCY={"5k":{factor:1,miles:3.1},"10k":{factor:2.09,miles:6.2},half:{factor:4.65,miles:13.1},full:{factor:9.8,miles:26.2},ultra:{factor:22,miles:50}};function parseTimeToMinutes(u){if(!u)return 0;const h=u.split(":").map(Number);return h.length===3?h[0]*60+h[1]+h[2]/60:h.length===2?h[0]+h[1]/60:0}function calculateEquivalentPace(u,h,x){const E=RACE_EQUIVALENCY[h]?.miles||6.2,j=RACE_EQUIVALENCY[x]?.miles||26.2,g=parseTimeToMinutes(u);return g<=0?null:g*Math.pow(j/E,1.06)/j}function calculatePaces(u,h,x=null,E=null){const g={"5k":3.1,"10k":6.2,half:13.1,full:26.2,ultra:50}[h]||26.2;let N=null,k=null;x&&E&&(k=calculateEquivalentPace(x,E,h));const A=parseTimeToMinutes(u);A>0&&(N=A/g);const w=k||N;return w?{goalPace:formatPace(N||w),currentPace:k?formatPace(k):null,easyPace:formatPace(w+1.5)+" - "+formatPace(w+2),tempoPace:formatPace(w+.25)+" - "+formatPace(w+.5),intervalPace:formatPace(w-.5)+" - "+formatPace(w-.25),longRunPace:formatPace(w+1)+" - "+formatPace(w+1.5),recoveryPace:formatPace(w+2)+" - "+formatPace(w+2.5)}:{goalPace:"8:00/mi",currentPace:null,easyPace:"9:30-10:00/mi",tempoPace:"7:00-7:30/mi",intervalPace:"6:30-7:00/mi",longRunPace:"8:30-9:00/mi",recoveryPace:"10:00-10:30/mi"}}function formatPace(u){const h=Math.floor(u),x=Math.round((u-h)*60);return`${h}:${x.toString().padStart(2,"0")}/mi`}function calculateTargetPeakMileage(u,h,x){const{level:E}=x,j={"5k":{min:25,max:40},"10k":{min:30,max:50},half:{min:35,max:55},full:{min:40,max:70},ultra:{min:50,max:80}},g=j[u]||j.full;let N=(g.min+g.max)/2;if(h){const k=parseFloat(h)||9;k<7?N=g.max:k<8?N=g.max*.9:k<9?N=(g.min+g.max)/2:N=g.min*1.1}return E==="elite"?N*=1.1:E==="advanced"?N*=1:E==="intermediate"?N*=.9:N*=.8,Math.round(N)}function calculateWeeklyMileage(u,h,x,E,j=null,g=null,N=null){let A=j;(!A||A<=0)&&(A=Math.round(h*.5)),A=Math.min(A,Math.round(h*.8));const M={"5k":10,"10k":15,half:20,full:25,ultra:30}[g]||15;if(A=Math.max(A,M),E==="Taper"){const z=x===u?.4:x===u-1?.5:.75;return Math.round(h*z)}if(E==="Deload"){const z=Math.min(A*Math.pow(1.1,x-1),h);return Math.round(z*.65)}const _=x;let J=A*Math.pow(1+.1,_-1);return J=Math.min(J,h),Math.round(J)}function calculateLongRunCap(u,h,x){const E=parseFloat(u)||10,{level:j}=x;return Math.min(E,j==="elite"?22:j==="advanced"?20:18)}const SPLIT_TEMPLATES={2:{strength:[{name:"Full Body A",focus:["legs","chest","back"]},{name:"Full Body B",focus:["legs","shoulders","back"]}],aesthetic:[{name:"Upper Body",focus:["chest","back","shoulders","arms"]},{name:"Lower Body",focus:["legs","glutes","core"]}]},3:{strength:[{name:"Squat Day",focus:["legs","core"]},{name:"Bench Day",focus:["chest","shoulders","triceps"]},{name:"Deadlift Day",focus:["posterior","back","biceps"]}],aesthetic:[{name:"Push",focus:["chest","shoulders","triceps"]},{name:"Pull",focus:["back","biceps","rear-delts"]},{name:"Legs",focus:["legs","glutes","core"]}]},4:{strength:[{name:"Heavy Squat",focus:["legs","core"]},{name:"Heavy Bench",focus:["chest","shoulders","triceps"]},{name:"Heavy Deadlift",focus:["posterior","back"]},{name:"Volume Upper",focus:["shoulders","chest","arms"]}],aesthetic:[{name:"Upper Push",focus:["chest","shoulders","triceps"]},{name:"Lower",focus:["legs","glutes"]},{name:"Upper Pull",focus:["back","biceps","rear-delts"]},{name:"Arms + Shoulders",focus:["shoulders","biceps","triceps"]}]},5:{strength:[{name:"Competition Squat",focus:["legs"]},{name:"Competition Bench",focus:["chest","triceps"]},{name:"Competition Deadlift",focus:["posterior","back"]},{name:"Volume Squat",focus:["legs","core"]},{name:"Volume Bench",focus:["shoulders","chest","arms"]}],aesthetic:[{name:"Chest + Triceps",focus:["chest","triceps"]},{name:"Back + Biceps",focus:["back","biceps"]},{name:"Shoulders + Rear Delts",focus:["shoulders","rear-delts"]},{name:"Legs",focus:["legs","glutes"]},{name:"Arms + Weak Points",focus:["biceps","triceps","core"]}]},6:{strength:[{name:"Heavy Squat",focus:["legs"]},{name:"Heavy Bench",focus:["chest","triceps"]},{name:"Heavy Deadlift",focus:["posterior","back"]},{name:"Speed Squat",focus:["legs","core"]},{name:"Speed Bench",focus:["chest","shoulders"]},{name:"Back + Arms",focus:["back","biceps","triceps"]}],aesthetic:[{name:"Push A (Heavy)",focus:["chest","shoulders","triceps"]},{name:"Pull A (Heavy)",focus:["back","biceps"]},{name:"Legs A (Quad Focus)",focus:["legs","glutes"]},{name:"Push B (Volume)",focus:["chest","shoulders","triceps"]},{name:"Pull B (Volume)",focus:["back","rear-delts","biceps"]},{name:"Legs B (Posterior)",focus:["legs","core"]}]}},ENDURANCE_TEMPLATES={running:{2:["Easy Run","Long Run"],3:["Easy Run","Tempo Run","Long Run"],4:["Easy Run","Tempo Run","Intervals","Long Run"],5:["Easy Run","Tempo Run","Recovery Run","Intervals","Long Run"],6:["Easy Run","Tempo Run","Easy Run","Intervals","Recovery Run","Long Run"]},triathlon:{5:["Swim + Strength","Bike Intervals + Strength","Run + Strength","Swim + Run","Long Brick"],6:["Swim + Strength","Bike Intervals","Run + Strength","Swim + Easy Ride","Run Tempo + Strength","Long Brick"],7:["Swim + Strength","Bike Intervals","Run + Strength","Swim AM / Run PM","Bike + Strength","Run Tempo","Long Brick"]}};function generateTriathlonStrengthExercises(u,h,x,E,j="full"){const g=[],{multiplier:N,level:k}=x,A=h?.6:1,w=[{name:"Single-Leg Romanian Deadlift",sets:Math.round(3*A),reps:"8-10 each leg",rpe:6,rest:"60s",notes:"Focus on hip stability, not weight. Light dumbbells only.",progression:"Master balance before adding weight. This is injury prevention."},{name:"Bulgarian Split Squat",sets:Math.round(3*A),reps:"10-12 each leg",rpe:6,rest:"60s",notes:"Control descent, drive through front heel. Build single-leg strength.",progression:"Add 5lbs every 2-3 weeks when form is solid."},{name:"Lateral Band Walks",sets:3,reps:"15 each direction",rpe:5,rest:"30s",notes:"Keep tension on band throughout. Glute med activation.",progression:"Use heavier band as it becomes easy."},{name:"Clamshells",sets:3,reps:"15-20 each side",rpe:5,rest:"30s",notes:"External hip rotation. Critical for knee health in running.",progression:"Add resistance band when bodyweight is easy."}],M=[{name:"Dead Bug",sets:3,reps:"10 each side",rpe:5,rest:"45s",notes:"Keep lower back pressed to floor. Anti-extension strength.",progression:"Slow the movement, add holds at end range."},{name:"Pallof Press",sets:3,reps:"10 each side",rpe:6,rest:"45s",notes:"Anti-rotation core work. Essential for swim and run.",progression:"Increase cable weight or add iso holds."},{name:"Side Plank",sets:2,reps:"30-45s each side",rpe:6,rest:"30s",notes:"Hip elevated, straight line from head to feet.",progression:"Add hip dips or raise top leg."},{name:"Bird Dog",sets:3,reps:"8 each side with 3s hold",rpe:5,rest:"45s",notes:"Opposite arm/leg extension with neutral spine.",progression:"Add resistance band around foot."}],_=[{name:"Band Pull-Aparts",sets:3,reps:"15-20",rpe:5,rest:"30s",notes:"Squeeze shoulder blades together. Rotator cuff health.",progression:"Essential for swim shoulder health - never skip."},{name:"External Rotation (Cable/Band)",sets:2,reps:"15 each arm",rpe:5,rest:"30s",notes:"Elbow pinned to side, rotate out. Swim-specific prehab.",progression:"Keep light - this is prehab, not strength training."},{name:"Face Pulls",sets:3,reps:"15",rpe:5,rest:"30s",notes:"Pull to face, external rotate at end. Rear delt & rotator cuff.",progression:"Keep light - focus on squeeze at end range."}];switch(j){case"hip":g.push(...w),g.push(M[0]);break;case"core":g.push(...M),g.push(w[2]);break;case"prehab":g.push(..._),g.push(M[0]),g.push(w[2]);break;default:g.push(...w),g.push(...M.slice(0,3)),g.push(..._.slice(0,2)),(k==="advanced"||k==="elite")&&g.push(M[3]);break}return g}function generateTriathlonSession(u,h,x,E,j,g,N){const{level:k}=E;switch(h==="Taper"||h==="Peak"||h.includes("Build"),u){case"Swim + Run":return{name:"Swim / Run Double",duration:90,exercises:[{name:"Swim - Technique Focus",sets:1,reps:x?"1500m":"2000-2500m",pace:"CSS pace (threshold)",heartRateZone:"Zone 2-3",rpe:6,rest:"N/A",notes:"Focus on catch and pull technique. Include drill work.",progression:`Week ${g}: Build swim volume gradually.`},{name:"Run - Easy/Moderate",sets:1,reps:x?"30 min":"45-60 min",pace:j?.easyPace||"9:00-9:30/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy effort. Recovery between sessions.",progression:"Separate by 4-6 hours if possible."}]};case"Swim AM / Run PM":return{name:"AM Swim / PM Run",duration:105,exercises:[{name:"Morning Swim",sets:1,reps:k==="elite"?"3000-3500m":"2000-2500m",pace:"Mixed: warm up + main set + cool down",heartRateZone:"Zone 2-4",rpe:7,rest:"N/A",notes:"Main set at CSS pace. Include 4x100 at race pace.",progression:`Week ${g}: Focus on stroke efficiency.`},{name:"Evening Run",sets:1,reps:x?"40 min":"50-60 min",pace:j?.easyPace||"9:00/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy effort, focus on cadence and form.",progression:"Build run fitness off swim fatigue."}]};case"Bike Intervals":case"Bike":return{name:"Bike Intervals",duration:x?60:75,exercises:[{name:"Bike Interval Session",sets:x?3:k==="elite"?6:5,reps:"5 min @ FTP",pace:"FTP (Functional Threshold Power)",heartRateZone:"Zone 4",rpe:8,rest:"2 min easy spin",notes:"Maintain steady power throughout interval. Cadence 85-95.",progression:`Week ${g}: Add 1 interval every 2 weeks.`}]};case"Swim + Strength":return{name:"Swim + Injury Prevention",duration:75,exercises:[{name:"Technique Swim",sets:1,reps:"1500-2000m",pace:"Easy-moderate",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Drill-focused: catch-up drill, fingertip drag, 6-kick switch.",progression:"Quality over quantity on strength days."}],strengthSession:generateTriathlonStrengthExercises(h,x,E)};case"Run Tempo":return{name:"Tempo Run",duration:60,exercises:[{name:"Warm-up",sets:1,reps:"1.5 miles",pace:j?.easyPace||"9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include strides at end of warm-up."},{name:"Tempo",sets:1,reps:x?"15 min":k==="elite"?"30 min":"20-25 min",pace:j?.tempoPace||"7:30/mi",heartRateZone:"Zone 3-4",rpe:7,rest:"N/A",notes:"Comfortably hard. Should be able to speak in short sentences.",progression:`Week ${g}: Extend tempo duration by 2-3 min/week.`},{name:"Cool-down",sets:1,reps:"1 mile",pace:j?.recoveryPace||"10:00/mi",heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog + stretching."}]};case"Long Bike/Run Brick":case"Long Brick":case"Long Ride + Run Brick":const A=k==="elite"?3:k==="advanced"?2.5:2,w=k==="elite"?6:k==="advanced"?5:4;return{name:"Long Brick Session",duration:A*60+45,exercises:[{name:"Long Ride",sets:1,reps:`${x?A-.5:A} hours`,pace:"Aerobic (Zone 2)",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Practice race nutrition: 60-90g carbs/hour. Last 20 min at race pace.",progression:`Week ${g}: Key session. Build bike endurance.`},{name:"Brick Run (off bike)",sets:1,reps:`${x?w-1:w} miles`,pace:"Start easy, settle into race pace",heartRateZone:"Zone 2-3",rpe:6,rest:"N/A",notes:"T2 practice. Quick transition, find your legs.",progression:"Critical for race-day leg turnover."}]};case"Swim + Easy Ride":return{name:"Swim + Easy Ride",duration:90,exercises:[{name:"Swim - Aerobic",sets:1,reps:"2000-2500m",pace:"Easy-moderate",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Continuous swim, focus on bilateral breathing."},{name:"Easy Spin",sets:1,reps:"45-60 min",pace:"Recovery",heartRateZone:"Zone 1-2",rpe:4,rest:"N/A",notes:"Active recovery. High cadence, low power."}]};case"Easy Run":return{name:"Easy Run",duration:45,exercises:[{name:"Easy Run",sets:1,reps:x?"30 min":"45 min",pace:j?.easyPace||"9:00-9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Truly easy. Recovery run.",progression:"Keep easy days easy."}]};case"Bike Intervals + Strength":return{name:"Bike Intervals + Strength",duration:90,exercises:[{name:"Bike Interval Session",sets:x?3:k==="elite"?6:5,reps:"5 min @ FTP",pace:"FTP (Functional Threshold Power)",heartRateZone:"Zone 4",rpe:8,rest:"2 min easy spin",notes:"Quality intervals. Maintain power throughout.",progression:`Week ${g}: Key bike session.`}],strengthSession:generateTriathlonStrengthExercises(h,x,E,g,"core")};case"Run + Strength":return{name:"Run + Strength",duration:85,exercises:[{name:"Easy-Moderate Run",sets:1,reps:x?"35 min":"45-50 min",pace:j?.easyPace||"9:00/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Comfortable effort. Focus on form and cadence.",progression:`Week ${g}: Build aerobic base.`}],strengthSession:generateTriathlonStrengthExercises(h,x,E,g,"hip")};case"Bike + Strength":return{name:"Bike + Strength",duration:80,exercises:[{name:"Easy Aerobic Ride",sets:1,reps:x?"45 min":"60 min",pace:"Aerobic (Zone 2)",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy spinning. Active recovery ride with strength after.",progression:"Keep intensity low to allow for PM strength."}],strengthSession:generateTriathlonStrengthExercises(h,x,E,g,"full")};case"Run Tempo + Strength":return{name:"Run Tempo + Strength",duration:95,exercises:[{name:"Warm-up",sets:1,reps:"1 mile",pace:j?.easyPace||"9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Easy jog with strides."},{name:"Tempo",sets:1,reps:x?"12 min":k==="elite"?"25 min":"18-20 min",pace:j?.tempoPace||"7:30/mi",heartRateZone:"Zone 3-4",rpe:7,rest:"N/A",notes:"Comfortably hard. Shorter than standalone tempo to allow for strength.",progression:`Week ${g}: Quality over quantity.`},{name:"Cool-down",sets:1,reps:"0.5 miles",pace:j?.recoveryPace||"10:00/mi",heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog."}],strengthSession:generateTriathlonStrengthExercises(h,x,E,g,"prehab")};default:return{name:u,duration:60,exercises:[{name:u,sets:1,reps:"60 min",rpe:6,rest:"N/A",notes:"Moderate effort."}]}}}function getDayName(u){return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][u]}function distributeWorkoutDays(u){const h={2:[0,3],3:[0,2,4],4:[0,1,3,4],5:[0,1,2,4,5],6:[0,1,2,3,4,5],7:[0,1,2,3,4,5,6]};return h[u]||h[4]}const STRENGTH_EXERCISE_DB={squat:{main:{name:"Back Squat",percentages:{Base:{min:70,max:80,reps:"5-8",sets:4},Build:{min:80,max:87.5,reps:"3-5",sets:5},Peak:{min:87.5,max:95,reps:"1-3",sets:5},Deload:{min:50,max:60,reps:"5-8",sets:3}},rest:"3-4 min",notes:"Break at hips, knees track over toes, drive through heels"},variations:[{name:"Pause Squat",percent:.8,reps:"3-5",sets:3,notes:"2-3 sec pause in hole"},{name:"Front Squat",percent:.75,reps:"4-6",sets:3,notes:"Upright torso, elbows high"},{name:"Box Squat",percent:.85,reps:"3-5",sets:3,notes:"Pause on box, explode up"}],accessories:[{name:"Leg Press",reps:"8-12",sets:3,notes:"Control descent, full ROM",isBodyweight:!1},{name:"Walking Lunges",reps:"10-12 each",sets:3,notes:"Long stride, upright torso",isBodyweight:!0},{name:"Leg Extensions",reps:"12-15",sets:3,notes:"Squeeze at top, slow negative",isBodyweight:!1},{name:"Leg Curls",reps:"10-12",sets:3,notes:"Squeeze hamstrings at top",isBodyweight:!1},{name:"Bulgarian Split Squat",reps:"8-10 each",sets:3,notes:"Vertical shin on front leg",isBodyweight:!0},{name:"Goblet Squat",reps:"10-12",sets:3,notes:"Elbows inside knees at bottom",isBodyweight:!1}]},bench:{main:{name:"Bench Press",percentages:{Base:{min:70,max:80,reps:"5-8",sets:4},Build:{min:80,max:87.5,reps:"3-5",sets:5},Peak:{min:87.5,max:95,reps:"1-3",sets:5},Deload:{min:50,max:60,reps:"5-8",sets:3}},rest:"3-4 min",notes:"Retract scapula, arch back, leg drive, control descent"},variations:[{name:"Close-Grip Bench",percent:.85,reps:"4-6",sets:3,notes:"Elbows tucked, tricep focus"},{name:"Paused Bench Press",percent:.8,reps:"3-5",sets:3,notes:"2 sec pause on chest"},{name:"Incline Bench Press",percent:.75,reps:"6-8",sets:3,notes:"30-45 degree incline"},{name:"Floor Press",percent:.85,reps:"4-6",sets:3,notes:"Pause at floor, lockout strength"}],accessories:[{name:"Dumbbell Bench Press",reps:"8-12",sets:3,notes:"Full ROM, squeeze at top",isBodyweight:!1},{name:"Dumbbell Fly",reps:"10-12",sets:3,notes:"Slight bend in elbows, stretch at bottom",isBodyweight:!1},{name:"Tricep Pushdowns",reps:"12-15",sets:3,notes:"Lock elbows, squeeze triceps",isBodyweight:!1},{name:"Skull Crushers",reps:"10-12",sets:3,notes:"Keep elbows pointed up",isBodyweight:!1},{name:"Dips",reps:"8-12",sets:3,notes:"Lean forward for chest, upright for triceps",isBodyweight:!0},{name:"Overhead Tricep Extension",reps:"10-12",sets:3,notes:"Full stretch at bottom",isBodyweight:!1}]},deadlift:{main:{name:"Deadlift",percentages:{Base:{min:70,max:80,reps:"4-6",sets:3},Build:{min:80,max:87.5,reps:"2-4",sets:4},Peak:{min:87.5,max:95,reps:"1-3",sets:4},Deload:{min:50,max:60,reps:"4-6",sets:2}},rest:"4-5 min",notes:"Brace core, chest up, hinge at hips, bar close to body"},variations:[{name:"Deficit Deadlift",percent:.8,reps:"3-5",sets:3,notes:"2-3 inch deficit, speed off floor"},{name:"Romanian Deadlift",percent:.65,reps:"8-10",sets:3,notes:"Hamstring stretch, slight knee bend"},{name:"Paused Deadlift",percent:.75,reps:"2-4",sets:3,notes:"2 sec pause at knee height"},{name:"Block Pull",percent:.9,reps:"2-4",sets:3,notes:"Lockout strength, above knee"}],accessories:[{name:"Barbell Row",reps:"6-10",sets:4,notes:"Pull to lower chest, squeeze lats",isBodyweight:!1},{name:"Good Mornings",reps:"8-10",sets:3,notes:"Hip hinge, hamstring stretch",isBodyweight:!1},{name:"Back Extensions",reps:"12-15",sets:3,notes:"Squeeze glutes at top",isBodyweight:!0},{name:"Pull-ups",reps:"6-10",sets:4,notes:"Full ROM, dead hang to chin over bar",isBodyweight:!0},{name:"Face Pulls",reps:"15-20",sets:3,notes:"External rotation, rear delt focus",isBodyweight:!1},{name:"Lat Pulldown",reps:"10-12",sets:3,notes:"Drive elbows down, squeeze lats",isBodyweight:!1}]},ohp:{main:{name:"Overhead Press",percentages:{Base:{min:70,max:80,reps:"5-8",sets:4},Build:{min:80,max:87.5,reps:"3-5",sets:4},Peak:{min:85,max:92.5,reps:"2-4",sets:4},Deload:{min:50,max:60,reps:"6-8",sets:3}},rest:"2-3 min",notes:"Squeeze glutes, brace core, press straight up, head through at top"},variations:[{name:"Push Press",percent:1.1,reps:"3-5",sets:3,notes:"Small dip, explosive drive"},{name:"Z Press",percent:.7,reps:"6-8",sets:3,notes:"Seated on floor, no leg drive"},{name:"Seated Dumbbell Press",percent:.8,reps:"8-10",sets:3,notes:"Neutral grip option"}],accessories:[{name:"Lateral Raises",reps:"12-15",sets:3,notes:"Lead with elbows, control descent",isBodyweight:!1},{name:"Rear Delt Fly",reps:"12-15",sets:3,notes:"Squeeze shoulder blades together",isBodyweight:!1},{name:"Upright Rows",reps:"10-12",sets:3,notes:"Elbows above wrists at top",isBodyweight:!1},{name:"Front Raises",reps:"10-12",sets:3,notes:"Thumbs up, raise to eye level",isBodyweight:!1},{name:"Arnold Press",reps:"8-12",sets:3,notes:"Rotate palms during press",isBodyweight:!1}]}};function getDoubleProgression(u,h,x){if(x==="Deload")return u;const[E,j]=u.split("-").map(Number),g=Math.min(h-1,2);return`${E+g}-${j+g}`}function calculateWorkingWeight(u,h,x,E){if(!u)return null;const j=E.percentages[h]||E.percentages.Base,{min:g,max:N}=j;let k;return k=g,Math.round(u*k/100/5)*5}function generateStrengthExercises(u,h,x,E,j,g=[]){const N=[],k=E?.level||"intermediate",A=E?.multiplier||1,w=(j-1)%4+1,M=x?"Deload":h,_=x?.6:(h==="Build"?1.1:1)*A,J=z=>{const O=g.find(q=>q.id===z);return O?{current1RM:parseFloat(O.current1RM)||parseFloat(O.workingWeight)||null,target1RM:parseFloat(O.target1RM)||null}:null};if(u.includes("legs")||u.includes("Squat")){const z=J("squat"),O=STRENGTH_EXERCISE_DB.squat,q=O.main.percentages[M],ae=calculateWorkingWeight(z?.current1RM,M,w,O.main),je=ae&&z?.current1RM?Math.round(ae/z.current1RM*100):null;if(N.push({name:O.main.name,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),rpe:x?6:k==="elite"?8.5:8,rest:O.main.rest,notes:O.main.notes,startingWeight:ae?`${ae} lbs (${je}% of 1RM)`:"Start light, find working weight",current1RM:z?.current1RM?`${z.current1RM} lbs`:null,target1RM:z?.target1RM?`${z.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${q.reps.split("-")[1]} reps on all sets  add 5 lbs next session`}),!x){const Q=O.variations[h==="Peak"?2:0],xe=ae?Math.round(ae*Q.percent/5)*5:null;N.push({name:Q.name,sets:Math.round(Q.sets*_),reps:Q.reps,rpe:7,rest:"3 min",notes:Q.notes,startingWeight:xe?`${xe} lbs (~${Math.round(Q.percent*100)}% of working weight)`:null,isVariation:!0,progression:"Follow main lift progression"})}const ue=x?1:k==="beginner"?2:k==="intermediate"?3:4;O.accessories.slice(0,ue).forEach(Q=>{N.push({name:Q.name,sets:Math.round(Q.sets*_),reps:getDoubleProgression(Q.reps,w,M),rpe:7,rest:"90s",notes:Q.notes,isAccessory:!0,progression:`Double progression: ${Q.reps.split("-")[0]}${Q.reps.split("-")[1]} reps, then add weight`})})}if(u.includes("chest")||u.includes("Bench")){const z=J("bench"),O=STRENGTH_EXERCISE_DB.bench,q=O.main.percentages[M],ae=calculateWorkingWeight(z?.current1RM,M,w,O.main),je=ae&&z?.current1RM?Math.round(ae/z.current1RM*100):null;if(N.push({name:O.main.name,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),rpe:x?6:k==="elite"?8.5:8,rest:O.main.rest,notes:O.main.notes,startingWeight:ae?`${ae} lbs (${je}% of 1RM)`:"Start light, find working weight",current1RM:z?.current1RM?`${z.current1RM} lbs`:null,target1RM:z?.target1RM?`${z.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${q.reps.split("-")[1]} reps on all sets  add 2.5 lbs next session`}),!x){const Q=h==="Peak"?O.variations[3]:O.variations[0],xe=ae?Math.round(ae*Q.percent/5)*5:null;N.push({name:Q.name,sets:Math.round(Q.sets*_),reps:Q.reps,rpe:7,rest:"2-3 min",notes:Q.notes,startingWeight:xe?`${xe} lbs`:null,isVariation:!0,progression:"Follow main lift progression"})}const ue=x?1:k==="beginner"?2:k==="intermediate"?3:4;O.accessories.slice(0,ue).forEach(Q=>{N.push({name:Q.name,sets:Math.round(Q.sets*_),reps:getDoubleProgression(Q.reps,w,M),rpe:7,rest:"90s",notes:Q.notes,isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(u.includes("posterior")||u.includes("Deadlift")){const z=J("deadlift"),O=STRENGTH_EXERCISE_DB.deadlift,q=O.main.percentages[M],ae=calculateWorkingWeight(z?.current1RM,M,w,O.main),je=ae&&z?.current1RM?Math.round(ae/z.current1RM*100):null;if(N.push({name:O.main.name,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),rpe:x?6:k==="elite"?8.5:8,rest:O.main.rest,notes:O.main.notes,startingWeight:ae?`${ae} lbs (${je}% of 1RM)`:"Start light, find working weight",current1RM:z?.current1RM?`${z.current1RM} lbs`:null,target1RM:z?.target1RM?`${z.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${q.reps.split("-")[1]} reps on all sets  add 5-10 lbs next session`}),!x){const Q=h==="Peak"?O.variations[3]:O.variations[0],xe=ae?Math.round(ae*Q.percent/5)*5:null;N.push({name:Q.name,sets:Math.round(Q.sets*_),reps:Q.reps,rpe:7,rest:"3-4 min",notes:Q.notes,startingWeight:xe?`${xe} lbs`:null,isVariation:!0,progression:"Follow main lift progression"})}const ue=x?1:k==="beginner"?2:k==="intermediate"?3:4;O.accessories.slice(0,ue).forEach(Q=>{N.push({name:Q.name,sets:Math.round(Q.sets*_),reps:getDoubleProgression(Q.reps,w,M),rpe:7,rest:"90s-2 min",notes:Q.notes,isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(u.includes("shoulders")||u.includes("OHP")){const z=J("ohp"),O=STRENGTH_EXERCISE_DB.ohp,q=O.main.percentages[M],ae=calculateWorkingWeight(z?.current1RM,M,w,O.main),je=ae&&z?.current1RM?Math.round(ae/z.current1RM*100):null;if(N.push({name:O.main.name,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),rpe:x?6:k==="elite"?8.5:8,rest:O.main.rest,notes:O.main.notes,startingWeight:ae?`${ae} lbs (${je}% of 1RM)`:"Start light, find working weight",current1RM:z?.current1RM?`${z.current1RM} lbs`:null,target1RM:z?.target1RM?`${z.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${q.reps.split("-")[1]} reps  add 2.5 lbs`}),!x){const te=O.variations[0];N.push({name:te.name,sets:Math.round(te.sets*_),reps:te.reps,rpe:7,rest:"2 min",notes:te.notes,isVariation:!0})}const ue=x?1:k==="beginner"?2:3;O.accessories.slice(0,ue).forEach(te=>{N.push({name:te.name,sets:Math.round(te.sets*_),reps:getDoubleProgression(te.reps,w,M),rpe:7,rest:"60-90s",notes:te.notes,isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(u.includes("back")&&!u.includes("posterior")&&!u.includes("Deadlift")){const z=[{name:"Barbell Row",sets:4,reps:"6-10",rpe:8,rest:"2-3 min",notes:"Pull to lower chest, squeeze lats"},{name:"Weighted Pull-ups",sets:4,reps:"6-10",rpe:8,rest:"2-3 min",notes:"Dead hang to chin over bar"},{name:"Lat Pulldown",sets:3,reps:"10-12",rpe:7,rest:"90s",notes:"Drive elbows down"},{name:"Seated Cable Row",sets:3,reps:"10-12",rpe:7,rest:"90s",notes:"Squeeze at contraction"}],O=x?2:k==="beginner"?3:4;z.slice(0,O).forEach(q=>{N.push({...q,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(u.includes("triceps")||u.includes("arms")){const z=[{name:"Close-Grip Bench Press",sets:3,reps:"6-8",rpe:7,rest:"2 min",notes:"Elbows tucked"},{name:"Tricep Pushdowns",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Lock elbows in place"},{name:"Skull Crushers",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Lower to forehead"}],O=x?1:k==="beginner"?2:3;z.slice(0,O).forEach(q=>{N.push({...q,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),isAccessory:!0,progression:"Double progression: 1012 reps, then +5 lbs"})})}if(u.includes("biceps")||u.includes("arms")){const z=[{name:"Barbell Curls",sets:3,reps:"8-12",rpe:7,rest:"60s",notes:"No swinging"},{name:"Incline Dumbbell Curls",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Full stretch at bottom"},{name:"Hammer Curls",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Neutral grip"}],O=x?1:k==="beginner"?2:3;z.slice(0,O).forEach(q=>{N.push({...q,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),isAccessory:!0,progression:"Double progression: 812 reps, then +5 lbs"})})}if(u.includes("core")){const z=[{name:"Hanging Leg Raises",sets:3,reps:"10-15",rpe:7,rest:"60s",notes:"Control the movement"},{name:"Ab Wheel Rollouts",sets:3,reps:"8-12",rpe:7,rest:"60s",notes:"Full extension"},{name:"Plank",sets:3,reps:"45-60 sec",rpe:6,rest:"45s",notes:"Squeeze glutes, brace core"}],O=x?1:2;z.slice(0,O).forEach(q=>{N.push({...q,sets:Math.round(q.sets*_),isAccessory:!0,progression:"Add reps or hold time, then add weight"})})}return N}function generateAestheticExercises(u,h,x,E,j){const g=[],N=E?.level||"intermediate",k=E?.multiplier||1,w=(x?.5:h==="Build"?1.15:1)*k,M=x?5:N==="elite"?9:N==="advanced"?8.5:8,_=(j-1)%4+1,J=_-1;return u.includes("chest")&&(g.push({name:"Bench Press",sets:Math.round(4*w),reps:`${8+J}-${10+J}`,rpe:M,rest:"2-3 min",notes:"Focus on chest contraction",progression:`Week ${_}/4: Base reps. Add 5lbs at week 4 if all reps hit`}),g.push({name:"Incline Dumbbell Press",sets:Math.round(4*w),reps:`${8+J}-${12+J}`,rpe:M-1,rest:"90s",notes:"30-45 degree incline, control the negative",progression:"Progressive overload: reps  weight  reps"}),g.push({name:"Cable Chest Fly",sets:Math.round(3*w),reps:"12-15",rpe:7,rest:"60s",notes:"Squeeze hard at contraction",progression:"Isolation: focus on mind-muscle connection over weight"}),(N==="advanced"||N==="elite")&&g.push({name:"Weighted Dips",sets:Math.round(3*w),reps:"8-12",rpe:8,rest:"2 min",notes:"Lean forward for chest emphasis",progression:"Add 5lbs when hitting 12 reps"})),u.includes("back")&&(g.push({name:"Weighted Pull-ups",sets:Math.round(4*w),reps:`${6+Math.floor(J/2)}-${10+Math.floor(J/2)}`,rpe:M,rest:"2-3 min",notes:"Full stretch at bottom, chin over bar",progression:"Add 2.5lbs when hitting top of rep range consistently"}),g.push({name:"Barbell Row",sets:Math.round(4*w),reps:`${6+J}-${10+J}`,rpe:M-1,rest:"2 min",notes:"Squeeze lats at top",progression:"Add 5lbs when form stays solid at top reps"}),g.push({name:"Lat Pulldown",sets:Math.round(3*w),reps:"10-12",rpe:7,rest:"90s",notes:"Drive elbows down, chest up",progression:"Focus on stretch and contraction over weight"}),g.push({name:"Seated Cable Row",sets:Math.round(3*w),reps:"10-12",rpe:7,rest:"90s",notes:"Pull to lower chest, squeeze",progression:"Add weight when form is solid"})),u.includes("shoulders")&&(g.push({name:"Overhead Press",sets:Math.round(4*w),reps:N==="elite"?"5-8":"8-10",rpe:M,rest:"2-3 min",notes:"Strict form, no leg drive",progression:"Add 2.5lbs when all reps completed"}),g.push({name:"Lateral Raises",sets:Math.round(4*w),reps:"12-15",rpe:7,rest:"60s",notes:"Lead with elbows, control the negative",progression:"Add 1 rep per week, then increase weight"}),(N==="advanced"||N==="elite")&&g.push({name:"Cable Lateral Raises",sets:3,reps:"15-20",rpe:8,rest:"45s",notes:"Constant tension, squeeze at top",progression:"Drop sets on final set for extra stimulus"})),(u.includes("legs")||u.includes("glutes"))&&(g.push({name:"Back Squat",sets:Math.round(4*w),reps:N==="elite"?"5-8":"8-10",rpe:M,rest:"3 min",notes:"ATG depth if mobility allows",progression:"Add 5lbs when all reps completed at target RPE"}),g.push({name:"Romanian Deadlift",sets:Math.round(4*w),reps:"8-12",rpe:M-1,rest:"2 min",notes:"Feel the hamstring stretch",progression:"Add 5lbs when form is solid at 12 reps"}),g.push({name:"Leg Press",sets:Math.round(3*w),reps:"10-15",rpe:8,rest:"2 min",notes:"Full range of motion",progression:"Volume work: push the reps before weight"}),g.push({name:"Leg Curls",sets:Math.round(3*w),reps:"12-15",rpe:7,rest:"60s",notes:"Squeeze at top, slow negative",progression:"Focus on contraction quality"}),g.push({name:"Standing Calf Raises",sets:Math.round(4*w),reps:"12-15",rpe:8,rest:"60s",notes:"Full stretch at bottom, pause at top",progression:"Calves respond to frequency - hit 3x/week if lagging"})),u.includes("biceps")&&(g.push({name:"Barbell Curls",sets:Math.round(3*w),reps:"8-12",rpe:8,rest:"90s",notes:"No swinging, squeeze at top",progression:"Add reps first, then weight"}),g.push({name:"Hammer Curls",sets:Math.round(3*w),reps:"10-12",rpe:7,rest:"60s",notes:"Control throughout",progression:"Brachialis focus - great for arm thickness"})),u.includes("triceps")&&(g.push({name:"Tricep Pushdowns",sets:Math.round(3*w),reps:"10-12",rpe:8,rest:"90s",notes:"Lock out at bottom",progression:"Add weight when 12 reps is easy"}),g.push({name:"Overhead Tricep Extension",sets:Math.round(3*w),reps:"12-15",rpe:7,rest:"60s",notes:"Feel the stretch at bottom",progression:"Long head focus - crucial for tricep size"})),u.includes("rear-delts")&&g.push({name:"Face Pulls",sets:Math.round(4*w),reps:"15-20",rpe:7,rest:"60s",notes:"External rotation at top",progression:"Health exercise: keep light, focus on form"}),u.includes("core")&&g.push({name:"Hanging Leg Raises",sets:3,reps:"12-15",rpe:8,rest:"60s",notes:"Control the movement",progression:"Add weight (hold DB) when hitting 15 reps"}),g}function generateEnduranceSession(u,h,x,E,j,g,N,k,A=null,w=null){const{multiplier:M,level:_}=j,z=(g?.goalPace||"").match(/(\d+):(\d+)/),O=z?parseFloat(z[1])+parseFloat(z[2])/60:null,q=calculateTargetPeakMileage(w,O,j),ae=E?Math.round(E*1.15):q,je=Math.max(q,ae),ue=calculateWeeklyMileage(k,je,N,h,E,w,j),te=calculateLongRunCap(A,N,j),Q=h==="Taper"?.6:h==="Peak"?1.1:h.includes("Build")?1:.85;switch(u){case"Easy Run":{const xe=Math.round(ue*.2*Q*10)/10;return{name:"Easy Run",duration:Math.round(xe*10),exercises:[{name:"Easy Run",sets:1,reps:`${xe} miles`,pace:g.easyPace,heartRateZone:"Zone 2 (65-75% max HR)",rpe:4,rest:"N/A",notes:"Should be able to hold a conversation. If breathing hard, slow down.",progression:`Week ${N}: ${xe} mi. Max 5% increase per week.`}]}}case"Tempo Run":{const ce=Math.round(ue*.15*Q*10)/10,F=1;return{name:"Tempo Run",duration:Math.round((1.5+ce+F)*9),exercises:[{name:"Warm-up",sets:1,reps:`${1.5} miles`,pace:g.easyPace,heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include 4x100m strides at end"},{name:"Tempo",sets:1,reps:`${ce} miles`,pace:g.tempoPace,heartRateZone:"Zone 3-4 (80-88% max HR)",rpe:7,rest:"N/A",notes:"Comfortably hard - can speak in short sentences only",progression:`Week ${N}: ${ce} mi tempo. Lactate threshold training.`},{name:"Cool-down",sets:1,reps:`${F} miles`,pace:g.recoveryPace,heartRateZone:"Zone 1-2",rpe:3,rest:"N/A",notes:"Very easy, let HR come down"}]}}case"Intervals":{const xe=_==="elite"?8:_==="advanced"?6:5,ce=_==="elite"?"800m":"400m",F=x?Math.floor(xe/2):h==="Peak"?xe+2:xe;return{name:"Interval Training",duration:55,exercises:[{name:"Warm-up",sets:1,reps:"1.5 miles",pace:g.easyPace,heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include dynamic stretches and 4x100m strides"},{name:`${ce} Repeats`,sets:F,reps:ce,pace:g.intervalPace,heartRateZone:"Zone 4-5 (88-95% max HR)",rpe:9,rest:_==="elite"?"2:00 jog":"1:30 jog",notes:`Consistent pace each rep. Target ${g.intervalPace}`,progression:`Week ${N}: ${F}x${ce}. Add 1 rep every 2-3 weeks.`},{name:"Cool-down",sets:1,reps:"1 mile",pace:g.recoveryPace,heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog + static stretching"}]}}case"Long Run":{const xe=Math.round(ue*.3*Q*10)/10,ce=_==="elite"?22:_==="advanced"?20:18,F=Math.min(xe,te,ce);return{name:"Long Run",duration:Math.round(F*9.5),exercises:[{name:"Long Run",sets:1,reps:`${F} miles`,pace:g.longRunPace,heartRateZone:"Zone 2 (start)  Zone 3 (finish)",rpe:6,rest:"N/A",notes:h==="Peak"?`Practice race nutrition. Last 3mi at ${g.goalPace} (goal pace)`:"Practice race nutrition. Keep even effort throughout.",progression:`Week ${N}: ${F} mi. Current cap: ${te}mi (increases ~1mi/2wks). Peak: ${ce}mi.`}]}}case"Recovery Run":return{name:"Recovery Run",duration:30,exercises:[{name:"Recovery Run",sets:1,reps:"3-4 miles",pace:g.recoveryPace,heartRateZone:"Zone 1 (60-65% max HR)",rpe:3,rest:"N/A",notes:"Truly easy. This should feel almost too slow. Promotes recovery.",progression:"Keep consistent - dont increase recovery run distance"}]};default:return{name:u,duration:45,exercises:[{name:u,sets:1,reps:"45 min",rpe:6,rest:"N/A",notes:"Moderate steady effort"}]}}}function generateFatLossSession(u,h,x,E,j){const g=[],{multiplier:N,level:k}=E;g.push({name:k==="elite"?"EMOM Circuit":"HIIT Circuit",sets:x?2:Math.round(4*N),reps:k==="elite"?"45s work / 15s rest":"30s work / 30s rest",rpe:9,rest:"2 min between rounds",notes:k==="elite"?"Burpees, box jumps, KB swings, battle ropes":"Max effort during work intervals",progression:`Week ${j}: Add 1 round every 2 weeks`});const A=generateAestheticExercises(u,h,x,E,j);return g.push(...A.slice(0,4)),x||g.push({name:k==="elite"?"Assault Bike":"Incline Walk",sets:1,reps:k==="elite"?"10 min intervals":"15-20 min",rpe:k==="elite"?8:5,rest:"N/A",notes:k==="elite"?"30s sprint / 30s recovery":"10-12% incline, 3.0-3.5 mph",progression:"Add 5 min per week or increase intensity"}),g}function isHardRunningDay(u){return["Tempo Run","Intervals","Long Run","Interval Training"].includes(u)}function createSmartHybridSchedule(u,h,x,E,j,g,N,k,A,w,M,_,J,z,O){const q=[],ae=j[u]||j[4],je=ae.map((L,W)=>({runType:L,isHard:isHardRunningDay(L),isLongRun:L==="Long Run",dayIndex:W})),ue=je.findIndex(L=>L.isLongRun),te=3,Q=[],xe=[];je.forEach((L,W)=>{const me=ue!==-1&&W===ue-1;E&&!L.isHard&&!me&&!L.isLongRun&&Q.push(W)});const ce={2:[0,3],3:[0,2,4],4:[0,1,3,4],5:[0,1,2,4,5],6:[0,1,2,3,4,5],7:[0,1,2,3,4,5,6]},F=ce[u]||ce[4],U=[];for(let L=0;L<7;L++){const W=ue!==-1&&F.indexOf(L)===ue-1;!(F.indexOf(L)!==-1&&F.indexOf(L)<ae.length)&&!W&&U.push(L)}const K=Q.length,ne=Math.max(0,te-K);for(let L=0;L<ne&&L<U.length;L++)xe.push(U[L]);Q.length+xe.length<te&&E&&je.forEach((L,W)=>{Q.length+xe.length>=te||!Q.includes(W)&&!L.isLongRun&&Q.push(W)});for(let L=0;L<7;L++){const W=F.indexOf(L),me=W!==-1,I=getDayName(L);if(!me){q.push({day:L+1,dayName:I,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const pe=[],se=W<ae.length?ae[W]:null;if(se){const ie=generateEnduranceSession(se,k,A,_,N,g,w,M,J,O);pe.push({time:"AM",type:"endurance",focus:se,duration:ie.duration,exercises:ie.exercises});const Ee=isHardRunningDay(se),V=ue!==-1&&W===ue-1;if(E&&!Ee&&!V&&x==="strength"){const D=W%2===0?["chest","shoulders","triceps"]:["back","biceps","core"],G=generateAestheticExercises(D,k,!0,N,w).slice(0,4);pe.push({time:"PM",type:"strength",focus:"Supplemental Strength",duration:35,exercises:G,notes:"Keep intensity moderate - recovery is priority"})}}else if(xe.includes(L)){const Ee=generateStrengthExercises(["legs","core","posterior"],k,A,N,w,z);pe.push({time:"ANY",type:"strength",focus:"Full Body Strength",duration:N.level==="elite"?75:60,exercises:Ee,notes:"Primary strength day - can push intensity"})}q.push({day:L+1,dayName:I,name:pe.map(ie=>ie.focus).join(" / ")||"Active Recovery",isRestDay:pe.length===0,isDeload:A,sessions:pe})}return q}function getRecoveryExercises(u){const h={jog:[{name:"Easy Jog",duration:"40 min",id:"recovery-jog",notes:"Conversational pace, zone 2 heart rate"},{name:"Cool Down Walk + Stretching",duration:"15 min",id:"recovery-cooldown"},{name:"Foam Rolling",duration:"5 min",id:"recovery-foam"}],walk:[{name:"Brisk Walk",duration:"40 min",id:"recovery-walk",notes:"Outdoor preferred, maintain good posture"},{name:"Dynamic Stretching",duration:"15 min",id:"recovery-stretch"},{name:"Foam Rolling",duration:"5 min",id:"recovery-foam"}],"cycling-class":[{name:"Cycling Class / Spin",duration:"45 min",id:"recovery-cycle",notes:"Low-moderate intensity, stay seated"},{name:"Stretching & Cool Down",duration:"10 min",id:"recovery-stretch"},{name:"Foam Rolling",duration:"5 min",id:"recovery-foam"}],yoga:[{name:"Yoga Flow",duration:"45 min",id:"recovery-yoga",notes:"Vinyasa or Hatha style, focus on mobility"},{name:"Savasana & Breathing",duration:"10 min",id:"recovery-breathe"},{name:"Foam Rolling",duration:"5 min",id:"recovery-foam"}]};return h[u]||h.walk}function generateLockInProgram(u){const{lockInSteps:h="10k",lockInWater:x=!0,lockInProtein:E=!0}=u,j=5,g=[];for(let A=0;A<j;A++)A<2?g.push("Base"):A<4?g.push("Build"):g.push("Peak");const N={push:[{name:"Bench Press",sets:4,reps:"8-10",muscleGroup:"chest"},{name:"Overhead Press",sets:3,reps:"8-10",muscleGroup:"shoulders"},{name:"Incline Dumbbell Press",sets:3,reps:"10-12",muscleGroup:"chest"},{name:"Tricep Dips",sets:3,reps:"10-15",muscleGroup:"triceps"}],pull:[{name:"Barbell Rows",sets:4,reps:"8-10",muscleGroup:"back"},{name:"Lat Pulldowns",sets:3,reps:"10-12",muscleGroup:"lats"},{name:"Face Pulls",sets:3,reps:"15-20",muscleGroup:"rear delts"},{name:"Barbell Curls",sets:3,reps:"10-12",muscleGroup:"biceps"}],legs:[{name:"Barbell Squats",sets:4,reps:"8-10",muscleGroup:"quads"},{name:"Romanian Deadlifts",sets:3,reps:"10-12",muscleGroup:"hamstrings"},{name:"Leg Press",sets:3,reps:"12-15",muscleGroup:"quads"},{name:"Calf Raises",sets:4,reps:"15-20",muscleGroup:"calves"}],fullBody:[{name:"Deadlifts",sets:4,reps:"5-6",muscleGroup:"full body"},{name:"Pull-ups",sets:3,reps:"8-12",muscleGroup:"back"},{name:"Dumbbell Lunges",sets:3,reps:"10 each",muscleGroup:"legs"},{name:"Plank",sets:3,reps:"45-60s",muscleGroup:"core"}],upperBody:[{name:"Bench Press",sets:4,reps:"8-10",muscleGroup:"chest"},{name:"Barbell Rows",sets:4,reps:"8-10",muscleGroup:"back"},{name:"Overhead Press",sets:3,reps:"8-10",muscleGroup:"shoulders"},{name:"Chin-ups",sets:3,reps:"8-12",muscleGroup:"biceps"}],lowerBody:[{name:"Barbell Squats",sets:4,reps:"8-10",muscleGroup:"quads"},{name:"Deadlifts",sets:4,reps:"5-6",muscleGroup:"posterior chain"},{name:"Leg Curls",sets:3,reps:"12-15",muscleGroup:"hamstrings"},{name:"Calf Raises",sets:4,reps:"15-20",muscleGroup:"calves"}]},k=[{day:1,dayName:"Monday",name:"Push Day",isRestDay:!1,isDeload:!1,isCardioDay:!0,sessions:[{type:"strength",focus:"Push",duration:60,exercises:N.push.map(A=>({...A,id:`push-${A.name.toLowerCase().replace(/\s+/g,"-")}`,notes:"Warm up with lighter weight first"}))}]},{day:2,dayName:"Tuesday",name:"Pull Day",isRestDay:!1,isDeload:!1,isCardioDay:!1,sessions:[{type:"strength",focus:"Pull",duration:60,exercises:N.pull.map(A=>({...A,id:`pull-${A.name.toLowerCase().replace(/\s+/g,"-")}`,notes:"Focus on mind-muscle connection"}))}]},{day:3,dayName:"Wednesday",name:"Legs + Cardio",isRestDay:!1,isDeload:!1,isCardioDay:!0,sessions:[{type:"strength",focus:"Legs",duration:60,exercises:N.legs.map(A=>({...A,id:`legs-${A.name.toLowerCase().replace(/\s+/g,"-")}`,notes:"Full range of motion"}))}]},{day:4,dayName:"Thursday",name:"Upper Body",isRestDay:!1,isDeload:!1,isCardioDay:!1,sessions:[{type:"strength",focus:"Upper Body",duration:60,exercises:N.upperBody.map(A=>({...A,id:`upper-${A.name.toLowerCase().replace(/\s+/g,"-")}`,notes:"Controlled tempo"}))}]},{day:5,dayName:"Friday",name:"Lower Body + Cardio",isRestDay:!1,isDeload:!1,isCardioDay:!0,sessions:[{type:"strength",focus:"Lower Body",duration:60,exercises:N.lowerBody.map(A=>({...A,id:`lower-${A.name.toLowerCase().replace(/\s+/g,"-")}`,notes:"Progressive overload focus"}))}]},{day:6,dayName:"Saturday",name:"Full Body",isRestDay:!1,isDeload:!1,isCardioDay:!1,sessions:[{type:"strength",focus:"Full Body",duration:60,exercises:N.fullBody.map(A=>({...A,id:`full-${A.name.toLowerCase().replace(/\s+/g,"-")}`,notes:"Compound movement focus"}))}]},{day:7,dayName:"Sunday",name:"Active Recovery",isRestDay:!0,isDeload:!1,isCardioDay:!1,isActiveRecovery:!0,sessions:[{type:"recovery",focus:"Active Recovery",duration:60,description:"1 hour total: chosen activity + stretching/mobility",exercises:getRecoveryExercises(u.lockInRestDayActivity)}]}];return{name:"30 Day Lock In",description:"Your 30-day transformation challenge with daily workouts, cardio, and recovery",totalWeeks:j,currentWeek:1,currentPhase:"Base",phases:g,primaryGoal:"lockin",primarySubtype:"lockin-standard",daysPerWeek:7,weeklySchedule:k,commitments:{workout:!0,steps:h,water:x,protein:E,cardio:{daysPerWeek:3,duration:"20-30 min"},activeRecovery:{day:7,duration:"1 hour"}},athleteLevel:calculateAthleteLevel(u).level,athleteScore:calculateAthleteLevel(u).score,generatedAt:new Date().toISOString()}}function generateProgram(u){u||(console.error("generateProgram called with no formData"),u={});let{programType:h="strength",programSubtype:x="powerlifting",desiredTrainingDays:E=4,enableHybrid:j=!1,secondaryProgramType:g="",allowDoubleDays:N=!1,currentWeeklyMileage:k=0,longestRecentRun:A=0,vacations:w=[],targetFinishHours:M="",targetFinishMinutes:_="",targetFinishSeconds:J="",raceDistance:z="",baselineRaceDistance:O="",baselineTimeHours:q="",baselineTimeMinutes:ae="",baselineTimeSeconds:je="",strengthGoals:ue=[],programStartDate:te=""}=u;if(E=parseInt(E)||4,E<2&&(E=2),E>7&&(E=7),h==="lockin")return generateLockInProgram(u);const Q=x==="triathlon";Q&&(j=!0,g="strength",N=!0,E<5&&(E=5));const xe=calculateAthleteLevel(u),{totalWeeks:ce,weeksUntilGoal:F}=calculateProgramLength(u),U=generatePeriodizationPhases(ce,h,x),K=distributeWorkoutDays(E),ne=[M,_,J].filter(Boolean).join(":"),be=[q,ae,je].filter(Boolean).join(":"),L=calculatePaces(ne,z,be,O),W=parseFloat(k)||null,me=parseFloat(A)||null;let I="aesthetic";h==="strength"&&(I="strength");const pe=SPLIT_TEMPLATES[Math.min(E,6)]?.[I]||SPLIT_TEMPLATES[4][I],se=U[0]||"Base",ie=1,Ee=se==="Deload"||se==="Taper";let V=[];if(Q){const G=ENDURANCE_TEMPLATES.triathlon[E]||ENDURANCE_TEMPLATES.triathlon[5],Te={4:[0,2,4,5],5:[0,1,3,4,5],6:[0,1,2,4,5,6],7:[0,1,2,3,4,5,6]},ee=Te[E]||Te[5];for(let Ae=0;Ae<7;Ae++){const ye=ee.indexOf(Ae),Ge=ye!==-1,Le=getDayName(Ae);if(!Ge){V.push({day:Ae+1,dayName:Le,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const Ue=G[ye]||"Easy Run",$e=generateTriathlonSession(Ue,se,Ee,xe,L,ie),dt=[];if(Ue.includes("Strength")){const Cs=$e.strengthSession||[],rt=Ue.toLowerCase().includes("swim"),fs=Ue.toLowerCase().includes("bike");Ue.toLowerCase().includes("run")||Ue.toLowerCase().includes("tempo");const rs=$e.exercises.filter(cs=>!cs.name.toLowerCase().includes("strength")&&!cs.name.toLowerCase().includes("prevention"));if(rs.length>0){const cs=rt?"swim":fs?"bike":"run",Tt=rt?"Technique Swim":Ue.includes("Intervals")?"Bike Intervals":Ue.includes("Tempo")?"Tempo Run":fs?"Easy Bike":"Easy-Moderate Run";dt.push({time:"AM",type:cs,focus:Tt,duration:Math.round($e.duration*.55),exercises:rs})}if(Cs.length>0){const cs=Ue.includes("Swim")?"Full Injury Prevention":Ue.includes("Run + Strength")?"Hip & Glute Stability":Ue.includes("Bike + Strength")?"Core & Stability":Ue.includes("Tempo")?"Prehab & Mobility":"Core & Stability";dt.push({time:"PM",type:"strength",focus:cs,duration:35,exercises:Cs,notes:"Triathlon injury prevention: NOT hypertrophy. Focus on stability & resilience."})}}else Ue.includes("/")||Ue.includes("+")?$e.exercises.length>=2?(dt.push({time:"AM",type:$e.exercises[0].name.toLowerCase().includes("swim")?"swim":$e.exercises[0].name.toLowerCase().includes("bike")?"bike":"run",focus:$e.exercises[0].name,duration:Math.round($e.duration*.5),exercises:[$e.exercises[0]]}),dt.push({time:"PM",type:$e.exercises[1].name.toLowerCase().includes("swim")?"swim":$e.exercises[1].name.toLowerCase().includes("bike")?"bike":"run",focus:$e.exercises[1].name,duration:Math.round($e.duration*.5),exercises:[$e.exercises[1]]})):dt.push({time:"ANY",type:"triathlon",focus:Ue,duration:$e.duration,exercises:$e.exercises}):Ue.includes("Brick")?dt.push({time:"AM",type:"brick",focus:"Long Brick",duration:$e.duration,exercises:$e.exercises,notes:"Key session: practice race transitions"}):dt.push({time:"ANY",type:Ue.toLowerCase().includes("swim")?"swim":Ue.toLowerCase().includes("bike")?"bike":"run",focus:Ue,duration:$e.duration,exercises:$e.exercises});V.push({day:Ae+1,dayName:Le,name:dt.map(Cs=>Cs.focus).join(" / "),isRestDay:!1,isDeload:Ee,sessions:dt})}}else if(j&&h==="endurance"&&(g==="strength"||g==="aesthetic")){const G=x==="triathlon"?ENDURANCE_TEMPLATES.triathlon:ENDURANCE_TEMPLATES.running;V=createSmartHybridSchedule(E,h,g,N,G,L,xe,se,Ee,ie,ce,W,me,ue,z)}else for(let G=0;G<7;G++){const Te=K.includes(G),ee=getDayName(G);if(!Te){V.push({day:G+1,dayName:ee,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const Ae=K.indexOf(G),ye=pe.length>0?Ae%pe.length:0,Ge=pe[ye]||{name:"Full Body",focus:["legs","chest","back"]},Le=[];if(h==="endurance"){const $e=(x==="triathlon"?ENDURANCE_TEMPLATES.triathlon:ENDURANCE_TEMPLATES.running)[E]?.[Ae]||"Easy Run",dt=generateEnduranceSession($e,se,Ee,W,xe,L,ie,ce,me,z);Le.push({time:"AM",type:"endurance",focus:$e,duration:dt.duration,exercises:dt.exercises})}else if(h==="strength"){const Ue=generateStrengthExercises(Ge.focus,se,Ee,xe,ie,ue);Le.push({time:"ANY",type:"strength",focus:Ge.name,duration:xe?.level==="elite"?90:75,exercises:Ue})}else if(h==="aesthetic"){const Ue=generateAestheticExercises(Ge.focus,se,Ee,xe,ie);Le.push({time:"ANY",type:"hypertrophy",focus:Ge.name,duration:xe?.level==="elite"?75:60,exercises:Ue})}else if(h==="fatloss"){const Ue=generateFatLossSession(Ge.focus,se,Ee,xe,ie);Le.push({time:"ANY",type:"metabolic",focus:Ge.name,duration:50,exercises:Ue})}j&&g==="endurance"&&N&&Le.push({time:"PM",type:"endurance",focus:"Easy Run",duration:30,exercises:[{name:"Easy Run",sets:1,reps:"30 min",pace:L?.recoveryPace||"10:00-10:30/mi",heartRateZone:"Zone 1-2",rpe:4,rest:"N/A",notes:"Recovery pace only - prioritize strength recovery"}]}),V.push({day:G+1,dayName:ee,name:Le.map(Ue=>Ue.focus).join(" / "),isRestDay:!1,isDeload:Ee,sessions:Le})}return{name:getProgramName(h,x,xe.level),description:`${xe.level.charAt(0).toUpperCase()+xe.level.slice(1)}-level ${h} program with ${ce}-week periodization. Max 5% weekly volume increase.`,mesocycleWeeks:ce,totalWeeks:ce,currentWeek:1,currentPhase:U[0],phases:U,athleteLevel:xe.level,athleteScore:xe.score,primaryGoal:h,primarySubtype:x,secondaryGoal:g||null,secondarySubtype:u.secondarySubtype||null,isHybrid:j||!1,allowDoubleDays:N||!1,daysPerWeek:E,vacations:w,weeksUntilGoal:F,baseline:{endurance:h==="endurance"?{currentMileage:W,longestRecentRun:me,referenceRace:O?{distance:O,time:be}:null}:null,strength:h==="strength"?{lifts:ue.filter(G=>G.current1RM).map(G=>({exercise:G.label,current1RM:parseFloat(G.current1RM),target1RM:parseFloat(G.target1RM)}))}:null},paces:h==="endurance"?L:null,generatedAt:new Date().toISOString(),startDate:te||new Date().toISOString().split("T")[0],weeklySchedule:V,progressionRules:{strengthIncrease:xe.level==="elite"?"Micro-load 1-2.5lbs when RPE allows. Prioritize technical consistency.":"Add 2.5-5lbs per week when all reps completed at target RPE.",volumeIncrease:"Add 1 set per exercise every 2-3 weeks during Build phase.",mileageIncrease:"Max 5% weekly mileage increase. Never more.",deloadProtocol:`Every ${xe.level==="elite"?"3rd":"4th"} week: 50% volume, maintain intensity at RPE 6-7.`},dynamicAdjustments:{missedWorkouts:"Program will auto-adjust if workouts are missed.",nutritionTracking:"Calorie targets adjust based on progress.",goalTracking:"Weekly check-ins to ensure you stay on track."}}}function getProgramName(u,h,x){const E=x==="elite"?"Elite ":x==="advanced"?"Advanced ":"";return{endurance:{running:`${E}Running Program`,marathon:`${E}Marathon Prep`,cycling:`${E}Cycling Performance`,swimming:`${E}Swim Program`,triathlon:`${E}Triathlon Builder`},strength:{powerlifting:`${E}Powerlifting Protocol`,olympic:`${E}Olympic Lifting`,strongman:`${E}Strongman Training`},aesthetic:{hypertrophy:`${E}Hypertrophy Program`,"lean-muscle":`${E}Lean Gains`,recomp:`${E}Body Recomposition`},fatloss:{aggressive:`${E}Rapid Fat Loss`,moderate:`${E}Sustainable Shred`,slow:`${E}Gradual Cut`}}[u]?.[h]||`${E}${u.charAt(0).toUpperCase()+u.slice(1)} Program`}const STRENGTH_LIFTS=[{id:"squat",label:"Back Squat",icon:""},{id:"bench",label:"Bench Press",icon:""},{id:"deadlift",label:"Deadlift",icon:""},{id:"ohp",label:"Overhead Press",icon:""}],NUTRITION_GOALS=[{id:"recomp",label:"Recomp",desc:"Lose fat, build muscle (Recommended)",icon:"",multiplier:1,detail:"Eat at maintenance with high protein. Gradual, sustainable progress."},{id:"gain",label:"Gain Weight",desc:"Calorie surplus for faster gains",icon:"",multiplier:.8,detail:"Better recovery, faster strength gains. Best for building muscle."},{id:"maintain",label:"Maintain",desc:"Keep current weight",icon:"",multiplier:1,detail:"Stable energy levels, steady progress."},{id:"lose",label:"Lose Weight",desc:"Calorie deficit (slower progress)",icon:"",multiplier:1.4,detail:"Less recovery, reduced energy. Strength gains will be slower."}];function calculate1RM(u,h){return!u||!h||h<1?null:h===1?u:Math.round(u*(1+h/30))}function calculateRecommendedDuration(u,h,x,E){const j=h-u;if(j<=0)return{weeks:8,reason:"maintenance",monthlyRate:0};const g={beginner:30,intermediate:15,advanced:8,elite:4},k=(NUTRITION_GOALS.find(J=>J.id===E)||NUTRITION_GOALS[0]).multiplier,A=g[x]||g.intermediate,w=Math.round(A/k),M=Math.ceil(j/w);return{weeks:Math.max(8,M*4),monthlyRate:w,reason:"calculated",nutritionImpact:k!==1?k<1?"faster":"slower":"normal"}}function getTodayString$1(){return new Date().toISOString().split("T")[0]}function addWeeksToDate(u,h){const x=u?new Date(u):new Date;return x.setDate(x.getDate()+h*7),x.toISOString().split("T")[0]}function getWeeksDifference(u,h){const x=new Date(u),j=new Date(h)-x;return Math.round(j/(1e3*60*60*24*7))}function StrengthGoalsForm({strengthGoals:u,strengthGoalDate:h,programStartDate:x,nutritionGoal:E,experienceLevel:j="intermediate",bodyFatPercent:g,onUpdateGoal:N,onUpdateDate:k,onUpdateStartDate:A,onUpdateNutrition:w}){const[M,_]=reactExports.useState({}),[J,z]=reactExports.useState(!1),O=u&&u.length>0?u:STRENGTH_LIFTS.map(ne=>({id:ne.id,label:ne.label,current1RM:"",target1RM:"",workingWeight:"",workingReps:""})),q=O.reduce((ne,be)=>{const L=parseFloat(be.current1RM)||0;return ne+L},0),ae=O.reduce((ne,be)=>{const L=parseFloat(be.target1RM)||0;return ne+L},0),ue=E||((parseFloat(g)||15)<=10?"gain":"recomp"),te=calculateRecommendedDuration(q,ae,j,ue),Q=x||getTodayString$1(),xe=addWeeksToDate(Q,te.weeks),ce=addWeeksToDate(Q,Math.max(1,te.weeks-1));reactExports.useEffect(()=>{if(ae>q&&te.weeks>0){const ne=addWeeksToDate(Q,te.weeks);(!h||h<ne)&&(k(ne),z(!1))}},[Q,te.weeks,q,ae]);const F=ne=>{const be=te.weeks;getWeeksDifference(Q,ne)<be-1?z(!0):z(!1),k(ne)},U=(ne,be,L)=>{const W=O.find(I=>I.id===ne);if(!W)return;const me={...W,[be]:L};if(me.workingWeight&&me.workingReps){const I=calculate1RM(parseFloat(me.workingWeight),parseInt(me.workingReps));I&&(me.current1RM=I.toString())}N(ne,be,L),me.current1RM!==W.current1RM&&N(ne,"current1RM",me.current1RM)},K=()=>NUTRITION_GOALS.find(ne=>ne.id===ue)||NUTRITION_GOALS[0];return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Nutrition Strategy"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Your nutrition affects how fast you can safely progress. This impacts your program timeline."}),parseFloat(g)<=10&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 bg-amber-900/20 border border-amber-600/30 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-amber-300",children:[jsxRuntimeExports.jsx("strong",{children:"Note:"})," At 10% body fat, we recommend a calorie surplus for optimal strength gains and recovery."]})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:NUTRITION_GOALS.map(ne=>jsxRuntimeExports.jsxs("button",{onClick:()=>w(ne.id),className:`p-3 rounded-lg border text-left transition-all ${ue===ne.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500 hover:border-dark-400"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("span",{children:ne.icon}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:ne.label})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:ne.desc})]},ne.id))}),jsxRuntimeExports.jsxs("div",{className:"mt-3 p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:K().detail}),ue==="lose"&&jsxRuntimeExports.jsx("p",{className:"text-xs text-amber-400 mt-2",children:" Strength gains are significantly slower in a deficit. Consider recomp instead."})]})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Current Strength Baselines"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Enter your current 1 rep max (1RM) for each lift. If you don't know your 1RM, click the calculator to estimate from your working weight and reps."})]}),O.map(ne=>{const be=STRENGTH_LIFTS.find(W=>W.id===ne.id),L=M[ne.id];return jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"text-white font-medium flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:be?.icon}),ne.label]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>_(W=>({...W,[ne.id]:!W[ne.id]})),className:`flex items-center gap-1 text-xs px-2 py-1 rounded ${L?"bg-accent-primary/20 text-accent-primary":"bg-dark-600 text-gray-400 hover:text-white"}`,children:[jsxRuntimeExports.jsx(Calculator,{className:"w-3 h-3"}),L?"Hide Calculator":"Don't know 1RM?"]})]}),L&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-600 rounded-lg space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Enter the most weight you can lift for multiple reps:"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{type:"number",value:ne.workingWeight||"",onChange:W=>U(ne.id,"workingWeight",W.target.value),placeholder:"Weight (lbs)",className:"w-full px-3 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{type:"number",value:ne.workingReps||"",onChange:W=>U(ne.id,"workingReps",W.target.value),placeholder:"Reps",min:"1",max:"15",className:"w-full px-3 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"})})]}),ne.workingWeight&&ne.workingReps&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-accent-primary",children:["Estimated 1RM: ",jsxRuntimeExports.jsxs("span",{className:"font-bold",children:[calculate1RM(parseFloat(ne.workingWeight),parseInt(ne.workingReps))," lbs"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Current 1RM"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"number",value:ne.current1RM||"",onChange:W=>N(ne.id,"current1RM",W.target.value),placeholder:"e.g., 225",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:"lbs"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Goal 1RM"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"number",value:ne.target1RM||"",onChange:W=>N(ne.id,"target1RM",W.target.value),placeholder:"e.g., 275",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:"lbs"})]})]})]})]},ne.id)}),q>0&&ae>0&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 rounded-lg border border-accent-primary/30",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"Current Total"}),jsxRuntimeExports.jsxs("span",{className:"text-white font-bold",children:[q," lbs"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"Goal Total"}),jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[ae," lbs"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/10",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"Total Gain Needed"}),jsxRuntimeExports.jsxs("span",{className:"text-accent-secondary font-bold",children:["+",ae-q," lbs"]})]})]}),ae>q&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Info,{className:"w-5 h-5 text-accent-primary flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium mb-1",children:"Estimated Program Duration"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 mb-3",children:["Based on your goals, experience (",j,"), and nutrition strategy (",ue,"), you can realistically gain about ",jsxRuntimeExports.jsxs("span",{className:"text-white",children:[te.monthlyRate," lbs/month"]})," across your main lifts."]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-accent-primary",children:te.weeks}),jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"weeks estimated"})]}),te.nutritionImpact!=="normal"&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:te.nutritionImpact==="faster"?" Calorie surplus enables faster recovery and progress":" Calorie deficit slows recovery - timeline adjusted accordingly"})]})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Estimated 1RM Goal Accomplishment Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:h||xe,min:ce,onChange:ne=>F(ne.target.value),className:`w-full px-4 py-3 bg-dark-700 border rounded-lg text-white ${J?"border-amber-500":"border-dark-600"}`}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Based on your start date and estimated ",te.weeks,"-week program"]}),J&&jsxRuntimeExports.jsx("div",{className:"mt-3 p-4 bg-amber-900/20 border border-amber-600/30 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-amber-300 font-medium mb-1",children:" Accelerated Timeline Warning"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Pushing your goals faster than recommended significantly increases injury risk and could set you back even further."}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:[jsxRuntimeExports.jsx("strong",{children:"We don't recommend expediting the program."})," It's already optimized for maximum safe progress. If you're progressing faster than expected, the program will automatically adjust to your performance."]})]})]})})]})]})}function AdvancedMetricsModal({isOpen:u,onClose:h,formData:x,updateFormData:E}){const[j,g]=reactExports.useState("dexa");if(!u)return null;const N=[{id:"dexa",label:"DEXA Scan",icon:""},{id:"inbody",label:"InBody",icon:""},{id:"rmr",label:"RMR Test",icon:""}];return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white",children:"Advanced Body Metrics"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Enter data from professional body composition tests"})]}),jsxRuntimeExports.jsx("button",{onClick:h,className:"p-2 rounded-lg hover:bg-dark-700 text-gray-400 hover:text-white",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"flex border-b border-dark-600",children:N.map(k=>jsxRuntimeExports.jsxs("button",{onClick:()=>g(k.id),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${j===k.id?"text-accent-primary border-b-2 border-accent-primary bg-dark-700/50":"text-gray-400 hover:text-white hover:bg-dark-700/30"}`,children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:k.icon}),k.label]},k.id))}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[j==="dexa"&&jsxRuntimeExports.jsx(DEXAForm,{formData:x,updateFormData:E}),j==="inbody"&&jsxRuntimeExports.jsx(InBodyForm,{formData:x,updateFormData:E}),j==="rmr"&&jsxRuntimeExports.jsx(RMRForm,{formData:x,updateFormData:E})]}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-dark-600",children:jsxRuntimeExports.jsx("button",{onClick:h,className:"w-full py-3 bg-accent-primary text-dark-900 font-semibold rounded-lg hover:bg-accent-primary/90",children:"Save & Close"})})]})})}function DEXAForm({formData:u,updateFormData:h}){return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg border border-blue-500/30",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 text-blue-400 mt-0.5"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-300",children:"DEXA (Dual-Energy X-ray Absorptiometry) is the gold standard for body composition analysis, providing accurate measurements of bone density, fat mass, and lean mass."})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Body Fat Percentage (%)"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.dexaBodyFat||"",onChange:x=>h("dexaBodyFat",x.target.value),placeholder:"e.g., 18.5",step:"0.1",min:"3",max:"60",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Lean Body Mass (lbs)"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.dexaLeanMass||"",onChange:x=>h("dexaLeanMass",x.target.value),placeholder:"e.g., 145",step:"0.1",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Fat Mass (lbs)"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.dexaFatMass||"",onChange:x=>h("dexaFatMass",x.target.value),placeholder:"e.g., 35",step:"0.1",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Bone Mineral Density (g/cm) ",jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),jsxRuntimeExports.jsx("input",{type:"number",value:u.dexaBMD||"",onChange:x=>h("dexaBMD",x.target.value),placeholder:"e.g., 1.2",step:"0.01",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Scan Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:u.dexaScanDate||"",onChange:x=>h("dexaScanDate",x.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]})]})}function InBodyForm({formData:u,updateFormData:h}){return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-purple-500/10 rounded-lg border border-purple-500/30",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 text-purple-400 mt-0.5"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-purple-300",children:"InBody uses bioelectrical impedance analysis (BIA) to measure body composition. It provides data on muscle mass, body fat, and water distribution."})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Body Fat Percentage (%)"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.inbodyBodyFat||"",onChange:x=>h("inbodyBodyFat",x.target.value),placeholder:"e.g., 20.3",step:"0.1",min:"3",max:"60",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Skeletal Muscle Mass (lbs)"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.inbodySMM||"",onChange:x=>h("inbodySMM",x.target.value),placeholder:"e.g., 85",step:"0.1",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Body Water (lbs)"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.inbodyTBW||"",onChange:x=>h("inbodyTBW",x.target.value),placeholder:"e.g., 95",step:"0.1",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Basal Metabolic Rate (kcal) ",jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"(from InBody)"})]}),jsxRuntimeExports.jsx("input",{type:"number",value:u.inbodyBMR||"",onChange:x=>h("inbodyBMR",x.target.value),placeholder:"e.g., 1850",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["InBody Score ",jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),jsxRuntimeExports.jsx("input",{type:"number",value:u.inbodyScore||"",onChange:x=>h("inbodyScore",x.target.value),placeholder:"e.g., 78",min:"0",max:"100",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Test Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:u.inbodyDate||"",onChange:x=>h("inbodyDate",x.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]})]})}function RMRForm({formData:u,updateFormData:h}){return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-orange-500/10 rounded-lg border border-orange-500/30",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 text-orange-400 mt-0.5"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-orange-300",children:"Resting Metabolic Rate (RMR) testing measures the calories your body burns at rest using indirect calorimetry. This is the most accurate way to determine your true metabolic rate."})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Measured RMR (kcal/day)"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.measuredRMR||"",onChange:x=>h("measuredRMR",x.target.value),placeholder:"e.g., 1750",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will override our calculated BMR estimate for more accurate calorie targets."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Respiratory Quotient (RQ) ",jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),jsxRuntimeExports.jsx("input",{type:"number",value:u.measuredRQ||"",onChange:x=>h("measuredRQ",x.target.value),placeholder:"e.g., 0.85",step:"0.01",min:"0.7",max:"1.0",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"RQ indicates fuel utilization: 0.7 = mostly fat, 1.0 = mostly carbs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Testing Facility/Method"}),jsxRuntimeExports.jsx("input",{type:"text",value:u.rmrFacility||"",onChange:x=>h("rmrFacility",x.target.value),placeholder:"e.g., DEXA Fit, BodySpec",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Test Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:u.rmrDate||"",onChange:x=>h("rmrDate",x.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),u.measuredRMR&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Comparison:"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Measured RMR:"}),jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[u.measuredRMR," kcal"]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Your measured RMR will be used instead of calculated estimates for more accurate nutrition targets."})]})]})}class SetupErrorBoundary extends reactExports.Component{constructor(h){super(h),this.state={hasError:!1,error:null}}static getDerivedStateFromError(h){return{hasError:!0,error:h}}componentDidCatch(h,x){console.error("Setup Wizard Error:",h),console.error("Error Info:",x),console.error("Component Stack:",x?.componentStack)}render(){return this.state.hasError?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center p-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 max-w-md text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Something went wrong"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-4",children:this.state.error?.message||"An unexpected error occurred"}),jsxRuntimeExports.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"px-6 py-3 bg-accent-primary text-white rounded-lg font-medium",children:"Reload"})]})}):this.props.children}}const getTodayString=()=>new Date().toISOString().split("T")[0],STEPS_STANDARD=[{id:1,title:"Program",icon:Target},{id:2,title:"Body Stats",icon:Scale},{id:3,title:"Goal Details",icon:Dumbbell},{id:4,title:"Time Off",icon:Plane},{id:5,title:"Generate",icon:Sparkles}],STEPS_LOCKIN=[{id:1,title:"Program",icon:Target},{id:2,title:"Quick Setup",icon:Scale},{id:3,title:"Commitments",icon:Dumbbell},{id:4,title:"Generate",icon:Sparkles}],PROGRAM_TYPES=[{id:"lockin",title:"30 Day Lock In",description:"Build momentum with a simple, structured 30-day challenge",icon:"",subtypes:[{id:"lockin-standard",label:"30 Day Challenge"}],isLockIn:!0},{id:"endurance",title:"Endurance",description:"Cardiovascular training - running, cycling, swimming",icon:"",subtypes:[{id:"running",label:"Running (Race Training)"},{id:"cycling",label:"Cycling"},{id:"swimming",label:"Swimming"},{id:"triathlon",label:"Triathlon"}]},{id:"strength",title:"Strength",description:"Powerbuilding program - strength & muscle",icon:"",subtypes:[{id:"powerlifting",label:"Powerlifting/Powerbuilding"}],autoSelect:!0},{id:"aesthetic",title:"Aesthetic",description:"Hypertrophy/Bodybuilding - sculpt your physique",icon:"",subtypes:[{id:"hypertrophy",label:"Hypertrophy/Bodybuilding"}],autoSelect:!0}],RACE_DISTANCES=[{id:"5k",label:"5K",miles:3.1},{id:"10k",label:"10K",miles:6.2},{id:"half",label:"Half Marathon",miles:13.1},{id:"full",label:"Full Marathon",miles:26.2},{id:"ultra",label:"Ultra Marathon",miles:null,requiresDistance:!0}],BASELINE_RACE_DISTANCES=[{id:"5k",label:"5K"},{id:"10k",label:"10K"},{id:"half",label:"Half Marathon"},{id:"full",label:"Full Marathon"}],TRIATHLON_DISTANCES=[{id:"sprint",label:"Sprint",description:"750m swim, 20km bike, 5km run"},{id:"olympic",label:"Olympic",description:"1.5km swim, 40km bike, 10km run"},{id:"half-iron",label:"Half Ironman (70.3)",description:"1.9km swim, 90km bike, 21.1km run"},{id:"full-iron",label:"Ironman",description:"3.8km swim, 180km bike, 42.2km run"}],STRENGTH_EXERCISES=[{id:"squat",label:"Back Squat"},{id:"bench",label:"Bench Press"},{id:"deadlift",label:"Deadlift"},{id:"ohp",label:"Overhead Press"}],SECONDARY_CARDIO_OPTIONS=[{id:"running",label:"Running",icon:"",description:"2-3 easy runs per week"},{id:"cycling",label:"Cycling",icon:"",description:"2-3 bike sessions per week"},{id:"swimming",label:"Swimming",icon:"",description:"2-3 swim sessions per week"}],generateTestData=()=>{const u={name:"Test User",age:30,sex:"male",weight:180,weightUnit:"lbs",heightFeet:5,heightInches:10,heightUnit:"imperial",programType:"endurance",programSubtype:"running",desiredTrainingDays:5,yearsTraining:3,trainingHistory:"consistent",raceDistance:"half",raceDate:new Date(Date.now()+7776e6).toISOString().split("T")[0],nutritionGoal:"maintain",weightKg:81.6,heightCm:177.8,bmr:1882,tdee:3200,macros:{calories:3200,protein:180,carbs:400,fat:100}},h={name:"Test Running Program",type:"endurance",subtype:"running",primaryGoal:"endurance",currentWeek:1,currentPhase:"Base",mesocycleWeeks:14,daysPerWeek:5,programStartDate:new Date().toISOString().split("T")[0],weeklySchedule:[{day:1,dayName:"Monday",name:"Easy Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Easy Run",duration:40,exercises:[{name:"Easy Run",sets:1,reps:"40 min",pace:"9:30-10:00/mi",rpe:5}]}]},{day:2,dayName:"Tuesday",name:"Intervals",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Intervals",duration:45,exercises:[{name:"Speed Work",sets:6,reps:"400m",pace:"7:30/mi",rpe:8}]}]},{day:3,dayName:"Wednesday",name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]},{day:4,dayName:"Thursday",name:"Tempo Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Tempo",duration:50,exercises:[{name:"Tempo Run",sets:1,reps:"4 mi",pace:"8:15/mi",rpe:7}]}]},{day:5,dayName:"Friday",name:"Easy Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Easy Run",duration:35,exercises:[{name:"Recovery Run",sets:1,reps:"30 min",pace:"10:00/mi",rpe:4}]}]},{day:6,dayName:"Saturday",name:"Long Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Long Run",duration:90,exercises:[{name:"Long Run",sets:1,reps:"10 mi",pace:"9:45/mi",rpe:6}]}]},{day:7,dayName:"Sunday",name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]}]};return{profile:u,program:h}};function SetupWizard({onComplete:u}){const{user:h,signInWithGoogle:x,isAuthenticated:E,isConfigured:j}=useAuth(),[g,N]=reactExports.useState(1),[k,A]=reactExports.useState(!1),[w,M]=reactExports.useState(null),[_,J]=reactExports.useState(0),z=reactExports.useRef(null),[O,q]=reactExports.useState({name:"",age:"",sex:"male",weight:"",weightUnit:"lbs",heightFeet:"",heightInches:"",heightUnit:"imperial",heightCm:"",bodyFatPercent:"",currentTrainingDays:3,trainingHistory:"some",yearsTraining:1,programType:"",programSubtype:"",desiredTrainingDays:4,raceDistance:"",ultraDistance:"",triathlonDistance:"",targetFinishTime:"",targetFinishHours:"",targetFinishMinutes:"",targetFinishSeconds:"",raceDate:"",currentWeeklyMileage:"",currentPace:"",baselineRaceDistance:"",baselineTimeHours:"",baselineTimeMinutes:"",baselineTimeSeconds:"",longestRecentRun:"",strengthGoals:STRENGTH_EXERCISES.map(I=>({id:I.id,label:I.label,current1RM:"",target1RM:"",workingWeight:"",workingReps:""})),strengthGoalDate:"",includeCardio:!1,cardioType:"",cardioDaysPerWeek:2,currentBodyFat:"",targetBodyFat:"",aestheticGoalDate:"",targetWeight:"",targetDate:"",weeklyWeightChange:.5,enableHybrid:!1,secondaryProgramType:"",secondarySubtype:"",allowDoubleDays:!1,lockInWorkout:!0,lockInSteps:"10k",lockInWater:!0,lockInProtein:!0,lockInCardioType:"treadmill",lockInRestDayActivity:"walk",lockInIdealWeight:"",sessionDuration:60,equipment:"full",programStartDate:"",activityLevel:"moderate",nutritionGoal:"recomp",vacations:[],showAdvancedMetrics:!1,dexaBodyFat:"",dexaLeanMass:"",dexaFatMass:"",dexaBMD:"",dexaScanDate:"",inbodyBodyFat:"",inbodySMM:"",inbodyTBW:"",inbodyBMR:"",inbodyScore:"",inbodyDate:"",measuredRMR:"",measuredRQ:"",rmrFacility:"",rmrDate:""}),ae=()=>O.programType==="lockin"?STEPS_LOCKIN:STEPS_STANDARD,je=ae();je.length;const ue=(I,pe)=>{q(se=>({...se,[I]:pe}))},te=(I,pe,se)=>{const Ee=(O.strengthGoals||[]).map(V=>V.id===I?{...V,[pe]:se}:V);ue("strengthGoals",Ee)};reactExports.useEffect(()=>{if(!O.name){const I=localStorage.getItem("motus_user_signup");if(I)try{const pe=JSON.parse(I);if(pe.name){ue("name",pe.name);return}}catch(pe){console.error("Error parsing signup data:",pe)}h&&ue("name",h.user_metadata?.full_name||h.email?.split("@")[0]||"")}},[h,O.name]);const Q=()=>{const I=ae();g<I.length&&(N(pe=>pe+1),window.scrollTo({top:0,behavior:"smooth"}))},xe=()=>{g>1&&(N(I=>I-1),window.scrollTo({top:0,behavior:"smooth"}))},ce=()=>{const I={id:Date.now(),name:"",startDate:"",endDate:""};ue("vacations",[...O.vacations,I])},F=(I,pe,se)=>{const ie=O.vacations.map(Ee=>Ee.id===I?{...Ee,[pe]:se}:Ee);ue("vacations",ie)},U=I=>{ue("vacations",O.vacations.filter(pe=>pe.id!==I))},K=()=>{if(O.heightUnit==="metric")return parseFloat(O.heightCm)||0;const I=parseFloat(O.heightFeet)||0,pe=parseFloat(O.heightInches)||0;return(I*12+pe)*2.54},ne=async()=>{A(!0);const I={...O,programType:O.programType||"strength",programSubtype:O.programSubtype||"powerlifting",desiredTrainingDays:parseInt(O.desiredTrainingDays)||4,strengthGoals:O.strengthGoals||STRENGTH_EXERCISES.map(ye=>({id:ye.id,label:ye.label,current:"",target:""}))},pe=I.weightUnit==="lbs"?parseFloat(I.weight)*.453592:parseFloat(I.weight),se=K();let ie,Ee="calculated";I.measuredRMR&&parseFloat(I.measuredRMR)>0?(ie=parseFloat(I.measuredRMR),Ee="measured"):I.inbodyBMR&&parseFloat(I.inbodyBMR)>0?(ie=parseFloat(I.inbodyBMR),Ee="inbody"):ie=calculateBMR(pe,se,parseInt(I.age)||30,I.sex);const V=getActivityMultiplier(I.desiredTrainingDays,I.activityLevel),D=Math.round(ie*V),G=calculateSmartMacros(D,I,parseFloat(I.weight)),Te={...I,weightKg:pe,heightCm:se,bmr:ie,bmrSource:Ee,tdee:D,macros:G};let ee=null;if(localStorage.getItem("motus_test_no_api")==="true")console.log("[TEST MODE] Bypassing API, using local program generator"),ee=generateFallbackProgram(I);else try{console.log("Calling API with profile:",I.programType,I.programSubtype);const ye=await fetch("/api/generate-program",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:I,macros:G,bmr:ie,tdee:D})});if(!ye.ok){const Ge=await ye.text();throw console.error("API error response:",Ge),new Error(`API error: ${ye.status}`)}ee=await ye.json(),console.log("API returned program:",ee?.name)}catch(ye){console.error("Error calling API, using fallback:",ye),ee=generateFallbackProgram(I)}(!ee||typeof ee!="object")&&(console.error("Invalid program after generation, creating minimal fallback"),ee=generateFallbackProgram(I)),ee={...ee,primaryGoal:ee.primaryGoal||I.programType,primarySubtype:ee.primarySubtype||I.programSubtype,daysPerWeek:ee.daysPerWeek||I.desiredTrainingDays,weeklySchedule:ee.weeklySchedule||[]};try{u({profile:Te,program:ee})}catch(ye){console.error("Error in onComplete:",ye),A(!1),alert("Error saving program. Please try again.")}},be=()=>{if(O.programType==="lockin")switch(g){case 1:return O.programType==="lockin";case 2:const pe=O.weight,se=O.heightUnit==="metric"?O.heightCm:O.heightFeet&&O.heightInches,ie=O.sex;return pe&&se&&ie;case 3:return!0;case 4:return!0;default:return!0}else switch(g){case 1:return O.programType&&O.programSubtype&&O.desiredTrainingDays;case 2:const pe=O.weight,se=O.heightUnit==="metric"?O.heightCm:O.heightFeet&&O.heightInches,ie=O.age,Ee=O.sex;return pe&&se&&ie&&Ee;case 3:return L();case 4:return!0;case 5:return!0;default:return!0}},L=()=>O.programType==="lockin"?!0:O.programType==="endurance"?O.programSubtype==="running"?O.raceDistance&&O.raceDate:O.programSubtype==="triathlon"?O.triathlonDistance&&O.raceDate:!0:O.programType==="strength"?!(!(O.strengthGoals||[]).some(se=>se.current1RM&&se.target1RM)||!O.strengthGoalDate):O.programType==="aesthetic"?O.targetBodyFat:O.programType==="fatloss"?O.targetWeight:!0;reactExports.useEffect(()=>{if(O.programType!=="strength"){M(null);return}const I=O.strengthGoals||[];if(!I.some(D=>D.current1RM&&D.target1RM)||!O.strengthGoalDate){M(null);return}const se=new Date,ie=new Date(O.strengthGoalDate),Ee=Math.max(1,Math.ceil((ie-se)/(1e3*60*60*24*7))),V=[];if(I.forEach(D=>{if(D.current1RM&&D.target1RM){const G=parseFloat(D.current1RM),ee=parseFloat(D.target1RM)-G,Ae=ee/Ee;Ae>10&&V.push({lift:D.label,weeklyIncrease:Ae.toFixed(1),totalIncrease:ee,weeks:Ee})}}),V.length>0){const D=V.map(G=>`${G.lift}: ${G.totalIncrease}lbs in ${G.weeks} weeks = ${G.weeklyIncrease}lbs/week`).join(`
`);M(`Your strength goals are not realistic. A maximum of ~10lbs/week 1RM increase is possible with optimal training.

${D}

Please extend your goal date or reduce your targets.`)}else M(null)},[O.programType,O.strengthGoals,O.strengthGoalDate]);const W=I=>{I.preventDefault(),z.current&&clearTimeout(z.current);const pe=_+1;J(pe),pe>=5?(J(0),me()):z.current=setTimeout(()=>J(0),3e3)},me=reactExports.useCallback(()=>{const I=window.prompt(`DEV TEST MODES:

1 = Skip onboarding (mock profile + program, no API calls)
2 = Normal onboarding but bypass all API calls (local generators only)
0 = Disable test mode

Enter 1, 2, or 0:`,"1");if(I==="1"){localStorage.setItem("motus_test_no_api","true");const pe=generateTestData();u(pe)}else I==="2"?(localStorage.setItem("motus_test_no_api","true"),alert(`Test mode 2 activated: API calls will be bypassed.
Proceeding with normal onboarding flow.`)):I==="0"&&(localStorage.removeItem("motus_test_no_api"),alert("Test mode disabled. API calls will work normally."))},[u]);return reactExports.useEffect(()=>{const I=pe=>{pe.ctrlKey&&pe.shiftKey&&pe.key==="T"&&(pe.preventDefault(),me())};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[me]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col",children:[jsxRuntimeExports.jsxs("header",{className:"px-6 pt-8 pb-4",children:[jsxRuntimeExports.jsx("h1",{className:"font-display text-3xl font-bold tracking-tight gradient-text cursor-pointer select-none",onClick:W,onTouchEnd:W,children:"MOTUS"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm mt-1",children:"Build your personalized program"}),_>=3&&jsxRuntimeExports.jsxs("p",{className:"text-accent-primary text-xs mt-1 animate-pulse",children:[5-_," more taps for dev menu..."]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-xs mt-1 hidden sm:block",children:"Tip: Press Ctrl+Shift+T for dev test modes"}),localStorage.getItem("motus_test_no_api")==="true"&&jsxRuntimeExports.jsx("p",{className:"text-amber-400 text-xs mt-1 font-medium",children:" TEST MODE: API calls bypassed"})]}),jsxRuntimeExports.jsx("div",{className:"px-6 py-4",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-2",children:je.map((I,pe)=>jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:`
                    w-10 h-10 rounded-xl flex items-center justify-center
                    transition-all duration-300
                    ${g>=I.id?"bg-accent-primary text-dark-900":g===I.id-1?"bg-dark-700 text-text-secondary border border-dark-500":"bg-dark-800 text-dark-400"}
                  `,children:jsxRuntimeExports.jsx(I.icon,{className:`w-5 h-5 ${g>=I.id?"stroke-[2.5]":""}`})}),jsxRuntimeExports.jsx("span",{className:`text-xs mt-1.5 hidden sm:block font-medium ${g>=I.id?"text-accent-primary":"text-dark-400"}`,children:I.title})]}),pe<je.length-1&&jsxRuntimeExports.jsx("div",{className:`flex-1 h-0.5 mx-2 transition-all duration-300 rounded-full ${g>I.id?"bg-accent-primary":"bg-dark-700"}`})]},I.id))})}),jsxRuntimeExports.jsx("div",{className:"flex-1 px-6 py-6 overflow-y-auto",children:O.programType==="lockin"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[g===1&&jsxRuntimeExports.jsx(StepProgramSelection,{formData:O,updateFormData:ue}),g===2&&jsxRuntimeExports.jsx(StepLockInQuickSetup,{formData:O,updateFormData:ue}),g===3&&jsxRuntimeExports.jsx(StepLockInCommitments,{formData:O,updateFormData:ue}),g===4&&jsxRuntimeExports.jsx(StepLockInGenerate,{formData:O,isGenerating:k,onGenerate:ne})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[g===1&&jsxRuntimeExports.jsx(StepProgramSelection,{formData:O,updateFormData:ue}),g===2&&jsxRuntimeExports.jsx(StepBodyStats,{formData:O,updateFormData:ue}),g===3&&jsxRuntimeExports.jsx(StepGoalDetails,{formData:O,updateFormData:ue,updateStrengthGoal:te,strengthGoalError:w}),g===4&&jsxRuntimeExports.jsx(StepVacations,{formData:O,addVacation:ce,updateVacation:F,removeVacation:U}),g===5&&jsxRuntimeExports.jsx(StepGenerate,{formData:O,isGenerating:k,onGenerate:ne})]})}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-5 border-t border-dark-700 flex justify-between bg-dark-900/95 backdrop-blur-sm",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",onClick:xe,disabled:g===1,className:"min-w-[100px]",children:[jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5 mr-1"}),"Back"]}),g<ae().length?jsxRuntimeExports.jsxs(Button,{onClick:Q,disabled:!be(),className:"min-w-[100px]",children:["Next",jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5 ml-1"})]}):null]}),jsxRuntimeExports.jsx(AdvancedMetricsModal,{isOpen:O.showAdvancedMetrics,onClose:()=>ue("showAdvancedMetrics",!1),formData:O,updateFormData:ue})]})}function getActivityMultiplier(u,h="moderate"){const x={sedentary:1.2,light:1.375,moderate:1.55,active:1.725},E={0:0,1:.05,2:.1,3:.15,4:.2,5:.25,6:.3,7:.35},j=x[h]||x.moderate,g=E[Math.min(u||0,7)]||0;return Math.min(j+g,2)}function calculateSmartMacros(u,h,x){let E,j,g,N;switch(h.nutritionGoal){case"maintain":E=u,j=Math.round(x*.8);break;case"recomp":E=u,j=Math.round(x*1);break;case"lose":const w=h.weeklyWeightChange*500;E=Math.round(u-w),j=Math.round(x*1);break;case"gain":const M=h.weeklyWeightChange*500;E=Math.round(u+M),j=Math.round(x*.9);break;default:E=u,j=Math.round(x*.8)}const k=j*4,A=E-k;return N=Math.round(A*.35/9),g=Math.round(A*.65/4),{calories:E,protein:j,carbs:g,fat:N}}function StepProgramSelection({formData:u,updateFormData:h}){const[x,E]=reactExports.useState(null),j={lockin:{icon:"",title:"30 Day Lock In",tagline:"Build momentum in 30 days",description:"A structured 30-day challenge designed to build habits and momentum. Simple, focused, no excuses.",whatToExpect:["6 days/week weightlifting with double progressive overload","3 days/week cardio (20-30 minutes)","Day 7: Active recovery (1 hour)","Daily commitments: workout, steps, water, protein"],timeCommitment:"7-10 hours/week",bestFor:"Anyone looking to build consistent habits and see quick results",hybrid:!1},endurance:{icon:"",title:"Endurance",tagline:"Train for distance and speed",description:"Periodized training for running, cycling, swimming, or triathlon. Built on proven race training methodology.",whatToExpect:["Base  Build  Peak  Taper periodization","Zone-based training (easy, tempo, threshold, intervals)","Strategic long runs/rides with progressive distance","Race-specific preparation and pacing"],timeCommitment:"4-10 hours/week depending on race distance",bestFor:"Runners, cyclists, swimmers, and triathletes training for events",hybrid:!0,hybridNote:"Can add Strength or Aesthetic as secondary goal"},strength:{icon:"",title:"Strength",tagline:"Powerbuilding - strength & muscle",description:"A powerbuilding program combining heavy compound lifts with hypertrophy work. Build real-world strength while looking the part.",whatToExpect:["Progressive overload on compound lifts (squat, bench, deadlift)","Periodized intensity (volume  intensity  peak)","Accessory work for weak points and muscle development","Strategic deloads every 4-6 weeks"],timeCommitment:"4-6 hours/week",bestFor:"Those who want to get strong and build muscle - the best of both worlds",hybrid:!1,hybridNote:"Strength requires dedicated focus - hybrid not recommended"},aesthetic:{icon:"",title:"Aesthetic",tagline:"Hypertrophy/Bodybuilding",description:"A hypertrophy-focused bodybuilding program for maximum muscle growth and physique development.",whatToExpect:["High-volume training with progressive overload","Strategic exercise selection for balanced development","Body recomposition nutrition strategy","Periodized volume and intensity"],timeCommitment:"5-7 hours/week",bestFor:"Bodybuilders, physique competitors, anyone focused on maximum muscle growth",hybrid:!1,hybridNote:"Aesthetic goals require dedicated volume - hybrid not recommended"}},g=k=>{if(h("programType",k),k==="lockin")h("programSubtype","lockin-standard"),h("desiredTrainingDays",6),h("enableHybrid",!1);else{const A=PROGRAM_TYPES.find(w=>w.id===k);A?.autoSelect&&A.subtypes.length===1?h("programSubtype",A.subtypes[0].id):h("programSubtype",""),k!=="endurance"&&(h("enableHybrid",!1),h("secondaryProgramType",""),h("secondarySubtype",""))}k==="aesthetic"&&h("nutritionGoal","recomp")},N=PROGRAM_TYPES.find(k=>k.id===u.programType);return jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Choose Your Program"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Select the program that matches your goals. Tap any card to learn more."})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:Object.entries(j).map(([k,A])=>jsxRuntimeExports.jsxs("div",{className:`rounded-xl border transition-all cursor-pointer overflow-hidden ${u.programType===k?"bg-accent-primary/10 border-accent-primary":"bg-dark-800 border-dark-600 hover:border-dark-400"}`,children:[jsxRuntimeExports.jsxs("div",{className:"p-4 flex items-start gap-4",onClick:()=>{g(k),E(k)},children:[jsxRuntimeExports.jsx("span",{className:"text-4xl",children:A.icon}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:A.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:A.tagline})]}),u.programType===k&&jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-accent-primary rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-dark-900",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})}),jsxRuntimeExports.jsx(ChevronRight,{className:`w-5 h-5 text-gray-500 transition-transform ${x===k?"rotate-90":""}`})]}),x===k&&jsxRuntimeExports.jsxs("div",{className:"px-4 pb-4 border-t border-dark-600 pt-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-sm mb-4",children:A.description}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium mb-1",children:"What to Expect:"}),jsxRuntimeExports.jsx("ul",{className:"text-gray-400 space-y-1",children:A.whatToExpect.map((w,M)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),w]},M))})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-4",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Time:"}),jsxRuntimeExports.jsx("span",{className:"text-white ml-2",children:A.timeCommitment})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Best for:"}),jsxRuntimeExports.jsx("span",{className:"text-gray-300 ml-2",children:A.bestFor})]}),A.hybridNote&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 italic",children:A.hybridNote})]}),jsxRuntimeExports.jsx("button",{onClick:w=>{w.stopPropagation(),g(k)},className:`mt-4 w-full py-3 rounded-lg font-medium transition-all ${u.programType===k?"bg-accent-primary text-dark-900":"bg-dark-600 text-white hover:bg-dark-500"}`,children:u.programType===k?"Selected":"Select This Program"})]})]},k))}),N&&u.programType!=="lockin"&&!N.autoSelect&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-800 rounded-xl border border-dark-600",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Select your specific focus:"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:N.subtypes.map(k=>jsxRuntimeExports.jsx("button",{onClick:()=>h("programSubtype",k.id),className:`px-4 py-3 rounded-lg border text-sm transition-all ${u.programSubtype===k.id?"bg-accent-secondary/20 border-accent-secondary text-white":"bg-dark-700 border-dark-500 text-gray-400 hover:border-gray-400"}`,children:k.label},k.id))}),u.programSubtype&&jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["How many days per week do you want to train?"," ",jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[u.desiredTrainingDays," days"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"2",max:"7",step:"1",value:u.desiredTrainingDays,onChange:k=>h("desiredTrainingDays",parseInt(k.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),jsxRuntimeExports.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[2,3,4,5,6,7].map(k=>jsxRuntimeExports.jsx("span",{children:k},k))})]}),u.programType==="endurance"&&u.programSubtype&&u.programSubtype!=="triathlon"&&jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium",children:"Enable Hybrid Training?"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Add strength or aesthetic as secondary goal"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>h("enableHybrid",!u.enableHybrid),className:`w-14 h-8 rounded-full transition-all ${u.enableHybrid?"bg-accent-primary":"bg-dark-600"}`,children:jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded-full bg-white transition-all ${u.enableHybrid?"translate-x-7":"translate-x-1"}`})})]}),u.enableHybrid&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("select",{value:u.secondaryProgramType,onChange:k=>{h("secondaryProgramType",k.target.value),h("secondarySubtype","")},className:"w-full px-4 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select secondary goal..."}),jsxRuntimeExports.jsx("option",{value:"strength",children:" Strength"}),jsxRuntimeExports.jsx("option",{value:"aesthetic",children:" Aesthetic"})]}),u.secondaryProgramType&&jsxRuntimeExports.jsxs("select",{value:u.secondarySubtype,onChange:k=>h("secondarySubtype",k.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select focus..."}),PROGRAM_TYPES.find(k=>k.id===u.secondaryProgramType)?.subtypes?.map(k=>jsxRuntimeExports.jsx("option",{value:k.id,children:k.label},k.id))]})]})]})]}),N?.autoSelect&&u.programType!=="lockin"&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-800 rounded-xl border border-dark-600",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["How many days per week do you want to train?"," ",jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[u.desiredTrainingDays," days"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"2",max:"7",step:"1",value:u.desiredTrainingDays,onChange:k=>h("desiredTrainingDays",parseInt(k.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),jsxRuntimeExports.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[2,3,4,5,6,7].map(k=>jsxRuntimeExports.jsx("span",{children:k},k))})]})]})}function StepLockInQuickSetup({formData:u,updateFormData:h}){return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Quick Setup"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Just a few details to calculate your nutrition targets."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Gender"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Used for accurate metabolic calculations"}),jsxRuntimeExports.jsx("div",{className:"flex gap-4",children:["male","female"].map(x=>jsxRuntimeExports.jsx("button",{onClick:()=>h("sex",x),className:`flex-1 py-3 px-4 rounded-lg border transition-all ${u.sex===x?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400 hover:border-gray-400"}`,children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weight"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.weight,onChange:x=>h("weight",x.target.value),placeholder:"Enter weight",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"}),jsxRuntimeExports.jsxs("select",{value:u.weightUnit,onChange:x=>h("weightUnit",x.target.value),className:"px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[jsxRuntimeExports.jsx("option",{value:"lbs",children:"lbs"}),jsxRuntimeExports.jsx("option",{value:"kg",children:"kg"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Height"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("heightUnit","imperial"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${u.heightUnit==="imperial"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"ft / in"}),jsxRuntimeExports.jsx("button",{onClick:()=>h("heightUnit","metric"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${u.heightUnit==="metric"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"cm"})]}),u.heightUnit==="imperial"?jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.heightFeet,onChange:x=>h("heightFeet",x.target.value),placeholder:"Feet",min:"3",max:"8",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.heightInches,onChange:x=>h("heightInches",x.target.value),placeholder:"Inches",min:"0",max:"11",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}):jsxRuntimeExports.jsx("input",{type:"number",value:u.heightCm,onChange:x=>h("heightCm",x.target.value),placeholder:"Height in cm",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Activity Level (outside of workouts)"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:[{id:"sedentary",label:"Sedentary",desc:"Desk job, minimal movement"},{id:"light",label:"Lightly Active",desc:"Some walking, light activity"},{id:"moderate",label:"Moderately Active",desc:"On feet most of day"},{id:"active",label:"Very Active",desc:"Physical job, always moving"}].map(x=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("activityLevel",x.id),className:`w-full p-3 rounded-lg border text-left ${u.activityLevel===x.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:x.label}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:x.desc})]},x.id))})]})]}),u.weight&&(u.heightFeet||u.heightCm)&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl border border-dark-600",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Estimated Daily Calories:"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:(()=>{const x=u.weightUnit==="lbs"?parseFloat(u.weight)*.453592:parseFloat(u.weight),E=u.heightUnit==="metric"?parseFloat(u.heightCm):((parseFloat(u.heightFeet)||0)*12+(parseFloat(u.heightInches)||0))*2.54,j=calculateBMR(x,E,30,u.sex||"male"),g=u.activityLevel==="sedentary"?1.2:u.activityLevel==="light"?1.375:u.activityLevel==="moderate"?1.55:u.activityLevel==="active"?1.725:1.55;return Math.round(j*g).toLocaleString()})()}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Based on Mifflin-St Jeor formula  Will be refined during your challenge"})]})]})}function StepLockInCommitments({formData:u,updateFormData:h}){return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Your Commitments"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Choose your daily commitments for the next 30 days."})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-500/10 to-red-500/10 rounded-xl border border-orange-500/30",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"30 Day Lock In Schedule"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("p",{children:" Days 1-6: Weightlifting (double progressive overload)"}),jsxRuntimeExports.jsx("p",{children:" 3x/week: Cardio (20-30 min)"}),jsxRuntimeExports.jsx("p",{children:" Day 7: Active recovery (1 hour)"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg border border-accent-primary/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"1hr Workout Daily"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Non-negotiable"})]})]}),jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-accent-primary rounded flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-dark-900",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:""}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Daily Steps Goal"})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:["10k","15k"].map(x=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("lockInSteps",x),className:`flex-1 py-2 px-4 rounded-lg border text-sm transition-all ${u.lockInSteps===x?"bg-accent-primary/20 border-accent-primary text-white":"bg-dark-600 border-dark-500 text-gray-400"}`,children:[x," steps"]},x))})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>h("lockInWater",!u.lockInWater),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all ${u.lockInWater?"bg-dark-700 border-accent-primary/50":"bg-dark-800 border-dark-600"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:""}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"1 Gallon Water Daily"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Stay hydrated"})]})]}),jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${u.lockInWater?"bg-accent-primary border-accent-primary":"border-dark-500"}`,children:u.lockInWater&&jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-dark-900",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>h("lockInProtein",!u.lockInProtein),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all ${u.lockInProtein?"bg-dark-700 border-accent-primary/50":"bg-dark-800 border-dark-600"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:""}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"High Protein + Whole Foods"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"1g protein per lb of ideal bodyweight"})]})]}),jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${u.lockInProtein?"bg-accent-primary border-accent-primary":"border-dark-500"}`,children:u.lockInProtein&&jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-dark-900",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 bg-dark-800 rounded-xl border border-dark-600",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Cardio & Rest Day:"})," You'll choose your cardio type and rest day activity each day from the home screen. Cardio is 20-30 min, and Day 7 active recovery is 1 hour."]})})]})}function StepLockInGenerate({formData:u,isGenerating:h,onGenerate:x}){return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Ready to Lock In"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Your AI-powered 30 Day Challenge is ready to generate."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:"Your 30 Day Commitment"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"6 days/week weightlifting (double progressive overload)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"1hr Workout Daily"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[u.lockInSteps||"10k"," Steps Daily"]})]}),u.lockInWater&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"1 Gallon Water Daily"})]}),u.lockInProtein&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"High Protein + Whole Foods"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Cardio 3x/week (20-30 min)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Day 7: Active Recovery (1 hour)"})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-dark-600"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Program Features"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-white mt-1 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" Double progressive overload built-in"}),jsxRuntimeExports.jsx("li",{children:" Daily structure and accountability"}),jsxRuntimeExports.jsx("li",{children:" Cardio and active recovery programmed"}),jsxRuntimeExports.jsx("li",{children:" 30 days of focused habit building"})]})]})]}),jsxRuntimeExports.jsx(Button,{fullWidth:!0,size:"lg",onClick:x,disabled:h,className:h?"animate-pulse":"",children:h?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"animate-spin mr-2",children:""}),"Generating Your Program..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5 mr-2"}),"Generate My Program"]})})]})}function StepBodyStats({formData:u,updateFormData:h}){return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Body Measurements"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Help us understand your current fitness level."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Gender"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Used for accurate metabolic calculations"}),jsxRuntimeExports.jsx("div",{className:"flex gap-4",children:["male","female"].map(x=>jsxRuntimeExports.jsx("button",{onClick:()=>h("sex",x),className:`flex-1 py-3 px-4 rounded-lg border transition-all ${u.sex===x?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400 hover:border-gray-400"}`,children:x.charAt(0).toUpperCase()+x.slice(1)},x))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weight"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.weight,onChange:x=>h("weight",x.target.value),placeholder:"Enter weight",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"}),jsxRuntimeExports.jsxs("select",{value:u.weightUnit,onChange:x=>h("weightUnit",x.target.value),className:"px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[jsxRuntimeExports.jsx("option",{value:"lbs",children:"lbs"}),jsxRuntimeExports.jsx("option",{value:"kg",children:"kg"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Height"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("heightUnit","imperial"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${u.heightUnit==="imperial"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"ft / in"}),jsxRuntimeExports.jsx("button",{onClick:()=>h("heightUnit","metric"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${u.heightUnit==="metric"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"cm"})]}),u.heightUnit==="imperial"?jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.heightFeet,onChange:x=>h("heightFeet",x.target.value),placeholder:"Feet",min:"3",max:"8",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.heightInches,onChange:x=>h("heightInches",x.target.value),placeholder:"Inches",min:"0",max:"11",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}):jsxRuntimeExports.jsx("input",{type:"number",value:u.heightCm,onChange:x=>h("heightCm",x.target.value),placeholder:"Height in cm",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Age"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.age,onChange:x=>h("age",x.target.value),placeholder:"Enter your age",min:"16",max:"100",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700/50 rounded-xl border border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium mb-1",children:"Have Professional Data?"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Enter DEXA scan, InBody, or RMR test results for more accurate calculations."})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>h("showAdvancedMetrics",!0),className:"px-3 py-1.5 bg-accent-secondary/20 text-accent-secondary text-sm font-medium rounded-lg hover:bg-accent-secondary/30 transition-colors whitespace-nowrap",children:"+ Advanced"})]}),(u.dexaBodyFat||u.inbodyBodyFat||u.measuredRMR)&&jsxRuntimeExports.jsx("div",{className:"mt-3 pt-3 border-t border-dark-600",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-accent-primary",children:[" Advanced metrics on file",u.measuredRMR&&`  RMR: ${u.measuredRMR} kcal`,(u.dexaBodyFat||u.inbodyBodyFat)&&`  BF: ${u.dexaBodyFat||u.inbodyBodyFat}%`]})})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Training History"}),jsxRuntimeExports.jsxs("div",{className:"mb-5",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["How many days per week have you been training? ",jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[u.currentTrainingDays," days"]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Average over the last 30 days"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"7",step:"1",value:u.currentTrainingDays,onChange:x=>h("currentTrainingDays",parseInt(x.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),jsxRuntimeExports.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[0,1,2,3,4,5,6,7].map(x=>jsxRuntimeExports.jsx("span",{children:x},x))})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"How consistent has your training been?"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"none",label:"New to Training",desc:"Just starting out"},{id:"some",label:"Some Experience",desc:"On and off"},{id:"consistent",label:"Consistent",desc:"Regular routine"}].map(x=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("trainingHistory",x.id),className:`p-3 rounded-lg border text-center ${u.trainingHistory===x.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-white text-sm font-medium block",children:x.label}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:x.desc})]},x.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Years of training experience: ",jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[u.yearsTraining," ",u.yearsTraining===1?"year":"years"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:u.yearsTraining,onChange:x=>h("yearsTraining",parseInt(x.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[jsxRuntimeExports.jsx("span",{children:"New"}),jsxRuntimeExports.jsx("span",{children:"5 yrs"}),jsxRuntimeExports.jsx("span",{children:"10+ yrs"})]})]})]})]})]})}function StepGoalDetails({formData:u,updateFormData:h,updateStrengthGoal:x,strengthGoalError:E}){const j=u||{},g=j.programType||"",N=j.programSubtype||"",k=()=>{const w=parseInt(j.yearsTraining)||0;return w<1?"beginner":w<3?"intermediate":w<6?"advanced":"elite"};if(g==="lockin")return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Your 30 Day Lock In"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Review your commitments before we build your program."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-3",children:"Your Weekly Schedule:"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Days 1-6:"}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Weightlifting + Light Cardio"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Day 7:"}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Active Recovery (1 hour)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Cardio (3x/week):"}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Your choice (20-30 min)"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-3",children:"Daily Commitments:"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"1hr Workout (Non-negotiable)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[j.lockInSteps," Steps Daily"]})]}),j.lockInWater&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"1 Gallon Water"})]}),j.lockInProtein&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[j.lockInIdealWeight?`${j.lockInIdealWeight}g Protein`:"High Protein"," + Whole Foods"]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-orange-500/10 to-red-500/10 rounded-xl border border-orange-500/30",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300 text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl block mb-2",children:""}),"30 days to build the habits that change everything.",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:" No excuses. No shortcuts."})]})})]})]});if(g==="strength")return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Goal Details"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Help us tailor your program to your specific targets."})]}),jsxRuntimeExports.jsx(StrengthGoalsForm,{strengthGoals:j.strengthGoals,strengthGoalDate:j.strengthGoalDate,programStartDate:j.programStartDate,nutritionGoal:j.nutritionGoal,experienceLevel:k(),bodyFatPercent:j.bodyFatPercent,onUpdateGoal:x,onUpdateDate:w=>h("strengthGoalDate",w),onUpdateStartDate:w=>h("programStartDate",w),onUpdateNutrition:w=>h("nutritionGoal",w)}),E&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-4 bg-red-900/20 border border-red-700 rounded-xl",children:[jsxRuntimeExports.jsx("h4",{className:"text-red-400 font-semibold mb-2",children:"Unrealistic Goals Detected"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:E})]}),jsxRuntimeExports.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Add Cardio for Heart Health?"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Adding 2-3 days of easy cardio improves cardiovascular health and recovery without interfering with your strength gains."}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("includeCardio",!j.includeCardio),className:`relative w-12 h-6 rounded-full transition-colors ${j.includeCardio?"bg-accent-primary":"bg-dark-600"}`,children:jsxRuntimeExports.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform ${j.includeCardio?"left-6":"left-0.5"}`})}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Include cardio in my program"})]}),j.includeCardio&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 p-4 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cardio Type"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:SECONDARY_CARDIO_OPTIONS.map(w=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("cardioType",w.id),className:`p-3 rounded-lg border text-center ${j.cardioType===w.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-600 border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-2xl block mb-1",children:w.icon}),jsxRuntimeExports.jsx("span",{className:"text-white text-sm",children:w.label})]},w.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Days per Week"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:[2,3].map(w=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("cardioDaysPerWeek",w),className:`flex-1 py-2 rounded-lg border ${j.cardioDaysPerWeek===w?"bg-accent-primary/20 border-accent-primary text-white":"bg-dark-600 border-dark-500 text-gray-400"}`,children:[w," days"]},w))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Cardio sessions will be scheduled on rest days or as double days (AM/PM splits)"})]})]})]})]});const A=()=>{if(g==="endurance")return N==="marathon"||N==="running"?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:" Race Details"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Distance"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:RACE_DISTANCES.map(w=>jsxRuntimeExports.jsx("button",{onClick:()=>h("raceDistance",w.id),className:`py-3 px-2 rounded-lg border text-sm ${u.raceDistance===w.id?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:w.label},w.id))}),u.raceDistance==="ultra"&&jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ultra Distance (miles)"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.ultraDistance||"",onChange:w=>h("ultraDistance",w.target.value),placeholder:"e.g., 50, 100",min:"30",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Common distances: 50K (31mi), 50mi, 100K (62mi), 100mi"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:u.raceDate,min:getTodayString(),onChange:w=>h("raceDate",w.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Finish Time"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.targetFinishHours,onChange:w=>h("targetFinishHours",w.target.value),placeholder:"Hours",min:"0",max:"24",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.targetFinishMinutes,onChange:w=>h("targetFinishMinutes",w.target.value),placeholder:"Min",min:"0",max:"59",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Minutes"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.targetFinishSeconds,onChange:w=>h("targetFinishSeconds",w.target.value),placeholder:"Sec",min:"0",max:"59",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Seconds"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Weekly Mileage"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.currentWeeklyMileage,onChange:w=>h("currentWeeklyMileage",w.target.value),placeholder:"e.g., 20",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h4",{className:"text-md font-semibold text-white mb-2",children:" Current Fitness Baseline"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Enter a recent race or time trial so we can calculate your training paces accurately."}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reference Race Distance"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:BASELINE_RACE_DISTANCES.map(w=>jsxRuntimeExports.jsx("button",{onClick:()=>h("baselineRaceDistance",w.id),className:`py-2 px-2 rounded-lg border text-sm ${u.baselineRaceDistance===w.id?"bg-accent-secondary border-accent-secondary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:w.label},w.id))})]}),u.baselineRaceDistance&&jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Your Best Recent ",u.baselineRaceDistance.toUpperCase()," Time"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.baselineTimeHours,onChange:w=>h("baselineTimeHours",w.target.value),placeholder:"Hr",min:"0",max:"10",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.baselineTimeMinutes,onChange:w=>h("baselineTimeMinutes",w.target.value),placeholder:"Min",min:"0",max:"59",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Min"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.baselineTimeSeconds,onChange:w=>h("baselineTimeSeconds",w.target.value),placeholder:"Sec",min:"0",max:"59",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Sec"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Longest Run in Past Month (miles)"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.longestRecentRun,onChange:w=>h("longestRecentRun",w.target.value),placeholder:"e.g., 10",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]})]})]}):N==="triathlon"?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:" Triathlon Details"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Distance"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:TRIATHLON_DISTANCES.map(w=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("triathlonDistance",w.id),className:`w-full p-3 rounded-lg border text-left ${u.triathlonDistance===w.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:w.label}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:w.description})]},w.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:u.raceDate,min:getTodayString(),onChange:w=>h("raceDate",w.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Finish Time"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.targetFinishHours,onChange:w=>h("targetFinishHours",w.target.value),placeholder:"Hours",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.targetFinishMinutes,onChange:w=>h("targetFinishMinutes",w.target.value),placeholder:"Min",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Minutes"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:u.targetFinishSeconds,onChange:w=>h("targetFinishSeconds",w.target.value),placeholder:"Sec",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Seconds"})]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:" Endurance Goals"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Set your performance targets"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Event Date (Optional)"}),jsxRuntimeExports.jsx("input",{type:"date",value:u.raceDate,min:getTodayString(),onChange:w=>h("raceDate",w.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weekly Training Volume Goal"}),jsxRuntimeExports.jsx("input",{type:"text",value:u.currentWeeklyMileage,onChange:w=>h("currentWeeklyMileage",w.target.value),placeholder:"e.g., 100 miles, 10 hours",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]})]});if(g==="aesthetic"){const w=parseFloat(u.bodyFatPercent)||0,M=parseFloat(u.targetBodyFat)||0,_=w-M;return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:" Physique Goals"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Set your body composition targets"}),u.bodyFatPercent&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-dark-700/50 rounded-lg border border-dark-600",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:["Current Body Fat: ",jsxRuntimeExports.jsxs("span",{className:"text-white font-medium",children:[u.bodyFatPercent,"%"]})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Body Fat %"}),jsxRuntimeExports.jsx("input",{type:"number",value:u.targetBodyFat,onChange:J=>h("targetBodyFat",J.target.value),placeholder:"e.g., 12",min:"5",max:"50",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: 10-15% for men, 18-24% for women for a lean physique"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Date (Optional)"}),jsxRuntimeExports.jsx("input",{type:"date",value:u.aestheticGoalDate,min:getTodayString(),onChange:J=>h("aestheticGoalDate",J.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),w>0&&M>0&&_>0&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-white",children:[" You're looking to reduce body fat by"," ",jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[_.toFixed(1),"%"]})]})}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-lg border border-accent-primary/20",children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium mb-2",children:" Recomp Strategy"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300",children:["Your nutrition is set to ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary font-medium",children:"recomp"})," (body recomposition). This means eating at maintenance with high protein, slightly lower on rest days, and slightly higher on training days to maximize muscle gain while losing fat."]})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-semibold mb-2",children:" Add Cardio for Heart Health?"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Light cardio improves cardiovascular health and can help with fat loss without impacting your muscle-building goals."}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("includeCardio",!u.includeCardio),className:`relative w-12 h-6 rounded-full transition-colors ${u.includeCardio?"bg-accent-primary":"bg-dark-600"}`,children:jsxRuntimeExports.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform ${u.includeCardio?"left-6":"left-0.5"}`})}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Include cardio in my program"})]}),u.includeCardio&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 p-4 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cardio Type"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:SECONDARY_CARDIO_OPTIONS.map(J=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("cardioType",J.id),className:`p-3 rounded-lg border text-center ${u.cardioType===J.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-600 border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-2xl block mb-1",children:J.icon}),jsxRuntimeExports.jsx("span",{className:"text-white text-sm",children:J.label})]},J.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Days per Week"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:[2,3].map(J=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("cardioDaysPerWeek",J),className:`flex-1 py-2 rounded-lg border ${u.cardioDaysPerWeek===J?"bg-accent-primary/20 border-accent-primary text-white":"bg-dark-600 border-dark-500 text-gray-400"}`,children:[J," days"]},J))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Cardio sessions will be scheduled on rest days or as double days"})]})]})]})]})}if(g==="fatloss"){const w=parseFloat(u.weight)||0,M=parseFloat(u.targetWeight)||w,_=w-M,J=_/u.weeklyWeightChange;return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:" Fat Loss Goals"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Target Weight (",u.weightUnit,")"]}),jsxRuntimeExports.jsx("input",{type:"number",value:u.targetWeight,onChange:z=>h("targetWeight",z.target.value),placeholder:"Enter target weight",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Weekly Weight Loss Rate: ",u.weeklyWeightChange," lbs/week"]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0.25",max:"1",step:"0.25",value:u.weeklyWeightChange,onChange:z=>h("weeklyWeightChange",parseFloat(z.target.value)),className:"w-full"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[jsxRuntimeExports.jsx("span",{children:"Slow (0.25)"}),jsxRuntimeExports.jsx("span",{children:"Moderate (0.5)"}),jsxRuntimeExports.jsx("span",{children:"Aggressive (1.0)"})]})]}),_>0&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-white",children:[" At this rate, you'll reach your goal in approximately"," ",jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[Math.ceil(J)," weeks"]})]})})]})}return null};return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Goal Details"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Help us tailor your program to your specific targets."})]}),A(),E&&g==="strength"&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-4 bg-accent-danger/10 border border-accent-danger/30 rounded-xl",children:[jsxRuntimeExports.jsxs("h4",{className:"text-accent-danger font-semibold mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Unrealistic Goals Detected"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary whitespace-pre-line",children:E}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted mt-3",children:"MOTUS cannot produce a plan with unrealistic goals. Please adjust your targets or extend your timeline."})]}),jsxRuntimeExports.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Program Start Date"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mb-3",children:"When would you like to begin your program?"}),jsxRuntimeExports.jsx("input",{type:"date",value:u.programStartDate,min:getTodayString(),onChange:w=>h("programStartDate",w.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Leave blank to start today"})]}),jsxRuntimeExports.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Nutrition Goal"}),g==="aesthetic"?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-accent-primary/20 border border-accent-primary rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Body Recomposition"}),jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-primary/30 text-accent-primary rounded",children:"Optimal for Aesthetics"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Simultaneously lose fat while building/maintaining muscle through strategic nutrition timing and macros."})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:[jsxRuntimeExports.jsx("strong",{className:"text-gray-300",children:"Recomp Strategy:"})," Eat at maintenance calories with high protein (1g/lb bodyweight). Slight deficit on rest days, slight surplus on training days. This approach maximizes muscle retention while losing fat."]})})]}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"maintain",label:"Maintain",desc:"Keep current weight"},{id:"recomp",label:"Recomp",desc:"Lose fat, keep muscle"},{id:"lose",label:"Lose Weight",desc:"Calorie deficit"},{id:"gain",label:"Gain Weight",desc:"Calorie surplus"}].map(w=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("nutritionGoal",w.id),className:`p-3 rounded-lg border text-left ${u.nutritionGoal===w.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:w.label}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:w.desc})]},w.id))}),g!=="aesthetic"&&u.nutritionGoal==="recomp"&&jsxRuntimeExports.jsx("div",{className:"mt-3 p-3 bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:[jsxRuntimeExports.jsx("strong",{className:"text-gray-300",children:"Recomp Strategy:"})," Eat at maintenance with high protein (1g/lb bodyweight). Slight deficit on rest days, slight surplus on training days."]})})]})]})}function StepVacations({formData:u,addVacation:h,updateVacation:x,removeVacation:E}){return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Vacations & Time Off"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Add planned time off so we can align deload weeks and adjust your program."})]}),u.vacations.length>0&&jsxRuntimeExports.jsx("div",{className:"space-y-3",children:u.vacations.map((j,g)=>jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg border border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:["Trip #",g+1]}),jsxRuntimeExports.jsx("button",{onClick:()=>E(j.id),className:"p-1 text-gray-500 hover:text-accent-danger",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("input",{type:"text",value:j.name,onChange:N=>x(j.id,"name",N.target.value),placeholder:"Trip name",className:"w-full px-3 py-2 mb-3 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-text-muted",children:"Start Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:j.startDate,min:getTodayString(),onChange:N=>x(j.id,"startDate",N.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-text-muted",children:"End Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:j.endDate,min:j.startDate||getTodayString(),onChange:N=>x(j.id,"endDate",N.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"})]})]})]},j.id))}),jsxRuntimeExports.jsxs("button",{onClick:h,className:"w-full p-4 border-2 border-dashed border-dark-500 rounded-lg hover:border-accent-primary transition-colors flex items-center justify-center gap-2 text-gray-400 hover:text-white",children:[jsxRuntimeExports.jsx(Plus,{className:"w-5 h-5"}),"Add Time Off"]})]})}function StepGenerate({formData:u,isGenerating:h,onGenerate:x}){const E=PROGRAM_TYPES.find(N=>N.id===u.programType),j=E?.subtypes.find(N=>N.id===u.programSubtype),g=()=>{if(u.programType==="endurance"&&u.raceDate){const N=new Date(u.raceDate),A=Math.ceil((N-new Date)/(10080*60*1e3)),w=[u.targetFinishHours,u.targetFinishMinutes,u.targetFinishSeconds].filter(Boolean).join(":");return`${A} weeks to race day${w?`  Target: ${w}`:""}`}return u.programType==="strength"?`${(u.strengthGoals||[]).filter(k=>k.target1RM&&k.current1RM).length} lift targets set`:u.programType==="aesthetic"&&u.targetBodyFat?`Target: ${u.targetBodyFat}% body fat`:u.programType==="fatloss"&&u.targetWeight?`~${Math.ceil((parseFloat(u.weight)-parseFloat(u.targetWeight))/u.weeklyWeightChange)} weeks to ${u.targetWeight} ${u.weightUnit}`:"Ongoing optimization"};return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Ready to Generate"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Your AI-powered program will be optimized for your goals."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:"Your Profile Summary"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Name"}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:u.name})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Stats"}),jsxRuntimeExports.jsxs("p",{className:"text-white font-medium",children:[u.weight," ",u.weightUnit,"  ",u.heightFeet,"'",u.heightInches,'"']})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-dark-600"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Primary Goal"}),jsxRuntimeExports.jsxs("p",{className:"text-white font-medium",children:[E?.icon," ",E?.title,": ",j?.label]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Goal"}),jsxRuntimeExports.jsx("p",{className:"text-accent-primary font-medium",children:g()})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Training Schedule"}),jsxRuntimeExports.jsxs("p",{className:"text-white font-medium",children:[u.desiredTrainingDays," days/week"]})]}),u.enableHybrid&&u.secondaryProgramType&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Secondary Goal"}),jsxRuntimeExports.jsxs("p",{className:"text-white font-medium",children:[PROGRAM_TYPES.find(N=>N.id===u.secondaryProgramType)?.icon," ",u.secondarySubtype]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Program Features"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-white mt-1 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" Auto-periodization (Base  Build  Peak)"}),jsxRuntimeExports.jsx("li",{children:" Progressive overload built-in"}),jsxRuntimeExports.jsx("li",{children:" Deload weeks every 5 weeks"}),jsxRuntimeExports.jsx("li",{children:" Dynamic adjustments based on progress"})]})]})]}),jsxRuntimeExports.jsx(Button,{fullWidth:!0,size:"lg",onClick:x,disabled:h,className:h?"animate-pulse":"",children:h?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"animate-spin mr-2",children:""}),"Generating Your Program..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5 mr-2"}),"Generate My Program"]})})]})}function generateFallbackProgram(u){try{console.log("Generating fallback program with formData:",u);const h=generateProgram(u);if(!h||!h.weeklySchedule)throw console.error("Fallback program generation returned invalid program:",h),new Error("Invalid program generated");return h}catch(h){return console.error("Error in generateFallbackProgram:",h),{name:`${u.programType||"Fitness"} Program`,description:"Your personalized training program",mesocycleWeeks:4,currentWeek:1,currentPhase:"Base",phases:["Base","Build","Peak","Deload"],primaryGoal:u.programType||"strength",primarySubtype:u.programSubtype||"general",daysPerWeek:u.desiredTrainingDays||4,weeklySchedule:[{day:1,dayName:"Monday",name:"Training Day 1",isRestDay:!1,isDeload:!1,sessions:[]},{day:2,dayName:"Tuesday",name:"Training Day 2",isRestDay:!1,isDeload:!1,sessions:[]},{day:3,dayName:"Wednesday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]},{day:4,dayName:"Thursday",name:"Training Day 3",isRestDay:!1,isDeload:!1,sessions:[]},{day:5,dayName:"Friday",name:"Training Day 4",isRestDay:!1,isDeload:!1,sessions:[]},{day:6,dayName:"Saturday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]},{day:7,dayName:"Sunday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]}],generatedAt:new Date().toISOString(),error:"Program generation failed - using minimal template"}}}function SetupWizardWithErrorBoundary(u){return jsxRuntimeExports.jsx(SetupErrorBoundary,{children:jsxRuntimeExports.jsx(SetupWizard,{...u})})}const MET_VALUES={running_easy:8,running_moderate:10,running_hard:12.5,running_sprint:15,cycling_easy:6,cycling_moderate:8,cycling_hard:12,swimming_easy:6,swimming_moderate:8,swimming_hard:10,walking:3.5,hiking:6,elliptical:5,rowing:7,jump_rope:11,stair_climbing:9,strength_light:3,strength_moderate:5,strength_vigorous:6,bodyweight:4,hiit:8,circuit_training:8,crossfit:8,yoga:2.5,pilates:3,stretching:2,rest:1},WORKOUT_TYPE_TO_MET={marathon:"running_moderate",running:"running_moderate",cycling:"cycling_moderate",swimming:"swimming_moderate",triathlon:"running_moderate",cardio:"elliptical",strength:"strength_moderate",bodybuilding:"strength_moderate",olympic:"strength_vigorous",bodyweight:"bodyweight",maintenance:"strength_light",hiit:"hiit",wellness:"strength_light",mobility:"yoga",functional:"circuit_training",active:"walking"};function calculateCaloriesBurned(u,h,x,E=7){const j=u*.453592;let g=WORKOUT_TYPE_TO_MET[h]||"strength_moderate",N=MET_VALUES[g]||5;const k=.85+(E-6)*.075;N*=k;const A=x/60;return Math.round(N*j*A)}function estimateDailyCalories(u,h="moderate",x=0){const j={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[h]||1.55,g=Math.round(u*j),N=g+x;return{bmr:Math.round(u),neat:Math.round(g-u),workoutCalories:x,totalDailyBurn:N,remaining:N}}function estimateEODCalories(u,h,x=[],E=[],j=150){const{totalDailyBurn:g}=estimateDailyCalories(u,h,0),N=x.reduce((A,w)=>A+calculateCaloriesBurned(j,w.type,w.duration,w.rpe||7),0),k=E.reduce((A,w)=>A+calculateCaloriesBurned(j,w.type,w.duration||60,7),0);return g+N+k}function Dashboard({profile:u,program:h,meals:x,workouts:E,todaysMeals:j,todaysWorkouts:g,isSubscribed:N=!0,onLogMeal:k,onLogWorkout:A,onViewProgram:w,onViewNutrition:M,onShowPaywall:_,onCreateMealPlan:J}){const{macros:z,bmr:O,tdee:q}=u,ae=u.weightUnit==="kg"?u.weight/.453592:parseFloat(u.weight),je=j.reduce((se,ie)=>({calories:se.calories+(ie.calories||0),protein:se.protein+(ie.protein||0),carbs:se.carbs+(ie.carbs||0),fat:se.fat+(ie.fat||0)}),{calories:0,protein:0,carbs:0,fat:0}),ue=g.reduce((se,ie)=>se+calculateCaloriesBurned(ae,ie.type||h?.primarySubtype||"strength",ie.duration||60,ie.overallRpe||7),0),te=h?.startDate?new Date(h.startDate):null;te&&te.setHours(0,0,0,0);const Q=new Date;Q.setHours(0,0,0,0);const xe=!te||te<=Q,ce=te&&te.getTime()===Q.getTime(),F=te?Math.ceil((te-Q)/(1e3*60*60*24)):0,U=()=>{if(!h)return null;const{primaryGoal:se,primarySubtype:ie,paces:Ee,baseline:V}=h;if(se==="endurance")return Ee?.goalPace?`Your goal: ${Ee.goalPace} pace for ${ie}`:`Building your ${ie} endurance`;if(se==="strength"&&V?.strength?.lifts?.length>0){const D=V.strength.lifts[0];return`Your goal: ${D.exercise} from ${D.current1RM}lbs  ${D.target1RM}lbs`}return se==="aesthetic"?`Building lean muscle with ${h.daysPerWeek} training days/week`:`${h.totalWeeks} weeks of structured training ahead`},K=new Date().getDay()||7,ne=xe?h?.weeklySchedule?.find(se=>se.day===K):null,be=ne?.sessions||[],L=g.map(se=>se.sessionTime),W=be.filter(se=>!L.includes(se.time)),me=xe&&ne&&!ne.isRestDay,I=estimateEODCalories(O||1800,u.activityLevel||"moderate",g.map(se=>({type:se.type||h?.primarySubtype,duration:se.duration,rpe:se.overallRpe})),me?W.map(se=>({type:se.type||h?.primarySubtype,duration:se.duration})):[],ae);estimateDailyCalories(O||1800,u.activityLevel,me?ue:0),me&&W.reduce((se,ie)=>se+calculateCaloriesBurned(ae,ie.type||h?.primarySubtype,ie.duration||60,7),0),je.calories-I;const pe=typeof window<"u"&&localStorage.getItem("motus_test_no_api")==="true";return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-24",children:[pe&&jsxRuntimeExports.jsx("div",{className:"bg-amber-500/20 border-b border-amber-500/30 px-4 py-2 text-center",children:jsxRuntimeExports.jsxs("span",{className:"text-amber-400 text-xs font-medium",children:[" TEST MODE  API calls bypassed "," ",jsxRuntimeExports.jsx("button",{onClick:()=>{localStorage.removeItem("motus_test_no_api"),window.location.reload()},className:"underline hover:text-amber-300",children:"Disable"})]})}),jsxRuntimeExports.jsx("header",{className:"px-6 pt-8 pb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-text-muted text-sm font-medium uppercase tracking-wider mb-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:u.name?.split(" ")[0]||"Athlete"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3",children:jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider",children:"Week"}),jsxRuntimeExports.jsx("p",{className:"text-xl font-display font-bold text-accent-primary",children:h?.currentWeek||1})]})})]})}),jsxRuntimeExports.jsxs("div",{className:"px-6 space-y-5",children:[N&&jsxRuntimeExports.jsx(Card,{hover:!0,onClick:J,className:"bg-gradient-to-r from-accent-success/10 to-accent-primary/10 border-accent-success/30",children:jsxRuntimeExports.jsx(CardBody,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-accent-success/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(Apple,{className:"w-5 h-5 text-accent-success"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-white text-sm flex items-center gap-2",children:["Create Your Meal Plan",jsxRuntimeExports.jsx(Sparkles,{className:"w-3 h-3 text-accent-primary"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Personalized recipes and shopping list"})]}),jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4 text-gray-500"})]})})}),jsxRuntimeExports.jsx(Card,{hover:!0,onClick:M,className:"overflow-hidden",children:jsxRuntimeExports.jsxs(CardBody,{className:"p-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-dark-600",children:[jsxRuntimeExports.jsxs("h2",{className:"font-semibold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Flame,{className:"w-4 h-4 text-accent-primary"}),"Today's Nutrition"]}),jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4 text-dark-400"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 divide-x divide-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mb-1",children:"Target"}),jsxRuntimeExports.jsx("p",{className:"font-display text-xl font-bold text-white",children:z?.calories||q})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mb-1",children:"Eaten"}),jsxRuntimeExports.jsx("p",{className:"font-display text-xl font-bold text-accent-success",children:je.calories})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 text-center bg-dark-700/50",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mb-1",children:"Left"}),jsxRuntimeExports.jsx("p",{className:`font-display text-xl font-bold ${(z?.calories||q)-je.calories>0?"text-accent-primary":"text-accent-danger"}`,children:(z?.calories||q)-je.calories})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 space-y-2 border-t border-dark-600",children:[jsxRuntimeExports.jsx(MacroBar,{label:"Protein",current:je.protein,target:z.protein,color:"primary"}),jsxRuntimeExports.jsx(MacroBar,{label:"Carbs",current:je.carbs,target:z.carbs,color:"warning"}),jsxRuntimeExports.jsx(MacroBar,{label:"Fat",current:je.fat,target:z.fat,color:"secondary"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",onClick:k,className:"py-4",children:[jsxRuntimeExports.jsx(Utensils,{className:"w-5 h-5 mr-2"}),"Log Meal"]}),jsxRuntimeExports.jsxs(Button,{variant:"secondary",onClick:A,className:"py-4",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-5 h-5 mr-2"}),"Log Workout"]})]}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"p-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-dark-600",children:[jsxRuntimeExports.jsxs("h2",{className:"font-semibold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-5 h-5 text-accent-primary"}),"Today's Training"]}),ue>0&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-text-muted",children:[jsxRuntimeExports.jsx(Flame,{className:"w-4 h-4 inline mr-1 text-accent-danger"}),ue," kcal"]})]}),jsxRuntimeExports.jsx("div",{className:"p-5",children:ce?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center py-4",children:[jsxRuntimeExports.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-accent-primary/30 to-accent-secondary/30 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-accent-primary animate-pulse",children:jsxRuntimeExports.jsx("span",{className:"text-5xl",children:""})}),jsxRuntimeExports.jsx("h3",{className:"font-display text-2xl font-bold text-accent-primary mb-2",children:"Today is the Day!"}),jsxRuntimeExports.jsxs("p",{className:"text-white font-semibold mb-3",children:["Week 1 of your ",h?.totalWeeks,"-week journey begins now"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary max-w-xs mx-auto",children:U()})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-accent-success/10 to-accent-primary/10 rounded-xl p-4 border border-accent-success/30",children:jsxRuntimeExports.jsxs("p",{className:"text-center text-sm text-text-secondary",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-success font-semibold",children:"Stay the course"})," and this program will get you to your goal. Trust the process, show up every day, and the results will follow."]})}),ne&&!ne.isRestDay&&jsxRuntimeExports.jsxs(Button,{variant:"primary",className:"w-full",onClick:w,children:[jsxRuntimeExports.jsx(Play,{className:"w-4 h-4 mr-2"}),"Start Your First Workout"]})]}):!xe&&te?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center py-4",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-accent-primary/20 to-accent-secondary/20 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-accent-primary/30",children:jsxRuntimeExports.jsx("span",{className:"text-4xl",children:""})}),jsxRuntimeExports.jsxs("p",{className:"font-display text-3xl font-bold text-accent-primary mb-1",children:[F," ",F===1?"Day":"Days"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-muted mb-2",children:"until your program begins"}),jsxRuntimeExports.jsxs("p",{className:"text-white font-semibold",children:["Starting ",te.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-xl p-4 border border-accent-primary/20",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4 text-accent-primary"}),"Prepare for Success"]}),jsxRuntimeExports.jsxs("ul",{className:"space-y-3 text-sm",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Stock up on nutrition"}),jsxRuntimeExports.jsx("p",{className:"text-text-muted",children:"Prepare your meals and snacks for week 1"})]})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Get quality sleep"}),jsxRuntimeExports.jsx("p",{className:"text-text-muted",children:"Aim for 8+ hours to start fresh"})]})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Review your program"}),jsxRuntimeExports.jsx("p",{className:"text-text-muted",children:"Familiarize yourself with week 1 workouts"})]})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Set your intentions"}),jsxRuntimeExports.jsx("p",{className:"text-text-muted",children:"Visualize your goals and commit fully"})]})]})]})]}),jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"w-full",onClick:w,children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 mr-2"}),"Preview Your Program"]})]}):ne&&!ne.isRestDay?jsxRuntimeExports.jsx("div",{className:"space-y-3",children:ne.sessions?.map((se,ie)=>{const Ee=g.some(D=>D.sessionTime===se.time),V=calculateCaloriesBurned(ae,se.type||h?.primarySubtype,se.duration||60,7);return jsxRuntimeExports.jsxs("div",{className:`p-4 rounded-xl border transition-all ${Ee?"bg-accent-success/5 border-accent-success/20":"bg-dark-700 border-dark-600 hover:border-dark-500"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${se.time==="AM"?"bg-accent-primary/10 text-accent-primary":"bg-blue-500/10 text-blue-400"}`,children:se.time}),jsxRuntimeExports.jsx("span",{className:"font-medium text-white",children:se.focus}),Ee&&jsxRuntimeExports.jsx("span",{className:"text-accent-success text-sm",children:" Done"})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-text-muted",children:["~",V," kcal"]})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-secondary mb-3",children:[se.duration," min  ",se.exercises?.length||0," exercises"]}),!Ee&&jsxRuntimeExports.jsxs(Button,{variant:"primary",size:"sm",className:"w-full",onClick:w,children:[jsxRuntimeExports.jsx(Play,{className:"w-4 h-4 mr-2"}),"Start Workout"]})]},ie)})}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-dark-700 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx("span",{className:"text-3xl",children:""})}),jsxRuntimeExports.jsx("p",{className:"font-semibold text-white mb-1",children:"Rest Day"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-muted",children:"Recovery is when gains happen"})]})})]})}),h?.primaryGoal==="lockin"&&jsxRuntimeExports.jsx(LockInCommitments,{program:h,profile:u,todaysWorkouts:g}),jsxRuntimeExports.jsx(ProgramOverview,{profile:u,program:h}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"text-center py-5",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-accent-primary/10 rounded-xl flex items-center justify-center mx-auto mb-3",children:jsxRuntimeExports.jsx(Target,{className:"w-6 h-6 text-accent-primary"})}),jsxRuntimeExports.jsx("p",{className:"font-display text-xl font-bold text-white",children:h?.currentPhase||"Base"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider mt-1",children:"Phase"})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"text-center py-5",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-accent-success/10 rounded-xl flex items-center justify-center mx-auto mb-3",children:jsxRuntimeExports.jsx(TrendingUp,{className:"w-6 h-6 text-accent-success"})}),jsxRuntimeExports.jsxs("p",{className:"font-display text-xl font-bold text-white",children:[g.length,"/",be.length||0]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider mt-1",children:"Complete"})]})})]}),jsxRuntimeExports.jsx(ProgressWidget,{profile:u,program:h,meals:x,workouts:E,todaysMeals:j,todaysWorkouts:g}),jsxRuntimeExports.jsx(Card,{hover:!0,onClick:w,children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-xs text-accent-primary uppercase tracking-wider font-semibold mb-1",children:[h?.isHybrid&&"Hybrid  ",h?.athleteLevel||"Intermediate"]}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white text-lg",children:h?.name||"Your Program"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:["Week ",h?.currentWeek||1," of ",h?.mesocycleWeeks||4]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-dark-700 rounded-xl flex items-center justify-center",children:jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 text-text-secondary"})})]}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(ProgressBar,{value:h?.currentWeek||1,max:h?.mesocycleWeeks||4,color:"primary",size:"sm"})})]})})]})]})}function LockInCommitments({program:u,profile:h,todaysWorkouts:x}){const E=u?.commitments||{workout:!0,steps:"10k",water:!0,protein:!0},g=`motus_lockin_${new Date().toISOString().split("T")[0]}`,[N,k]=React.useState(()=>{try{const O=localStorage.getItem(g);return O?JSON.parse(O):{}}catch{return{}}}),[A,w]=React.useState(0);React.useEffect(()=>{let O=0;const q=new Date;for(let ae=0;ae<30;ae++){const je=`motus_lockin_${q.toISOString().split("T")[0]}`,ue=localStorage.getItem(je);if(ue)try{const te=JSON.parse(ue);if(Object.keys(E).every(xe=>!E[xe]||te[xe]))O++;else break}catch{break}else if(ae>0)break;q.setDate(q.getDate()-1)}w(O)},[N]);const M=O=>{const q={...N,[O]:!N[O]};k(q),localStorage.setItem(g,JSON.stringify(q))},J=[{key:"workout",label:"1hr Workout",icon:"",completed:x.length>0||N.workout,auto:x.length>0},{key:"steps",label:`${E.steps||"10k"} Steps`,icon:"",completed:N.steps},E.water&&{key:"water",label:"1 Gallon Water",icon:"",completed:N.water},E.protein&&{key:"protein",label:"High Protein",icon:"",completed:N.protein}].filter(Boolean),z=J.every(O=>O.completed);return jsxRuntimeExports.jsx(Card,{className:z?"border-accent-success/50 bg-accent-success/5":"",children:jsxRuntimeExports.jsxs(CardBody,{className:"p-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-dark-600",children:[jsxRuntimeExports.jsxs("h2",{className:"font-semibold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:""}),"30 Day Lock In"]}),A>0&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-accent-primary/20 rounded-full",children:[jsxRuntimeExports.jsx(Flame,{className:"w-4 h-4 text-accent-primary"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-bold text-accent-primary",children:[A," day streak!"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-3",children:[J.map(O=>jsxRuntimeExports.jsxs("button",{onClick:()=>!O.auto&&M(O.key),className:`w-full flex items-center gap-3 p-3 rounded-xl transition-all ${O.completed?"bg-accent-success/10 border border-accent-success/30":"bg-dark-700 border border-dark-600 hover:border-dark-500"}`,children:[jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${O.completed?"bg-accent-success border-accent-success":"border-dark-500"}`,children:O.completed&&jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),jsxRuntimeExports.jsx("span",{className:"text-xl",children:O.icon}),jsxRuntimeExports.jsx("span",{className:`flex-1 text-left font-medium ${O.completed?"text-accent-success":"text-white"}`,children:O.label}),O.auto&&jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500 italic",children:"Auto"})]},O.key)),z&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-4 bg-gradient-to-r from-accent-success/20 to-accent-primary/20 rounded-xl border border-accent-success/30 text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-3xl mb-2 block",children:""}),jsxRuntimeExports.jsx("p",{className:"font-semibold text-white",children:"All commitments complete!"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Keep the streak going tomorrow!"})]})]})]})})}function MacroBar({label:u,current:h,target:x,color:E}){const j=h>x;return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-text-muted uppercase tracking-wide w-16",children:u}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(ProgressBar,{value:h,max:x,color:j?"danger":E,size:"xs"})}),jsxRuntimeExports.jsxs("span",{className:`text-sm tabular-nums ${j?"text-accent-danger":"text-white"}`,children:[h,jsxRuntimeExports.jsxs("span",{className:"text-text-muted",children:["/",x,"g"]})]})]})}const DAY_NAMES=["","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],generateWeekSchedule=(u,h,x,E,j)=>{if(!u||h===1)return u;const g=E?.[h-1]||"Base";E?.[h-2];const N=g==="Deload"||g==="Taper";return u.map(k=>{if(k.isRestDay)return{...k};const A=k.sessions?.map(w=>{const M=w.exercises?.map(_=>{let J={..._};if(N)_.sets&&typeof _.sets=="number"&&(J.sets=Math.max(2,Math.floor(_.sets*.6))),_.rpe&&(J.rpe=Math.max(5,_.rpe-2));else if(g==="Peak")_.rpe&&(J.rpe=Math.min(10,_.rpe+.5));else if(g.includes("Build")){const z=g==="Build 2"?1.15:1.08;_.sets&&typeof _.sets=="number"&&(J.sets=Math.round(_.sets*z))}return J.progression=_.progression?.replace(/Week \d+/g,`Week ${h}`),J});return{...w,exercises:M}});return{...k,sessions:A,isDeload:N}})},getWeeklySummary=(u,h,x,E)=>{const j=x?.[u-1]||"Base",g=u>1?x?.[u-2]:null,N=g&&g!==j,k=j==="Deload"||j==="Taper",A=[];if(N&&A.push({type:"phase",icon:"",text:`New phase: ${g}  ${j}`}),k)A.push({type:"deload",icon:"",text:"Reduced volume (60%) - focus on recovery"});else if(j==="Peak"){let M="Peak intensity training";E?.primaryGoal==="endurance"?M="Peak intensity - race simulation workouts":E?.primaryGoal==="strength"?M="Peak intensity - test maxes and competition prep":E?.primaryGoal==="aesthetic"&&(M="Peak intensity - maximum pump and definition"),A.push({type:"peak",icon:"",text:M})}else j.includes("Build")&&u>1&&A.push({type:"progression",icon:"",text:"Volume increases ~5% from last week"});if(E?.primaryGoal==="endurance"){const M=E?.baseline?.endurance?.currentMileage||20,_=E?.athleteLevel==="elite"?60:50;let J;k?J=Math.round(M*Math.pow(1.05,u-2)*.7):j==="Taper"?J=Math.round(_*.6):J=Math.min(Math.round(M*Math.pow(1.05,u-1)),_),A.push({type:"mileage",icon:"",text:`Target mileage: ~${J} miles`})}const w={1:"Establish baseline, focus on form",2:"Build consistency, dial in paces",3:"First small volume increase",4:"Recovery week - let adaptations settle"};return u<=4&&w[u]&&A.push({type:"goal",icon:"",text:w[u]}),{weekNumber:u,totalWeeks:h,phase:j,changes:A,isDeload:k}},getRecoveryRecommendations=u=>{const h=u?.primaryGoal||"aesthetic",x=[{icon:"",title:"Stretching & Mobility",description:"15-20 min of dynamic stretching or yoga",detail:"Focus on areas worked yesterday"},{icon:"",title:"Light Walk",description:"20-30 min easy walk outdoors",detail:"Promotes blood flow without stress"},{icon:"",title:"Hydration",description:"Drink 3-4L water with electrolytes",detail:"Sodium, potassium, magnesium for recovery",priority:!0},{icon:"",title:"Sleep",description:"Get 8+ hours of quality sleep",detail:"Most recovery happens during deep sleep",priority:!0},{icon:"",title:"Nutrition",description:"Eat at maintenance or slight surplus",detail:"Prioritize protein (1g/lb) for repair",priority:!0}];return h==="endurance"?[...x,{icon:"",title:"Cold Therapy",description:"10-15 min ice bath or cold shower",detail:"Reduces inflammation from high mileage"},{icon:"",title:"Foam Rolling",description:"10 min on calves, quads, IT band",detail:"Breaks up adhesions, improves mobility"},{icon:"",title:"Compression",description:"Wear compression socks/sleeves",detail:"Promotes circulation and reduces swelling"}]:h==="strength"?[...x,{icon:"",title:"Sauna",description:"15-20 min at 170-190F",detail:"Increases blood flow, promotes recovery"},{icon:"",title:"Self-Massage",description:"Lacrosse ball on tight areas",detail:"Target shoulders, hips, and back"},{icon:"",title:"Contrast Therapy",description:"3 min hot / 1 min cold, repeat 3x",detail:"Flushes metabolic waste from muscles"}]:h==="aesthetic"?[...x,{icon:"",title:"Sauna",description:"15-20 min for recovery",detail:"Also supports fat loss through heat exposure"},{icon:"",title:"Yoga Flow",description:"20-30 min gentle yoga",detail:"Mind-muscle connection, flexibility"}]:h==="fatloss"?[...x,{icon:"",title:"LISS Cardio",description:"30-45 min walk or light bike",detail:"Burns extra calories without cortisol spike"},{icon:"",title:"Cold Exposure",description:"2-5 min cold shower",detail:"Activates brown fat, boosts metabolism"}]:x};function ProgramView({program:u,completedWorkouts:h,onCompleteExercise:x,onCompleteSession:E,onUpdateExerciseLog:j,onBack:g}){const[N,k]=reactExports.useState(1),[A,w]=reactExports.useState(0),[M,_]=reactExports.useState(u?.currentWeek||1),[J,z]=reactExports.useState(null),[O,q]=reactExports.useState({sets:"",reps:"",weight:"",notes:""}),ae=u?.totalWeeks||u?.mesocycleWeeks||12,je=u?.phases||[],ue=u?.startDate?new Date(u.startDate):new Date;ue.getDay();const te=V=>{const D=new Date(ue);return D.setDate(D.getDate()+(V-1)*7),D},Q=V=>{const D=te(M),G=V-1,Te=new Date(D);return Te.setDate(Te.getDate()+G),Te},xe=V=>V.toLocaleDateString("en-US",{month:"short",day:"numeric"}),ce=()=>{const V=te(M),D=new Date(V);return D.setDate(D.getDate()+6),`${xe(V)}  ${xe(D)}`},F=reactExports.useMemo(()=>M===1||M===u?.currentWeek?u?.weeklySchedule:generateWeekSchedule(u?.weeklySchedule,M,ae,je),[M,u?.weeklySchedule,ae,je]),U=F?.find(V=>V.day===N),K=reactExports.useMemo(()=>getWeeklySummary(M,ae,je,u),[M,ae,je,u]),ne=(V,D)=>M!==u?.currentWeek?!1:h.some(G=>G.day===N&&G.sessionIndex===V&&G.completedExercises?.includes(D)),be=(V,D)=>h.find(Te=>Te.day===N&&Te.sessionIndex===V)?.exerciseLogs?.[D]||null,L=V=>{const D=U?.sessions?.[V];return D?.exercises?D.exercises.every((G,Te)=>ne(V,Te)):!1},W=(V,D,G)=>{const Te=be(V,D);z({sessionIdx:V,exIdx:D}),q({sets:Te?.sets||G.sets||"",reps:Te?.reps||G.reps||"",weight:Te?.weight||G.startingWeight||"",notes:Te?.notes||""})},me=()=>{J&&j&&j(N,J.sessionIdx,J.exIdx,O),z(null),q({sets:"",reps:"",weight:"",notes:""})},I=V=>{E&&E(N,V)},pe=M>1,se=M<ae,ie=M>(u?.currentWeek||1);M<(u?.currentWeek||1);const Ee=getRecoveryRecommendations(u);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[jsxRuntimeExports.jsx("header",{className:"px-6 py-4 bg-dark-800 border-b border-dark-700",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"p-2 rounded-lg hover:bg-dark-700",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-6 h-6 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:u?.name||"Your Program"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 text-sm",children:[u?.currentPhase," Phase"]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-3 bg-dark-800/50 border-b border-dark-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("button",{onClick:()=>pe&&_(V=>V-1),disabled:!pe,className:`p-2 rounded-lg ${pe?"hover:bg-dark-700 text-white":"text-gray-600 cursor-not-allowed"}`,children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 text-accent-primary"}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-lg font-bold text-white",children:["Week ",M]}),jsxRuntimeExports.jsxs("span",{className:"text-gray-400 text-sm",children:[" of ",ae]}),M===u?.currentWeek&&jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-primary rounded-full text-white",children:"Current"}),ie&&jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-secondary/50 rounded-full text-accent-secondary",children:"Preview"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:ce()})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>se&&_(V=>V+1),disabled:!se,className:`p-2 rounded-lg ${se?"hover:bg-dark-700 text-white":"text-gray-600 cursor-not-allowed"}`,children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-1 mt-2 overflow-x-auto pb-1 scrollbar-thin",children:Array.from({length:ae},(V,D)=>D+1).map(V=>{const D=je[V-1]||"Base",G={Base:{bg:"bg-blue-500/20",text:"text-blue-400",selected:"bg-blue-500"},Build:{bg:"bg-orange-500/20",text:"text-orange-400",selected:"bg-orange-500"},"Build 1":{bg:"bg-orange-500/20",text:"text-orange-400",selected:"bg-orange-500"},"Build 2":{bg:"bg-red-500/20",text:"text-red-400",selected:"bg-red-500"},Peak:{bg:"bg-purple-500/20",text:"text-purple-400",selected:"bg-purple-500"},Taper:{bg:"bg-cyan-500/20",text:"text-cyan-400",selected:"bg-cyan-500"},Deload:{bg:"bg-green-500/20",text:"text-green-400",selected:"bg-green-500"}},Te=G[D]||G.Base,ee=V===M,Ae=V===u?.currentWeek,ye=V<(u?.currentWeek||1);return jsxRuntimeExports.jsx("button",{onClick:()=>_(V),className:`px-2 py-1 text-xs rounded-lg min-w-[28px] transition-all ${ee?`${Te.selected} text-white font-medium`:Ae?`${Te.bg} ${Te.text} ring-1 ring-current`:ye?"bg-dark-600/50 text-gray-500":`${Te.bg} ${Te.text} hover:opacity-80`}`,title:`Week ${V}: ${D}`,children:V},V)})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 text-[10px]",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Base"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Build"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Deload"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),"Peak"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-cyan-500"}),"Taper"]})]})]}),K.changes.length>0&&jsxRuntimeExports.jsxs("div",{className:"px-6 py-3 bg-dark-800/30 border-b border-dark-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-4 h-4 text-accent-secondary"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-white",children:["Week ",M," Focus"]}),jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 text-xs bg-dark-600 rounded-full text-gray-300",children:K.phase})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:K.changes.map((V,D)=>jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-lg text-xs ${V.type==="deload"?"bg-green-500/20 text-green-400":V.type==="peak"?"bg-red-500/20 text-red-400":V.type==="phase"?"bg-accent-primary/20 text-accent-primary":"bg-dark-600 text-gray-300"}`,children:[jsxRuntimeExports.jsx("span",{children:V.icon}),jsxRuntimeExports.jsx("span",{children:V.text})]},D))})]}),ie&&jsxRuntimeExports.jsxs("div",{className:"mx-6 mt-3 p-3 bg-accent-secondary/10 border border-accent-secondary/30 rounded-lg flex items-start gap-2",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"w-4 h-4 text-accent-secondary mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-secondary font-medium",children:"Preview Mode:"}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 ml-1",children:"This is a projected schedule. Actual workouts may adjust based on your progress."})]})]}),jsxRuntimeExports.jsx("div",{className:"px-6 py-4 overflow-x-auto",children:jsxRuntimeExports.jsx("div",{className:"flex gap-2 min-w-max",children:[1,2,3,4,5,6,7].map(V=>{const D=F?.find(Ge=>Ge.day===V),G=D?.isRestDay,Te=N===V,ee=D?.isDeload,Ae=Q(V),ye=Ae.toDateString()===new Date().toDateString();return jsxRuntimeExports.jsxs("button",{onClick:()=>k(V),className:`flex flex-col items-center px-3 py-2 rounded-xl min-w-[64px] transition-all ${Te?"bg-accent-primary text-white":ye?"bg-accent-primary/20 text-accent-primary ring-1 ring-accent-primary/50":ee?"bg-green-500/10 text-green-400 hover:bg-green-500/20":"bg-dark-700 text-gray-400 hover:bg-dark-600"} ${G&&!Te&&!ye?"opacity-50":""}`,children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:DAY_NAMES[V]}),jsxRuntimeExports.jsx("span",{className:`text-[10px] ${Te?"text-white/80":ye?"text-accent-primary/80":"text-gray-500"}`,children:Ae.getDate()}),jsxRuntimeExports.jsx("span",{className:"text-lg font-bold mt-0.5",children:G?"":ee?"":""})]},V)})})}),jsxRuntimeExports.jsx("div",{className:"px-6 py-4",children:U?.isRestDay?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center py-6",children:[jsxRuntimeExports.jsx("span",{className:"text-5xl mb-3 block",children:""}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:"Active Recovery Day"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"Recovery is when adaptation happens. Make the most of it."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 rounded-xl p-4 border border-accent-primary/30",children:[jsxRuntimeExports.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Heart,{className:"w-5 h-5 text-accent-primary"}),"Recovery Essentials"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:Ee.filter(V=>V.priority).map((V,D)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:V.icon}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:V.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:V.description})]})]},D))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-3",children:"Recommended Activities"}),jsxRuntimeExports.jsx("div",{className:"grid gap-3",children:Ee.filter(V=>!V.priority).map((V,D)=>jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:V.icon}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium",children:V.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:V.description}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:V.detail})]})]})},D))})]}),jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-2",children:" Pro Tips"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-400 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Avoid intense exercise - save it for training days"}),jsxRuntimeExports.jsx("li",{children:" Listen to your body - if you feel sore, prioritize sleep"}),jsxRuntimeExports.jsx("li",{children:" Mental recovery matters too - take time to destress"}),jsxRuntimeExports.jsx("li",{children:" Prep meals for the week to stay on track"})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:U?.name}),U?.sessions?.map((V,D)=>jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>w(A===D?-1:D),className:"w-full",children:jsxRuntimeExports.jsx(CardBody,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${V.time==="AM"?"bg-yellow-500/20":V.time==="PM"?"bg-blue-500/20":"bg-purple-500/20"}`,children:jsxRuntimeExports.jsx("span",{className:"text-2xl",children:V.type==="strength"||V.type==="hypertrophy"?"":V.type==="endurance"?"":""})}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[(V.time==="AM"||V.time==="PM")&&jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${V.time==="AM"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:V.time}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:V.focus})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-400",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),V.duration," min"]}),jsxRuntimeExports.jsxs("span",{children:[V.exercises?.length," exercises"]})]})]})]}),jsxRuntimeExports.jsx(ChevronRight,{className:`w-5 h-5 text-gray-400 transition-transform ${A===D?"rotate-90":""}`})]})})}),A===D&&jsxRuntimeExports.jsxs("div",{className:"px-5 pb-5 space-y-3",children:[jsxRuntimeExports.jsx("hr",{className:"border-dark-600"}),V.exercises?.map((G,Te)=>{const ee=ne(D,Te),Ae=be(D,Te),ye=J?.sessionIdx===D&&J?.exIdx===Te;return jsxRuntimeExports.jsx("div",{className:`p-4 rounded-lg border ${ee?"bg-accent-success/10 border-accent-success/30":"bg-dark-700 border-dark-600"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-white",children:G.name}),ee&&jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-accent-success/20 rounded-full",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-3 h-3 text-accent-success"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-accent-success font-medium",children:"Done"})]})]}),ye?jsxRuntimeExports.jsxs("div",{className:"mt-3 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Sets"}),jsxRuntimeExports.jsx("input",{type:"text",value:O.sets,onChange:Ge=>q({...O,sets:Ge.target.value}),placeholder:G.sets||"Sets",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Reps"}),jsxRuntimeExports.jsx("input",{type:"text",value:O.reps,onChange:Ge=>q({...O,reps:Ge.target.value}),placeholder:G.reps||"Reps",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Weight"}),jsxRuntimeExports.jsx("input",{type:"text",value:O.weight,onChange:Ge=>q({...O,weight:Ge.target.value}),placeholder:G.startingWeight||"Weight",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Notes (optional)"}),jsxRuntimeExports.jsx("input",{type:"text",value:O.notes,onChange:Ge=>q({...O,notes:Ge.target.value}),placeholder:"How did it feel? Any adjustments?",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:me,className:"flex items-center gap-1 px-3 py-1.5 bg-accent-success text-white rounded-lg text-sm font-medium hover:bg-accent-success/80",children:[jsxRuntimeExports.jsx(Save,{className:"w-4 h-4"}),"Save"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>z(null),className:"flex items-center gap-1 px-3 py-1.5 bg-dark-600 text-gray-400 rounded-lg text-sm hover:bg-dark-500",children:[jsxRuntimeExports.jsx(X,{className:"w-4 h-4"}),"Cancel"]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Ae&&jsxRuntimeExports.jsxs("div",{className:"mt-2 p-2 bg-accent-primary/10 rounded-lg border border-accent-primary/20",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-accent-primary font-medium",children:"Logged: "}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-white",children:[Ae.sets&&`${Ae.sets} sets`,Ae.reps&&`  ${Ae.reps}`,Ae.weight&&` @ ${Ae.weight}`]}),Ae.notes&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:['"',Ae.notes,'"']})]}),jsxRuntimeExports.jsxs("div",{onClick:()=>M===u?.currentWeek&&W(D,Te,G),className:`flex flex-wrap gap-3 mt-2 text-sm ${M===u?.currentWeek?"cursor-pointer p-2 rounded-lg hover:bg-dark-600/50 transition-colors":""}`,children:[G.sets&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:G.sets})," sets"]}),G.reps&&jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:G.reps})}),G.startingWeight&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:["Target ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary font-medium",children:G.startingWeight})]}),G.rpe&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400 relative group",children:["RPE ",jsxRuntimeExports.jsx("span",{className:"text-accent-warning font-medium",children:G.rpe}),jsxRuntimeExports.jsxs("span",{className:"absolute bottom-full left-0 mb-2 hidden group-hover:block bg-dark-800 text-white text-xs rounded px-2 py-1 whitespace-nowrap border border-dark-600 z-10",children:["Rate of Perceived Exertion: 1-10 scale",jsxRuntimeExports.jsx("br",{}),"6-7 = moderate, 8 = hard (2 reps in reserve)",jsxRuntimeExports.jsx("br",{}),"9 = very hard (1 rep left), 10 = max effort"]})]}),G.pace&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:["Pace ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary font-medium",children:G.pace})]}),G.heartRateZone&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:["Zone ",jsxRuntimeExports.jsx("span",{className:"text-red-400 font-medium",children:G.heartRateZone})]}),G.rest&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:["Rest ",jsxRuntimeExports.jsx("span",{className:"text-white",children:G.rest})]})]}),(G.current1RM||G.target1RM)&&jsxRuntimeExports.jsxs("div",{className:"flex gap-4 mt-2 text-xs",children:[G.current1RM&&jsxRuntimeExports.jsxs("span",{className:"text-gray-500",children:["Current 1RM: ",jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:G.current1RM})]}),G.target1RM&&jsxRuntimeExports.jsxs("span",{className:"text-gray-500",children:["Target 1RM: ",jsxRuntimeExports.jsx("span",{className:"text-accent-secondary",children:G.target1RM})]})]}),G.notes&&jsxRuntimeExports.jsxs("p",{className:"mt-2 text-sm text-gray-500 italic",children:[" ",G.notes]}),G.progression&&jsxRuntimeExports.jsxs("p",{className:"mt-1 text-xs text-accent-secondary",children:[" ",G.progression]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[!ye&&M===u?.currentWeek&&jsxRuntimeExports.jsx("button",{onClick:()=>W(D,Te,G),className:"p-2 rounded-lg text-gray-500 hover:text-accent-primary hover:bg-dark-600 transition-colors",title:"Log actual performance",children:jsxRuntimeExports.jsx(PenLine,{className:"w-5 h-5"})}),!ye&&jsxRuntimeExports.jsx("button",{onClick:()=>x(N,D,Te),className:`p-2 rounded-lg transition-colors ${ee?"text-accent-success":"text-gray-500 hover:text-white hover:bg-dark-600"}`,title:ee?"Mark incomplete":"Mark complete",children:ee?jsxRuntimeExports.jsx(CheckCircle,{className:"w-6 h-6"}):jsxRuntimeExports.jsx(Circle,{className:"w-6 h-6"})})]})]})},Te)}),L(D)?jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 bg-accent-success/20 rounded-lg border border-accent-success/30 text-center",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-accent-success inline mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-accent-success font-medium",children:"Session Complete!"})]}):jsxRuntimeExports.jsxs(Button,{fullWidth:!0,variant:"success",className:"mt-4",onClick:()=>I(D),children:[jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4 mr-2"}),"Complete All Exercises"]})]})]},D))]})})]})}const DAYS=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],MEAL_TYPES=["breakfast","lunch","dinner","snack"],MEAL_BENEFITS={breakfast:"Kickstarts metabolism, stabilizes blood sugar for sustained energy.",lunch:"Refuels glycogen stores, provides sustained afternoon energy.",dinner:"Supports overnight muscle repair and recovery.",snack:"Maintains blood sugar, prevents overeating at meals."};function MealPlanView({mealPlan:u,recipes:h,profile:x,onBack:E,onRegenerateMeal:j,onOpenShoppingList:g}){const[N,k]=reactExports.useState(0),[A,w]=reactExports.useState(null),[M,_]=reactExports.useState(!0);if(!u)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-dark-900 p-4 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(ChefHat,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"No Meal Plan Yet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Generate a meal plan from your preferences"})]})});const J=DAYS[N].toLowerCase(),z=u.week?.[J]||{meals:[],nutrients:{}},O=z.meals||[],q=z.nutrients||{},ae=x?.macros?.calories||2e3,je=x?.macros?.protein||150,ue=je*4,te=ae-ue,Q=Math.round(te*.55/4),xe=Math.round(te*.45/9),ce=U=>O.find(K=>K.type===U),F=U=>h?.[U]||null;return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-40",children:[jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 border-b border-dark-700 sticky top-0 z-10",children:[jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:E,className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5 text-gray-400"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:"Weekly Meal Plan"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Tailored to your goals"})]}),jsxRuntimeExports.jsx("button",{onClick:g,className:"p-2 bg-accent-secondary/20 rounded-lg",children:jsxRuntimeExports.jsx(ShoppingCart,{className:"w-5 h-5 text-accent-secondary"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>k(U=>Math.max(0,U-1)),disabled:N===0,className:"p-1 disabled:opacity-30",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5 text-gray-400"})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-x-auto scrollbar-hide",children:jsxRuntimeExports.jsx("div",{className:"flex gap-1 min-w-max",children:DAYS.map((U,K)=>jsxRuntimeExports.jsx("button",{onClick:()=>k(K),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${N===K?"bg-accent-primary text-dark-900":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:U.slice(0,3)},U))})}),jsxRuntimeExports.jsx("button",{onClick:()=>k(U=>Math.min(6,U+1)),disabled:N===6,className:"p-1 disabled:opacity-30",children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5 text-gray-400"})})]})]}),jsxRuntimeExports.jsx("div",{className:"px-4 pb-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-dark-700 rounded-xl p-3 grid grid-cols-4 gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-1 text-accent-primary",children:[jsxRuntimeExports.jsx(Flame,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"font-bold",children:q.calories||""})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:["/ ",ae]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-1 text-accent-success",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-4 h-4"}),jsxRuntimeExports.jsxs("span",{className:"font-bold",children:[q.protein||"","g"]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:["/ ",je,"g"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"font-bold text-accent-warning",children:[q.carbohydrates||"","g"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:["/ ",Q,"g"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"font-bold text-accent-secondary",children:[q.fat||"","g"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:["/ ",xe,"g"]})]})]})})]}),M&&jsxRuntimeExports.jsxs("div",{className:"mx-4 mb-4 p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-xl border border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4 text-accent-primary"}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white",children:"Why This Plan"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>_(!1),className:"text-xs text-gray-500",children:"Hide"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[jsxRuntimeExports.jsxs("span",{className:"text-accent-success font-medium",children:[je,"g protein"]})," supports muscle recovery.",jsxRuntimeExports.jsxs("span",{className:"text-accent-warning font-medium",children:[" ",Q,"g carbs"]})," fuel your training.",jsxRuntimeExports.jsxs("span",{className:"text-accent-secondary font-medium",children:[" ",xe,"g fat"]})," for hormones & absorption. Meals timed for energy when you need it most."]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 space-y-4",children:MEAL_TYPES.map(U=>{const K=ce(U),ne=K?F(K.id):null,be=A===K?.id;return K?jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl overflow-hidden border border-dark-700",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>w(be?null:K.id),className:"w-full p-4 flex gap-4 text-left",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 rounded-lg bg-dark-700 overflow-hidden flex-shrink-0",children:K.image?jsxRuntimeExports.jsx("img",{src:K.image,alt:K.title,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",children:jsxRuntimeExports.jsx(ChefHat,{className:"w-8 h-8 text-gray-600"})})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-accent-primary uppercase tracking-wide",children:U}),jsxRuntimeExports.jsx(Leaf,{className:"w-3 h-3 text-green-500"})]}),jsxRuntimeExports.jsx("h3",{className:"text-white font-medium mt-1 truncate",children:K.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-1",children:MEAL_BENEFITS[U]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2 text-sm text-gray-400",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-3.5 h-3.5"}),K.readyInMinutes||""," min"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Flame,{className:"w-3.5 h-3.5"}),K.calories," cal"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-3.5 h-3.5"}),K.protein,"g"]})]})]})]}),be&&jsxRuntimeExports.jsxs("div",{className:"border-t border-dark-700 p-4 space-y-4",children:[ne?.ingredients&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Ingredients"}),jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:ne.ingredients.map((L,W)=>jsxRuntimeExports.jsxs("li",{className:"text-sm text-gray-400 flex items-start gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),L.original||`${L.amount} ${L.unit} ${L.name}`]},W))})]}),ne?.instructions&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Instructions"}),jsxRuntimeExports.jsx("ol",{className:"space-y-2",children:ne.instructions.map((L,W)=>jsxRuntimeExports.jsxs("li",{className:"text-sm text-gray-400 flex gap-3",children:[jsxRuntimeExports.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-dark-700 text-xs flex items-center justify-center text-white",children:W+1}),jsxRuntimeExports.jsx("span",{children:L})]},W))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:L=>{L.stopPropagation(),j?.(J,U)},className:"flex-1 py-2 px-3 bg-dark-700 text-gray-300 rounded-lg text-sm flex items-center justify-center gap-2 hover:bg-dark-600",children:[jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4"}),"Swap Meal"]}),ne?.sourceUrl&&jsxRuntimeExports.jsxs("a",{href:ne.sourceUrl,target:"_blank",rel:"noopener noreferrer",onClick:L=>L.stopPropagation(),className:"py-2 px-3 bg-dark-700 text-gray-300 rounded-lg text-sm flex items-center gap-2 hover:bg-dark-600",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"}),"Full Recipe"]})]})]})]},U):null})}),jsxRuntimeExports.jsx("div",{className:"fixed bottom-20 left-0 right-0 p-4",children:jsxRuntimeExports.jsxs("button",{onClick:g,className:"w-full py-4 bg-accent-secondary text-dark-900 font-semibold rounded-xl flex items-center justify-center gap-2 shadow-lg",children:[jsxRuntimeExports.jsx(ShoppingCart,{className:"w-5 h-5"}),"View Shopping List"]})})]})}const RETAILERS=[{id:"auto",name:"Best Match",icon:"",description:"Instacart picks the best store for your items"},{id:"costco",name:"Costco",icon:"",slug:"costco"},{id:"walmart",name:"Walmart",icon:"",slug:"walmart"},{id:"kroger",name:"Kroger",icon:"",slug:"kroger"},{id:"safeway",name:"Safeway",icon:"",slug:"safeway"},{id:"publix",name:"Publix",icon:"",slug:"publix"},{id:"sprouts",name:"Sprouts",icon:"",slug:"sprouts-farmers-market"},{id:"wholefoods",name:"Whole Foods",icon:"",slug:"whole-foods-market"},{id:"target",name:"Target",icon:"",slug:"target"}];function ShoppingListView({mealPlan,recipes,onBack}){const[checkedItems,setCheckedItems]=reactExports.useState({}),[searchQuery,setSearchQuery]=reactExports.useState(""),[expandedCategories,setExpandedCategories]=reactExports.useState({}),[selectedRetailer,setSelectedRetailer]=reactExports.useState("auto"),[showRetailerPicker,setShowRetailerPicker]=reactExports.useState(!1),shoppingList=reactExports.useMemo(()=>{const ingredients={};return mealPlan?.week?(Object.values(mealPlan.week).forEach(day=>{day.meals?.forEach(meal=>{const recipe=recipes?.[meal.id];recipe?.ingredients&&recipe.ingredients.forEach(ing=>{let name,amount,unit;if(ing.original){const parts=ing.original.match(/^([\d.\/]+)?\s*(cup|cups|tbsp|tsp|oz|lb|g|ml|slice|slices|piece|pieces)?\s*(.+)$/i);parts?(amount=parts[1]?parseFloat(eval(parts[1])):1,unit=parts[2]||"",name=parts[3]?.trim()||ing.original):(name=ing.original,amount=1,unit="")}else name=ing.name||"Unknown",amount=ing.amount||1,unit=ing.unit||"";const key=name.toLowerCase();ingredients[key]?ingredients[key].unit===unit&&(ingredients[key].amount+=amount):ingredients[key]={id:ing.id||key,name,amount,unit,category:categorizeIngredient(name)}})})}),Object.values(ingredients)):[]},[mealPlan,recipes]),groupedList=reactExports.useMemo(()=>{const u={};shoppingList.forEach(x=>{const E=x.category||"Other";u[E]||(u[E]=[]),u[E].push(x)});const h={};return Object.keys(u).sort().forEach(x=>{h[x]=u[x].sort((E,j)=>E.name.localeCompare(j.name))}),h},[shoppingList]),filteredList=reactExports.useMemo(()=>{if(!searchQuery.trim())return groupedList;const u=searchQuery.toLowerCase(),h={};return Object.entries(groupedList).forEach(([x,E])=>{const j=E.filter(g=>g.name.toLowerCase().includes(u));j.length>0&&(h[x]=j)}),h},[groupedList,searchQuery]),toggleItem=u=>{setCheckedItems(h=>({...h,[u]:!h[u]}))},toggleCategory=u=>{setExpandedCategories(h=>({...h,[u]:!h[u]}))},checkedCount=Object.values(checkedItems).filter(Boolean).length,totalCount=shoppingList.length,progress=totalCount>0?checkedCount/totalCount*100:0;return RETAILERS.find(u=>u.id===selectedRetailer)||RETAILERS[0],jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-32",children:[jsxRuntimeExports.jsx("div",{className:"bg-dark-800 border-b border-dark-700 sticky top-0 z-10",children:jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:onBack,className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5 text-gray-400"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:"Shopping List"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:[checkedCount," of ",totalCount," items"]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-accent-secondary/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(ShoppingCart,{className:"w-5 h-5 text-accent-secondary"})})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-dark-700 rounded-full overflow-hidden mb-4",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-accent-success transition-all duration-300",style:{width:`${progress}%`}})}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search ingredients...",value:searchQuery,onChange:u=>setSearchQuery(u.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 text-sm"})]})]})}),jsxRuntimeExports.jsx("div",{className:"p-4 space-y-4",children:Object.entries(filteredList).length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx(Package,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No Items Found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:searchQuery?"Try a different search term":"Generate a meal plan to see your shopping list"})]}):Object.entries(filteredList).map(([u,h])=>{const x=expandedCategories[u]!==!1,E=h.filter(j=>checkedItems[j.id]).length;return jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl border border-dark-700 overflow-hidden",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>toggleCategory(u),className:"w-full p-4 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:getCategoryIcon(u)}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-medium",children:u}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:[E,"/",h.length," items"]})]})]}),x?jsxRuntimeExports.jsx(ChevronUp,{className:"w-5 h-5 text-gray-400"}):jsxRuntimeExports.jsx(ChevronDown,{className:"w-5 h-5 text-gray-400"})]}),x&&jsxRuntimeExports.jsx("div",{className:"border-t border-dark-700",children:h.map(j=>{const g=checkedItems[j.id];return jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-3 p-3 border-b border-dark-700 last:border-0 ${g?"opacity-50":""}`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>toggleItem(j.id),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${g?"bg-accent-success border-accent-success":"border-gray-500 hover:border-gray-400"}`,children:g&&jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-dark-900"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:`text-white ${g?"line-through":""}`,children:j.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:formatAmount(j.amount,j.unit)})]})]},j.id)})})]},u)})})]})}function categorizeIngredient(u){const h=u.toLowerCase(),x={Produce:["lettuce","tomato","onion","garlic","pepper","carrot","celery","spinach","kale","broccoli","cucumber","avocado","lemon","lime","apple","banana","berry","orange","potato","sweet potato","mushroom","zucchini","squash"],"Meat & Seafood":["chicken","beef","pork","turkey","salmon","fish","shrimp","bacon","sausage","lamb","steak","ground"],"Dairy & Eggs":["milk","cheese","yogurt","butter","cream","egg","sour cream"],Bakery:["bread","tortilla","bun","roll","bagel","pita"],Pantry:["rice","pasta","flour","sugar","oil","vinegar","sauce","broth","stock","beans","lentil","quinoa","oat"],"Spices & Seasonings":["salt","pepper","cumin","paprika","oregano","basil","thyme","cinnamon","garlic powder","onion powder"],Frozen:["frozen"],Beverages:["water","juice","coffee","tea","soda"]};for(const[E,j]of Object.entries(x))if(j.some(g=>h.includes(g)))return E;return"Other"}function getCategoryIcon(u){return{Produce:"","Meat & Seafood":"","Dairy & Eggs":"",Bakery:"",Pantry:"","Spices & Seasonings":"",Frozen:"",Beverages:"",Other:""}[u]||""}function formatAmount(u,h){return u?`${u<1?u.toFixed(2):Math.round(u*10)/10} ${h||""}`.trim():""}function NutritionView({profile:u,meals:h,workouts:x,mealPlan:E,recipes:j,isGeneratingMealPlan:g,onLogMeal:N,onDeleteMeal:k,onCreateMealPlan:A,onBack:w}){const[M,_]=reactExports.useState(new Date),[J,z]=reactExports.useState(!1),[O,q]=reactExports.useState("tracking"),{macros:ae,bmr:je,tdee:ue}=u||{},te=u.weightUnit==="kg"?u.weight/.453592:parseFloat(u.weight),Q=M.toISOString().split("T")[0],xe=h.filter(W=>W.loggedAt?.startsWith(Q)||W.createdAt?.startsWith(Q)),ce=x.filter(W=>W.loggedAt?.startsWith(Q)||W.completedAt?.startsWith(Q)),F=xe.reduce((W,me)=>({calories:W.calories+(me.calories||0),protein:W.protein+(me.protein||0),carbs:W.carbs+(me.carbs||0),fat:W.fat+(me.fat||0),fiber:W.fiber+(me.fiber||0),sugar:W.sugar+(me.sugar||0),sodium:W.sodium+(me.sodium||0)}),{calories:0,protein:0,carbs:0,fat:0,fiber:0,sugar:0,sodium:0}),U=ce.reduce((W,me)=>W+(me.caloriesBurned||200),0),K=estimateDailyCalories(je||1800,u.activityLevel,U),ne=calculateRecommendations(u,K.totalDailyBurn),be=W=>{const me=new Date(M);me.setDate(me.getDate()+W),_(me)},L=M.toISOString().split("T")[0]===new Date().toISOString().split("T")[0];return O==="mealplan"&&E?jsxRuntimeExports.jsx(MealPlanView,{mealPlan:E,recipes:j,profile:u,onBack:()=>q("tracking"),onOpenShoppingList:()=>q("shopping")}):O==="shopping"&&E?jsxRuntimeExports.jsx(ShoppingListView,{mealPlan:E,recipes:j,onBack:()=>q("mealplan")}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[jsxRuntimeExports.jsxs("header",{className:"px-6 py-5 bg-dark-800 border-b border-dark-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[w&&jsxRuntimeExports.jsx("button",{onClick:w,className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Flame,{className:"w-6 h-6 text-accent-warning"}),"Nutrition"]})})]}),jsxRuntimeExports.jsxs(Button,{size:"sm",onClick:N,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-1"}),"Log Meal"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mt-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>q("tracking"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${O==="tracking"?"bg-accent-primary text-dark-900":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:[jsxRuntimeExports.jsx(Target,{className:"w-4 h-4"}),"Tracking"]}),jsxRuntimeExports.jsx("button",{onClick:()=>E?q("mealplan"):A?.(),disabled:g,className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${O==="mealplan"?"bg-accent-secondary text-dark-900":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:g?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader2,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ChefHat,{className:"w-4 h-4"}),E?"Meal Plan":"Create Plan"]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>be(-1),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5 text-gray-400"})}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:L?"Today":M.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})}),jsxRuntimeExports.jsx("button",{onClick:()=>be(1),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",disabled:L,children:jsxRuntimeExports.jsx(ChevronRight,{className:`w-5 h-5 ${L?"text-gray-600":"text-gray-400"}`})})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Zap,{className:"w-5 h-5 text-accent-danger mx-auto mb-1"}),jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-white",children:K.totalDailyBurn}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Burned"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Net"}),jsxRuntimeExports.jsxs("p",{className:`text-2xl font-bold ${F.calories-K.totalDailyBurn<0?"text-accent-success":"text-accent-warning"}`,children:[F.calories-K.totalDailyBurn>0?"+":"",F.calories-K.totalDailyBurn]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Target,{className:"w-5 h-5 text-accent-success mx-auto mb-1"}),jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-white",children:F.calories}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Consumed"})]})]}),jsxRuntimeExports.jsx("div",{className:"h-px bg-dark-600 my-4"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"BMR"}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:K.bmr})]}),jsxRuntimeExports.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Activity"}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:K.neat})]}),jsxRuntimeExports.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Workouts"}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:U})]})]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"w-5 h-5 text-accent-primary"}),"Recommended Intake"]}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-400 px-2 py-1 bg-dark-700 rounded",children:[u.nutritionGoal==="maintain"&&"Maintain",u.nutritionGoal==="recomp"&&"Recomp",u.nutritionGoal==="lose"&&"Weight Loss",u.nutritionGoal==="gain"&&"Weight Gain"]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-lg mb-4",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-white",children:ne.calories}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Recommended daily calories"})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-accent-success",children:[ne.protein,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Protein"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[ne.proteinPerLb,"g/lb"]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-accent-warning",children:[ne.carbs,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-accent-secondary",children:[ne.fat,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-3 flex items-start gap-1",children:[jsxRuntimeExports.jsx(Info,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),"Based on your ",u.nutritionGoal," goal and estimated ",K.totalDailyBurn," daily calorie burn"]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"Today's Macros"}),jsxRuntimeExports.jsx("button",{onClick:()=>z(!J),className:"text-sm text-accent-primary",children:J?"Simple View":"Detailed View"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(MacroProgress,{label:"Protein",current:F.protein,target:ne.protein,color:"success",calories:F.protein*4}),jsxRuntimeExports.jsx(MacroProgress,{label:"Carbohydrates",current:F.carbs,target:ne.carbs,color:"warning",calories:F.carbs*4}),jsxRuntimeExports.jsx(MacroProgress,{label:"Fat",current:F.fat,target:ne.fat,color:"secondary",calories:F.fat*9})]}),J&&jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-3",children:"Additional Nutrients"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsx(MicroNutrient,{label:"Fiber",value:F.fiber,target:30,unit:"g"}),jsxRuntimeExports.jsx(MicroNutrient,{label:"Sugar",value:F.sugar,target:50,unit:"g",warn:!0}),jsxRuntimeExports.jsx(MicroNutrient,{label:"Sodium",value:F.sodium,target:2300,unit:"mg",warn:!0}),jsxRuntimeExports.jsx(MicroNutrient,{label:"Water",value:Math.round(te*.5),target:Math.round(te*.67),unit:"oz"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Calorie Distribution"}),jsxRuntimeExports.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden bg-dark-600",children:[jsxRuntimeExports.jsx("div",{className:"bg-accent-success",style:{width:`${F.calories>0?F.protein*4/F.calories*100:0}%`}}),jsxRuntimeExports.jsx("div",{className:"bg-accent-warning",style:{width:`${F.calories>0?F.carbs*4/F.calories*100:0}%`}}),jsxRuntimeExports.jsx("div",{className:"bg-accent-secondary",style:{width:`${F.calories>0?F.fat*9/F.calories*100:0}%`}})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[jsxRuntimeExports.jsxs("span",{children:["P: ",F.calories>0?Math.round(F.protein*4/F.calories*100):0,"%"]}),jsxRuntimeExports.jsxs("span",{children:["C: ",F.calories>0?Math.round(F.carbs*4/F.calories*100):0,"%"]}),jsxRuntimeExports.jsxs("span",{children:["F: ",F.calories>0?Math.round(F.fat*9/F.calories*100):0,"%"]})]})]})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-3",children:["Meals (",xe.length,")"]}),xe.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-3",children:xe.map(W=>jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardBody,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-white",children:W.name||"Meal"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 mt-2 text-sm",children:[jsxRuntimeExports.jsxs("span",{className:"text-white font-medium",children:[W.calories," kcal"]}),jsxRuntimeExports.jsxs("span",{className:"text-accent-success",children:["P: ",W.protein,"g"]}),jsxRuntimeExports.jsxs("span",{className:"text-accent-warning",children:["C: ",W.carbs,"g"]}),jsxRuntimeExports.jsxs("span",{className:"text-accent-secondary",children:["F: ",W.fat,"g"]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(W.loggedAt||W.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),W.screenshot&&jsxRuntimeExports.jsx("img",{src:W.screenshot,alt:"Meal",className:"w-14 h-14 object-cover rounded-lg ml-3"}),jsxRuntimeExports.jsx("button",{onClick:()=>k&&k(W.id),className:"p-2 text-gray-500 hover:text-accent-danger ml-2",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})})},W.id))}):jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"text-center py-8",children:[jsxRuntimeExports.jsx("span",{className:"text-4xl mb-2 block",children:""}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"No meals logged yet"}),jsxRuntimeExports.jsxs(Button,{variant:"secondary",size:"sm",className:"mt-4",onClick:N,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-1"}),"Log Your First Meal"]})]})})]})]})]})}function calculateRecommendations(u,h){const x=u.weightUnit==="kg"?u.weight/.453592:parseFloat(u.weight);let E,j,g;switch(u.nutritionGoal){case"maintain":E=h,g=.8,j=Math.round(x*g);break;case"recomp":E=h,g=1,j=Math.round(x*g);break;case"lose":const M=(u.weeklyWeightChange||.5)*500;E=Math.round(h-M),g=1,j=Math.round(x*g);break;case"gain":const _=(u.weeklyWeightChange||.5)*500;E=Math.round(h+_),g=.9,j=Math.round(x*g);break;default:E=h,g=.8,j=Math.round(x*g)}const N=j*4,k=E-N,A=Math.round(k*.3/9),w=Math.round(k*.7/4);return{calories:E,protein:j,proteinPerLb:g,carbs:w,fat:A}}function MacroProgress({label:u,current:h,target:x,color:E,calories:j}){const g=h>x;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:u}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("span",{className:`font-medium ${g?"text-accent-danger":"text-white"}`,children:[h,"g"]}),jsxRuntimeExports.jsxs("span",{className:"text-gray-500",children:[" / ",x,"g"]}),jsxRuntimeExports.jsxs("span",{className:"text-gray-600 text-xs ml-2",children:["(",j," kcal)"]})]})]}),jsxRuntimeExports.jsx(ProgressBar,{value:h,max:x,color:g?"danger":E,size:"sm"})]})}function MicroNutrient({label:u,value:h,target:x,unit:E,warn:j=!1}){const g=h/x*100,N=h>x;return jsxRuntimeExports.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:u}),jsxRuntimeExports.jsxs("span",{className:`font-medium ${j&&N?"text-accent-danger":"text-white"}`,children:[h,E]})]}),jsxRuntimeExports.jsx("div",{className:"mt-1 h-1 bg-dark-600 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`h-full rounded-full ${j&&N?"bg-accent-danger":"bg-accent-primary"}`,style:{width:`${Math.min(g,100)}%`}})})]})}const DIETARY_OPTIONS=[{id:"vegetarian",label:"Vegetarian",icon:""},{id:"vegan",label:"Vegan",icon:""},{id:"gluten-free",label:"Gluten-Free",icon:""},{id:"dairy-free",label:"Dairy-Free",icon:""},{id:"keto",label:"Keto",icon:""},{id:"paleo",label:"Paleo",icon:""},{id:"pescatarian",label:"Pescatarian",icon:""},{id:"halal",label:"Halal",icon:""},{id:"kosher",label:"Kosher",icon:""}],CUISINE_OPTIONS=[{id:"american",label:"American",icon:""},{id:"mexican",label:"Mexican",icon:""},{id:"italian",label:"Italian",icon:""},{id:"chinese",label:"Chinese",icon:""},{id:"japanese",label:"Japanese",icon:""},{id:"indian",label:"Indian",icon:""},{id:"mediterranean",label:"Mediterranean",icon:""},{id:"thai",label:"Thai",icon:""},{id:"korean",label:"Korean",icon:""}],COMMON_DISLIKES=["Mushrooms","Olives","Onions","Cilantro","Seafood","Spicy food","Tofu","Eggs","Nuts","Avocado"],DAYS_OF_WEEK=[{id:"mon",label:"Mon"},{id:"tue",label:"Tue"},{id:"wed",label:"Wed"},{id:"thu",label:"Thu"},{id:"fri",label:"Fri"},{id:"sat",label:"Sat"},{id:"sun",label:"Sun"}];function NutritionPreferences({isOpen:u,onClose:h,onSave:x,profile:E}){const[j,g]=reactExports.useState(1),[N,k]=reactExports.useState(!1),[A,w]=reactExports.useState({dietaryRestrictions:[],cuisinePreferences:[],dislikedFoods:[],customDislikes:"",mealsPerDay:3,snacksPerDay:1,cookingTime:"moderate",budgetLevel:"moderate",prepPreference:"mix",excludedMeals:{}});reactExports.useEffect(()=>{u&&M()},[u]);const M=async()=>{const{data:U}=await loadNutritionPreferences();U&&w(K=>({...K,...U}))},_=(U,K)=>{w(ne=>({...ne,[U]:ne[U].includes(K)?ne[U].filter(be=>be!==K):[...ne[U],K]}))},J=(U,K)=>{const ne=`${U}-${K}`;w(be=>({...be,excludedMeals:{...be.excludedMeals,[ne]:!be.excludedMeals[ne]}}))},z=reactExports.useMemo(()=>Object.values(A.excludedMeals).filter(Boolean).length,[A.excludedMeals]),O=E?.macros?.calories||2e3,q=E?.macros?.protein||150,je=(A.mealsPerDay+A.snacksPerDay)*7-z,ue=O/(A.mealsPerDay+A.snacksPerDay),te=Math.round(z/7*ue),Q=O-te,xe=async()=>{k(!0);try{const U=[...A.dislikedFoods,...A.customDislikes.split(",").map(ne=>ne.trim()).filter(Boolean)],K={...A,dislikedFoods:U,adjustedCalories:Q,excludedMealCount:z,plannedMealsPerWeek:je};await saveNutritionPreferences(K),x?.(K)}catch(U){console.error("Error saving preferences:",U)}k(!1)};if(!u)return null;const F=(()=>{const U=[];for(let K=0;K<A.mealsPerDay;K++)K===0?U.push("B"):K===A.mealsPerDay-1?U.push("D"):U.push("L");for(let K=0;K<A.snacksPerDay;K++)U.push("S");return U})();return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-lg bg-dark-800 rounded-2xl shadow-2xl border border-dark-600 overflow-hidden max-h-[90vh] flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-accent-secondary/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(Utensils,{className:"w-5 h-5 text-accent-secondary"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"Meal Plan Preferences"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:["Step ",j," of 3"]})]})]}),jsxRuntimeExports.jsx("button",{onClick:h,className:"p-2 hover:bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5 text-gray-400"})})]}),jsxRuntimeExports.jsx("div",{className:"h-1 bg-dark-700",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-accent-secondary transition-all duration-300",style:{width:`${j/3*100}%`}})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[j===1&&jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{className:"bg-dark-700 rounded-xl p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-gray-400",children:"Planned Daily Targets"}),z>0&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-amber-400",children:[z," meals skipped/week"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-accent-primary",children:Q}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400",children:z>0?`avg cal/day (was ${O})`:"Calories"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-accent-secondary",children:[q,"g"]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400",children:"Protein"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Dietary Restrictions"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:DIETARY_OPTIONS.map(U=>jsxRuntimeExports.jsxs("button",{onClick:()=>_("dietaryRestrictions",U.id),className:`p-2 rounded-lg border text-center transition-all ${A.dietaryRestrictions.includes(U.id)?"bg-accent-secondary/20 border-accent-secondary text-white":"bg-dark-700 border-dark-600 text-gray-400 hover:border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-base block",children:U.icon}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:U.label})]},U.id))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Meals/Day"}),jsxRuntimeExports.jsx("div",{className:"flex gap-1",children:[2,3,4].map(U=>jsxRuntimeExports.jsx("button",{onClick:()=>w(K=>({...K,mealsPerDay:U,excludedMeals:{}})),className:`flex-1 py-2 rounded-lg border text-sm transition-all ${A.mealsPerDay===U?"bg-accent-primary/20 border-accent-primary text-white":"bg-dark-700 border-dark-600 text-gray-400"}`,children:U},U))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Snacks/Day"}),jsxRuntimeExports.jsx("div",{className:"flex gap-1",children:[0,1,2].map(U=>jsxRuntimeExports.jsx("button",{onClick:()=>w(K=>({...K,snacksPerDay:U,excludedMeals:{}})),className:`flex-1 py-2 rounded-lg border text-sm transition-all ${A.snacksPerDay===U?"bg-accent-secondary/20 border-accent-secondary text-white":"bg-dark-700 border-dark-600 text-gray-400"}`,children:U},U))})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 text-gray-400"}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white",children:"Skip Meals (eating out, etc.)"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Tap to skip - checked meals won't be planned"}),jsxRuntimeExports.jsx("div",{className:"bg-dark-700 rounded-xl p-3 overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-xs",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"text-left text-gray-500 font-medium pb-2 pr-2"}),DAYS_OF_WEEK.map(U=>jsxRuntimeExports.jsx("th",{className:"text-center text-gray-400 font-medium pb-2 px-1",children:U.label},U.id))]})}),jsxRuntimeExports.jsx("tbody",{children:F.map((U,K)=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"text-gray-400 pr-2 py-1 whitespace-nowrap",children:U==="B"?"":U==="L"?"":U==="D"?"":""}),DAYS_OF_WEEK.map(ne=>{const be=A.excludedMeals[`${ne.id}-${K}`];return jsxRuntimeExports.jsx("td",{className:"text-center px-1 py-1",children:jsxRuntimeExports.jsx("button",{onClick:()=>J(ne.id,K),className:`w-6 h-6 rounded border transition-all ${be?"bg-amber-500/30 border-amber-500 text-amber-400":"bg-dark-600 border-dark-500 text-transparent hover:border-dark-400"}`,children:be&&jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 mx-auto"})})},ne.id)})]},K))})]})})]})]}),j===2&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Favorite Cuisines"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:CUISINE_OPTIONS.map(U=>jsxRuntimeExports.jsxs("button",{onClick:()=>_("cuisinePreferences",U.id),className:`p-3 rounded-lg border text-center transition-all ${A.cuisinePreferences.includes(U.id)?"bg-accent-secondary/20 border-accent-secondary text-white":"bg-dark-700 border-dark-600 text-gray-400 hover:border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-lg block mb-1",children:U.icon}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:U.label})]},U.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Foods You Dislike"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:COMMON_DISLIKES.map(U=>jsxRuntimeExports.jsx("button",{onClick:()=>_("dislikedFoods",U),className:`px-3 py-1.5 rounded-full text-sm transition-all ${A.dislikedFoods.includes(U)?"bg-red-500/20 border border-red-500/50 text-red-400":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:U},U))}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Other foods (comma separated)",value:A.customDislikes,onChange:U=>w(K=>({...K,customDislikes:U.target.value})),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 text-sm"})]})]}),j===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Cooking Time Preference"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:[{id:"quick",label:"Quick & Easy",desc:"15-20 min meals",icon:""},{id:"moderate",label:"Moderate",desc:"30-45 min meals",icon:""},{id:"elaborate",label:"Elaborate",desc:"60+ min, gourmet",icon:""}].map(U=>jsxRuntimeExports.jsxs("button",{onClick:()=>w(K=>({...K,cookingTime:U.id})),className:`w-full p-3 rounded-lg border flex items-center gap-3 transition-all ${A.cookingTime===U.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-600 hover:border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:U.icon}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-white font-medium",children:U.label}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400",children:U.desc})]}),A.cookingTime===U.id&&jsxRuntimeExports.jsx(Check,{className:"w-5 h-5 text-accent-primary ml-auto"})]},U.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Meal Prep Style"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:[{id:"meal-prep",label:"Meal Prep",desc:"Cook once, eat all week",icon:""},{id:"daily",label:"Cook Daily",desc:"Fresh meals every day",icon:""},{id:"mix",label:"Mix of Both",desc:"Some prep, some fresh",icon:""}].map(U=>jsxRuntimeExports.jsxs("button",{onClick:()=>w(K=>({...K,prepPreference:U.id})),className:`w-full p-3 rounded-lg border flex items-center gap-3 transition-all ${A.prepPreference===U.id?"bg-accent-secondary/20 border-accent-secondary":"bg-dark-700 border-dark-600 hover:border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:U.icon}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-white font-medium",children:U.label}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400",children:U.desc})]}),A.prepPreference===U.id&&jsxRuntimeExports.jsx(Check,{className:"w-5 h-5 text-accent-secondary ml-auto"})]},U.id))})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-dark-600 flex gap-3",children:[j>1&&jsxRuntimeExports.jsx("button",{onClick:()=>g(U=>U-1),className:"flex-1 py-3 px-4 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Back"}),j<3?jsxRuntimeExports.jsxs("button",{onClick:()=>g(U=>U+1),className:"flex-1 py-3 px-4 bg-accent-primary text-dark-900 font-semibold rounded-lg hover:bg-accent-primary/90 flex items-center justify-center gap-2",children:["Continue",jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4"})]}):jsxRuntimeExports.jsxs("button",{onClick:xe,disabled:N,className:"flex-1 py-3 px-4 bg-accent-secondary text-dark-900 font-semibold rounded-lg hover:bg-accent-secondary/90 flex items-center justify-center gap-2",children:[N?"Saving...":"Generate Meal Plan",jsxRuntimeExports.jsx(Utensils,{className:"w-4 h-4"})]})]})]})})}function StatsView({profile:u,program:h,meals:x,workouts:E}){const j=new Date,g=new Date(j);g.setDate(j.getDate()-j.getDay()),g.setHours(0,0,0,0);const N=x.filter(z=>new Date(z.loggedAt||z.createdAt)>=g),k=E.filter(z=>new Date(z.loggedAt||z.completedAt)>=g),A=N.length?Math.round(N.reduce((z,O)=>z+(O.calories||0),0)/Math.min(7,N.length)):0,w=N.length?Math.round(N.reduce((z,O)=>z+(O.protein||0),0)/Math.min(7,N.length)):0,M=u.daysPerWeek||4,_=Math.min(Math.round(k.length/M*100),100),J=k.reduce((z,O)=>z+(O.exercises?.reduce((q,ae)=>q+(parseInt(ae.sets)||0),0)||0),0);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[jsxRuntimeExports.jsxs("header",{className:"px-6 py-5 bg-dark-800 border-b border-dark-700",children:[jsxRuntimeExports.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(BarChart3,{className:"w-6 h-6 text-accent-primary"}),"Stats & Progress"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"This week's overview"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"text-center",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-8 h-8 text-accent-primary mx-auto mb-2"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-white",children:k.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Workouts"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["of ",M," planned"]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"text-center",children:[jsxRuntimeExports.jsx(Target,{className:"w-8 h-8 text-accent-success mx-auto mb-2"}),jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-white",children:[_,"%"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Adherence"})]})})]}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-5 h-5 text-accent-primary"}),"Training Progress"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Program Week"}),jsxRuntimeExports.jsxs("span",{className:"text-white font-medium",children:[h?.currentWeek||1," of ",h?.mesocycleWeeks||4]})]}),jsxRuntimeExports.jsx(ProgressBar,{value:h?.currentWeek||1,max:h?.mesocycleWeeks||4,color:"primary"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:J}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Weekly Sets"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:k.length>0?Math.round(k.reduce((z,O)=>z+(O.duration||0),0)/k.length):0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Avg Duration"})]})]})]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Flame,{className:"w-5 h-5 text-accent-warning"}),"Nutrition Averages"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Avg Daily Calories"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[A," / ",u.macros?.calories]})]}),jsxRuntimeExports.jsx(ProgressBar,{value:A,max:u.macros?.calories||2e3,color:A>(u.macros?.calories||2e3)?"danger":"warning",size:"sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Avg Daily Protein"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[w,"g / ",u.macros?.protein,"g"]})]}),jsxRuntimeExports.jsx(ProgressBar,{value:w,max:u.macros?.protein||150,color:"success",size:"sm"})]}),jsxRuntimeExports.jsxs("div",{className:"pt-2 text-sm text-gray-500",children:["Based on ",N.length," logged meals"]})]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 text-accent-secondary"}),"Mesocycle Progress"]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:h?.phases?.map((z,O)=>{const q=z===h.currentPhase,ae=h.phases.indexOf(h.currentPhase)>O;return jsxRuntimeExports.jsx("div",{className:`flex-1 p-3 rounded-lg text-center text-sm ${q?"bg-accent-primary text-white":ae?"bg-accent-success/20 text-accent-success":"bg-dark-700 text-gray-500"}`,children:z},z)})})]})})]})]})}const getExperienceLevel=u=>!u||u<1?"Beginner":u<2?"Novice":u<4?"Intermediate":u<7?"Advanced":"Expert",capitalize=u=>u?u.charAt(0).toUpperCase()+u.slice(1):"";function ProfileView({profile:u,program:h,onResetSetup:x}){const{macros:E}=u,j={strength:" Strength",bodybuilding:" Bodybuilding",endurance:" Endurance",fatloss:" Fat Loss",marathon:" Marathon",general:" General"};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[jsxRuntimeExports.jsx("header",{className:"px-6 py-8 bg-gradient-to-b from-accent-primary/20 to-dark-900",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-accent-primary rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-3xl",children:u.name?u.name.charAt(0).toUpperCase():""})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-white",children:u.name||"Athlete"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400",children:[getExperienceLevel(u.yearsTraining)," Level"]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 space-y-4",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Scale,{className:"w-5 h-5 text-accent-secondary"}),"Body Stats"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:u.weight}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:u.weightUnit||"lbs"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:u.heightUnit==="metric"?u.heightCm:`${u.heightFeet}'${u.heightInches}"`}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:u.heightUnit==="metric"?"cm":"imperial"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:u.age}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"years"})]})]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Flame,{className:"w-5 h-5 text-accent-warning"}),"Daily Nutrition Targets"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-white",children:E?.calories}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Calories"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-accent-success",children:[E?.protein,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Protein"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-accent-warning",children:[E?.carbs,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Carbs"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-accent-secondary",children:[E?.fat,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Fat"})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["TDEE: ",u.tdee," kcal/day  BMR: ",u.bmr," kcal/day"]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"w-5 h-5 text-accent-primary"}),"Training Goals"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Primary"}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:j[u.programSubtype]||capitalize(u.programType)})]}),u.enableHybrid&&u.secondaryProgramType&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-accent-primary/10 border border-accent-primary/30 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:"Hybrid"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[" ",u.allowDoubleDays?"AM/PM Splits":"Alternating"]})]})]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 text-accent-secondary"}),"Current Program"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Program"}),jsxRuntimeExports.jsx("span",{className:"text-white",children:h?.name||"Custom"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Week"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[h?.currentWeek," of ",h?.mesocycleWeeks]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Phase"}),jsxRuntimeExports.jsx("span",{className:"text-white",children:h?.currentPhase})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"pt-4",children:jsxRuntimeExports.jsxs(Button,{variant:"secondary",fullWidth:!0,onClick:x,children:[jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4 mr-2"}),"Reset & Start Over"]})}),jsxRuntimeExports.jsx("p",{className:"text-center text-xs text-gray-600 pt-4",children:"MOTUS v1.0  Powered by Claude AI"})]})]})}const analyzeFood=async u=>{if(localStorage.getItem("motus_test_no_api")==="true")return console.log("[TEST MODE] Bypassing food analysis API, using mock data"),await testModeFoodAnalysis();const x=u.split(",")[1],E=u.split(";")[0].split(":")[1]||"image/jpeg";try{const j=await fetch("/api/analyze-food",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:x,mediaType:E})});if(!j.ok)throw new Error("API request failed");return await j.json()}catch(j){return console.error("Food analysis API error:",j),await fallbackAnalysis()}},testModeFoodAnalysis=async()=>{await new Promise(h=>setTimeout(h,800));const u=[{foods:[{name:"Grilled Chicken Breast",portion:"6 oz",calories:280,protein:52,carbs:0,fat:6},{name:"Brown Rice",portion:"1 cup cooked",calories:215,protein:5,carbs:45,fat:2},{name:"Steamed Broccoli",portion:"1 cup",calories:55,protein:4,carbs:11,fat:1}],totals:{calories:550,protein:61,carbs:56,fat:9},confidence:.85,suggestions:["[TEST MODE] Mock data - no API call made","Tap Edit to adjust items and macros"]},{foods:[{name:"Salmon Fillet",portion:"5 oz",calories:290,protein:36,carbs:0,fat:16},{name:"Sweet Potato",portion:"1 medium",calories:103,protein:2,carbs:24,fat:0},{name:"Mixed Green Salad",portion:"2 cups",calories:30,protein:2,carbs:5,fat:0}],totals:{calories:423,protein:40,carbs:29,fat:16},confidence:.82,suggestions:["[TEST MODE] Mock data - no API call made","Good protein-to-calorie ratio!"]},{foods:[{name:"Greek Yogurt Parfait",portion:"1 bowl",calories:320,protein:24,carbs:42,fat:8},{name:"Mixed Berries",portion:"1/2 cup",calories:40,protein:1,carbs:10,fat:0},{name:"Granola",portion:"1/4 cup",calories:120,protein:3,carbs:20,fat:4}],totals:{calories:480,protein:28,carbs:72,fat:12},confidence:.88,suggestions:["[TEST MODE] Mock data - no API call made","Great post-workout snack!"]}];return u[Math.floor(Math.random()*u.length)]},fallbackAnalysis=async u=>(await new Promise(h=>setTimeout(h,1e3)),{foods:[{name:"Food Item 1",portion:"Estimate portion",calories:300,protein:20,carbs:30,fat:10}],totals:{calories:300,protein:20,carbs:30,fat:10},confidence:.3,suggestions:[" AI analysis unavailable - please edit the items above",'Tap "Edit" to adjust food names, portions, and macros'],isFallback:!0});function PhotoFoodLogger({onLog:u,onClose:h}){const[x,E]=reactExports.useState("capture"),[j,g]=reactExports.useState(null),[N,k]=reactExports.useState(null),[A,w]=reactExports.useState([]),[M,_]=reactExports.useState(null),J=reactExports.useRef(null),z=reactExports.useRef(null),[O,q]=reactExports.useState(null),[ae,je]=reactExports.useState(!1),ue=async()=>{try{const L=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});q(L),je(!0),z.current&&(z.current.srcObject=L)}catch(L){console.error("Camera access denied:",L),_("Camera access denied. Please allow camera access or upload an image instead.")}},te=()=>{O&&(O.getTracks().forEach(L=>L.stop()),q(null)),je(!1)},Q=()=>{if(z.current){const L=document.createElement("canvas");L.width=z.current.videoWidth,L.height=z.current.videoHeight,L.getContext("2d").drawImage(z.current,0,0);const W=L.toDataURL("image/jpeg",.8);g(W),te(),ce(W)}},xe=L=>{const W=L.target.files[0];if(W){const me=new FileReader;me.onload=I=>{g(I.target.result),ce(I.target.result)},me.readAsDataURL(W)}},ce=async L=>{E("analyzing"),_(null);try{const W=await analyzeFood(L);k(W),w(W.foods.map(me=>({...me,selected:!0,multiplier:1,baseValues:{calories:parseFloat(me.calories)||0,protein:parseFloat(me.protein)||0,carbs:parseFloat(me.carbs)||0,fat:parseFloat(me.fat)||0}}))),E("review")}catch(W){console.error("Analysis failed:",W),_("Failed to analyze food. Please try again or log manually."),E("capture")}},F=L=>{w(W=>W.map((me,I)=>I===L?{...me,selected:!me.selected}:me))},U=(L,W,me)=>{w(I=>I.map((pe,se)=>{if(se!==L)return pe;if(W==="multiplier"){const ie=parseFloat(me)||1;return{...pe,multiplier:ie,calories:(pe.baseValues.calories*ie).toFixed(1),protein:(pe.baseValues.protein*ie).toFixed(1),carbs:(pe.baseValues.carbs*ie).toFixed(1),fat:(pe.baseValues.fat*ie).toFixed(1)}}return{...pe,[W]:me}}))},K=()=>{const L=A.filter(me=>me.selected),W=L.reduce((me,I)=>({calories:me.calories+(parseFloat(I.calories)||0),protein:me.protein+(parseFloat(I.protein)||0),carbs:me.carbs+(parseFloat(I.carbs)||0),fat:me.fat+(parseFloat(I.fat)||0)}),{calories:0,protein:0,carbs:0,fat:0});u({foods:L,totals:W,image:j,loggedAt:new Date().toISOString(),method:"photo"}),h()},ne=()=>{g(null),k(null),w([]),E("capture"),_(null),te()},be=A.filter(L=>L.selected).reduce((L,W)=>({calories:L.calories+(parseFloat(W.calories)||0),protein:L.protein+(parseFloat(W.protein)||0),carbs:L.carbs+(parseFloat(W.carbs)||0),fat:L.fat+(parseFloat(W.fat)||0)}),{calories:0,protein:0,carbs:0,fat:0});return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/90 flex flex-col z-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-800",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-bold text-white",children:[x==="capture"&&" Snap Your Meal",x==="analyzing"&&" Analyzing...",x==="review"&&" Review & Log",x==="edit"&&" Edit Details"]}),jsxRuntimeExports.jsx("button",{onClick:()=>{te(),h()},className:"p-2 rounded-full hover:bg-dark-700 text-gray-400",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto",children:[x==="capture"&&jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[M&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-red-300",children:M})}),ae?jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("video",{ref:z,autoPlay:!0,playsInline:!0,className:"w-full rounded-xl"}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:te,className:"p-3 bg-dark-800/80 rounded-full text-white",children:jsxRuntimeExports.jsx(X,{className:"w-6 h-6"})}),jsxRuntimeExports.jsx("button",{onClick:Q,className:"p-4 bg-white rounded-full",children:jsxRuntimeExports.jsx(Camera,{className:"w-8 h-8 text-dark-900"})})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("button",{onClick:ue,className:"w-full p-8 bg-dark-700 rounded-xl border-2 border-dashed border-dark-500 hover:border-accent-primary transition-colors flex flex-col items-center gap-3",children:[jsxRuntimeExports.jsx(Camera,{className:"w-12 h-12 text-accent-primary"}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Take Photo"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400",children:"Use your camera to capture your meal"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 h-px bg-dark-600"}),jsxRuntimeExports.jsx("span",{className:"text-gray-500 text-sm",children:"or"}),jsxRuntimeExports.jsx("div",{className:"flex-1 h-px bg-dark-600"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>J.current?.click(),className:"w-full p-6 bg-dark-800 rounded-xl border border-dark-600 hover:border-dark-400 transition-colors flex items-center justify-center gap-3",children:[jsxRuntimeExports.jsx(Upload,{className:"w-6 h-6 text-gray-400"}),jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"Upload from Gallery"})]}),jsxRuntimeExports.jsx("input",{ref:J,type:"file",accept:"image/*",onChange:xe,className:"hidden"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 p-4 bg-dark-800 rounded-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-medium mb-2",children:" Tips for best results:"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" Take the photo from directly above"}),jsxRuntimeExports.jsx("li",{children:" Make sure all food is visible"}),jsxRuntimeExports.jsx("li",{children:" Good lighting helps accuracy"}),jsxRuntimeExports.jsx("li",{children:" Include a reference object (fork, hand) for portion sizing"})]})]})]}),x==="analyzing"&&jsxRuntimeExports.jsxs("div",{className:"p-4 flex flex-col items-center justify-center min-h-[60vh]",children:[j&&jsxRuntimeExports.jsx("img",{src:j,alt:"Food",className:"w-48 h-48 object-cover rounded-xl mb-6 opacity-50"}),jsxRuntimeExports.jsx(Loader2,{className:"w-12 h-12 text-accent-primary animate-spin mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Analyzing your meal..."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Identifying foods and estimating macros"})]}),(x==="review"||x==="edit")&&N&&jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[j&&jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:j,alt:"Food",className:"w-full h-48 object-cover rounded-xl"}),jsxRuntimeExports.jsx("button",{onClick:ne,className:"absolute top-2 right-2 p-2 bg-dark-800/80 rounded-full text-white",children:jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400",children:"AI Confidence"}),jsxRuntimeExports.jsxs("span",{className:`text-sm font-medium ${N.confidence>.8?"text-green-400":N.confidence>.6?"text-yellow-400":"text-orange-400"}`,children:[Math.round(N.confidence*100),"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-medium",children:"Detected Foods"}),jsxRuntimeExports.jsxs("button",{onClick:()=>E(x==="edit"?"review":"edit"),className:"text-sm text-accent-primary flex items-center gap-1",children:[jsxRuntimeExports.jsx(Pen,{className:"w-4 h-4"}),x==="edit"?"Done Editing":"Edit"]})]}),A.map((L,W)=>jsxRuntimeExports.jsx("div",{className:`p-3 rounded-lg border transition-all ${L.selected?"bg-dark-700 border-accent-primary/50":"bg-dark-800 border-dark-600 opacity-50"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>F(W),className:`mt-1 w-5 h-5 rounded border flex items-center justify-center ${L.selected?"bg-accent-primary border-accent-primary":"border-dark-500"}`,children:L.selected&&jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 text-dark-900"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[x==="edit"?jsxRuntimeExports.jsx("input",{type:"text",value:L.name,onChange:me=>U(W,"name",me.target.value),className:"w-full bg-dark-600 border border-dark-500 rounded px-2 py-1 text-white text-sm mb-2"}):jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:L.name}),x==="edit"?jsxRuntimeExports.jsxs("div",{className:"mb-3 space-y-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500",children:"Serving Size:"}),jsxRuntimeExports.jsx("input",{type:"number",step:"0.1",min:"0.1",value:L.multiplier||1,onChange:me=>U(W,"multiplier",me.target.value),className:"w-16 bg-dark-600 border border-dark-500 rounded px-2 py-1 text-white text-sm font-medium"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"x"})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:[.5,1,1.5,2].map(me=>jsxRuntimeExports.jsxs("button",{onClick:()=>U(W,"multiplier",me.toString()),className:`px-3 py-1 rounded text-xs font-medium transition-colors ${L.multiplier===me?"bg-accent-primary text-dark-900":"bg-dark-600 text-gray-300 border border-dark-500 hover:border-accent-primary/50"}`,children:[me,"x"]},me))}),jsxRuntimeExports.jsx("input",{type:"text",value:L.portion,onChange:me=>U(W,"portion",me.target.value),className:"w-full bg-dark-600 border border-dark-500 rounded px-2 py-1 text-gray-400 text-xs",placeholder:"e.g., 6 oz chicken"})]}):jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:L.portion}),x==="edit"?jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500",children:"Cal"}),jsxRuntimeExports.jsx("input",{type:"number",value:L.calories,onChange:me=>U(W,"calories",me.target.value),className:"w-full bg-dark-600 border border-dark-500 rounded px-2 py-1 text-white text-xs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500",children:"P"}),jsxRuntimeExports.jsx("input",{type:"number",value:L.protein,onChange:me=>U(W,"protein",me.target.value),className:"w-full bg-dark-600 border border-dark-500 rounded px-2 py-1 text-white text-xs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500",children:"C"}),jsxRuntimeExports.jsx("input",{type:"number",value:L.carbs,onChange:me=>U(W,"carbs",me.target.value),className:"w-full bg-dark-600 border border-dark-500 rounded px-2 py-1 text-white text-xs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500",children:"F"}),jsxRuntimeExports.jsx("input",{type:"number",value:L.fat,onChange:me=>U(W,"fat",me.target.value),className:"w-full bg-dark-600 border border-dark-500 rounded px-2 py-1 text-white text-xs"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-1 text-xs",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:[L.calories," cal"]}),jsxRuntimeExports.jsxs("span",{className:"text-blue-400",children:[L.protein,"g P"]}),jsxRuntimeExports.jsxs("span",{className:"text-yellow-400",children:[L.carbs,"g C"]}),jsxRuntimeExports.jsxs("span",{className:"text-red-400",children:[L.fat,"g F"]})]})]})]})},W))]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-accent-primary/10 rounded-xl border border-accent-primary/30",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-medium mb-3",children:"Meal Total"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:Math.round(be.calories)}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Calories"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:[Math.round(be.protein),"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Protein"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:[Math.round(be.carbs),"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-red-400",children:[Math.round(be.fat),"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]})]}),N.suggestions&&N.suggestions.length>0&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-2",children:" Tips:"}),N.suggestions.map((L,W)=>jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300",children:[" ",L]},W))]})]})]}),(x==="review"||x==="edit")&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-dark-800 border-t border-dark-600",children:jsxRuntimeExports.jsxs("button",{onClick:K,disabled:A.filter(L=>L.selected).length===0,className:"w-full py-4 bg-accent-primary text-dark-900 font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed",children:["Log This Meal (",Math.round(be.calories)," cal)"]})})]})}const OPEN_FOOD_FACTS_API="https://world.openfoodfacts.org/api/v2",UNIT_CONVERSIONS={g:1,gram:1,grams:1,kg:1e3,oz:28.3495,ounce:28.3495,ounces:28.3495,lb:453.592,pound:453.592,pounds:453.592,ml:1,milliliter:1,milliliters:1,l:1e3,liter:1e3,liters:1e3,"fl oz":29.5735,"fluid ounce":29.5735,"fluid ounces":29.5735,cup:236.588,cups:236.588,tbsp:14.787,tablespoon:14.787,tablespoons:14.787,tsp:4.929,teaspoon:4.929,teaspoons:4.929,pint:473.176,quart:946.353,gallon:3785.41},SERVING_OPTIONS=[{label:"Serving",value:"serving",icon:""},{label:"Gram (g)",value:"g",icon:""},{label:"Ounce (oz)",value:"oz",icon:""},{label:"Cup",value:"cup",icon:""},{label:"Tablespoon",value:"tbsp",icon:""},{label:"Teaspoon",value:"tsp",icon:""},{label:"Fluid Oz",value:"fl oz",icon:""},{label:"mL",value:"ml",icon:""},{label:"Piece",value:"piece",icon:""},{label:"Slice",value:"slice",icon:""},{label:"Container",value:"container",icon:""}];function convertUnits(u,h,x){const E=h.toLowerCase(),j=x.toLowerCase();if(E===j)return u;const g=UNIT_CONVERSIONS[E],N=UNIT_CONVERSIONS[j];return!g||!N?(console.warn(`Unknown unit conversion: ${h} to ${x}`),u):u*g/N}async function fetchProductByBarcode(u){try{const x=await(await fetch(`${OPEN_FOOD_FACTS_API}/product/${u}.json`)).json();if(x.status!==1||!x.product)return{success:!1,error:"Product not found"};const E=x.product,j=E.nutriments||{},g=E.serving_size||"100g",N=parseServingSize(g);return{success:!0,product:{barcode:u,name:E.product_name||E.product_name_en||"Unknown Product",brand:E.brands||"",image:E.image_front_small_url||E.image_url||null,servingSize:g,servingSizeGrams:N,per100g:{calories:Math.round(j["energy-kcal_100g"]||j.energy_100g/4.184||0),protein:Math.round((j.proteins_100g||0)*10)/10,carbs:Math.round((j.carbohydrates_100g||0)*10)/10,fat:Math.round((j.fat_100g||0)*10)/10,fiber:Math.round((j.fiber_100g||0)*10)/10,sugar:Math.round((j.sugars_100g||0)*10)/10,sodium:Math.round(j.sodium_100g*1e3||0)},perServing:{calories:Math.round(j["energy-kcal_serving"]||(j["energy-kcal_100g"]||0)*N/100),protein:Math.round((j.proteins_serving||(j.proteins_100g||0)*N/100)*10)/10,carbs:Math.round((j.carbohydrates_serving||(j.carbohydrates_100g||0)*N/100)*10)/10,fat:Math.round((j.fat_serving||(j.fat_100g||0)*N/100)*10)/10},categories:E.categories||"",ingredients:E.ingredients_text||E.ingredients_text_en||"",allergens:E.allergens||"",nutriscore:E.nutriscore_grade||null}}}catch(h){return console.error("Error fetching product:",h),{success:!1,error:"Failed to fetch product data"}}}async function searchProducts(u,h=1){try{const E=await(await fetch(`${OPEN_FOOD_FACTS_API}/search?search_terms=${encodeURIComponent(u)}&page=${h}&page_size=20&fields=code,product_name,brands,image_front_small_url,nutriments,serving_size`)).json();return E.products?{success:!0,products:E.products.map(g=>{const N=g.nutriments||{},k=g.serving_size||"100g",A=parseServingSize(k);return{barcode:g.code,name:g.product_name||"Unknown Product",brand:g.brands||"",image:g.image_front_small_url||null,servingSize:k,servingSizeGrams:A,perServing:{calories:Math.round((N["energy-kcal_100g"]||0)*A/100),protein:Math.round((N.proteins_100g||0)*A/100*10)/10,carbs:Math.round((N.carbohydrates_100g||0)*A/100*10)/10,fat:Math.round((N.fat_100g||0)*A/100*10)/10},per100g:{calories:Math.round(N["energy-kcal_100g"]||0),protein:Math.round((N.proteins_100g||0)*10)/10,carbs:Math.round((N.carbohydrates_100g||0)*10)/10,fat:Math.round((N.fat_100g||0)*10)/10}}}).filter(g=>g.name!=="Unknown Product"),totalCount:E.count||0,page:E.page||1}:{success:!1,error:"No products found",products:[]}}catch(x){return console.error("Error searching products:",x),{success:!1,error:"Failed to search products",products:[]}}}function parseServingSize(u){if(!u)return 100;const h=u.match(/(\d+\.?\d*)\s*(g|ml|oz|cup|tbsp|tsp)?/i);if(h){const x=parseFloat(h[1]),E=(h[2]||"g").toLowerCase();return convertUnits(x,E,"g")}return 100}function calculateNutrition(u,h,x){if(!u||!u.per100g)return null;let E;x==="serving"?(E=u.servingSizeGrams||100,E*=h):x==="piece"||x==="slice"||x==="container"?E=(u.servingSizeGrams||100)*h:E=convertUnits(h,x,"g");const j=E/100;return{calories:Math.round(u.per100g.calories*j),protein:Math.round(u.per100g.protein*j*10)/10,carbs:Math.round(u.per100g.carbs*j*10)/10,fat:Math.round(u.per100g.fat*j*10)/10,fiber:u.per100g.fiber?Math.round(u.per100g.fiber*j*10)/10:null,sugar:u.per100g.sugar?Math.round(u.per100g.sugar*j*10)/10:null,grams:Math.round(E)}}const COMMON_FOODS=[{id:"egg",name:"Egg (large)",brand:"Generic",servingSize:"1 large (50g)",servingSizeGrams:50,per100g:{calories:143,protein:12.6,carbs:.7,fat:9.5},perServing:{calories:72,protein:6.3,carbs:.4,fat:4.8}},{id:"chicken_breast",name:"Chicken Breast (cooked)",brand:"Generic",servingSize:"3 oz (85g)",servingSizeGrams:85,per100g:{calories:165,protein:31,carbs:0,fat:3.6},perServing:{calories:140,protein:26,carbs:0,fat:3.1}},{id:"rice_white",name:"White Rice (cooked)",brand:"Generic",servingSize:"1 cup (158g)",servingSizeGrams:158,per100g:{calories:130,protein:2.7,carbs:28,fat:.3},perServing:{calories:205,protein:4.3,carbs:44.2,fat:.4}},{id:"oats",name:"Oatmeal (dry)",brand:"Generic",servingSize:"1/2 cup (40g)",servingSizeGrams:40,per100g:{calories:389,protein:16.9,carbs:66,fat:6.9},perServing:{calories:156,protein:6.8,carbs:26.4,fat:2.8}},{id:"banana",name:"Banana (medium)",brand:"Generic",servingSize:"1 medium (118g)",servingSizeGrams:118,per100g:{calories:89,protein:1.1,carbs:23,fat:.3},perServing:{calories:105,protein:1.3,carbs:27,fat:.4}},{id:"apple",name:"Apple (medium)",brand:"Generic",servingSize:"1 medium (182g)",servingSizeGrams:182,per100g:{calories:52,protein:.3,carbs:14,fat:.2},perServing:{calories:95,protein:.5,carbs:25,fat:.3}},{id:"greek_yogurt",name:"Greek Yogurt (plain)",brand:"Generic",servingSize:"1 cup (227g)",servingSizeGrams:227,per100g:{calories:59,protein:10,carbs:3.6,fat:.7},perServing:{calories:134,protein:23,carbs:8.2,fat:1.6}},{id:"almonds",name:"Almonds",brand:"Generic",servingSize:"1 oz (28g)",servingSizeGrams:28,per100g:{calories:579,protein:21,carbs:22,fat:50},perServing:{calories:162,protein:6,carbs:6,fat:14}},{id:"salmon",name:"Salmon (cooked)",brand:"Generic",servingSize:"3 oz (85g)",servingSizeGrams:85,per100g:{calories:208,protein:20,carbs:0,fat:13},perServing:{calories:177,protein:17,carbs:0,fat:11}},{id:"broccoli",name:"Broccoli (cooked)",brand:"Generic",servingSize:"1 cup (156g)",servingSizeGrams:156,per100g:{calories:35,protein:2.4,carbs:7,fat:.4},perServing:{calories:55,protein:3.7,carbs:11,fat:.6}},{id:"avocado",name:"Avocado",brand:"Generic",servingSize:"1/2 avocado (68g)",servingSizeGrams:68,per100g:{calories:160,protein:2,carbs:9,fat:15},perServing:{calories:109,protein:1.4,carbs:6,fat:10}},{id:"protein_shake",name:"Protein Shake (whey)",brand:"Generic",servingSize:"1 scoop (30g)",servingSizeGrams:30,per100g:{calories:400,protein:80,carbs:10,fat:5},perServing:{calories:120,protein:24,carbs:3,fat:1.5}}];function LogMealModal({isOpen:u,onClose:h,onSave:x,mealPlan:E}){const[j,g]=reactExports.useState("main"),[N,k]=reactExports.useState(!1),[A,w]=reactExports.useState(null),[M,_]=reactExports.useState([]),[J,z]=reactExports.useState(""),[O,q]=reactExports.useState([]),[ae,je]=reactExports.useState(null),[ue,te]=reactExports.useState("1"),[Q,xe]=reactExports.useState("serving"),[ce,F]=reactExports.useState(null),[U,K]=reactExports.useState(""),[ne,be]=reactExports.useState(""),L=()=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()],W=ee=>{if(!E?.week)return null;const Ae=L(),ye=E.week[Ae];if(!ye?.meals)return null;const Le={Breakfast:"breakfast",Lunch:"lunch",Dinner:"dinner",Snack:"snack","Pre-workout":"snack","Post-workout":"snack"}[ee]||ee.toLowerCase();return ye.meals.find(Ue=>Ue.type===Le)},me=ee=>{const Ae={id:Date.now(),name:ee.title,brand:"From Meal Plan",amount:1,unit:"serving",calories:ee.calories,protein:ee.protein,carbs:ee.carbs,fat:ee.fat};_([Ae])};reactExports.useEffect(()=>{u||(g("main"),_([]),z(""),q([]),je(null),te("1"),xe("serving"),w(null),K(""),be(""))},[u]),reactExports.useEffect(()=>{if(ae){const ee=parseFloat(ue)||0,Ae=calculateNutrition(ae,ee,Q);F(Ae)}},[ae,ue,Q]);const I=async ee=>{g("main"),k(!0),w(null);try{const Ae=await fetchProductByBarcode(ee);Ae.success?(je(Ae.product),te("1"),xe("serving"),g("product")):w(`Product not found for barcode: ${ee}`)}catch{w("Failed to fetch product. Please try again.")}finally{k(!1)}},pe=async()=>{if(J.trim()){k(!0),w(null);try{const ee=await searchProducts(J);ee.success?(q(ee.products),ee.products.length===0&&w("No products found. Try a different search term.")):w("Search failed. Please try again.")}catch{w("Search failed. Please try again.")}finally{k(!1)}}},se=ee=>{je(ee),te("1"),xe("serving"),g("product")},ie=()=>{if(!ae||!ce)return;const ee={id:Date.now(),name:ae.name,brand:ae.brand,barcode:ae.barcode,amount:parseFloat(ue)||1,unit:Q,...ce};_([...M,ee]),je(null),F(null),g("main")},Ee=ee=>{_(M.filter(Ae=>Ae.id!==ee))},V=M.reduce((ee,Ae)=>({calories:ee.calories+(Ae.calories||0),protein:ee.protein+(Ae.protein||0),carbs:ee.carbs+(Ae.carbs||0),fat:ee.fat+(Ae.fat||0)}),{calories:0,protein:0,carbs:0,fat:0}),D=()=>{if(M.length===0)return;const ee={name:ne||`Meal (${M.length} items)`,items:M,calories:Math.round(V.calories),protein:Math.round(V.protein*10)/10,carbs:Math.round(V.carbs*10)/10,fat:Math.round(V.fat*10)/10,loggedAt:new Date().toISOString()};x(ee),h()},G=()=>{U.trim()&&I(U.trim())},Te=ee=>{const Ae=ee.foods.map((ye,Ge)=>({id:Date.now()+Ge,name:ye.name,brand:"Photo Analysis",amount:1,unit:ye.portion,calories:parseFloat(ye.calories)||0,protein:parseFloat(ye.protein)||0,carbs:parseFloat(ye.carbs)||0,fat:parseFloat(ye.fat)||0}));_([...M,...Ae]),g("main")};return j==="photo"?jsxRuntimeExports.jsx(PhotoFoodLogger,{onLog:Te,onClose:()=>g("main")}):j==="scanner"?jsxRuntimeExports.jsx(BarcodeScanner,{isOpen:!0,onScan:I,onClose:()=>g("main")}):j==="product"&&ae?jsxRuntimeExports.jsx(Modal,{isOpen:u,onClose:()=>g("main"),title:"Add Food",size:"md",children:jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[ae.image?jsxRuntimeExports.jsx("img",{src:ae.image,alt:ae.name,className:"w-20 h-20 rounded-lg object-cover bg-dark-700"}):jsxRuntimeExports.jsx("div",{className:"w-20 h-20 rounded-lg bg-dark-700 flex items-center justify-center",children:jsxRuntimeExports.jsx(Utensils,{className:"w-8 h-8 text-gray-500"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:ae.name}),ae.brand&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:ae.brand}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Serving: ",ae.servingSize]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl space-y-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Serving Size"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Amount"}),jsxRuntimeExports.jsx("input",{type:"number",value:ue,onChange:ee=>te(ee.target.value),min:"0.1",step:"0.1",className:"w-full px-4 py-3 bg-dark-600 border border-dark-500 rounded-lg text-white text-lg font-medium focus:border-accent-primary focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Unit"}),jsxRuntimeExports.jsx("select",{value:Q,onChange:ee=>xe(ee.target.value),className:"w-full px-4 py-3 bg-dark-600 border border-dark-500 rounded-lg text-white focus:border-accent-primary focus:outline-none appearance-none",children:SERVING_OPTIONS.map(ee=>jsxRuntimeExports.jsxs("option",{value:ee.value,children:[ee.icon," ",ee.label]},ee.value))})]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap",children:[.5,1,1.5,2].map(ee=>jsxRuntimeExports.jsxs("button",{onClick:()=>te(ee.toString()),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${parseFloat(ue)===ee?"bg-accent-primary text-white":"bg-dark-600 text-gray-400 hover:bg-dark-500"}`,children:[ee," ",Q==="serving"?"serving":Q]},ee))})]}),ce&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-xl border border-accent-primary/20",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:ce.calories}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Calories"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-accent-primary",children:[ce.protein,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Protein"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-accent-warning",children:[ce.carbs,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-accent-secondary",children:[ce.fat,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>g("main"),fullWidth:!0,children:"Cancel"}),jsxRuntimeExports.jsxs(Button,{onClick:ie,fullWidth:!0,disabled:!ce,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Add to Meal"]})]})]})}):j==="search"?jsxRuntimeExports.jsx(Modal,{isOpen:u,onClose:()=>g("main"),title:"Search Food",size:"md",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("input",{type:"text",value:J,onChange:ee=>z(ee.target.value),onKeyPress:ee=>ee.key==="Enter"&&pe(),placeholder:"Search foods...",className:"w-full pl-10 pr-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white focus:border-accent-primary focus:outline-none",autoFocus:!0})]}),jsxRuntimeExports.jsx(Button,{onClick:pe,disabled:N,children:N?jsxRuntimeExports.jsx(Loader2,{className:"w-5 h-5 animate-spin"}):"Search"})]}),A&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"w-5 h-5 text-red-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-red-400",children:A})]}),jsxRuntimeExports.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:O.map((ee,Ae)=>jsxRuntimeExports.jsxs("button",{onClick:()=>se(ee),className:"w-full p-3 bg-dark-700 rounded-lg flex items-center gap-3 hover:bg-dark-600 transition-colors text-left",children:[ee.image?jsxRuntimeExports.jsx("img",{src:ee.image,alt:"",className:"w-12 h-12 rounded-lg object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-lg bg-dark-600 flex items-center justify-center",children:jsxRuntimeExports.jsx(Utensils,{className:"w-5 h-5 text-gray-500"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium truncate",children:ee.name}),ee.brand&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 truncate",children:ee.brand}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[ee.perServing.calories," cal  ",ee.perServing.protein,"g P"]})]}),jsxRuntimeExports.jsx(ChevronDown,{className:"w-5 h-5 text-gray-500 rotate-[-90deg]"})]},Ae))}),O.length===0&&!N&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Common Foods"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:COMMON_FOODS.slice(0,8).map(ee=>jsxRuntimeExports.jsxs("button",{onClick:()=>se(ee),className:"p-3 bg-dark-700 rounded-lg text-left hover:bg-dark-600 transition-colors",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-white truncate",children:ee.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[ee.perServing.calories," cal"]})]},ee.id))})]}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>g("main"),fullWidth:!0,children:"Back"})]})}):jsxRuntimeExports.jsx(Modal,{isOpen:u,onClose:h,title:"Log Meal",size:"md",children:jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>g("photo"),className:"w-full p-4 bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30 rounded-xl flex items-center gap-4 hover:border-accent-primary/50 transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"w-14 h-14 bg-accent-primary/20 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Camera,{className:"w-7 h-7 text-accent-primary"})}),jsxRuntimeExports.jsxs("div",{className:"text-left flex-1",children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium text-lg",children:" Snap Your Meal"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"AI analyzes your photo instantly"})]}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 text-xs bg-accent-primary/20 text-accent-primary rounded-full",children:"Recommended"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>g("scanner"),className:"p-4 bg-dark-700 border border-dark-500 rounded-xl flex flex-col items-center gap-2 hover:border-dark-400 transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Barcode,{className:"w-6 h-6 text-gray-400"})}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Scan Barcode"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Packaged foods"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>g("search"),className:"p-4 bg-dark-700 border border-dark-500 rounded-xl flex flex-col items-center gap-2 hover:border-dark-400 transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Search,{className:"w-6 h-6 text-gray-400"})}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Search Food"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Browse database"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Or enter barcode manually:"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:U,onChange:ee=>K(ee.target.value),placeholder:"Enter barcode number...",className:"flex-1 px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm focus:border-accent-primary focus:outline-none"}),jsxRuntimeExports.jsx(Button,{size:"sm",onClick:G,disabled:!U.trim()||N,children:N?jsxRuntimeExports.jsx(Loader2,{className:"w-4 h-4 animate-spin"}):"Look up"})]})]}),A&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-red-400",children:A}),jsxRuntimeExports.jsx("button",{onClick:()=>w(null),className:"ml-auto",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4 text-red-400"})})]}),M.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{children:["Food Items (",M.length,")"]}),jsxRuntimeExports.jsxs("span",{className:"text-accent-primary",children:[Math.round(V.calories)," cal"]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:M.map(ee=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-white text-sm font-medium truncate",children:ee.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[ee.amount," ",ee.unit,"  ",ee.calories," cal  ",ee.protein,"g P"]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>Ee(ee.id),className:"p-2 text-gray-500 hover:text-red-400 transition-colors",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]},ee.id))}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-success/10 to-accent-primary/10 rounded-xl border border-accent-success/20",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Meal Totals"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-white",children:Math.round(V.calories)}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"cal"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-xl font-bold text-accent-primary",children:[Math.round(V.protein),"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"protein"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-xl font-bold text-accent-warning",children:[Math.round(V.carbs),"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"carbs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-xl font-bold text-accent-secondary",children:[Math.round(V.fat),"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"fat"})]})]})]})]}),E&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-secondary/10 to-accent-primary/10 rounded-xl border border-accent-secondary/20",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Utensils,{className:"w-4 h-4 text-accent-secondary"}),jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-white",children:"Quick Fill from Today's Plan"})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap",children:["Breakfast","Lunch","Dinner","Snack"].map(ee=>{const Ae=W(ee);return Ae?jsxRuntimeExports.jsxs("button",{onClick:()=>{me(Ae),be(ee)},className:"px-3 py-2 bg-dark-700 border border-accent-secondary/30 rounded-lg text-left hover:border-accent-secondary transition-colors",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-white font-medium",children:ee}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 truncate max-w-[120px]",children:Ae.title}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-accent-secondary mt-0.5",children:[Ae.calories," cal  ",Ae.protein,"g P"]})]},ee):null})}),!W("Breakfast")&&!W("Lunch")&&!W("Dinner")&&!W("Snack")&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"No meals planned for today"})]}),M.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Meal Type (optional)"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap",children:["Breakfast","Lunch","Dinner","Snack","Pre-workout","Post-workout"].map(ee=>jsxRuntimeExports.jsx("button",{onClick:()=>be(ne===ee?"":ee),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${ne===ee?"bg-accent-primary text-white":"bg-dark-700 border border-dark-500 text-gray-300 hover:border-accent-primary"}`,children:ee},ee))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:h,fullWidth:!0,children:"Cancel"}),jsxRuntimeExports.jsxs(Button,{onClick:D,fullWidth:!0,disabled:M.length===0,children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4 mr-2"}),"Log Meal"]})]})]})})}const COMMON_EXERCISES=["Ab Wheel Rollout","Arnold Press","Back Extension","Band Pull Apart","Barbell Bent Over Row","Barbell Curl","Barbell Hip Thrust","Barbell Lunge","Barbell Row","Barbell Shrug","Barbell Squat","Battle Ropes","Bench Dip","Bench Press","Bent Over Dumbbell Row","Bicycle Crunch","Bird Dog","Box Jump","Bulgarian Split Squat","Burpee","Cable Crossover","Cable Crunch","Cable Face Pull","Cable Fly","Cable Kickback","Cable Lateral Raise","Cable Pull Through","Cable Row","Cable Tricep Extension","Cable Woodchop","Calf Press","Calf Raise","Chest Dip","Chest Fly","Chin Up","Clean","Clean and Jerk","Close Grip Bench Press","Concentration Curl","Crunch","Dead Bug","Deadlift","Decline Bench Press","Decline Crunch","Deficit Deadlift","Dip","Dumbbell Bench Press","Dumbbell Bulgarian Split Squat","Dumbbell Curl","Dumbbell Fly","Dumbbell Front Raise","Dumbbell Lateral Raise","Dumbbell Lunge","Dumbbell Overhead Press","Dumbbell Pullover","Dumbbell Romanian Deadlift","Dumbbell Row","Dumbbell Shrug","Dumbbell Squat","Dumbbell Step Up","Dumbbell Tricep Extension","EZ Bar Curl","EZ Bar Skull Crusher","Face Pull","Farmer's Walk","Floor Press","Front Raise","Front Squat","Glute Bridge","Goblet Squat","Good Morning","Hack Squat","Hammer Curl","Hanging Knee Raise","Hanging Leg Raise","High Pull","Hip Abduction","Hip Adduction","Hip Thrust","Incline Bench Press","Incline Dumbbell Curl","Incline Dumbbell Fly","Incline Dumbbell Press","Inverted Row","Jump Rope","Jump Squat","Kettlebell Clean","Kettlebell Snatch","Kettlebell Swing","Kettlebell Turkish Get Up","Kneeling Cable Crunch","Landmine Press","Landmine Row","Lat Pulldown","Lateral Raise","Leg Curl","Leg Extension","Leg Press","Leg Raise","Lunges","Lying Leg Curl","Lying Tricep Extension","Machine Chest Press","Machine Fly","Machine Row","Machine Shoulder Press","Medicine Ball Slam","Military Press","Mountain Climber","Muscle Up","Overhead Press","Overhead Squat","Pallof Press","Pause Squat","Pec Deck","Pendlay Row","Pistol Squat","Plank","Power Clean","Preacher Curl","Press Up","Pull Up","Push Press","Push Up","Rack Pull","Rear Delt Fly","Reverse Crunch","Reverse Fly","Reverse Grip Lat Pulldown","Reverse Lunge","Romanian Deadlift","Rope Climb","Rope Tricep Pushdown","Rowing Machine","Russian Twist","Seated Cable Row","Seated Calf Raise","Seated Dumbbell Press","Seated Leg Curl","Shoulder Press","Side Bend","Side Plank","Single Arm Dumbbell Row","Single Leg Deadlift","Single Leg Squat","Sissy Squat","Sit Up","Skull Crusher","Sled Push","Smith Machine Squat","Snatch","Spider Curl","Split Squat","Squat","Standing Calf Raise","Step Up","Stiff Leg Deadlift","Sumo Deadlift","Sumo Squat","Superman","T-Bar Row","Thruster","Toe Touch","Trap Bar Deadlift","Tricep Dip","Tricep Kickback","Tricep Pushdown","Upright Row","V-Up","Walking Lunge","Wall Ball","Wide Grip Lat Pulldown","Wide Grip Pull Up","Wrist Curl","Zercher Squat","Zottman Curl"];function LogWorkoutModal({isOpen:u,onClose:h,onSave:x,program:E}){const[j,g]=reactExports.useState("strength"),[N,k]=reactExports.useState(""),[A,w]=reactExports.useState("AM"),[M,_]=reactExports.useState([]),[J,z]=reactExports.useState(""),[O,q]=reactExports.useState("7"),[ae,je]=reactExports.useState(null),[ue,te]=reactExports.useState(null),[Q,xe]=reactExports.useState(null),[ce,F]=reactExports.useState(""),U=reactExports.useRef(null),K=I=>{const pe=I.target.files[0];if(pe){const se=new FileReader;se.onload=ie=>te(ie.target.result),se.readAsDataURL(pe)}},ne=()=>{_([...M,{id:Date.now(),name:"",sets:"",reps:"",weight:""}]),xe(null),F("")},be=(I,pe,se)=>{_(M.map(ie=>ie.id===I?{...ie,[pe]:se}:ie)),pe==="name"&&(xe(null),F(""))},L=I=>_(M.filter(pe=>pe.id!==I)),W=()=>ce?COMMON_EXERCISES.filter(I=>I.toLowerCase().includes(ce.toLowerCase())):COMMON_EXERCISES,me=()=>{x({type:j,duration:parseInt(N)||0,sessionTime:A,exercises:M.filter(I=>I.name),notes:J,screenshot:ue,overallRpe:parseInt(O),day:new Date().getDay()||7,loggedAt:new Date().toISOString()}),g("strength"),k(""),w("AM"),_([]),z(""),q("7"),je(null),te(null),xe(null),F(""),h()};return jsxRuntimeExports.jsx(Modal,{isOpen:u,onClose:h,title:"Log Workout",size:"lg",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Type"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:["strength","cardio","hiit"].map(I=>jsxRuntimeExports.jsxs("button",{onClick:()=>g(I),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${j===I?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:[I==="strength"?"":I==="cardio"?"":""," ",I.charAt(0).toUpperCase()+I.slice(1)]},I))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Session"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:["AM","PM"].map(I=>jsxRuntimeExports.jsxs("button",{onClick:()=>w(I),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${A===I?I==="AM"?"bg-yellow-500/20 border-yellow-500 text-yellow-400":"bg-blue-500/20 border-blue-500 text-blue-400":"bg-dark-700 border-dark-500 text-gray-400"}`,children:[I==="AM"?"":""," ",I]},I))})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Input,{label:"Duration (min)",type:"number",value:N,onChange:I=>k(I.target.value),placeholder:"60"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"RPE"}),jsxRuntimeExports.jsx("select",{value:O,onChange:I=>q(I.target.value),className:"w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[6,7,8,9,10].map(I=>jsxRuntimeExports.jsxs("option",{value:I,children:["RPE ",I]},I))})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Exercises"}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:ne,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-1"}),"Add"]})]}),M.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-3",children:M.map((I,pe)=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg border border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:["#",pe+1]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-sm cursor-pointer hover:border-dark-400",onClick:()=>{xe(Q===I.id?null:I.id),F(I.name||"")},children:[jsxRuntimeExports.jsx("span",{className:I.name?"text-white":"text-gray-500",children:I.name||"Select exercise..."}),jsxRuntimeExports.jsx(ChevronDown,{className:"w-4 h-4 text-gray-400"})]}),Q===I.id&&jsxRuntimeExports.jsxs("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 bg-dark-700 border border-dark-500 rounded-lg shadow-xl max-h-60 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"p-2 border-b border-dark-600",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),jsxRuntimeExports.jsx("input",{type:"text",value:ce,onChange:se=>F(se.target.value),placeholder:"Type to search...",className:"w-full pl-8 pr-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500 focus:outline-none focus:border-accent-primary",autoFocus:!0,onClick:se=>se.stopPropagation()})]})}),jsxRuntimeExports.jsx("div",{className:"max-h-48 overflow-y-auto",children:W().length>0?W().map(se=>jsxRuntimeExports.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-white hover:bg-dark-600 transition-colors",onClick:ie=>{ie.stopPropagation(),be(I.id,"name",se)},children:se},se)):jsxRuntimeExports.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500",children:['No matches. Use custom name: "',ce,'"',jsxRuntimeExports.jsxs("button",{className:"block w-full mt-2 px-3 py-1.5 bg-accent-primary/20 text-accent-primary rounded text-xs",onClick:se=>{se.stopPropagation(),be(I.id,"name",ce)},children:['Use "',ce,'"']})]})})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>L(I.id),className:"p-1.5 text-gray-500 hover:text-accent-danger",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:I.sets,onChange:se=>be(I.id,"sets",se.target.value),placeholder:"Sets",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("input",{type:"text",value:I.reps,onChange:se=>be(I.id,"reps",se.target.value),placeholder:"Reps",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("input",{type:"text",value:I.weight,onChange:se=>be(I.id,"weight",se.target.value),placeholder:"Weight",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"})]})]},I.id))}):jsxRuntimeExports.jsxs("div",{className:"p-6 text-center bg-dark-700 rounded-lg border border-dashed border-dark-500",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-8 h-8 text-gray-600 mx-auto mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add" to track exercises'})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Screenshot (Optional)"}),jsxRuntimeExports.jsx("input",{ref:U,type:"file",accept:"image/*",onChange:K,className:"hidden"}),ue?jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:ue,alt:"Preview",className:"w-full h-40 object-cover rounded-lg"}),jsxRuntimeExports.jsx("button",{onClick:()=>te(null),className:"absolute top-2 right-2 p-2 bg-dark-900/80 rounded-lg",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4 text-white"})})]}):jsxRuntimeExports.jsxs("button",{onClick:()=>U.current?.click(),className:"w-full p-6 border-2 border-dashed border-dark-500 rounded-lg hover:border-accent-primary flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsx(Camera,{className:"w-6 h-6 text-gray-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400",children:"Upload screenshot"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:h,fullWidth:!0,children:"Cancel"}),jsxRuntimeExports.jsxs(Button,{onClick:me,fullWidth:!0,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Log Workout"]})]})]})})}function SignUpModal({isOpen:u,onClose:h,onSuccess:x,onShowPrivacy:E,onShowTerms:j}){const[g,N]=reactExports.useState(""),[k,A]=reactExports.useState(""),[w,M]=reactExports.useState(""),[_,J]=reactExports.useState(""),[z,O]=reactExports.useState(!1),[q,ae]=reactExports.useState(null),[je,ue]=reactExports.useState(!1);reactExports.useEffect(()=>{u||(N(""),A(""),M(""),J(""),ae(null),ue(!1))},[u]);const te=F=>{const U=F.target.value.replace(/\D/g,"");M(U),U.length<=3?J(U):U.length<=6?J(`(${U.slice(0,3)}) ${U.slice(3)}`):J(`(${U.slice(0,3)}) ${U.slice(3,6)}-${U.slice(6,10)}`)},Q=F=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F),xe=async()=>{if(!g.trim()){ae("Please enter your name");return}if(!k.trim()||!Q(k)){ae("Please enter a valid email address");return}if(w.length<10){ae("Please enter a valid 10-digit phone number");return}if(!je){ae("Please agree to the Terms & Privacy Policy");return}O(!0),ae(null);try{const F={name:g.trim(),email:k.trim().toLowerCase(),phone:`+1${w}`,createdAt:new Date().toISOString()};localStorage.setItem("motus_user_signup",JSON.stringify(F)),setTimeout(()=>{O(!1),x?.(F),h()},500)}catch{O(!1),ae("Something went wrong. Please try again.")}},ce=g.trim()&&Q(k)&&w.length>=10&&je;return jsxRuntimeExports.jsx(Modal,{isOpen:u,onClose:h,title:"",size:"sm",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-gradient-to-br from-accent-primary to-accent-secondary flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(User,{className:"w-8 h-8 text-dark-950"})}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Create Your Account"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"Start your fitness journey today"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"Full Name"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("input",{type:"text",value:g,onChange:F=>N(F.target.value),placeholder:"John Doe",className:"w-full pl-12 pr-4 py-3.5 bg-dark-700 border border-dark-500 rounded-xl text-white focus:border-accent-primary focus:outline-none",autoFocus:!0})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"Email Address"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("input",{type:"email",value:k,onChange:F=>A(F.target.value),placeholder:"john@example.com",className:"w-full pl-12 pr-4 py-3.5 bg-dark-700 border border-dark-500 rounded-xl text-white focus:border-accent-primary focus:outline-none"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"Phone Number"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Phone,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"absolute left-12 top-1/2 -translate-y-1/2 text-gray-400",children:"+1"}),jsxRuntimeExports.jsx("input",{type:"tel",value:_,onChange:te,placeholder:"(555) 555-5555",className:"w-full pl-20 pr-4 py-3.5 bg-dark-700 border border-dark-500 rounded-xl text-white focus:border-accent-primary focus:outline-none",maxLength:14})]})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"relative mt-0.5",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:je,onChange:F=>ue(F.target.checked),className:"sr-only"}),jsxRuntimeExports.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${je?"bg-accent-primary border-accent-primary":"border-dark-500 bg-dark-700"}`,children:je&&jsxRuntimeExports.jsx(CheckCircle,{className:"w-3.5 h-3.5 text-dark-950"})})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:["I agree to the"," ",jsxRuntimeExports.jsx("button",{type:"button",onClick:F=>{F.preventDefault(),j?.()},className:"text-accent-primary hover:underline",children:"Terms of Service"})," ","and"," ",jsxRuntimeExports.jsx("button",{type:"button",onClick:F=>{F.preventDefault(),E?.()},className:"text-accent-primary hover:underline",children:"Privacy Policy"})]})]}),q&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"w-4 h-4 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:q})]}),jsxRuntimeExports.jsx(Button,{onClick:xe,disabled:!ce||z,fullWidth:!0,size:"lg",children:z?jsxRuntimeExports.jsx(Loader2,{className:"w-5 h-5 animate-spin"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Continue",jsxRuntimeExports.jsx(ArrowRight,{className:"w-5 h-5 ml-2"})]})})]}),jsxRuntimeExports.jsxs("p",{className:"text-center text-sm text-gray-500",children:["Already have an account?"," ",jsxRuntimeExports.jsx("button",{className:"text-accent-primary hover:underline",children:"Sign in"})]})]})})}function FeedbackWidget(){const[u,h]=reactExports.useState(!1),[x,E]=reactExports.useState(""),[j,g]=reactExports.useState(""),[N,k]=reactExports.useState("general"),[A,w]=reactExports.useState("idle"),M=async _=>{if(_.preventDefault(),!!x.trim()){w("sending");try{if(!(await fetch("/api/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({feedback:x.trim(),email:j.trim()||null,category:N,page:window.location.pathname,timestamp:new Date().toISOString(),userAgent:navigator.userAgent})})).ok)throw new Error("Failed to send");w("sent"),setTimeout(()=>{h(!1),E(""),g(""),k("general"),w("idle")},2e3)}catch(J){console.error("Feedback error:",J),w("error"),setTimeout(()=>w("idle"),3e3)}}};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[!u&&jsxRuntimeExports.jsxs("button",{onClick:()=>h(!0),className:`fixed right-0 top-1/2 -translate-y-1/2 z-40
            bg-accent-primary/90 hover:bg-accent-primary
            text-dark-900 font-semibold text-xs
            px-2 py-3 rounded-l-lg
            shadow-lg shadow-black/30
            transition-all duration-200 hover:px-3
            flex items-center gap-1`,style:{writingMode:"vertical-rl",textOrientation:"mixed"},"aria-label":"Send feedback",children:[jsxRuntimeExports.jsx(MessageSquare,{className:"w-3 h-3 rotate-90"}),"Feedback"]}),u&&jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-dark-950/80 backdrop-blur-sm",onClick:()=>{A!=="sending"&&h(!1)}}),jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-md bg-dark-800 rounded-2xl border border-dark-600 shadow-2xl shadow-black/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-dark-600",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"Send Feedback"}),jsxRuntimeExports.jsx("button",{onClick:()=>h(!1),className:"p-1.5 rounded-lg text-dark-400 hover:text-white hover:bg-dark-700 transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4"})})]}),A==="sent"?jsxRuntimeExports.jsxs("div",{className:"px-5 py-10 text-center",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-12 h-12 text-green-400 mx-auto mb-3"}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Thanks for your feedback!"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"We'll review it shortly."})]}):jsxRuntimeExports.jsxs("form",{onSubmit:M,className:"px-5 py-4 space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:[{id:"bug",label:"Bug"},{id:"feature",label:"Feature"},{id:"general",label:"General"}].map(_=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>k(_.id),className:`px-3 py-1.5 text-xs font-medium rounded-full transition-colors ${N===_.id?"bg-accent-primary text-dark-900":"bg-dark-700 text-gray-400 hover:text-white"}`,children:_.label},_.id))}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("textarea",{value:x,onChange:_=>E(_.target.value),placeholder:"What's on your mind? Found a bug, have an idea, or just want to say hi?",rows:4,className:`w-full px-3 py-2.5 bg-dark-700 border border-dark-600 rounded-xl
                      text-white text-sm placeholder-gray-500
                      focus:outline-none focus:border-accent-primary/50 focus:ring-1 focus:ring-accent-primary/30
                      resize-none`,autoFocus:!0,required:!0})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{type:"email",value:j,onChange:_=>g(_.target.value),placeholder:"Your email (optional, for follow-up)",className:`w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-xl
                      text-white text-sm placeholder-gray-500
                      focus:outline-none focus:border-accent-primary/50 focus:ring-1 focus:ring-accent-primary/30`})}),A==="error"&&jsxRuntimeExports.jsx("p",{className:"text-xs text-red-400",children:"Something went wrong. Please try again."}),jsxRuntimeExports.jsx("button",{type:"submit",disabled:!x.trim()||A==="sending",className:`w-full flex items-center justify-center gap-2
                    px-4 py-2.5 bg-accent-primary text-dark-900 font-semibold text-sm
                    rounded-xl transition-all
                    hover:bg-accent-primary/90
                    disabled:opacity-50 disabled:cursor-not-allowed`,children:A==="sending"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"w-4 h-4 border-2 border-dark-900 border-t-transparent rounded-full animate-spin"}),"Sending..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Send,{className:"w-4 h-4"}),"Send Feedback"]})})]})]})]})]})}function SubscriptionModal({isOpen:u,onClose:h,onSuccess:x}){const[E,j]=reactExports.useState(!1),[g,N]=reactExports.useState(null);if(!u)return null;const k=!1,A=async()=>{j(!0),N(null);try{if(!k){setTimeout(()=>{x?.({customerId:"demo_customer_"+Date.now(),subscriptionId:"demo_sub_"+Date.now(),currentPeriodEnd:new Date(Date.now()+720*60*60*1e3).toISOString()}),j(!1)},1500);return}const w=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:void 0,successUrl:`${window.location.origin}/subscription-success`,cancelUrl:window.location.href})}),{url:M,error:_}=await w.json();if(_)throw new Error(_);window.location.href=M}catch(w){console.error("Subscription error:",w),N(w.message||"Failed to process subscription"),j(!1)}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-md bg-dark-800 rounded-xl shadow-2xl border border-dark-600 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:"Subscribe to MOTUS"}),jsxRuntimeExports.jsx("button",{onClick:h,className:"p-1 text-gray-400 hover:text-white transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 mb-6 border border-dark-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"MOTUS Premium"}),jsxRuntimeExports.jsx("span",{className:"text-accent-primary font-bold",children:"$5/month"})]}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-accent-success"}),"Personalized training program"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-accent-success"}),"Custom meal plans & recipes"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-accent-success"}),"Progress tracking & analytics"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Accepted payment methods"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 bg-dark-700 rounded-lg p-3 flex items-center justify-center border border-dark-500",children:[jsxRuntimeExports.jsx("svg",{className:"h-6",viewBox:"0 0 50 20",fill:"white",children:jsxRuntimeExports.jsx("path",{d:"M9.5 5.3c-.5.6-1.3 1.1-2.1 1-.1-.8.3-1.6.7-2.1.5-.6 1.4-1 2-1 .1.8-.2 1.6-.6 2.1zm.6 1.1c-1.2-.1-2.2.7-2.7.7-.6 0-1.4-.6-2.4-.6-1.2 0-2.3.7-2.9 1.8-1.3 2.2-.3 5.4.9 7.2.6.9 1.3 1.8 2.3 1.8.9 0 1.3-.6 2.4-.6 1.1 0 1.4.6 2.4.6 1 0 1.6-.9 2.2-1.8.7-1 1-2 1-2-.1 0-1.9-.7-1.9-2.9 0-1.8 1.5-2.7 1.6-2.8-.9-1.3-2.3-1.4-2.9-1.4z"})}),jsxRuntimeExports.jsx("span",{className:"ml-1 text-white text-sm font-medium",children:"Pay"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 bg-dark-700 rounded-lg p-3 flex items-center justify-center border border-dark-500",children:jsxRuntimeExports.jsx("svg",{className:"h-5",viewBox:"0 0 40 16",fill:"white",children:jsxRuntimeExports.jsx("path",{d:"M19.6 7.8v4.5h-1.4V3h3.7c.9 0 1.7.3 2.3.9.6.6.9 1.3.9 2.2 0 .9-.3 1.6-.9 2.2-.6.6-1.4.9-2.3.9h-2.3zm0-3.5v2.3h2.4c.5 0 .9-.2 1.2-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2c-.3-.3-.7-.5-1.2-.5h-2.4z"})})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 bg-dark-700 rounded-lg p-3 flex items-center justify-center border border-dark-500",children:[jsxRuntimeExports.jsx(CreditCard,{className:"w-5 h-5 text-white"}),jsxRuntimeExports.jsx("span",{className:"ml-1 text-white text-sm",children:"Card"})]})]})]}),g&&jsxRuntimeExports.jsxs("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-2 text-red-400 text-sm",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"w-4 h-4 flex-shrink-0"}),g]}),jsxRuntimeExports.jsx("button",{onClick:A,disabled:E,className:"w-full py-3 px-6 bg-accent-primary hover:bg-accent-primary/90 disabled:opacity-50 disabled:cursor-not-allowed text-dark-900 font-semibold rounded-lg transition-colors flex items-center justify-center gap-2",children:E?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader2,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CreditCard,{className:"w-5 h-5"}),"Subscribe - $5/month"]})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-amber-400 text-center mt-3",children:" Demo mode: Stripe not configured. Add VITE_STRIPE_PUBLIC_KEY to enable real payments."}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"By subscribing, you agree to our Terms of Service and Privacy Policy. You can cancel anytime from your profile settings."})]})]})})}function PaywallOverlay({isVisible:u,onClose:h,onSuccess:x,program:E}){const{referralCode:j,referralCount:g,referralsNeeded:N,activateTylersFriend:k,bypassPaywall:A}=useSubscription(),[w,M]=reactExports.useState(!1),[_,J]=reactExports.useState(!1),[z,O]=reactExports.useState(["","",""]),[q,ae]=reactExports.useState(!1),[je,ue]=reactExports.useState(!1),[te,Q]=reactExports.useState(null);if(!u||A)return null;const xe=Ee=>{M(!1),x?.(Ee)},ce=()=>{k(),h?.()},F=window.location.origin,U=j?`${F}?ref=${j}`:F,K=()=>{navigator.clipboard.writeText(U),J(!0),setTimeout(()=>J(!1),2e3)},ne=(Ee,V)=>{const D=[...z];D[Ee]=V,O(D)},be=z.filter(Ee=>Ee&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Ee)),L=async()=>{if(be.length===0)return;const Ee=encodeURIComponent("Join me on MOTUS - Your AI Fitness Coach"),V=encodeURIComponent(`Hey! I've been using MOTUS to crush my fitness goals and thought you'd love it too.

It creates personalized workout and meal plans just for you.

Sign up here: ${U}

Let's get after it! `);window.open(`mailto:${be.join(",")}?subject=${Ee}&body=${V}`),ae(!0)},W=()=>{navigator.clipboard.writeText(` Join me on MOTUS! Get your personalized AI fitness program: ${U}`),J(!0),setTimeout(()=>J(!1),2e3),window.open("https://instagram.com/direct/inbox/","_blank")},me=()=>{ue(!0)},pe=(()=>{if(!E)return{name:"Fitness Program",duration:"12 weeks",description:"Personalized fitness and nutrition program"};const Ee=E.name||E.title||(E.goal?.primary==="endurance"?"Running Program":E.goal?.primary==="strength"?"Strength Program":"Fitness Program"),V=E.duration?`${E.duration} week`:"12 week";let D="";const G=E.goal?.primary?.toLowerCase()||"";return G.includes("endurance")||G.includes("running")||G.includes("cardio")?D="Personalized endurance and cardio program":G.includes("strength")||G.includes("muscle")||G.includes("power")?D="Personalized strength and muscle building program":G.includes("weight")||G.includes("fat")||G.includes("lean")?D="Personalized body composition program":G.includes("hybrid")||G.includes("general")?D="Personalized hybrid training program":D="Personalized fitness and nutrition program",{name:Ee,duration:V,description:D}})(),se=g||0,ie=se/3*100;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-lg bg-dark-800 rounded-2xl shadow-2xl border border-dark-600 overflow-hidden max-h-[85vh] flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"relative bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 p-4 text-center flex-shrink-0",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-full bg-accent-primary/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(Lock,{className:"w-5 h-5 text-accent-primary"})}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-white",children:"Unlock Your Full Program"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs",children:"Your personalized training program is ready!"})]}),jsxRuntimeExports.jsxs("div",{className:"overflow-y-auto flex-1 p-4 space-y-3 pb-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-dark-700 rounded-xl p-3 border border-dark-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(CreditCard,{className:"w-4 h-4 text-accent-primary"}),"Subscribe"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-lg font-bold text-white",children:"$5"}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-xs",children:"/mo"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>M(!0),className:"w-full py-2 px-4 bg-accent-primary hover:bg-accent-primary/90 text-dark-900 font-semibold rounded-lg text-sm",children:"Subscribe Now"})]}),jsxRuntimeExports.jsxs("div",{className:"relative py-1",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-dark-600"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center",children:jsxRuntimeExports.jsx("span",{className:"px-2 bg-dark-800 text-gray-500 text-xs",children:"or"})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-dark-700/50 rounded-xl p-3 border border-accent-secondary/30",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{className:"w-4 h-4 text-accent-secondary"}),"Share With Friends"]}),jsxRuntimeExports.jsx("span",{className:"bg-accent-success/20 text-accent-success text-[10px] font-bold px-2 py-0.5 rounded-full",children:"FREE MONTH"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"Share with 3 friends or post to your Story!"}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-[10px] mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Progress"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[se,"/3"]})]}),jsxRuntimeExports.jsx("div",{className:"h-1 bg-dark-600 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-accent-secondary to-accent-success rounded-full",style:{width:`${ie}%`}})})]}),te?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Q(null),className:"text-[10px] text-gray-400",children:" Back"}),z.map((Ee,V)=>jsxRuntimeExports.jsx("input",{type:"email",placeholder:`Friend ${V+1}'s email`,value:Ee,onChange:D=>ne(V,D.target.value),className:"w-full px-2 py-1.5 bg-dark-600 border border-dark-500 rounded text-white placeholder-gray-500 text-xs"},V)),jsxRuntimeExports.jsx("button",{onClick:L,disabled:be.length===0,className:`w-full py-2 rounded text-xs font-medium ${be.length>0?"bg-accent-secondary text-dark-900":"bg-dark-600 text-gray-500"}`,children:q?"Sent!":`Send to ${be.length}`})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("button",{onClick:me,className:"w-full py-2.5 px-3 bg-gradient-to-r from-purple-600 via-pink-500 to-orange-400 text-white font-semibold rounded-lg text-sm flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Instagram,{className:"w-4 h-4"}),"Share to Story",jsxRuntimeExports.jsx(Sparkles,{className:"w-3 h-3"})]}),jsxRuntimeExports.jsx("p",{className:"text-[10px] text-center text-accent-success",children:" Instant unlock!"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>Q("email"),className:"py-2 px-2 bg-dark-600 text-white rounded-lg text-xs flex items-center justify-center gap-1",children:[jsxRuntimeExports.jsx(Mail,{className:"w-3 h-3"}),"Email"]}),jsxRuntimeExports.jsxs("button",{onClick:W,className:"py-2 px-2 bg-dark-600 text-white rounded-lg text-xs flex items-center justify-center gap-1",children:[jsxRuntimeExports.jsx(Send,{className:"w-3 h-3"}),"DMs"]})]}),_&&jsxRuntimeExports.jsx("p",{className:"text-[10px] text-center text-accent-success",children:" Copied!"})]}),jsxRuntimeExports.jsxs("button",{onClick:K,className:"w-full mt-2 py-1 text-gray-400 text-[10px] flex items-center justify-center gap-1",children:[jsxRuntimeExports.jsx(Copy,{className:"w-2.5 h-2.5"}),_?"Copied!":"Copy link"]})]}),jsxRuntimeExports.jsxs("div",{className:"relative py-1",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-dark-600"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center",children:jsxRuntimeExports.jsx("span",{className:"px-2 bg-dark-800 text-gray-500 text-xs",children:"or"})})]}),jsxRuntimeExports.jsxs("button",{onClick:ce,className:"w-full py-2.5 px-4 bg-dark-700 hover:bg-dark-600 text-gray-300 rounded-lg flex items-center justify-center gap-2 border border-dark-500 text-sm",children:[jsxRuntimeExports.jsx(Gift,{className:"w-4 h-4 text-accent-secondary"}),"I'm Tyler's Friend"]})]})]})}),je&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-xs bg-dark-800 rounded-2xl overflow-hidden",children:[jsxRuntimeExports.jsx("button",{onClick:()=>ue(!1),className:"absolute top-2 right-2 z-10 p-1 bg-black/50 rounded-full",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"aspect-[9/16] bg-gradient-to-br from-dark-900 via-accent-primary/10 to-accent-secondary/10 p-5 flex flex-col justify-between relative",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 opacity-5",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-10 left-5 w-24 h-24 bg-accent-primary rounded-full blur-3xl"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-20 right-5 w-32 h-32 bg-accent-secondary rounded-full blur-3xl"})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("div",{className:"text-accent-primary font-bold text-base",children:"MOTUS"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-[10px]",children:"AI-Powered Fitness"})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Starting my"}),jsxRuntimeExports.jsx("h3",{className:"text-white text-xl font-bold mb-1",children:pe.duration}),jsxRuntimeExports.jsx("div",{className:"text-accent-primary text-2xl font-black mb-3",children:pe.name}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs px-4",children:pe.description})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 text-center",children:[jsxRuntimeExports.jsx("div",{className:"inline-block bg-white/10 px-3 py-1.5 rounded-full mb-2",children:jsxRuntimeExports.jsx("span",{className:"text-white text-xs",children:"Join me "})}),jsxRuntimeExports.jsx("div",{className:"text-accent-primary font-bold text-sm",children:"motus.fit"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-[10px] text-center",children:"Screenshot and share to your Story!"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{alert(`Screenshot this and share to Instagram Story!
Your free month will be unlocked.`),ue(!1)},className:"w-full py-2.5 bg-gradient-to-r from-purple-600 via-pink-500 to-orange-400 text-white font-semibold rounded-lg text-sm flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Instagram,{className:"w-4 h-4"}),"I've Posted to My Story"]}),jsxRuntimeExports.jsx("button",{onClick:()=>ue(!1),className:"w-full py-1.5 text-gray-400 text-xs",children:"Cancel"})]})]})}),jsxRuntimeExports.jsx(SubscriptionModal,{isOpen:w,onClose:()=>M(!1),onSuccess:xe})]})}function PrivacyPolicy({onBack:u}){const h=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 text-gray-300",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-10 bg-dark-900/95 backdrop-blur-sm border-b border-dark-700",children:jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-4 flex items-center gap-4",children:[u&&jsxRuntimeExports.jsx("button",{onClick:u,className:"p-2 -ml-2 text-gray-400 hover:text-white",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:"Privacy Policy"})]})}),jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 space-y-8",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["Effective Date: ",h]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{children:"Welcome to MOTUS. We are committed to protecting your privacy and ensuring you understand how we collect, use, and safeguard your personal information. This Privacy Policy applies to the MOTUS mobile application and related services."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"2. Information We Collect"}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"2.1 Information You Provide Directly"}),jsxRuntimeExports.jsx("p",{children:"When you create an account or use MOTUS, you may provide:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Account information (name, email address, phone number, profile photo)"}),jsxRuntimeExports.jsx("li",{children:"Physical characteristics (age, height, weight, gender)"}),jsxRuntimeExports.jsx("li",{children:"Fitness goals and preferences"}),jsxRuntimeExports.jsx("li",{children:"Dietary preferences and restrictions"}),jsxRuntimeExports.jsx("li",{children:"Workout logs and exercise history"}),jsxRuntimeExports.jsx("li",{children:"Meal logs and nutrition data"})]}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"2.2 Information from Third-Party Services"}),jsxRuntimeExports.jsx("p",{children:"With your explicit consent, we may collect data from connected services:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Strava:"})," Workout activities, exercise data, distance, duration, pace, heart rate"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Garmin:"})," Activity data, sleep data, heart rate, stress levels, body composition"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Apple Health:"})," Workouts, steps, heart rate, sleep, nutrition data"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Google Fit:"})," Activity data, heart rate, nutrition"]})]}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"2.3 Automatically Collected Information"}),jsxRuntimeExports.jsx("p",{children:"We automatically collect:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Device information (device type, operating system, unique identifiers)"}),jsxRuntimeExports.jsx("li",{children:"App usage data (features used, time spent, interaction patterns)"}),jsxRuntimeExports.jsx("li",{children:"Log data (access times, errors, performance data)"})]})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"3. How We Use Your Information"}),jsxRuntimeExports.jsx("p",{children:"We use your information to:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Provide personalized workout programs and meal plans"}),jsxRuntimeExports.jsx("li",{children:"Track your fitness progress and nutrition goals"}),jsxRuntimeExports.jsx("li",{children:"Calculate caloric needs and macro recommendations"}),jsxRuntimeExports.jsx("li",{children:"Sync data across your connected fitness devices"}),jsxRuntimeExports.jsx("li",{children:"Improve our services and develop new features"}),jsxRuntimeExports.jsx("li",{children:"Send important updates about your account or our services"}),jsxRuntimeExports.jsx("li",{children:"Comply with legal obligations"})]})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"4. How We Share Your Information"}),jsxRuntimeExports.jsx("p",{className:"font-medium text-accent-primary",children:"We do NOT sell your personal information."}),jsxRuntimeExports.jsx("p",{children:"We may share data with:"}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"4.1 Third-Party Service Providers"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Authentication providers for secure sign-in"}),jsxRuntimeExports.jsx("li",{children:"Cloud storage providers for data storage"}),jsxRuntimeExports.jsx("li",{children:"Payment processors for subscription management"}),jsxRuntimeExports.jsx("li",{children:"Analytics services to improve app performance"})]}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"4.2 Connected Fitness Platforms"}),jsxRuntimeExports.jsx("p",{children:"When you connect Strava, Garmin, or other platforms, data flows bidirectionally as authorized by you. Each platform has its own privacy policy governing their use of your data."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"5. Data Security"}),jsxRuntimeExports.jsx("p",{children:"We implement industry-standard security measures:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Encryption of data in transit (TLS/SSL) and at rest"}),jsxRuntimeExports.jsx("li",{children:"Secure authentication protocols"}),jsxRuntimeExports.jsx("li",{children:"Regular security audits and updates"}),jsxRuntimeExports.jsx("li",{children:"Access controls limiting who can view your data"})]})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"6. Your Rights and Choices"}),jsxRuntimeExports.jsx("p",{children:"You have the right to:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Access your personal data"}),jsxRuntimeExports.jsx("li",{children:"Correct inaccurate information"}),jsxRuntimeExports.jsx("li",{children:"Delete your account and associated data"}),jsxRuntimeExports.jsx("li",{children:"Disconnect third-party services at any time"}),jsxRuntimeExports.jsx("li",{children:"Export your data in a portable format"}),jsxRuntimeExports.jsx("li",{children:"Opt out of marketing communications"})]})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"7. Data Retention"}),jsxRuntimeExports.jsx("p",{children:"We retain your data for as long as your account is active or as needed to provide services. Upon account deletion, we will delete or anonymize your data within 30 days, except where retention is required by law."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"8. Children's Privacy"}),jsxRuntimeExports.jsx("p",{children:"MOTUS is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If we learn we have collected such information, we will delete it promptly."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"9. International Data Transfers"}),jsxRuntimeExports.jsx("p",{children:"Your data may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your information in compliance with applicable data protection laws."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"10. Changes to This Policy"}),jsxRuntimeExports.jsx("p",{children:"We may update this Privacy Policy periodically. We will notify you of material changes through the app or via email. Your continued use of MOTUS after changes constitutes acceptance of the updated policy."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"11. Contact Us"}),jsxRuntimeExports.jsx("p",{children:"If you have questions about this Privacy Policy or our data practices, please contact us at:"}),jsxRuntimeExports.jsx("p",{className:"text-accent-primary",children:"privacy@motusfit.app"})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"12. California Privacy Rights (CCPA)"}),jsxRuntimeExports.jsx("p",{children:"California residents have additional rights under the CCPA, including the right to know what personal information is collected, the right to deletion, and the right to opt-out of the sale of personal information. As stated above, we do not sell personal information."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4 pb-12",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"13. European Privacy Rights (GDPR)"}),jsxRuntimeExports.jsx("p",{children:"If you are in the European Economic Area, you have rights under GDPR including access, rectification, erasure, restriction, portability, and objection. You may also lodge a complaint with your local data protection authority."})]})]})]})}function TermsConditions({onBack:u}){const h=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 text-gray-300",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-10 bg-dark-900/95 backdrop-blur-sm border-b border-dark-700",children:jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-4 flex items-center gap-4",children:[u&&jsxRuntimeExports.jsx("button",{onClick:u,className:"p-2 -ml-2 text-gray-400 hover:text-white",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:"Terms & Conditions"})]})}),jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 space-y-8",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["Effective Date: ",h]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"1. Agreement to Terms"}),jsxRuntimeExports.jsx("p",{children:'By accessing or using MOTUS ("the App"), you agree to be bound by these Terms and Conditions ("Terms"). If you do not agree to these Terms, please do not use the App. These Terms constitute a legally binding agreement between you and MOTUS.'})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"2. Description of Service"}),jsxRuntimeExports.jsx("p",{children:"MOTUS is a fitness and nutrition application that provides personalized workout programs, meal planning, macro tracking, and integration with third-party fitness platforms. The App is designed to help users achieve their fitness and health goals."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"3. User Accounts"}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"3.1 Account Creation"}),jsxRuntimeExports.jsx("p",{children:"To use certain features of the App, you must create an account. You agree to provide accurate, current, and complete information during registration and to update such information to keep it accurate."}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"3.2 Account Security"}),jsxRuntimeExports.jsx("p",{children:"You are responsible for safeguarding your account credentials and for all activities that occur under your account. You agree to notify us immediately of any unauthorized use of your account."}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"3.3 Account Termination"}),jsxRuntimeExports.jsx("p",{children:"We reserve the right to suspend or terminate your account at any time for violation of these Terms or for any other reason at our sole discretion."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"4. Subscription and Payments"}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"4.1 Subscription Plans"}),jsxRuntimeExports.jsx("p",{children:"MOTUS offers subscription-based access to premium features. Subscription fees and billing cycles are displayed in the App before purchase."}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"4.2 Automatic Renewal"}),jsxRuntimeExports.jsx("p",{children:"Subscriptions automatically renew unless cancelled at least 24 hours before the end of the current billing period. You can manage or cancel your subscription through your account settings."}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"4.3 Refunds"}),jsxRuntimeExports.jsx("p",{children:"Refund requests are handled on a case-by-case basis. Please contact our support team for assistance with refund requests."}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"4.4 Price Changes"}),jsxRuntimeExports.jsx("p",{children:"We reserve the right to change subscription prices. Any price changes will be communicated to you in advance and will take effect at the start of your next billing cycle."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"5. Acceptable Use"}),jsxRuntimeExports.jsx("p",{children:"You agree not to:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Use the App for any unlawful purpose"}),jsxRuntimeExports.jsx("li",{children:"Share your account credentials with others"}),jsxRuntimeExports.jsx("li",{children:"Attempt to reverse engineer or decompile the App"}),jsxRuntimeExports.jsx("li",{children:"Interfere with or disrupt the App's functionality"}),jsxRuntimeExports.jsx("li",{children:"Use automated systems to access the App without permission"}),jsxRuntimeExports.jsx("li",{children:"Upload malicious code or content"}),jsxRuntimeExports.jsx("li",{children:"Impersonate another person or entity"}),jsxRuntimeExports.jsx("li",{children:"Violate any applicable laws or regulations"})]})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"6. Health and Fitness Disclaimer"}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-accent-warning/10 border border-accent-warning/30 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-accent-warning font-medium mb-2",children:"Important Health Notice"}),jsxRuntimeExports.jsx("p",{children:"MOTUS is not a medical service and does not provide medical advice. The workout programs, nutrition recommendations, and other content provided through the App are for informational purposes only and should not be considered medical advice."})]}),jsxRuntimeExports.jsx("p",{className:"mt-4",children:"Before starting any exercise program or making significant changes to your diet, you should consult with a qualified healthcare professional, especially if you have any pre-existing health conditions, injuries, or concerns."}),jsxRuntimeExports.jsx("p",{children:"You acknowledge that physical exercise involves inherent risks, including the risk of injury or death. You assume full responsibility for any risks, injuries, or damages that may result from your use of the App."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"7. Third-Party Integrations"}),jsxRuntimeExports.jsx("p",{children:"The App may integrate with third-party services such as Strava, Garmin, Apple Health, and Google Fit. Your use of these integrations is subject to the terms and privacy policies of those third parties. We are not responsible for the practices of third-party services."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"8. Intellectual Property"}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"8.1 Our Content"}),jsxRuntimeExports.jsx("p",{children:"The App and its original content, features, and functionality are owned by MOTUS and are protected by international copyright, trademark, and other intellectual property laws."}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"8.2 Your Content"}),jsxRuntimeExports.jsx("p",{children:"You retain ownership of any content you submit to the App (such as workout logs and progress photos). By submitting content, you grant us a non-exclusive, worldwide, royalty-free license to use, store, and display such content for the purpose of providing our services."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"9. Limitation of Liability"}),jsxRuntimeExports.jsx("p",{children:"To the maximum extent permitted by law, MOTUS and its affiliates, officers, directors, employees, and agents shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including loss of profits, data, or other intangible losses, resulting from:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Your use or inability to use the App"}),jsxRuntimeExports.jsx("li",{children:"Any injuries or health issues arising from workouts or nutrition plans"}),jsxRuntimeExports.jsx("li",{children:"Unauthorized access to your data"}),jsxRuntimeExports.jsx("li",{children:"Any third-party conduct on the App"}),jsxRuntimeExports.jsx("li",{children:"Any errors or omissions in the App's content"})]})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"10. Indemnification"}),jsxRuntimeExports.jsx("p",{children:"You agree to defend, indemnify, and hold harmless MOTUS and its affiliates from any claims, damages, losses, or expenses (including reasonable attorney fees) arising from your use of the App, your violation of these Terms, or your violation of any rights of another."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"11. Disclaimers"}),jsxRuntimeExports.jsx("p",{children:'THE APP IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. WE DO NOT WARRANT THAT THE APP WILL BE UNINTERRUPTED, ERROR-FREE, OR FREE OF HARMFUL COMPONENTS.'})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"12. Governing Law"}),jsxRuntimeExports.jsx("p",{children:"These Terms shall be governed by and construed in accordance with the laws of the United States, without regard to conflict of law principles. Any disputes arising under these Terms shall be resolved in the state or federal courts located within the United States."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"13. Changes to Terms"}),jsxRuntimeExports.jsx("p",{children:"We reserve the right to modify these Terms at any time. We will notify you of any material changes by posting the updated Terms in the App or by other means. Your continued use of the App after changes constitutes acceptance of the modified Terms."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"14. Severability"}),jsxRuntimeExports.jsx("p",{children:"If any provision of these Terms is found to be unenforceable, the remaining provisions will continue in full force and effect."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"15. Entire Agreement"}),jsxRuntimeExports.jsx("p",{children:"These Terms, together with our Privacy Policy, constitute the entire agreement between you and MOTUS regarding your use of the App and supersede any prior agreements."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4 pb-12",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"16. Contact Us"}),jsxRuntimeExports.jsx("p",{children:"If you have questions about these Terms, please contact us at:"}),jsxRuntimeExports.jsx("p",{className:"text-accent-primary",children:"legal@motusfit.app"})]})]})]})}function useLocalStorage(u,h){const[x,E]=reactExports.useState(()=>{try{const g=window.localStorage.getItem(u);return g?JSON.parse(g):h}catch{return h}});return[x,g=>{try{const N=g instanceof Function?g(x):g;E(N),window.localStorage.setItem(u,JSON.stringify(N))}catch(N){console.error(N)}}]}const generateMockMealPlan=(u,h)=>{const x=h?.macros?.calories||2e3,E=h?.macros?.protein||150,j=u.mealsPerDay||3,g=u.snacksPerDay||1,N=E*4,k=x-N,A=Math.round(k*.55/4),w=Math.round(k*.45/9),_=j===2?{breakfast:.4,dinner:.5,snack:.1/g}:{breakfast:.25,lunch:.3,dinner:.35,snack:g>0?.1/g:0},J={breakfast:[{id:"b1",title:"Greek Yogurt Parfait",baseIngredients:["Greek yogurt","granola","mixed berries","honey"],readyInMinutes:5},{id:"b2",title:"Avocado Toast with Eggs",baseIngredients:["whole grain bread","avocado","eggs","olive oil"],readyInMinutes:15},{id:"b3",title:"Protein Oatmeal Bowl",baseIngredients:["oats","protein powder","almond milk","banana","almond butter"],readyInMinutes:10},{id:"b4",title:"Veggie Egg Scramble",baseIngredients:["eggs","spinach","bell peppers","cheese","olive oil"],readyInMinutes:12},{id:"b5",title:"Smoothie Bowl",baseIngredients:["protein powder","frozen berries","banana","almond milk","chia seeds"],readyInMinutes:8},{id:"b6",title:"Overnight Oats",baseIngredients:["oats","Greek yogurt","milk","maple syrup","walnuts"],readyInMinutes:5},{id:"b7",title:"Breakfast Burrito",baseIngredients:["eggs","black beans","cheese","whole wheat tortilla","salsa"],readyInMinutes:15}],lunch:[{id:"l1",title:"Grilled Chicken Salad",baseIngredients:["chicken breast","mixed greens","cherry tomatoes","feta cheese","olive oil"],readyInMinutes:20},{id:"l2",title:"Quinoa Buddha Bowl",baseIngredients:["quinoa","chickpeas","roasted vegetables","tahini","avocado"],readyInMinutes:25},{id:"l3",title:"Turkey & Avocado Wrap",baseIngredients:["turkey breast","avocado","whole wheat wrap","lettuce","tomato"],readyInMinutes:10},{id:"l4",title:"Salmon Poke Bowl",baseIngredients:["salmon","sushi rice","edamame","cucumber","sesame oil"],readyInMinutes:15},{id:"l5",title:"Mediterranean Plate",baseIngredients:["chicken","hummus","pita bread","cucumber","olives"],readyInMinutes:15},{id:"l6",title:"Asian Chicken Stir Fry",baseIngredients:["chicken breast","brown rice","broccoli","soy sauce","sesame oil"],readyInMinutes:20},{id:"l7",title:"Black Bean Tacos",baseIngredients:["black beans","corn tortillas","avocado","cheese","salsa"],readyInMinutes:15}],dinner:[{id:"d1",title:"Herb Crusted Salmon",baseIngredients:["salmon fillet","quinoa","asparagus","olive oil","lemon"],readyInMinutes:30},{id:"d2",title:"Lean Beef Stir Fry",baseIngredients:["lean beef","brown rice","mixed vegetables","soy sauce","ginger"],readyInMinutes:25},{id:"d3",title:"Grilled Chicken & Veggies",baseIngredients:["chicken breast","sweet potato","broccoli","olive oil","garlic"],readyInMinutes:35},{id:"d4",title:"Shrimp Pasta Primavera",baseIngredients:["shrimp","whole wheat pasta","zucchini","tomatoes","parmesan"],readyInMinutes:30},{id:"d5",title:"Turkey Meatballs & Zoodles",baseIngredients:["ground turkey","zucchini","marinara sauce","parmesan","olive oil"],readyInMinutes:35},{id:"d6",title:"Baked Cod with Quinoa",baseIngredients:["cod fillet","quinoa","spinach","cherry tomatoes","olive oil"],readyInMinutes:30},{id:"d7",title:"Chicken Tikka Masala",baseIngredients:["chicken breast","basmati rice","tikka sauce","Greek yogurt","naan"],readyInMinutes:40}],snack:[{id:"s1",title:"Protein Shake",baseIngredients:["protein powder","almond milk","banana"],readyInMinutes:2},{id:"s2",title:"Apple & Almond Butter",baseIngredients:["apple","almond butter"],readyInMinutes:2},{id:"s3",title:"Greek Yogurt & Berries",baseIngredients:["Greek yogurt","mixed berries","honey"],readyInMinutes:2},{id:"s4",title:"Trail Mix",baseIngredients:["mixed nuts","dried fruit","dark chocolate chips"],readyInMinutes:1},{id:"s5",title:"Cottage Cheese & Fruit",baseIngredients:["cottage cheese","pineapple","walnuts"],readyInMinutes:2},{id:"s6",title:"Hummus & Veggies",baseIngredients:["hummus","carrots","celery","bell peppers"],readyInMinutes:3},{id:"s7",title:"Protein Bar",baseIngredients:["protein bar"],readyInMinutes:1}]},z=(te,Q,xe,ce,F)=>({id:te.id,title:te.title,calories:Q,protein:xe,carbs:ce,fat:F,readyInMinutes:te.readyInMinutes,image:null}),O=(te,Q,xe,ce)=>{const F=Math.round(Q/7*10)/10,U=Math.round(xe/40*10)/10,K=Math.round(ce/14*10)/10;return te.baseIngredients.map((ne,be)=>be===0&&["chicken","salmon","beef","turkey","shrimp","cod","eggs"].some(L=>ne.includes(L))?{original:`${F}oz ${ne}`,name:ne,amount:F,unit:"oz"}:be===1&&["rice","quinoa","pasta","oats","bread","tortilla"].some(L=>ne.includes(L))?{original:`${U} cup ${ne}`,name:ne,amount:U,unit:"cup"}:["olive oil","avocado","almond butter","cheese"].some(L=>ne.includes(L))?{original:`${K} tbsp ${ne}`,name:ne,amount:K,unit:"tbsp"}:{original:`1 cup ${ne}`,name:ne,amount:1,unit:"cup"})},q=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],ae=["mon","tue","wed","thu","fri","sat","sun"],je={week:{}},ue={};return q.forEach((te,Q)=>{const xe=ae[Q],ce=[];let F=0;const U=j===2?["breakfast","dinner"]:j===3?["breakfast","lunch","dinner"]:["breakfast","lunch","dinner"];let K=0,ne=0,be=0,L=0;U.forEach(W=>{const me=u.excludedMeals?.[`${xe}-${F}`];if(F++,me)return;const I=_[W],pe=Math.round(x*I),se=Math.round(E*I),ie=Math.round(A*I),Ee=Math.round(w*I);K+=pe,ne+=se,be+=ie,L+=Ee;const V=J[W][Q%J[W].length],D=z(V,pe,se,ie,Ee);D.type=W,ce.push(D),ue[V.id]={...D,ingredients:O(V,se,ie,Ee),instructions:["Prep all ingredients to specified portions","Cook protein to desired doneness","Combine all components","Season to taste and serve"]}});for(let W=0;W<g;W++){const me=u.excludedMeals?.[`${xe}-${F}`];if(F++,me)continue;const I=_.snack,pe=Math.round(x*I),se=Math.round(E*I),ie=Math.round(A*I),Ee=Math.round(w*I);K+=pe,ne+=se,be+=ie,L+=Ee;const V=J.snack[(Q+W)%J.snack.length],D=z(V,pe,se,ie,Ee);D.type="snack",ce.push(D),ue[V.id]={...D,ingredients:O(V,se,ie,Ee),instructions:["Quick, nutritious snack - enjoy!"]}}je.week[te]={meals:ce,nutrients:{calories:K,protein:ne,carbohydrates:be,fat:L}}}),{mealPlan:je,recipes:ue}};function AppContent(){const{user:u,loading:h,isAuthenticated:x}=useAuth(),{isSubscribed:E,loading:j,initializeSubscription:g,activatePaidSubscription:N}=useSubscription(),[k,A]=useLocalStorage("motus_profile",null),[w,M]=useLocalStorage("motus_program",null),[_,J]=useLocalStorage("motus_meals",[]),[z,O]=useLocalStorage("motus_workouts",[]),[q,ae]=useLocalStorage("motus_completed",[]),[je,ue]=useLocalStorage("motus_meal_plan",null),[te,Q]=useLocalStorage("motus_recipes",{}),[xe,ce]=reactExports.useState("dashboard"),[F,U]=reactExports.useState(!1),[K,ne]=reactExports.useState(!1),[be,L]=reactExports.useState(!1),[W,me]=reactExports.useState(!0),[I,pe]=reactExports.useState(!0),[se,ie]=reactExports.useState(!1),[Ee,V]=reactExports.useState(!1),[D,G]=reactExports.useState(!1),Te=k?.programType==="lockin",ee=E||Te,[Ae,ye]=reactExports.useState(!1),[Ge,Le]=reactExports.useState(!1),[Ue,$e]=reactExports.useState(!1);reactExports.useEffect(()=>{h||(async()=>{pe(!0),x&&await syncLocalToCloud();const[Xe,bt,Ft,ks]=await Promise.all([loadProfile(),loadProgram(),loadMeals(),loadWorkouts()]);Xe.data&&A(Xe.data),bt.data&&M(bt.data),Ft.data&&J(Ft.data),ks.data&&O(ks.data),Xe.data&&bt.data?(L(!0),me(!1)):localStorage.getItem("motus_has_visited")&&me(!1),pe(!1)})()},[x,h]),reactExports.useEffect(()=>{const Xe=new URLSearchParams(window.location.search).get("ref");Xe&&(localStorage.setItem("motus_referral_code",Xe),window.history.replaceState({},"",window.location.pathname))},[]),reactExports.useEffect(()=>{const Oe=k?.programType==="lockin";if(!I&&!j&&be&&!E&&!Oe){const Xe=setTimeout(()=>{ie(!0)},1e3);return()=>clearTimeout(Xe)}},[I,j,be,E,k?.programType]);const dt=async Oe=>{A(Oe),await saveProfile(Oe)},Cs=async Oe=>{M(Oe),await saveProgram(Oe)},rt=async Oe=>{J(Oe),await saveMeals(Oe)},fs=async Oe=>{O(Oe),await saveWorkouts(Oe)},rs=async Oe=>{await dt(Oe.profile),await Cs(Oe.program),await g();const Xe=Oe.profile?.programType==="lockin";!E&&!Xe&&ie(!0),L(!0)},cs=async Oe=>{Oe&&await N(Oe),ie(!1)},Tt=async Oe=>{const Xe=[..._,{...Oe,id:Date.now()}];await rt(Xe),U(!1)},ft=async Oe=>{const Xe=_.filter(bt=>bt.id!==Oe);await rt(Xe)},at=async Oe=>{const Xe=[...z,{...Oe,id:Date.now()}];await fs(Xe),ne(!1)},qs=(Oe,Xe,bt)=>{const Ft=q.find(ks=>ks.day===Oe&&ks.sessionIndex===Xe);if(Ft)if(Ft.completedExercises.includes(bt)){const ks=q.map(Ke=>Ke.day===Oe&&Ke.sessionIndex===Xe?{...Ke,completedExercises:Ke.completedExercises.filter(Ne=>Ne!==bt)}:Ke);ae(ks)}else{const ks=q.map(Ke=>Ke.day===Oe&&Ke.sessionIndex===Xe?{...Ke,completedExercises:[...Ke.completedExercises,bt]}:Ke);ae(ks)}else ae([...q,{day:Oe,sessionIndex:Xe,completedExercises:[bt]}])},Pe=(Oe,Xe)=>{const bt=w?.weeklySchedule?.find(Ke=>Ke.day===Oe)?.sessions?.[Xe];if(!bt?.exercises)return;const Ft=bt.exercises.map((Ke,Ne)=>Ne);if(q.find(Ke=>Ke.day===Oe&&Ke.sessionIndex===Xe)){const Ke=q.map(Ne=>Ne.day===Oe&&Ne.sessionIndex===Xe?{...Ne,completedExercises:Ft}:Ne);ae(Ke)}else ae([...q,{day:Oe,sessionIndex:Xe,completedExercises:Ft,exerciseLogs:{}}])},gr=(Oe,Xe,bt,Ft)=>{if(q.find(Ke=>Ke.day===Oe&&Ke.sessionIndex===Xe)){const Ke=q.map(Ne=>Ne.day===Oe&&Ne.sessionIndex===Xe?{...Ne,exerciseLogs:{...Ne.exerciseLogs,[bt]:Ft},completedExercises:Ne.completedExercises.includes(bt)?Ne.completedExercises:[...Ne.completedExercises,bt]}:Ne);ae(Ke)}else ae([...q,{day:Oe,sessionIndex:Xe,completedExercises:[bt],exerciseLogs:{[bt]:Ft}}])},hn=async()=>{window.confirm("Are you sure you want to reset? All your data will be lost.")&&(await dt(null),await Cs(null),await rt([]),await fs([]),ae([]),L(!1),ce("dashboard"))};if(h||I||j)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-accent-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Loading your data..."})]})});const Ss=new Date().toISOString().split("T")[0],Ur=_.filter(Oe=>(Oe.loggedAt||Oe.createdAt)?.startsWith(Ss)),gs=z.filter(Oe=>(Oe.loggedAt||Oe.completedAt)?.startsWith(Ss)),Wr=()=>{localStorage.setItem("motus_has_visited","true"),me(!1)};return Ae?jsxRuntimeExports.jsx(PrivacyPolicy,{onBack:()=>ye(!1)}):Ge?jsxRuntimeExports.jsx(TermsConditions,{onBack:()=>Le(!1)}):W&&!be?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LandingPage,{onGetStarted:()=>$e(!0),onShowPrivacy:()=>ye(!0),onShowTerms:()=>Le(!0)}),jsxRuntimeExports.jsx(SignUpModal,{isOpen:Ue,onClose:()=>$e(!1),onSuccess:Wr,onShowPrivacy:()=>{$e(!1),ye(!0)},onShowTerms:()=>{$e(!1),Le(!0)}})]}):be?jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900",children:[jsxRuntimeExports.jsx(PaywallOverlay,{isVisible:se&&!ee,onClose:()=>ie(!1),onSuccess:cs,program:w}),jsxRuntimeExports.jsxs("div",{className:!ee&&be?"relative":"",children:[!ee&&be&&xe!=="dashboard"&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md z-40 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-accent-primary/20 flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-8 h-8 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Premium Feature"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-4",children:"Subscribe to unlock this tab"}),jsxRuntimeExports.jsx("button",{onClick:()=>ie(!0),className:"px-6 py-2 bg-accent-primary text-dark-900 font-medium rounded-lg hover:bg-accent-primary/90",children:"Unlock Now"})]})}),xe==="dashboard"&&jsxRuntimeExports.jsx(Dashboard,{profile:k,program:w,meals:_,workouts:z,todaysMeals:Ur,todaysWorkouts:gs,isSubscribed:ee,onLogMeal:()=>ee?U(!0):ie(!0),onLogWorkout:()=>ee?ne(!0):ie(!0),onViewProgram:()=>ee?ce("program"):ie(!0),onViewNutrition:()=>ee?ce("nutrition"):ie(!0),onShowPaywall:()=>ie(!0),onCreateMealPlan:()=>V(!0)}),xe==="program"&&ee&&jsxRuntimeExports.jsx(ProgramView,{program:w,completedWorkouts:q,onCompleteExercise:qs,onCompleteSession:Pe,onUpdateExerciseLog:gr,onBack:()=>ce("dashboard")}),xe==="nutrition"&&ee&&jsxRuntimeExports.jsx(NutritionView,{profile:k,meals:_,workouts:z,mealPlan:je,recipes:te,isGeneratingMealPlan:D,onLogMeal:()=>U(!0),onDeleteMeal:ft,onCreateMealPlan:()=>V(!0),onBack:()=>ce("dashboard")}),xe==="stats"&&ee&&jsxRuntimeExports.jsx(StatsView,{profile:k,program:w,meals:_,workouts:z}),xe==="profile"&&jsxRuntimeExports.jsx(ProfileView,{profile:k,program:w,isSubscribed:ee,onResetSetup:hn,onShowPaywall:()=>ie(!0)})]}),jsxRuntimeExports.jsx(TabBar,{activeTab:xe,onChange:Oe=>{!ee&&Oe!=="dashboard"&&Oe!=="profile"?ie(!0):ce(Oe)},isSubscribed:ee}),jsxRuntimeExports.jsx(LogMealModal,{isOpen:F,onClose:()=>U(!1),onSave:Tt,mealPlan:je}),jsxRuntimeExports.jsx(LogWorkoutModal,{isOpen:K,onClose:()=>ne(!1),onSave:at,program:w}),jsxRuntimeExports.jsx(NutritionPreferences,{isOpen:Ee,onClose:()=>V(!1),onSave:async Oe=>{console.log("Nutrition preferences saved:",Oe),V(!1),G(!0);try{const Xe=generateMockMealPlan(Oe,k);ue(Xe.mealPlan),Q(Xe.recipes),ce("nutrition")}catch(Xe){console.error("Error generating meal plan:",Xe)}finally{G(!1)}},profile:k})]}):jsxRuntimeExports.jsx(SetupWizardWithErrorBoundary,{onComplete:rs})}function App(){return jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsxs(SubscriptionProvider,{children:[jsxRuntimeExports.jsx(AppContent,{}),jsxRuntimeExports.jsx(FeedbackWidget,{})]})})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
