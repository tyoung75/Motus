(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const C of document.querySelectorAll('link[rel="modulepreload"]'))b(C);new MutationObserver(C=>{for(const w of C)if(w.type==="childList")for(const k of w.addedNodes)k.tagName==="LINK"&&k.rel==="modulepreload"&&b(k)}).observe(document,{childList:!0,subtree:!0});function x(C){const w={};return C.integrity&&(w.integrity=C.integrity),C.referrerPolicy&&(w.referrerPolicy=C.referrerPolicy),C.crossOrigin==="use-credentials"?w.credentials="include":C.crossOrigin==="anonymous"?w.credentials="omit":w.credentials="same-origin",w}function b(C){if(C.ep)return;C.ep=!0;const w=x(C);fetch(C.href,w)}})();var Gl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function v0(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var Cc={exports:{}},Ta={},Ec={exports:{}},dt={};var Bd;function O1(){if(Bd)return dt;Bd=1;var f=Symbol.for("react.element"),m=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),w=Symbol.for("react.provider"),k=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),N=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),_=Symbol.iterator;function $(P){return P===null||typeof P!="object"?null:(P=_&&P[_]||P["@@iterator"],typeof P=="function"?P:null)}var Z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,X={};function le(P,W,Ee){this.props=P,this.context=W,this.refs=X,this.updater=Ee||Z}le.prototype.isReactComponent={},le.prototype.setState=function(P,W){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,W,"setState")},le.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function de(){}de.prototype=le.prototype;function ue(P,W,Ee){this.props=P,this.context=W,this.refs=X,this.updater=Ee||Z}var ne=ue.prototype=new de;ne.constructor=ue,G(ne,le.prototype),ne.isPureReactComponent=!0;var Q=Array.isArray,xe=Object.prototype.hasOwnProperty,oe={current:null},Y={key:!0,ref:!0,__self:!0,__source:!0};function me(P,W,Ee){var Re,Fe={},Ne=null,Qe=null;if(W!=null)for(Re in W.ref!==void 0&&(Qe=W.ref),W.key!==void 0&&(Ne=""+W.key),W)xe.call(W,Re)&&!Y.hasOwnProperty(Re)&&(Fe[Re]=W[Re]);var Ue=arguments.length-2;if(Ue===1)Fe.children=Ee;else if(1<Ue){for(var He=Array(Ue),it=0;it<Ue;it++)He[it]=arguments[it+2];Fe.children=He}if(P&&P.defaultProps)for(Re in Ue=P.defaultProps,Ue)Fe[Re]===void 0&&(Fe[Re]=Ue[Re]);return{$$typeof:f,type:P,key:Ne,ref:Qe,props:Fe,_owner:oe.current}}function ce(P,W){return{$$typeof:f,type:P.type,key:W,ref:P.ref,props:P.props,_owner:P._owner}}function ke(P){return typeof P=="object"&&P!==null&&P.$$typeof===f}function Ge(P){var W={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(Ee){return W[Ee]})}var te=/\/+/g;function K(P,W){return typeof P=="object"&&P!==null&&P.key!=null?Ge(""+P.key):W.toString(36)}function ge(P,W,Ee,Re,Fe){var Ne=typeof P;(Ne==="undefined"||Ne==="boolean")&&(P=null);var Qe=!1;if(P===null)Qe=!0;else switch(Ne){case"string":case"number":Qe=!0;break;case"object":switch(P.$$typeof){case f:case m:Qe=!0}}if(Qe)return Qe=P,Fe=Fe(Qe),P=Re===""?"."+K(Qe,0):Re,Q(Fe)?(Ee="",P!=null&&(Ee=P.replace(te,"$&/")+"/"),ge(Fe,W,Ee,"",function(it){return it})):Fe!=null&&(ke(Fe)&&(Fe=ce(Fe,Ee+(!Fe.key||Qe&&Qe.key===Fe.key?"":(""+Fe.key).replace(te,"$&/")+"/")+P)),W.push(Fe)),1;if(Qe=0,Re=Re===""?".":Re+":",Q(P))for(var Ue=0;Ue<P.length;Ue++){Ne=P[Ue];var He=Re+K(Ne,Ue);Qe+=ge(Ne,W,Ee,He,Fe)}else if(He=$(P),typeof He=="function")for(P=He.call(P),Ue=0;!(Ne=P.next()).done;)Ne=Ne.value,He=Re+K(Ne,Ue++),Qe+=ge(Ne,W,Ee,He,Fe);else if(Ne==="object")throw W=String(P),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.");return Qe}function B(P,W,Ee){if(P==null)return P;var Re=[],Fe=0;return ge(P,Re,"","",function(Ne){return W.call(Ee,Ne,Fe++)}),Re}function ye(P){if(P._status===-1){var W=P._result;W=W(),W.then(function(Ee){(P._status===0||P._status===-1)&&(P._status=1,P._result=Ee)},function(Ee){(P._status===0||P._status===-1)&&(P._status=2,P._result=Ee)}),P._status===-1&&(P._status=0,P._result=W)}if(P._status===1)return P._result.default;throw P._result}var fe={current:null},he={transition:null},H={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:he,ReactCurrentOwner:oe};function U(){throw Error("act(...) is not supported in production builds of React.")}return dt.Children={map:B,forEach:function(P,W,Ee){B(P,function(){W.apply(this,arguments)},Ee)},count:function(P){var W=0;return B(P,function(){W++}),W},toArray:function(P){return B(P,function(W){return W})||[]},only:function(P){if(!ke(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},dt.Component=le,dt.Fragment=x,dt.Profiler=C,dt.PureComponent=ue,dt.StrictMode=b,dt.Suspense=R,dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,dt.act=U,dt.cloneElement=function(P,W,Ee){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var Re=G({},P.props),Fe=P.key,Ne=P.ref,Qe=P._owner;if(W!=null){if(W.ref!==void 0&&(Ne=W.ref,Qe=oe.current),W.key!==void 0&&(Fe=""+W.key),P.type&&P.type.defaultProps)var Ue=P.type.defaultProps;for(He in W)xe.call(W,He)&&!Y.hasOwnProperty(He)&&(Re[He]=W[He]===void 0&&Ue!==void 0?Ue[He]:W[He])}var He=arguments.length-2;if(He===1)Re.children=Ee;else if(1<He){Ue=Array(He);for(var it=0;it<He;it++)Ue[it]=arguments[it+2];Re.children=Ue}return{$$typeof:f,type:P.type,key:Fe,ref:Ne,props:Re,_owner:Qe}},dt.createContext=function(P){return P={$$typeof:k,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:w,_context:P},P.Consumer=P},dt.createElement=me,dt.createFactory=function(P){var W=me.bind(null,P);return W.type=P,W},dt.createRef=function(){return{current:null}},dt.forwardRef=function(P){return{$$typeof:M,render:P}},dt.isValidElement=ke,dt.lazy=function(P){return{$$typeof:O,_payload:{_status:-1,_result:P},_init:ye}},dt.memo=function(P,W){return{$$typeof:N,type:P,compare:W===void 0?null:W}},dt.startTransition=function(P){var W=he.transition;he.transition={};try{P()}finally{he.transition=W}},dt.unstable_act=U,dt.useCallback=function(P,W){return fe.current.useCallback(P,W)},dt.useContext=function(P){return fe.current.useContext(P)},dt.useDebugValue=function(){},dt.useDeferredValue=function(P){return fe.current.useDeferredValue(P)},dt.useEffect=function(P,W){return fe.current.useEffect(P,W)},dt.useId=function(){return fe.current.useId()},dt.useImperativeHandle=function(P,W,Ee){return fe.current.useImperativeHandle(P,W,Ee)},dt.useInsertionEffect=function(P,W){return fe.current.useInsertionEffect(P,W)},dt.useLayoutEffect=function(P,W){return fe.current.useLayoutEffect(P,W)},dt.useMemo=function(P,W){return fe.current.useMemo(P,W)},dt.useReducer=function(P,W,Ee){return fe.current.useReducer(P,W,Ee)},dt.useRef=function(P){return fe.current.useRef(P)},dt.useState=function(P){return fe.current.useState(P)},dt.useSyncExternalStore=function(P,W,Ee){return fe.current.useSyncExternalStore(P,W,Ee)},dt.useTransition=function(){return fe.current.useTransition()},dt.version="18.3.1",dt}var Ld;function Pc(){return Ld||(Ld=1,Ec.exports=O1()),Ec.exports}var Fd;function D1(){if(Fd)return Ta;Fd=1;var f=Pc(),m=Symbol.for("react.element"),x=Symbol.for("react.fragment"),b=Object.prototype.hasOwnProperty,C=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,w={key:!0,ref:!0,__self:!0,__source:!0};function k(M,R,N){var O,_={},$=null,Z=null;N!==void 0&&($=""+N),R.key!==void 0&&($=""+R.key),R.ref!==void 0&&(Z=R.ref);for(O in R)b.call(R,O)&&!w.hasOwnProperty(O)&&(_[O]=R[O]);if(M&&M.defaultProps)for(O in R=M.defaultProps,R)_[O]===void 0&&(_[O]=R[O]);return{$$typeof:m,type:M,key:$,ref:Z,props:_,_owner:C.current}}return Ta.Fragment=x,Ta.jsx=k,Ta.jsxs=k,Ta}var Ud;function P1(){return Ud||(Ud=1,Cc.exports=D1()),Cc.exports}var i=P1(),we=Pc();const N0=v0(we);var Vl={},Sc={exports:{}},Gr={},Ac={exports:{}},kc={};var Wd;function B1(){return Wd||(Wd=1,(function(f){function m(he,H){var U=he.length;he.push(H);e:for(;0<U;){var P=U-1>>>1,W=he[P];if(0<C(W,H))he[P]=H,he[U]=W,U=P;else break e}}function x(he){return he.length===0?null:he[0]}function b(he){if(he.length===0)return null;var H=he[0],U=he.pop();if(U!==H){he[0]=U;e:for(var P=0,W=he.length,Ee=W>>>1;P<Ee;){var Re=2*(P+1)-1,Fe=he[Re],Ne=Re+1,Qe=he[Ne];if(0>C(Fe,U))Ne<W&&0>C(Qe,Fe)?(he[P]=Qe,he[Ne]=U,P=Ne):(he[P]=Fe,he[Re]=U,P=Re);else if(Ne<W&&0>C(Qe,U))he[P]=Qe,he[Ne]=U,P=Ne;else break e}}return H}function C(he,H){var U=he.sortIndex-H.sortIndex;return U!==0?U:he.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var w=performance;f.unstable_now=function(){return w.now()}}else{var k=Date,M=k.now();f.unstable_now=function(){return k.now()-M}}var R=[],N=[],O=1,_=null,$=3,Z=!1,G=!1,X=!1,le=typeof setTimeout=="function"?setTimeout:null,de=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ne(he){for(var H=x(N);H!==null;){if(H.callback===null)b(N);else if(H.startTime<=he)b(N),H.sortIndex=H.expirationTime,m(R,H);else break;H=x(N)}}function Q(he){if(X=!1,ne(he),!G)if(x(R)!==null)G=!0,ye(xe);else{var H=x(N);H!==null&&fe(Q,H.startTime-he)}}function xe(he,H){G=!1,X&&(X=!1,de(me),me=-1),Z=!0;var U=$;try{for(ne(H),_=x(R);_!==null&&(!(_.expirationTime>H)||he&&!Ge());){var P=_.callback;if(typeof P=="function"){_.callback=null,$=_.priorityLevel;var W=P(_.expirationTime<=H);H=f.unstable_now(),typeof W=="function"?_.callback=W:_===x(R)&&b(R),ne(H)}else b(R);_=x(R)}if(_!==null)var Ee=!0;else{var Re=x(N);Re!==null&&fe(Q,Re.startTime-H),Ee=!1}return Ee}finally{_=null,$=U,Z=!1}}var oe=!1,Y=null,me=-1,ce=5,ke=-1;function Ge(){return!(f.unstable_now()-ke<ce)}function te(){if(Y!==null){var he=f.unstable_now();ke=he;var H=!0;try{H=Y(!0,he)}finally{H?K():(oe=!1,Y=null)}}else oe=!1}var K;if(typeof ue=="function")K=function(){ue(te)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,B=ge.port2;ge.port1.onmessage=te,K=function(){B.postMessage(null)}}else K=function(){le(te,0)};function ye(he){Y=he,oe||(oe=!0,K())}function fe(he,H){me=le(function(){he(f.unstable_now())},H)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(he){he.callback=null},f.unstable_continueExecution=function(){G||Z||(G=!0,ye(xe))},f.unstable_forceFrameRate=function(he){0>he||125<he?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<he?Math.floor(1e3/he):5},f.unstable_getCurrentPriorityLevel=function(){return $},f.unstable_getFirstCallbackNode=function(){return x(R)},f.unstable_next=function(he){switch($){case 1:case 2:case 3:var H=3;break;default:H=$}var U=$;$=H;try{return he()}finally{$=U}},f.unstable_pauseExecution=function(){},f.unstable_requestPaint=function(){},f.unstable_runWithPriority=function(he,H){switch(he){case 1:case 2:case 3:case 4:case 5:break;default:he=3}var U=$;$=he;try{return H()}finally{$=U}},f.unstable_scheduleCallback=function(he,H,U){var P=f.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?P+U:P):U=P,he){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=U+W,he={id:O++,callback:H,priorityLevel:he,startTime:U,expirationTime:W,sortIndex:-1},U>P?(he.sortIndex=U,m(N,he),x(R)===null&&he===x(N)&&(X?(de(me),me=-1):X=!0,fe(Q,U-P))):(he.sortIndex=W,m(R,he),G||Z||(G=!0,ye(xe))),he},f.unstable_shouldYield=Ge,f.unstable_wrapCallback=function(he){var H=$;return function(){var U=$;$=H;try{return he.apply(this,arguments)}finally{$=U}}}})(kc)),kc}var zd;function L1(){return zd||(zd=1,Ac.exports=B1()),Ac.exports}var Hd;function F1(){if(Hd)return Gr;Hd=1;var f=Pc(),m=L1();function x(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,c=1;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var b=new Set,C={};function w(t,s){k(t,s),k(t+"Capture",s)}function k(t,s){for(C[t]=s,t=0;t<s.length;t++)b.add(s[t])}var M=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),R=Object.prototype.hasOwnProperty,N=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O={},_={};function $(t){return R.call(_,t)?!0:R.call(O,t)?!1:N.test(t)?_[t]=!0:(O[t]=!0,!1)}function Z(t,s,c,d){if(c!==null&&c.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return d?!1:c!==null?!c.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G(t,s,c,d){if(s===null||typeof s>"u"||Z(t,s,c,d))return!0;if(d)return!1;if(c!==null)switch(c.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function X(t,s,c,d,p,y,A){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=d,this.attributeNamespace=p,this.mustUseProperty=c,this.propertyName=t,this.type=s,this.sanitizeURL=y,this.removeEmptyString=A}var le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){le[t]=new X(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];le[s]=new X(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){le[t]=new X(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){le[t]=new X(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){le[t]=new X(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){le[t]=new X(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){le[t]=new X(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){le[t]=new X(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){le[t]=new X(t,5,!1,t.toLowerCase(),null,!1,!1)});var de=/[\-:]([a-z])/g;function ue(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(de,ue);le[s]=new X(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(de,ue);le[s]=new X(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(de,ue);le[s]=new X(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){le[t]=new X(t,1,!1,t.toLowerCase(),null,!1,!1)}),le.xlinkHref=new X("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){le[t]=new X(t,1,!1,t.toLowerCase(),null,!0,!0)});function ne(t,s,c,d){var p=le.hasOwnProperty(s)?le[s]:null;(p!==null?p.type!==0:d||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(G(s,c,p,d)&&(c=null),d||p===null?$(s)&&(c===null?t.removeAttribute(s):t.setAttribute(s,""+c)):p.mustUseProperty?t[p.propertyName]=c===null?p.type===3?!1:"":c:(s=p.attributeName,d=p.attributeNamespace,c===null?t.removeAttribute(s):(p=p.type,c=p===3||p===4&&c===!0?"":""+c,d?t.setAttributeNS(d,s,c):t.setAttribute(s,c))))}var Q=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xe=Symbol.for("react.element"),oe=Symbol.for("react.portal"),Y=Symbol.for("react.fragment"),me=Symbol.for("react.strict_mode"),ce=Symbol.for("react.profiler"),ke=Symbol.for("react.provider"),Ge=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),he=Symbol.iterator;function H(t){return t===null||typeof t!="object"?null:(t=he&&t[he]||t["@@iterator"],typeof t=="function"?t:null)}var U=Object.assign,P;function W(t){if(P===void 0)try{throw Error()}catch(c){var s=c.stack.trim().match(/\n( *(at )?)/);P=s&&s[1]||""}return`
`+P+t}var Ee=!1;function Re(t,s){if(!t||Ee)return"";Ee=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(ae){var d=ae}Reflect.construct(t,[],s)}else{try{s.call()}catch(ae){d=ae}t.call(s.prototype)}else{try{throw Error()}catch(ae){d=ae}t()}}catch(ae){if(ae&&d&&typeof ae.stack=="string"){for(var p=ae.stack.split(`
`),y=d.stack.split(`
`),A=p.length-1,D=y.length-1;1<=A&&0<=D&&p[A]!==y[D];)D--;for(;1<=A&&0<=D;A--,D--)if(p[A]!==y[D]){if(A!==1||D!==1)do if(A--,D--,0>D||p[A]!==y[D]){var F=`
`+p[A].replace(" at new "," at ");return t.displayName&&F.includes("<anonymous>")&&(F=F.replace("<anonymous>",t.displayName)),F}while(1<=A&&0<=D);break}}}finally{Ee=!1,Error.prepareStackTrace=c}return(t=t?t.displayName||t.name:"")?W(t):""}function Fe(t){switch(t.tag){case 5:return W(t.type);case 16:return W("Lazy");case 13:return W("Suspense");case 19:return W("SuspenseList");case 0:case 2:case 15:return t=Re(t.type,!1),t;case 11:return t=Re(t.type.render,!1),t;case 1:return t=Re(t.type,!0),t;default:return""}}function Ne(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Y:return"Fragment";case oe:return"Portal";case ce:return"Profiler";case me:return"StrictMode";case K:return"Suspense";case ge:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ge:return(t.displayName||"Context")+".Consumer";case ke:return(t._context.displayName||"Context")+".Provider";case te:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case B:return s=t.displayName||null,s!==null?s:Ne(t.type)||"Memo";case ye:s=t._payload,t=t._init;try{return Ne(t(s))}catch{}}return null}function Qe(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ne(s);case 8:return s===me?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ue(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function He(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function it(t){var s=He(t)?"checked":"value",c=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),d=""+t[s];if(!t.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var p=c.get,y=c.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return p.call(this)},set:function(A){d=""+A,y.call(this,A)}}),Object.defineProperty(t,s,{enumerable:c.enumerable}),{getValue:function(){return d},setValue:function(A){d=""+A},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function gt(t){t._valueTracker||(t._valueTracker=it(t))}function We(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var c=s.getValue(),d="";return t&&(d=He(t)?t.checked?"true":"false":t.value),t=d,t!==c?(s.setValue(t),!0):!1}function Pe(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pt(t,s){var c=s.checked;return U({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??t._wrapperState.initialChecked})}function At(t,s){var c=s.defaultValue==null?"":s.defaultValue,d=s.checked!=null?s.checked:s.defaultChecked;c=Ue(s.value!=null?s.value:c),t._wrapperState={initialChecked:d,initialValue:c,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function It(t,s){s=s.checked,s!=null&&ne(t,"checked",s,!1)}function et(t,s){It(t,s);var c=Ue(s.value),d=s.type;if(c!=null)d==="number"?(c===0&&t.value===""||t.value!=c)&&(t.value=""+c):t.value!==""+c&&(t.value=""+c);else if(d==="submit"||d==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?ht(t,s.type,c):s.hasOwnProperty("defaultValue")&&ht(t,s.type,Ue(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function tt(t,s,c){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var d=s.type;if(!(d!=="submit"&&d!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,c||s===t.value||(t.value=s),t.defaultValue=s}c=t.name,c!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,c!==""&&(t.name=c)}function ht(t,s,c){(s!=="number"||Pe(t.ownerDocument)!==t)&&(c==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+c&&(t.defaultValue=""+c))}var Tn=Array.isArray;function Oe(t,s,c,d){if(t=t.options,s){s={};for(var p=0;p<c.length;p++)s["$"+c[p]]=!0;for(c=0;c<t.length;c++)p=s.hasOwnProperty("$"+t[c].value),t[c].selected!==p&&(t[c].selected=p),p&&d&&(t[c].defaultSelected=!0)}else{for(c=""+Ue(c),s=null,p=0;p<t.length;p++){if(t[p].value===c){t[p].selected=!0,d&&(t[p].defaultSelected=!0);return}s!==null||t[p].disabled||(s=t[p])}s!==null&&(s.selected=!0)}}function ts(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(x(91));return U({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function zi(t,s){var c=s.value;if(c==null){if(c=s.children,s=s.defaultValue,c!=null){if(s!=null)throw Error(x(92));if(Tn(c)){if(1<c.length)throw Error(x(93));c=c[0]}s=c}s==null&&(s=""),c=s}t._wrapperState={initialValue:Ue(c)}}function sn(t,s){var c=Ue(s.value),d=Ue(s.defaultValue);c!=null&&(c=""+c,c!==t.value&&(t.value=c),s.defaultValue==null&&t.defaultValue!==c&&(t.defaultValue=c)),d!=null&&(t.defaultValue=""+d)}function ai(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Dr(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function li(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Dr(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vr,hr=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,c,d,p){MSApp.execUnsafeLocalFunction(function(){return t(s,c,d,p)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Vr=Vr||document.createElement("div"),Vr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Vr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function rs(t,s){if(s){var c=t.firstChild;if(c&&c===t.lastChild&&c.nodeType===3){c.nodeValue=s;return}}t.textContent=s}var jn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},to=["Webkit","ms","Moz","O"];Object.keys(jn).forEach(function(t){to.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),jn[s]=jn[t]})});function Ut(t,s,c){return s==null||typeof s=="boolean"||s===""?"":c||typeof s!="number"||s===0||jn.hasOwnProperty(t)&&jn[t]?(""+s).trim():s+"px"}function je(t,s){t=t.style;for(var c in s)if(s.hasOwnProperty(c)){var d=c.indexOf("--")===0,p=Ut(c,s[c],d);c==="float"&&(c="cssFloat"),d?t.setProperty(c,p):t[c]=p}}var $t=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vt(t,s){if(s){if($t[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(x(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(x(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(x(61))}if(s.style!=null&&typeof s.style!="object")throw Error(x(62))}}function Rt(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Un=null;function _s(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var oi=null,ut=null,Pr=null;function Hi(t){if(t=xa(t)){if(typeof oi!="function")throw Error(x(280));var s=t.stateNode;s&&(s=il(s),oi(t.stateNode,t.type,s))}}function Gi(t){ut?Pr?Pr.push(t):Pr=[t]:ut=t}function Br(){if(ut){var t=ut,s=Pr;if(Pr=ut=null,Hi(t),s)for(t=0;t<s.length;t++)Hi(s[t])}}function ci(t,s){return t(s)}function ir(){}var Rn=!1;function Ms(t,s,c){if(Rn)return t(s,c);Rn=!0;try{return ci(t,s,c)}finally{Rn=!1,(ut!==null||Pr!==null)&&(ir(),Br())}}function Er(t,s){var c=t.stateNode;if(c===null)return null;var d=il(c);if(d===null)return null;c=d[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(t=t.type,d=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!d;break e;default:t=!1}if(t)return null;if(c&&typeof c!="function")throw Error(x(231,s,typeof c));return c}var Vi=!1;if(M)try{var Xr={};Object.defineProperty(Xr,"passive",{get:function(){Vi=!0}}),window.addEventListener("test",Xr,Xr),window.removeEventListener("test",Xr,Xr)}catch{Vi=!1}function Xi(t,s,c,d,p,y,A,D,F){var ae=Array.prototype.slice.call(arguments,3);try{s.apply(c,ae)}catch(Ce){this.onError(Ce)}}var nr=!1,an=null,yr=!1,_e=null,ns={onError:function(t){nr=!0,an=t}};function Yi(t,s,c,d,p,y,A,D,F){nr=!1,an=null,Xi.apply(ns,arguments)}function Sr(t,s,c,d,p,y,A,D,F){if(Yi.apply(this,arguments),nr){if(nr){var ae=an;nr=!1,an=null}else throw Error(x(198));yr||(yr=!0,_e=ae)}}function Lr(t){var s=t,c=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(c=s.return),t=s.return;while(t)}return s.tag===3?c:null}function Os(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Ds(t){if(Lr(t)!==t)throw Error(x(188))}function ln(t){var s=t.alternate;if(!s){if(s=Lr(t),s===null)throw Error(x(188));return s!==t?null:t}for(var c=t,d=s;;){var p=c.return;if(p===null)break;var y=p.alternate;if(y===null){if(d=p.return,d!==null){c=d;continue}break}if(p.child===y.child){for(y=p.child;y;){if(y===c)return Ds(p),t;if(y===d)return Ds(p),s;y=y.sibling}throw Error(x(188))}if(c.return!==d.return)c=p,d=y;else{for(var A=!1,D=p.child;D;){if(D===c){A=!0,c=p,d=y;break}if(D===d){A=!0,d=p,c=y;break}D=D.sibling}if(!A){for(D=y.child;D;){if(D===c){A=!0,c=y,d=p;break}if(D===d){A=!0,d=y,c=p;break}D=D.sibling}if(!A)throw Error(x(189))}}if(c.alternate!==d)throw Error(x(190))}if(c.tag!==3)throw Error(x(188));return c.stateNode.current===c?t:s}function La(t){return t=ln(t),t!==null?Fa(t):null}function Fa(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Fa(t);if(s!==null)return s;t=t.sibling}return null}var Yr=m.unstable_scheduleCallback,fr=m.unstable_cancelCallback,_t=m.unstable_shouldYield,Ua=m.unstable_requestPaint,Ct=m.unstable_now,Zi=m.unstable_getCurrentPriorityLevel,pe=m.unstable_ImmediatePriority,Wa=m.unstable_UserBlockingPriority,Tt=m.unstable_NormalPriority,ss=m.unstable_LowPriority,za=m.unstable_IdlePriority,mt=null,lt=null;function ft(t){if(lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(mt,t,void 0,(t.current.flags&128)===128)}catch{}}var _r=Math.clz32?Math.clz32:Jt,Ki=Math.log,qi=Math.LN2;function Jt(t){return t>>>=0,t===0?32:31-(Ki(t)/qi|0)|0}var Zr=64,ui=4194304;function jt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kr(t,s){var c=t.pendingLanes;if(c===0)return 0;var d=0,p=t.suspendedLanes,y=t.pingedLanes,A=c&268435455;if(A!==0){var D=A&~p;D!==0?d=jt(D):(y&=A,y!==0&&(d=jt(y)))}else A=c&~p,A!==0?d=jt(A):y!==0&&(d=jt(y));if(d===0)return 0;if(s!==0&&s!==d&&(s&p)===0&&(p=d&-d,y=s&-s,p>=y||p===16&&(y&4194240)!==0))return s;if((d&4)!==0&&(d|=c&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=d;0<s;)c=31-_r(s),p=1<<c,d|=t[c],s&=~p;return d}function ro(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function is(t,s){for(var c=t.suspendedLanes,d=t.pingedLanes,p=t.expirationTimes,y=t.pendingLanes;0<y;){var A=31-_r(y),D=1<<A,F=p[A];F===-1?((D&c)===0||(D&d)!==0)&&(p[A]=ro(D,s)):F<=s&&(t.expiredLanes|=D),y&=~D}}function Et(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ar(){var t=Zr;return Zr<<=1,(Zr&4194240)===0&&(Zr=64),t}function J(t){for(var s=[],c=0;31>c;c++)s.push(t);return s}function T(t,s,c){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-_r(s),t[s]=c}function Xe(t,s){var c=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var d=t.eventTimes;for(t=t.expirationTimes;0<c;){var p=31-_r(c),y=1<<p;s[p]=0,d[p]=-1,t[p]=-1,c&=~y}}function Yt(t,s){var c=t.entangledLanes|=s;for(t=t.entanglements;c;){var d=31-_r(c),p=1<<d;p&s|t[d]&s&&(t[d]|=s),c&=~p}}var ot=0;function Ha(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var di,Ar,Ye,Mt,Qi,$i=!1,as=[],qr=null,on=null,_n=null,Lt=new Map,yn=new Map,wr=[],$e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ga(t,s){switch(t){case"focusin":case"focusout":qr=null;break;case"dragenter":case"dragleave":on=null;break;case"mouseover":case"mouseout":_n=null;break;case"pointerover":case"pointerout":Lt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":yn.delete(s.pointerId)}}function nt(t,s,c,d,p,y){return t===null||t.nativeEvent!==y?(t={blockedOn:s,domEventName:c,eventSystemFlags:d,nativeEvent:y,targetContainers:[p]},s!==null&&(s=xa(s),s!==null&&Ar(s)),t):(t.eventSystemFlags|=d,s=t.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),t)}function lr(t,s,c,d,p){switch(s){case"focusin":return qr=nt(qr,t,s,c,d,p),!0;case"dragenter":return on=nt(on,t,s,c,d,p),!0;case"mouseover":return _n=nt(_n,t,s,c,d,p),!0;case"pointerover":var y=p.pointerId;return Lt.set(y,nt(Lt.get(y)||null,t,s,c,d,p)),!0;case"gotpointercapture":return y=p.pointerId,yn.set(y,nt(yn.get(y)||null,t,s,c,d,p)),!0}return!1}function Va(t){var s=Vs(t.target);if(s!==null){var c=Lr(s);if(c!==null){if(s=c.tag,s===13){if(s=Os(c),s!==null){t.blockedOn=s,Qi(t.priority,function(){Ye(c)});return}}else if(s===3&&c.stateNode.current.memoizedState.isDehydrated){t.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ls(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var c=hi(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(c===null){c=t.nativeEvent;var d=new c.constructor(c.type,c);Un=d,c.target.dispatchEvent(d),Un=null}else return s=xa(c),s!==null&&Ar(s),t.blockedOn=c,!1;s.shift()}return!0}function Ji(t,s,c){ls(t)&&c.delete(s)}function Wn(){$i=!1,qr!==null&&ls(qr)&&(qr=null),on!==null&&ls(on)&&(on=null),_n!==null&&ls(_n)&&(_n=null),Lt.forEach(Ji),yn.forEach(Ji)}function Ps(t,s){t.blockedOn===s&&(t.blockedOn=null,$i||($i=!0,m.unstable_scheduleCallback(m.unstable_NormalPriority,Wn)))}function wn(t){function s(p){return Ps(p,t)}if(0<as.length){Ps(as[0],t);for(var c=1;c<as.length;c++){var d=as[c];d.blockedOn===t&&(d.blockedOn=null)}}for(qr!==null&&Ps(qr,t),on!==null&&Ps(on,t),_n!==null&&Ps(_n,t),Lt.forEach(s),yn.forEach(s),c=0;c<wr.length;c++)d=wr[c],d.blockedOn===t&&(d.blockedOn=null);for(;0<wr.length&&(c=wr[0],c.blockedOn===null);)Va(c),c.blockedOn===null&&wr.shift()}var cn=Q.ReactCurrentBatchConfig,Mn=!0;function Xa(t,s,c,d){var p=ot,y=cn.transition;cn.transition=null;try{ot=1,zn(t,s,c,d)}finally{ot=p,cn.transition=y}}function Bs(t,s,c,d){var p=ot,y=cn.transition;cn.transition=null;try{ot=4,zn(t,s,c,d)}finally{ot=p,cn.transition=y}}function zn(t,s,c,d){if(Mn){var p=hi(t,s,c,d);if(p===null)fo(t,s,d,or,c),Ga(t,d);else if(lr(p,t,s,c,d))d.stopPropagation();else if(Ga(t,d),s&4&&-1<$e.indexOf(t)){for(;p!==null;){var y=xa(p);if(y!==null&&di(y),y=hi(t,s,c,d),y===null&&fo(t,s,d,or,c),y===p)break;p=y}p!==null&&d.stopPropagation()}else fo(t,s,d,null,c)}}var or=null;function hi(t,s,c,d){if(or=null,t=_s(d),t=Vs(t),t!==null)if(s=Lr(t),s===null)t=null;else if(c=s.tag,c===13){if(t=Os(s),t!==null)return t;t=null}else if(c===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return or=t,null}function ea(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zi()){case pe:return 1;case Wa:return 4;case Tt:case ss:return 16;case za:return 536870912;default:return 16}default:return 16}}var bn=null,ta=null,fi=null;function Ya(){if(fi)return fi;var t,s=ta,c=s.length,d,p="value"in bn?bn.value:bn.textContent,y=p.length;for(t=0;t<c&&s[t]===p[t];t++);var A=c-t;for(d=1;d<=A&&s[c-d]===p[y-d];d++);return fi=p.slice(t,1<d?1-d:void 0)}function yt(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Ls(){return!0}function Fs(){return!1}function Zt(t){function s(c,d,p,y,A){this._reactName=c,this._targetInst=p,this.type=d,this.nativeEvent=y,this.target=A,this.currentTarget=null;for(var D in t)t.hasOwnProperty(D)&&(c=t[D],this[D]=c?c(y):y[D]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ls:Fs,this.isPropagationStopped=Fs,this}return U(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Ls)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Ls)},persist:function(){},isPersistent:Ls}),s}var os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ie=Zt(os),at=U({},os,{view:0,detail:0}),cr=Zt(at),cs,xi,Us,mi=U({},at,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ws,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Us&&(Us&&t.type==="mousemove"?(cs=t.screenX-Us.screenX,xi=t.screenY-Us.screenY):xi=cs=0,Us=t),cs)},movementY:function(t){return"movementY"in t?t.movementY:xi}}),Za=Zt(mi),ra=U({},mi,{dataTransfer:0}),er=Zt(ra),na=U({},at,{relatedTarget:0}),Ot=Zt(na),gi=U({},os,{animationName:0,elapsedTime:0,pseudoElement:0}),Hn=Zt(gi),St=U({},os,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ze=Zt(St),no=U({},os,{data:0}),kt=Zt(no),Gn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},us={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},so={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function un(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=so[t])?!!s[t]:!1}function Ws(){return un}var Ka=U({},at,{key:function(t){if(t.key){var s=Gn[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=yt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?us[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ws,charCode:function(t){return t.type==="keypress"?yt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sa=Zt(Ka),qa=U({},mi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ia=Zt(qa),io=U({},at,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ws}),ds=Zt(io),aa=U({},os,{propertyName:0,elapsedTime:0,pseudoElement:0}),ao=Zt(aa),zs=U({},mi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lo=Zt(zs),On=[9,13,27,32],hs=M&&"CompositionEvent"in window,xr=null;M&&"documentMode"in document&&(xr=document.documentMode);var Qa=M&&"TextEvent"in window&&!xr,Qr=M&&(!hs||xr&&8<xr&&11>=xr),$a=" ",pi=!1;function Ja(t,s){switch(t){case"keyup":return On.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function la(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var br=!1;function oo(t,s){switch(t){case"compositionend":return la(s);case"keypress":return s.which!==32?null:(pi=!0,$a);case"textInput":return t=s.data,t===$a&&pi?null:t;default:return null}}function oa(t,s){if(br)return t==="compositionend"||!hs&&Ja(t,s)?(t=Ya(),fi=ta=bn=null,br=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Qr&&s.locale!=="ko"?null:s.data;default:return null}}var Hs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!Hs[t.type]:s==="textarea"}function Gs(t,s,c,d){Gi(d),s=rl(s,"onChange"),0<s.length&&(c=new ie("onChange","change",null,c,d),t.push({event:c,listeners:s}))}var E=null,e=null;function r(t){Jc(t,0)}function n(t){var s=bi(t);if(We(s))return t}function a(t,s){if(t==="change")return s}var l=!1;if(M){var o;if(M){var u="oninput"in document;if(!u){var h=document.createElement("div");h.setAttribute("oninput","return;"),u=typeof h.oninput=="function"}o=u}else o=!1;l=o&&(!document.documentMode||9<document.documentMode)}function g(){E&&(E.detachEvent("onpropertychange",v),e=E=null)}function v(t){if(t.propertyName==="value"&&n(e)){var s=[];Gs(s,e,t,_s(t)),Ms(r,s)}}function S(t,s,c){t==="focusin"?(g(),E=s,e=c,E.attachEvent("onpropertychange",v)):t==="focusout"&&g()}function I(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return n(e)}function j(t,s){if(t==="click")return n(s)}function L(t,s){if(t==="input"||t==="change")return n(s)}function z(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var q=typeof Object.is=="function"?Object.is:z;function se(t,s){if(q(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var c=Object.keys(t),d=Object.keys(s);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++){var p=c[d];if(!R.call(s,p)||!q(t[p],s[p]))return!1}return!0}function Ae(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ie(t,s){var c=Ae(t);t=0;for(var d;c;){if(c.nodeType===3){if(d=t+c.textContent.length,t<=s&&d>=s)return{node:c,offset:s-t};t=d}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Ae(c)}}function ve(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?ve(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function ct(){for(var t=window,s=Pe();s instanceof t.HTMLIFrameElement;){try{var c=typeof s.contentWindow.location.href=="string"}catch{c=!1}if(c)t=s.contentWindow;else break;s=Pe(t.document)}return s}function st(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function kr(t){var s=ct(),c=t.focusedElem,d=t.selectionRange;if(s!==c&&c&&c.ownerDocument&&ve(c.ownerDocument.documentElement,c)){if(d!==null&&st(c)){if(s=d.start,t=d.end,t===void 0&&(t=s),"selectionStart"in c)c.selectionStart=s,c.selectionEnd=Math.min(t,c.value.length);else if(t=(s=c.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var p=c.textContent.length,y=Math.min(d.start,p);d=d.end===void 0?y:Math.min(d.end,p),!t.extend&&y>d&&(p=d,d=y,y=p),p=Ie(c,y);var A=Ie(c,d);p&&A&&(t.rangeCount!==1||t.anchorNode!==p.node||t.anchorOffset!==p.offset||t.focusNode!==A.node||t.focusOffset!==A.offset)&&(s=s.createRange(),s.setStart(p.node,p.offset),t.removeAllRanges(),y>d?(t.addRange(s),t.extend(A.node,A.offset)):(s.setEnd(A.node,A.offset),t.addRange(s)))}}for(s=[],t=c;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<s.length;c++)t=s[c],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $r=M&&"documentMode"in document&&11>=document.documentMode,tr=null,Nt=null,Wt=null,vr=!1;function Vn(t,s,c){var d=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;vr||tr==null||tr!==Pe(d)||(d=tr,"selectionStart"in d&&st(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Wt&&se(Wt,d)||(Wt=d,d=rl(Nt,"onSelect"),0<d.length&&(s=new ie("onSelect","select",null,s,c),t.push({event:s,listeners:d}),s.target=tr)))}function vn(t,s){var c={};return c[t.toLowerCase()]=s.toLowerCase(),c["Webkit"+t]="webkit"+s,c["Moz"+t]="moz"+s,c}var fs={animationend:vn("Animation","AnimationEnd"),animationiteration:vn("Animation","AnimationIteration"),animationstart:vn("Animation","AnimationStart"),transitionend:vn("Transition","TransitionEnd")},ca={},Vc={};M&&(Vc=document.createElement("div").style,"AnimationEvent"in window||(delete fs.animationend.animation,delete fs.animationiteration.animation,delete fs.animationstart.animation),"TransitionEvent"in window||delete fs.transitionend.transition);function el(t){if(ca[t])return ca[t];if(!fs[t])return t;var s=fs[t],c;for(c in s)if(s.hasOwnProperty(c)&&c in Vc)return ca[t]=s[c];return t}var Xc=el("animationend"),Yc=el("animationiteration"),Zc=el("animationstart"),Kc=el("transitionend"),qc=new Map,Qc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xs(t,s){qc.set(t,s),w(s,[t])}for(var co=0;co<Qc.length;co++){var uo=Qc[co],H0=uo.toLowerCase(),G0=uo[0].toUpperCase()+uo.slice(1);xs(H0,"on"+G0)}xs(Xc,"onAnimationEnd"),xs(Yc,"onAnimationIteration"),xs(Zc,"onAnimationStart"),xs("dblclick","onDoubleClick"),xs("focusin","onFocus"),xs("focusout","onBlur"),xs(Kc,"onTransitionEnd"),k("onMouseEnter",["mouseout","mouseover"]),k("onMouseLeave",["mouseout","mouseover"]),k("onPointerEnter",["pointerout","pointerover"]),k("onPointerLeave",["pointerout","pointerover"]),w("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),w("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),w("onBeforeInput",["compositionend","keypress","textInput","paste"]),w("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),w("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),w("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),V0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ua));function $c(t,s,c){var d=t.type||"unknown-event";t.currentTarget=c,Sr(d,s,void 0,t),t.currentTarget=null}function Jc(t,s){s=(s&4)!==0;for(var c=0;c<t.length;c++){var d=t[c],p=d.event;d=d.listeners;e:{var y=void 0;if(s)for(var A=d.length-1;0<=A;A--){var D=d[A],F=D.instance,ae=D.currentTarget;if(D=D.listener,F!==y&&p.isPropagationStopped())break e;$c(p,D,ae),y=F}else for(A=0;A<d.length;A++){if(D=d[A],F=D.instance,ae=D.currentTarget,D=D.listener,F!==y&&p.isPropagationStopped())break e;$c(p,D,ae),y=F}}}if(yr)throw t=_e,yr=!1,_e=null,t}function Pt(t,s){var c=s[wo];c===void 0&&(c=s[wo]=new Set);var d=t+"__bubble";c.has(d)||(eu(s,t,2,!1),c.add(d))}function ho(t,s,c){var d=0;s&&(d|=4),eu(c,t,d,s)}var tl="_reactListening"+Math.random().toString(36).slice(2);function da(t){if(!t[tl]){t[tl]=!0,b.forEach(function(c){c!=="selectionchange"&&(V0.has(c)||ho(c,!1,t),ho(c,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[tl]||(s[tl]=!0,ho("selectionchange",!1,s))}}function eu(t,s,c,d){switch(ea(s)){case 1:var p=Xa;break;case 4:p=Bs;break;default:p=zn}c=p.bind(null,s,c,t),p=void 0,!Vi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),d?p!==void 0?t.addEventListener(s,c,{capture:!0,passive:p}):t.addEventListener(s,c,!0):p!==void 0?t.addEventListener(s,c,{passive:p}):t.addEventListener(s,c,!1)}function fo(t,s,c,d,p){var y=d;if((s&1)===0&&(s&2)===0&&d!==null)e:for(;;){if(d===null)return;var A=d.tag;if(A===3||A===4){var D=d.stateNode.containerInfo;if(D===p||D.nodeType===8&&D.parentNode===p)break;if(A===4)for(A=d.return;A!==null;){var F=A.tag;if((F===3||F===4)&&(F=A.stateNode.containerInfo,F===p||F.nodeType===8&&F.parentNode===p))return;A=A.return}for(;D!==null;){if(A=Vs(D),A===null)return;if(F=A.tag,F===5||F===6){d=y=A;continue e}D=D.parentNode}}d=d.return}Ms(function(){var ae=y,Ce=_s(c),Se=[];e:{var be=qc.get(t);if(be!==void 0){var Me=ie,Le=t;switch(t){case"keypress":if(yt(c)===0)break e;case"keydown":case"keyup":Me=sa;break;case"focusin":Le="focus",Me=Ot;break;case"focusout":Le="blur",Me=Ot;break;case"beforeblur":case"afterblur":Me=Ot;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=Za;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=er;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=ds;break;case Xc:case Yc:case Zc:Me=Hn;break;case Kc:Me=ao;break;case"scroll":Me=cr;break;case"wheel":Me=lo;break;case"copy":case"cut":case"paste":Me=Ze;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=ia}var ze=(s&4)!==0,rr=!ze&&t==="scroll",ee=ze?be!==null?be+"Capture":null:be;ze=[];for(var V=ae,re;V!==null;){re=V;var Te=re.stateNode;if(re.tag===5&&Te!==null&&(re=Te,ee!==null&&(Te=Er(V,ee),Te!=null&&ze.push(ha(V,Te,re)))),rr)break;V=V.return}0<ze.length&&(be=new Me(be,Le,null,c,Ce),Se.push({event:be,listeners:ze}))}}if((s&7)===0){e:{if(be=t==="mouseover"||t==="pointerover",Me=t==="mouseout"||t==="pointerout",be&&c!==Un&&(Le=c.relatedTarget||c.fromElement)&&(Vs(Le)||Le[Xn]))break e;if((Me||be)&&(be=Ce.window===Ce?Ce:(be=Ce.ownerDocument)?be.defaultView||be.parentWindow:window,Me?(Le=c.relatedTarget||c.toElement,Me=ae,Le=Le?Vs(Le):null,Le!==null&&(rr=Lr(Le),Le!==rr||Le.tag!==5&&Le.tag!==6)&&(Le=null)):(Me=null,Le=ae),Me!==Le)){if(ze=Za,Te="onMouseLeave",ee="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(ze=ia,Te="onPointerLeave",ee="onPointerEnter",V="pointer"),rr=Me==null?be:bi(Me),re=Le==null?be:bi(Le),be=new ze(Te,V+"leave",Me,c,Ce),be.target=rr,be.relatedTarget=re,Te=null,Vs(Ce)===ae&&(ze=new ze(ee,V+"enter",Le,c,Ce),ze.target=re,ze.relatedTarget=rr,Te=ze),rr=Te,Me&&Le)t:{for(ze=Me,ee=Le,V=0,re=ze;re;re=yi(re))V++;for(re=0,Te=ee;Te;Te=yi(Te))re++;for(;0<V-re;)ze=yi(ze),V--;for(;0<re-V;)ee=yi(ee),re--;for(;V--;){if(ze===ee||ee!==null&&ze===ee.alternate)break t;ze=yi(ze),ee=yi(ee)}ze=null}else ze=null;Me!==null&&tu(Se,be,Me,ze,!1),Le!==null&&rr!==null&&tu(Se,rr,Le,ze,!0)}}e:{if(be=ae?bi(ae):window,Me=be.nodeName&&be.nodeName.toLowerCase(),Me==="select"||Me==="input"&&be.type==="file")var Ve=a;else if(xt(be))if(l)Ve=L;else{Ve=I;var Ke=S}else(Me=be.nodeName)&&Me.toLowerCase()==="input"&&(be.type==="checkbox"||be.type==="radio")&&(Ve=j);if(Ve&&(Ve=Ve(t,ae))){Gs(Se,Ve,c,Ce);break e}Ke&&Ke(t,be,ae),t==="focusout"&&(Ke=be._wrapperState)&&Ke.controlled&&be.type==="number"&&ht(be,"number",be.value)}switch(Ke=ae?bi(ae):window,t){case"focusin":(xt(Ke)||Ke.contentEditable==="true")&&(tr=Ke,Nt=ae,Wt=null);break;case"focusout":Wt=Nt=tr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,Vn(Se,c,Ce);break;case"selectionchange":if($r)break;case"keydown":case"keyup":Vn(Se,c,Ce)}var qe;if(hs)e:{switch(t){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else br?Ja(t,c)&&(rt="onCompositionEnd"):t==="keydown"&&c.keyCode===229&&(rt="onCompositionStart");rt&&(Qr&&c.locale!=="ko"&&(br||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&br&&(qe=Ya()):(bn=Ce,ta="value"in bn?bn.value:bn.textContent,br=!0)),Ke=rl(ae,rt),0<Ke.length&&(rt=new kt(rt,t,null,c,Ce),Se.push({event:rt,listeners:Ke}),qe?rt.data=qe:(qe=la(c),qe!==null&&(rt.data=qe)))),(qe=Qa?oo(t,c):oa(t,c))&&(ae=rl(ae,"onBeforeInput"),0<ae.length&&(Ce=new kt("onBeforeInput","beforeinput",null,c,Ce),Se.push({event:Ce,listeners:ae}),Ce.data=qe))}Jc(Se,s)})}function ha(t,s,c){return{instance:t,listener:s,currentTarget:c}}function rl(t,s){for(var c=s+"Capture",d=[];t!==null;){var p=t,y=p.stateNode;p.tag===5&&y!==null&&(p=y,y=Er(t,c),y!=null&&d.unshift(ha(t,y,p)),y=Er(t,s),y!=null&&d.push(ha(t,y,p))),t=t.return}return d}function yi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function tu(t,s,c,d,p){for(var y=s._reactName,A=[];c!==null&&c!==d;){var D=c,F=D.alternate,ae=D.stateNode;if(F!==null&&F===d)break;D.tag===5&&ae!==null&&(D=ae,p?(F=Er(c,y),F!=null&&A.unshift(ha(c,F,D))):p||(F=Er(c,y),F!=null&&A.push(ha(c,F,D)))),c=c.return}A.length!==0&&t.push({event:s,listeners:A})}var X0=/\r\n?/g,Y0=/\u0000|\uFFFD/g;function ru(t){return(typeof t=="string"?t:""+t).replace(X0,`
`).replace(Y0,"")}function nl(t,s,c){if(s=ru(s),ru(t)!==s&&c)throw Error(x(425))}function sl(){}var xo=null,mo=null;function go(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var po=typeof setTimeout=="function"?setTimeout:void 0,Z0=typeof clearTimeout=="function"?clearTimeout:void 0,nu=typeof Promise=="function"?Promise:void 0,K0=typeof queueMicrotask=="function"?queueMicrotask:typeof nu<"u"?function(t){return nu.resolve(null).then(t).catch(q0)}:po;function q0(t){setTimeout(function(){throw t})}function yo(t,s){var c=s,d=0;do{var p=c.nextSibling;if(t.removeChild(c),p&&p.nodeType===8)if(c=p.data,c==="/$"){if(d===0){t.removeChild(p),wn(s);return}d--}else c!=="$"&&c!=="$?"&&c!=="$!"||d++;c=p}while(c);wn(s)}function ms(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function su(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="$"||c==="$!"||c==="$?"){if(s===0)return t;s--}else c==="/$"&&s++}t=t.previousSibling}return null}var wi=Math.random().toString(36).slice(2),Dn="__reactFiber$"+wi,fa="__reactProps$"+wi,Xn="__reactContainer$"+wi,wo="__reactEvents$"+wi,Q0="__reactListeners$"+wi,$0="__reactHandles$"+wi;function Vs(t){var s=t[Dn];if(s)return s;for(var c=t.parentNode;c;){if(s=c[Xn]||c[Dn]){if(c=s.alternate,s.child!==null||c!==null&&c.child!==null)for(t=su(t);t!==null;){if(c=t[Dn])return c;t=su(t)}return s}t=c,c=t.parentNode}return null}function xa(t){return t=t[Dn]||t[Xn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function bi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(x(33))}function il(t){return t[fa]||null}var bo=[],vi=-1;function gs(t){return{current:t}}function Bt(t){0>vi||(t.current=bo[vi],bo[vi]=null,vi--)}function Dt(t,s){vi++,bo[vi]=t.current,t.current=s}var ps={},Ir=gs(ps),Fr=gs(!1),Xs=ps;function Ni(t,s){var c=t.type.contextTypes;if(!c)return ps;var d=t.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===s)return d.__reactInternalMemoizedMaskedChildContext;var p={},y;for(y in c)p[y]=s[y];return d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=p),p}function Ur(t){return t=t.childContextTypes,t!=null}function al(){Bt(Fr),Bt(Ir)}function iu(t,s,c){if(Ir.current!==ps)throw Error(x(168));Dt(Ir,s),Dt(Fr,c)}function au(t,s,c){var d=t.stateNode;if(s=s.childContextTypes,typeof d.getChildContext!="function")return c;d=d.getChildContext();for(var p in d)if(!(p in s))throw Error(x(108,Qe(t)||"Unknown",p));return U({},c,d)}function ll(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ps,Xs=Ir.current,Dt(Ir,t),Dt(Fr,Fr.current),!0}function lu(t,s,c){var d=t.stateNode;if(!d)throw Error(x(169));c?(t=au(t,s,Xs),d.__reactInternalMemoizedMergedChildContext=t,Bt(Fr),Bt(Ir),Dt(Ir,t)):Bt(Fr),Dt(Fr,c)}var Yn=null,ol=!1,vo=!1;function ou(t){Yn===null?Yn=[t]:Yn.push(t)}function J0(t){ol=!0,ou(t)}function ys(){if(!vo&&Yn!==null){vo=!0;var t=0,s=ot;try{var c=Yn;for(ot=1;t<c.length;t++){var d=c[t];do d=d(!0);while(d!==null)}Yn=null,ol=!1}catch(p){throw Yn!==null&&(Yn=Yn.slice(t+1)),Yr(pe,ys),p}finally{ot=s,vo=!1}}return null}var Ci=[],Ei=0,cl=null,ul=0,dn=[],hn=0,Ys=null,Zn=1,Kn="";function Zs(t,s){Ci[Ei++]=ul,Ci[Ei++]=cl,cl=t,ul=s}function cu(t,s,c){dn[hn++]=Zn,dn[hn++]=Kn,dn[hn++]=Ys,Ys=t;var d=Zn;t=Kn;var p=32-_r(d)-1;d&=~(1<<p),c+=1;var y=32-_r(s)+p;if(30<y){var A=p-p%5;y=(d&(1<<A)-1).toString(32),d>>=A,p-=A,Zn=1<<32-_r(s)+p|c<<p|d,Kn=y+t}else Zn=1<<y|c<<p|d,Kn=t}function No(t){t.return!==null&&(Zs(t,1),cu(t,1,0))}function Co(t){for(;t===cl;)cl=Ci[--Ei],Ci[Ei]=null,ul=Ci[--Ei],Ci[Ei]=null;for(;t===Ys;)Ys=dn[--hn],dn[hn]=null,Kn=dn[--hn],dn[hn]=null,Zn=dn[--hn],dn[hn]=null}var Jr=null,en=null,Ft=!1,Nn=null;function uu(t,s){var c=gn(5,null,null,0);c.elementType="DELETED",c.stateNode=s,c.return=t,s=t.deletions,s===null?(t.deletions=[c],t.flags|=16):s.push(c)}function du(t,s){switch(t.tag){case 5:var c=t.type;return s=s.nodeType!==1||c.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Jr=t,en=ms(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Jr=t,en=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(c=Ys!==null?{id:Zn,overflow:Kn}:null,t.memoizedState={dehydrated:s,treeContext:c,retryLane:1073741824},c=gn(18,null,null,0),c.stateNode=s,c.return=t,t.child=c,Jr=t,en=null,!0):!1;default:return!1}}function Eo(t){return(t.mode&1)!==0&&(t.flags&128)===0}function So(t){if(Ft){var s=en;if(s){var c=s;if(!du(t,s)){if(Eo(t))throw Error(x(418));s=ms(c.nextSibling);var d=Jr;s&&du(t,s)?uu(d,c):(t.flags=t.flags&-4097|2,Ft=!1,Jr=t)}}else{if(Eo(t))throw Error(x(418));t.flags=t.flags&-4097|2,Ft=!1,Jr=t}}}function hu(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jr=t}function dl(t){if(t!==Jr)return!1;if(!Ft)return hu(t),Ft=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!go(t.type,t.memoizedProps)),s&&(s=en)){if(Eo(t))throw fu(),Error(x(418));for(;s;)uu(t,s),s=ms(s.nextSibling)}if(hu(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(x(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var c=t.data;if(c==="/$"){if(s===0){en=ms(t.nextSibling);break e}s--}else c!=="$"&&c!=="$!"&&c!=="$?"||s++}t=t.nextSibling}en=null}}else en=Jr?ms(t.stateNode.nextSibling):null;return!0}function fu(){for(var t=en;t;)t=ms(t.nextSibling)}function Si(){en=Jr=null,Ft=!1}function Ao(t){Nn===null?Nn=[t]:Nn.push(t)}var e1=Q.ReactCurrentBatchConfig;function ma(t,s,c){if(t=c.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(x(309));var d=c.stateNode}if(!d)throw Error(x(147,t));var p=d,y=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===y?s.ref:(s=function(A){var D=p.refs;A===null?delete D[y]:D[y]=A},s._stringRef=y,s)}if(typeof t!="string")throw Error(x(284));if(!c._owner)throw Error(x(290,t))}return t}function hl(t,s){throw t=Object.prototype.toString.call(s),Error(x(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function xu(t){var s=t._init;return s(t._payload)}function mu(t){function s(ee,V){if(t){var re=ee.deletions;re===null?(ee.deletions=[V],ee.flags|=16):re.push(V)}}function c(ee,V){if(!t)return null;for(;V!==null;)s(ee,V),V=V.sibling;return null}function d(ee,V){for(ee=new Map;V!==null;)V.key!==null?ee.set(V.key,V):ee.set(V.index,V),V=V.sibling;return ee}function p(ee,V){return ee=As(ee,V),ee.index=0,ee.sibling=null,ee}function y(ee,V,re){return ee.index=re,t?(re=ee.alternate,re!==null?(re=re.index,re<V?(ee.flags|=2,V):re):(ee.flags|=2,V)):(ee.flags|=1048576,V)}function A(ee){return t&&ee.alternate===null&&(ee.flags|=2),ee}function D(ee,V,re,Te){return V===null||V.tag!==6?(V=pc(re,ee.mode,Te),V.return=ee,V):(V=p(V,re),V.return=ee,V)}function F(ee,V,re,Te){var Ve=re.type;return Ve===Y?Ce(ee,V,re.props.children,Te,re.key):V!==null&&(V.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===ye&&xu(Ve)===V.type)?(Te=p(V,re.props),Te.ref=ma(ee,V,re),Te.return=ee,Te):(Te=Pl(re.type,re.key,re.props,null,ee.mode,Te),Te.ref=ma(ee,V,re),Te.return=ee,Te)}function ae(ee,V,re,Te){return V===null||V.tag!==4||V.stateNode.containerInfo!==re.containerInfo||V.stateNode.implementation!==re.implementation?(V=yc(re,ee.mode,Te),V.return=ee,V):(V=p(V,re.children||[]),V.return=ee,V)}function Ce(ee,V,re,Te,Ve){return V===null||V.tag!==7?(V=ri(re,ee.mode,Te,Ve),V.return=ee,V):(V=p(V,re),V.return=ee,V)}function Se(ee,V,re){if(typeof V=="string"&&V!==""||typeof V=="number")return V=pc(""+V,ee.mode,re),V.return=ee,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case xe:return re=Pl(V.type,V.key,V.props,null,ee.mode,re),re.ref=ma(ee,null,V),re.return=ee,re;case oe:return V=yc(V,ee.mode,re),V.return=ee,V;case ye:var Te=V._init;return Se(ee,Te(V._payload),re)}if(Tn(V)||H(V))return V=ri(V,ee.mode,re,null),V.return=ee,V;hl(ee,V)}return null}function be(ee,V,re,Te){var Ve=V!==null?V.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Ve!==null?null:D(ee,V,""+re,Te);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case xe:return re.key===Ve?F(ee,V,re,Te):null;case oe:return re.key===Ve?ae(ee,V,re,Te):null;case ye:return Ve=re._init,be(ee,V,Ve(re._payload),Te)}if(Tn(re)||H(re))return Ve!==null?null:Ce(ee,V,re,Te,null);hl(ee,re)}return null}function Me(ee,V,re,Te,Ve){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return ee=ee.get(re)||null,D(V,ee,""+Te,Ve);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case xe:return ee=ee.get(Te.key===null?re:Te.key)||null,F(V,ee,Te,Ve);case oe:return ee=ee.get(Te.key===null?re:Te.key)||null,ae(V,ee,Te,Ve);case ye:var Ke=Te._init;return Me(ee,V,re,Ke(Te._payload),Ve)}if(Tn(Te)||H(Te))return ee=ee.get(re)||null,Ce(V,ee,Te,Ve,null);hl(V,Te)}return null}function Le(ee,V,re,Te){for(var Ve=null,Ke=null,qe=V,rt=V=0,pr=null;qe!==null&&rt<re.length;rt++){qe.index>rt?(pr=qe,qe=null):pr=qe.sibling;var bt=be(ee,qe,re[rt],Te);if(bt===null){qe===null&&(qe=pr);break}t&&qe&&bt.alternate===null&&s(ee,qe),V=y(bt,V,rt),Ke===null?Ve=bt:Ke.sibling=bt,Ke=bt,qe=pr}if(rt===re.length)return c(ee,qe),Ft&&Zs(ee,rt),Ve;if(qe===null){for(;rt<re.length;rt++)qe=Se(ee,re[rt],Te),qe!==null&&(V=y(qe,V,rt),Ke===null?Ve=qe:Ke.sibling=qe,Ke=qe);return Ft&&Zs(ee,rt),Ve}for(qe=d(ee,qe);rt<re.length;rt++)pr=Me(qe,ee,rt,re[rt],Te),pr!==null&&(t&&pr.alternate!==null&&qe.delete(pr.key===null?rt:pr.key),V=y(pr,V,rt),Ke===null?Ve=pr:Ke.sibling=pr,Ke=pr);return t&&qe.forEach(function(ks){return s(ee,ks)}),Ft&&Zs(ee,rt),Ve}function ze(ee,V,re,Te){var Ve=H(re);if(typeof Ve!="function")throw Error(x(150));if(re=Ve.call(re),re==null)throw Error(x(151));for(var Ke=Ve=null,qe=V,rt=V=0,pr=null,bt=re.next();qe!==null&&!bt.done;rt++,bt=re.next()){qe.index>rt?(pr=qe,qe=null):pr=qe.sibling;var ks=be(ee,qe,bt.value,Te);if(ks===null){qe===null&&(qe=pr);break}t&&qe&&ks.alternate===null&&s(ee,qe),V=y(ks,V,rt),Ke===null?Ve=ks:Ke.sibling=ks,Ke=ks,qe=pr}if(bt.done)return c(ee,qe),Ft&&Zs(ee,rt),Ve;if(qe===null){for(;!bt.done;rt++,bt=re.next())bt=Se(ee,bt.value,Te),bt!==null&&(V=y(bt,V,rt),Ke===null?Ve=bt:Ke.sibling=bt,Ke=bt);return Ft&&Zs(ee,rt),Ve}for(qe=d(ee,qe);!bt.done;rt++,bt=re.next())bt=Me(qe,ee,rt,bt.value,Te),bt!==null&&(t&&bt.alternate!==null&&qe.delete(bt.key===null?rt:bt.key),V=y(bt,V,rt),Ke===null?Ve=bt:Ke.sibling=bt,Ke=bt);return t&&qe.forEach(function(M1){return s(ee,M1)}),Ft&&Zs(ee,rt),Ve}function rr(ee,V,re,Te){if(typeof re=="object"&&re!==null&&re.type===Y&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case xe:e:{for(var Ve=re.key,Ke=V;Ke!==null;){if(Ke.key===Ve){if(Ve=re.type,Ve===Y){if(Ke.tag===7){c(ee,Ke.sibling),V=p(Ke,re.props.children),V.return=ee,ee=V;break e}}else if(Ke.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===ye&&xu(Ve)===Ke.type){c(ee,Ke.sibling),V=p(Ke,re.props),V.ref=ma(ee,Ke,re),V.return=ee,ee=V;break e}c(ee,Ke);break}else s(ee,Ke);Ke=Ke.sibling}re.type===Y?(V=ri(re.props.children,ee.mode,Te,re.key),V.return=ee,ee=V):(Te=Pl(re.type,re.key,re.props,null,ee.mode,Te),Te.ref=ma(ee,V,re),Te.return=ee,ee=Te)}return A(ee);case oe:e:{for(Ke=re.key;V!==null;){if(V.key===Ke)if(V.tag===4&&V.stateNode.containerInfo===re.containerInfo&&V.stateNode.implementation===re.implementation){c(ee,V.sibling),V=p(V,re.children||[]),V.return=ee,ee=V;break e}else{c(ee,V);break}else s(ee,V);V=V.sibling}V=yc(re,ee.mode,Te),V.return=ee,ee=V}return A(ee);case ye:return Ke=re._init,rr(ee,V,Ke(re._payload),Te)}if(Tn(re))return Le(ee,V,re,Te);if(H(re))return ze(ee,V,re,Te);hl(ee,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,V!==null&&V.tag===6?(c(ee,V.sibling),V=p(V,re),V.return=ee,ee=V):(c(ee,V),V=pc(re,ee.mode,Te),V.return=ee,ee=V),A(ee)):c(ee,V)}return rr}var Ai=mu(!0),gu=mu(!1),fl=gs(null),xl=null,ki=null,ko=null;function Io(){ko=ki=xl=null}function To(t){var s=fl.current;Bt(fl),t._currentValue=s}function jo(t,s,c){for(;t!==null;){var d=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,d!==null&&(d.childLanes|=s)):d!==null&&(d.childLanes&s)!==s&&(d.childLanes|=s),t===c)break;t=t.return}}function Ii(t,s){xl=t,ko=ki=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(Wr=!0),t.firstContext=null)}function fn(t){var s=t._currentValue;if(ko!==t)if(t={context:t,memoizedValue:s,next:null},ki===null){if(xl===null)throw Error(x(308));ki=t,xl.dependencies={lanes:0,firstContext:t}}else ki=ki.next=t;return s}var Ks=null;function Ro(t){Ks===null?Ks=[t]:Ks.push(t)}function pu(t,s,c,d){var p=s.interleaved;return p===null?(c.next=c,Ro(s)):(c.next=p.next,p.next=c),s.interleaved=c,qn(t,d)}function qn(t,s){t.lanes|=s;var c=t.alternate;for(c!==null&&(c.lanes|=s),c=t,t=t.return;t!==null;)t.childLanes|=s,c=t.alternate,c!==null&&(c.childLanes|=s),c=t,t=t.return;return c.tag===3?c.stateNode:null}var ws=!1;function _o(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yu(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function bs(t,s,c){var d=t.updateQueue;if(d===null)return null;if(d=d.shared,(wt&2)!==0){var p=d.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),d.pending=s,qn(t,c)}return p=d.interleaved,p===null?(s.next=s,Ro(d)):(s.next=p.next,p.next=s),d.interleaved=s,qn(t,c)}function ml(t,s,c){if(s=s.updateQueue,s!==null&&(s=s.shared,(c&4194240)!==0)){var d=s.lanes;d&=t.pendingLanes,c|=d,s.lanes=c,Yt(t,c)}}function wu(t,s){var c=t.updateQueue,d=t.alternate;if(d!==null&&(d=d.updateQueue,c===d)){var p=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var A={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};y===null?p=y=A:y=y.next=A,c=c.next}while(c!==null);y===null?p=y=s:y=y.next=s}else p=y=s;c={baseState:d.baseState,firstBaseUpdate:p,lastBaseUpdate:y,shared:d.shared,effects:d.effects},t.updateQueue=c;return}t=c.lastBaseUpdate,t===null?c.firstBaseUpdate=s:t.next=s,c.lastBaseUpdate=s}function gl(t,s,c,d){var p=t.updateQueue;ws=!1;var y=p.firstBaseUpdate,A=p.lastBaseUpdate,D=p.shared.pending;if(D!==null){p.shared.pending=null;var F=D,ae=F.next;F.next=null,A===null?y=ae:A.next=ae,A=F;var Ce=t.alternate;Ce!==null&&(Ce=Ce.updateQueue,D=Ce.lastBaseUpdate,D!==A&&(D===null?Ce.firstBaseUpdate=ae:D.next=ae,Ce.lastBaseUpdate=F))}if(y!==null){var Se=p.baseState;A=0,Ce=ae=F=null,D=y;do{var be=D.lane,Me=D.eventTime;if((d&be)===be){Ce!==null&&(Ce=Ce.next={eventTime:Me,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var Le=t,ze=D;switch(be=s,Me=c,ze.tag){case 1:if(Le=ze.payload,typeof Le=="function"){Se=Le.call(Me,Se,be);break e}Se=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=ze.payload,be=typeof Le=="function"?Le.call(Me,Se,be):Le,be==null)break e;Se=U({},Se,be);break e;case 2:ws=!0}}D.callback!==null&&D.lane!==0&&(t.flags|=64,be=p.effects,be===null?p.effects=[D]:be.push(D))}else Me={eventTime:Me,lane:be,tag:D.tag,payload:D.payload,callback:D.callback,next:null},Ce===null?(ae=Ce=Me,F=Se):Ce=Ce.next=Me,A|=be;if(D=D.next,D===null){if(D=p.shared.pending,D===null)break;be=D,D=be.next,be.next=null,p.lastBaseUpdate=be,p.shared.pending=null}}while(!0);if(Ce===null&&(F=Se),p.baseState=F,p.firstBaseUpdate=ae,p.lastBaseUpdate=Ce,s=p.shared.interleaved,s!==null){p=s;do A|=p.lane,p=p.next;while(p!==s)}else y===null&&(p.shared.lanes=0);$s|=A,t.lanes=A,t.memoizedState=Se}}function bu(t,s,c){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var d=t[s],p=d.callback;if(p!==null){if(d.callback=null,d=c,typeof p!="function")throw Error(x(191,p));p.call(d)}}}var ga={},Pn=gs(ga),pa=gs(ga),ya=gs(ga);function qs(t){if(t===ga)throw Error(x(174));return t}function Mo(t,s){switch(Dt(ya,s),Dt(pa,t),Dt(Pn,ga),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:li(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=li(s,t)}Bt(Pn),Dt(Pn,s)}function Ti(){Bt(Pn),Bt(pa),Bt(ya)}function vu(t){qs(ya.current);var s=qs(Pn.current),c=li(s,t.type);s!==c&&(Dt(pa,t),Dt(Pn,c))}function Oo(t){pa.current===t&&(Bt(Pn),Bt(pa))}var zt=gs(0);function pl(t){for(var s=t;s!==null;){if(s.tag===13){var c=s.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Do=[];function Po(){for(var t=0;t<Do.length;t++)Do[t]._workInProgressVersionPrimary=null;Do.length=0}var yl=Q.ReactCurrentDispatcher,Bo=Q.ReactCurrentBatchConfig,Qs=0,Ht=null,ur=null,mr=null,wl=!1,wa=!1,ba=0,t1=0;function Tr(){throw Error(x(321))}function Lo(t,s){if(s===null)return!1;for(var c=0;c<s.length&&c<t.length;c++)if(!q(t[c],s[c]))return!1;return!0}function Fo(t,s,c,d,p,y){if(Qs=y,Ht=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,yl.current=t===null||t.memoizedState===null?i1:a1,t=c(d,p),wa){y=0;do{if(wa=!1,ba=0,25<=y)throw Error(x(301));y+=1,mr=ur=null,s.updateQueue=null,yl.current=l1,t=c(d,p)}while(wa)}if(yl.current=Nl,s=ur!==null&&ur.next!==null,Qs=0,mr=ur=Ht=null,wl=!1,s)throw Error(x(300));return t}function Uo(){var t=ba!==0;return ba=0,t}function Bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mr===null?Ht.memoizedState=mr=t:mr=mr.next=t,mr}function xn(){if(ur===null){var t=Ht.alternate;t=t!==null?t.memoizedState:null}else t=ur.next;var s=mr===null?Ht.memoizedState:mr.next;if(s!==null)mr=s,ur=t;else{if(t===null)throw Error(x(310));ur=t,t={memoizedState:ur.memoizedState,baseState:ur.baseState,baseQueue:ur.baseQueue,queue:ur.queue,next:null},mr===null?Ht.memoizedState=mr=t:mr=mr.next=t}return mr}function va(t,s){return typeof s=="function"?s(t):s}function Wo(t){var s=xn(),c=s.queue;if(c===null)throw Error(x(311));c.lastRenderedReducer=t;var d=ur,p=d.baseQueue,y=c.pending;if(y!==null){if(p!==null){var A=p.next;p.next=y.next,y.next=A}d.baseQueue=p=y,c.pending=null}if(p!==null){y=p.next,d=d.baseState;var D=A=null,F=null,ae=y;do{var Ce=ae.lane;if((Qs&Ce)===Ce)F!==null&&(F=F.next={lane:0,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null}),d=ae.hasEagerState?ae.eagerState:t(d,ae.action);else{var Se={lane:Ce,action:ae.action,hasEagerState:ae.hasEagerState,eagerState:ae.eagerState,next:null};F===null?(D=F=Se,A=d):F=F.next=Se,Ht.lanes|=Ce,$s|=Ce}ae=ae.next}while(ae!==null&&ae!==y);F===null?A=d:F.next=D,q(d,s.memoizedState)||(Wr=!0),s.memoizedState=d,s.baseState=A,s.baseQueue=F,c.lastRenderedState=d}if(t=c.interleaved,t!==null){p=t;do y=p.lane,Ht.lanes|=y,$s|=y,p=p.next;while(p!==t)}else p===null&&(c.lanes=0);return[s.memoizedState,c.dispatch]}function zo(t){var s=xn(),c=s.queue;if(c===null)throw Error(x(311));c.lastRenderedReducer=t;var d=c.dispatch,p=c.pending,y=s.memoizedState;if(p!==null){c.pending=null;var A=p=p.next;do y=t(y,A.action),A=A.next;while(A!==p);q(y,s.memoizedState)||(Wr=!0),s.memoizedState=y,s.baseQueue===null&&(s.baseState=y),c.lastRenderedState=y}return[y,d]}function Nu(){}function Cu(t,s){var c=Ht,d=xn(),p=s(),y=!q(d.memoizedState,p);if(y&&(d.memoizedState=p,Wr=!0),d=d.queue,Ho(Au.bind(null,c,d,t),[t]),d.getSnapshot!==s||y||mr!==null&&mr.memoizedState.tag&1){if(c.flags|=2048,Na(9,Su.bind(null,c,d,p,s),void 0,null),gr===null)throw Error(x(349));(Qs&30)!==0||Eu(c,s,p)}return p}function Eu(t,s,c){t.flags|=16384,t={getSnapshot:s,value:c},s=Ht.updateQueue,s===null?(s={lastEffect:null,stores:null},Ht.updateQueue=s,s.stores=[t]):(c=s.stores,c===null?s.stores=[t]:c.push(t))}function Su(t,s,c,d){s.value=c,s.getSnapshot=d,ku(s)&&Iu(t)}function Au(t,s,c){return c(function(){ku(s)&&Iu(t)})}function ku(t){var s=t.getSnapshot;t=t.value;try{var c=s();return!q(t,c)}catch{return!0}}function Iu(t){var s=qn(t,1);s!==null&&An(s,t,1,-1)}function Tu(t){var s=Bn();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:t},s.queue=t,t=t.dispatch=s1.bind(null,Ht,t),[s.memoizedState,t]}function Na(t,s,c,d){return t={tag:t,create:s,destroy:c,deps:d,next:null},s=Ht.updateQueue,s===null?(s={lastEffect:null,stores:null},Ht.updateQueue=s,s.lastEffect=t.next=t):(c=s.lastEffect,c===null?s.lastEffect=t.next=t:(d=c.next,c.next=t,t.next=d,s.lastEffect=t)),t}function ju(){return xn().memoizedState}function bl(t,s,c,d){var p=Bn();Ht.flags|=t,p.memoizedState=Na(1|s,c,void 0,d===void 0?null:d)}function vl(t,s,c,d){var p=xn();d=d===void 0?null:d;var y=void 0;if(ur!==null){var A=ur.memoizedState;if(y=A.destroy,d!==null&&Lo(d,A.deps)){p.memoizedState=Na(s,c,y,d);return}}Ht.flags|=t,p.memoizedState=Na(1|s,c,y,d)}function Ru(t,s){return bl(8390656,8,t,s)}function Ho(t,s){return vl(2048,8,t,s)}function _u(t,s){return vl(4,2,t,s)}function Mu(t,s){return vl(4,4,t,s)}function Ou(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Du(t,s,c){return c=c!=null?c.concat([t]):null,vl(4,4,Ou.bind(null,s,t),c)}function Go(){}function Pu(t,s){var c=xn();s=s===void 0?null:s;var d=c.memoizedState;return d!==null&&s!==null&&Lo(s,d[1])?d[0]:(c.memoizedState=[t,s],t)}function Bu(t,s){var c=xn();s=s===void 0?null:s;var d=c.memoizedState;return d!==null&&s!==null&&Lo(s,d[1])?d[0]:(t=t(),c.memoizedState=[t,s],t)}function Lu(t,s,c){return(Qs&21)===0?(t.baseState&&(t.baseState=!1,Wr=!0),t.memoizedState=c):(q(c,s)||(c=ar(),Ht.lanes|=c,$s|=c,t.baseState=!0),s)}function r1(t,s){var c=ot;ot=c!==0&&4>c?c:4,t(!0);var d=Bo.transition;Bo.transition={};try{t(!1),s()}finally{ot=c,Bo.transition=d}}function Fu(){return xn().memoizedState}function n1(t,s,c){var d=Es(t);if(c={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null},Uu(t))Wu(s,c);else if(c=pu(t,s,c,d),c!==null){var p=Or();An(c,t,d,p),zu(c,s,d)}}function s1(t,s,c){var d=Es(t),p={lane:d,action:c,hasEagerState:!1,eagerState:null,next:null};if(Uu(t))Wu(s,p);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=s.lastRenderedReducer,y!==null))try{var A=s.lastRenderedState,D=y(A,c);if(p.hasEagerState=!0,p.eagerState=D,q(D,A)){var F=s.interleaved;F===null?(p.next=p,Ro(s)):(p.next=F.next,F.next=p),s.interleaved=p;return}}catch{}c=pu(t,s,p,d),c!==null&&(p=Or(),An(c,t,d,p),zu(c,s,d))}}function Uu(t){var s=t.alternate;return t===Ht||s!==null&&s===Ht}function Wu(t,s){wa=wl=!0;var c=t.pending;c===null?s.next=s:(s.next=c.next,c.next=s),t.pending=s}function zu(t,s,c){if((c&4194240)!==0){var d=s.lanes;d&=t.pendingLanes,c|=d,s.lanes=c,Yt(t,c)}}var Nl={readContext:fn,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useInsertionEffect:Tr,useLayoutEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useMutableSource:Tr,useSyncExternalStore:Tr,useId:Tr,unstable_isNewReconciler:!1},i1={readContext:fn,useCallback:function(t,s){return Bn().memoizedState=[t,s===void 0?null:s],t},useContext:fn,useEffect:Ru,useImperativeHandle:function(t,s,c){return c=c!=null?c.concat([t]):null,bl(4194308,4,Ou.bind(null,s,t),c)},useLayoutEffect:function(t,s){return bl(4194308,4,t,s)},useInsertionEffect:function(t,s){return bl(4,2,t,s)},useMemo:function(t,s){var c=Bn();return s=s===void 0?null:s,t=t(),c.memoizedState=[t,s],t},useReducer:function(t,s,c){var d=Bn();return s=c!==void 0?c(s):s,d.memoizedState=d.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},d.queue=t,t=t.dispatch=n1.bind(null,Ht,t),[d.memoizedState,t]},useRef:function(t){var s=Bn();return t={current:t},s.memoizedState=t},useState:Tu,useDebugValue:Go,useDeferredValue:function(t){return Bn().memoizedState=t},useTransition:function(){var t=Tu(!1),s=t[0];return t=r1.bind(null,t[1]),Bn().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,c){var d=Ht,p=Bn();if(Ft){if(c===void 0)throw Error(x(407));c=c()}else{if(c=s(),gr===null)throw Error(x(349));(Qs&30)!==0||Eu(d,s,c)}p.memoizedState=c;var y={value:c,getSnapshot:s};return p.queue=y,Ru(Au.bind(null,d,y,t),[t]),d.flags|=2048,Na(9,Su.bind(null,d,y,c,s),void 0,null),c},useId:function(){var t=Bn(),s=gr.identifierPrefix;if(Ft){var c=Kn,d=Zn;c=(d&~(1<<32-_r(d)-1)).toString(32)+c,s=":"+s+"R"+c,c=ba++,0<c&&(s+="H"+c.toString(32)),s+=":"}else c=t1++,s=":"+s+"r"+c.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},a1={readContext:fn,useCallback:Pu,useContext:fn,useEffect:Ho,useImperativeHandle:Du,useInsertionEffect:_u,useLayoutEffect:Mu,useMemo:Bu,useReducer:Wo,useRef:ju,useState:function(){return Wo(va)},useDebugValue:Go,useDeferredValue:function(t){var s=xn();return Lu(s,ur.memoizedState,t)},useTransition:function(){var t=Wo(va)[0],s=xn().memoizedState;return[t,s]},useMutableSource:Nu,useSyncExternalStore:Cu,useId:Fu,unstable_isNewReconciler:!1},l1={readContext:fn,useCallback:Pu,useContext:fn,useEffect:Ho,useImperativeHandle:Du,useInsertionEffect:_u,useLayoutEffect:Mu,useMemo:Bu,useReducer:zo,useRef:ju,useState:function(){return zo(va)},useDebugValue:Go,useDeferredValue:function(t){var s=xn();return ur===null?s.memoizedState=t:Lu(s,ur.memoizedState,t)},useTransition:function(){var t=zo(va)[0],s=xn().memoizedState;return[t,s]},useMutableSource:Nu,useSyncExternalStore:Cu,useId:Fu,unstable_isNewReconciler:!1};function Cn(t,s){if(t&&t.defaultProps){s=U({},s),t=t.defaultProps;for(var c in t)s[c]===void 0&&(s[c]=t[c]);return s}return s}function Vo(t,s,c,d){s=t.memoizedState,c=c(d,s),c=c==null?s:U({},s,c),t.memoizedState=c,t.lanes===0&&(t.updateQueue.baseState=c)}var Cl={isMounted:function(t){return(t=t._reactInternals)?Lr(t)===t:!1},enqueueSetState:function(t,s,c){t=t._reactInternals;var d=Or(),p=Es(t),y=Qn(d,p);y.payload=s,c!=null&&(y.callback=c),s=bs(t,y,p),s!==null&&(An(s,t,p,d),ml(s,t,p))},enqueueReplaceState:function(t,s,c){t=t._reactInternals;var d=Or(),p=Es(t),y=Qn(d,p);y.tag=1,y.payload=s,c!=null&&(y.callback=c),s=bs(t,y,p),s!==null&&(An(s,t,p,d),ml(s,t,p))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var c=Or(),d=Es(t),p=Qn(c,d);p.tag=2,s!=null&&(p.callback=s),s=bs(t,p,d),s!==null&&(An(s,t,d,c),ml(s,t,d))}};function Hu(t,s,c,d,p,y,A){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(d,y,A):s.prototype&&s.prototype.isPureReactComponent?!se(c,d)||!se(p,y):!0}function Gu(t,s,c){var d=!1,p=ps,y=s.contextType;return typeof y=="object"&&y!==null?y=fn(y):(p=Ur(s)?Xs:Ir.current,d=s.contextTypes,y=(d=d!=null)?Ni(t,p):ps),s=new s(c,y),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=Cl,t.stateNode=s,s._reactInternals=t,d&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=p,t.__reactInternalMemoizedMaskedChildContext=y),s}function Vu(t,s,c,d){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(c,d),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(c,d),s.state!==t&&Cl.enqueueReplaceState(s,s.state,null)}function Xo(t,s,c,d){var p=t.stateNode;p.props=c,p.state=t.memoizedState,p.refs={},_o(t);var y=s.contextType;typeof y=="object"&&y!==null?p.context=fn(y):(y=Ur(s)?Xs:Ir.current,p.context=Ni(t,y)),p.state=t.memoizedState,y=s.getDerivedStateFromProps,typeof y=="function"&&(Vo(t,s,y,c),p.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(s=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),s!==p.state&&Cl.enqueueReplaceState(p,p.state,null),gl(t,c,p,d),p.state=t.memoizedState),typeof p.componentDidMount=="function"&&(t.flags|=4194308)}function ji(t,s){try{var c="",d=s;do c+=Fe(d),d=d.return;while(d);var p=c}catch(y){p=`
Error generating stack: `+y.message+`
`+y.stack}return{value:t,source:s,stack:p,digest:null}}function Yo(t,s,c){return{value:t,source:null,stack:c??null,digest:s??null}}function Zo(t,s){try{console.error(s.value)}catch(c){setTimeout(function(){throw c})}}var o1=typeof WeakMap=="function"?WeakMap:Map;function Xu(t,s,c){c=Qn(-1,c),c.tag=3,c.payload={element:null};var d=s.value;return c.callback=function(){jl||(jl=!0,cc=d),Zo(t,s)},c}function Yu(t,s,c){c=Qn(-1,c),c.tag=3;var d=t.type.getDerivedStateFromError;if(typeof d=="function"){var p=s.value;c.payload=function(){return d(p)},c.callback=function(){Zo(t,s)}}var y=t.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(c.callback=function(){Zo(t,s),typeof d!="function"&&(Ns===null?Ns=new Set([this]):Ns.add(this));var A=s.stack;this.componentDidCatch(s.value,{componentStack:A!==null?A:""})}),c}function Zu(t,s,c){var d=t.pingCache;if(d===null){d=t.pingCache=new o1;var p=new Set;d.set(s,p)}else p=d.get(s),p===void 0&&(p=new Set,d.set(s,p));p.has(c)||(p.add(c),t=N1.bind(null,t,s,c),s.then(t,t))}function Ku(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function qu(t,s,c,d,p){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(s=Qn(-1,1),s.tag=2,bs(c,s,1))),c.lanes|=1),t):(t.flags|=65536,t.lanes=p,t)}var c1=Q.ReactCurrentOwner,Wr=!1;function Mr(t,s,c,d){s.child=t===null?gu(s,null,c,d):Ai(s,t.child,c,d)}function Qu(t,s,c,d,p){c=c.render;var y=s.ref;return Ii(s,p),d=Fo(t,s,c,d,y,p),c=Uo(),t!==null&&!Wr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~p,$n(t,s,p)):(Ft&&c&&No(s),s.flags|=1,Mr(t,s,d,p),s.child)}function $u(t,s,c,d,p){if(t===null){var y=c.type;return typeof y=="function"&&!gc(y)&&y.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(s.tag=15,s.type=y,Ju(t,s,y,d,p)):(t=Pl(c.type,null,d,s,s.mode,p),t.ref=s.ref,t.return=s,s.child=t)}if(y=t.child,(t.lanes&p)===0){var A=y.memoizedProps;if(c=c.compare,c=c!==null?c:se,c(A,d)&&t.ref===s.ref)return $n(t,s,p)}return s.flags|=1,t=As(y,d),t.ref=s.ref,t.return=s,s.child=t}function Ju(t,s,c,d,p){if(t!==null){var y=t.memoizedProps;if(se(y,d)&&t.ref===s.ref)if(Wr=!1,s.pendingProps=d=y,(t.lanes&p)!==0)(t.flags&131072)!==0&&(Wr=!0);else return s.lanes=t.lanes,$n(t,s,p)}return Ko(t,s,c,d,p)}function ed(t,s,c){var d=s.pendingProps,p=d.children,y=t!==null?t.memoizedState:null;if(d.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(_i,tn),tn|=c;else{if((c&1073741824)===0)return t=y!==null?y.baseLanes|c:c,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Dt(_i,tn),tn|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=y!==null?y.baseLanes:c,Dt(_i,tn),tn|=d}else y!==null?(d=y.baseLanes|c,s.memoizedState=null):d=c,Dt(_i,tn),tn|=d;return Mr(t,s,p,c),s.child}function td(t,s){var c=s.ref;(t===null&&c!==null||t!==null&&t.ref!==c)&&(s.flags|=512,s.flags|=2097152)}function Ko(t,s,c,d,p){var y=Ur(c)?Xs:Ir.current;return y=Ni(s,y),Ii(s,p),c=Fo(t,s,c,d,y,p),d=Uo(),t!==null&&!Wr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~p,$n(t,s,p)):(Ft&&d&&No(s),s.flags|=1,Mr(t,s,c,p),s.child)}function rd(t,s,c,d,p){if(Ur(c)){var y=!0;ll(s)}else y=!1;if(Ii(s,p),s.stateNode===null)Sl(t,s),Gu(s,c,d),Xo(s,c,d,p),d=!0;else if(t===null){var A=s.stateNode,D=s.memoizedProps;A.props=D;var F=A.context,ae=c.contextType;typeof ae=="object"&&ae!==null?ae=fn(ae):(ae=Ur(c)?Xs:Ir.current,ae=Ni(s,ae));var Ce=c.getDerivedStateFromProps,Se=typeof Ce=="function"||typeof A.getSnapshotBeforeUpdate=="function";Se||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(D!==d||F!==ae)&&Vu(s,A,d,ae),ws=!1;var be=s.memoizedState;A.state=be,gl(s,d,A,p),F=s.memoizedState,D!==d||be!==F||Fr.current||ws?(typeof Ce=="function"&&(Vo(s,c,Ce,d),F=s.memoizedState),(D=ws||Hu(s,c,D,d,be,F,ae))?(Se||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(s.flags|=4194308)):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=d,s.memoizedState=F),A.props=d,A.state=F,A.context=ae,d=D):(typeof A.componentDidMount=="function"&&(s.flags|=4194308),d=!1)}else{A=s.stateNode,yu(t,s),D=s.memoizedProps,ae=s.type===s.elementType?D:Cn(s.type,D),A.props=ae,Se=s.pendingProps,be=A.context,F=c.contextType,typeof F=="object"&&F!==null?F=fn(F):(F=Ur(c)?Xs:Ir.current,F=Ni(s,F));var Me=c.getDerivedStateFromProps;(Ce=typeof Me=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(D!==Se||be!==F)&&Vu(s,A,d,F),ws=!1,be=s.memoizedState,A.state=be,gl(s,d,A,p);var Le=s.memoizedState;D!==Se||be!==Le||Fr.current||ws?(typeof Me=="function"&&(Vo(s,c,Me,d),Le=s.memoizedState),(ae=ws||Hu(s,c,ae,d,be,Le,F)||!1)?(Ce||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(d,Le,F),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(d,Le,F)),typeof A.componentDidUpdate=="function"&&(s.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof A.componentDidUpdate!="function"||D===t.memoizedProps&&be===t.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||D===t.memoizedProps&&be===t.memoizedState||(s.flags|=1024),s.memoizedProps=d,s.memoizedState=Le),A.props=d,A.state=Le,A.context=F,d=ae):(typeof A.componentDidUpdate!="function"||D===t.memoizedProps&&be===t.memoizedState||(s.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||D===t.memoizedProps&&be===t.memoizedState||(s.flags|=1024),d=!1)}return qo(t,s,c,d,y,p)}function qo(t,s,c,d,p,y){td(t,s);var A=(s.flags&128)!==0;if(!d&&!A)return p&&lu(s,c,!1),$n(t,s,y);d=s.stateNode,c1.current=s;var D=A&&typeof c.getDerivedStateFromError!="function"?null:d.render();return s.flags|=1,t!==null&&A?(s.child=Ai(s,t.child,null,y),s.child=Ai(s,null,D,y)):Mr(t,s,D,y),s.memoizedState=d.state,p&&lu(s,c,!0),s.child}function nd(t){var s=t.stateNode;s.pendingContext?iu(t,s.pendingContext,s.pendingContext!==s.context):s.context&&iu(t,s.context,!1),Mo(t,s.containerInfo)}function sd(t,s,c,d,p){return Si(),Ao(p),s.flags|=256,Mr(t,s,c,d),s.child}var Qo={dehydrated:null,treeContext:null,retryLane:0};function $o(t){return{baseLanes:t,cachePool:null,transitions:null}}function id(t,s,c){var d=s.pendingProps,p=zt.current,y=!1,A=(s.flags&128)!==0,D;if((D=A)||(D=t!==null&&t.memoizedState===null?!1:(p&2)!==0),D?(y=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(p|=1),Dt(zt,p&1),t===null)return So(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(A=d.children,t=d.fallback,y?(d=s.mode,y=s.child,A={mode:"hidden",children:A},(d&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=A):y=Bl(A,d,0,null),t=ri(t,d,c,null),y.return=s,t.return=s,y.sibling=t,s.child=y,s.child.memoizedState=$o(c),s.memoizedState=Qo,t):Jo(s,A));if(p=t.memoizedState,p!==null&&(D=p.dehydrated,D!==null))return u1(t,s,A,d,D,p,c);if(y){y=d.fallback,A=s.mode,p=t.child,D=p.sibling;var F={mode:"hidden",children:d.children};return(A&1)===0&&s.child!==p?(d=s.child,d.childLanes=0,d.pendingProps=F,s.deletions=null):(d=As(p,F),d.subtreeFlags=p.subtreeFlags&14680064),D!==null?y=As(D,y):(y=ri(y,A,c,null),y.flags|=2),y.return=s,d.return=s,d.sibling=y,s.child=d,d=y,y=s.child,A=t.child.memoizedState,A=A===null?$o(c):{baseLanes:A.baseLanes|c,cachePool:null,transitions:A.transitions},y.memoizedState=A,y.childLanes=t.childLanes&~c,s.memoizedState=Qo,d}return y=t.child,t=y.sibling,d=As(y,{mode:"visible",children:d.children}),(s.mode&1)===0&&(d.lanes=c),d.return=s,d.sibling=null,t!==null&&(c=s.deletions,c===null?(s.deletions=[t],s.flags|=16):c.push(t)),s.child=d,s.memoizedState=null,d}function Jo(t,s){return s=Bl({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function El(t,s,c,d){return d!==null&&Ao(d),Ai(s,t.child,null,c),t=Jo(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function u1(t,s,c,d,p,y,A){if(c)return s.flags&256?(s.flags&=-257,d=Yo(Error(x(422))),El(t,s,A,d)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(y=d.fallback,p=s.mode,d=Bl({mode:"visible",children:d.children},p,0,null),y=ri(y,p,A,null),y.flags|=2,d.return=s,y.return=s,d.sibling=y,s.child=d,(s.mode&1)!==0&&Ai(s,t.child,null,A),s.child.memoizedState=$o(A),s.memoizedState=Qo,y);if((s.mode&1)===0)return El(t,s,A,null);if(p.data==="$!"){if(d=p.nextSibling&&p.nextSibling.dataset,d)var D=d.dgst;return d=D,y=Error(x(419)),d=Yo(y,d,void 0),El(t,s,A,d)}if(D=(A&t.childLanes)!==0,Wr||D){if(d=gr,d!==null){switch(A&-A){case 4:p=2;break;case 16:p=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:p=32;break;case 536870912:p=268435456;break;default:p=0}p=(p&(d.suspendedLanes|A))!==0?0:p,p!==0&&p!==y.retryLane&&(y.retryLane=p,qn(t,p),An(d,t,p,-1))}return mc(),d=Yo(Error(x(421))),El(t,s,A,d)}return p.data==="$?"?(s.flags|=128,s.child=t.child,s=C1.bind(null,t),p._reactRetry=s,null):(t=y.treeContext,en=ms(p.nextSibling),Jr=s,Ft=!0,Nn=null,t!==null&&(dn[hn++]=Zn,dn[hn++]=Kn,dn[hn++]=Ys,Zn=t.id,Kn=t.overflow,Ys=s),s=Jo(s,d.children),s.flags|=4096,s)}function ad(t,s,c){t.lanes|=s;var d=t.alternate;d!==null&&(d.lanes|=s),jo(t.return,s,c)}function ec(t,s,c,d,p){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:d,tail:c,tailMode:p}:(y.isBackwards=s,y.rendering=null,y.renderingStartTime=0,y.last=d,y.tail=c,y.tailMode=p)}function ld(t,s,c){var d=s.pendingProps,p=d.revealOrder,y=d.tail;if(Mr(t,s,d.children,c),d=zt.current,(d&2)!==0)d=d&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ad(t,c,s);else if(t.tag===19)ad(t,c,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}d&=1}if(Dt(zt,d),(s.mode&1)===0)s.memoizedState=null;else switch(p){case"forwards":for(c=s.child,p=null;c!==null;)t=c.alternate,t!==null&&pl(t)===null&&(p=c),c=c.sibling;c=p,c===null?(p=s.child,s.child=null):(p=c.sibling,c.sibling=null),ec(s,!1,p,c,y);break;case"backwards":for(c=null,p=s.child,s.child=null;p!==null;){if(t=p.alternate,t!==null&&pl(t)===null){s.child=p;break}t=p.sibling,p.sibling=c,c=p,p=t}ec(s,!0,c,null,y);break;case"together":ec(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Sl(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function $n(t,s,c){if(t!==null&&(s.dependencies=t.dependencies),$s|=s.lanes,(c&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(x(153));if(s.child!==null){for(t=s.child,c=As(t,t.pendingProps),s.child=c,c.return=s;t.sibling!==null;)t=t.sibling,c=c.sibling=As(t,t.pendingProps),c.return=s;c.sibling=null}return s.child}function d1(t,s,c){switch(s.tag){case 3:nd(s),Si();break;case 5:vu(s);break;case 1:Ur(s.type)&&ll(s);break;case 4:Mo(s,s.stateNode.containerInfo);break;case 10:var d=s.type._context,p=s.memoizedProps.value;Dt(fl,d._currentValue),d._currentValue=p;break;case 13:if(d=s.memoizedState,d!==null)return d.dehydrated!==null?(Dt(zt,zt.current&1),s.flags|=128,null):(c&s.child.childLanes)!==0?id(t,s,c):(Dt(zt,zt.current&1),t=$n(t,s,c),t!==null?t.sibling:null);Dt(zt,zt.current&1);break;case 19:if(d=(c&s.childLanes)!==0,(t.flags&128)!==0){if(d)return ld(t,s,c);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Dt(zt,zt.current),d)break;return null;case 22:case 23:return s.lanes=0,ed(t,s,c)}return $n(t,s,c)}var od,tc,cd,ud;od=function(t,s){for(var c=s.child;c!==null;){if(c.tag===5||c.tag===6)t.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===s)break;for(;c.sibling===null;){if(c.return===null||c.return===s)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},tc=function(){},cd=function(t,s,c,d){var p=t.memoizedProps;if(p!==d){t=s.stateNode,qs(Pn.current);var y=null;switch(c){case"input":p=pt(t,p),d=pt(t,d),y=[];break;case"select":p=U({},p,{value:void 0}),d=U({},d,{value:void 0}),y=[];break;case"textarea":p=ts(t,p),d=ts(t,d),y=[];break;default:typeof p.onClick!="function"&&typeof d.onClick=="function"&&(t.onclick=sl)}vt(c,d);var A;c=null;for(ae in p)if(!d.hasOwnProperty(ae)&&p.hasOwnProperty(ae)&&p[ae]!=null)if(ae==="style"){var D=p[ae];for(A in D)D.hasOwnProperty(A)&&(c||(c={}),c[A]="")}else ae!=="dangerouslySetInnerHTML"&&ae!=="children"&&ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(C.hasOwnProperty(ae)?y||(y=[]):(y=y||[]).push(ae,null));for(ae in d){var F=d[ae];if(D=p?.[ae],d.hasOwnProperty(ae)&&F!==D&&(F!=null||D!=null))if(ae==="style")if(D){for(A in D)!D.hasOwnProperty(A)||F&&F.hasOwnProperty(A)||(c||(c={}),c[A]="");for(A in F)F.hasOwnProperty(A)&&D[A]!==F[A]&&(c||(c={}),c[A]=F[A])}else c||(y||(y=[]),y.push(ae,c)),c=F;else ae==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,D=D?D.__html:void 0,F!=null&&D!==F&&(y=y||[]).push(ae,F)):ae==="children"?typeof F!="string"&&typeof F!="number"||(y=y||[]).push(ae,""+F):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&(C.hasOwnProperty(ae)?(F!=null&&ae==="onScroll"&&Pt("scroll",t),y||D===F||(y=[])):(y=y||[]).push(ae,F))}c&&(y=y||[]).push("style",c);var ae=y;(s.updateQueue=ae)&&(s.flags|=4)}},ud=function(t,s,c,d){c!==d&&(s.flags|=4)};function Ca(t,s){if(!Ft)switch(t.tailMode){case"hidden":s=t.tail;for(var c=null;s!==null;)s.alternate!==null&&(c=s),s=s.sibling;c===null?t.tail=null:c.sibling=null;break;case"collapsed":c=t.tail;for(var d=null;c!==null;)c.alternate!==null&&(d=c),c=c.sibling;d===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:d.sibling=null}}function jr(t){var s=t.alternate!==null&&t.alternate.child===t.child,c=0,d=0;if(s)for(var p=t.child;p!==null;)c|=p.lanes|p.childLanes,d|=p.subtreeFlags&14680064,d|=p.flags&14680064,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)c|=p.lanes|p.childLanes,d|=p.subtreeFlags,d|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=d,t.childLanes=c,s}function h1(t,s,c){var d=s.pendingProps;switch(Co(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jr(s),null;case 1:return Ur(s.type)&&al(),jr(s),null;case 3:return d=s.stateNode,Ti(),Bt(Fr),Bt(Ir),Po(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(t===null||t.child===null)&&(dl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Nn!==null&&(hc(Nn),Nn=null))),tc(t,s),jr(s),null;case 5:Oo(s);var p=qs(ya.current);if(c=s.type,t!==null&&s.stateNode!=null)cd(t,s,c,d,p),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!d){if(s.stateNode===null)throw Error(x(166));return jr(s),null}if(t=qs(Pn.current),dl(s)){d=s.stateNode,c=s.type;var y=s.memoizedProps;switch(d[Dn]=s,d[fa]=y,t=(s.mode&1)!==0,c){case"dialog":Pt("cancel",d),Pt("close",d);break;case"iframe":case"object":case"embed":Pt("load",d);break;case"video":case"audio":for(p=0;p<ua.length;p++)Pt(ua[p],d);break;case"source":Pt("error",d);break;case"img":case"image":case"link":Pt("error",d),Pt("load",d);break;case"details":Pt("toggle",d);break;case"input":At(d,y),Pt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!y.multiple},Pt("invalid",d);break;case"textarea":zi(d,y),Pt("invalid",d)}vt(c,y),p=null;for(var A in y)if(y.hasOwnProperty(A)){var D=y[A];A==="children"?typeof D=="string"?d.textContent!==D&&(y.suppressHydrationWarning!==!0&&nl(d.textContent,D,t),p=["children",D]):typeof D=="number"&&d.textContent!==""+D&&(y.suppressHydrationWarning!==!0&&nl(d.textContent,D,t),p=["children",""+D]):C.hasOwnProperty(A)&&D!=null&&A==="onScroll"&&Pt("scroll",d)}switch(c){case"input":gt(d),tt(d,y,!0);break;case"textarea":gt(d),ai(d);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(d.onclick=sl)}d=p,s.updateQueue=d,d!==null&&(s.flags|=4)}else{A=p.nodeType===9?p:p.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dr(c)),t==="http://www.w3.org/1999/xhtml"?c==="script"?(t=A.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof d.is=="string"?t=A.createElement(c,{is:d.is}):(t=A.createElement(c),c==="select"&&(A=t,d.multiple?A.multiple=!0:d.size&&(A.size=d.size))):t=A.createElementNS(t,c),t[Dn]=s,t[fa]=d,od(t,s,!1,!1),s.stateNode=t;e:{switch(A=Rt(c,d),c){case"dialog":Pt("cancel",t),Pt("close",t),p=d;break;case"iframe":case"object":case"embed":Pt("load",t),p=d;break;case"video":case"audio":for(p=0;p<ua.length;p++)Pt(ua[p],t);p=d;break;case"source":Pt("error",t),p=d;break;case"img":case"image":case"link":Pt("error",t),Pt("load",t),p=d;break;case"details":Pt("toggle",t),p=d;break;case"input":At(t,d),p=pt(t,d),Pt("invalid",t);break;case"option":p=d;break;case"select":t._wrapperState={wasMultiple:!!d.multiple},p=U({},d,{value:void 0}),Pt("invalid",t);break;case"textarea":zi(t,d),p=ts(t,d),Pt("invalid",t);break;default:p=d}vt(c,p),D=p;for(y in D)if(D.hasOwnProperty(y)){var F=D[y];y==="style"?je(t,F):y==="dangerouslySetInnerHTML"?(F=F?F.__html:void 0,F!=null&&hr(t,F)):y==="children"?typeof F=="string"?(c!=="textarea"||F!=="")&&rs(t,F):typeof F=="number"&&rs(t,""+F):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(C.hasOwnProperty(y)?F!=null&&y==="onScroll"&&Pt("scroll",t):F!=null&&ne(t,y,F,A))}switch(c){case"input":gt(t),tt(t,d,!1);break;case"textarea":gt(t),ai(t);break;case"option":d.value!=null&&t.setAttribute("value",""+Ue(d.value));break;case"select":t.multiple=!!d.multiple,y=d.value,y!=null?Oe(t,!!d.multiple,y,!1):d.defaultValue!=null&&Oe(t,!!d.multiple,d.defaultValue,!0);break;default:typeof p.onClick=="function"&&(t.onclick=sl)}switch(c){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return jr(s),null;case 6:if(t&&s.stateNode!=null)ud(t,s,t.memoizedProps,d);else{if(typeof d!="string"&&s.stateNode===null)throw Error(x(166));if(c=qs(ya.current),qs(Pn.current),dl(s)){if(d=s.stateNode,c=s.memoizedProps,d[Dn]=s,(y=d.nodeValue!==c)&&(t=Jr,t!==null))switch(t.tag){case 3:nl(d.nodeValue,c,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&nl(d.nodeValue,c,(t.mode&1)!==0)}y&&(s.flags|=4)}else d=(c.nodeType===9?c:c.ownerDocument).createTextNode(d),d[Dn]=s,s.stateNode=d}return jr(s),null;case 13:if(Bt(zt),d=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ft&&en!==null&&(s.mode&1)!==0&&(s.flags&128)===0)fu(),Si(),s.flags|=98560,y=!1;else if(y=dl(s),d!==null&&d.dehydrated!==null){if(t===null){if(!y)throw Error(x(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(x(317));y[Dn]=s}else Si(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;jr(s),y=!1}else Nn!==null&&(hc(Nn),Nn=null),y=!0;if(!y)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=c,s):(d=d!==null,d!==(t!==null&&t.memoizedState!==null)&&d&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(zt.current&1)!==0?dr===0&&(dr=3):mc())),s.updateQueue!==null&&(s.flags|=4),jr(s),null);case 4:return Ti(),tc(t,s),t===null&&da(s.stateNode.containerInfo),jr(s),null;case 10:return To(s.type._context),jr(s),null;case 17:return Ur(s.type)&&al(),jr(s),null;case 19:if(Bt(zt),y=s.memoizedState,y===null)return jr(s),null;if(d=(s.flags&128)!==0,A=y.rendering,A===null)if(d)Ca(y,!1);else{if(dr!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(A=pl(t),A!==null){for(s.flags|=128,Ca(y,!1),d=A.updateQueue,d!==null&&(s.updateQueue=d,s.flags|=4),s.subtreeFlags=0,d=c,c=s.child;c!==null;)y=c,t=d,y.flags&=14680066,A=y.alternate,A===null?(y.childLanes=0,y.lanes=t,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=A.childLanes,y.lanes=A.lanes,y.child=A.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=A.memoizedProps,y.memoizedState=A.memoizedState,y.updateQueue=A.updateQueue,y.type=A.type,t=A.dependencies,y.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),c=c.sibling;return Dt(zt,zt.current&1|2),s.child}t=t.sibling}y.tail!==null&&Ct()>Mi&&(s.flags|=128,d=!0,Ca(y,!1),s.lanes=4194304)}else{if(!d)if(t=pl(A),t!==null){if(s.flags|=128,d=!0,c=t.updateQueue,c!==null&&(s.updateQueue=c,s.flags|=4),Ca(y,!0),y.tail===null&&y.tailMode==="hidden"&&!A.alternate&&!Ft)return jr(s),null}else 2*Ct()-y.renderingStartTime>Mi&&c!==1073741824&&(s.flags|=128,d=!0,Ca(y,!1),s.lanes=4194304);y.isBackwards?(A.sibling=s.child,s.child=A):(c=y.last,c!==null?c.sibling=A:s.child=A,y.last=A)}return y.tail!==null?(s=y.tail,y.rendering=s,y.tail=s.sibling,y.renderingStartTime=Ct(),s.sibling=null,c=zt.current,Dt(zt,d?c&1|2:c&1),s):(jr(s),null);case 22:case 23:return xc(),d=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==d&&(s.flags|=8192),d&&(s.mode&1)!==0?(tn&1073741824)!==0&&(jr(s),s.subtreeFlags&6&&(s.flags|=8192)):jr(s),null;case 24:return null;case 25:return null}throw Error(x(156,s.tag))}function f1(t,s){switch(Co(s),s.tag){case 1:return Ur(s.type)&&al(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Ti(),Bt(Fr),Bt(Ir),Po(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return Oo(s),null;case 13:if(Bt(zt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(x(340));Si()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Bt(zt),null;case 4:return Ti(),null;case 10:return To(s.type._context),null;case 22:case 23:return xc(),null;case 24:return null;default:return null}}var Al=!1,Rr=!1,x1=typeof WeakSet=="function"?WeakSet:Set,Be=null;function Ri(t,s){var c=t.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(d){Kt(t,s,d)}else c.current=null}function rc(t,s,c){try{c()}catch(d){Kt(t,s,d)}}var dd=!1;function m1(t,s){if(xo=Mn,t=ct(),st(t)){if("selectionStart"in t)var c={start:t.selectionStart,end:t.selectionEnd};else e:{c=(c=t.ownerDocument)&&c.defaultView||window;var d=c.getSelection&&c.getSelection();if(d&&d.rangeCount!==0){c=d.anchorNode;var p=d.anchorOffset,y=d.focusNode;d=d.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var A=0,D=-1,F=-1,ae=0,Ce=0,Se=t,be=null;t:for(;;){for(var Me;Se!==c||p!==0&&Se.nodeType!==3||(D=A+p),Se!==y||d!==0&&Se.nodeType!==3||(F=A+d),Se.nodeType===3&&(A+=Se.nodeValue.length),(Me=Se.firstChild)!==null;)be=Se,Se=Me;for(;;){if(Se===t)break t;if(be===c&&++ae===p&&(D=A),be===y&&++Ce===d&&(F=A),(Me=Se.nextSibling)!==null)break;Se=be,be=Se.parentNode}Se=Me}c=D===-1||F===-1?null:{start:D,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(mo={focusedElem:t,selectionRange:c},Mn=!1,Be=s;Be!==null;)if(s=Be,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Be=t;else for(;Be!==null;){s=Be;try{var Le=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Le!==null){var ze=Le.memoizedProps,rr=Le.memoizedState,ee=s.stateNode,V=ee.getSnapshotBeforeUpdate(s.elementType===s.type?ze:Cn(s.type,ze),rr);ee.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var re=s.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(x(163))}}catch(Te){Kt(s,s.return,Te)}if(t=s.sibling,t!==null){t.return=s.return,Be=t;break}Be=s.return}return Le=dd,dd=!1,Le}function Ea(t,s,c){var d=s.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var p=d=d.next;do{if((p.tag&t)===t){var y=p.destroy;p.destroy=void 0,y!==void 0&&rc(s,c,y)}p=p.next}while(p!==d)}}function kl(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var c=s=s.next;do{if((c.tag&t)===t){var d=c.create;c.destroy=d()}c=c.next}while(c!==s)}}function nc(t){var s=t.ref;if(s!==null){var c=t.stateNode;t.tag,t=c,typeof s=="function"?s(t):s.current=t}}function hd(t){var s=t.alternate;s!==null&&(t.alternate=null,hd(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Dn],delete s[fa],delete s[wo],delete s[Q0],delete s[$0])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fd(t){return t.tag===5||t.tag===3||t.tag===4}function xd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sc(t,s,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,s?c.nodeType===8?c.parentNode.insertBefore(t,s):c.insertBefore(t,s):(c.nodeType===8?(s=c.parentNode,s.insertBefore(t,c)):(s=c,s.appendChild(t)),c=c._reactRootContainer,c!=null||s.onclick!==null||(s.onclick=sl));else if(d!==4&&(t=t.child,t!==null))for(sc(t,s,c),t=t.sibling;t!==null;)sc(t,s,c),t=t.sibling}function ic(t,s,c){var d=t.tag;if(d===5||d===6)t=t.stateNode,s?c.insertBefore(t,s):c.appendChild(t);else if(d!==4&&(t=t.child,t!==null))for(ic(t,s,c),t=t.sibling;t!==null;)ic(t,s,c),t=t.sibling}var Nr=null,En=!1;function vs(t,s,c){for(c=c.child;c!==null;)md(t,s,c),c=c.sibling}function md(t,s,c){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(mt,c)}catch{}switch(c.tag){case 5:Rr||Ri(c,s);case 6:var d=Nr,p=En;Nr=null,vs(t,s,c),Nr=d,En=p,Nr!==null&&(En?(t=Nr,c=c.stateNode,t.nodeType===8?t.parentNode.removeChild(c):t.removeChild(c)):Nr.removeChild(c.stateNode));break;case 18:Nr!==null&&(En?(t=Nr,c=c.stateNode,t.nodeType===8?yo(t.parentNode,c):t.nodeType===1&&yo(t,c),wn(t)):yo(Nr,c.stateNode));break;case 4:d=Nr,p=En,Nr=c.stateNode.containerInfo,En=!0,vs(t,s,c),Nr=d,En=p;break;case 0:case 11:case 14:case 15:if(!Rr&&(d=c.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){p=d=d.next;do{var y=p,A=y.destroy;y=y.tag,A!==void 0&&((y&2)!==0||(y&4)!==0)&&rc(c,s,A),p=p.next}while(p!==d)}vs(t,s,c);break;case 1:if(!Rr&&(Ri(c,s),d=c.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=c.memoizedProps,d.state=c.memoizedState,d.componentWillUnmount()}catch(D){Kt(c,s,D)}vs(t,s,c);break;case 21:vs(t,s,c);break;case 22:c.mode&1?(Rr=(d=Rr)||c.memoizedState!==null,vs(t,s,c),Rr=d):vs(t,s,c);break;default:vs(t,s,c)}}function gd(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var c=t.stateNode;c===null&&(c=t.stateNode=new x1),s.forEach(function(d){var p=E1.bind(null,t,d);c.has(d)||(c.add(d),d.then(p,p))})}}function Sn(t,s){var c=s.deletions;if(c!==null)for(var d=0;d<c.length;d++){var p=c[d];try{var y=t,A=s,D=A;e:for(;D!==null;){switch(D.tag){case 5:Nr=D.stateNode,En=!1;break e;case 3:Nr=D.stateNode.containerInfo,En=!0;break e;case 4:Nr=D.stateNode.containerInfo,En=!0;break e}D=D.return}if(Nr===null)throw Error(x(160));md(y,A,p),Nr=null,En=!1;var F=p.alternate;F!==null&&(F.return=null),p.return=null}catch(ae){Kt(p,s,ae)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)pd(s,t),s=s.sibling}function pd(t,s){var c=t.alternate,d=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Sn(s,t),Ln(t),d&4){try{Ea(3,t,t.return),kl(3,t)}catch(ze){Kt(t,t.return,ze)}try{Ea(5,t,t.return)}catch(ze){Kt(t,t.return,ze)}}break;case 1:Sn(s,t),Ln(t),d&512&&c!==null&&Ri(c,c.return);break;case 5:if(Sn(s,t),Ln(t),d&512&&c!==null&&Ri(c,c.return),t.flags&32){var p=t.stateNode;try{rs(p,"")}catch(ze){Kt(t,t.return,ze)}}if(d&4&&(p=t.stateNode,p!=null)){var y=t.memoizedProps,A=c!==null?c.memoizedProps:y,D=t.type,F=t.updateQueue;if(t.updateQueue=null,F!==null)try{D==="input"&&y.type==="radio"&&y.name!=null&&It(p,y),Rt(D,A);var ae=Rt(D,y);for(A=0;A<F.length;A+=2){var Ce=F[A],Se=F[A+1];Ce==="style"?je(p,Se):Ce==="dangerouslySetInnerHTML"?hr(p,Se):Ce==="children"?rs(p,Se):ne(p,Ce,Se,ae)}switch(D){case"input":et(p,y);break;case"textarea":sn(p,y);break;case"select":var be=p._wrapperState.wasMultiple;p._wrapperState.wasMultiple=!!y.multiple;var Me=y.value;Me!=null?Oe(p,!!y.multiple,Me,!1):be!==!!y.multiple&&(y.defaultValue!=null?Oe(p,!!y.multiple,y.defaultValue,!0):Oe(p,!!y.multiple,y.multiple?[]:"",!1))}p[fa]=y}catch(ze){Kt(t,t.return,ze)}}break;case 6:if(Sn(s,t),Ln(t),d&4){if(t.stateNode===null)throw Error(x(162));p=t.stateNode,y=t.memoizedProps;try{p.nodeValue=y}catch(ze){Kt(t,t.return,ze)}}break;case 3:if(Sn(s,t),Ln(t),d&4&&c!==null&&c.memoizedState.isDehydrated)try{wn(s.containerInfo)}catch(ze){Kt(t,t.return,ze)}break;case 4:Sn(s,t),Ln(t);break;case 13:Sn(s,t),Ln(t),p=t.child,p.flags&8192&&(y=p.memoizedState!==null,p.stateNode.isHidden=y,!y||p.alternate!==null&&p.alternate.memoizedState!==null||(oc=Ct())),d&4&&gd(t);break;case 22:if(Ce=c!==null&&c.memoizedState!==null,t.mode&1?(Rr=(ae=Rr)||Ce,Sn(s,t),Rr=ae):Sn(s,t),Ln(t),d&8192){if(ae=t.memoizedState!==null,(t.stateNode.isHidden=ae)&&!Ce&&(t.mode&1)!==0)for(Be=t,Ce=t.child;Ce!==null;){for(Se=Be=Ce;Be!==null;){switch(be=Be,Me=be.child,be.tag){case 0:case 11:case 14:case 15:Ea(4,be,be.return);break;case 1:Ri(be,be.return);var Le=be.stateNode;if(typeof Le.componentWillUnmount=="function"){d=be,c=be.return;try{s=d,Le.props=s.memoizedProps,Le.state=s.memoizedState,Le.componentWillUnmount()}catch(ze){Kt(d,c,ze)}}break;case 5:Ri(be,be.return);break;case 22:if(be.memoizedState!==null){bd(Se);continue}}Me!==null?(Me.return=be,Be=Me):bd(Se)}Ce=Ce.sibling}e:for(Ce=null,Se=t;;){if(Se.tag===5){if(Ce===null){Ce=Se;try{p=Se.stateNode,ae?(y=p.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(D=Se.stateNode,F=Se.memoizedProps.style,A=F!=null&&F.hasOwnProperty("display")?F.display:null,D.style.display=Ut("display",A))}catch(ze){Kt(t,t.return,ze)}}}else if(Se.tag===6){if(Ce===null)try{Se.stateNode.nodeValue=ae?"":Se.memoizedProps}catch(ze){Kt(t,t.return,ze)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===t)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===t)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===t)break e;Ce===Se&&(Ce=null),Se=Se.return}Ce===Se&&(Ce=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:Sn(s,t),Ln(t),d&4&&gd(t);break;case 21:break;default:Sn(s,t),Ln(t)}}function Ln(t){var s=t.flags;if(s&2){try{e:{for(var c=t.return;c!==null;){if(fd(c)){var d=c;break e}c=c.return}throw Error(x(160))}switch(d.tag){case 5:var p=d.stateNode;d.flags&32&&(rs(p,""),d.flags&=-33);var y=xd(t);ic(t,y,p);break;case 3:case 4:var A=d.stateNode.containerInfo,D=xd(t);sc(t,D,A);break;default:throw Error(x(161))}}catch(F){Kt(t,t.return,F)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function g1(t,s,c){Be=t,yd(t)}function yd(t,s,c){for(var d=(t.mode&1)!==0;Be!==null;){var p=Be,y=p.child;if(p.tag===22&&d){var A=p.memoizedState!==null||Al;if(!A){var D=p.alternate,F=D!==null&&D.memoizedState!==null||Rr;D=Al;var ae=Rr;if(Al=A,(Rr=F)&&!ae)for(Be=p;Be!==null;)A=Be,F=A.child,A.tag===22&&A.memoizedState!==null?vd(p):F!==null?(F.return=A,Be=F):vd(p);for(;y!==null;)Be=y,yd(y),y=y.sibling;Be=p,Al=D,Rr=ae}wd(t)}else(p.subtreeFlags&8772)!==0&&y!==null?(y.return=p,Be=y):wd(t)}}function wd(t){for(;Be!==null;){var s=Be;if((s.flags&8772)!==0){var c=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Rr||kl(5,s);break;case 1:var d=s.stateNode;if(s.flags&4&&!Rr)if(c===null)d.componentDidMount();else{var p=s.elementType===s.type?c.memoizedProps:Cn(s.type,c.memoizedProps);d.componentDidUpdate(p,c.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var y=s.updateQueue;y!==null&&bu(s,y,d);break;case 3:var A=s.updateQueue;if(A!==null){if(c=null,s.child!==null)switch(s.child.tag){case 5:c=s.child.stateNode;break;case 1:c=s.child.stateNode}bu(s,A,c)}break;case 5:var D=s.stateNode;if(c===null&&s.flags&4){c=D;var F=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":F.autoFocus&&c.focus();break;case"img":F.src&&(c.src=F.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var ae=s.alternate;if(ae!==null){var Ce=ae.memoizedState;if(Ce!==null){var Se=Ce.dehydrated;Se!==null&&wn(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(x(163))}Rr||s.flags&512&&nc(s)}catch(be){Kt(s,s.return,be)}}if(s===t){Be=null;break}if(c=s.sibling,c!==null){c.return=s.return,Be=c;break}Be=s.return}}function bd(t){for(;Be!==null;){var s=Be;if(s===t){Be=null;break}var c=s.sibling;if(c!==null){c.return=s.return,Be=c;break}Be=s.return}}function vd(t){for(;Be!==null;){var s=Be;try{switch(s.tag){case 0:case 11:case 15:var c=s.return;try{kl(4,s)}catch(F){Kt(s,c,F)}break;case 1:var d=s.stateNode;if(typeof d.componentDidMount=="function"){var p=s.return;try{d.componentDidMount()}catch(F){Kt(s,p,F)}}var y=s.return;try{nc(s)}catch(F){Kt(s,y,F)}break;case 5:var A=s.return;try{nc(s)}catch(F){Kt(s,A,F)}}}catch(F){Kt(s,s.return,F)}if(s===t){Be=null;break}var D=s.sibling;if(D!==null){D.return=s.return,Be=D;break}Be=s.return}}var p1=Math.ceil,Il=Q.ReactCurrentDispatcher,ac=Q.ReactCurrentOwner,mn=Q.ReactCurrentBatchConfig,wt=0,gr=null,sr=null,Cr=0,tn=0,_i=gs(0),dr=0,Sa=null,$s=0,Tl=0,lc=0,Aa=null,zr=null,oc=0,Mi=1/0,Jn=null,jl=!1,cc=null,Ns=null,Rl=!1,Cs=null,_l=0,ka=0,uc=null,Ml=-1,Ol=0;function Or(){return(wt&6)!==0?Ct():Ml!==-1?Ml:Ml=Ct()}function Es(t){return(t.mode&1)===0?1:(wt&2)!==0&&Cr!==0?Cr&-Cr:e1.transition!==null?(Ol===0&&(Ol=ar()),Ol):(t=ot,t!==0||(t=window.event,t=t===void 0?16:ea(t.type)),t)}function An(t,s,c,d){if(50<ka)throw ka=0,uc=null,Error(x(185));T(t,c,d),((wt&2)===0||t!==gr)&&(t===gr&&((wt&2)===0&&(Tl|=c),dr===4&&Ss(t,Cr)),Hr(t,d),c===1&&wt===0&&(s.mode&1)===0&&(Mi=Ct()+500,ol&&ys()))}function Hr(t,s){var c=t.callbackNode;is(t,s);var d=Kr(t,t===gr?Cr:0);if(d===0)c!==null&&fr(c),t.callbackNode=null,t.callbackPriority=0;else if(s=d&-d,t.callbackPriority!==s){if(c!=null&&fr(c),s===1)t.tag===0?J0(Cd.bind(null,t)):ou(Cd.bind(null,t)),K0(function(){(wt&6)===0&&ys()}),c=null;else{switch(Ha(d)){case 1:c=pe;break;case 4:c=Wa;break;case 16:c=Tt;break;case 536870912:c=za;break;default:c=Tt}c=Rd(c,Nd.bind(null,t))}t.callbackPriority=s,t.callbackNode=c}}function Nd(t,s){if(Ml=-1,Ol=0,(wt&6)!==0)throw Error(x(327));var c=t.callbackNode;if(Oi()&&t.callbackNode!==c)return null;var d=Kr(t,t===gr?Cr:0);if(d===0)return null;if((d&30)!==0||(d&t.expiredLanes)!==0||s)s=Dl(t,d);else{s=d;var p=wt;wt|=2;var y=Sd();(gr!==t||Cr!==s)&&(Jn=null,Mi=Ct()+500,ei(t,s));do try{b1();break}catch(D){Ed(t,D)}while(!0);Io(),Il.current=y,wt=p,sr!==null?s=0:(gr=null,Cr=0,s=dr)}if(s!==0){if(s===2&&(p=Et(t),p!==0&&(d=p,s=dc(t,p))),s===1)throw c=Sa,ei(t,0),Ss(t,d),Hr(t,Ct()),c;if(s===6)Ss(t,d);else{if(p=t.current.alternate,(d&30)===0&&!y1(p)&&(s=Dl(t,d),s===2&&(y=Et(t),y!==0&&(d=y,s=dc(t,y))),s===1))throw c=Sa,ei(t,0),Ss(t,d),Hr(t,Ct()),c;switch(t.finishedWork=p,t.finishedLanes=d,s){case 0:case 1:throw Error(x(345));case 2:ti(t,zr,Jn);break;case 3:if(Ss(t,d),(d&130023424)===d&&(s=oc+500-Ct(),10<s)){if(Kr(t,0)!==0)break;if(p=t.suspendedLanes,(p&d)!==d){Or(),t.pingedLanes|=t.suspendedLanes&p;break}t.timeoutHandle=po(ti.bind(null,t,zr,Jn),s);break}ti(t,zr,Jn);break;case 4:if(Ss(t,d),(d&4194240)===d)break;for(s=t.eventTimes,p=-1;0<d;){var A=31-_r(d);y=1<<A,A=s[A],A>p&&(p=A),d&=~y}if(d=p,d=Ct()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*p1(d/1960))-d,10<d){t.timeoutHandle=po(ti.bind(null,t,zr,Jn),d);break}ti(t,zr,Jn);break;case 5:ti(t,zr,Jn);break;default:throw Error(x(329))}}}return Hr(t,Ct()),t.callbackNode===c?Nd.bind(null,t):null}function dc(t,s){var c=Aa;return t.current.memoizedState.isDehydrated&&(ei(t,s).flags|=256),t=Dl(t,s),t!==2&&(s=zr,zr=c,s!==null&&hc(s)),t}function hc(t){zr===null?zr=t:zr.push.apply(zr,t)}function y1(t){for(var s=t;;){if(s.flags&16384){var c=s.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var d=0;d<c.length;d++){var p=c[d],y=p.getSnapshot;p=p.value;try{if(!q(y(),p))return!1}catch{return!1}}}if(c=s.child,s.subtreeFlags&16384&&c!==null)c.return=s,s=c;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ss(t,s){for(s&=~lc,s&=~Tl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var c=31-_r(s),d=1<<c;t[c]=-1,s&=~d}}function Cd(t){if((wt&6)!==0)throw Error(x(327));Oi();var s=Kr(t,0);if((s&1)===0)return Hr(t,Ct()),null;var c=Dl(t,s);if(t.tag!==0&&c===2){var d=Et(t);d!==0&&(s=d,c=dc(t,d))}if(c===1)throw c=Sa,ei(t,0),Ss(t,s),Hr(t,Ct()),c;if(c===6)throw Error(x(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,ti(t,zr,Jn),Hr(t,Ct()),null}function fc(t,s){var c=wt;wt|=1;try{return t(s)}finally{wt=c,wt===0&&(Mi=Ct()+500,ol&&ys())}}function Js(t){Cs!==null&&Cs.tag===0&&(wt&6)===0&&Oi();var s=wt;wt|=1;var c=mn.transition,d=ot;try{if(mn.transition=null,ot=1,t)return t()}finally{ot=d,mn.transition=c,wt=s,(wt&6)===0&&ys()}}function xc(){tn=_i.current,Bt(_i)}function ei(t,s){t.finishedWork=null,t.finishedLanes=0;var c=t.timeoutHandle;if(c!==-1&&(t.timeoutHandle=-1,Z0(c)),sr!==null)for(c=sr.return;c!==null;){var d=c;switch(Co(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&al();break;case 3:Ti(),Bt(Fr),Bt(Ir),Po();break;case 5:Oo(d);break;case 4:Ti();break;case 13:Bt(zt);break;case 19:Bt(zt);break;case 10:To(d.type._context);break;case 22:case 23:xc()}c=c.return}if(gr=t,sr=t=As(t.current,null),Cr=tn=s,dr=0,Sa=null,lc=Tl=$s=0,zr=Aa=null,Ks!==null){for(s=0;s<Ks.length;s++)if(c=Ks[s],d=c.interleaved,d!==null){c.interleaved=null;var p=d.next,y=c.pending;if(y!==null){var A=y.next;y.next=p,d.next=A}c.pending=d}Ks=null}return t}function Ed(t,s){do{var c=sr;try{if(Io(),yl.current=Nl,wl){for(var d=Ht.memoizedState;d!==null;){var p=d.queue;p!==null&&(p.pending=null),d=d.next}wl=!1}if(Qs=0,mr=ur=Ht=null,wa=!1,ba=0,ac.current=null,c===null||c.return===null){dr=1,Sa=s,sr=null;break}e:{var y=t,A=c.return,D=c,F=s;if(s=Cr,D.flags|=32768,F!==null&&typeof F=="object"&&typeof F.then=="function"){var ae=F,Ce=D,Se=Ce.tag;if((Ce.mode&1)===0&&(Se===0||Se===11||Se===15)){var be=Ce.alternate;be?(Ce.updateQueue=be.updateQueue,Ce.memoizedState=be.memoizedState,Ce.lanes=be.lanes):(Ce.updateQueue=null,Ce.memoizedState=null)}var Me=Ku(A);if(Me!==null){Me.flags&=-257,qu(Me,A,D,y,s),Me.mode&1&&Zu(y,ae,s),s=Me,F=ae;var Le=s.updateQueue;if(Le===null){var ze=new Set;ze.add(F),s.updateQueue=ze}else Le.add(F);break e}else{if((s&1)===0){Zu(y,ae,s),mc();break e}F=Error(x(426))}}else if(Ft&&D.mode&1){var rr=Ku(A);if(rr!==null){(rr.flags&65536)===0&&(rr.flags|=256),qu(rr,A,D,y,s),Ao(ji(F,D));break e}}y=F=ji(F,D),dr!==4&&(dr=2),Aa===null?Aa=[y]:Aa.push(y),y=A;do{switch(y.tag){case 3:y.flags|=65536,s&=-s,y.lanes|=s;var ee=Xu(y,F,s);wu(y,ee);break e;case 1:D=F;var V=y.type,re=y.stateNode;if((y.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(Ns===null||!Ns.has(re)))){y.flags|=65536,s&=-s,y.lanes|=s;var Te=Yu(y,D,s);wu(y,Te);break e}}y=y.return}while(y!==null)}kd(c)}catch(Ve){s=Ve,sr===c&&c!==null&&(sr=c=c.return);continue}break}while(!0)}function Sd(){var t=Il.current;return Il.current=Nl,t===null?Nl:t}function mc(){(dr===0||dr===3||dr===2)&&(dr=4),gr===null||($s&268435455)===0&&(Tl&268435455)===0||Ss(gr,Cr)}function Dl(t,s){var c=wt;wt|=2;var d=Sd();(gr!==t||Cr!==s)&&(Jn=null,ei(t,s));do try{w1();break}catch(p){Ed(t,p)}while(!0);if(Io(),wt=c,Il.current=d,sr!==null)throw Error(x(261));return gr=null,Cr=0,dr}function w1(){for(;sr!==null;)Ad(sr)}function b1(){for(;sr!==null&&!_t();)Ad(sr)}function Ad(t){var s=jd(t.alternate,t,tn);t.memoizedProps=t.pendingProps,s===null?kd(t):sr=s,ac.current=null}function kd(t){var s=t;do{var c=s.alternate;if(t=s.return,(s.flags&32768)===0){if(c=h1(c,s,tn),c!==null){sr=c;return}}else{if(c=f1(c,s),c!==null){c.flags&=32767,sr=c;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dr=6,sr=null;return}}if(s=s.sibling,s!==null){sr=s;return}sr=s=t}while(s!==null);dr===0&&(dr=5)}function ti(t,s,c){var d=ot,p=mn.transition;try{mn.transition=null,ot=1,v1(t,s,c,d)}finally{mn.transition=p,ot=d}return null}function v1(t,s,c,d){do Oi();while(Cs!==null);if((wt&6)!==0)throw Error(x(327));c=t.finishedWork;var p=t.finishedLanes;if(c===null)return null;if(t.finishedWork=null,t.finishedLanes=0,c===t.current)throw Error(x(177));t.callbackNode=null,t.callbackPriority=0;var y=c.lanes|c.childLanes;if(Xe(t,y),t===gr&&(sr=gr=null,Cr=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||Rl||(Rl=!0,Rd(Tt,function(){return Oi(),null})),y=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||y){y=mn.transition,mn.transition=null;var A=ot;ot=1;var D=wt;wt|=4,ac.current=null,m1(t,c),pd(c,t),kr(mo),Mn=!!xo,mo=xo=null,t.current=c,g1(c),Ua(),wt=D,ot=A,mn.transition=y}else t.current=c;if(Rl&&(Rl=!1,Cs=t,_l=p),y=t.pendingLanes,y===0&&(Ns=null),ft(c.stateNode),Hr(t,Ct()),s!==null)for(d=t.onRecoverableError,c=0;c<s.length;c++)p=s[c],d(p.value,{componentStack:p.stack,digest:p.digest});if(jl)throw jl=!1,t=cc,cc=null,t;return(_l&1)!==0&&t.tag!==0&&Oi(),y=t.pendingLanes,(y&1)!==0?t===uc?ka++:(ka=0,uc=t):ka=0,ys(),null}function Oi(){if(Cs!==null){var t=Ha(_l),s=mn.transition,c=ot;try{if(mn.transition=null,ot=16>t?16:t,Cs===null)var d=!1;else{if(t=Cs,Cs=null,_l=0,(wt&6)!==0)throw Error(x(331));var p=wt;for(wt|=4,Be=t.current;Be!==null;){var y=Be,A=y.child;if((Be.flags&16)!==0){var D=y.deletions;if(D!==null){for(var F=0;F<D.length;F++){var ae=D[F];for(Be=ae;Be!==null;){var Ce=Be;switch(Ce.tag){case 0:case 11:case 15:Ea(8,Ce,y)}var Se=Ce.child;if(Se!==null)Se.return=Ce,Be=Se;else for(;Be!==null;){Ce=Be;var be=Ce.sibling,Me=Ce.return;if(hd(Ce),Ce===ae){Be=null;break}if(be!==null){be.return=Me,Be=be;break}Be=Me}}}var Le=y.alternate;if(Le!==null){var ze=Le.child;if(ze!==null){Le.child=null;do{var rr=ze.sibling;ze.sibling=null,ze=rr}while(ze!==null)}}Be=y}}if((y.subtreeFlags&2064)!==0&&A!==null)A.return=y,Be=A;else e:for(;Be!==null;){if(y=Be,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Ea(9,y,y.return)}var ee=y.sibling;if(ee!==null){ee.return=y.return,Be=ee;break e}Be=y.return}}var V=t.current;for(Be=V;Be!==null;){A=Be;var re=A.child;if((A.subtreeFlags&2064)!==0&&re!==null)re.return=A,Be=re;else e:for(A=V;Be!==null;){if(D=Be,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:kl(9,D)}}catch(Ve){Kt(D,D.return,Ve)}if(D===A){Be=null;break e}var Te=D.sibling;if(Te!==null){Te.return=D.return,Be=Te;break e}Be=D.return}}if(wt=p,ys(),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(mt,t)}catch{}d=!0}return d}finally{ot=c,mn.transition=s}}return!1}function Id(t,s,c){s=ji(c,s),s=Xu(t,s,1),t=bs(t,s,1),s=Or(),t!==null&&(T(t,1,s),Hr(t,s))}function Kt(t,s,c){if(t.tag===3)Id(t,t,c);else for(;s!==null;){if(s.tag===3){Id(s,t,c);break}else if(s.tag===1){var d=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Ns===null||!Ns.has(d))){t=ji(c,t),t=Yu(s,t,1),s=bs(s,t,1),t=Or(),s!==null&&(T(s,1,t),Hr(s,t));break}}s=s.return}}function N1(t,s,c){var d=t.pingCache;d!==null&&d.delete(s),s=Or(),t.pingedLanes|=t.suspendedLanes&c,gr===t&&(Cr&c)===c&&(dr===4||dr===3&&(Cr&130023424)===Cr&&500>Ct()-oc?ei(t,0):lc|=c),Hr(t,s)}function Td(t,s){s===0&&((t.mode&1)===0?s=1:(s=ui,ui<<=1,(ui&130023424)===0&&(ui=4194304)));var c=Or();t=qn(t,s),t!==null&&(T(t,s,c),Hr(t,c))}function C1(t){var s=t.memoizedState,c=0;s!==null&&(c=s.retryLane),Td(t,c)}function E1(t,s){var c=0;switch(t.tag){case 13:var d=t.stateNode,p=t.memoizedState;p!==null&&(c=p.retryLane);break;case 19:d=t.stateNode;break;default:throw Error(x(314))}d!==null&&d.delete(s),Td(t,c)}var jd;jd=function(t,s,c){if(t!==null)if(t.memoizedProps!==s.pendingProps||Fr.current)Wr=!0;else{if((t.lanes&c)===0&&(s.flags&128)===0)return Wr=!1,d1(t,s,c);Wr=(t.flags&131072)!==0}else Wr=!1,Ft&&(s.flags&1048576)!==0&&cu(s,ul,s.index);switch(s.lanes=0,s.tag){case 2:var d=s.type;Sl(t,s),t=s.pendingProps;var p=Ni(s,Ir.current);Ii(s,c),p=Fo(null,s,d,t,p,c);var y=Uo();return s.flags|=1,typeof p=="object"&&p!==null&&typeof p.render=="function"&&p.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Ur(d)?(y=!0,ll(s)):y=!1,s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,_o(s),p.updater=Cl,s.stateNode=p,p._reactInternals=s,Xo(s,d,t,c),s=qo(null,s,d,!0,y,c)):(s.tag=0,Ft&&y&&No(s),Mr(null,s,p,c),s=s.child),s;case 16:d=s.elementType;e:{switch(Sl(t,s),t=s.pendingProps,p=d._init,d=p(d._payload),s.type=d,p=s.tag=A1(d),t=Cn(d,t),p){case 0:s=Ko(null,s,d,t,c);break e;case 1:s=rd(null,s,d,t,c);break e;case 11:s=Qu(null,s,d,t,c);break e;case 14:s=$u(null,s,d,Cn(d.type,t),c);break e}throw Error(x(306,d,""))}return s;case 0:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Cn(d,p),Ko(t,s,d,p,c);case 1:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Cn(d,p),rd(t,s,d,p,c);case 3:e:{if(nd(s),t===null)throw Error(x(387));d=s.pendingProps,y=s.memoizedState,p=y.element,yu(t,s),gl(s,d,null,c);var A=s.memoizedState;if(d=A.element,y.isDehydrated)if(y={element:d,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},s.updateQueue.baseState=y,s.memoizedState=y,s.flags&256){p=ji(Error(x(423)),s),s=sd(t,s,d,c,p);break e}else if(d!==p){p=ji(Error(x(424)),s),s=sd(t,s,d,c,p);break e}else for(en=ms(s.stateNode.containerInfo.firstChild),Jr=s,Ft=!0,Nn=null,c=gu(s,null,d,c),s.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Si(),d===p){s=$n(t,s,c);break e}Mr(t,s,d,c)}s=s.child}return s;case 5:return vu(s),t===null&&So(s),d=s.type,p=s.pendingProps,y=t!==null?t.memoizedProps:null,A=p.children,go(d,p)?A=null:y!==null&&go(d,y)&&(s.flags|=32),td(t,s),Mr(t,s,A,c),s.child;case 6:return t===null&&So(s),null;case 13:return id(t,s,c);case 4:return Mo(s,s.stateNode.containerInfo),d=s.pendingProps,t===null?s.child=Ai(s,null,d,c):Mr(t,s,d,c),s.child;case 11:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Cn(d,p),Qu(t,s,d,p,c);case 7:return Mr(t,s,s.pendingProps,c),s.child;case 8:return Mr(t,s,s.pendingProps.children,c),s.child;case 12:return Mr(t,s,s.pendingProps.children,c),s.child;case 10:e:{if(d=s.type._context,p=s.pendingProps,y=s.memoizedProps,A=p.value,Dt(fl,d._currentValue),d._currentValue=A,y!==null)if(q(y.value,A)){if(y.children===p.children&&!Fr.current){s=$n(t,s,c);break e}}else for(y=s.child,y!==null&&(y.return=s);y!==null;){var D=y.dependencies;if(D!==null){A=y.child;for(var F=D.firstContext;F!==null;){if(F.context===d){if(y.tag===1){F=Qn(-1,c&-c),F.tag=2;var ae=y.updateQueue;if(ae!==null){ae=ae.shared;var Ce=ae.pending;Ce===null?F.next=F:(F.next=Ce.next,Ce.next=F),ae.pending=F}}y.lanes|=c,F=y.alternate,F!==null&&(F.lanes|=c),jo(y.return,c,s),D.lanes|=c;break}F=F.next}}else if(y.tag===10)A=y.type===s.type?null:y.child;else if(y.tag===18){if(A=y.return,A===null)throw Error(x(341));A.lanes|=c,D=A.alternate,D!==null&&(D.lanes|=c),jo(A,c,s),A=y.sibling}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===s){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}Mr(t,s,p.children,c),s=s.child}return s;case 9:return p=s.type,d=s.pendingProps.children,Ii(s,c),p=fn(p),d=d(p),s.flags|=1,Mr(t,s,d,c),s.child;case 14:return d=s.type,p=Cn(d,s.pendingProps),p=Cn(d.type,p),$u(t,s,d,p,c);case 15:return Ju(t,s,s.type,s.pendingProps,c);case 17:return d=s.type,p=s.pendingProps,p=s.elementType===d?p:Cn(d,p),Sl(t,s),s.tag=1,Ur(d)?(t=!0,ll(s)):t=!1,Ii(s,c),Gu(s,d,p),Xo(s,d,p,c),qo(null,s,d,!0,t,c);case 19:return ld(t,s,c);case 22:return ed(t,s,c)}throw Error(x(156,s.tag))};function Rd(t,s){return Yr(t,s)}function S1(t,s,c,d){this.tag=t,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,s,c,d){return new S1(t,s,c,d)}function gc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function A1(t){if(typeof t=="function")return gc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===te)return 11;if(t===B)return 14}return 2}function As(t,s){var c=t.alternate;return c===null?(c=gn(t.tag,s,t.key,t.mode),c.elementType=t.elementType,c.type=t.type,c.stateNode=t.stateNode,c.alternate=t,t.alternate=c):(c.pendingProps=s,c.type=t.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=t.flags&14680064,c.childLanes=t.childLanes,c.lanes=t.lanes,c.child=t.child,c.memoizedProps=t.memoizedProps,c.memoizedState=t.memoizedState,c.updateQueue=t.updateQueue,s=t.dependencies,c.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},c.sibling=t.sibling,c.index=t.index,c.ref=t.ref,c}function Pl(t,s,c,d,p,y){var A=2;if(d=t,typeof t=="function")gc(t)&&(A=1);else if(typeof t=="string")A=5;else e:switch(t){case Y:return ri(c.children,p,y,s);case me:A=8,p|=8;break;case ce:return t=gn(12,c,s,p|2),t.elementType=ce,t.lanes=y,t;case K:return t=gn(13,c,s,p),t.elementType=K,t.lanes=y,t;case ge:return t=gn(19,c,s,p),t.elementType=ge,t.lanes=y,t;case fe:return Bl(c,p,y,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ke:A=10;break e;case Ge:A=9;break e;case te:A=11;break e;case B:A=14;break e;case ye:A=16,d=null;break e}throw Error(x(130,t==null?t:typeof t,""))}return s=gn(A,c,s,p),s.elementType=t,s.type=d,s.lanes=y,s}function ri(t,s,c,d){return t=gn(7,t,d,s),t.lanes=c,t}function Bl(t,s,c,d){return t=gn(22,t,d,s),t.elementType=fe,t.lanes=c,t.stateNode={isHidden:!1},t}function pc(t,s,c){return t=gn(6,t,null,s),t.lanes=c,t}function yc(t,s,c){return s=gn(4,t.children!==null?t.children:[],t.key,s),s.lanes=c,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function k1(t,s,c,d,p){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J(0),this.expirationTimes=J(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J(0),this.identifierPrefix=d,this.onRecoverableError=p,this.mutableSourceEagerHydrationData=null}function wc(t,s,c,d,p,y,A,D,F){return t=new k1(t,s,c,D,F),s===1?(s=1,y===!0&&(s|=8)):s=0,y=gn(3,null,null,s),t.current=y,y.stateNode=t,y.memoizedState={element:d,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},_o(y),t}function I1(t,s,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oe,key:d==null?null:""+d,children:t,containerInfo:s,implementation:c}}function _d(t){if(!t)return ps;t=t._reactInternals;e:{if(Lr(t)!==t||t.tag!==1)throw Error(x(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Ur(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(x(171))}if(t.tag===1){var c=t.type;if(Ur(c))return au(t,c,s)}return s}function Md(t,s,c,d,p,y,A,D,F){return t=wc(c,d,!0,t,p,y,A,D,F),t.context=_d(null),c=t.current,d=Or(),p=Es(c),y=Qn(d,p),y.callback=s??null,bs(c,y,p),t.current.lanes=p,T(t,p,d),Hr(t,d),t}function Ll(t,s,c,d){var p=s.current,y=Or(),A=Es(p);return c=_d(c),s.context===null?s.context=c:s.pendingContext=c,s=Qn(y,A),s.payload={element:t},d=d===void 0?null:d,d!==null&&(s.callback=d),t=bs(p,s,A),t!==null&&(An(t,p,A,y),ml(t,p,A)),A}function Fl(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function Od(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var c=t.retryLane;t.retryLane=c!==0&&c<s?c:s}}function bc(t,s){Od(t,s),(t=t.alternate)&&Od(t,s)}function T1(){return null}var Dd=typeof reportError=="function"?reportError:function(t){console.error(t)};function vc(t){this._internalRoot=t}Ul.prototype.render=vc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(x(409));Ll(t,s,null,null)},Ul.prototype.unmount=vc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Js(function(){Ll(null,t,null,null)}),s[Xn]=null}};function Ul(t){this._internalRoot=t}Ul.prototype.unstable_scheduleHydration=function(t){if(t){var s=Mt();t={blockedOn:null,target:t,priority:s};for(var c=0;c<wr.length&&s!==0&&s<wr[c].priority;c++);wr.splice(c,0,t),c===0&&Va(t)}};function Nc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Wl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Pd(){}function j1(t,s,c,d,p){if(p){if(typeof d=="function"){var y=d;d=function(){var ae=Fl(A);y.call(ae)}}var A=Md(s,d,t,0,null,!1,!1,"",Pd);return t._reactRootContainer=A,t[Xn]=A.current,da(t.nodeType===8?t.parentNode:t),Js(),A}for(;p=t.lastChild;)t.removeChild(p);if(typeof d=="function"){var D=d;d=function(){var ae=Fl(F);D.call(ae)}}var F=wc(t,0,!1,null,null,!1,!1,"",Pd);return t._reactRootContainer=F,t[Xn]=F.current,da(t.nodeType===8?t.parentNode:t),Js(function(){Ll(s,F,c,d)}),F}function zl(t,s,c,d,p){var y=c._reactRootContainer;if(y){var A=y;if(typeof p=="function"){var D=p;p=function(){var F=Fl(A);D.call(F)}}Ll(s,A,t,p)}else A=j1(c,s,t,p,d);return Fl(A)}di=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var c=jt(s.pendingLanes);c!==0&&(Yt(s,c|1),Hr(s,Ct()),(wt&6)===0&&(Mi=Ct()+500,ys()))}break;case 13:Js(function(){var d=qn(t,1);if(d!==null){var p=Or();An(d,t,1,p)}}),bc(t,1)}},Ar=function(t){if(t.tag===13){var s=qn(t,134217728);if(s!==null){var c=Or();An(s,t,134217728,c)}bc(t,134217728)}},Ye=function(t){if(t.tag===13){var s=Es(t),c=qn(t,s);if(c!==null){var d=Or();An(c,t,s,d)}bc(t,s)}},Mt=function(){return ot},Qi=function(t,s){var c=ot;try{return ot=t,s()}finally{ot=c}},oi=function(t,s,c){switch(s){case"input":if(et(t,c),s=c.name,c.type==="radio"&&s!=null){for(c=t;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<c.length;s++){var d=c[s];if(d!==t&&d.form===t.form){var p=il(d);if(!p)throw Error(x(90));We(d),et(d,p)}}}break;case"textarea":sn(t,c);break;case"select":s=c.value,s!=null&&Oe(t,!!c.multiple,s,!1)}},ci=fc,ir=Js;var R1={usingClientEntryPoint:!1,Events:[xa,bi,il,Gi,Br,fc]},Ia={findFiberByHostInstance:Vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_1={bundleType:Ia.bundleType,version:Ia.version,rendererPackageName:Ia.rendererPackageName,rendererConfig:Ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=La(t),t===null?null:t.stateNode},findFiberByHostInstance:Ia.findFiberByHostInstance||T1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hl.isDisabled&&Hl.supportsFiber)try{mt=Hl.inject(_1),lt=Hl}catch{}}return Gr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R1,Gr.createPortal=function(t,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nc(s))throw Error(x(200));return I1(t,s,null,c)},Gr.createRoot=function(t,s){if(!Nc(t))throw Error(x(299));var c=!1,d="",p=Dd;return s!=null&&(s.unstable_strictMode===!0&&(c=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onRecoverableError!==void 0&&(p=s.onRecoverableError)),s=wc(t,1,!1,null,null,c,!1,d,p),t[Xn]=s.current,da(t.nodeType===8?t.parentNode:t),new vc(s)},Gr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(x(188)):(t=Object.keys(t).join(","),Error(x(268,t)));return t=La(s),t=t===null?null:t.stateNode,t},Gr.flushSync=function(t){return Js(t)},Gr.hydrate=function(t,s,c){if(!Wl(s))throw Error(x(200));return zl(null,t,s,!0,c)},Gr.hydrateRoot=function(t,s,c){if(!Nc(t))throw Error(x(405));var d=c!=null&&c.hydratedSources||null,p=!1,y="",A=Dd;if(c!=null&&(c.unstable_strictMode===!0&&(p=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(A=c.onRecoverableError)),s=Md(s,null,t,1,c??null,p,!1,y,A),t[Xn]=s.current,da(t),d)for(t=0;t<d.length;t++)c=d[t],p=c._getVersion,p=p(c._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[c,p]:s.mutableSourceEagerHydrationData.push(c,p);return new Ul(s)},Gr.render=function(t,s,c){if(!Wl(s))throw Error(x(200));return zl(null,t,s,!1,c)},Gr.unmountComponentAtNode=function(t){if(!Wl(t))throw Error(x(40));return t._reactRootContainer?(Js(function(){zl(null,null,t,!1,function(){t._reactRootContainer=null,t[Xn]=null})}),!0):!1},Gr.unstable_batchedUpdates=fc,Gr.unstable_renderSubtreeIntoContainer=function(t,s,c,d){if(!Wl(c))throw Error(x(200));if(t==null||t._reactInternals===void 0)throw Error(x(38));return zl(t,s,c,!1,d)},Gr.version="18.3.1-next-f1338f8080-20240426",Gr}var Gd;function U1(){if(Gd)return Sc.exports;Gd=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(m){console.error(m)}}return f(),Sc.exports=F1(),Sc.exports}var Vd;function W1(){if(Vd)return Vl;Vd=1;var f=U1();return Vl.createRoot=f.createRoot,Vl.hydrateRoot=f.hydrateRoot,Vl}var z1=W1();const H1=v0(z1);console.warn("Supabase credentials not found. Running in offline mode.");const G1=()=>!1,C0=we.createContext({}),Bc=()=>we.useContext(C0);function V1({children:f}){const[m,x]=we.useState(null),[b,C]=we.useState(!0);we.useEffect(()=>{{C(!1);return}},[]);const M={user:m,loading:b,signInWithGoogle:async()=>(console.error("Supabase not configured"),{error:{message:"Authentication not configured. Please check your Supabase credentials."}}),signOut:async()=>{},isAuthenticated:!!m,isConfigured:G1()};return i.jsx(C0.Provider,{value:M,children:f})}const pn=async()=>null,X1=async f=>(await pn(),localStorage.setItem("motus_profile",JSON.stringify(f)),{data:f,error:null}),Y1=async()=>{await pn();{const f=localStorage.getItem("motus_profile");return{data:f?JSON.parse(f):null,error:null}}},Z1=async f=>(await pn(),localStorage.setItem("motus_program",JSON.stringify(f)),{data:f,error:null}),K1=async()=>{await pn();{const f=localStorage.getItem("motus_program");return{data:f?JSON.parse(f):null,error:null}}},q1=async f=>(await pn(),localStorage.setItem("motus_meals",JSON.stringify(f)),{data:f,error:null}),Q1=async()=>{await pn();{const f=localStorage.getItem("motus_meals");return{data:f?JSON.parse(f):[],error:null}}},$1=async f=>(await pn(),localStorage.setItem("motus_workouts",JSON.stringify(f)),{data:f,error:null}),J1=async()=>{await pn();{const f=localStorage.getItem("motus_workouts");return{data:f?JSON.parse(f):[],error:null}}},eh=async()=>{await pn()},Xd=async f=>(await pn(),localStorage.setItem("motus_subscription",JSON.stringify(f)),{data:f,error:null}),Ic=async()=>{await pn();{const f=localStorage.getItem("motus_subscription");return{data:f?JSON.parse(f):null,error:null}}},Yd=async()=>(await pn(),{data:[],error:null}),th=async(f,m)=>({data:null,error:new Error("Supabase not configured")}),E0=we.createContext(null);function rh({children:f}){const{user:m,isAuthenticated:x}=Bc(),[b,C]=we.useState(null),[w,k]=we.useState([]),[M,R]=we.useState(!0),N=localStorage.getItem("motus_bypass_paywall")==="true"||localStorage.getItem("motus_tylers_friend")==="true"||!1,O=we.useCallback(()=>{if(N)return!0;if(!b)return!1;const Q=new Date,xe=b.current_period_end?new Date(b.current_period_end):null;return b.status==="active"&&b.subscription_type==="paid"?!xe||Q<xe:b.status==="referral"||b.status==="active"?xe&&Q<xe:!1},[b,N]);we.useEffect(()=>{(async()=>{if(!x||!m){C(null),k([]),R(!1);return}R(!0);try{const{data:xe}=await Ic();C(xe);const{data:oe}=await Yd();k(oe||[])}catch(xe){console.error("Error loading subscription:",xe)}R(!1)})()},[x,m]);const _=we.useCallback(async()=>{if(!x||!m)return null;const{data:Q}=await Ic();if(Q)return C(Q),Q;const xe={status:"trial",subscription_type:null,referral_count:0,created_at:new Date().toISOString()},{data:oe,error:Y}=await Xd(xe);return!Y&&oe?(C(oe),oe):null},[x,m]),$=we.useCallback(async Q=>{const xe={...b,status:"active",subscription_type:"paid",stripe_customer_id:Q.customerId,stripe_subscription_id:Q.subscriptionId,current_period_start:new Date().toISOString(),current_period_end:Q.currentPeriodEnd,updated_at:new Date().toISOString()},{data:oe,error:Y}=await Xd(xe);return!Y&&oe?(C(oe),oe):null},[b]),Z=we.useCallback(async(Q,xe)=>{const{data:oe,error:Y}=await th();if(!Y){const{data:me}=await Ic();C(me);const{data:ce}=await Yd();k(ce||[])}return{data:oe,error:Y}},[]),G=b?.referral_count||0,X=b?.referral_code||null,le=Math.max(0,3-G),de=we.useCallback(()=>{if(!b||b.subscription_type!=="referral")return!1;const Q=b.current_period_end?new Date(b.current_period_end):null;return Q&&new Date<Q},[b]),ue=we.useCallback(()=>{localStorage.setItem("motus_tylers_friend","true"),window.location.reload()},[]),ne={subscription:b,referrals:w,loading:M,isSubscribed:O(),bypassPaywall:N,referralCount:G,referralCode:X,referralsNeeded:le,isReferralActive:de(),initializeSubscription:_,activatePaidSubscription:$,processReferralCompletion:Z,activateTylersFriend:ue};return i.jsx(E0.Provider,{value:ne,children:f})}function S0(){const f=we.useContext(E0);if(!f)throw new Error("useSubscription must be used within a SubscriptionProvider");return f}var nh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const sh=f=>f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Je=(f,m)=>{const x=we.forwardRef(({color:b="currentColor",size:C=24,strokeWidth:w=2,absoluteStrokeWidth:k,className:M="",children:R,...N},O)=>we.createElement("svg",{ref:O,...nh,width:C,height:C,stroke:b,strokeWidth:k?Number(w)*24/Number(C):w,className:["lucide",`lucide-${sh(f)}`,M].join(" "),...N},[...m.map(([_,$])=>we.createElement(_,$)),...Array.isArray(R)?R:[R]]));return x.displayName=`${f}`,x};const ih=Je("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const ql=Je("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const A0=Je("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const ah=Je("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);const Zd=Je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const lh=Je("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);const Lc=Je("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const oh=Je("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);const k0=Je("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);const ch=Je("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const js=Je("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const I0=Je("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const Fn=Je("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Li=Je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Fc=Je("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Da=Je("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const ni=Je("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const uh=Je("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const dh=Je("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Uc=Je("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const hh=Je("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const Ql=Je("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const si=Je("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);const Ui=Je("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const T0=Je("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);const fh=Je("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const xh=Je("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const j0=Je("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Kd=Je("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const mh=Je("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const _c=Je("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const R0=Je("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const gh=Je("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const ph=Je("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);const qd=Je("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const Wi=Je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const yh=Je("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const wh=Je("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const _0=Je("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Mc=Je("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const bh=Je("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const vh=Je("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const Wc=Je("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const In=Je("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Pa=Je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Rs=Je("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const M0=Je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Nh=Je("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const ii=Je("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);const Ba=Je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Ts=Je("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Ch=[{icon:k0,title:"Intelligent Programming",description:"Periodized training blocks built from proven methodologies. Auto-regulated progression based on your actual performance data."},{icon:In,title:"Sport-Specific Periodization",description:"Whether you're peaking for a meet, racing a marathon, or training for a triathlonyour mesocycles are structured for your event."},{icon:ii,title:"Performance Nutrition",description:"Macros calibrated to your training load and body composition goals. Nutrient timing aligned with your session schedule."},{icon:Rs,title:"Progressive Overload Engine",description:"Systematic volume and intensity progression with strategic deloads. No guesswork, no stalled progress."},{icon:ih,title:"Session Tracking",description:"Log sets, reps, RPE, and actual loads. Track deviations from prescribed work to inform future programming."},{icon:Lc,title:"Performance Analytics",description:"Volume load trends, strength curve analysis, and training density metrics. Data-driven decisions, not guesswork."}];function Eh({onGetStarted:f}){return i.jsxs("div",{className:"min-h-screen bg-dark-950 text-white overflow-x-hidden",children:[i.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-dark-950/80 backdrop-blur-lg border-b border-dark-800",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-accent-primary to-accent-primaryHover rounded-xl flex items-center justify-center",children:i.jsx(Ts,{className:"w-6 h-6 text-dark-950"})}),i.jsx("span",{className:"text-2xl font-display font-bold tracking-tight",children:"MOTUS"})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[i.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors",children:"Features"}),i.jsx("a",{href:"#how-it-works",className:"text-gray-400 hover:text-white transition-colors",children:"How It Works"}),i.jsx("a",{href:"#programs",className:"text-gray-400 hover:text-white transition-colors",children:"Programs"})]}),i.jsx("button",{onClick:f,className:"px-5 py-2.5 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-semibold rounded-lg transition-all hover:scale-105",children:"Get Started"})]})}),i.jsxs("section",{className:"relative min-h-screen flex items-center justify-center pt-20 overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-dark-950 via-dark-900 to-dark-950"}),i.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-accent-primary/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent-secondary/10 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute inset-0 opacity-5",children:i.jsx("div",{className:"h-full w-full",style:{backgroundImage:"linear-gradient(rgba(212,168,83,0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(212,168,83,0.3) 1px, transparent 1px)",backgroundSize:"50px 50px"}})}),i.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 text-center",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-accent-primary/10 border border-accent-primary/30 rounded-full mb-8",children:[i.jsx(Ts,{className:"w-4 h-4 text-accent-primary"}),i.jsx("span",{className:"text-sm text-accent-primary font-medium",children:"Periodized Training + Precision Nutrition"})]}),i.jsxs("h1",{className:"text-5xl md:text-7xl lg:text-8xl font-display font-bold tracking-tight mb-6",children:[i.jsx("span",{className:"block",children:"TRAIN WITH"}),i.jsx("span",{className:"block bg-gradient-to-r from-accent-primary via-accent-primaryHover to-accent-secondary bg-clip-text text-transparent",children:"INTENT."})]}),i.jsxs("p",{className:"text-xl md:text-2xl text-gray-400 max-w-3xl mx-auto mb-10 leading-relaxed",children:["Structured programming for serious athletes. ",i.jsx("span",{className:"text-white font-medium",children:"Periodized workouts"}),","," ",i.jsx("span",{className:"text-white font-medium",children:"calibrated nutrition"}),", and"," ",i.jsx("span",{className:"text-white font-medium",children:"intelligent progression"}),"all in one platform."]}),i.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-16",children:i.jsxs("button",{onClick:f,className:"group px-8 py-4 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-bold text-lg rounded-xl transition-all hover:scale-105 flex items-center gap-2 shadow-lg shadow-accent-primary/25",children:["Build Your Program",i.jsx(Zd,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[i.jsx(mh,{className:"w-5 h-5 text-accent-primary"}),i.jsx("span",{children:"Mesocycle-based periodization"})]}),i.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[i.jsx(Uc,{className:"w-5 h-5 text-accent-primary"}),i.jsx("span",{children:"Auto-regulated deloads"})]}),i.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[i.jsx(vh,{className:"w-5 h-5 text-accent-primary"}),i.jsx("span",{children:"Research-backed protocols"})]})]})]}),i.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce",children:i.jsx("div",{className:"w-6 h-10 border-2 border-gray-600 rounded-full flex items-start justify-center p-2",children:i.jsx("div",{className:"w-1.5 h-3 bg-accent-primary rounded-full animate-pulse"})})})]}),i.jsx("section",{className:"py-24 bg-dark-900",children:i.jsx("div",{className:"max-w-7xl mx-auto px-6",children:i.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center",children:[i.jsxs("div",{children:[i.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["You Know What You're Doing. ",i.jsx("span",{className:"text-accent-danger",children:"Your Tools Should Too."})]}),i.jsxs("div",{className:"space-y-4 text-gray-400",children:[i.jsxs("p",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Generic apps that don't understand periodization or peaking"]}),i.jsxs("p",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Nutrition trackers disconnected from your training load"]}),i.jsxs("p",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-accent-danger mt-1",children:""}),"No intelligent programmingjust random workouts"]}),i.jsxs("p",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Fragmented tools that don't talk to each other"]})]})]}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["MOTUS Gets It. ",i.jsx("span",{className:"text-accent-success",children:"Built for Athletes."})]}),i.jsxs("div",{className:"space-y-4 text-gray-400",children:[i.jsxs("p",{className:"flex items-start gap-3",children:[i.jsx(Fn,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Proper periodization with base, build, peak, and taper phases"})]}),i.jsxs("p",{className:"flex items-start gap-3",children:[i.jsx(Fn,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Nutrition that scales with your training volume and intensity"})]}),i.jsxs("p",{className:"flex items-start gap-3",children:[i.jsx(Fn,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"Progressive overload with strategic deload weeks built in"})]}),i.jsxs("p",{className:"flex items-start gap-3",children:[i.jsx(Fn,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),i.jsx("span",{children:"One integrated platformworkouts, nutrition, and tracking"})]})]})]})]})})}),i.jsx("section",{id:"features",className:"py-24 bg-dark-950",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Built for ",i.jsx("span",{className:"text-accent-primary",children:"Performance"})]}),i.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Every feature designed around how serious athletes actually train."})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ch.map((m,x)=>i.jsxs("div",{className:"group p-6 bg-dark-900 border border-dark-700 rounded-2xl hover:border-accent-primary/50 transition-all hover:-translate-y-1",children:[i.jsx("div",{className:"w-12 h-12 bg-accent-primary/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-accent-primary/20 transition-colors",children:i.jsx(m.icon,{className:"w-6 h-6 text-accent-primary"})}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:m.title}),i.jsx("p",{className:"text-gray-400",children:m.description})]},x))})]})}),i.jsx("section",{id:"how-it-works",className:"py-24 bg-dark-900",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Setup in ",i.jsx("span",{className:"text-accent-primary",children:"5 Minutes"})]}),i.jsx("p",{className:"text-xl text-gray-400",children:"Input your data. Get your program. Start training."})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{step:"01",title:"Define Your Goal",description:"Select your primary focusstrength, endurance, hypertrophy, or triathlon. Set your target event or timeline.",icon:In},{step:"02",title:"Input Your Baseline",description:"Current lifts, recent race times, training history. We need real numbers to build a real program.",icon:k0},{step:"03",title:"Execute & Track",description:"Follow your periodized program. Log your sessions. Let the system adjust based on your actual performance.",icon:Rs}].map((m,x)=>i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"text-7xl font-display font-bold text-dark-800 absolute -top-4 -left-2",children:m.step}),i.jsxs("div",{className:"relative bg-dark-800 border border-dark-700 rounded-2xl p-6 pt-12",children:[i.jsx("div",{className:"w-14 h-14 bg-accent-primary rounded-xl flex items-center justify-center mb-4",children:i.jsx(m.icon,{className:"w-7 h-7 text-dark-950"})}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:m.title}),i.jsx("p",{className:"text-gray-400",children:m.description})]}),x<2&&i.jsx("div",{className:"hidden md:block absolute top-1/2 -right-4 transform -translate-y-1/2",children:i.jsx(ni,{className:"w-8 h-8 text-dark-600"})})]},x))})]})}),i.jsx("section",{id:"programs",className:"py-24 bg-dark-950",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[i.jsxs("div",{className:"text-center mb-16",children:[i.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Specialized ",i.jsx("span",{className:"text-accent-primary",children:"Programming"})]}),i.jsx("p",{className:"text-xl text-gray-400",children:"Structured training systems for your discipline"})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"Strength",subtitle:"Powerlifting & Strength Sport",description:"Periodized programming for squat, bench, and deadlift. Volume blocks, intensity blocks, and peaking protocols.",icon:"",color:"from-red-500/20 to-orange-500/20",border:"border-red-500/30"},{title:"Endurance",subtitle:"Running & Cycling",description:"5K to marathon and beyond. Pace-based training zones, mileage progression, and taper protocols.",icon:"",color:"from-blue-500/20 to-cyan-500/20",border:"border-blue-500/30"},{title:"Hypertrophy",subtitle:"Bodybuilding & Physique",description:"Volume-driven programming for muscle development. Progressive overload with strategic deloads.",icon:"",color:"from-purple-500/20 to-pink-500/20",border:"border-purple-500/30"},{title:"Triathlon",subtitle:"Swim  Bike  Run",description:"Multi-sport periodization with brick workouts and double days. Injury-prevention strength work built in.",icon:"",color:"from-accent-primary/20 to-yellow-500/20",border:"border-accent-primary/30"}].map((m,x)=>i.jsxs("div",{className:`p-6 rounded-2xl bg-gradient-to-br ${m.color} border ${m.border} hover:scale-105 transition-transform cursor-pointer`,children:[i.jsx("span",{className:"text-4xl mb-4 block",children:m.icon}),i.jsx("h3",{className:"text-xl font-bold mb-1",children:m.title}),i.jsx("p",{className:"text-accent-primary text-sm font-medium mb-3",children:m.subtitle}),i.jsx("p",{className:"text-gray-400 text-sm",children:m.description})]},x))})]})}),i.jsxs("section",{className:"py-24 bg-dark-900 relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent-primary/5 via-transparent to-accent-secondary/5"}),i.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-px bg-gradient-to-r from-transparent via-accent-primary/50 to-transparent"}),i.jsxs("div",{className:"relative max-w-4xl mx-auto px-6 text-center",children:[i.jsxs("h2",{className:"text-4xl md:text-6xl font-display font-bold mb-6",children:["Stop Guessing. ",i.jsx("span",{className:"text-accent-primary",children:"Start Training."})]}),i.jsx("p",{className:"text-xl text-gray-400 mb-10 max-w-2xl mx-auto",children:"Your personalized program is 5 minutes away."}),i.jsxs("button",{onClick:f,className:"group px-10 py-5 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-bold text-xl rounded-xl transition-all hover:scale-105 flex items-center gap-3 mx-auto shadow-lg shadow-accent-primary/25",children:["Build My Program",i.jsx(Zd,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]})]})]}),i.jsx("footer",{className:"py-12 bg-dark-950 border-t border-dark-800",children:i.jsx("div",{className:"max-w-7xl mx-auto px-6",children:i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-accent-primary to-accent-primaryHover rounded-lg flex items-center justify-center",children:i.jsx(Ts,{className:"w-5 h-5 text-dark-950"})}),i.jsx("span",{className:"text-xl font-display font-bold",children:"MOTUS"})]}),i.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[i.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacy"}),i.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Terms"}),i.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Contact"})]}),i.jsx("p",{className:"text-sm text-gray-500",children:" 2024 MOTUS. Train With Intent."})]})})})]})}const Sh={primary:"bg-accent-primary hover:bg-accent-primaryHover active:bg-accent-primaryMuted text-dark-900 font-semibold shadow-sm",secondary:"bg-dark-700 hover:bg-dark-600 text-white border border-dark-500 hover:border-dark-400",ghost:"bg-transparent hover:bg-dark-800 text-text-secondary hover:text-white",danger:"bg-accent-danger hover:bg-red-500 text-white",success:"bg-accent-success hover:bg-green-500 text-dark-900 font-semibold",outline:"bg-transparent border-2 border-accent-primary text-accent-primary hover:bg-accent-primary hover:text-dark-900"},Ah={sm:"px-3 py-1.5 text-sm rounded-md",md:"px-5 py-2.5 text-sm rounded-lg",lg:"px-6 py-3 text-base rounded-lg",xl:"px-8 py-4 text-lg rounded-xl"};function Qt({children:f,variant:m="primary",size:x="md",disabled:b=!1,fullWidth:C=!1,onClick:w,type:k="button",className:M="",icon:R,iconPosition:N="left",...O}){return i.jsxs("button",{type:k,onClick:w,disabled:b,className:`
        ${Sh[m]}
        ${Ah[x]}
        ${C?"w-full":""}
        ${b?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        font-medium tracking-wide
        transition-all duration-200
        focus:outline-none focus:ring-2 focus:ring-accent-primary/50 focus:ring-offset-2 focus:ring-offset-dark-900
        inline-flex items-center justify-center gap-2
        ${M}
      `,...O,children:[R&&N==="left"&&i.jsx("span",{className:"flex-shrink-0",children:R}),f,R&&N==="right"&&i.jsx("span",{className:"flex-shrink-0",children:R})]})}function Vt({children:f,className:m="",hover:x=!1,onClick:b,variant:C="default",padding:w=!0}){const k="rounded-xl transition-all duration-300",M={default:"bg-dark-800 border border-dark-600",elevated:"bg-dark-800 border border-dark-600 shadow-lg shadow-black/20",outlined:"bg-transparent border border-dark-500",solid:"bg-dark-700"},R=x?"hover:border-dark-400 hover:shadow-gold cursor-pointer":"";return i.jsx("div",{onClick:b,className:`
        ${k}
        ${M[C]}
        ${R}
        ${m}
      `,children:f})}function Xt({children:f,className:m=""}){return i.jsx("div",{className:`p-6 ${m}`,children:f})}function kh({label:f,type:m="text",value:x,onChange:b,placeholder:C,error:w,helper:k,disabled:M=!1,className:R="",size:N="md",...O}){const _={sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-base",lg:"px-5 py-4 text-lg"};return i.jsxs("div",{className:`space-y-2 ${R}`,children:[f&&i.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:f}),i.jsx("input",{type:m,value:x,onChange:b,placeholder:C,disabled:M,className:`
          w-full ${_[N]}
          bg-dark-700 border rounded-lg
          text-white placeholder-dark-400
          focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary
          hover:border-dark-400
          transition-colors duration-200
          ${w?"border-accent-danger focus:border-accent-danger focus:ring-accent-danger":"border-dark-600"}
          ${M?"opacity-50 cursor-not-allowed bg-dark-800":""}
        `,...O}),w&&i.jsxs("p",{className:"text-sm text-accent-danger flex items-center gap-1",children:[i.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),w]}),k&&!w&&i.jsx("p",{className:"text-sm text-text-muted",children:k})]})}function Kl({isOpen:f,onClose:m,title:x,children:b,size:C="md",showClose:w=!0}){const k=we.useRef(null),M={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[90vw]"};return we.useEffect(()=>{const R=N=>{N.key==="Escape"&&m()};return f&&(document.addEventListener("keydown",R),document.body.style.overflow="hidden",k.current?.focus()),()=>{document.removeEventListener("keydown",R),document.body.style.overflow="unset"}},[f,m]),f?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[i.jsx("div",{className:"absolute inset-0 bg-dark-950/80 backdrop-blur-sm",onClick:m}),i.jsxs("div",{ref:k,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",tabIndex:-1,className:`
          relative w-full ${M[C]}
          bg-dark-800 rounded-2xl
          border border-dark-600
          shadow-2xl shadow-black/50
          animate-in fade-in zoom-in-95 duration-200
        `,children:[i.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-dark-600",children:[i.jsx("h2",{id:"modal-title",className:"text-xl font-semibold text-white tracking-tight",children:x}),w&&i.jsx("button",{onClick:m,className:"p-2 rounded-lg text-dark-400 hover:text-white hover:bg-dark-700 transition-colors","aria-label":"Close modal",children:i.jsx(Ba,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"px-6 py-5 max-h-[70vh] overflow-y-auto",children:b})]})]}):null}function Fi({value:f,max:m=100,color:x="primary",showLabel:b=!1,size:C="md",className:w=""}){const k=Math.min(Math.max(f/m*100,0),100),M={primary:"bg-accent-primary",secondary:"bg-text-secondary",success:"bg-accent-success",warning:"bg-accent-warning",danger:"bg-accent-danger",gold:"bg-gradient-to-r from-accent-primaryMuted via-accent-primary to-accent-primaryHover"},R={xs:"h-1",sm:"h-1.5",md:"h-2",lg:"h-3",xl:"h-4"};return i.jsxs("div",{className:`w-full ${w}`,children:[i.jsx("div",{className:`w-full bg-dark-700 rounded-full ${R[C]} overflow-hidden`,children:i.jsx("div",{className:`${M[x]} ${R[C]} rounded-full transition-all duration-500 ease-out`,style:{width:`${k}%`}})}),b&&i.jsxs("div",{className:"flex justify-between mt-1.5 text-sm",children:[i.jsx("span",{className:"text-text-secondary",children:f}),i.jsx("span",{className:"text-text-muted",children:m})]})]})}const Ih=[{id:"dashboard",label:"Home",icon:xh,requiresSubscription:!1},{id:"program",label:"Program",icon:js,requiresSubscription:!0},{id:"nutrition",label:"Nutrition",icon:ii,requiresSubscription:!0},{id:"stats",label:"Stats",icon:Lc,requiresSubscription:!0},{id:"profile",label:"Profile",icon:M0,requiresSubscription:!1}];function Th({activeTab:f,onChange:m,isSubscribed:x=!0}){return i.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-dark-900/95 backdrop-blur-md border-t border-dark-700 px-2 pt-2 z-50",style:{paddingBottom:"max(0.5rem, env(safe-area-inset-bottom))"},children:i.jsx("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:Ih.map(b=>{const C=f===b.id,w=!x&&b.requiresSubscription,k=b.icon;return i.jsxs("button",{onClick:()=>m(b.id),className:`
                flex flex-col items-center px-4 py-2 rounded-xl transition-all duration-200 relative
                ${C?"text-accent-primary":w?"text-dark-500":"text-dark-400 hover:text-text-secondary"}
              `,children:[i.jsxs("div",{className:`
                relative p-1.5 rounded-lg transition-all duration-200
                ${C?"bg-accent-primary/10":""}
              `,children:[i.jsx(k,{className:`w-5 h-5 ${C?"stroke-[2.5]":"stroke-[1.5]"} ${w?"opacity-50":""}`}),C&&!w&&i.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-accent-primary rounded-full"}),w&&i.jsx("div",{className:"absolute -top-1 -right-1 w-3.5 h-3.5 bg-dark-600 rounded-full flex items-center justify-center border border-dark-500",children:i.jsx(R0,{className:"w-2 h-2 text-accent-warning"})})]}),i.jsx("span",{className:`text-xs mt-1 ${C?"font-semibold":"font-medium"} ${w?"opacity-50":""}`,children:b.label})]},b.id)})})})}function jh({profile:f,program:m,meals:x,workouts:b,todaysMeals:C,todaysWorkouts:w}){const k=()=>{let de=null;if(f?.raceDate?de=new Date(f.raceDate):f?.aestheticGoalDate?de=new Date(f.aestheticGoalDate):f?.targetDate&&(de=new Date(f.targetDate)),de){const ne=de-new Date,Q=Math.ceil(ne/(1e3*60*60*24));return Q>0?Q:null}return null},M=()=>{const de=k(),ue=f?.programType||m?.primaryGoal,ne=f?.programSubtype||m?.primarySubtype,Q=m?.currentPhase||"Base",xe=m?.currentWeek||1,oe=m?.mesocycleWeeks||5;if(ue==="endurance"){if(ne==="marathon"||ne==="running"){const me=f?.raceDistance||"race";return de?`Your ${me} is ${de} days away! Every run gets you closer to the finish line. `:"Building your aerobic base. Consistency beats intensity at this stage!"}return ne==="triathlon"?de?`${de} days until race day! Swim, bike, run - you've got this! `:"Training all three disciplines builds an unstoppable athlete.":"Endurance is built one workout at a time. Keep moving forward!"}if(ue==="strength"){const me=f?.strengthGoals?.filter(ce=>ce.target)||[];return me.length>0?`${me.length} lift targets set. Progressive overload is your path to strength! `:`${Q} phase - building the foundation for serious strength gains.`}if(ue==="aesthetic"){const me=f?.targetBodyFat;return me?`Working toward ${me}% body fat. Trust the process - gains take time! `:"Sculpting takes patience. Your dedication will pay off!"}if(ue==="fatloss"){const me=f?.targetWeight;return me?`On track to ${me} ${f?.weightUnit||"lbs"}. Small daily wins add up! `:"Fat loss is a marathon, not a sprint. Stay consistent!"}return{Base:`Building your foundation in the ${Q} phase. This sets you up for success!`,Build:`${Q} phase - time to push your limits and grow stronger!`,Peak:`${Q} phase - you're at your strongest. Time to perform!`,Deload:"Recovery week - your body adapts and grows during rest. Embrace it!"}[Q]||`Week ${xe} of ${oe} - keep showing up!`},R=()=>{const de=new Date().getDay()||7,ue=m?.weeklySchedule?.find(oe=>oe.day===de),ne=ue?.isRestDay,Q=ue?.sessions||[],xe=w?.length||0;return{isRestDay:ne,totalSessions:Q.length,completedSessions:xe,sessionNames:Q.map(oe=>oe.focus).join(" + ")}},N=()=>{const de=m?.daysPerWeek||f?.desiredTrainingDays||4,ue=new Date,ne=new Date(ue);ne.setDate(ue.getDate()-ue.getDay()+1);const Q=b?.filter(xe=>{const oe=new Date(xe.loggedAt||xe.completedAt);return oe>=ne&&oe<=ue})||[];return{completed:Q.length,target:de,percentage:Math.min(Q.length/de*100,100)}},O=()=>{const de=f?.macros?.calories||f?.tdee||2e3,ue=C?.reduce((xe,oe)=>xe+(oe.calories||0),0)||0,ne=de-ue,Q=ue/de*100;return{consumed:ue,target:de,remaining:Math.max(ne,0),percentOfTarget:Q,mealsLogged:C?.length||0}},_=()=>{const de=m?.currentWeek||1,ue=m?.mesocycleWeeks||5;return{currentWeek:de,totalWeeks:ue,percentage:de/ue*100,phase:m?.currentPhase||"Base"}},$=k(),Z=R(),G=N(),X=O(),le=_();return i.jsxs("div",{className:"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden",children:[i.jsx("div",{className:"px-4 py-3 border-b border-dark-600",children:i.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[i.jsx(In,{className:"w-5 h-5 text-accent-primary"}),"Daily Summary"]})}),i.jsxs("div",{className:"mx-4 mt-4 p-4 rounded-lg bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30",children:[$&&i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(js,{className:"w-5 h-5 text-accent-primary"}),i.jsx("span",{className:"text-2xl font-bold text-white",children:$}),i.jsx("span",{className:"text-gray-300",children:"days to go"})]}),i.jsx("p",{className:"text-sm text-gray-200",children:M()})]}),i.jsxs("div",{className:"mx-4 mt-4 p-3 rounded-lg bg-dark-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(si,{className:"w-5 h-5 text-accent-secondary"}),i.jsx("span",{className:"text-white font-medium",children:"Today"})]}),Z.isRestDay?i.jsx("span",{className:"text-gray-400",children:" Rest Day"}):i.jsxs("span",{className:"text-gray-300",children:[Z.completedSessions,"/",Z.totalSessions," sessions"]})]}),!Z.isRestDay&&Z.sessionNames&&i.jsx("p",{className:"text-sm text-gray-400 mt-1 ml-7",children:Z.sessionNames})]}),i.jsxs("div",{className:"p-4 space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[i.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[i.jsx(Rs,{className:"w-4 h-4"}),"This Week"]}),i.jsxs("span",{className:"text-white font-medium",children:[G.completed,"/",G.target," workouts"]})]}),i.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full rounded-full transition-all duration-500 bg-accent-primary",style:{width:`${G.percentage}%`}})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[i.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[i.jsx(ii,{className:"w-4 h-4"}),"Calories Today"]}),i.jsxs("span",{className:`font-medium ${X.percentOfTarget>100?"text-orange-400":"text-green-400"}`,children:[X.consumed.toLocaleString()," / ",X.target.toLocaleString()]})]}),i.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${X.percentOfTarget<=100?"bg-green-500":"bg-orange-500"}`,style:{width:`${Math.min(X.percentOfTarget,100)}%`}})}),X.remaining>0&&i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[X.remaining," kcal remaining"]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[i.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[i.jsx(Ui,{className:"w-4 h-4"}),le.phase," Phase"]}),i.jsxs("span",{className:"text-white font-medium",children:["Week ",le.currentWeek," of ",le.totalWeeks]})]}),i.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-accent-secondary rounded-full transition-all duration-500",style:{width:`${le.percentage}%`}})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[i.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-white",children:b?.length||0}),i.jsx("p",{className:"text-xs text-gray-400",children:"Total Workouts"})]}),i.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-white",children:x?.length||0}),i.jsx("p",{className:"text-xs text-gray-400",children:"Meals Logged"})]})]})]})]})}function Rh({profile:f,program:m}){const[x,b]=we.useState(!0);if(!m)return null;const{name:C,description:w,totalWeeks:k,currentWeek:M,currentPhase:R,phases:N,athleteLevel:O,daysPerWeek:_,paces:$,baseline:Z,progressionRules:G,primaryGoal:X,primarySubtype:le,secondaryGoal:de,isHybrid:ue,allowDoubleDays:ne,weeksUntilGoal:Q}=m,xe=()=>{if(!N||N.length===0)return[];const te=[];let K=null;return N.forEach((ge,B)=>{const ye=B+1;!K||K.name!==ge?(K&&te.push(K),K={name:ge,startWeek:ye,endWeek:ye,weeks:1}):(K.endWeek=ye,K.weeks++)}),K&&te.push(K),te},oe=te=>{const K={Base:{focus:"Building aerobic foundation & movement patterns",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Increasing volume & introducing intensity",intensity:"Moderate",icon:""},"Build 2":{focus:"Peak volume & race-specific workouts",intensity:"Moderate-High",icon:""},Build:{focus:"Increasing mileage & race-specific workouts",intensity:"Moderate-High",icon:""},Peak:{focus:"Sharpening fitness & race simulation",intensity:"High",icon:""},Taper:{focus:"Reducing volume for race readiness",intensity:"Low (recovery)",icon:""},Deload:{focus:"Active recovery & adaptation",intensity:"Low",icon:""}},ge={Base:{focus:"Building movement patterns & work capacity",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Progressive overload & strength gains",intensity:"Moderate",icon:""},"Build 2":{focus:"Heavy singles & competition prep",intensity:"Moderate-High",icon:""},Build:{focus:"Progressive overload & strength gains",intensity:"Moderate-High",icon:""},Peak:{focus:"Testing maxes & competition preparation",intensity:"High",icon:""},Taper:{focus:"Reducing volume for max strength",intensity:"Low (maintain)",icon:""},Deload:{focus:"Active recovery & CNS restoration",intensity:"Low",icon:""}},B={Base:{focus:"Building mind-muscle connection & form",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Increasing volume & hypertrophy",intensity:"Moderate",icon:""},"Build 2":{focus:"Peak volume & maximum pump",intensity:"Moderate-High",icon:""},Build:{focus:"Progressive overload & muscle building",intensity:"Moderate-High",icon:""},Peak:{focus:"Maximum intensity & muscle definition",intensity:"High",icon:""},Taper:{focus:"Reducing fatigue for peak aesthetics",intensity:"Low (maintain)",icon:""},Deload:{focus:"Active recovery & muscle repair",intensity:"Low",icon:""}};let ye;return X==="endurance"?ye=K:X==="strength"?ye=ge:X==="aesthetic"?ye=B:ye=ge,ye[te]||{focus:"Training adaptation",intensity:"Moderate",icon:""}},Y=()=>{if(X!=="endurance"||!Z?.endurance)return null;const te=Z.endurance.currentMileage||20,K=O==="elite"?60:O==="advanced"?50:40,ge=[];let B=te;for(let ye=1;ye<=k;ye++)(ye===1||ye===Math.floor(k*.25)||ye===Math.floor(k*.5)||ye===Math.floor(k*.75)||ye===k-2||ye===k)&&ge.push({week:ye,mileage:Math.round(B)}),B=Math.min(B*1.05,K);return{starting:te,peak:K,milestones:ge}},me=()=>{const K=(m.weeklySchedule||[]).filter(B=>!B.isRestDay),ge=K.reduce((B,ye)=>B+(ye.sessions?.reduce((fe,he)=>fe+(he.exercises?.length||0),0)||0),0);return{workoutDays:K.length,totalExercises:ge,avgExercisesPerDay:Math.round(ge/Math.max(K.length,1))}},ce=xe(),ke=Y(),Ge=me();return i.jsxs("div",{className:"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden",children:[i.jsxs("button",{onClick:()=>b(!x),className:"w-full px-4 py-3 border-b border-dark-600 flex items-center justify-between hover:bg-dark-700 transition-colors",children:[i.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[i.jsx(lh,{className:"w-5 h-5 text-accent-primary"}),"Program Overview"]}),x?i.jsx(uh,{className:"w-5 h-5 text-gray-400"}):i.jsx(Fc,{className:"w-5 h-5 text-gray-400"})]}),x&&i.jsxs("div",{className:"p-4 space-y-5",children:[i.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30",children:[i.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:C}),i.jsx("p",{className:"text-sm text-gray-300",children:w}),i.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-xs",children:[i.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-full text-gray-300",children:[k," weeks"]}),i.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-full text-gray-300",children:[_," days/week"]}),i.jsxs("span",{className:"px-2 py-1 bg-accent-primary/30 rounded-full text-accent-primary",children:[O," level"]}),Q&&i.jsxs("span",{className:"px-2 py-1 bg-accent-secondary/30 rounded-full text-accent-secondary",children:[Q," weeks to race"]})]})]}),(ue||le==="triathlon")&&i.jsxs("div",{className:"p-4 rounded-lg bg-dark-700 border border-dark-500",children:[i.jsxs("h5",{className:"text-sm font-medium text-white mb-3 flex items-center gap-2",children:[le==="triathlon"?"":"",le==="triathlon"?"Triathlon Training Structure":"Hybrid Program Structure"]}),i.jsx("div",{className:"space-y-3 text-sm",children:le==="triathlon"?i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"text-gray-300",children:["This program combines ",i.jsx("span",{className:"text-cyan-400 font-medium",children:"swim"}),","," ",i.jsx("span",{className:"text-orange-400 font-medium",children:"bike"}),", and"," ",i.jsx("span",{className:"text-green-400 font-medium",children:"run"})," training with"," ",i.jsx("span",{className:"text-accent-primary font-medium",children:"injury prevention strength"})," work."]}),i.jsxs("ul",{className:"space-y-2 text-gray-400",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-accent-primary",children:""}),i.jsx("span",{children:"3 strength sessions/week (hip stability, core, shoulders)"})]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-accent-primary",children:""}),i.jsx("span",{children:"Double day sessions (AM cardio + PM strength)"})]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-accent-primary",children:""}),i.jsx("span",{children:"Brick workouts for race-day transitions"})]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-accent-primary",children:""}),i.jsx("span",{children:"Periodized build to peak race fitness"})]})]})]}):i.jsxs(i.Fragment,{children:[i.jsxs("p",{className:"text-gray-300",children:["This hybrid program balances ",i.jsx("span",{className:"text-accent-primary font-medium",children:X})," training with ",i.jsx("span",{className:"text-accent-secondary font-medium",children:de})," work for well-rounded athletic development."]}),i.jsxs("ul",{className:"space-y-2 text-gray-400",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-accent-primary",children:""}),i.jsxs("span",{children:["Minimum 3 ",de," sessions strategically placed"]})]}),ne&&i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-accent-primary",children:""}),i.jsx("span",{children:"Double days on recovery/easy training days"})]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-accent-primary",children:""}),i.jsx("span",{children:"Smart scheduling to avoid interference"})]})]})]})})]}),i.jsxs("div",{children:[i.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(js,{className:"w-4 h-4"}),"Training Phases"]}),i.jsx("div",{className:"space-y-2",children:ce.map((te,K)=>{const ge=oe(te.name),B=te.name===R,ye={Base:{border:"border-l-blue-500",bg:"bg-blue-500/5"},Build:{border:"border-l-orange-500",bg:"bg-orange-500/5"},"Build 1":{border:"border-l-orange-500",bg:"bg-orange-500/5"},"Build 2":{border:"border-l-red-500",bg:"bg-red-500/5"},Peak:{border:"border-l-purple-500",bg:"bg-purple-500/5"},Taper:{border:"border-l-cyan-500",bg:"bg-cyan-500/5"},Deload:{border:"border-l-green-500",bg:"bg-green-500/5"}},fe=ye[te.name]||ye.Base,he=()=>{if(te.weeks===1)return`Week ${te.startWeek}`;if(te.weeks<=3){const H=[];for(let U=te.startWeek;U<=te.endWeek;U++)H.push(U);return`Weeks ${H.join(", ")}`}else return`Weeks ${te.startWeek}${te.endWeek}`};return i.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${fe.border} ${B?"bg-accent-primary/20 border border-l-4 border-accent-primary/50":`${fe.bg} border border-dark-600`}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:ge.icon}),i.jsx("span",{className:"font-medium text-white",children:te.name}),B&&i.jsx("span",{className:"text-xs px-2 py-0.5 bg-accent-primary rounded-full text-white",children:"Current"})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("span",{className:"text-xs text-accent-primary font-medium",children:he()}),i.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",te.weeks," ",te.weeks===1?"week":"weeks",")"]})]})]}),i.jsx("p",{className:"text-xs text-gray-400",children:ge.focus}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Intensity: ",ge.intensity]})]},K)})})]}),ke&&i.jsxs("div",{children:[i.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(Rs,{className:"w-4 h-4"}),"Weekly Mileage Progression"]}),i.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Start"}),i.jsx("span",{className:"text-gray-400 text-sm",children:"Peak"})]}),i.jsxs("div",{className:"relative h-8 bg-dark-600 rounded-full overflow-hidden",children:[i.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-accent-primary to-accent-secondary rounded-full",style:{width:`${ke.starting/ke.peak*100}%`}}),i.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-3",children:[i.jsxs("span",{className:"text-xs font-medium text-white",children:[ke.starting," mi"]}),i.jsxs("span",{className:"text-xs font-medium text-white",children:[ke.peak," mi"]})]})]}),i.jsx("div",{className:"mt-3 grid grid-cols-3 gap-2 text-center",children:ke.milestones.slice(0,3).map((te,K)=>i.jsxs("div",{className:"text-xs",children:[i.jsxs("span",{className:"text-gray-500",children:["Wk ",te.week]}),i.jsxs("p",{className:"text-white font-medium",children:[te.mileage," mi"]})]},K))})]})]}),$&&i.jsxs("div",{children:[i.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(Ts,{className:"w-4 h-4"}),"Your Training Paces"]}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{label:"Easy",pace:$.easyPace,zone:"Zone 2"},{label:"Tempo",pace:$.tempoPace,zone:"Zone 3-4"},{label:"Interval",pace:$.intervalPace,zone:"Zone 4-5"},{label:"Long Run",pace:$.longRunPace,zone:"Zone 2"}].map((te,K)=>i.jsxs("div",{className:"p-2 bg-dark-700 rounded-lg",children:[i.jsx("span",{className:"text-xs text-gray-400",children:te.label}),i.jsx("p",{className:"text-sm font-medium text-white",children:te.pace}),i.jsx("span",{className:"text-xs text-gray-500",children:te.zone})]},K))}),$.currentPace&&$.goalPace!==$.currentPace&&i.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Current: ",$.currentPace,"  Goal: ",$.goalPace]})]}),Z?.strength?.lifts?.length>0&&i.jsxs("div",{children:[i.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(si,{className:"w-4 h-4"}),"Your Lift Targets"]}),i.jsx("div",{className:"space-y-2",children:Z.strength.lifts.map((te,K)=>i.jsxs("div",{className:"p-2 bg-dark-700 rounded-lg flex items-center justify-between",children:[i.jsx("span",{className:"text-sm text-white",children:te.exercise}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:"text-sm text-gray-400",children:[te.current1RM,"lbs"]}),i.jsx("span",{className:"text-gray-500 mx-1",children:""}),i.jsxs("span",{className:"text-sm text-accent-secondary font-medium",children:[te.target1RM,"lbs"]})]})]},K))})]}),i.jsxs("div",{children:[i.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(Uc,{className:"w-4 h-4"}),"Weekly Structure"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-white",children:Ge.workoutDays}),i.jsx("p",{className:"text-xs text-gray-400",children:"Workout Days"})]}),i.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-white",children:Ge.totalExercises}),i.jsx("p",{className:"text-xs text-gray-400",children:"Exercises/Week"})]}),i.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[i.jsx("p",{className:"text-2xl font-bold text-white",children:7-Ge.workoutDays}),i.jsx("p",{className:"text-xs text-gray-400",children:"Rest Days"})]})]})]}),i.jsxs("div",{children:[i.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[i.jsx(Fn,{className:"w-4 h-4"}),"Program Principles"]}),i.jsxs("div",{className:"space-y-2",children:[G&&i.jsxs(i.Fragment,{children:[G.mileageIncrease&&i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx(A0,{className:"w-4 h-4 text-accent-warning mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-gray-300",children:G.mileageIncrease})]}),G.strengthIncrease&&i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx(Rs,{className:"w-4 h-4 text-accent-success mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-gray-300",children:G.strengthIncrease})]}),G.deloadProtocol&&i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx(Fn,{className:"w-4 h-4 text-accent-primary mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-gray-300",children:G.deloadProtocol})]})]}),i.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[i.jsx(In,{className:"w-4 h-4 text-accent-secondary mt-0.5 flex-shrink-0"}),i.jsx("span",{className:"text-gray-300",children:"RPE-based intensity to auto-regulate based on daily readiness"})]})]})]})]})]})}var De;(function(f){f[f.QR_CODE=0]="QR_CODE",f[f.AZTEC=1]="AZTEC",f[f.CODABAR=2]="CODABAR",f[f.CODE_39=3]="CODE_39",f[f.CODE_93=4]="CODE_93",f[f.CODE_128=5]="CODE_128",f[f.DATA_MATRIX=6]="DATA_MATRIX",f[f.MAXICODE=7]="MAXICODE",f[f.ITF=8]="ITF",f[f.EAN_13=9]="EAN_13",f[f.EAN_8=10]="EAN_8",f[f.PDF_417=11]="PDF_417",f[f.RSS_14=12]="RSS_14",f[f.RSS_EXPANDED=13]="RSS_EXPANDED",f[f.UPC_A=14]="UPC_A",f[f.UPC_E=15]="UPC_E",f[f.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(De||(De={}));var Qd=new Map([[De.QR_CODE,"QR_CODE"],[De.AZTEC,"AZTEC"],[De.CODABAR,"CODABAR"],[De.CODE_39,"CODE_39"],[De.CODE_93,"CODE_93"],[De.CODE_128,"CODE_128"],[De.DATA_MATRIX,"DATA_MATRIX"],[De.MAXICODE,"MAXICODE"],[De.ITF,"ITF"],[De.EAN_13,"EAN_13"],[De.EAN_8,"EAN_8"],[De.PDF_417,"PDF_417"],[De.RSS_14,"RSS_14"],[De.RSS_EXPANDED,"RSS_EXPANDED"],[De.UPC_A,"UPC_A"],[De.UPC_E,"UPC_E"],[De.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),$d;(function(f){f[f.UNKNOWN=0]="UNKNOWN",f[f.URL=1]="URL"})($d||($d={}));function _h(f){return Object.values(De).includes(f)}var $l;(function(f){f[f.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",f[f.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})($l||($l={}));var Mh=(function(){function f(){}return f.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",f.SCAN_DEFAULT_FPS=2,f.DEFAULT_DISABLE_FLIP=!1,f.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,f.DEFAULT_SUPPORTED_SCAN_TYPE=[$l.SCAN_TYPE_CAMERA,$l.SCAN_TYPE_FILE],f})(),O0=(function(){function f(m,x){this.format=m,this.formatName=x}return f.prototype.toString=function(){return this.formatName},f.create=function(m){if(!Qd.has(m))throw"".concat(m," not in html5QrcodeSupportedFormatsTextMap");return new f(m,Qd.get(m))},f})(),Jd=(function(){function f(){}return f.createFromText=function(m){var x={text:m};return{decodedText:m,result:x}},f.createFromQrcodeResult=function(m){return{decodedText:m.text,result:m}},f})(),Oc;(function(f){f[f.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",f[f.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",f[f.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Oc||(Oc={}));var Oh=(function(){function f(){}return f.createFrom=function(m){return{errorMessage:m,type:Oc.UNKWOWN_ERROR}},f})(),Dh=(function(){function f(m){this.verbose=m}return f.prototype.log=function(m){this.verbose&&console.log(m)},f.prototype.warn=function(m){this.verbose&&console.warn(m)},f.prototype.logError=function(m,x){(this.verbose||x===!0)&&console.error(m)},f.prototype.logErrors=function(m){if(m.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(m)},f})();function es(f){return typeof f>"u"||f===null}var Pi=(function(){function f(){}return f.codeParseError=function(m){return"QR code parse error, error = ".concat(m)},f.errorGettingUserMedia=function(m){return"Error getting userMedia, error = ".concat(m)},f.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},f.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},f.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},f.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},f.scannerPaused=function(){return"Scanner paused"},f})(),D0=(function(){function f(){}return f.isMediaStreamConstraintsValid=function(m,x){if(typeof m!="object"){var b=typeof m;return x.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(b,"."),!0),!1}for(var C=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],w=new Set(C),k=Object.keys(m),M=0,R=k;M<R.length;M++){var N=R[M];if(w.has(N))return x.logError("".concat(N," is not supported videoConstaints."),!0),!1}return!0},f})(),_a={exports:{}},Ph=_a.exports,e0;function Bh(){return e0||(e0=1,(function(f,m){(function(x,b){b(m)})(Ph,(function(x){function b(E){return E==null}var C=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,e){E.__proto__=e}||function(E,e){for(var r in e)e.hasOwnProperty(r)&&(E[r]=e[r])};function w(E,e){C(E,e);function r(){this.constructor=E}E.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function k(E,e){var r=Object.setPrototypeOf;r?r(E,e):E.__proto__=e}function M(E,e){e===void 0&&(e=E.constructor);var r=Error.captureStackTrace;r&&r(E,e)}var R=(function(E){w(e,E);function e(r){var n=this.constructor,a=E.call(this,r)||this;return Object.defineProperty(a,"name",{value:n.name,enumerable:!1}),k(a,n.prototype),M(a),a}return e})(Error);class N extends R{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}N.kind="Exception";class O extends N{}O.kind="ArgumentException";class _ extends N{}_.kind="IllegalArgumentException";class ${constructor(e){if(this.binarizer=e,e===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,r){return this.binarizer.getBlackRow(e,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,r,n,a){const l=this.binarizer.getLuminanceSource().crop(e,r,n,a);return new $(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new $(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new $(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class Z extends N{static getChecksumInstance(){return new Z}}Z.kind="ChecksumException";class G{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class X{static arraycopy(e,r,n,a,l){for(;l--;)n[a++]=e[r++]}static currentTimeMillis(){return Date.now()}}class le extends N{}le.kind="IndexOutOfBoundsException";class de extends le{constructor(e=void 0,r=void 0){super(r),this.index=e,this.message=r}}de.kind="ArrayIndexOutOfBoundsException";class ue{static fill(e,r){for(let n=0,a=e.length;n<a;n++)e[n]=r}static fillWithin(e,r,n,a){ue.rangeCheck(e.length,r,n);for(let l=r;l<n;l++)e[l]=a}static rangeCheck(e,r,n){if(r>n)throw new _("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new de(r);if(n>e)throw new de(n)}static asList(...e){return e}static create(e,r,n){return Array.from({length:e}).map(l=>Array.from({length:r}).fill(n))}static createInt32Array(e,r,n){return Array.from({length:e}).map(l=>Int32Array.from({length:r}).fill(n))}static equals(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(let n=0,a=e.length;n<a;n++)if(e[n]!==r[n])return!1;return!0}static hashCode(e){if(e===null)return 0;let r=1;for(const n of e)r=31*r+n;return r}static fillUint8Array(e,r){for(let n=0;n!==e.length;n++)e[n]=r}static copyOf(e,r){return e.slice(0,r)}static copyOfUint8Array(e,r){if(e.length<=r){const n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)}static copyOfRange(e,r,n){const a=n-r,l=new Int32Array(a);return X.arraycopy(e,r,l,0,a),l}static binarySearch(e,r,n){n===void 0&&(n=ue.numberComparator);let a=0,l=e.length-1;for(;a<=l;){const o=l+a>>1,u=n(r,e[o]);if(u>0)a=o+1;else if(u<0)l=o-1;else return o}return-a-1}static numberComparator(e,r){return e-r}}class ne{static numberOfTrailingZeros(e){let r;if(e===0)return 32;let n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,r){return Math.trunc(e/r)}static parseInt(e,r=void 0){return parseInt(e,r)}}ne.MIN_VALUE_32_BITS=-2147483648,ne.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Q{constructor(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=Q.makeArray(e):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const r=Q.makeArray(e);X.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const r=this.size;if(e>=r)return r;const n=this.bits;let a=Math.floor(e/32),l=n[a];l&=~((1<<(e&31))-1);const o=n.length;for(;l===0;){if(++a===o)return r;l=n[a]}const u=a*32+ne.numberOfTrailingZeros(l);return u>r?r:u}getNextUnset(e){const r=this.size;if(e>=r)return r;const n=this.bits;let a=Math.floor(e/32),l=~n[a];l&=~((1<<(e&31))-1);const o=n.length;for(;l===0;){if(++a===o)return r;l=~n[a]}const u=a*32+ne.numberOfTrailingZeros(l);return u>r?r:u}setBulk(e,r){this.bits[Math.floor(e/32)]=r}setRange(e,r){if(r<e||e<0||r>this.size)throw new _;if(r===e)return;r--;const n=Math.floor(e/32),a=Math.floor(r/32),l=this.bits;for(let o=n;o<=a;o++){const u=o>n?0:e&31,g=(2<<(o<a?31:r&31))-(1<<u);l[o]|=g}}clear(){const e=this.bits.length,r=this.bits;for(let n=0;n<e;n++)r[n]=0}isRange(e,r,n){if(r<e||e<0||r>this.size)throw new _;if(r===e)return!0;r--;const a=Math.floor(e/32),l=Math.floor(r/32),o=this.bits;for(let u=a;u<=l;u++){const h=u>a?0:e&31,v=(2<<(u<l?31:r&31))-(1<<h)&4294967295;if((o[u]&v)!==(n?v:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,r){if(r<0||r>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)}appendBitArray(e){const r=e.size;this.ensureCapacity(this.size+r);for(let n=0;n<r;n++)this.appendBit(e.get(n))}xor(e){if(this.size!==e.size)throw new _("Sizes don't match");const r=this.bits;for(let n=0,a=r.length;n<a;n++)r[n]^=e.bits[n]}toBytes(e,r,n,a){for(let l=0;l<a;l++){let o=0;for(let u=0;u<8;u++)this.get(e)&&(o|=1<<7-u),e++;r[n+l]=o}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,a=this.bits;for(let l=0;l<n;l++){let o=a[l];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[r-l]=o}if(this.size!==n*32){const l=n*32-this.size;let o=e[0]>>>l;for(let u=1;u<n;u++){const h=e[u];o|=h<<32-l,e[u-1]=o,o=h>>>l}e[n-1]=o}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof Q))return!1;const r=e;return this.size===r.size&&ue.equals(this.bits,r.bits)}hashCode(){return 31*this.size+ue.hashCode(this.bits)}toString(){let e="";for(let r=0,n=this.size;r<n;r++)(r&7)===0&&(e+=" "),e+=this.get(r)?"X":".";return e}clone(){return new Q(this.size,this.bits.slice())}}var xe;(function(E){E[E.OTHER=0]="OTHER",E[E.PURE_BARCODE=1]="PURE_BARCODE",E[E.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",E[E.TRY_HARDER=3]="TRY_HARDER",E[E.CHARACTER_SET=4]="CHARACTER_SET",E[E.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",E[E.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",E[E.ASSUME_GS1=7]="ASSUME_GS1",E[E.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",E[E.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",E[E.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(xe||(xe={}));var oe=xe;class Y extends N{static getFormatInstance(){return new Y}}Y.kind="FormatException";var me;(function(E){E[E.Cp437=0]="Cp437",E[E.ISO8859_1=1]="ISO8859_1",E[E.ISO8859_2=2]="ISO8859_2",E[E.ISO8859_3=3]="ISO8859_3",E[E.ISO8859_4=4]="ISO8859_4",E[E.ISO8859_5=5]="ISO8859_5",E[E.ISO8859_6=6]="ISO8859_6",E[E.ISO8859_7=7]="ISO8859_7",E[E.ISO8859_8=8]="ISO8859_8",E[E.ISO8859_9=9]="ISO8859_9",E[E.ISO8859_10=10]="ISO8859_10",E[E.ISO8859_11=11]="ISO8859_11",E[E.ISO8859_13=12]="ISO8859_13",E[E.ISO8859_14=13]="ISO8859_14",E[E.ISO8859_15=14]="ISO8859_15",E[E.ISO8859_16=15]="ISO8859_16",E[E.SJIS=16]="SJIS",E[E.Cp1250=17]="Cp1250",E[E.Cp1251=18]="Cp1251",E[E.Cp1252=19]="Cp1252",E[E.Cp1256=20]="Cp1256",E[E.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",E[E.UTF8=22]="UTF8",E[E.ASCII=23]="ASCII",E[E.Big5=24]="Big5",E[E.GB18030=25]="GB18030",E[E.EUC_KR=26]="EUC_KR"})(me||(me={}));class ce{constructor(e,r,n,...a){this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=a,ce.VALUE_IDENTIFIER_TO_ECI.set(e,this),ce.NAME_TO_ECI.set(n,this);const l=this.values;for(let o=0,u=l.length;o!==u;o++){const h=l[o];ce.VALUES_TO_ECI.set(h,this)}for(const o of a)ce.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new Y("incorect value");const r=ce.VALUES_TO_ECI.get(e);if(r===void 0)throw new Y("incorect value");return r}static getCharacterSetECIByName(e){const r=ce.NAME_TO_ECI.get(e);if(r===void 0)throw new Y("incorect value");return r}equals(e){if(!(e instanceof ce))return!1;const r=e;return this.getName()===r.getName()}}ce.VALUE_IDENTIFIER_TO_ECI=new Map,ce.VALUES_TO_ECI=new Map,ce.NAME_TO_ECI=new Map,ce.Cp437=new ce(me.Cp437,Int32Array.from([0,2]),"Cp437"),ce.ISO8859_1=new ce(me.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),ce.ISO8859_2=new ce(me.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),ce.ISO8859_3=new ce(me.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),ce.ISO8859_4=new ce(me.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),ce.ISO8859_5=new ce(me.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),ce.ISO8859_6=new ce(me.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),ce.ISO8859_7=new ce(me.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),ce.ISO8859_8=new ce(me.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),ce.ISO8859_9=new ce(me.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),ce.ISO8859_10=new ce(me.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),ce.ISO8859_11=new ce(me.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),ce.ISO8859_13=new ce(me.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),ce.ISO8859_14=new ce(me.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),ce.ISO8859_15=new ce(me.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),ce.ISO8859_16=new ce(me.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),ce.SJIS=new ce(me.SJIS,20,"SJIS","Shift_JIS"),ce.Cp1250=new ce(me.Cp1250,21,"Cp1250","windows-1250"),ce.Cp1251=new ce(me.Cp1251,22,"Cp1251","windows-1251"),ce.Cp1252=new ce(me.Cp1252,23,"Cp1252","windows-1252"),ce.Cp1256=new ce(me.Cp1256,24,"Cp1256","windows-1256"),ce.UnicodeBigUnmarked=new ce(me.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),ce.UTF8=new ce(me.UTF8,26,"UTF8","UTF-8"),ce.ASCII=new ce(me.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),ce.Big5=new ce(me.Big5,28,"Big5"),ce.GB18030=new ce(me.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),ce.EUC_KR=new ce(me.EUC_KR,30,"EUC_KR","EUC-KR");class ke extends N{}ke.kind="UnsupportedOperationException";class Ge{static decode(e,r){const n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)}static shouldDecodeOnFallback(e){return!Ge.isBrowser()&&e==="ISO-8859-1"}static encode(e,r){const n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof ce?e:ce.getCharacterSetECIByName(e)}static decodeFallback(e,r){const n=this.encodingCharacterSet(r);if(Ge.isDecodeFallbackSupported(n)){let a="";for(let l=0,o=e.length;l<o;l++){let u=e[l].toString(16);u.length<2&&(u="0"+u),a+="%"+u}return decodeURIComponent(a)}if(n.equals(ce.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new ke(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(ce.UTF8)||e.equals(ce.ISO8859_1)||e.equals(ce.ASCII)}static encodeFallback(e){const n=btoa(unescape(encodeURIComponent(e))).split(""),a=[];for(let l=0;l<n.length;l++)a.push(n[l].charCodeAt(0));return new Uint8Array(a)}}class te{static castAsNonUtf8Char(e,r=null){const n=r?r.getName():this.ISO88591;return Ge.decode(new Uint8Array([e]),n)}static guessEncoding(e,r){if(r!=null&&r.get(oe.CHARACTER_SET)!==void 0)return r.get(oe.CHARACTER_SET).toString();const n=e.length;let a=!0,l=!0,o=!0,u=0,h=0,g=0,v=0,S=0,I=0,j=0,L=0,z=0,q=0,se=0;const Ae=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Ie=0;Ie<n&&(a||l||o);Ie++){const ve=e[Ie]&255;o&&(u>0?(ve&128)===0?o=!1:u--:(ve&128)!==0&&((ve&64)===0?o=!1:(u++,(ve&32)===0?h++:(u++,(ve&16)===0?g++:(u++,(ve&8)===0?v++:o=!1))))),a&&(ve>127&&ve<160?a=!1:ve>159&&(ve<192||ve===215||ve===247)&&se++),l&&(S>0?ve<64||ve===127||ve>252?l=!1:S--:ve===128||ve===160||ve>239?l=!1:ve>160&&ve<224?(I++,L=0,j++,j>z&&(z=j)):ve>127?(S++,j=0,L++,L>q&&(q=L)):(j=0,L=0))}return o&&u>0&&(o=!1),l&&S>0&&(l=!1),o&&(Ae||h+g+v>0)?te.UTF8:l&&(te.ASSUME_SHIFT_JIS||z>=3||q>=3)?te.SHIFT_JIS:a&&l?z===2&&I===2||se*10>=n?te.SHIFT_JIS:te.ISO88591:a?te.ISO88591:l?te.SHIFT_JIS:o?te.UTF8:te.PLATFORM_DEFAULT_ENCODING}static format(e,...r){let n=-1;function a(o,u,h,g,v,S){if(o==="%%")return"%";if(r[++n]===void 0)return;o=g?parseInt(g.substr(1)):void 0;let I=v?parseInt(v.substr(1)):void 0,j;switch(S){case"s":j=r[n];break;case"c":j=r[n][0];break;case"f":j=parseFloat(r[n]).toFixed(o);break;case"p":j=parseFloat(r[n]).toPrecision(o);break;case"e":j=parseFloat(r[n]).toExponential(o);break;case"x":j=parseInt(r[n]).toString(I||16);break;case"d":j=parseFloat(parseInt(r[n],I||10).toPrecision(o)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(I);let L=parseInt(h),z=h&&h[0]+""=="0"?"0":" ";for(;j.length<L;)j=u!==void 0?j+z:z+j;return j}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,a)}static getBytes(e,r){return Ge.encode(e,r)}static getCharCode(e,r=0){return e.charCodeAt(r)}static getCharAt(e){return String.fromCharCode(e)}}te.SHIFT_JIS=ce.SJIS.getName(),te.GB2312="GB2312",te.ISO88591=ce.ISO8859_1.getName(),te.EUC_JP="EUC_JP",te.UTF8=ce.UTF8.getName(),te.PLATFORM_DEFAULT_ENCODING=te.UTF8,te.ASSUME_SHIFT_JIS=!1;class K{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=te.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,r,n){for(let a=r;r<r+n;a++)this.append(e[a]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)}substring(e,r){return this.value.substring(e,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+r.length)}}class ge{constructor(e,r,n,a){if(this.width=e,this.height=r,this.rowSize=n,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new _("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const r=e.length,n=e[0].length,a=new ge(n,r);for(let l=0;l<r;l++){const o=e[l];for(let u=0;u<n;u++)o[u]&&a.set(u,l)}return a}static parseFromString(e,r,n){if(e===null)throw new _("stringRepresentation cannot be null");const a=new Array(e.length);let l=0,o=0,u=-1,h=0,g=0;for(;g<e.length;)if(e.charAt(g)===`
`||e.charAt(g)==="\r"){if(l>o){if(u===-1)u=l-o;else if(l-o!==u)throw new _("row lengths do not match");o=l,h++}g++}else if(e.substring(g,g+r.length)===r)g+=r.length,a[l]=!0,l++;else if(e.substring(g,g+n.length)===n)g+=n.length,a[l]=!1,l++;else throw new _("illegal character encountered: "+e.substring(g));if(l>o){if(u===-1)u=l-o;else if(l-o!==u)throw new _("row lengths do not match");h++}const v=new ge(u,h);for(let S=0;S<l;S++)a[S]&&v.set(Math.floor(S%u),Math.floor(S/u));return v}get(e,r){const n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0}set(e,r){const n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295}unset(e,r){const n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)}flip(e,r){const n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new _("input matrix dimensions do not match");const r=new Q(Math.floor(this.width/32)+1),n=this.rowSize,a=this.bits;for(let l=0,o=this.height;l<o;l++){const u=l*n,h=e.getRow(l,r).getBitArray();for(let g=0;g<n;g++)a[u+g]^=h[g]}}clear(){const e=this.bits,r=e.length;for(let n=0;n<r;n++)e[n]=0}setRegion(e,r,n,a){if(r<0||e<0)throw new _("Left and top must be nonnegative");if(a<1||n<1)throw new _("Height and width must be at least 1");const l=e+n,o=r+a;if(o>this.height||l>this.width)throw new _("The region must fit inside the matrix");const u=this.rowSize,h=this.bits;for(let g=r;g<o;g++){const v=g*u;for(let S=e;S<l;S++)h[v+Math.floor(S/32)]|=1<<(S&31)&4294967295}}getRow(e,r){r==null||r.getSize()<this.width?r=new Q(this.width):r.clear();const n=this.rowSize,a=this.bits,l=e*n;for(let o=0;o<n;o++)r.setBulk(o*32,a[l+o]);return r}setRow(e,r){X.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),r=this.getHeight();let n=new Q(e),a=new Q(e);for(let l=0,o=Math.floor((r+1)/2);l<o;l++)n=this.getRow(l,n),a=this.getRow(r-1-l,a),n.reverse(),a.reverse(),this.setRow(l,a),this.setRow(r-1-l,n)}getEnclosingRectangle(){const e=this.width,r=this.height,n=this.rowSize,a=this.bits;let l=e,o=r,u=-1,h=-1;for(let g=0;g<r;g++)for(let v=0;v<n;v++){const S=a[g*n+v];if(S!==0){if(g<o&&(o=g),g>h&&(h=g),v*32<l){let I=0;for(;(S<<31-I&4294967295)===0;)I++;v*32+I<l&&(l=v*32+I)}if(v*32+31>u){let I=31;for(;!(S>>>I);)I--;v*32+I>u&&(u=v*32+I)}}}return u<l||h<o?null:Int32Array.from([l,o,u-l+1,h-o+1])}getTopLeftOnBit(){const e=this.rowSize,r=this.bits;let n=0;for(;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;const a=n/e;let l=n%e*32;const o=r[n];let u=0;for(;(o<<31-u&4294967295)===0;)u++;return l+=u,Int32Array.from([l,a])}getBottomRightOnBit(){const e=this.rowSize,r=this.bits;let n=r.length-1;for(;n>=0&&r[n]===0;)n--;if(n<0)return null;const a=Math.floor(n/e);let l=Math.floor(n%e)*32;const o=r[n];let u=31;for(;!(o>>>u);)u--;return l+=u,Int32Array.from([l,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof ge))return!1;const r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&ue.equals(this.bits,r.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ue.hashCode(this.bits),e}toString(e="X ",r="  ",n=`
`){return this.buildToString(e,r,n)}buildToString(e,r,n){let a=new K;for(let l=0,o=this.height;l<o;l++){for(let u=0,h=this.width;u<h;u++)a.append(this.get(u,l)?e:r);a.append(n)}return a.toString()}clone(){return new ge(this.width,this.height,this.rowSize,this.bits.slice())}}class B extends N{static getNotFoundInstance(){return new B}}B.kind="NotFoundException";class ye extends G{constructor(e){super(e),this.luminances=ye.EMPTY,this.buckets=new Int32Array(ye.LUMINANCE_BUCKETS)}getBlackRow(e,r){const n=this.getLuminanceSource(),a=n.getWidth();r==null||r.getSize()<a?r=new Q(a):r.clear(),this.initArrays(a);const l=n.getRow(e,this.luminances),o=this.buckets;for(let h=0;h<a;h++)o[(l[h]&255)>>ye.LUMINANCE_SHIFT]++;const u=ye.estimateBlackPoint(o);if(a<3)for(let h=0;h<a;h++)(l[h]&255)<u&&r.set(h);else{let h=l[0]&255,g=l[1]&255;for(let v=1;v<a-1;v++){const S=l[v+1]&255;(g*4-h-S)/2<u&&r.set(v),h=g,g=S}}return r}getBlackMatrix(){const e=this.getLuminanceSource(),r=e.getWidth(),n=e.getHeight(),a=new ge(r,n);this.initArrays(r);const l=this.buckets;for(let h=1;h<5;h++){const g=Math.floor(n*h/5),v=e.getRow(g,this.luminances),S=Math.floor(r*4/5);for(let I=Math.floor(r/5);I<S;I++){const j=v[I]&255;l[j>>ye.LUMINANCE_SHIFT]++}}const o=ye.estimateBlackPoint(l),u=e.getMatrix();for(let h=0;h<n;h++){const g=h*r;for(let v=0;v<r;v++)(u[g+v]&255)<o&&a.set(v,h)}return a}createBinarizer(e){return new ye(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const r=this.buckets;for(let n=0;n<ye.LUMINANCE_BUCKETS;n++)r[n]=0}static estimateBlackPoint(e){const r=e.length;let n=0,a=0,l=0;for(let v=0;v<r;v++)e[v]>l&&(a=v,l=e[v]),e[v]>n&&(n=e[v]);let o=0,u=0;for(let v=0;v<r;v++){const S=v-a,I=e[v]*S*S;I>u&&(o=v,u=I)}if(a>o){const v=a;a=o,o=v}if(o-a<=r/16)throw new B;let h=o-1,g=-1;for(let v=o-1;v>a;v--){const S=v-a,I=S*S*(o-v)*(n-e[v]);I>g&&(h=v,g=I)}return h<<ye.LUMINANCE_SHIFT}}ye.LUMINANCE_BITS=5,ye.LUMINANCE_SHIFT=8-ye.LUMINANCE_BITS,ye.LUMINANCE_BUCKETS=1<<ye.LUMINANCE_BITS,ye.EMPTY=Uint8ClampedArray.from([0]);class fe extends ye{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),r=e.getWidth(),n=e.getHeight();if(r>=fe.MINIMUM_DIMENSION&&n>=fe.MINIMUM_DIMENSION){const a=e.getMatrix();let l=r>>fe.BLOCK_SIZE_POWER;(r&fe.BLOCK_SIZE_MASK)!==0&&l++;let o=n>>fe.BLOCK_SIZE_POWER;(n&fe.BLOCK_SIZE_MASK)!==0&&o++;const u=fe.calculateBlackPoints(a,l,o,r,n),h=new ge(r,n);fe.calculateThresholdForBlock(a,l,o,r,n,u,h),this.matrix=h}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new fe(e)}static calculateThresholdForBlock(e,r,n,a,l,o,u){const h=l-fe.BLOCK_SIZE,g=a-fe.BLOCK_SIZE;for(let v=0;v<n;v++){let S=v<<fe.BLOCK_SIZE_POWER;S>h&&(S=h);const I=fe.cap(v,2,n-3);for(let j=0;j<r;j++){let L=j<<fe.BLOCK_SIZE_POWER;L>g&&(L=g);const z=fe.cap(j,2,r-3);let q=0;for(let Ae=-2;Ae<=2;Ae++){const Ie=o[I+Ae];q+=Ie[z-2]+Ie[z-1]+Ie[z]+Ie[z+1]+Ie[z+2]}const se=q/25;fe.thresholdBlock(e,L,S,se,a,u)}}}static cap(e,r,n){return e<r?r:e>n?n:e}static thresholdBlock(e,r,n,a,l,o){for(let u=0,h=n*l+r;u<fe.BLOCK_SIZE;u++,h+=l)for(let g=0;g<fe.BLOCK_SIZE;g++)(e[h+g]&255)<=a&&o.set(r+g,n+u)}static calculateBlackPoints(e,r,n,a,l){const o=l-fe.BLOCK_SIZE,u=a-fe.BLOCK_SIZE,h=new Array(n);for(let g=0;g<n;g++){h[g]=new Int32Array(r);let v=g<<fe.BLOCK_SIZE_POWER;v>o&&(v=o);for(let S=0;S<r;S++){let I=S<<fe.BLOCK_SIZE_POWER;I>u&&(I=u);let j=0,L=255,z=0;for(let se=0,Ae=v*a+I;se<fe.BLOCK_SIZE;se++,Ae+=a){for(let Ie=0;Ie<fe.BLOCK_SIZE;Ie++){const ve=e[Ae+Ie]&255;j+=ve,ve<L&&(L=ve),ve>z&&(z=ve)}if(z-L>fe.MIN_DYNAMIC_RANGE)for(se++,Ae+=a;se<fe.BLOCK_SIZE;se++,Ae+=a)for(let Ie=0;Ie<fe.BLOCK_SIZE;Ie++)j+=e[Ae+Ie]&255}let q=j>>fe.BLOCK_SIZE_POWER*2;if(z-L<=fe.MIN_DYNAMIC_RANGE&&(q=L/2,g>0&&S>0)){const se=(h[g-1][S]+2*h[g][S-1]+h[g-1][S-1])/4;L<se&&(q=se)}h[g][S]=q}}return h}}fe.BLOCK_SIZE_POWER=3,fe.BLOCK_SIZE=1<<fe.BLOCK_SIZE_POWER,fe.BLOCK_SIZE_MASK=fe.BLOCK_SIZE-1,fe.MINIMUM_DIMENSION=fe.BLOCK_SIZE*5,fe.MIN_DYNAMIC_RANGE=24;class he{constructor(e,r){this.width=e,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,r,n,a){throw new ke("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ke("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ke("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let r=new K;for(let n=0;n<this.height;n++){const a=this.getRow(n,e);for(let l=0;l<this.width;l++){const o=a[l]&255;let u;o<64?u="#":o<128?u="+":o<192?u=".":u=" ",r.append(u)}r.append(`
`)}return r.toString()}}class H extends he{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,r){const n=this.delegate.getRow(e,r),a=this.getWidth();for(let l=0;l<a;l++)n[l]=255-(n[l]&255);return n}getMatrix(){const e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(r);for(let a=0;a<r;a++)n[a]=255-(e[a]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(e,r,n,a){return new H(this.delegate.crop(e,r,n,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new H(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new H(this.delegate.rotateCounterClockwise45())}}class U extends he{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=U.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const r=e.getContext("2d").getImageData(0,0,e.width,e.height);return U.toGrayscaleBuffer(r.data,e.width,e.height)}static toGrayscaleBuffer(e,r,n){const a=new Uint8ClampedArray(r*n);for(let l=0,o=0,u=e.length;l<u;l+=4,o++){let h;if(e[l+3]===0)h=255;else{const v=e[l],S=e[l+1],I=e[l+2];h=306*v+601*S+117*I+512>>10}a[o]=h}return a}getRow(e,r){if(e<0||e>=this.getHeight())throw new _("Requested row is outside the image: "+e);const n=this.getWidth(),a=e*n;return r===null?r=this.buffer.slice(a,a+n):(r.length<n&&(r=new Uint8ClampedArray(n)),r.set(this.buffer.slice(a,a+n))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,r,n,a){return super.crop(e,r,n,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const r=this.getTempCanvasElement(),n=r.getContext("2d"),a=e*U.DEGREE_TO_RADIANS,l=this.canvas.width,o=this.canvas.height,u=Math.ceil(Math.abs(Math.cos(a))*l+Math.abs(Math.sin(a))*o),h=Math.ceil(Math.abs(Math.sin(a))*l+Math.abs(Math.cos(a))*o);return r.width=u,r.height=h,n.translate(u/2,h/2),n.rotate(a),n.drawImage(this.canvas,l/-2,o/-2),this.buffer=U.makeBufferFromCanvasImageData(r),this}invert(){return new H(this)}}U.DEGREE_TO_RADIANS=Math.PI/180;class P{constructor(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var W=(globalThis||Gl||self||window||void 0)&&(globalThis||Gl||self||window||void 0).__awaiter||function(E,e,r,n){function a(l){return l instanceof r?l:new r(function(o){o(l)})}return new(r||(r=Promise))(function(l,o){function u(v){try{g(n.next(v))}catch(S){o(S)}}function h(v){try{g(n.throw(v))}catch(S){o(S)}}function g(v){v.done?l(v.value):a(v.value).then(u,h)}g((n=n.apply(E,e||[])).next())})};class Ee{constructor(e,r=500,n){this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return W(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const n of e){const a=n.kind==="video"?"videoinput":n.kind;if(a!=="videoinput")continue;const l=n.deviceId||n.id,o=n.label||`Video device ${r.length+1}`,u=n.groupId,h={deviceId:l,label:o,kind:a,groupId:u};r.push(h)}return r})}getVideoInputDevices(){return W(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new P(r.deviceId,r.label))})}findDeviceById(e){return W(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(n=>n.deviceId===e):null})}decodeFromInputVideoDevice(e,r){return W(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,r)})}decodeOnceFromVideoDevice(e,r){return W(this,void 0,void 0,function*(){this.reset();let n;e?n={deviceId:{exact:e}}:n={facingMode:"environment"};const a={video:n};return yield this.decodeOnceFromConstraints(a,r)})}decodeOnceFromConstraints(e,r){return W(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(n,r)})}decodeOnceFromStream(e,r){return W(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(e,r);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(e,r,n){return W(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,r,n)})}decodeFromVideoDevice(e,r,n){return W(this,void 0,void 0,function*(){let a;e?a={deviceId:{exact:e}}:a={facingMode:"environment"};const l={video:a};return yield this.decodeFromConstraints(l,r,n)})}decodeFromConstraints(e,r,n){return W(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(a,r,n)})}decodeFromStream(e,r,n){return W(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(e,r);return yield this.decodeContinuously(a,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,r){return W(this,void 0,void 0,function*(){const n=this.prepareVideoElement(r);return this.addVideoSource(n,e),this.videoElement=n,this.stream=e,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(e){return new Promise((r,n)=>this.playVideoOnLoad(e,()=>r()))}playVideoOnLoad(e,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return W(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,r){const n=document.getElementById(e);if(!n)throw new O(`element with id '${e}' not found`);if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new O(`element with id '${e}' must be an ${r} element`);return n}decodeFromImage(e,r){if(!e&&!r)throw new O("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)}decodeFromVideo(e,r){if(!e&&!r)throw new O("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,r,n){if(e===void 0&&r===void 0)throw new O("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)}decodeFromImageElement(e){if(!e)throw new O("An image element must be provided.");this.reset();const r=this.prepareImageElement(e);this.imageElement=r;let n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n}decodeFromVideoElement(e){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(e,r){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)}_decodeFromVideoElementSetup(e){if(!e)throw new O("A video element must be provided.");this.reset();const r=this.prepareVideoElement(e);return this.videoElement=r,r}decodeFromImageUrl(e){if(!e)throw new O("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const n=this._decodeOnLoadImage(r);return r.src=e,n}decodeFromVideoUrl(e){if(!e)throw new O("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n}decodeFromVideoUrlContinuously(e,r){if(!e)throw new O("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(n,r);return n.src=e,a}_decodeOnLoadImage(e){return new Promise((r,n)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(r,n),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return W(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,r){return W(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,r)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r}prepareVideoElement(e){let r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(e,r=!0,n=!0){this._stopAsyncDecode=!1;const a=(l,o)=>{if(this._stopAsyncDecode){o(new B("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const u=this.decode(e);l(u)}catch(u){const h=r&&u instanceof B,v=(u instanceof Z||u instanceof Y)&&n;if(h||v)return setTimeout(a,this._timeBetweenDecodingAttempts,l,o);o(u)}};return new Promise((l,o)=>a(l,o))}decodeContinuously(e,r){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(e);r(a,null),setTimeout(n,this.timeBetweenScansMillis)}catch(a){r(null,a);const l=a instanceof Z||a instanceof Y,o=a instanceof B;(l||o)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(e){const r=this.createBinaryBitmap(e);return this.decodeBitmap(r)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,r,n){r||(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(e,r,n=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const r=this.getCaptureCanvas(e),n=new U(r),a=new fe(n);return new $(a)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const n=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let n,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=a+"px",r.width=n,r.height=a,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Re{constructor(e,r,n=r==null?0:8*r.length,a,l,o=X.currentTimeMillis()){this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=a,this.format=l,this.timestamp=o,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=a,this.format=l,this.resultMetadata=null,o==null?this.timestamp=X.currentTimeMillis():this.timestamp=o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){const n=new Array(r.length+e.length);X.arraycopy(r,0,n,0,r.length),X.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Fe;(function(E){E[E.AZTEC=0]="AZTEC",E[E.CODABAR=1]="CODABAR",E[E.CODE_39=2]="CODE_39",E[E.CODE_93=3]="CODE_93",E[E.CODE_128=4]="CODE_128",E[E.DATA_MATRIX=5]="DATA_MATRIX",E[E.EAN_8=6]="EAN_8",E[E.EAN_13=7]="EAN_13",E[E.ITF=8]="ITF",E[E.MAXICODE=9]="MAXICODE",E[E.PDF_417=10]="PDF_417",E[E.QR_CODE=11]="QR_CODE",E[E.RSS_14=12]="RSS_14",E[E.RSS_EXPANDED=13]="RSS_EXPANDED",E[E.UPC_A=14]="UPC_A",E[E.UPC_E=15]="UPC_E",E[E.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var Ne=Fe,Qe;(function(E){E[E.OTHER=0]="OTHER",E[E.ORIENTATION=1]="ORIENTATION",E[E.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",E[E.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",E[E.ISSUE_NUMBER=4]="ISSUE_NUMBER",E[E.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",E[E.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",E[E.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",E[E.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",E[E.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",E[E.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Qe||(Qe={}));var Ue=Qe;class He{constructor(e,r,n,a,l=-1,o=-1){this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=a,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class it{exp(e){return this.expTable[e]}log(e){if(e===0)throw new _;return this.logTable[e]}static addOrSubtract(e,r){return e^r}}class gt{constructor(e,r){if(r.length===0)throw new _;this.field=e;const n=r.length;if(n>1&&r[0]===0){let a=1;for(;a<n&&r[a]===0;)a++;a===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-a),X.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const r=this.coefficients;let n;if(e===1){n=0;for(let o=0,u=r.length;o!==u;o++){const h=r[o];n=it.addOrSubtract(n,h)}return n}n=r[0];const a=r.length,l=this.field;for(let o=1;o<a;o++)n=it.addOrSubtract(l.multiply(e,n),r[o]);return n}addOrSubtract(e){if(!this.field.equals(e.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,n=e.coefficients;if(r.length>n.length){const o=r;r=n,n=o}let a=new Int32Array(n.length);const l=n.length-r.length;X.arraycopy(n,0,a,0,l);for(let o=l;o<n.length;o++)a[o]=it.addOrSubtract(r[o-l],n[o]);return new gt(this.field,a)}multiply(e){if(!this.field.equals(e.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const r=this.coefficients,n=r.length,a=e.coefficients,l=a.length,o=new Int32Array(n+l-1),u=this.field;for(let h=0;h<n;h++){const g=r[h];for(let v=0;v<l;v++)o[h+v]=it.addOrSubtract(o[h+v],u.multiply(g,a[v]))}return new gt(u,o)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const r=this.coefficients.length,n=this.field,a=new Int32Array(r),l=this.coefficients;for(let o=0;o<r;o++)a[o]=n.multiply(l[o],e);return new gt(n,a)}multiplyByMonomial(e,r){if(e<0)throw new _;if(r===0)return this.field.getZero();const n=this.coefficients,a=n.length,l=new Int32Array(a+e),o=this.field;for(let u=0;u<a;u++)l[u]=o.multiply(n[u],r);return new gt(o,l)}divide(e){if(!this.field.equals(e.field))throw new _("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new _("Divide by 0");const r=this.field;let n=r.getZero(),a=this;const l=e.getCoefficient(e.getDegree()),o=r.inverse(l);for(;a.getDegree()>=e.getDegree()&&!a.isZero();){const u=a.getDegree()-e.getDegree(),h=r.multiply(a.getCoefficient(a.getDegree()),o),g=e.multiplyByMonomial(u,h),v=r.buildMonomial(u,h);n=n.addOrSubtract(v),a=a.addOrSubtract(g)}return[n,a]}toString(){let e="";for(let r=this.getDegree();r>=0;r--){let n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){const a=this.field.log(n);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e}}class We extends N{}We.kind="ArithmeticException";class Pe extends it{constructor(e,r,n){super(),this.primitive=e,this.size=r,this.generatorBase=n;const a=new Int32Array(r);let l=1;for(let u=0;u<r;u++)a[u]=l,l*=2,l>=r&&(l^=e,l&=r-1);this.expTable=a;const o=new Int32Array(r);for(let u=0;u<r-1;u++)o[a[u]]=u;this.logTable=o,this.zero=new gt(this,Int32Array.from([0])),this.one=new gt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new _;if(r===0)return this.zero;const n=new Int32Array(e+1);return n[0]=r,new gt(this,n)}inverse(e){if(e===0)throw new We;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ne.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}Pe.AZTEC_DATA_12=new Pe(4201,4096,1),Pe.AZTEC_DATA_10=new Pe(1033,1024,1),Pe.AZTEC_DATA_6=new Pe(67,64,1),Pe.AZTEC_PARAM=new Pe(19,16,1),Pe.QR_CODE_FIELD_256=new Pe(285,256,0),Pe.DATA_MATRIX_FIELD_256=new Pe(301,256,1),Pe.AZTEC_DATA_8=Pe.DATA_MATRIX_FIELD_256,Pe.MAXICODE_FIELD_64=Pe.AZTEC_DATA_6;class pt extends N{}pt.kind="ReedSolomonException";class At extends N{}At.kind="IllegalStateException";class It{constructor(e){this.field=e}decode(e,r){const n=this.field,a=new gt(n,e),l=new Int32Array(r);let o=!0;for(let j=0;j<r;j++){const L=a.evaluateAt(n.exp(j+n.getGeneratorBase()));l[l.length-1-j]=L,L!==0&&(o=!1)}if(o)return;const u=new gt(n,l),h=this.runEuclideanAlgorithm(n.buildMonomial(r,1),u,r),g=h[0],v=h[1],S=this.findErrorLocations(g),I=this.findErrorMagnitudes(v,S);for(let j=0;j<S.length;j++){const L=e.length-1-n.log(S[j]);if(L<0)throw new pt("Bad error location");e[L]=Pe.addOrSubtract(e[L],I[j])}}runEuclideanAlgorithm(e,r,n){if(e.getDegree()<r.getDegree()){const j=e;e=r,r=j}const a=this.field;let l=e,o=r,u=a.getZero(),h=a.getOne();for(;o.getDegree()>=(n/2|0);){let j=l,L=u;if(l=o,u=h,l.isZero())throw new pt("r_{i-1} was zero");o=j;let z=a.getZero();const q=l.getCoefficient(l.getDegree()),se=a.inverse(q);for(;o.getDegree()>=l.getDegree()&&!o.isZero();){const Ae=o.getDegree()-l.getDegree(),Ie=a.multiply(o.getCoefficient(o.getDegree()),se);z=z.addOrSubtract(a.buildMonomial(Ae,Ie)),o=o.addOrSubtract(l.multiplyByMonomial(Ae,Ie))}if(h=z.multiply(u).addOrSubtract(L),o.getDegree()>=l.getDegree())throw new At("Division algorithm failed to reduce polynomial?")}const g=h.getCoefficient(0);if(g===0)throw new pt("sigmaTilde(0) was zero");const v=a.inverse(g),S=h.multiplyScalar(v),I=o.multiplyScalar(v);return[S,I]}findErrorLocations(e){const r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);const n=new Int32Array(r);let a=0;const l=this.field;for(let o=1;o<l.getSize()&&a<r;o++)e.evaluateAt(o)===0&&(n[a]=l.inverse(o),a++);if(a!==r)throw new pt("Error locator degree does not match number of roots");return n}findErrorMagnitudes(e,r){const n=r.length,a=new Int32Array(n),l=this.field;for(let o=0;o<n;o++){const u=l.inverse(r[o]);let h=1;for(let g=0;g<n;g++)if(o!==g){const v=l.multiply(r[g],u),S=(v&1)===0?v|1:v&-2;h=l.multiply(h,S)}a[o]=l.multiply(e.evaluateAt(u),l.inverse(h)),l.getGeneratorBase()!==0&&(a[o]=l.multiply(a[o],u))}return a}}var et;(function(E){E[E.UPPER=0]="UPPER",E[E.LOWER=1]="LOWER",E[E.MIXED=2]="MIXED",E[E.DIGIT=3]="DIGIT",E[E.PUNCT=4]="PUNCT",E[E.BINARY=5]="BINARY"})(et||(et={}));class tt{decode(e){this.ddata=e;let r=e.getBits(),n=this.extractBits(r),a=this.correctBits(n),l=tt.convertBoolArrayToByteArray(a),o=tt.getEncodedData(a),u=new He(l,o,null,null);return u.setNumBits(a.length),u}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let r=e.length,n=et.UPPER,a=et.UPPER,l="",o=0;for(;o<r;)if(a===et.BINARY){if(r-o<5)break;let u=tt.readCode(e,o,5);if(o+=5,u===0){if(r-o<11)break;u=tt.readCode(e,o,11)+31,o+=11}for(let h=0;h<u;h++){if(r-o<8){o=r;break}const g=tt.readCode(e,o,8);l+=te.castAsNonUtf8Char(g),o+=8}a=n}else{let u=a===et.DIGIT?4:5;if(r-o<u)break;let h=tt.readCode(e,o,u);o+=u;let g=tt.getCharacter(a,h);g.startsWith("CTRL_")?(n=a,a=tt.getTable(g.charAt(5)),g.charAt(6)==="L"&&(n=a)):(l+=g,a=n)}return l}static getTable(e){switch(e){case"L":return et.LOWER;case"P":return et.PUNCT;case"M":return et.MIXED;case"D":return et.DIGIT;case"B":return et.BINARY;default:return et.UPPER}}static getCharacter(e,r){switch(e){case et.UPPER:return tt.UPPER_TABLE[r];case et.LOWER:return tt.LOWER_TABLE[r];case et.MIXED:return tt.MIXED_TABLE[r];case et.PUNCT:return tt.PUNCT_TABLE[r];case et.DIGIT:return tt.DIGIT_TABLE[r];default:throw new At("Bad table")}}correctBits(e){let r,n;this.ddata.getNbLayers()<=2?(n=6,r=Pe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=Pe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=Pe.AZTEC_DATA_10):(n=12,r=Pe.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),l=e.length/n;if(l<a)throw new Y;let o=e.length%n,u=new Int32Array(l);for(let I=0;I<l;I++,o+=n)u[I]=tt.readCode(e,o,n);try{new It(r).decode(u,l-a)}catch(I){throw new Y(I)}let h=(1<<n)-1,g=0;for(let I=0;I<a;I++){let j=u[I];if(j===0||j===h)throw new Y;(j===1||j===h-1)&&g++}let v=new Array(a*n-g),S=0;for(let I=0;I<a;I++){let j=u[I];if(j===1||j===h-1)v.fill(j>1,S,S+n-1),S+=n-1;else for(let L=n-1;L>=0;--L)v[S++]=(j&1<<L)!==0}return v}extractBits(e){let r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),a=(r?11:14)+n*4,l=new Int32Array(a),o=new Array(this.totalBitsInLayer(n,r));if(r)for(let u=0;u<l.length;u++)l[u]=u;else{let u=a+1+2*ne.truncDivision(ne.truncDivision(a,2)-1,15),h=a/2,g=ne.truncDivision(u,2);for(let v=0;v<h;v++){let S=v+ne.truncDivision(v,15);l[h-v-1]=g-S-1,l[h+v]=g+S+1}}for(let u=0,h=0;u<n;u++){let g=(n-u)*4+(r?9:12),v=u*2,S=a-1-v;for(let I=0;I<g;I++){let j=I*2;for(let L=0;L<2;L++)o[h+j+L]=e.get(l[v+L],l[v+I]),o[h+2*g+j+L]=e.get(l[v+I],l[S-L]),o[h+4*g+j+L]=e.get(l[S-L],l[S-I]),o[h+6*g+j+L]=e.get(l[S-I],l[v+L])}h+=g*8}return o}static readCode(e,r,n){let a=0;for(let l=r;l<r+n;l++)a<<=1,e[l]&&(a|=1);return a}static readByte(e,r){let n=e.length-r;return n>=8?tt.readCode(e,r,8):tt.readCode(e,r,n)<<8-n}static convertBoolArrayToByteArray(e){let r=new Uint8Array((e.length+7)/8);for(let n=0;n<r.length;n++)r[n]=tt.readByte(e,8*n);return r}totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}tt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],tt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],tt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],tt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],tt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ht{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,r,n,a){const l=e-n,o=r-a;return Math.sqrt(l*l+o*o)}static sum(e){let r=0;for(let n=0,a=e.length;n!==a;n++){const l=e[n];r+=l}return r}}class Tn{static floatToIntBits(e){return e}}Tn.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Oe{constructor(e,r){this.x=e,this.y=r}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Oe){const r=e;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Tn.floatToIntBits(this.x)+Tn.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]);let l,o,u;if(n>=r&&n>=a?(o=e[0],l=e[1],u=e[2]):a>=n&&a>=r?(o=e[1],l=e[0],u=e[2]):(o=e[2],l=e[0],u=e[1]),this.crossProductZ(l,o,u)<0){const h=l;l=u,u=h}e[0]=l,e[1]=o,e[2]=u}static distance(e,r){return ht.distance(e.x,e.y,r.x,r.y)}static crossProductZ(e,r,n){const a=r.x,l=r.y;return(n.x-a)*(e.y-l)-(n.y-l)*(e.x-a)}}class ts{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class zi extends ts{constructor(e,r,n,a,l){super(e,r),this.compact=n,this.nbDatablocks=a,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class sn{constructor(e,r,n,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=sn.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);const l=r/2|0;if(this.leftInit=n-l,this.rightInit=n+l,this.upInit=a-l,this.downInit=a+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new B}detect(){let e=this.leftInit,r=this.rightInit,n=this.upInit,a=this.downInit,l=!1,o=!0,u=!1,h=!1,g=!1,v=!1,S=!1;const I=this.width,j=this.height;for(;o;){o=!1;let L=!0;for(;(L||!h)&&r<I;)L=this.containsBlackPoint(n,a,r,!1),L?(r++,o=!0,h=!0):h||r++;if(r>=I){l=!0;break}let z=!0;for(;(z||!g)&&a<j;)z=this.containsBlackPoint(e,r,a,!0),z?(a++,o=!0,g=!0):g||a++;if(a>=j){l=!0;break}let q=!0;for(;(q||!v)&&e>=0;)q=this.containsBlackPoint(n,a,e,!1),q?(e--,o=!0,v=!0):v||e--;if(e<0){l=!0;break}let se=!0;for(;(se||!S)&&n>=0;)se=this.containsBlackPoint(e,r,n,!0),se?(n--,o=!0,S=!0):S||n--;if(n<0){l=!0;break}o&&(u=!0)}if(!l&&u){const L=r-e;let z=null;for(let Ie=1;z===null&&Ie<L;Ie++)z=this.getBlackPointOnSegment(e,a-Ie,e+Ie,a);if(z==null)throw new B;let q=null;for(let Ie=1;q===null&&Ie<L;Ie++)q=this.getBlackPointOnSegment(e,n+Ie,e+Ie,n);if(q==null)throw new B;let se=null;for(let Ie=1;se===null&&Ie<L;Ie++)se=this.getBlackPointOnSegment(r,n+Ie,r-Ie,n);if(se==null)throw new B;let Ae=null;for(let Ie=1;Ae===null&&Ie<L;Ie++)Ae=this.getBlackPointOnSegment(r,a-Ie,r-Ie,a);if(Ae==null)throw new B;return this.centerEdges(Ae,z,se,q)}else throw new B}getBlackPointOnSegment(e,r,n,a){const l=ht.round(ht.distance(e,r,n,a)),o=(n-e)/l,u=(a-r)/l,h=this.image;for(let g=0;g<l;g++){const v=ht.round(e+g*o),S=ht.round(r+g*u);if(h.get(v,S))return new Oe(v,S)}return null}centerEdges(e,r,n,a){const l=e.getX(),o=e.getY(),u=r.getX(),h=r.getY(),g=n.getX(),v=n.getY(),S=a.getX(),I=a.getY(),j=sn.CORR;return l<this.width/2?[new Oe(S-j,I+j),new Oe(u+j,h+j),new Oe(g-j,v-j),new Oe(l+j,o-j)]:[new Oe(S+j,I+j),new Oe(u+j,h-j),new Oe(g-j,v+j),new Oe(l-j,o-j)]}containsBlackPoint(e,r,n,a){const l=this.image;if(a){for(let o=e;o<=r;o++)if(l.get(o,n))return!0}else for(let o=e;o<=r;o++)if(l.get(n,o))return!0;return!1}}sn.INIT_SIZE=10,sn.CORR=1;class ai{static checkAndNudgePoints(e,r){const n=e.getWidth(),a=e.getHeight();let l=!0;for(let o=0;o<r.length&&l;o+=2){const u=Math.floor(r[o]),h=Math.floor(r[o+1]);if(u<-1||u>n||h<-1||h>a)throw new B;l=!1,u===-1?(r[o]=0,l=!0):u===n&&(r[o]=n-1,l=!0),h===-1?(r[o+1]=0,l=!0):h===a&&(r[o+1]=a-1,l=!0)}l=!0;for(let o=r.length-2;o>=0&&l;o-=2){const u=Math.floor(r[o]),h=Math.floor(r[o+1]);if(u<-1||u>n||h<-1||h>a)throw new B;l=!1,u===-1?(r[o]=0,l=!0):u===n&&(r[o]=n-1,l=!0),h===-1?(r[o+1]=0,l=!0):h===a&&(r[o+1]=a-1,l=!0)}}}class Dr{constructor(e,r,n,a,l,o,u,h,g){this.a11=e,this.a21=r,this.a31=n,this.a12=a,this.a22=l,this.a32=o,this.a13=u,this.a23=h,this.a33=g}static quadrilateralToQuadrilateral(e,r,n,a,l,o,u,h,g,v,S,I,j,L,z,q){const se=Dr.quadrilateralToSquare(e,r,n,a,l,o,u,h);return Dr.squareToQuadrilateral(g,v,S,I,j,L,z,q).times(se)}transformPoints(e){const r=e.length,n=this.a11,a=this.a12,l=this.a13,o=this.a21,u=this.a22,h=this.a23,g=this.a31,v=this.a32,S=this.a33;for(let I=0;I<r;I+=2){const j=e[I],L=e[I+1],z=l*j+h*L+S;e[I]=(n*j+o*L+g)/z,e[I+1]=(a*j+u*L+v)/z}}transformPointsWithValues(e,r){const n=this.a11,a=this.a12,l=this.a13,o=this.a21,u=this.a22,h=this.a23,g=this.a31,v=this.a32,S=this.a33,I=e.length;for(let j=0;j<I;j++){const L=e[j],z=r[j],q=l*L+h*z+S;e[j]=(n*L+o*z+g)/q,r[j]=(a*L+u*z+v)/q}}static squareToQuadrilateral(e,r,n,a,l,o,u,h){const g=e-n+l-u,v=r-a+o-h;if(g===0&&v===0)return new Dr(n-e,l-n,e,a-r,o-a,r,0,0,1);{const S=n-l,I=u-l,j=a-o,L=h-o,z=S*L-I*j,q=(g*L-I*v)/z,se=(S*v-g*j)/z;return new Dr(n-e+q*n,u-e+se*u,e,a-r+q*a,h-r+se*h,r,q,se,1)}}static quadrilateralToSquare(e,r,n,a,l,o,u,h){return Dr.squareToQuadrilateral(e,r,n,a,l,o,u,h).buildAdjoint()}buildAdjoint(){return new Dr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new Dr(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class li extends ai{sampleGrid(e,r,n,a,l,o,u,h,g,v,S,I,j,L,z,q,se,Ae,Ie){const ve=Dr.quadrilateralToQuadrilateral(a,l,o,u,h,g,v,S,I,j,L,z,q,se,Ae,Ie);return this.sampleGridWithTransform(e,r,n,ve)}sampleGridWithTransform(e,r,n,a){if(r<=0||n<=0)throw new B;const l=new ge(r,n),o=new Float32Array(2*r);for(let u=0;u<n;u++){const h=o.length,g=u+.5;for(let v=0;v<h;v+=2)o[v]=v/2+.5,o[v+1]=g;a.transformPoints(o),ai.checkAndNudgePoints(e,o);try{for(let v=0;v<h;v+=2)e.get(Math.floor(o[v]),Math.floor(o[v+1]))&&l.set(v/2,u)}catch{throw new B}}return l}}class Vr{static setGridSampler(e){Vr.gridSampler=e}static getInstance(){return Vr.gridSampler}}Vr.gridSampler=new li;class hr{constructor(e,r){this.x=e,this.y=r}toResultPoint(){return new Oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class rs{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){let o=n[0];n[0]=n[2],n[2]=o}this.extractParameters(n);let a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),l=this.getMatrixCornerPoints(n);return new zi(a,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new B;let r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);let a=0;for(let o=0;o<4;o++){let u=n[(this.shift+o)%4];this.compact?(a<<=7,a+=u>>1&127):(a<<=10,a+=(u>>2&992)+(u>>1&31))}let l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(e,r){let n=0;e.forEach((a,l,o)=>{let u=(a>>r-2<<1)+(a&1);n=(n<<3)+u}),n=((n&1)<<11)+(n>>1);for(let a=0;a<4;a++)if(ne.bitCount(n^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new B}getCorrectedParameterData(e,r){let n,a;r?(n=7,a=2):(n=10,a=4);let l=n-a,o=new Int32Array(n);for(let h=n-1;h>=0;--h)o[h]=e&15,e>>=4;try{new It(Pe.AZTEC_PARAM).decode(o,l)}catch{throw new B}let u=0;for(let h=0;h<a;h++)u=(u<<4)+o[h];return u}getBullsEyeCorners(e){let r=e,n=e,a=e,l=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let S=this.getFirstDifferent(r,o,1,-1),I=this.getFirstDifferent(n,o,1,1),j=this.getFirstDifferent(a,o,-1,1),L=this.getFirstDifferent(l,o,-1,-1);if(this.nbCenterLayers>2){let z=this.distancePoint(L,S)*this.nbCenterLayers/(this.distancePoint(l,r)*(this.nbCenterLayers+2));if(z<.75||z>1.25||!this.isWhiteOrBlackRectangle(S,I,j,L))break}r=S,n=I,a=j,l=L,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new B;this.compact=this.nbCenterLayers===5;let u=new Oe(r.getX()+.5,r.getY()-.5),h=new Oe(n.getX()+.5,n.getY()+.5),g=new Oe(a.getX()-.5,a.getY()+.5),v=new Oe(l.getX()-.5,l.getY()-.5);return this.expandSquare([u,h,g,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,r,n,a;try{let u=new sn(this.image).detect();e=u[0],r=u[1],n=u[2],a=u[3]}catch{let h=this.image.getWidth()/2,g=this.image.getHeight()/2;e=this.getFirstDifferent(new hr(h+7,g-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new hr(h+7,g+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new hr(h-7,g+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new hr(h-7,g-7),!1,-1,-1).toResultPoint()}let l=ht.round((e.getX()+a.getX()+r.getX()+n.getX())/4),o=ht.round((e.getY()+a.getY()+r.getY()+n.getY())/4);try{let u=new sn(this.image,15,l,o).detect();e=u[0],r=u[1],n=u[2],a=u[3]}catch{e=this.getFirstDifferent(new hr(l+7,o-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new hr(l+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new hr(l-7,o+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new hr(l-7,o-7),!1,-1,-1).toResultPoint()}return l=ht.round((e.getX()+a.getX()+r.getX()+n.getX())/4),o=ht.round((e.getY()+a.getY()+r.getY()+n.getY())/4),new hr(l,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,r,n,a,l){let o=Vr.getInstance(),u=this.getDimension(),h=u/2-this.nbCenterLayers,g=u/2+this.nbCenterLayers;return o.sampleGrid(e,u,u,h,h,g,h,g,g,h,g,r.getX(),r.getY(),n.getX(),n.getY(),a.getX(),a.getY(),l.getX(),l.getY())}sampleLine(e,r,n){let a=0,l=this.distanceResultPoint(e,r),o=l/n,u=e.getX(),h=e.getY(),g=o*(r.getX()-e.getX())/l,v=o*(r.getY()-e.getY())/l;for(let S=0;S<n;S++)this.image.get(ht.round(u+S*g),ht.round(h+S*v))&&(a|=1<<n-S-1);return a}isWhiteOrBlackRectangle(e,r,n,a){let l=3;e=new hr(e.getX()-l,e.getY()+l),r=new hr(r.getX()-l,r.getY()-l),n=new hr(n.getX()+l,n.getY()-l),a=new hr(a.getX()+l,a.getY()+l);let o=this.getColor(a,e);if(o===0)return!1;let u=this.getColor(e,r);return u!==o||(u=this.getColor(r,n),u!==o)?!1:(u=this.getColor(n,a),u===o)}getColor(e,r){let n=this.distancePoint(e,r),a=(r.getX()-e.getX())/n,l=(r.getY()-e.getY())/n,o=0,u=e.getX(),h=e.getY(),g=this.image.get(e.getX(),e.getY()),v=Math.ceil(n);for(let I=0;I<v;I++)u+=a,h+=l,this.image.get(ht.round(u),ht.round(h))!==g&&o++;let S=o/n;return S>.1&&S<.9?0:S<=.1===g?1:-1}getFirstDifferent(e,r,n,a){let l=e.getX()+n,o=e.getY()+a;for(;this.isValid(l,o)&&this.image.get(l,o)===r;)l+=n,o+=a;for(l-=n,o-=a;this.isValid(l,o)&&this.image.get(l,o)===r;)l+=n;for(l-=n;this.isValid(l,o)&&this.image.get(l,o)===r;)o+=a;return o-=a,new hr(l,o)}expandSquare(e,r,n){let a=n/(2*r),l=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),u=(e[0].getX()+e[2].getX())/2,h=(e[0].getY()+e[2].getY())/2,g=new Oe(u+a*l,h+a*o),v=new Oe(u-a*l,h-a*o);l=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),u=(e[1].getX()+e[3].getX())/2,h=(e[1].getY()+e[3].getY())/2;let S=new Oe(u+a*l,h+a*o),I=new Oe(u-a*l,h-a*o);return[g,S,v,I]}isValid(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(e){let r=ht.round(e.getX()),n=ht.round(e.getY());return this.isValid(r,n)}distancePoint(e,r){return ht.distance(e.getX(),e.getY(),r.getX(),r.getY())}distanceResultPoint(e,r){return ht.distance(e.getX(),e.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ne.truncDivision(this.nbLayers-4,8)+1)+15}}class jn{decode(e,r=null){let n=null,a=new rs(e.getBlackMatrix()),l=null,o=null;try{let v=a.detectMirror(!1);l=v.getPoints(),this.reportFoundResultPoints(r,l),o=new tt().decode(v)}catch(v){n=v}if(o==null)try{let v=a.detectMirror(!0);l=v.getPoints(),this.reportFoundResultPoints(r,l),o=new tt().decode(v)}catch(v){throw n??v}let u=new Re(o.getText(),o.getRawBytes(),o.getNumBits(),l,Ne.AZTEC,X.currentTimeMillis()),h=o.getByteSegments();h!=null&&u.putMetadata(Ue.BYTE_SEGMENTS,h);let g=o.getECLevel();return g!=null&&u.putMetadata(Ue.ERROR_CORRECTION_LEVEL,g),u}reportFoundResultPoints(e,r){if(e!=null){let n=e.get(oe.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach((a,l,o)=>{n.foundPossibleResultPoint(a)})}}reset(){}}class to extends Ee{constructor(e=500){super(new jn,e)}}class Ut{decode(e,r){try{return this.doDecode(e,r)}catch{if(r&&r.get(oe.TRY_HARDER)===!0&&e.isRotateSupported()){const l=e.rotateCounterClockwise(),o=this.doDecode(l,r),u=o.getResultMetadata();let h=270;u!==null&&u.get(Ue.ORIENTATION)===!0&&(h=h+u.get(Ue.ORIENTATION)%360),o.putMetadata(Ue.ORIENTATION,h);const g=o.getResultPoints();if(g!==null){const v=l.getHeight();for(let S=0;S<g.length;S++)g[S]=new Oe(v-g[S].getY()-1,g[S].getX())}return o}else throw new B}}reset(){}doDecode(e,r){const n=e.getWidth(),a=e.getHeight();let l=new Q(n);const o=r&&r.get(oe.TRY_HARDER)===!0,u=Math.max(1,a>>(o?8:5));let h;o?h=a:h=15;const g=Math.trunc(a/2);for(let v=0;v<h;v++){const S=Math.trunc((v+1)/2),I=(v&1)===0,j=g+u*(I?S:-S);if(j<0||j>=a)break;try{l=e.getBlackRow(j,l)}catch{continue}for(let L=0;L<2;L++){if(L===1&&(l.reverse(),r&&r.get(oe.NEED_RESULT_POINT_CALLBACK)===!0)){const z=new Map;r.forEach((q,se)=>z.set(se,q)),z.delete(oe.NEED_RESULT_POINT_CALLBACK),r=z}try{const z=this.decodeRow(j,l,r);if(L===1){z.putMetadata(Ue.ORIENTATION,180);const q=z.getResultPoints();q!==null&&(q[0]=new Oe(n-q[0].getX()-1,q[0].getY()),q[1]=new Oe(n-q[1].getX()-1,q[1].getY()))}return z}catch{}}}throw new B}static recordPattern(e,r,n){const a=n.length;for(let g=0;g<a;g++)n[g]=0;const l=e.getSize();if(r>=l)throw new B;let o=!e.get(r),u=0,h=r;for(;h<l;){if(e.get(h)!==o)n[u]++;else{if(++u===a)break;n[u]=1,o=!o}h++}if(!(u===a||u===a-1&&h===l))throw new B}static recordPatternInReverse(e,r,n){let a=n.length,l=e.get(r);for(;r>0&&a>=0;)e.get(--r)!==l&&(a--,l=!l);if(a>=0)throw new B;Ut.recordPattern(e,r+1,n)}static patternMatchVariance(e,r,n){const a=e.length;let l=0,o=0;for(let g=0;g<a;g++)l+=e[g],o+=r[g];if(l<o)return Number.POSITIVE_INFINITY;const u=l/o;n*=u;let h=0;for(let g=0;g<a;g++){const v=e[g],S=r[g]*u,I=v>S?v-S:S-v;if(I>n)return Number.POSITIVE_INFINITY;h+=I}return h/l}}class je extends Ut{static findStartPattern(e){const r=e.getSize(),n=e.getNextSet(0);let a=0,l=Int32Array.from([0,0,0,0,0,0]),o=n,u=!1;const h=6;for(let g=n;g<r;g++)if(e.get(g)!==u)l[a]++;else{if(a===h-1){let v=je.MAX_AVG_VARIANCE,S=-1;for(let I=je.CODE_START_A;I<=je.CODE_START_C;I++){const j=Ut.patternMatchVariance(l,je.CODE_PATTERNS[I],je.MAX_INDIVIDUAL_VARIANCE);j<v&&(v=j,S=I)}if(S>=0&&e.isRange(Math.max(0,o-(g-o)/2),o,!1))return Int32Array.from([o,g,S]);o+=l[0]+l[1],l=l.slice(2,l.length-1),l[a-1]=0,l[a]=0,a--}else a++;l[a]=1,u=!u}throw new B}static decodeCode(e,r,n){Ut.recordPattern(e,n,r);let a=je.MAX_AVG_VARIANCE,l=-1;for(let o=0;o<je.CODE_PATTERNS.length;o++){const u=je.CODE_PATTERNS[o],h=this.patternMatchVariance(r,u,je.MAX_INDIVIDUAL_VARIANCE);h<a&&(a=h,l=o)}if(l>=0)return l;throw new B}decodeRow(e,r,n){const a=n&&n.get(oe.ASSUME_GS1)===!0,l=je.findStartPattern(r),o=l[2];let u=0;const h=new Uint8Array(20);h[u++]=o;let g;switch(o){case je.CODE_START_A:g=je.CODE_CODE_A;break;case je.CODE_START_B:g=je.CODE_CODE_B;break;case je.CODE_START_C:g=je.CODE_CODE_C;break;default:throw new Y}let v=!1,S=!1,I="",j=l[0],L=l[1];const z=Int32Array.from([0,0,0,0,0,0]);let q=0,se=0,Ae=o,Ie=0,ve=!0,ct=!1,st=!1;for(;!v;){const vn=S;switch(S=!1,q=se,se=je.decodeCode(r,z,L),h[u++]=se,se!==je.CODE_STOP&&(ve=!0),se!==je.CODE_STOP&&(Ie++,Ae+=Ie*se),j=L,L+=z.reduce((fs,ca)=>fs+ca,0),se){case je.CODE_START_A:case je.CODE_START_B:case je.CODE_START_C:throw new Y}switch(g){case je.CODE_CODE_A:if(se<64)st===ct?I+=String.fromCharCode(32+se):I+=String.fromCharCode(32+se+128),st=!1;else if(se<96)st===ct?I+=String.fromCharCode(se-64):I+=String.fromCharCode(se+64),st=!1;else switch(se!==je.CODE_STOP&&(ve=!1),se){case je.CODE_FNC_1:a&&(I.length===0?I+="]C1":I+="");break;case je.CODE_FNC_2:case je.CODE_FNC_3:break;case je.CODE_FNC_4_A:!ct&&st?(ct=!0,st=!1):ct&&st?(ct=!1,st=!1):st=!0;break;case je.CODE_SHIFT:S=!0,g=je.CODE_CODE_B;break;case je.CODE_CODE_B:g=je.CODE_CODE_B;break;case je.CODE_CODE_C:g=je.CODE_CODE_C;break;case je.CODE_STOP:v=!0;break}break;case je.CODE_CODE_B:if(se<96)st===ct?I+=String.fromCharCode(32+se):I+=String.fromCharCode(32+se+128),st=!1;else switch(se!==je.CODE_STOP&&(ve=!1),se){case je.CODE_FNC_1:a&&(I.length===0?I+="]C1":I+="");break;case je.CODE_FNC_2:case je.CODE_FNC_3:break;case je.CODE_FNC_4_B:!ct&&st?(ct=!0,st=!1):ct&&st?(ct=!1,st=!1):st=!0;break;case je.CODE_SHIFT:S=!0,g=je.CODE_CODE_A;break;case je.CODE_CODE_A:g=je.CODE_CODE_A;break;case je.CODE_CODE_C:g=je.CODE_CODE_C;break;case je.CODE_STOP:v=!0;break}break;case je.CODE_CODE_C:if(se<100)se<10&&(I+="0"),I+=se;else switch(se!==je.CODE_STOP&&(ve=!1),se){case je.CODE_FNC_1:a&&(I.length===0?I+="]C1":I+="");break;case je.CODE_CODE_A:g=je.CODE_CODE_A;break;case je.CODE_CODE_B:g=je.CODE_CODE_B;break;case je.CODE_STOP:v=!0;break}break}vn&&(g=g===je.CODE_CODE_A?je.CODE_CODE_B:je.CODE_CODE_A)}const kr=L-j;if(L=r.getNextUnset(L),!r.isRange(L,Math.min(r.getSize(),L+(L-j)/2),!1))throw new B;if(Ae-=Ie*q,Ae%103!==q)throw new Z;const $r=I.length;if($r===0)throw new B;$r>0&&ve&&(g===je.CODE_CODE_C?I=I.substring(0,$r-2):I=I.substring(0,$r-1));const tr=(l[1]+l[0])/2,Nt=j+kr/2,Wt=h.length,vr=new Uint8Array(Wt);for(let vn=0;vn<Wt;vn++)vr[vn]=h[vn];const Vn=[new Oe(tr,e),new Oe(Nt,e)];return new Re(I,vr,0,Vn,Ne.CODE_128,new Date().getTime())}}je.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],je.MAX_AVG_VARIANCE=.25,je.MAX_INDIVIDUAL_VARIANCE=.7,je.CODE_SHIFT=98,je.CODE_CODE_C=99,je.CODE_CODE_B=100,je.CODE_CODE_A=101,je.CODE_FNC_1=102,je.CODE_FNC_2=97,je.CODE_FNC_3=96,je.CODE_FNC_4_A=101,je.CODE_FNC_4_B=100,je.CODE_START_A=103,je.CODE_START_B=104,je.CODE_START_C=105,je.CODE_STOP=106;class $t extends Ut{constructor(e=!1,r=!1){super(),this.usingCheckDigit=e,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,r,n){let a=this.counters;a.fill(0),this.decodeRowResult="";let l=$t.findAsteriskPattern(r,a),o=r.getNextSet(l[1]),u=r.getSize(),h,g;do{$t.recordPattern(r,o,a);let z=$t.toNarrowWidePattern(a);if(z<0)throw new B;h=$t.patternToChar(z),this.decodeRowResult+=h,g=o;for(let q of a)o+=q;o=r.getNextSet(o)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let v=0;for(let z of a)v+=z;let S=o-g-v;if(o!==u&&S*2<v)throw new B;if(this.usingCheckDigit){let z=this.decodeRowResult.length-1,q=0;for(let se=0;se<z;se++)q+=$t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(se));if(this.decodeRowResult.charAt(z)!==$t.ALPHABET_STRING.charAt(q%43))throw new Z;this.decodeRowResult=this.decodeRowResult.substring(0,z)}if(this.decodeRowResult.length===0)throw new B;let I;this.extendedMode?I=$t.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;let j=(l[1]+l[0])/2,L=g+v/2;return new Re(I,null,0,[new Oe(j,e),new Oe(L,e)],Ne.CODE_39,new Date().getTime())}static findAsteriskPattern(e,r){let n=e.getSize(),a=e.getNextSet(0),l=0,o=a,u=!1,h=r.length;for(let g=a;g<n;g++)if(e.get(g)!==u)r[l]++;else{if(l===h-1){if(this.toNarrowWidePattern(r)===$t.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((g-o)/2)),o,!1))return[o,g];o+=r[0]+r[1],r.copyWithin(0,2,2+l-1),r[l-1]=0,r[l]=0,l--}else l++;r[l]=1,u=!u}throw new B}static toNarrowWidePattern(e){let r=e.length,n=0,a;do{let l=2147483647;for(let h of e)h<l&&h>n&&(l=h);n=l,a=0;let o=0,u=0;for(let h=0;h<r;h++){let g=e[h];g>n&&(u|=1<<r-1-h,a++,o+=g)}if(a===3){for(let h=0;h<r&&a>0;h++){let g=e[h];if(g>n&&(a--,g*2>=o))return-1}return u}}while(a>3);return-1}static patternToChar(e){for(let r=0;r<$t.CHARACTER_ENCODINGS.length;r++)if($t.CHARACTER_ENCODINGS[r]===e)return $t.ALPHABET_STRING.charAt(r);if(e===$t.ASTERISK_ENCODING)return"*";throw new B}static decodeExtended(e){let r=e.length,n="";for(let a=0;a<r;a++){let l=e.charAt(a);if(l==="+"||l==="$"||l==="%"||l==="/"){let o=e.charAt(a+1),u="\0";switch(l){case"+":if(o>="A"&&o<="Z")u=String.fromCharCode(o.charCodeAt(0)+32);else throw new Y;break;case"$":if(o>="A"&&o<="Z")u=String.fromCharCode(o.charCodeAt(0)-64);else throw new Y;break;case"%":if(o>="A"&&o<="E")u=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")u=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")u=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")u=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")u="\0";else if(o==="V")u="@";else if(o==="W")u="`";else if(o==="X"||o==="Y"||o==="Z")u="";else throw new Y;break;case"/":if(o>="A"&&o<="O")u=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")u=":";else throw new Y;break}n+=u,a++}else n+=l}return n}}$t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",$t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],$t.ASTERISK_ENCODING=148;class vt extends Ut{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,r,n){let a=this.decodeStart(r),l=this.decodeEnd(r),o=new K;vt.decodeMiddle(r,a[1],l[0],o);let u=o.toString(),h=null;n!=null&&(h=n.get(oe.ALLOWED_LENGTHS)),h==null&&(h=vt.DEFAULT_ALLOWED_LENGTHS);let g=u.length,v=!1,S=0;for(let L of h){if(g===L){v=!0;break}L>S&&(S=L)}if(!v&&g>S&&(v=!0),!v)throw new Y;const I=[new Oe(a[1],e),new Oe(l[0],e)];return new Re(u,null,0,I,Ne.ITF,new Date().getTime())}static decodeMiddle(e,r,n,a){let l=new Int32Array(10),o=new Int32Array(5),u=new Int32Array(5);for(l.fill(0),o.fill(0),u.fill(0);r<n;){Ut.recordPattern(e,r,l);for(let g=0;g<5;g++){let v=2*g;o[g]=l[v],u[g]=l[v+1]}let h=vt.decodeDigit(o);a.append(h.toString()),h=this.decodeDigit(u),a.append(h.toString()),l.forEach(function(g){r+=g})}}decodeStart(e){let r=vt.skipWhiteSpace(e),n=vt.findGuardPattern(e,r,vt.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(e,n[0]),n}validateQuietZone(e,r){let n=this.narrowLineWidth*10;n=n<r?n:r;for(let a=r-1;n>0&&a>=0&&!e.get(a);a--)n--;if(n!==0)throw new B}static skipWhiteSpace(e){const r=e.getSize(),n=e.getNextSet(0);if(n===r)throw new B;return n}decodeEnd(e){e.reverse();try{let r=vt.skipWhiteSpace(e),n;try{n=vt.findGuardPattern(e,r,vt.END_PATTERN_REVERSED[0])}catch(l){l instanceof B&&(n=vt.findGuardPattern(e,r,vt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,n[0]);let a=n[0];return n[0]=e.getSize()-n[1],n[1]=e.getSize()-a,n}finally{e.reverse()}}static findGuardPattern(e,r,n){let a=n.length,l=new Int32Array(a),o=e.getSize(),u=!1,h=0,g=r;l.fill(0);for(let v=r;v<o;v++)if(e.get(v)!==u)l[h]++;else{if(h===a-1){if(Ut.patternMatchVariance(l,n,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return[g,v];g+=l[0]+l[1],X.arraycopy(l,2,l,0,h-1),l[h-1]=0,l[h]=0,h--}else h++;l[h]=1,u=!u}throw new B}static decodeDigit(e){let r=vt.MAX_AVG_VARIANCE,n=-1,a=vt.PATTERNS.length;for(let l=0;l<a;l++){let o=vt.PATTERNS[l],u=Ut.patternMatchVariance(e,o,vt.MAX_INDIVIDUAL_VARIANCE);u<r?(r=u,n=l):u===r&&(n=-1)}if(n>=0)return n%10;throw new B}}vt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],vt.MAX_AVG_VARIANCE=.38,vt.MAX_INDIVIDUAL_VARIANCE=.5,vt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],vt.START_PATTERN=Int32Array.from([1,1,1,1]),vt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Rt extends Ut{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let r=!1,n,a=0,l=Int32Array.from([0,0,0]);for(;!r;){l=Int32Array.from([0,0,0]),n=Rt.findGuardPattern(e,a,!1,this.START_END_PATTERN,l);let o=n[0];a=n[1];let u=o-(a-o);u>=0&&(r=e.isRange(u,o,!1))}return n}static checkChecksum(e){return Rt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let n=parseInt(e.charAt(r-1),10);return Rt.getStandardUPCEANChecksum(e.substring(0,r-1))===n}static getStandardUPCEANChecksum(e){let r=e.length,n=0;for(let a=r-1;a>=0;a-=2){let l=e.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new Y;n+=l}n*=3;for(let a=r-2;a>=0;a-=2){let l=e.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new Y;n+=l}return(1e3-n)%10}static decodeEnd(e,r){return Rt.findGuardPattern(e,r,!1,Rt.START_END_PATTERN,new Int32Array(Rt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,r,n,a){return this.findGuardPattern(e,r,n,a,new Int32Array(a.length))}static findGuardPattern(e,r,n,a,l){let o=e.getSize();r=n?e.getNextUnset(r):e.getNextSet(r);let u=0,h=r,g=a.length,v=n;for(let S=r;S<o;S++)if(e.get(S)!==v)l[u]++;else{if(u===g-1){if(Ut.patternMatchVariance(l,a,Rt.MAX_INDIVIDUAL_VARIANCE)<Rt.MAX_AVG_VARIANCE)return Int32Array.from([h,S]);h+=l[0]+l[1];let I=l.slice(2,l.length-1);for(let j=0;j<u-1;j++)l[j]=I[j];l[u-1]=0,l[u]=0,u--}else u++;l[u]=1,v=!v}throw new B}static decodeDigit(e,r,n,a){this.recordPattern(e,n,r);let l=this.MAX_AVG_VARIANCE,o=-1,u=a.length;for(let h=0;h<u;h++){let g=a[h],v=Ut.patternMatchVariance(r,g,Rt.MAX_INDIVIDUAL_VARIANCE);v<l&&(l=v,o=h)}if(o>=0)return o;throw new B}}Rt.MAX_AVG_VARIANCE=.48,Rt.MAX_INDIVIDUAL_VARIANCE=.7,Rt.START_END_PATTERN=Int32Array.from([1,1,1]),Rt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Rt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Rt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Un{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,n){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(r,n,a),o=a.toString(),u=Un.parseExtensionString(o),h=[new Oe((n[0]+n[1])/2,e),new Oe(l,e)],g=new Re(o,null,0,h,Ne.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&g.putAllMetadata(u),g}decodeMiddle(e,r,n){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=e.getSize(),o=r[1],u=0;for(let g=0;g<5&&o<l;g++){let v=Rt.decodeDigit(e,a,o,Rt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+v%10);for(let S of a)o+=S;v>=10&&(u|=1<<4-g),g!==4&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(n.length!==5)throw new B;let h=this.determineCheckDigit(u);if(Un.extensionChecksum(n.toString())!==h)throw new B;return o}static extensionChecksum(e){let r=e.length,n=0;for(let a=r-2;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;n*=3;for(let a=r-1;a>=0;a-=2)n+=e.charAt(a).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(e){for(let r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new B}static parseExtensionString(e){if(e.length!==5)return null;let r=Un.parseExtension5String(e);return r==null?null:new Map([[Ue.SUGGESTED_PRICE,r]])}static parseExtension5String(e){let r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let n=parseInt(e.substring(1)),a=(n/100).toString(),l=n%100,o=l<10?"0"+l:l.toString();return r+a+"."+o}}class _s{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,n){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(r,n,a),o=a.toString(),u=_s.parseExtensionString(o),h=[new Oe((n[0]+n[1])/2,e),new Oe(l,e)],g=new Re(o,null,0,h,Ne.UPC_EAN_EXTENSION,new Date().getTime());return u!=null&&g.putAllMetadata(u),g}decodeMiddle(e,r,n){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=e.getSize(),o=r[1],u=0;for(let h=0;h<2&&o<l;h++){let g=Rt.decodeDigit(e,a,o,Rt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+g%10);for(let v of a)o+=v;g>=10&&(u|=1<<1-h),h!==1&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(n.length!==2)throw new B;if(parseInt(n.toString())%4!==u)throw new B;return o}static parseExtensionString(e){return e.length!==2?null:new Map([[Ue.ISSUE_NUMBER,parseInt(e)]])}}class oi{static decodeRow(e,r,n){let a=Rt.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Un().decodeRow(e,r,a)}catch{return new _s().decodeRow(e,r,a)}}}oi.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ut extends Rt{constructor(){super(),this.decodeRowStringBuffer="",ut.L_AND_G_PATTERNS=ut.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let r=ut.L_PATTERNS[e-10],n=new Int32Array(r.length);for(let a=0;a<r.length;a++)n[a]=r[r.length-a-1];ut.L_AND_G_PATTERNS[e]=n}}decodeRow(e,r,n){let a=ut.findStartGuardPattern(r),l=n==null?null:n.get(oe.NEED_RESULT_POINT_CALLBACK);if(l!=null){const ve=new Oe((a[0]+a[1])/2,e);l.foundPossibleResultPoint(ve)}let o=this.decodeMiddle(r,a,this.decodeRowStringBuffer),u=o.rowOffset,h=o.resultString;if(l!=null){const ve=new Oe(u,e);l.foundPossibleResultPoint(ve)}let g=this.decodeEnd(r,u);if(l!=null){const ve=new Oe((g[0]+g[1])/2,e);l.foundPossibleResultPoint(ve)}let v=g[1],S=v+(v-g[0]);if(S>=r.getSize()||!r.isRange(v,S,!1))throw new B;let I=h.toString();if(I.length<8)throw new Y;if(!ut.checkChecksum(I))throw new Z;let j=(a[1]+a[0])/2,L=(g[1]+g[0])/2,z=this.getBarcodeFormat(),q=[new Oe(j,e),new Oe(L,e)],se=new Re(I,null,0,q,z,new Date().getTime()),Ae=0;try{let ve=oi.decodeRow(e,r,g[1]);se.putMetadata(Ue.UPC_EAN_EXTENSION,ve.getText()),se.putAllMetadata(ve.getResultMetadata()),se.addResultPoints(ve.getResultPoints()),Ae=ve.getText().length}catch{}let Ie=n==null?null:n.get(oe.ALLOWED_EAN_EXTENSIONS);if(Ie!=null){let ve=!1;for(let ct in Ie)if(Ae.toString()===ct){ve=!0;break}if(!ve)throw new B}return se}decodeEnd(e,r){return ut.findGuardPattern(e,r,!1,ut.START_END_PATTERN,new Int32Array(ut.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return ut.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let n=parseInt(e.charAt(r-1),10);return ut.getStandardUPCEANChecksum(e.substring(0,r-1))===n}static getStandardUPCEANChecksum(e){let r=e.length,n=0;for(let a=r-1;a>=0;a-=2){let l=e.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new Y;n+=l}n*=3;for(let a=r-2;a>=0;a-=2){let l=e.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new Y;n+=l}return(1e3-n)%10}}class Pr extends ut{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,n){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=e.getSize(),o=r[1],u=0;for(let g=0;g<6&&o<l;g++){let v=ut.decodeDigit(e,a,o,ut.L_AND_G_PATTERNS);n+=String.fromCharCode(48+v%10);for(let S of a)o+=S;v>=10&&(u|=1<<5-g)}n=Pr.determineFirstDigit(n,u),o=ut.findGuardPattern(e,o,!0,ut.MIDDLE_PATTERN,new Int32Array(ut.MIDDLE_PATTERN.length).fill(0))[1];for(let g=0;g<6&&o<l;g++){let v=ut.decodeDigit(e,a,o,ut.L_PATTERNS);n+=String.fromCharCode(48+v);for(let S of a)o+=S}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return Ne.EAN_13}static determineFirstDigit(e,r){for(let n=0;n<10;n++)if(r===this.FIRST_DIGIT_ENCODINGS[n])return e=String.fromCharCode(48+n)+e,e;throw new B}}Pr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Hi extends ut{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,n){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=e.getSize(),o=r[1];for(let h=0;h<4&&o<l;h++){let g=ut.decodeDigit(e,a,o,ut.L_PATTERNS);n+=String.fromCharCode(48+g);for(let v of a)o+=v}o=ut.findGuardPattern(e,o,!0,ut.MIDDLE_PATTERN,new Int32Array(ut.MIDDLE_PATTERN.length).fill(0))[1];for(let h=0;h<4&&o<l;h++){let g=ut.decodeDigit(e,a,o,ut.L_PATTERNS);n+=String.fromCharCode(48+g);for(let v of a)o+=v}return{rowOffset:o,resultString:n}}getBarcodeFormat(){return Ne.EAN_8}}class Gi extends ut{constructor(){super(...arguments),this.ean13Reader=new Pr}getBarcodeFormat(){return Ne.UPC_A}decode(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,r,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,n))}decodeMiddle(e,r,n){return this.ean13Reader.decodeMiddle(e,r,n)}maybeReturnResult(e){let r=e.getText();if(r.charAt(0)==="0"){let n=new Re(r.substring(1),null,null,e.getResultPoints(),Ne.UPC_A);return e.getResultMetadata()!=null&&n.putAllMetadata(e.getResultMetadata()),n}else throw new B}reset(){this.ean13Reader.reset()}}class Br extends ut{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,r,n){const a=this.decodeMiddleCounters.map(g=>g);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const l=e.getSize();let o=r[1],u=0;for(let g=0;g<6&&o<l;g++){const v=Br.decodeDigit(e,a,o,Br.L_AND_G_PATTERNS);n+=String.fromCharCode(48+v%10);for(let S of a)o+=S;v>=10&&(u|=1<<5-g)}let h=Br.determineNumSysAndCheckDigit(n,u);return{rowOffset:o,resultString:h}}decodeEnd(e,r){return Br.findGuardPatternWithoutCounters(e,r,!0,Br.MIDDLE_END_PATTERN)}checkChecksum(e){return ut.checkChecksum(Br.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,r){for(let n=0;n<=1;n++)for(let a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][a]){let l=String.fromCharCode(48+n),o=String.fromCharCode(48+a);return l+e+o}throw B.getNotFoundInstance()}getBarcodeFormat(){return Ne.UPC_E}static convertUPCEtoUPCA(e){const r=e.slice(1,7).split("").map(l=>l.charCodeAt(0)),n=new K;n.append(e.charAt(0));let a=r[5];switch(a){case 0:case 1:case 2:n.appendChars(r,0,2),n.append(a),n.append("0000"),n.appendChars(r,2,3);break;case 3:n.appendChars(r,0,3),n.append("00000"),n.appendChars(r,3,2);break;case 4:n.appendChars(r,0,4),n.append("00000"),n.append(r[4]);break;default:n.appendChars(r,0,5),n.append("0000"),n.append(a);break}return e.length>=8&&n.append(e.charAt(7)),n.toString()}}Br.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Br.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ci extends Ut{constructor(e){super();let r=e==null?null:e.get(oe.POSSIBLE_FORMATS),n=[];b(r)?(n.push(new Pr),n.push(new Gi),n.push(new Hi),n.push(new Br)):(r.indexOf(Ne.EAN_13)>-1&&n.push(new Pr),r.indexOf(Ne.UPC_A)>-1&&n.push(new Gi),r.indexOf(Ne.EAN_8)>-1&&n.push(new Hi),r.indexOf(Ne.UPC_E)>-1&&n.push(new Br)),this.readers=n}decodeRow(e,r,n){for(let a of this.readers)try{const l=a.decodeRow(e,r,n),o=l.getBarcodeFormat()===Ne.EAN_13&&l.getText().charAt(0)==="0",u=n==null?null:n.get(oe.POSSIBLE_FORMATS),h=u==null||u.includes(Ne.UPC_A);if(o&&h){const g=l.getRawBytes(),v=new Re(l.getText().substring(1),g,g?g.length:null,l.getResultPoints(),Ne.UPC_A);return v.putAllMetadata(l.getResultMetadata()),v}return l}catch{}throw new B}reset(){for(let e of this.readers)e.reset()}}class ir extends Ut{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,r){for(let n=0;n<r.length;n++)if(Ut.patternMatchVariance(e,r[n],ir.MAX_INDIVIDUAL_VARIANCE)<ir.MAX_AVG_VARIANCE)return n;throw new B}static count(e){return ht.sum(new Int32Array(e))}static increment(e,r){let n=0,a=r[0];for(let l=1;l<e.length;l++)r[l]>a&&(a=r[l],n=l);e[n]++}static decrement(e,r){let n=0,a=r[0];for(let l=1;l<e.length;l++)r[l]<a&&(a=r[l],n=l);e[n]--}static isFinderPattern(e){let r=e[0]+e[1],n=r+e[2]+e[3],a=r/n;if(a>=ir.MIN_FINDER_PATTERN_RATIO&&a<=ir.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;for(let u of e)u>o&&(o=u),u<l&&(l=u);return o<10*l}return!1}}ir.MAX_AVG_VARIANCE=.2,ir.MAX_INDIVIDUAL_VARIANCE=.45,ir.MIN_FINDER_PATTERN_RATIO=9.5/12,ir.MAX_FINDER_PATTERN_RATIO=12.5/14;class Rn{constructor(e,r){this.value=e,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Rn))return!1;const r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ms{constructor(e,r,n,a,l){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Oe(n,l)),this.resultPoints.push(new Oe(a,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Ms))return!1;const r=e;return this.value===r.value}hashCode(){return this.value}}class Er{constructor(){}static getRSSvalue(e,r,n){let a=0;for(let h of e)a+=h;let l=0,o=0,u=e.length;for(let h=0;h<u-1;h++){let g;for(g=1,o|=1<<h;g<e[h];g++,o&=~(1<<h)){let v=Er.combins(a-g-1,u-h-2);if(n&&o===0&&a-g-(u-h-1)>=u-h-1&&(v-=Er.combins(a-g-(u-h),u-h-2)),u-h-1>1){let S=0;for(let I=a-g-(u-h-2);I>r;I--)S+=Er.combins(a-g-I-1,u-h-3);v-=S*(u-1-h)}else a-g>r&&v--;l+=v}a-=g}return l}static combins(e,r){let n,a;e-r>r?(a=r,n=e-r):(a=e-r,n=r);let l=1,o=1;for(let u=e;u>n;u--)l*=u,o<=a&&(l/=o,o++);for(;o<=a;)l/=o,o++;return l}}class Vi{static buildBitArray(e){let r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);let n=12*r,a=new Q(n),l=0,u=e[0].getRightChar().getValue();for(let h=11;h>=0;--h)(u&1<<h)!=0&&a.set(l),l++;for(let h=1;h<e.length;++h){let g=e[h],v=g.getLeftChar().getValue();for(let S=11;S>=0;--S)(v&1<<S)!=0&&a.set(l),l++;if(g.getRightChar()!=null){let S=g.getRightChar().getValue();for(let I=11;I>=0;--I)(S&1<<I)!=0&&a.set(l),l++}}return a}}class Xr{constructor(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Xi{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class nr extends Xi{constructor(e,r){super(e),this.value=r}getValue(){return this.value}isFNC1(){return this.value===nr.FNC1}}nr.FNC1="$";class an extends Xi{constructor(e,r,n){super(e),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class yr extends Xi{constructor(e,r,n){if(super(e),r<0||r>10||n<0||n>10)throw new Y;this.firstDigit=r,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===yr.FNC1}isSecondDigitFNC1(){return this.secondDigit===yr.FNC1}isAnyFNC1(){return this.firstDigit===yr.FNC1||this.secondDigit===yr.FNC1}}yr.FNC1=10;class _e{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new B;let r=e.substring(0,2);for(let l of _e.TWO_DIGIT_DATA_LENGTH)if(l[0]===r)return l[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(2,l[2],e):_e.processFixedAI(2,l[1],e);if(e.length<3)throw new B;let n=e.substring(0,3);for(let l of _e.THREE_DIGIT_DATA_LENGTH)if(l[0]===n)return l[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(3,l[2],e):_e.processFixedAI(3,l[1],e);for(let l of _e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===n)return l[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(4,l[2],e):_e.processFixedAI(4,l[1],e);if(e.length<4)throw new B;let a=e.substring(0,4);for(let l of _e.FOUR_DIGIT_DATA_LENGTH)if(l[0]===a)return l[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(4,l[2],e):_e.processFixedAI(4,l[1],e);throw new B}static processFixedAI(e,r,n){if(n.length<e)throw new B;let a=n.substring(0,e);if(n.length<e+r)throw new B;let l=n.substring(e,e+r),o=n.substring(e+r),u="("+a+")"+l,h=_e.parseFieldsInGeneralPurpose(o);return h==null?u:u+h}static processVariableAI(e,r,n){let a=n.substring(0,e),l;n.length<e+r?l=n.length:l=e+r;let o=n.substring(e,l),u=n.substring(l),h="("+a+")"+o,g=_e.parseFieldsInGeneralPurpose(u);return g==null?h:h+g}}_e.VARIABLE_LENGTH=[],_e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",_e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",_e.VARIABLE_LENGTH,20],["22",_e.VARIABLE_LENGTH,29],["30",_e.VARIABLE_LENGTH,8],["37",_e.VARIABLE_LENGTH,8],["90",_e.VARIABLE_LENGTH,30],["91",_e.VARIABLE_LENGTH,30],["92",_e.VARIABLE_LENGTH,30],["93",_e.VARIABLE_LENGTH,30],["94",_e.VARIABLE_LENGTH,30],["95",_e.VARIABLE_LENGTH,30],["96",_e.VARIABLE_LENGTH,30],["97",_e.VARIABLE_LENGTH,3],["98",_e.VARIABLE_LENGTH,30],["99",_e.VARIABLE_LENGTH,30]],_e.THREE_DIGIT_DATA_LENGTH=[["240",_e.VARIABLE_LENGTH,30],["241",_e.VARIABLE_LENGTH,30],["242",_e.VARIABLE_LENGTH,6],["250",_e.VARIABLE_LENGTH,30],["251",_e.VARIABLE_LENGTH,30],["253",_e.VARIABLE_LENGTH,17],["254",_e.VARIABLE_LENGTH,20],["400",_e.VARIABLE_LENGTH,30],["401",_e.VARIABLE_LENGTH,30],["402",17],["403",_e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",_e.VARIABLE_LENGTH,20],["421",_e.VARIABLE_LENGTH,15],["422",3],["423",_e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],_e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",_e.VARIABLE_LENGTH,15],["391",_e.VARIABLE_LENGTH,18],["392",_e.VARIABLE_LENGTH,15],["393",_e.VARIABLE_LENGTH,18],["703",_e.VARIABLE_LENGTH,30]],_e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",_e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",_e.VARIABLE_LENGTH,20],["8003",_e.VARIABLE_LENGTH,30],["8004",_e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",_e.VARIABLE_LENGTH,30],["8008",_e.VARIABLE_LENGTH,12],["8018",18],["8020",_e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",_e.VARIABLE_LENGTH,70],["8200",_e.VARIABLE_LENGTH,70]];class ns{constructor(e){this.buffer=new K,this.information=e}decodeAllCodes(e,r){let n=r,a=null;do{let l=this.decodeGeneralPurposeField(n,a),o=_e.parseFieldsInGeneralPurpose(l.getNewString());if(o!=null&&e.append(o),l.isRemaining()?a=""+l.getRemainingValue():a=null,n===l.getNewPosition())break;n=l.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(e,4);return l===0?new yr(this.information.getSize(),yr.FNC1,yr.FNC1):new yr(this.information.getSize(),l-1,yr.FNC1)}let r=this.extractNumericValueFromBitArray(e,7),n=(r-8)/11,a=(r-8)%11;return new yr(e+7,n,a)}extractNumericValueFromBitArray(e,r){return ns.extractNumericValueFromBitArray(this.information,e,r)}static extractNumericValueFromBitArray(e,r,n){let a=0;for(let l=0;l<n;++l)e.get(r+l)&&(a|=1<<n-l-1);return a}decodeGeneralPurposeField(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new an(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new an(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,r;do{let n=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished()),!(n!==this.current.getPosition())&&!e)break}while(!e);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let r;return e.isSecondDigitFNC1()?r=new an(this.current.getPosition(),this.buffer.toString()):r=new an(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Xr(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let r=new an(this.current.getPosition(),this.buffer.toString());return new Xr(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Xr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new an(this.current.getPosition(),this.buffer.toString());return new Xr(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Xr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new an(this.current.getPosition(),this.buffer.toString());return new Xr(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Xr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253}decodeIsoIec646(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new nr(e+5,nr.FNC1);if(r>=5&&r<15)return new nr(e+5,"0"+(r-5));let n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new nr(e+7,""+(n+1));if(n>=90&&n<116)return new nr(e+7,""+(n+7));let a=this.extractNumericValueFromBitArray(e,8),l;switch(a){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new Y}return new nr(e+8,l)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63}decodeAlphanumeric(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new nr(e+5,nr.FNC1);if(r>=5&&r<15)return new nr(e+5,"0"+(r-5));let n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new nr(e+6,""+(n+33));let a;switch(n){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new At("Decoding invalid alphanumeric value: "+n)}return new nr(e+6,a)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0}}class Yi{constructor(e){this.information=e,this.generalDecoder=new ns(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Sr extends Yi{constructor(e){super(e)}encodeCompressedGtin(e,r){e.append("(01)");let n=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,n)}encodeCompressedGtinWithoutAI(e,r,n){for(let a=0;a<4;++a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);l/100===0&&e.append("0"),l/10===0&&e.append("0"),e.append(l)}Sr.appendCheckDigit(e,n)}static appendCheckDigit(e,r){let n=0;for(let a=0;a<13;a++){let l=e.charAt(a+r).charCodeAt(0)-48;n+=(a&1)===0?3*l:l}n=10-n%10,n===10&&(n=0),e.append(n)}}Sr.GTIN_SIZE=40;class Lr extends Sr{constructor(e){super(e)}parseInformation(){let e=new K;e.append("(01)");let r=e.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Lr.HEADER_SIZE,4);return e.append(n),this.encodeCompressedGtinWithoutAI(e,Lr.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,Lr.HEADER_SIZE+44)}}Lr.HEADER_SIZE=4;class Os extends Yi{constructor(e){super(e)}parseInformation(){let e=new K;return this.getGeneralDecoder().decodeAllCodes(e,Os.HEADER_SIZE)}}Os.HEADER_SIZE=5;class Ds extends Sr{constructor(e){super(e)}encodeCompressedWeight(e,r,n){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,n);this.addWeightCode(e,a);let l=this.checkWeight(a),o=1e5;for(let u=0;u<5;++u)l/o===0&&e.append("0"),o/=10;e.append(l)}}class ln extends Ds{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=ln.HEADER_SIZE+Ds.GTIN_SIZE+ln.WEIGHT_SIZE)throw new B;let e=new K;return this.encodeCompressedGtin(e,ln.HEADER_SIZE),this.encodeCompressedWeight(e,ln.HEADER_SIZE+Ds.GTIN_SIZE,ln.WEIGHT_SIZE),e.toString()}}ln.HEADER_SIZE=5,ln.WEIGHT_SIZE=15;class La extends ln{constructor(e){super(e)}addWeightCode(e,r){e.append("(3103)")}checkWeight(e){return e}}class Fa extends ln{constructor(e){super(e)}addWeightCode(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Yr extends Sr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Yr.HEADER_SIZE+Sr.GTIN_SIZE)throw new B;let e=new K;this.encodeCompressedGtin(e,Yr.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(Yr.HEADER_SIZE+Sr.GTIN_SIZE,Yr.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Yr.HEADER_SIZE+Sr.GTIN_SIZE+Yr.LAST_DIGIT_SIZE,null);return e.append(n.getNewString()),e.toString()}}Yr.HEADER_SIZE=8,Yr.LAST_DIGIT_SIZE=2;class fr extends Sr{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<fr.HEADER_SIZE+Sr.GTIN_SIZE)throw new B;let e=new K;this.encodeCompressedGtin(e,fr.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(fr.HEADER_SIZE+Sr.GTIN_SIZE,fr.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(fr.HEADER_SIZE+Sr.GTIN_SIZE+fr.LAST_DIGIT_SIZE,fr.FIRST_THREE_DIGITS_SIZE);n/100==0&&e.append("0"),n/10==0&&e.append("0"),e.append(n);let a=this.getGeneralDecoder().decodeGeneralPurposeField(fr.HEADER_SIZE+Sr.GTIN_SIZE+fr.LAST_DIGIT_SIZE+fr.FIRST_THREE_DIGITS_SIZE,null);return e.append(a.getNewString()),e.toString()}}fr.HEADER_SIZE=8,fr.LAST_DIGIT_SIZE=2,fr.FIRST_THREE_DIGITS_SIZE=10;class _t extends Ds{constructor(e,r,n){super(e),this.dateCode=n,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=_t.HEADER_SIZE+_t.GTIN_SIZE+_t.WEIGHT_SIZE+_t.DATE_SIZE)throw new B;let e=new K;return this.encodeCompressedGtin(e,_t.HEADER_SIZE),this.encodeCompressedWeight(e,_t.HEADER_SIZE+_t.GTIN_SIZE,_t.WEIGHT_SIZE),this.encodeCompressedDate(e,_t.HEADER_SIZE+_t.GTIN_SIZE+_t.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(r,_t.DATE_SIZE);if(n==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let a=n%32;n/=32;let l=n%12+1;n/=12;let o=n;o/10==0&&e.append("0"),e.append(o),l/10==0&&e.append("0"),e.append(l),a/10==0&&e.append("0"),e.append(a)}addWeightCode(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")}checkWeight(e){return e%1e5}}_t.HEADER_SIZE=8,_t.WEIGHT_SIZE=20,_t.DATE_SIZE=16;function Ua(E){try{if(E.get(1))return new Lr(E);if(!E.get(2))return new Os(E);switch(ns.extractNumericValueFromBitArray(E,1,4)){case 4:return new La(E);case 5:return new Fa(E)}switch(ns.extractNumericValueFromBitArray(E,1,5)){case 12:return new Yr(E);case 13:return new fr(E)}switch(ns.extractNumericValueFromBitArray(E,1,7)){case 56:return new _t(E,"310","11");case 57:return new _t(E,"320","11");case 58:return new _t(E,"310","13");case 59:return new _t(E,"320","13");case 60:return new _t(E,"310","15");case 61:return new _t(E,"320","15");case 62:return new _t(E,"310","17");case 63:return new _t(E,"320","17")}}catch(e){throw console.log(e),new At("unknown decoder: "+E)}}class Ct{constructor(e,r,n,a){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,r){return e instanceof Ct?Ct.equalsOrNull(e.leftchar,r.leftchar)&&Ct.equalsOrNull(e.rightchar,r.rightchar)&&Ct.equalsOrNull(e.finderpattern,r.finderpattern):!1}static equalsOrNull(e,r){return e===null?r===null:Ct.equals(e,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Zi{constructor(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,r){return e instanceof Zi?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1}checkEqualitity(e,r){if(!e||!r)return;let n;return e.forEach((a,l)=>{r.forEach(o=>{a.getLeftChar().getValue()===o.getLeftChar().getValue()&&a.getRightChar().getValue()===o.getRightChar().getValue()&&a.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(n=!0)})}),n}}class pe extends ir{constructor(e){super(...arguments),this.pairs=new Array(pe.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,r,n){this.pairs.length=0,this.startFromEven=!1;try{return pe.constructResult(this.decodeRow2pairs(e,r))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,pe.constructResult(this.decodeRow2pairs(e,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,r){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(l){if(l instanceof B){if(!this.pairs.length)throw new B;n=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(e,!1),a){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new B}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return e&&(this.rows=this.rows.reverse()),r}checkRows(e,r){for(let n=r;n<this.rows.length;n++){let a=this.rows[n];this.pairs.length=0;for(let o of e)this.pairs.push(o.getPairs());if(this.pairs.push(a.getPairs()),!pe.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(e);l.push(a);try{return this.checkRows(l,n+1)}catch(o){this.verbose&&console.log(o)}}throw new B}static isValidSequence(e){for(let r of pe.FINDER_PATTERN_SEQUENCES){if(e.length>r.length)continue;let n=!0;for(let a=0;a<e.length;a++)if(e[a].getFinderPattern().getValue()!=r[a]){n=!1;break}if(n)return!0}return!1}storeRow(e,r){let n=0,a=!1,l=!1;for(;n<this.rows.length;){let o=this.rows[n];if(o.getRowNumber()>e){l=o.isEquivalent(this.pairs);break}a=o.isEquivalent(this.pairs),n++}l||a||pe.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new Zi(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,r){for(let n of r)if(n.getPairs().length!==e.length){for(let a of n.getPairs())for(let l of e)if(Ct.equals(a,l))break}}static isPartialRow(e,r){for(let n of r){let a=!0;for(let l of e){let o=!1;for(let u of n.getPairs())if(l.equals(u)){o=!0;break}if(!o){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(e){let r=Vi.buildBitArray(e),a=Ua(r).parseInformation(),l=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),u=[l[0],l[1],o[0],o[1]];return new Re(a,null,null,u,Ne.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),r=e.getLeftChar(),n=e.getRightChar();if(n==null)return!1;let a=n.getChecksumPortion(),l=2;for(let u=1;u<this.pairs.size();++u){let h=this.pairs.get(u);a+=h.getLeftChar().getChecksumPortion(),l++;let g=h.getRightChar();g!=null&&(a+=g.getChecksumPortion(),l++)}return a%=211,211*(l-4)+a==r.getValue()}static getNextSecondBar(e,r){let n;return e.get(r)?(n=e.getNextUnset(r),n=e.getNextSet(n)):(n=e.getNextSet(r),n=e.getNextUnset(n)),n}retrieveNextPair(e,r,n){let a=r.length%2==0;this.startFromEven&&(a=!a);let l,o=!0,u=-1;do this.findNextPair(e,r,u),l=this.parseFoundFinderPattern(e,n,a),l==null?u=pe.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);let h=this.decodeDataCharacter(e,l,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new B;let g;try{g=this.decodeDataCharacter(e,l,a,!1)}catch(v){g=null,this.verbose&&console.log(v)}return new Ct(h,g,l,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,r,n){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=e.getSize(),o;n>=0?o=n:this.isEmptyPair(r)?o=0:o=r[r.length-1].getFinderPattern().getStartEnd()[1];let u=r.length%2!=0;this.startFromEven&&(u=!u);let h=!1;for(;o<l&&(h=!e.get(o),!!h);)o++;let g=0,v=o;for(let S=o;S<l;S++)if(e.get(S)!=h)a[g]++;else{if(g==3){if(u&&pe.reverseCounters(a),pe.isFinderPattern(a)){this.startEnd[0]=v,this.startEnd[1]=S;return}u&&pe.reverseCounters(a),v+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,h=!h}throw new B}static reverseCounters(e){let r=e.length;for(let n=0;n<r/2;++n){let a=e[n];e[n]=e[r-n-1],e[r-n-1]=a}}parseFoundFinderPattern(e,r,n){let a,l,o;if(n){let g=this.startEnd[0]-1;for(;g>=0&&!e.get(g);)g--;g++,a=this.startEnd[0]-g,l=g,o=this.startEnd[1]}else l=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),a=o-this.startEnd[1];let u=this.getDecodeFinderCounters();X.arraycopy(u,0,u,1,u.length-1),u[0]=a;let h;try{h=this.parseFinderValue(u,pe.FINDER_PATTERNS)}catch{return null}return new Ms(h,[l,o],l,o,r)}decodeDataCharacter(e,r,n,a){let l=this.getDataCharacterCounters();for(let Nt=0;Nt<l.length;Nt++)l[Nt]=0;if(a)pe.recordPatternInReverse(e,r.getStartEnd()[0],l);else{pe.recordPattern(e,r.getStartEnd()[1],l);for(let Nt=0,Wt=l.length-1;Nt<Wt;Nt++,Wt--){let vr=l[Nt];l[Nt]=l[Wt],l[Wt]=vr}}let o=17,u=ht.sum(new Int32Array(l))/o,h=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(u-h)/h>.3)throw new B;let g=this.getOddCounts(),v=this.getEvenCounts(),S=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let Nt=0;Nt<l.length;Nt++){let Wt=1*l[Nt]/u,vr=Wt+.5;if(vr<1){if(Wt<.3)throw new B;vr=1}else if(vr>8){if(Wt>8.7)throw new B;vr=8}let Vn=Nt/2;(Nt&1)==0?(g[Vn]=vr,S[Vn]=Wt-vr):(v[Vn]=vr,I[Vn]=Wt-vr)}this.adjustOddEvenCounts(o);let j=4*r.getValue()+(n?0:2)+(a?0:1)-1,L=0,z=0;for(let Nt=g.length-1;Nt>=0;Nt--){if(pe.isNotA1left(r,n,a)){let Wt=pe.WEIGHTS[j][2*Nt];z+=g[Nt]*Wt}L+=g[Nt]}let q=0;for(let Nt=v.length-1;Nt>=0;Nt--)if(pe.isNotA1left(r,n,a)){let Wt=pe.WEIGHTS[j][2*Nt+1];q+=v[Nt]*Wt}let se=z+q;if((L&1)!=0||L>13||L<4)throw new B;let Ae=(13-L)/2,Ie=pe.SYMBOL_WIDEST[Ae],ve=9-Ie,ct=Er.getRSSvalue(g,Ie,!0),st=Er.getRSSvalue(v,ve,!1),kr=pe.EVEN_TOTAL_SUBSET[Ae],$r=pe.GSUM[Ae],tr=ct*kr+st+$r;return new Rn(tr,se)}static isNotA1left(e,r,n){return!(e.getValue()==0&&r&&n)}adjustOddEvenCounts(e){let r=ht.sum(new Int32Array(this.getOddCounts())),n=ht.sum(new Int32Array(this.getEvenCounts())),a=!1,l=!1;r>13?l=!0:r<4&&(a=!0);let o=!1,u=!1;n>13?u=!0:n<4&&(o=!0);let h=r+n-e,g=(r&1)==1,v=(n&1)==0;if(h==1)if(g){if(v)throw new B;l=!0}else{if(!v)throw new B;u=!0}else if(h==-1)if(g){if(v)throw new B;a=!0}else{if(!v)throw new B;o=!0}else if(h==0){if(g){if(!v)throw new B;r<n?(a=!0,u=!0):(l=!0,o=!0)}else if(v)throw new B}else throw new B;if(a){if(l)throw new B;pe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&pe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(u)throw new B;pe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}u&&pe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pe.SYMBOL_WIDEST=[7,5,4,3,1],pe.EVEN_TOTAL_SUBSET=[4,20,52,104,204],pe.GSUM=[0,348,1388,2948,3988],pe.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],pe.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],pe.FINDER_PAT_A=0,pe.FINDER_PAT_B=1,pe.FINDER_PAT_C=2,pe.FINDER_PAT_D=3,pe.FINDER_PAT_E=4,pe.FINDER_PAT_F=5,pe.FINDER_PATTERN_SEQUENCES=[[pe.FINDER_PAT_A,pe.FINDER_PAT_A],[pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B],[pe.FINDER_PAT_A,pe.FINDER_PAT_C,pe.FINDER_PAT_B,pe.FINDER_PAT_D],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_C],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_D,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_E,pe.FINDER_PAT_B,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_D],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_E],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F],[pe.FINDER_PAT_A,pe.FINDER_PAT_A,pe.FINDER_PAT_B,pe.FINDER_PAT_B,pe.FINDER_PAT_C,pe.FINDER_PAT_D,pe.FINDER_PAT_D,pe.FINDER_PAT_E,pe.FINDER_PAT_E,pe.FINDER_PAT_F,pe.FINDER_PAT_F]],pe.MAX_PAIRS=11;class Wa extends Rn{constructor(e,r,n){super(e,r),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Tt extends ir{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,r,n){const a=this.decodePair(r,!1,e,n);Tt.addOrTally(this.possibleLeftPairs,a),r.reverse();let l=this.decodePair(r,!0,e,n);Tt.addOrTally(this.possibleRightPairs,l),r.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1){for(let u of this.possibleRightPairs)if(u.getCount()>1&&Tt.checkChecksum(o,u))return Tt.constructResult(o,u)}throw new B}static addOrTally(e,r){if(r==null)return;let n=!1;for(let a of e)if(a.getValue()===r.getValue()){a.incrementCount(),n=!0;break}n||e.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,r){let n=4537077*e.getValue()+r.getValue(),a=new String(n).toString(),l=new K;for(let g=13-a.length;g>0;g--)l.append("0");l.append(a);let o=0;for(let g=0;g<13;g++){let v=l.charAt(g).charCodeAt(0)-48;o+=(g&1)===0?3*v:v}o=10-o%10,o===10&&(o=0),l.append(o.toString());let u=e.getFinderPattern().getResultPoints(),h=r.getFinderPattern().getResultPoints();return new Re(l.toString(),null,0,[u[0],u[1],h[0],h[1]],Ne.RSS_14,new Date().getTime())}static checkChecksum(e,r){let n=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,n===a}decodePair(e,r,n,a){try{let l=this.findFinderPattern(e,r),o=this.parseFoundFinderPattern(e,n,r,l),u=a==null?null:a.get(oe.NEED_RESULT_POINT_CALLBACK);if(u!=null){let v=(l[0]+l[1])/2;r&&(v=e.getSize()-1-v),u.foundPossibleResultPoint(new Oe(v,n))}let h=this.decodeDataCharacter(e,o,!0),g=this.decodeDataCharacter(e,o,!1);return new Wa(1597*h.getValue()+g.getValue(),h.getChecksumPortion()+4*g.getChecksumPortion(),o)}catch{return null}}decodeDataCharacter(e,r,n){let a=this.getDataCharacterCounters();for(let q=0;q<a.length;q++)a[q]=0;if(n)Ut.recordPatternInReverse(e,r.getStartEnd()[0],a);else{Ut.recordPattern(e,r.getStartEnd()[1]+1,a);for(let q=0,se=a.length-1;q<se;q++,se--){let Ae=a[q];a[q]=a[se],a[se]=Ae}}let l=n?16:15,o=ht.sum(new Int32Array(a))/l,u=this.getOddCounts(),h=this.getEvenCounts(),g=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let q=0;q<a.length;q++){let se=a[q]/o,Ae=Math.floor(se+.5);Ae<1?Ae=1:Ae>8&&(Ae=8);let Ie=Math.floor(q/2);(q&1)===0?(u[Ie]=Ae,g[Ie]=se-Ae):(h[Ie]=Ae,v[Ie]=se-Ae)}this.adjustOddEvenCounts(n,l);let S=0,I=0;for(let q=u.length-1;q>=0;q--)I*=9,I+=u[q],S+=u[q];let j=0,L=0;for(let q=h.length-1;q>=0;q--)j*=9,j+=h[q],L+=h[q];let z=I+3*j;if(n){if((S&1)!==0||S>12||S<4)throw new B;let q=(12-S)/2,se=Tt.OUTSIDE_ODD_WIDEST[q],Ae=9-se,Ie=Er.getRSSvalue(u,se,!1),ve=Er.getRSSvalue(h,Ae,!0),ct=Tt.OUTSIDE_EVEN_TOTAL_SUBSET[q],st=Tt.OUTSIDE_GSUM[q];return new Rn(Ie*ct+ve+st,z)}else{if((L&1)!==0||L>10||L<4)throw new B;let q=(10-L)/2,se=Tt.INSIDE_ODD_WIDEST[q],Ae=9-se,Ie=Er.getRSSvalue(u,se,!0),ve=Er.getRSSvalue(h,Ae,!1),ct=Tt.INSIDE_ODD_TOTAL_SUBSET[q],st=Tt.INSIDE_GSUM[q];return new Rn(ve*ct+Ie+st,z)}}findFinderPattern(e,r){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let a=e.getSize(),l=!1,o=0;for(;o<a&&(l=!e.get(o),r!==l);)o++;let u=0,h=o;for(let g=o;g<a;g++)if(e.get(g)!==l)n[u]++;else{if(u===3){if(ir.isFinderPattern(n))return[h,g];h+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,u--}else u++;n[u]=1,l=!l}throw new B}parseFoundFinderPattern(e,r,n,a){let l=e.get(a[0]),o=a[0]-1;for(;o>=0&&l!==e.get(o);)o--;o++;const u=a[0]-o,h=this.getDecodeFinderCounters(),g=new Int32Array(h.length);X.arraycopy(h,0,g,1,h.length-1),g[0]=u;const v=this.parseFinderValue(g,Tt.FINDER_PATTERNS);let S=o,I=a[1];return n&&(S=e.getSize()-1-S,I=e.getSize()-1-I),new Ms(v,[o,a[1]],S,I,r)}adjustOddEvenCounts(e,r){let n=ht.sum(new Int32Array(this.getOddCounts())),a=ht.sum(new Int32Array(this.getEvenCounts())),l=!1,o=!1,u=!1,h=!1;e?(n>12?o=!0:n<4&&(l=!0),a>12?h=!0:a<4&&(u=!0)):(n>11?o=!0:n<5&&(l=!0),a>10?h=!0:a<4&&(u=!0));let g=n+a-r,v=(n&1)===(e?1:0),S=(a&1)===1;if(g===1)if(v){if(S)throw new B;o=!0}else{if(!S)throw new B;h=!0}else if(g===-1)if(v){if(S)throw new B;l=!0}else{if(!S)throw new B;u=!0}else if(g===0){if(v){if(!S)throw new B;n<a?(l=!0,h=!0):(o=!0,u=!0)}else if(S)throw new B}else throw new B;if(l){if(o)throw new B;ir.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&ir.decrement(this.getOddCounts(),this.getOddRoundingErrors()),u){if(h)throw new B;ir.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&ir.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Tt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Tt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Tt.OUTSIDE_GSUM=[0,161,961,2015,2715],Tt.INSIDE_GSUM=[0,336,1036,1516],Tt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Tt.INSIDE_ODD_WIDEST=[2,4,6,8],Tt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ss extends Ut{constructor(e,r){super(),this.readers=[],this.verbose=r===!0;const n=e?e.get(oe.POSSIBLE_FORMATS):null,a=e&&e.get(oe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes(Ne.EAN_13)||n.includes(Ne.UPC_A)||n.includes(Ne.EAN_8)||n.includes(Ne.UPC_E))&&this.readers.push(new ci(e)),n.includes(Ne.CODE_39)&&this.readers.push(new $t(a)),n.includes(Ne.CODE_128)&&this.readers.push(new je),n.includes(Ne.ITF)&&this.readers.push(new vt),n.includes(Ne.RSS_14)&&this.readers.push(new Tt),n.includes(Ne.RSS_EXPANDED)&&this.readers.push(new pe(this.verbose))):(this.readers.push(new ci(e)),this.readers.push(new $t),this.readers.push(new ci(e)),this.readers.push(new je),this.readers.push(new vt),this.readers.push(new Tt),this.readers.push(new pe(this.verbose)))}decodeRow(e,r,n){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(e,r,n)}catch{}throw new B}reset(){this.readers.forEach(e=>e.reset())}}class za extends Ee{constructor(e=500,r){super(new ss(r),e,r)}}class mt{constructor(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class lt{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ft{constructor(e,r,n,a,l,o){this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=l,this.ecBlocks=o;let u=0;const h=o.getECCodewords(),g=o.getECBlocks();for(let v of g)u+=v.getCount()*(v.getDataCodewords()+h);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,r){if((e&1)!==0||(r&1)!==0)throw new Y;for(let n of ft.VERSIONS)if(n.symbolSizeRows===e&&n.symbolSizeColumns===r)return n;throw new Y}toString(){return""+this.versionNumber}static buildVersions(){return[new ft(1,10,10,8,8,new mt(5,new lt(1,3))),new ft(2,12,12,10,10,new mt(7,new lt(1,5))),new ft(3,14,14,12,12,new mt(10,new lt(1,8))),new ft(4,16,16,14,14,new mt(12,new lt(1,12))),new ft(5,18,18,16,16,new mt(14,new lt(1,18))),new ft(6,20,20,18,18,new mt(18,new lt(1,22))),new ft(7,22,22,20,20,new mt(20,new lt(1,30))),new ft(8,24,24,22,22,new mt(24,new lt(1,36))),new ft(9,26,26,24,24,new mt(28,new lt(1,44))),new ft(10,32,32,14,14,new mt(36,new lt(1,62))),new ft(11,36,36,16,16,new mt(42,new lt(1,86))),new ft(12,40,40,18,18,new mt(48,new lt(1,114))),new ft(13,44,44,20,20,new mt(56,new lt(1,144))),new ft(14,48,48,22,22,new mt(68,new lt(1,174))),new ft(15,52,52,24,24,new mt(42,new lt(2,102))),new ft(16,64,64,14,14,new mt(56,new lt(2,140))),new ft(17,72,72,16,16,new mt(36,new lt(4,92))),new ft(18,80,80,18,18,new mt(48,new lt(4,114))),new ft(19,88,88,20,20,new mt(56,new lt(4,144))),new ft(20,96,96,22,22,new mt(68,new lt(4,174))),new ft(21,104,104,24,24,new mt(56,new lt(6,136))),new ft(22,120,120,18,18,new mt(68,new lt(6,175))),new ft(23,132,132,20,20,new mt(62,new lt(8,163))),new ft(24,144,144,22,22,new mt(62,new lt(8,156),new lt(2,155))),new ft(25,8,18,6,16,new mt(7,new lt(1,5))),new ft(26,8,32,6,14,new mt(11,new lt(1,10))),new ft(27,12,26,10,24,new mt(14,new lt(1,16))),new ft(28,12,36,10,16,new mt(18,new lt(1,22))),new ft(29,16,36,14,16,new mt(24,new lt(1,32))),new ft(30,16,48,14,22,new mt(28,new lt(1,49)))]}}ft.VERSIONS=ft.buildVersions();class _r{constructor(e){const r=e.getHeight();if(r<8||r>144||(r&1)!==0)throw new Y;this.version=_r.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ge(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const r=e.getHeight(),n=e.getWidth();return ft.getVersionForDimensions(r,n)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let r=0,n=4,a=0;const l=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let u=!1,h=!1,g=!1,v=!1;do if(n===l&&a===0&&!u)e[r++]=this.readCorner1(l,o)&255,n-=2,a+=2,u=!0;else if(n===l-2&&a===0&&(o&3)!==0&&!h)e[r++]=this.readCorner2(l,o)&255,n-=2,a+=2,h=!0;else if(n===l+4&&a===2&&(o&7)===0&&!g)e[r++]=this.readCorner3(l,o)&255,n-=2,a+=2,g=!0;else if(n===l-2&&a===0&&(o&7)===4&&!v)e[r++]=this.readCorner4(l,o)&255,n-=2,a+=2,v=!0;else{do n<l&&a>=0&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,l,o)&255),n-=2,a+=2;while(n>=0&&a<o);n+=1,a+=3;do n>=0&&a<o&&!this.readMappingMatrix.get(a,n)&&(e[r++]=this.readUtah(n,a,l,o)&255),n+=2,a-=2;while(n<l&&a>=0);n+=3,a+=1}while(n<l||a<o);if(r!==this.version.getTotalCodewords())throw new Y;return e}readModule(e,r,n,a){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)}readUtah(e,r,n,a){let l=0;return this.readModule(e-2,r-2,n,a)&&(l|=1),l<<=1,this.readModule(e-2,r-1,n,a)&&(l|=1),l<<=1,this.readModule(e-1,r-2,n,a)&&(l|=1),l<<=1,this.readModule(e-1,r-1,n,a)&&(l|=1),l<<=1,this.readModule(e-1,r,n,a)&&(l|=1),l<<=1,this.readModule(e,r-2,n,a)&&(l|=1),l<<=1,this.readModule(e,r-1,n,a)&&(l|=1),l<<=1,this.readModule(e,r,n,a)&&(l|=1),l}readCorner1(e,r){let n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n}readCorner2(e,r){let n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n}readCorner3(e,r){let n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n}readCorner4(e,r){let n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n}extractDataRegion(e){const r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new _("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),o=r/a|0,u=n/l|0,h=o*a,g=u*l,v=new ge(g,h);for(let S=0;S<o;++S){const I=S*a;for(let j=0;j<u;++j){const L=j*l;for(let z=0;z<a;++z){const q=S*(a+2)+1+z,se=I+z;for(let Ae=0;Ae<l;++Ae){const Ie=j*(l+2)+1+Ae;if(e.get(Ie,q)){const ve=L+Ae;v.set(ve,se)}}}}}return v}}class Ki{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r){const n=r.getECBlocks();let a=0;const l=n.getECBlocks();for(let z of l)a+=z.getCount();const o=new Array(a);let u=0;for(let z of l)for(let q=0;q<z.getCount();q++){const se=z.getDataCodewords(),Ae=n.getECCodewords()+se;o[u++]=new Ki(se,new Uint8Array(Ae))}const g=o[0].codewords.length-n.getECCodewords(),v=g-1;let S=0;for(let z=0;z<v;z++)for(let q=0;q<u;q++)o[q].codewords[z]=e[S++];const I=r.getVersionNumber()===24,j=I?8:u;for(let z=0;z<j;z++)o[z].codewords[g-1]=e[S++];const L=o[0].codewords.length;for(let z=g;z<L;z++)for(let q=0;q<u;q++){const se=I?(q+8)%u:q,Ae=I&&se>7?z-1:z;o[se].codewords[Ae]=e[S++]}if(S!==e.length)throw new _;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class qi{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new _(""+e);let r=0,n=this.bitOffset,a=this.byteOffset;const l=this.bytes;if(n>0){const o=8-n,u=e<o?e:o,h=o-u,g=255>>8-u<<h;r=(l[a]&g)>>h,e-=u,n+=u,n===8&&(n=0,a++)}if(e>0){for(;e>=8;)r=r<<8|l[a]&255,a++,e-=8;if(e>0){const o=8-e,u=255>>o<<o;r=r<<e|(l[a]&u)>>o,n+=e}}return this.bitOffset=n,this.byteOffset=a,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Jt;(function(E){E[E.PAD_ENCODE=0]="PAD_ENCODE",E[E.ASCII_ENCODE=1]="ASCII_ENCODE",E[E.C40_ENCODE=2]="C40_ENCODE",E[E.TEXT_ENCODE=3]="TEXT_ENCODE",E[E.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",E[E.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",E[E.BASE256_ENCODE=6]="BASE256_ENCODE"})(Jt||(Jt={}));class Zr{static decode(e){const r=new qi(e),n=new K,a=new K,l=new Array;let o=Jt.ASCII_ENCODE;do if(o===Jt.ASCII_ENCODE)o=this.decodeAsciiSegment(r,n,a);else{switch(o){case Jt.C40_ENCODE:this.decodeC40Segment(r,n);break;case Jt.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Jt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Jt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Jt.BASE256_ENCODE:this.decodeBase256Segment(r,n,l);break;default:throw new Y}o=Jt.ASCII_ENCODE}while(o!==Jt.PAD_ENCODE&&r.available()>0);return a.length()>0&&n.append(a.toString()),new He(e,n.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(e,r,n){let a=!1;do{let l=e.readBits(8);if(l===0)throw new Y;if(l<=128)return a&&(l+=128),r.append(String.fromCharCode(l-1)),Jt.ASCII_ENCODE;if(l===129)return Jt.PAD_ENCODE;if(l<=229){const o=l-130;o<10&&r.append("0"),r.append(""+o)}else switch(l){case 230:return Jt.C40_ENCODE;case 231:return Jt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Jt.ANSIX12_ENCODE;case 239:return Jt.TEXT_ENCODE;case 240:return Jt.EDIFACT_ENCODE;case 241:break;default:if(l!==254||e.available()!==0)throw new Y;break}}while(e.available()>0);return Jt.ASCII_ENCODE}static decodeC40Segment(e,r){let n=!1;const a=[];let l=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(let u=0;u<3;u++){const h=a[u];switch(l){case 0:if(h<3)l=h+1;else if(h<this.C40_BASIC_SET_CHARS.length){const g=this.C40_BASIC_SET_CHARS[h];n?(r.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):r.append(g)}else throw new Y;break;case 1:n?(r.append(String.fromCharCode(h+128)),n=!1):r.append(String.fromCharCode(h)),l=0;break;case 2:if(h<this.C40_SHIFT2_SET_CHARS.length){const g=this.C40_SHIFT2_SET_CHARS[h];n?(r.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):r.append(g)}else switch(h){case 27:r.append("");break;case 30:n=!0;break;default:throw new Y}l=0;break;case 3:n?(r.append(String.fromCharCode(h+224)),n=!1):r.append(String.fromCharCode(h+96)),l=0;break;default:throw new Y}}}while(e.available()>0)}static decodeTextSegment(e,r){let n=!1,a=[],l=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),a);for(let u=0;u<3;u++){const h=a[u];switch(l){case 0:if(h<3)l=h+1;else if(h<this.TEXT_BASIC_SET_CHARS.length){const g=this.TEXT_BASIC_SET_CHARS[h];n?(r.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):r.append(g)}else throw new Y;break;case 1:n?(r.append(String.fromCharCode(h+128)),n=!1):r.append(String.fromCharCode(h)),l=0;break;case 2:if(h<this.TEXT_SHIFT2_SET_CHARS.length){const g=this.TEXT_SHIFT2_SET_CHARS[h];n?(r.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):r.append(g)}else switch(h){case 27:r.append("");break;case 30:n=!0;break;default:throw new Y}l=0;break;case 3:if(h<this.TEXT_SHIFT3_SET_CHARS.length){const g=this.TEXT_SHIFT3_SET_CHARS[h];n?(r.append(String.fromCharCode(g.charCodeAt(0)+128)),n=!1):r.append(g),l=0}else throw new Y;break;default:throw new Y}}}while(e.available()>0)}static decodeAnsiX12Segment(e,r){const n=[];do{if(e.available()===8)return;const a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),n);for(let l=0;l<3;l++){const o=n[l];switch(o){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(o<14)r.append(String.fromCharCode(o+44));else if(o<40)r.append(String.fromCharCode(o+51));else throw new Y;break}}}while(e.available()>0)}static parseTwoBytes(e,r,n){let a=(e<<8)+r-1,l=Math.floor(a/1600);n[0]=l,a-=l*1600,l=Math.floor(a/40),n[1]=l,n[2]=a-l*40}static decodeEdifactSegment(e,r){do{if(e.available()<=16)return;for(let n=0;n<4;n++){let a=e.readBits(6);if(a===31){const l=8-e.getBitOffset();l!==8&&e.readBits(l);return}(a&32)===0&&(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)}static decodeBase256Segment(e,r,n){let a=1+e.getByteOffset();const l=this.unrandomize255State(e.readBits(8),a++);let o;if(l===0?o=e.available()/8|0:l<250?o=l:o=250*(l-249)+this.unrandomize255State(e.readBits(8),a++),o<0)throw new Y;const u=new Uint8Array(o);for(let h=0;h<o;h++){if(e.available()<8)throw new Y;u[h]=this.unrandomize255State(e.readBits(8),a++)}n.push(u);try{r.append(Ge.decode(u,te.ISO88591))}catch(h){throw new At("Platform does not support required encoding: "+h.message)}}static unrandomize255State(e,r){const n=149*r%255+1,a=e-n;return a>=0?a:a+256}}Zr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Zr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Zr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Zr.TEXT_SHIFT2_SET_CHARS=Zr.C40_SHIFT2_SET_CHARS,Zr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ui{constructor(){this.rsDecoder=new It(Pe.DATA_MATRIX_FIELD_256)}decode(e){const r=new _r(e),n=r.getVersion(),a=r.readCodewords(),l=Ki.getDataBlocks(a,n);let o=0;for(let g of l)o+=g.getNumDataCodewords();const u=new Uint8Array(o),h=l.length;for(let g=0;g<h;g++){const v=l[g],S=v.getCodewords(),I=v.getNumDataCodewords();this.correctErrors(S,I);for(let j=0;j<I;j++)u[j*h+g]=S[j]}return Zr.decode(u)}correctErrors(e,r){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Z}for(let a=0;a<r;a++)e[a]=n[a]}}class jt{constructor(e){this.image=e,this.rectangleDetector=new sn(this.image)}detect(){const e=this.rectangleDetector.detect();let r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new B;r=this.shiftToModuleCenter(r);const n=r[0],a=r[1],l=r[2],o=r[3];let u=this.transitionsBetween(n,o)+1,h=this.transitionsBetween(l,o)+1;(u&1)===1&&(u+=1),(h&1)===1&&(h+=1),4*u<7*h&&4*h<7*u&&(u=h=Math.max(u,h));let g=jt.sampleGrid(this.image,n,a,l,o,u,h);return new ts(g,[n,a,l,o])}static shiftPoint(e,r,n){let a=(r.getX()-e.getX())/(n+1),l=(r.getY()-e.getY())/(n+1);return new Oe(e.getX()+a,e.getY()+l)}static moveAway(e,r,n){let a=e.getX(),l=e.getY();return a<r?a-=1:a+=1,l<n?l-=1:l+=1,new Oe(a,l)}detectSolid1(e){let r=e[0],n=e[1],a=e[3],l=e[2],o=this.transitionsBetween(r,n),u=this.transitionsBetween(n,a),h=this.transitionsBetween(a,l),g=this.transitionsBetween(l,r),v=o,S=[l,r,n,a];return v>u&&(v=u,S[0]=r,S[1]=n,S[2]=a,S[3]=l),v>h&&(v=h,S[0]=n,S[1]=a,S[2]=l,S[3]=r),v>g&&(S[0]=a,S[1]=l,S[2]=r,S[3]=n),S}detectSolid2(e){let r=e[0],n=e[1],a=e[2],l=e[3],o=this.transitionsBetween(r,l),u=jt.shiftPoint(n,a,(o+1)*4),h=jt.shiftPoint(a,n,(o+1)*4),g=this.transitionsBetween(u,r),v=this.transitionsBetween(h,l);return g<v?(e[0]=r,e[1]=n,e[2]=a,e[3]=l):(e[0]=n,e[1]=a,e[2]=l,e[3]=r),e}correctTopRight(e){let r=e[0],n=e[1],a=e[2],l=e[3],o=this.transitionsBetween(r,l),u=this.transitionsBetween(n,l),h=jt.shiftPoint(r,n,(u+1)*4),g=jt.shiftPoint(a,n,(o+1)*4);o=this.transitionsBetween(h,l),u=this.transitionsBetween(g,l);let v=new Oe(l.getX()+(a.getX()-n.getX())/(o+1),l.getY()+(a.getY()-n.getY())/(o+1)),S=new Oe(l.getX()+(r.getX()-n.getX())/(u+1),l.getY()+(r.getY()-n.getY())/(u+1));if(!this.isValid(v))return this.isValid(S)?S:null;if(!this.isValid(S))return v;let I=this.transitionsBetween(h,v)+this.transitionsBetween(g,v),j=this.transitionsBetween(h,S)+this.transitionsBetween(g,S);return I>j?v:S}shiftToModuleCenter(e){let r=e[0],n=e[1],a=e[2],l=e[3],o=this.transitionsBetween(r,l)+1,u=this.transitionsBetween(a,l)+1,h=jt.shiftPoint(r,n,u*4),g=jt.shiftPoint(a,n,o*4);o=this.transitionsBetween(h,l)+1,u=this.transitionsBetween(g,l)+1,(o&1)===1&&(o+=1),(u&1)===1&&(u+=1);let v=(r.getX()+n.getX()+a.getX()+l.getX())/4,S=(r.getY()+n.getY()+a.getY()+l.getY())/4;r=jt.moveAway(r,v,S),n=jt.moveAway(n,v,S),a=jt.moveAway(a,v,S),l=jt.moveAway(l,v,S);let I,j;return h=jt.shiftPoint(r,n,u*4),h=jt.shiftPoint(h,l,o*4),I=jt.shiftPoint(n,r,u*4),I=jt.shiftPoint(I,a,o*4),g=jt.shiftPoint(a,l,u*4),g=jt.shiftPoint(g,n,o*4),j=jt.shiftPoint(l,a,u*4),j=jt.shiftPoint(j,r,o*4),[h,I,g,j]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,r,n,a,l,o,u){return Vr.getInstance().sampleGrid(e,o,u,.5,.5,o-.5,.5,o-.5,u-.5,.5,u-.5,r.getX(),r.getY(),l.getX(),l.getY(),a.getX(),a.getY(),n.getX(),n.getY())}transitionsBetween(e,r){let n=Math.trunc(e.getX()),a=Math.trunc(e.getY()),l=Math.trunc(r.getX()),o=Math.trunc(r.getY()),u=Math.abs(o-a)>Math.abs(l-n);if(u){let z=n;n=a,a=z,z=l,l=o,o=z}let h=Math.abs(l-n),g=Math.abs(o-a),v=-h/2,S=a<o?1:-1,I=n<l?1:-1,j=0,L=this.image.get(u?a:n,u?n:a);for(let z=n,q=a;z!==l;z+=I){let se=this.image.get(u?q:z,u?z:q);if(se!==L&&(j++,L=se),v+=g,v>0){if(q===o)break;q+=S,v-=h}}return j}}class Kr{constructor(){this.decoder=new ui}decode(e,r=null){let n,a;if(r!=null&&r.has(oe.PURE_BARCODE)){const g=Kr.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(g),a=Kr.NO_POINTS}else{const g=new jt(e.getBlackMatrix()).detect();n=this.decoder.decode(g.getBits()),a=g.getPoints()}const l=n.getRawBytes(),o=new Re(n.getText(),l,8*l.length,a,Ne.DATA_MATRIX,X.currentTimeMillis()),u=n.getByteSegments();u!=null&&o.putMetadata(Ue.BYTE_SEGMENTS,u);const h=n.getECLevel();return h!=null&&o.putMetadata(Ue.ERROR_CORRECTION_LEVEL,h),o}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new B;const a=this.moduleSize(r,e);let l=r[1];const o=n[1];let u=r[0];const g=(n[0]-u+1)/a,v=(o-l+1)/a;if(g<=0||v<=0)throw new B;const S=a/2;l+=S,u+=S;const I=new ge(g,v);for(let j=0;j<v;j++){const L=l+j*a;for(let z=0;z<g;z++)e.get(u+z*a,L)&&I.set(z,j)}return I}static moduleSize(e,r){const n=r.getWidth();let a=e[0];const l=e[1];for(;a<n&&r.get(a,l);)a++;if(a===n)throw new B;const o=a-e[0];if(o===0)throw new B;return o}}Kr.NO_POINTS=[];class ro extends Ee{constructor(e=500){super(new Kr,e)}}var is;(function(E){E[E.L=0]="L",E[E.M=1]="M",E[E.Q=2]="Q",E[E.H=3]="H"})(is||(is={}));class Et{constructor(e,r,n){this.value=e,this.stringValue=r,this.bits=n,Et.FOR_BITS.set(n,this),Et.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Et.L;case"M":return Et.M;case"Q":return Et.Q;case"H":return Et.H;default:throw new O(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Et))return!1;const r=e;return this.value===r.value}static forBits(e){if(e<0||e>=Et.FOR_BITS.size)throw new _;return Et.FOR_BITS.get(e)}}Et.FOR_BITS=new Map,Et.FOR_VALUE=new Map,Et.L=new Et(is.L,"L",1),Et.M=new Et(is.M,"M",0),Et.Q=new Et(is.Q,"Q",3),Et.H=new Et(is.H,"H",2);class ar{constructor(e){this.errorCorrectionLevel=Et.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,r){return ne.bitCount(e^r)}static decodeFormatInformation(e,r){const n=ar.doDecodeFormatInformation(e,r);return n!==null?n:ar.doDecodeFormatInformation(e^ar.FORMAT_INFO_MASK_QR,r^ar.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,r){let n=Number.MAX_SAFE_INTEGER,a=0;for(const l of ar.FORMAT_INFO_DECODE_LOOKUP){const o=l[0];if(o===e||o===r)return new ar(l[1]);let u=ar.numBitsDiffering(e,o);u<n&&(a=l[1],n=u),e!==r&&(u=ar.numBitsDiffering(r,o),u<n&&(a=l[1],n=u))}return n<=3?new ar(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof ar))return!1;const r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}ar.FORMAT_INFO_MASK_QR=21522,ar.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class J{constructor(e,...r){this.ecCodewordsPerBlock=e,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const r=this.ecBlocks;for(const n of r)e+=n.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class T{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Xe{constructor(e,r,...n){this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=n;let a=0;const l=n[0].getECCodewordsPerBlock(),o=n[0].getECBlocks();for(const u of o)a+=u.getCount()*(u.getDataCodewords()+l);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new Y;try{return this.getVersionForNumber((e-17)/4)}catch{throw new Y}}static getVersionForNumber(e){if(e<1||e>40)throw new _;return Xe.VERSIONS[e-1]}static decodeVersionInformation(e){let r=Number.MAX_SAFE_INTEGER,n=0;for(let a=0;a<Xe.VERSION_DECODE_INFO.length;a++){const l=Xe.VERSION_DECODE_INFO[a];if(l===e)return Xe.getVersionForNumber(a+7);const o=ar.numBitsDiffering(e,l);o<r&&(n=a+7,r=o)}return r<=3?Xe.getVersionForNumber(n):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),r=new ge(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);const n=this.alignmentPatternCenters.length;for(let a=0;a<n;a++){const l=this.alignmentPatternCenters[a]-2;for(let o=0;o<n;o++)a===0&&(o===0||o===n-1)||a===n-1&&o===0||r.setRegion(this.alignmentPatternCenters[o]-2,l,5,5)}return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r}toString(){return""+this.versionNumber}}Xe.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Xe.VERSIONS=[new Xe(1,new Int32Array(0),new J(7,new T(1,19)),new J(10,new T(1,16)),new J(13,new T(1,13)),new J(17,new T(1,9))),new Xe(2,Int32Array.from([6,18]),new J(10,new T(1,34)),new J(16,new T(1,28)),new J(22,new T(1,22)),new J(28,new T(1,16))),new Xe(3,Int32Array.from([6,22]),new J(15,new T(1,55)),new J(26,new T(1,44)),new J(18,new T(2,17)),new J(22,new T(2,13))),new Xe(4,Int32Array.from([6,26]),new J(20,new T(1,80)),new J(18,new T(2,32)),new J(26,new T(2,24)),new J(16,new T(4,9))),new Xe(5,Int32Array.from([6,30]),new J(26,new T(1,108)),new J(24,new T(2,43)),new J(18,new T(2,15),new T(2,16)),new J(22,new T(2,11),new T(2,12))),new Xe(6,Int32Array.from([6,34]),new J(18,new T(2,68)),new J(16,new T(4,27)),new J(24,new T(4,19)),new J(28,new T(4,15))),new Xe(7,Int32Array.from([6,22,38]),new J(20,new T(2,78)),new J(18,new T(4,31)),new J(18,new T(2,14),new T(4,15)),new J(26,new T(4,13),new T(1,14))),new Xe(8,Int32Array.from([6,24,42]),new J(24,new T(2,97)),new J(22,new T(2,38),new T(2,39)),new J(22,new T(4,18),new T(2,19)),new J(26,new T(4,14),new T(2,15))),new Xe(9,Int32Array.from([6,26,46]),new J(30,new T(2,116)),new J(22,new T(3,36),new T(2,37)),new J(20,new T(4,16),new T(4,17)),new J(24,new T(4,12),new T(4,13))),new Xe(10,Int32Array.from([6,28,50]),new J(18,new T(2,68),new T(2,69)),new J(26,new T(4,43),new T(1,44)),new J(24,new T(6,19),new T(2,20)),new J(28,new T(6,15),new T(2,16))),new Xe(11,Int32Array.from([6,30,54]),new J(20,new T(4,81)),new J(30,new T(1,50),new T(4,51)),new J(28,new T(4,22),new T(4,23)),new J(24,new T(3,12),new T(8,13))),new Xe(12,Int32Array.from([6,32,58]),new J(24,new T(2,92),new T(2,93)),new J(22,new T(6,36),new T(2,37)),new J(26,new T(4,20),new T(6,21)),new J(28,new T(7,14),new T(4,15))),new Xe(13,Int32Array.from([6,34,62]),new J(26,new T(4,107)),new J(22,new T(8,37),new T(1,38)),new J(24,new T(8,20),new T(4,21)),new J(22,new T(12,11),new T(4,12))),new Xe(14,Int32Array.from([6,26,46,66]),new J(30,new T(3,115),new T(1,116)),new J(24,new T(4,40),new T(5,41)),new J(20,new T(11,16),new T(5,17)),new J(24,new T(11,12),new T(5,13))),new Xe(15,Int32Array.from([6,26,48,70]),new J(22,new T(5,87),new T(1,88)),new J(24,new T(5,41),new T(5,42)),new J(30,new T(5,24),new T(7,25)),new J(24,new T(11,12),new T(7,13))),new Xe(16,Int32Array.from([6,26,50,74]),new J(24,new T(5,98),new T(1,99)),new J(28,new T(7,45),new T(3,46)),new J(24,new T(15,19),new T(2,20)),new J(30,new T(3,15),new T(13,16))),new Xe(17,Int32Array.from([6,30,54,78]),new J(28,new T(1,107),new T(5,108)),new J(28,new T(10,46),new T(1,47)),new J(28,new T(1,22),new T(15,23)),new J(28,new T(2,14),new T(17,15))),new Xe(18,Int32Array.from([6,30,56,82]),new J(30,new T(5,120),new T(1,121)),new J(26,new T(9,43),new T(4,44)),new J(28,new T(17,22),new T(1,23)),new J(28,new T(2,14),new T(19,15))),new Xe(19,Int32Array.from([6,30,58,86]),new J(28,new T(3,113),new T(4,114)),new J(26,new T(3,44),new T(11,45)),new J(26,new T(17,21),new T(4,22)),new J(26,new T(9,13),new T(16,14))),new Xe(20,Int32Array.from([6,34,62,90]),new J(28,new T(3,107),new T(5,108)),new J(26,new T(3,41),new T(13,42)),new J(30,new T(15,24),new T(5,25)),new J(28,new T(15,15),new T(10,16))),new Xe(21,Int32Array.from([6,28,50,72,94]),new J(28,new T(4,116),new T(4,117)),new J(26,new T(17,42)),new J(28,new T(17,22),new T(6,23)),new J(30,new T(19,16),new T(6,17))),new Xe(22,Int32Array.from([6,26,50,74,98]),new J(28,new T(2,111),new T(7,112)),new J(28,new T(17,46)),new J(30,new T(7,24),new T(16,25)),new J(24,new T(34,13))),new Xe(23,Int32Array.from([6,30,54,78,102]),new J(30,new T(4,121),new T(5,122)),new J(28,new T(4,47),new T(14,48)),new J(30,new T(11,24),new T(14,25)),new J(30,new T(16,15),new T(14,16))),new Xe(24,Int32Array.from([6,28,54,80,106]),new J(30,new T(6,117),new T(4,118)),new J(28,new T(6,45),new T(14,46)),new J(30,new T(11,24),new T(16,25)),new J(30,new T(30,16),new T(2,17))),new Xe(25,Int32Array.from([6,32,58,84,110]),new J(26,new T(8,106),new T(4,107)),new J(28,new T(8,47),new T(13,48)),new J(30,new T(7,24),new T(22,25)),new J(30,new T(22,15),new T(13,16))),new Xe(26,Int32Array.from([6,30,58,86,114]),new J(28,new T(10,114),new T(2,115)),new J(28,new T(19,46),new T(4,47)),new J(28,new T(28,22),new T(6,23)),new J(30,new T(33,16),new T(4,17))),new Xe(27,Int32Array.from([6,34,62,90,118]),new J(30,new T(8,122),new T(4,123)),new J(28,new T(22,45),new T(3,46)),new J(30,new T(8,23),new T(26,24)),new J(30,new T(12,15),new T(28,16))),new Xe(28,Int32Array.from([6,26,50,74,98,122]),new J(30,new T(3,117),new T(10,118)),new J(28,new T(3,45),new T(23,46)),new J(30,new T(4,24),new T(31,25)),new J(30,new T(11,15),new T(31,16))),new Xe(29,Int32Array.from([6,30,54,78,102,126]),new J(30,new T(7,116),new T(7,117)),new J(28,new T(21,45),new T(7,46)),new J(30,new T(1,23),new T(37,24)),new J(30,new T(19,15),new T(26,16))),new Xe(30,Int32Array.from([6,26,52,78,104,130]),new J(30,new T(5,115),new T(10,116)),new J(28,new T(19,47),new T(10,48)),new J(30,new T(15,24),new T(25,25)),new J(30,new T(23,15),new T(25,16))),new Xe(31,Int32Array.from([6,30,56,82,108,134]),new J(30,new T(13,115),new T(3,116)),new J(28,new T(2,46),new T(29,47)),new J(30,new T(42,24),new T(1,25)),new J(30,new T(23,15),new T(28,16))),new Xe(32,Int32Array.from([6,34,60,86,112,138]),new J(30,new T(17,115)),new J(28,new T(10,46),new T(23,47)),new J(30,new T(10,24),new T(35,25)),new J(30,new T(19,15),new T(35,16))),new Xe(33,Int32Array.from([6,30,58,86,114,142]),new J(30,new T(17,115),new T(1,116)),new J(28,new T(14,46),new T(21,47)),new J(30,new T(29,24),new T(19,25)),new J(30,new T(11,15),new T(46,16))),new Xe(34,Int32Array.from([6,34,62,90,118,146]),new J(30,new T(13,115),new T(6,116)),new J(28,new T(14,46),new T(23,47)),new J(30,new T(44,24),new T(7,25)),new J(30,new T(59,16),new T(1,17))),new Xe(35,Int32Array.from([6,30,54,78,102,126,150]),new J(30,new T(12,121),new T(7,122)),new J(28,new T(12,47),new T(26,48)),new J(30,new T(39,24),new T(14,25)),new J(30,new T(22,15),new T(41,16))),new Xe(36,Int32Array.from([6,24,50,76,102,128,154]),new J(30,new T(6,121),new T(14,122)),new J(28,new T(6,47),new T(34,48)),new J(30,new T(46,24),new T(10,25)),new J(30,new T(2,15),new T(64,16))),new Xe(37,Int32Array.from([6,28,54,80,106,132,158]),new J(30,new T(17,122),new T(4,123)),new J(28,new T(29,46),new T(14,47)),new J(30,new T(49,24),new T(10,25)),new J(30,new T(24,15),new T(46,16))),new Xe(38,Int32Array.from([6,32,58,84,110,136,162]),new J(30,new T(4,122),new T(18,123)),new J(28,new T(13,46),new T(32,47)),new J(30,new T(48,24),new T(14,25)),new J(30,new T(42,15),new T(32,16))),new Xe(39,Int32Array.from([6,26,54,82,110,138,166]),new J(30,new T(20,117),new T(4,118)),new J(28,new T(40,47),new T(7,48)),new J(30,new T(43,24),new T(22,25)),new J(30,new T(10,15),new T(67,16))),new Xe(40,Int32Array.from([6,30,58,86,114,142,170]),new J(30,new T(19,118),new T(6,119)),new J(28,new T(18,47),new T(31,48)),new J(30,new T(34,24),new T(34,25)),new J(30,new T(20,15),new T(61,16)))];var Yt;(function(E){E[E.DATA_MASK_000=0]="DATA_MASK_000",E[E.DATA_MASK_001=1]="DATA_MASK_001",E[E.DATA_MASK_010=2]="DATA_MASK_010",E[E.DATA_MASK_011=3]="DATA_MASK_011",E[E.DATA_MASK_100=4]="DATA_MASK_100",E[E.DATA_MASK_101=5]="DATA_MASK_101",E[E.DATA_MASK_110=6]="DATA_MASK_110",E[E.DATA_MASK_111=7]="DATA_MASK_111"})(Yt||(Yt={}));class ot{constructor(e,r){this.value=e,this.isMasked=r}unmaskBitMatrix(e,r){for(let n=0;n<r;n++)for(let a=0;a<r;a++)this.isMasked(n,a)&&e.flip(a,n)}}ot.values=new Map([[Yt.DATA_MASK_000,new ot(Yt.DATA_MASK_000,(E,e)=>(E+e&1)===0)],[Yt.DATA_MASK_001,new ot(Yt.DATA_MASK_001,(E,e)=>(E&1)===0)],[Yt.DATA_MASK_010,new ot(Yt.DATA_MASK_010,(E,e)=>e%3===0)],[Yt.DATA_MASK_011,new ot(Yt.DATA_MASK_011,(E,e)=>(E+e)%3===0)],[Yt.DATA_MASK_100,new ot(Yt.DATA_MASK_100,(E,e)=>(Math.floor(E/2)+Math.floor(e/3)&1)===0)],[Yt.DATA_MASK_101,new ot(Yt.DATA_MASK_101,(E,e)=>E*e%6===0)],[Yt.DATA_MASK_110,new ot(Yt.DATA_MASK_110,(E,e)=>E*e%6<3)],[Yt.DATA_MASK_111,new ot(Yt.DATA_MASK_111,(E,e)=>(E+e+E*e%3&1)===0)]]);class Ha{constructor(e){const r=e.getHeight();if(r<21||(r&3)!==1)throw new Y;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let l=0;l<6;l++)e=this.copyBit(l,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let l=5;l>=0;l--)e=this.copyBit(8,l,e);const r=this.bitMatrix.getHeight();let n=0;const a=r-7;for(let l=r-1;l>=a;l--)n=this.copyBit(8,l,n);for(let l=r-8;l<r;l++)n=this.copyBit(l,8,n);if(this.parsedFormatInfo=ar.decodeFormatInformation(e,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Y}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Xe.getVersionForNumber(r);let n=0;const a=e-11;for(let o=5;o>=0;o--)for(let u=e-9;u>=a;u--)n=this.copyBit(u,o,n);let l=Xe.decodeVersionInformation(n);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;n=0;for(let o=5;o>=0;o--)for(let u=e-9;u>=a;u--)n=this.copyBit(o,u,n);if(l=Xe.decodeVersionInformation(n),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new Y}copyBit(e,r,n){return(this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r))?n<<1|1:n<<1}readCodewords(){const e=this.readFormatInformation(),r=this.readVersion(),n=ot.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,a);const l=r.buildFunctionPattern();let o=!0;const u=new Uint8Array(r.getTotalCodewords());let h=0,g=0,v=0;for(let S=a-1;S>0;S-=2){S===6&&S--;for(let I=0;I<a;I++){const j=o?a-1-I:I;for(let L=0;L<2;L++)l.get(S-L,j)||(v++,g<<=1,this.bitMatrix.get(S-L,j)&&(g|=1),v===8&&(u[h++]=g,v=0,g=0))}o=!o}if(h!==r.getTotalCodewords())throw new Y;return u}remask(){if(this.parsedFormatInfo===null)return;const e=ot.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let r=0,n=e.getWidth();r<n;r++)for(let a=r+1,l=e.getHeight();a<l;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))}}class di{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r,n){if(e.length!==r.getTotalCodewords())throw new _;const a=r.getECBlocksForLevel(n);let l=0;const o=a.getECBlocks();for(const L of o)l+=L.getCount();const u=new Array(l);let h=0;for(const L of o)for(let z=0;z<L.getCount();z++){const q=L.getDataCodewords(),se=a.getECCodewordsPerBlock()+q;u[h++]=new di(q,new Uint8Array(se))}const g=u[0].codewords.length;let v=u.length-1;for(;v>=0&&u[v].codewords.length!==g;)v--;v++;const S=g-a.getECCodewordsPerBlock();let I=0;for(let L=0;L<S;L++)for(let z=0;z<h;z++)u[z].codewords[L]=e[I++];for(let L=v;L<h;L++)u[L].codewords[S]=e[I++];const j=u[0].codewords.length;for(let L=S;L<j;L++)for(let z=0;z<h;z++){const q=z<v?L:L+1;u[z].codewords[q]=e[I++]}return u}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Ar;(function(E){E[E.TERMINATOR=0]="TERMINATOR",E[E.NUMERIC=1]="NUMERIC",E[E.ALPHANUMERIC=2]="ALPHANUMERIC",E[E.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",E[E.BYTE=4]="BYTE",E[E.ECI=5]="ECI",E[E.KANJI=6]="KANJI",E[E.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",E[E.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",E[E.HANZI=9]="HANZI"})(Ar||(Ar={}));class Ye{constructor(e,r,n,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=a,Ye.FOR_BITS.set(a,this),Ye.FOR_VALUE.set(e,this)}static forBits(e){const r=Ye.FOR_BITS.get(e);if(r===void 0)throw new _;return r}getCharacterCountBits(e){const r=e.getVersionNumber();let n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Ye))return!1;const r=e;return this.value===r.value}toString(){return this.stringValue}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.TERMINATOR=new Ye(Ar.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ye.NUMERIC=new Ye(Ar.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ye.ALPHANUMERIC=new Ye(Ar.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ye.STRUCTURED_APPEND=new Ye(Ar.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ye.BYTE=new Ye(Ar.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ye.ECI=new Ye(Ar.ECI,"ECI",Int32Array.from([0,0,0]),7),Ye.KANJI=new Ye(Ar.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ye.FNC1_FIRST_POSITION=new Ye(Ar.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ye.FNC1_SECOND_POSITION=new Ye(Ar.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ye.HANZI=new Ye(Ar.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Mt{static decode(e,r,n,a){const l=new qi(e);let o=new K;const u=new Array;let h=-1,g=-1;try{let v=null,S=!1,I;do{if(l.available()<4)I=Ye.TERMINATOR;else{const j=l.readBits(4);I=Ye.forBits(j)}switch(I){case Ye.TERMINATOR:break;case Ye.FNC1_FIRST_POSITION:case Ye.FNC1_SECOND_POSITION:S=!0;break;case Ye.STRUCTURED_APPEND:if(l.available()<16)throw new Y;h=l.readBits(8),g=l.readBits(8);break;case Ye.ECI:const j=Mt.parseECIValue(l);if(v=ce.getCharacterSetECIByValue(j),v===null)throw new Y;break;case Ye.HANZI:const L=l.readBits(4),z=l.readBits(I.getCharacterCountBits(r));L===Mt.GB2312_SUBSET&&Mt.decodeHanziSegment(l,o,z);break;default:const q=l.readBits(I.getCharacterCountBits(r));switch(I){case Ye.NUMERIC:Mt.decodeNumericSegment(l,o,q);break;case Ye.ALPHANUMERIC:Mt.decodeAlphanumericSegment(l,o,q,S);break;case Ye.BYTE:Mt.decodeByteSegment(l,o,q,v,u,a);break;case Ye.KANJI:Mt.decodeKanjiSegment(l,o,q);break;default:throw new Y}break}}while(I!==Ye.TERMINATOR)}catch{throw new Y}return new He(e,o.toString(),u.length===0?null:u,n===null?null:n.toString(),h,g)}static decodeHanziSegment(e,r,n){if(n*13>e.available())throw new Y;const a=new Uint8Array(2*n);let l=0;for(;n>0;){const o=e.readBits(13);let u=o/96<<8&4294967295|o%96;u<959?u+=41377:u+=42657,a[l]=u>>8&255,a[l+1]=u&255,l+=2,n--}try{r.append(Ge.decode(a,te.GB2312))}catch(o){throw new Y(o)}}static decodeKanjiSegment(e,r,n){if(n*13>e.available())throw new Y;const a=new Uint8Array(2*n);let l=0;for(;n>0;){const o=e.readBits(13);let u=o/192<<8&4294967295|o%192;u<7936?u+=33088:u+=49472,a[l]=u>>8,a[l+1]=u,l+=2,n--}try{r.append(Ge.decode(a,te.SHIFT_JIS))}catch(o){throw new Y(o)}}static decodeByteSegment(e,r,n,a,l,o){if(8*n>e.available())throw new Y;const u=new Uint8Array(n);for(let g=0;g<n;g++)u[g]=e.readBits(8);let h;a===null?h=te.guessEncoding(u,o):h=a.getName();try{r.append(Ge.decode(u,h))}catch(g){throw new Y(g)}l.push(u)}static toAlphaNumericChar(e){if(e>=Mt.ALPHANUMERIC_CHARS.length)throw new Y;return Mt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,r,n,a){const l=r.length();for(;n>1;){if(e.available()<11)throw new Y;const o=e.readBits(11);r.append(Mt.toAlphaNumericChar(Math.floor(o/45))),r.append(Mt.toAlphaNumericChar(o%45)),n-=2}if(n===1){if(e.available()<6)throw new Y;r.append(Mt.toAlphaNumericChar(e.readBits(6)))}if(a)for(let o=l;o<r.length();o++)r.charAt(o)==="%"&&(o<r.length()-1&&r.charAt(o+1)==="%"?r.deleteCharAt(o+1):r.setCharAt(o,""))}static decodeNumericSegment(e,r,n){for(;n>=3;){if(e.available()<10)throw new Y;const a=e.readBits(10);if(a>=1e3)throw new Y;r.append(Mt.toAlphaNumericChar(Math.floor(a/100))),r.append(Mt.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(Mt.toAlphaNumericChar(a%10)),n-=3}if(n===2){if(e.available()<7)throw new Y;const a=e.readBits(7);if(a>=100)throw new Y;r.append(Mt.toAlphaNumericChar(Math.floor(a/10))),r.append(Mt.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new Y;const a=e.readBits(4);if(a>=10)throw new Y;r.append(Mt.toAlphaNumericChar(a))}}static parseECIValue(e){const r=e.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){const n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){const n=e.readBits(16);return(r&31)<<16&4294967295|n}throw new Y}}Mt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Mt.GB2312_SUBSET=1;class Qi{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const r=e[0];e[0]=e[2],e[2]=r}}class $i{constructor(){this.rsDecoder=new It(Pe.QR_CODE_FIELD_256)}decodeBooleanArray(e,r){return this.decodeBitMatrix(ge.parseFromBooleanArray(e),r)}decodeBitMatrix(e,r){const n=new Ha(e);let a=null;try{return this.decodeBitMatrixParser(n,r)}catch(l){a=l}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const l=this.decodeBitMatrixParser(n,r);return l.setOther(new Qi(!0)),l}catch(l){throw a!==null?a:l}}decodeBitMatrixParser(e,r){const n=e.readVersion(),a=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),o=di.getDataBlocks(l,n,a);let u=0;for(const v of o)u+=v.getNumDataCodewords();const h=new Uint8Array(u);let g=0;for(const v of o){const S=v.getCodewords(),I=v.getNumDataCodewords();this.correctErrors(S,I);for(let j=0;j<I;j++)h[g++]=S[j]}return Mt.decode(h,n,a,r)}correctErrors(e,r){const n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new Z}for(let a=0;a<r;a++)e[a]=n[a]}}class as extends Oe{constructor(e,r,n){super(e,r),this.estimatedModuleSize=n}aboutEquals(e,r,n){if(Math.abs(r-this.getY())<=e&&Math.abs(n-this.getX())<=e){const a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(e,r,n){const a=(this.getX()+r)/2,l=(this.getY()+e)/2,o=(this.estimatedModuleSize+n)/2;return new as(a,l,o)}}class qr{constructor(e,r,n,a,l,o,u){this.image=e,this.startX=r,this.startY=n,this.width=a,this.height=l,this.moduleSize=o,this.resultPointCallback=u,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,r=this.height,n=this.width,a=e+n,l=this.startY+r/2,o=new Int32Array(3),u=this.image;for(let h=0;h<r;h++){const g=l+((h&1)===0?Math.floor((h+1)/2):-Math.floor((h+1)/2));o[0]=0,o[1]=0,o[2]=0;let v=e;for(;v<a&&!u.get(v,g);)v++;let S=0;for(;v<a;){if(u.get(v,g))if(S===1)o[1]++;else if(S===2){if(this.foundPatternCross(o)){const I=this.handlePossibleCenter(o,g,v);if(I!==null)return I}o[0]=o[2],o[1]=1,o[2]=0,S=1}else o[++S]++;else S===1&&S++,o[S]++;v++}if(this.foundPatternCross(o)){const I=this.handlePossibleCenter(o,g,a);if(I!==null)return I}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new B}static centerFromEnd(e,r){return r-e[2]-e[1]/2}foundPatternCross(e){const r=this.moduleSize,n=r/2;for(let a=0;a<3;a++)if(Math.abs(r-e[a])>=n)return!1;return!0}crossCheckVertical(e,r,n,a){const l=this.image,o=l.getHeight(),u=this.crossCheckStateCount;u[0]=0,u[1]=0,u[2]=0;let h=e;for(;h>=0&&l.get(r,h)&&u[1]<=n;)u[1]++,h--;if(h<0||u[1]>n)return NaN;for(;h>=0&&!l.get(r,h)&&u[0]<=n;)u[0]++,h--;if(u[0]>n)return NaN;for(h=e+1;h<o&&l.get(r,h)&&u[1]<=n;)u[1]++,h++;if(h===o||u[1]>n)return NaN;for(;h<o&&!l.get(r,h)&&u[2]<=n;)u[2]++,h++;if(u[2]>n)return NaN;const g=u[0]+u[1]+u[2];return 5*Math.abs(g-a)>=2*a?NaN:this.foundPatternCross(u)?qr.centerFromEnd(u,h):NaN}handlePossibleCenter(e,r,n){const a=e[0]+e[1]+e[2],l=qr.centerFromEnd(e,n),o=this.crossCheckVertical(r,l,2*e[1],a);if(!isNaN(o)){const u=(e[0]+e[1]+e[2])/3;for(const g of this.possibleCenters)if(g.aboutEquals(u,o,l))return g.combineEstimate(o,l,u);const h=new as(l,o,u);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null}}class on extends Oe{constructor(e,r,n,a){super(e,r),this.estimatedModuleSize=n,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,r,n){if(Math.abs(r-this.getY())<=e&&Math.abs(n-this.getX())<=e){const a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(e,r,n){const a=this.count+1,l=(this.count*this.getX()+r)/a,o=(this.count*this.getY()+e)/a,u=(this.count*this.estimatedModuleSize+n)/a;return new on(l,o,u,a)}}class _n{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Lt{constructor(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const r=e!=null&&e.get(oe.TRY_HARDER)!==void 0,n=e!=null&&e.get(oe.PURE_BARCODE)!==void 0,a=this.image,l=a.getHeight(),o=a.getWidth();let u=Math.floor(3*l/(4*Lt.MAX_MODULES));(u<Lt.MIN_SKIP||r)&&(u=Lt.MIN_SKIP);let h=!1;const g=new Int32Array(5);for(let S=u-1;S<l&&!h;S+=u){g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0;let I=0;for(let j=0;j<o;j++)if(a.get(j,S))(I&1)===1&&I++,g[I]++;else if((I&1)===0)if(I===4)if(Lt.foundPatternCross(g)){if(this.handlePossibleCenter(g,S,j,n)===!0)if(u=2,this.hasSkipped===!0)h=this.haveMultiplyConfirmedCenters();else{const z=this.findRowSkip();z>g[2]&&(S+=z-g[2]-u,j=o-1)}else{g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,I=3;continue}I=0,g[0]=0,g[1]=0,g[2]=0,g[3]=0,g[4]=0}else g[0]=g[2],g[1]=g[3],g[2]=g[4],g[3]=1,g[4]=0,I=3;else g[++I]++;else g[I]++;Lt.foundPatternCross(g)&&this.handlePossibleCenter(g,S,o,n)===!0&&(u=g[0],this.hasSkipped&&(h=this.haveMultiplyConfirmedCenters()))}const v=this.selectBestPatterns();return Oe.orderBestPatterns(v),new _n(v)}static centerFromEnd(e,r){return r-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let r=0;for(let l=0;l<5;l++){const o=e[l];if(o===0)return!1;r+=o}if(r<7)return!1;const n=r/7,a=n/2;return Math.abs(n-e[0])<a&&Math.abs(n-e[1])<a&&Math.abs(3*n-e[2])<3*a&&Math.abs(n-e[3])<a&&Math.abs(n-e[4])<a}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,r,n,a){const l=this.getCrossCheckStateCount();let o=0;const u=this.image;for(;e>=o&&r>=o&&u.get(r-o,e-o);)l[2]++,o++;if(e<o||r<o)return!1;for(;e>=o&&r>=o&&!u.get(r-o,e-o)&&l[1]<=n;)l[1]++,o++;if(e<o||r<o||l[1]>n)return!1;for(;e>=o&&r>=o&&u.get(r-o,e-o)&&l[0]<=n;)l[0]++,o++;if(l[0]>n)return!1;const h=u.getHeight(),g=u.getWidth();for(o=1;e+o<h&&r+o<g&&u.get(r+o,e+o);)l[2]++,o++;if(e+o>=h||r+o>=g)return!1;for(;e+o<h&&r+o<g&&!u.get(r+o,e+o)&&l[3]<n;)l[3]++,o++;if(e+o>=h||r+o>=g||l[3]>=n)return!1;for(;e+o<h&&r+o<g&&u.get(r+o,e+o)&&l[4]<n;)l[4]++,o++;if(l[4]>=n)return!1;const v=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(v-a)<2*a&&Lt.foundPatternCross(l)}crossCheckVertical(e,r,n,a){const l=this.image,o=l.getHeight(),u=this.getCrossCheckStateCount();let h=e;for(;h>=0&&l.get(r,h);)u[2]++,h--;if(h<0)return NaN;for(;h>=0&&!l.get(r,h)&&u[1]<=n;)u[1]++,h--;if(h<0||u[1]>n)return NaN;for(;h>=0&&l.get(r,h)&&u[0]<=n;)u[0]++,h--;if(u[0]>n)return NaN;for(h=e+1;h<o&&l.get(r,h);)u[2]++,h++;if(h===o)return NaN;for(;h<o&&!l.get(r,h)&&u[3]<n;)u[3]++,h++;if(h===o||u[3]>=n)return NaN;for(;h<o&&l.get(r,h)&&u[4]<n;)u[4]++,h++;if(u[4]>=n)return NaN;const g=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(g-a)>=2*a?NaN:Lt.foundPatternCross(u)?Lt.centerFromEnd(u,h):NaN}crossCheckHorizontal(e,r,n,a){const l=this.image,o=l.getWidth(),u=this.getCrossCheckStateCount();let h=e;for(;h>=0&&l.get(h,r);)u[2]++,h--;if(h<0)return NaN;for(;h>=0&&!l.get(h,r)&&u[1]<=n;)u[1]++,h--;if(h<0||u[1]>n)return NaN;for(;h>=0&&l.get(h,r)&&u[0]<=n;)u[0]++,h--;if(u[0]>n)return NaN;for(h=e+1;h<o&&l.get(h,r);)u[2]++,h++;if(h===o)return NaN;for(;h<o&&!l.get(h,r)&&u[3]<n;)u[3]++,h++;if(h===o||u[3]>=n)return NaN;for(;h<o&&l.get(h,r)&&u[4]<n;)u[4]++,h++;if(u[4]>=n)return NaN;const g=u[0]+u[1]+u[2]+u[3]+u[4];return 5*Math.abs(g-a)>=a?NaN:Lt.foundPatternCross(u)?Lt.centerFromEnd(u,h):NaN}handlePossibleCenter(e,r,n,a){const l=e[0]+e[1]+e[2]+e[3]+e[4];let o=Lt.centerFromEnd(e,n),u=this.crossCheckVertical(r,Math.floor(o),e[2],l);if(!isNaN(u)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(u),e[2],l),!isNaN(o)&&(!a||this.crossCheckDiagonal(Math.floor(u),Math.floor(o),e[2],l)))){const h=l/7;let g=!1;const v=this.possibleCenters;for(let S=0,I=v.length;S<I;S++){const j=v[S];if(j.aboutEquals(h,u,o)){v[S]=j.combineEstimate(u,o,h),g=!0;break}}if(!g){const S=new on(o,u,h);v.push(S),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(S)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const n of this.possibleCenters)if(n.getCount()>=Lt.CENTER_QUORUM)if(r==null)r=n;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-n.getX())-Math.abs(r.getY()-n.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,r=0;const n=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=Lt.CENTER_QUORUM&&(e++,r+=o.getEstimatedModuleSize());if(e<3)return!1;const a=r/n;let l=0;for(const o of this.possibleCenters)l+=Math.abs(o.getEstimatedModuleSize()-a);return l<=.05*r}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new B;const r=this.possibleCenters;let n;if(e>3){let a=0,l=0;for(const h of this.possibleCenters){const g=h.getEstimatedModuleSize();a+=g,l+=g*g}n=a/e;let o=Math.sqrt(l/e-n*n);r.sort((h,g)=>{const v=Math.abs(g.getEstimatedModuleSize()-n),S=Math.abs(h.getEstimatedModuleSize()-n);return v<S?-1:v>S?1:0});const u=Math.max(.2*n,o);for(let h=0;h<r.length&&r.length>3;h++){const g=r[h];Math.abs(g.getEstimatedModuleSize()-n)>u&&(r.splice(h,1),h--)}}if(r.length>3){let a=0;for(const l of r)a+=l.getEstimatedModuleSize();n=a/r.length,r.sort((l,o)=>{if(o.getCount()===l.getCount()){const u=Math.abs(o.getEstimatedModuleSize()-n),h=Math.abs(l.getEstimatedModuleSize()-n);return u<h?1:u>h?-1:0}else return o.getCount()-l.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Lt.CENTER_QUORUM=2,Lt.MIN_SKIP=3,Lt.MAX_MODULES=57;class yn{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(oe.NEED_RESULT_POINT_CALLBACK);const n=new Lt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(n)}processFinderPatternInfo(e){const r=e.getTopLeft(),n=e.getTopRight(),a=e.getBottomLeft(),l=this.calculateModuleSize(r,n,a);if(l<1)throw new B("No pattern found in proccess finder.");const o=yn.computeDimension(r,n,a,l),u=Xe.getProvisionalVersionForDimension(o),h=u.getDimensionForVersion()-7;let g=null;if(u.getAlignmentPatternCenters().length>0){const j=n.getX()-r.getX()+a.getX(),L=n.getY()-r.getY()+a.getY(),z=1-3/h,q=Math.floor(r.getX()+z*(j-r.getX())),se=Math.floor(r.getY()+z*(L-r.getY()));for(let Ae=4;Ae<=16;Ae<<=1)try{g=this.findAlignmentInRegion(l,q,se,Ae);break}catch(Ie){if(!(Ie instanceof B))throw Ie}}const v=yn.createTransform(r,n,a,g,o),S=yn.sampleGrid(this.image,v,o);let I;return g===null?I=[a,r,n]:I=[a,r,n,g],new ts(S,I)}static createTransform(e,r,n,a,l){const o=l-3.5;let u,h,g,v;return a!==null?(u=a.getX(),h=a.getY(),g=o-3,v=g):(u=r.getX()-e.getX()+n.getX(),h=r.getY()-e.getY()+n.getY(),g=o,v=o),Dr.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,g,v,3.5,o,e.getX(),e.getY(),r.getX(),r.getY(),u,h,n.getX(),n.getY())}static sampleGrid(e,r,n){return Vr.getInstance().sampleGridWithTransform(e,n,n,r)}static computeDimension(e,r,n,a){const l=ht.round(Oe.distance(e,r)/a),o=ht.round(Oe.distance(e,n)/a);let u=Math.floor((l+o)/2)+7;switch(u&3){case 0:u++;break;case 2:u--;break;case 3:throw new B("Dimensions could be not found.")}return u}calculateModuleSize(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2}calculateModuleSizeOneWay(e,r){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?a/7:isNaN(a)?n/7:(n+a)/14}sizeOfBlackWhiteBlackRunBothWays(e,r,n,a){let l=this.sizeOfBlackWhiteBlackRun(e,r,n,a),o=1,u=e-(n-e);u<0?(o=e/(e-u),u=0):u>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(u-e),u=this.image.getWidth()-1);let h=Math.floor(r-(a-r)*o);return o=1,h<0?(o=r/(r-h),h=0):h>=this.image.getHeight()&&(o=(this.image.getHeight()-1-r)/(h-r),h=this.image.getHeight()-1),u=Math.floor(e+(u-e)*o),l+=this.sizeOfBlackWhiteBlackRun(e,r,u,h),l-1}sizeOfBlackWhiteBlackRun(e,r,n,a){const l=Math.abs(a-r)>Math.abs(n-e);if(l){let j=e;e=r,r=j,j=n,n=a,a=j}const o=Math.abs(n-e),u=Math.abs(a-r);let h=-o/2;const g=e<n?1:-1,v=r<a?1:-1;let S=0;const I=n+g;for(let j=e,L=r;j!==I;j+=g){const z=l?L:j,q=l?j:L;if(S===1===this.image.get(z,q)){if(S===2)return ht.distance(j,L,e,r);S++}if(h+=u,h>0){if(L===a)break;L+=v,h-=o}}return S===2?ht.distance(n+g,a,e,r):NaN}findAlignmentInRegion(e,r,n,a){const l=Math.floor(a*e),o=Math.max(0,r-l),u=Math.min(this.image.getWidth()-1,r+l);if(u-o<e*3)throw new B("Alignment top exceeds estimated module size.");const h=Math.max(0,n-l),g=Math.min(this.image.getHeight()-1,n+l);if(g-h<e*3)throw new B("Alignment bottom exceeds estimated module size.");return new qr(this.image,o,h,u-o,g-h,e,this.resultPointCallback).find()}}class wr{constructor(){this.decoder=new $i}getDecoder(){return this.decoder}decode(e,r){let n,a;if(r!=null&&r.get(oe.PURE_BARCODE)!==void 0){const h=wr.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(h,r),a=wr.NO_POINTS}else{const h=new yn(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(h.getBits(),r),a=h.getPoints()}n.getOther()instanceof Qi&&n.getOther().applyMirroredCorrection(a);const l=new Re(n.getText(),n.getRawBytes(),void 0,a,Ne.QR_CODE,void 0),o=n.getByteSegments();o!==null&&l.putMetadata(Ue.BYTE_SEGMENTS,o);const u=n.getECLevel();return u!==null&&l.putMetadata(Ue.ERROR_CORRECTION_LEVEL,u),n.hasStructuredAppend()&&(l.putMetadata(Ue.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),l.putMetadata(Ue.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),l}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new B;const a=this.moduleSize(r,e);let l=r[1],o=n[1],u=r[0],h=n[0];if(u>=h||l>=o)throw new B;if(o-l!==h-u&&(h=u+(o-l),h>=e.getWidth()))throw new B;const g=Math.round((h-u+1)/a),v=Math.round((o-l+1)/a);if(g<=0||v<=0)throw new B;if(v!==g)throw new B;const S=Math.floor(a/2);l+=S,u+=S;const I=u+Math.floor((g-1)*a)-h;if(I>0){if(I>S)throw new B;u-=I}const j=l+Math.floor((v-1)*a)-o;if(j>0){if(j>S)throw new B;l-=j}const L=new ge(g,v);for(let z=0;z<v;z++){const q=l+Math.floor(z*a);for(let se=0;se<g;se++)e.get(u+Math.floor(se*a),q)&&L.set(se,z)}return L}static moduleSize(e,r){const n=r.getHeight(),a=r.getWidth();let l=e[0],o=e[1],u=!0,h=0;for(;l<a&&o<n;){if(u!==r.get(l,o)){if(++h===5)break;u=!u}l++,o++}if(l===a||o===n)throw new B;return(l-e[0])/7}}wr.NO_POINTS=new Array;class $e{PDF417Common(){}static getBitCountSum(e){return ht.sum(e)}static toIntArray(e){if(e==null||!e.length)return $e.EMPTY_INT_ARRAY;const r=new Int32Array(e.length);let n=0;for(const a of e)r[n++]=a;return r}static getCodeword(e){const r=ue.binarySearch($e.SYMBOL_TABLE,e&262143);return r<0?-1:($e.CODEWORD_TABLE[r]-1)%$e.NUMBER_OF_CODEWORDS}}$e.NUMBER_OF_CODEWORDS=929,$e.MAX_CODEWORDS_IN_BARCODE=$e.NUMBER_OF_CODEWORDS-1,$e.MIN_ROWS_IN_BARCODE=3,$e.MAX_ROWS_IN_BARCODE=90,$e.MODULES_IN_CODEWORD=17,$e.MODULES_IN_STOP_PATTERN=18,$e.BARS_IN_MODULE=8,$e.EMPTY_INT_ARRAY=new Int32Array([]),$e.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),$e.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Ga{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class nt{static detectMultiple(e,r,n){let a=e.getBlackMatrix(),l=nt.detect(n,a);return l.length||(a=a.clone(),a.rotate180(),l=nt.detect(n,a)),new Ga(a,l)}static detect(e,r){const n=new Array;let a=0,l=0,o=!1;for(;a<r.getHeight();){const u=nt.findVertices(r,a,l);if(u[0]==null&&u[3]==null){if(!o)break;o=!1,l=0;for(const h of n)h[1]!=null&&(a=Math.trunc(Math.max(a,h[1].getY()))),h[3]!=null&&(a=Math.max(a,Math.trunc(h[3].getY())));a+=nt.ROW_STEP;continue}if(o=!0,n.push(u),!e)break;u[2]!=null?(l=Math.trunc(u[2].getX()),a=Math.trunc(u[2].getY())):(l=Math.trunc(u[4].getX()),a=Math.trunc(u[4].getY()))}return n}static findVertices(e,r,n){const a=e.getHeight(),l=e.getWidth(),o=new Array(8);return nt.copyToResult(o,nt.findRowsWithPattern(e,a,l,r,n,nt.START_PATTERN),nt.INDEXES_START_PATTERN),o[4]!=null&&(n=Math.trunc(o[4].getX()),r=Math.trunc(o[4].getY())),nt.copyToResult(o,nt.findRowsWithPattern(e,a,l,r,n,nt.STOP_PATTERN),nt.INDEXES_STOP_PATTERN),o}static copyToResult(e,r,n){for(let a=0;a<n.length;a++)e[n[a]]=r[a]}static findRowsWithPattern(e,r,n,a,l,o){const u=new Array(4);let h=!1;const g=new Int32Array(o.length);for(;a<r;a+=nt.ROW_STEP){let S=nt.findGuardPattern(e,l,a,n,!1,o,g);if(S!=null){for(;a>0;){const I=nt.findGuardPattern(e,l,--a,n,!1,o,g);if(I!=null)S=I;else{a++;break}}u[0]=new Oe(S[0],a),u[1]=new Oe(S[1],a),h=!0;break}}let v=a+1;if(h){let S=0,I=Int32Array.from([Math.trunc(u[0].getX()),Math.trunc(u[1].getX())]);for(;v<r;v++){const j=nt.findGuardPattern(e,I[0],v,n,!1,o,g);if(j!=null&&Math.abs(I[0]-j[0])<nt.MAX_PATTERN_DRIFT&&Math.abs(I[1]-j[1])<nt.MAX_PATTERN_DRIFT)I=j,S=0;else{if(S>nt.SKIPPED_ROW_COUNT_MAX)break;S++}}v-=S+1,u[2]=new Oe(I[0],v),u[3]=new Oe(I[1],v)}return v-a<nt.BARCODE_MIN_HEIGHT&&ue.fill(u,null),u}static findGuardPattern(e,r,n,a,l,o,u){ue.fillWithin(u,0,u.length,0);let h=r,g=0;for(;e.get(h,n)&&h>0&&g++<nt.MAX_PIXEL_DRIFT;)h--;let v=h,S=0,I=o.length;for(let j=l;v<a;v++)if(e.get(v,n)!==j)u[S]++;else{if(S===I-1){if(nt.patternMatchVariance(u,o,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return new Int32Array([h,v]);h+=u[0]+u[1],X.arraycopy(u,2,u,0,S-1),u[S-1]=0,u[S]=0,S--}else S++;u[S]=1,j=!j}return S===I-1&&nt.patternMatchVariance(u,o,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE?new Int32Array([h,v-1]):null}static patternMatchVariance(e,r,n){let a=e.length,l=0,o=0;for(let g=0;g<a;g++)l+=e[g],o+=r[g];if(l<o)return 1/0;let u=l/o;n*=u;let h=0;for(let g=0;g<a;g++){let v=e[g],S=r[g]*u,I=v>S?v-S:S-v;if(I>n)return 1/0;h+=I}return h/l}}nt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),nt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),nt.MAX_AVG_VARIANCE=.42,nt.MAX_INDIVIDUAL_VARIANCE=.8,nt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),nt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),nt.MAX_PIXEL_DRIFT=3,nt.MAX_PATTERN_DRIFT=5,nt.SKIPPED_ROW_COUNT_MAX=25,nt.ROW_STEP=5,nt.BARCODE_MIN_HEIGHT=10;class lr{constructor(e,r){if(r.length===0)throw new _;this.field=e;let n=r.length;if(n>1&&r[0]===0){let a=1;for(;a<n&&r[a]===0;)a++;a===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-a),X.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let a=0;for(let l of this.coefficients)a=this.field.add(a,l);return a}let r=this.coefficients[0],n=this.coefficients.length;for(let a=1;a<n;a++)r=this.field.add(this.field.multiply(e,r),this.coefficients[a]);return r}add(e){if(!this.field.equals(e.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,n=e.coefficients;if(r.length>n.length){let o=r;r=n,n=o}let a=new Int32Array(n.length),l=n.length-r.length;X.arraycopy(n,0,a,0,l);for(let o=l;o<n.length;o++)a[o]=this.field.add(r[o-l],n[o]);return new lr(this.field,a)}subtract(e){if(!this.field.equals(e.field))throw new _("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof lr?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new lr(this.field,new Int32Array([0]));let r=this.coefficients,n=r.length,a=e.coefficients,l=a.length,o=new Int32Array(n+l-1);for(let u=0;u<n;u++){let h=r[u];for(let g=0;g<l;g++)o[u+g]=this.field.add(o[u+g],this.field.multiply(h,a[g]))}return new lr(this.field,o)}negative(){let e=this.coefficients.length,r=new Int32Array(e);for(let n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new lr(this.field,r)}multiplyScalar(e){if(e===0)return new lr(this.field,new Int32Array([0]));if(e===1)return this;let r=this.coefficients.length,n=new Int32Array(r);for(let a=0;a<r;a++)n[a]=this.field.multiply(this.coefficients[a],e);return new lr(this.field,n)}multiplyByMonomial(e,r){if(e<0)throw new _;if(r===0)return new lr(this.field,new Int32Array([0]));let n=this.coefficients.length,a=new Int32Array(n+e);for(let l=0;l<n;l++)a[l]=this.field.multiply(this.coefficients[l],r);return new lr(this.field,a)}toString(){let e=new K;for(let r=this.getDegree();r>=0;r--){let n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()}}class Va{add(e,r){return(e+r)%this.modulus}subtract(e,r){return(this.modulus+e-r)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new _;return this.logTable[e]}inverse(e){if(e===0)throw new We;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class ls extends Va{constructor(e,r){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let n=1;for(let a=0;a<e;a++)this.expTable[a]=n,n=n*r%e;for(let a=0;a<e-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new lr(this,new Int32Array([0])),this.one=new lr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new _;if(r===0)return this.zero;let n=new Int32Array(e+1);return n[0]=r,new lr(this,n)}}ls.PDF417_GF=new ls($e.NUMBER_OF_CODEWORDS,3);class Ji{constructor(){this.field=ls.PDF417_GF}decode(e,r,n){let a=new lr(this.field,e),l=new Int32Array(r),o=!1;for(let L=r;L>0;L--){let z=a.evaluateAt(this.field.exp(L));l[r-L]=z,z!==0&&(o=!0)}if(!o)return 0;let u=this.field.getOne();if(n!=null)for(const L of n){let z=this.field.exp(e.length-1-L),q=new lr(this.field,new Int32Array([this.field.subtract(0,z),1]));u=u.multiply(q)}let h=new lr(this.field,l),g=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),h,r),v=g[0],S=g[1],I=this.findErrorLocations(v),j=this.findErrorMagnitudes(S,v,I);for(let L=0;L<I.length;L++){let z=e.length-1-this.field.log(I[L]);if(z<0)throw Z.getChecksumInstance();e[z]=this.field.subtract(e[z],j[L])}return I.length}runEuclideanAlgorithm(e,r,n){if(e.getDegree()<r.getDegree()){let I=e;e=r,r=I}let a=e,l=r,o=this.field.getZero(),u=this.field.getOne();for(;l.getDegree()>=Math.round(n/2);){let I=a,j=o;if(a=l,o=u,a.isZero())throw Z.getChecksumInstance();l=I;let L=this.field.getZero(),z=a.getCoefficient(a.getDegree()),q=this.field.inverse(z);for(;l.getDegree()>=a.getDegree()&&!l.isZero();){let se=l.getDegree()-a.getDegree(),Ae=this.field.multiply(l.getCoefficient(l.getDegree()),q);L=L.add(this.field.buildMonomial(se,Ae)),l=l.subtract(a.multiplyByMonomial(se,Ae))}u=L.multiply(o).subtract(j).negative()}let h=u.getCoefficient(0);if(h===0)throw Z.getChecksumInstance();let g=this.field.inverse(h),v=u.multiply(g),S=l.multiply(g);return[v,S]}findErrorLocations(e){let r=e.getDegree(),n=new Int32Array(r),a=0;for(let l=1;l<this.field.getSize()&&a<r;l++)e.evaluateAt(l)===0&&(n[a]=this.field.inverse(l),a++);if(a!==r)throw Z.getChecksumInstance();return n}findErrorMagnitudes(e,r,n){let a=r.getDegree(),l=new Int32Array(a);for(let g=1;g<=a;g++)l[a-g]=this.field.multiply(g,r.getCoefficient(g));let o=new lr(this.field,l),u=n.length,h=new Int32Array(u);for(let g=0;g<u;g++){let v=this.field.inverse(n[g]),S=this.field.subtract(0,e.evaluateAt(v)),I=this.field.inverse(o.evaluateAt(v));h[g]=this.field.multiply(S,I)}return h}}class Wn{constructor(e,r,n,a,l){e instanceof Wn?this.constructor_2(e):this.constructor_1(e,r,n,a,l)}constructor_1(e,r,n,a,l){const o=r==null||n==null,u=a==null||l==null;if(o&&u)throw new B;o?(r=new Oe(0,a.getY()),n=new Oe(0,l.getY())):u&&(a=new Oe(e.getWidth()-1,r.getY()),l=new Oe(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=a,this.bottomRight=l,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(a.getX(),l.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(n.getY(),l.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,r){return e==null?r:r==null?e:new Wn(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(e,r,n){let a=this.topLeft,l=this.bottomLeft,o=this.topRight,u=this.bottomRight;if(e>0){let h=n?this.topLeft:this.topRight,g=Math.trunc(h.getY()-e);g<0&&(g=0);let v=new Oe(h.getX(),g);n?a=v:o=v}if(r>0){let h=n?this.bottomLeft:this.bottomRight,g=Math.trunc(h.getY()+r);g>=this.image.getHeight()&&(g=this.image.getHeight()-1);let v=new Oe(h.getX(),g);n?l=v:u=v}return new Wn(this.image,a,l,o,u)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Ps{constructor(e,r,n,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class wn{constructor(){this.buffer=""}static form(e,r){let n=-1;function a(o,u,h,g,v,S){if(o==="%%")return"%";if(r[++n]===void 0)return;o=g?parseInt(g.substr(1)):void 0;let I=v?parseInt(v.substr(1)):void 0,j;switch(S){case"s":j=r[n];break;case"c":j=r[n][0];break;case"f":j=parseFloat(r[n]).toFixed(o);break;case"p":j=parseFloat(r[n]).toPrecision(o);break;case"e":j=parseFloat(r[n]).toExponential(o);break;case"x":j=parseInt(r[n]).toString(I||16);break;case"d":j=parseFloat(parseInt(r[n],I||10).toPrecision(o)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(I);let L=parseInt(h),z=h&&h[0]+""=="0"?"0":" ";for(;j.length<L;)j=u!==void 0?j+z:z+j;return j}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,a)}format(e,...r){this.buffer+=wn.form(e,r)}toString(){return this.buffer}}class cn{constructor(e){this.boundingBox=new Wn(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let r=this.getCodeword(e);if(r!=null)return r;for(let n=1;n<cn.MAX_NEARBY_DISTANCE;n++){let a=this.imageRowToCodewordIndex(e)-n;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+n,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new wn;let r=0;for(const n of this.codewords){if(n==null){e.format("%3d:    |   %n",r++);continue}e.format("%3d: %3d|%3d%n",r++,n.getRowNumber(),n.getValue())}return e.toString()}}cn.MAX_NEARBY_DISTANCE=5;class Mn{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)}getValue(){let e=-1,r=new Array;for(const[n,a]of this.values.entries()){const l={getKey:()=>n,getValue:()=>a};l.getValue()>e?(e=l.getValue(),r=[],r.push(l.getKey())):l.getValue()===e&&r.push(l.getKey())}return $e.toIntArray(r)}getConfidence(e){return this.values.get(e)}}class Xa extends cn{constructor(e,r){super(e),this._isLeft=r}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);let n=this.getBoundingBox(),a=this._isLeft?n.getTopLeft():n.getTopRight(),l=this._isLeft?n.getBottomLeft():n.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),h=-1,g=1,v=0;for(let S=o;S<u;S++){if(r[S]==null)continue;let I=r[S],j=I.getRowNumber()-h;if(j===0)v++;else if(j===1)g=Math.max(g,v),v=1,h=I.getRowNumber();else if(j<0||I.getRowNumber()>=e.getRowCount()||j>S)r[S]=null;else{let L;g>2?L=(g-2)*j:L=j;let z=L>=S;for(let q=1;q<=L&&!z;q++)z=r[S-q]!=null;z?r[S]=null:(h=I.getRowNumber(),v=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let r=new Int32Array(e.getRowCount());for(let n of this.getCodewords())if(n!=null){let a=n.getRowNumber();if(a>=r.length)continue;r[a]++}return r}adjustIncompleteIndicatorColumnRowNumbers(e){let r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(n.getY())),o=this.imageRowToCodewordIndex(Math.trunc(a.getY())),u=this.getCodewords(),h=-1;for(let g=l;g<o;g++){if(u[g]==null)continue;let v=u[g];v.setRowNumberAsRowIndicatorColumn();let S=v.getRowNumber()-h;S===0||(S===1?h=v.getRowNumber():v.getRowNumber()>=e.getRowCount()?u[g]=null:h=v.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),r=new Mn,n=new Mn,a=new Mn,l=new Mn;for(let u of e){if(u==null)continue;u.setRowNumberAsRowIndicatorColumn();let h=u.getValue()%30,g=u.getRowNumber();switch(this._isLeft||(g+=2),g%3){case 0:n.setValue(h*3+1);break;case 1:l.setValue(h/3),a.setValue(h%3);break;case 2:r.setValue(h+1);break}}if(r.getValue().length===0||n.getValue().length===0||a.getValue().length===0||l.getValue().length===0||r.getValue()[0]<1||n.getValue()[0]+a.getValue()[0]<$e.MIN_ROWS_IN_BARCODE||n.getValue()[0]+a.getValue()[0]>$e.MAX_ROWS_IN_BARCODE)return null;let o=new Ps(r.getValue()[0],n.getValue()[0],a.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,r){for(let n=0;n<e.length;n++){let a=e[n];if(e[n]==null)continue;let l=a.getValue()%30,o=a.getRowNumber();if(o>r.getRowCount()){e[n]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:l*3+1!==r.getRowCountUpperPart()&&(e[n]=null);break;case 1:(Math.trunc(l/3)!==r.getErrorCorrectionLevel()||l%3!==r.getRowCountLowerPart())&&(e[n]=null);break;case 2:l+1!==r.getColumnCount()&&(e[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Bs{constructor(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=$e.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let n=this.detectionResultColumns[r].getCodewords();for(let a=0;a<n.length;a++)n[a]!=null&&(n[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,n))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let l=this.detectionResultColumns[a].getCodewords()[n];l!=null&&(l.setRowNumber(e[n].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<r.length;n++){if(r[n]==null)continue;let a=r[n].getRowNumber(),l=0;for(let o=this.barcodeColumnCount+1;o>0&&l<this.ADJUST_ROW_NUMBER_SKIP;o--){let u=this.detectionResultColumns[o].getCodewords()[n];u!=null&&(l=Bs.adjustRowNumberIfValid(a,l,u),u.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,r=this.detectionResultColumns[0].getCodewords();for(let n=0;n<r.length;n++){if(r[n]==null)continue;let a=r[n].getRowNumber(),l=0;for(let o=1;o<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;o++){let u=this.detectionResultColumns[o].getCodewords()[n];u!=null&&(l=Bs.adjustRowNumberIfValid(a,l,u),u.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r}adjustRowNumbers(e,r,n){if(!this.detectionResultColumns[e-1])return;let a=n[r],l=this.detectionResultColumns[e-1].getCodewords(),o=l;this.detectionResultColumns[e+1]!=null&&(o=this.detectionResultColumns[e+1].getCodewords());let u=new Array(14);u[2]=l[r],u[3]=o[r],r>0&&(u[0]=n[r-1],u[4]=l[r-1],u[5]=o[r-1]),r>1&&(u[8]=n[r-2],u[10]=l[r-2],u[11]=o[r-2]),r<n.length-1&&(u[1]=n[r+1],u[6]=l[r+1],u[7]=o[r+1]),r<n.length-2&&(u[9]=n[r+2],u[12]=l[r+2],u[13]=o[r+2]);for(let h of u)if(Bs.adjustRowNumber(a,h))return}static adjustRowNumber(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,r){this.detectionResultColumns[e]=r}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new wn;for(let n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}let l=this.detectionResultColumns[a].getCodewords()[n];if(l==null){r.format("    |   ");continue}r.format(" %3d|%3d",l.getRowNumber(),l.getValue())}r.format("%n")}return r.toString()}}class zn{constructor(e,r,n,a){this.rowNumber=zn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==zn.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}zn.BARCODE_ROW_UNKNOWN=-1;class or{static initialize(){for(let e=0;e<$e.SYMBOL_TABLE.length;e++){let r=$e.SYMBOL_TABLE[e],n=r&1;for(let a=0;a<$e.BARS_IN_MODULE;a++){let l=0;for(;(r&1)===n;)l+=1,r>>=1;n=r&1,or.RATIOS_TABLE[e]||(or.RATIOS_TABLE[e]=new Array($e.BARS_IN_MODULE)),or.RATIOS_TABLE[e][$e.BARS_IN_MODULE-a-1]=Math.fround(l/$e.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let r=or.getDecodedCodewordValue(or.sampleBitCounts(e));return r!==-1?r:or.getClosestDecodedValue(e)}static sampleBitCounts(e){let r=ht.sum(e),n=new Int32Array($e.BARS_IN_MODULE),a=0,l=0;for(let o=0;o<$e.MODULES_IN_CODEWORD;o++){let u=r/(2*$e.MODULES_IN_CODEWORD)+o*r/$e.MODULES_IN_CODEWORD;l+e[a]<=u&&(l+=e[a],a++),n[a]++}return n}static getDecodedCodewordValue(e){let r=or.getBitValue(e);return $e.getCodeword(r)===-1?-1:r}static getBitValue(e){let r=0;for(let n=0;n<e.length;n++)for(let a=0;a<e[n];a++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(e){let r=ht.sum(e),n=new Array($e.BARS_IN_MODULE);if(r>1)for(let o=0;o<n.length;o++)n[o]=Math.fround(e[o]/r);let a=Tn.MAX_VALUE,l=-1;this.bSymbolTableReady||or.initialize();for(let o=0;o<or.RATIOS_TABLE.length;o++){let u=0,h=or.RATIOS_TABLE[o];for(let g=0;g<$e.BARS_IN_MODULE;g++){let v=Math.fround(h[g]-n[g]);if(u+=Math.fround(v*v),u>=a)break}u<a&&(a=u,l=$e.SYMBOL_TABLE[o])}return l}}or.bSymbolTableReady=!1,or.RATIOS_TABLE=new Array($e.SYMBOL_TABLE.length).map(E=>new Array($e.BARS_IN_MODULE));class hi{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class ea{static parseLong(e,r=void 0){return parseInt(e,r)}}class bn extends N{}bn.kind="NullPointerException";class ta{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,r,n){if(e==null)throw new bn;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new le;if(n===0)return;for(let a=0;a<n;a++)this.write(e[r+a])}flush(){}close(){}}class fi extends N{}class Ya extends ta{constructor(e=32){if(super(),this.count=0,e<0)throw new _("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let n=this.buf.length<<1;if(n-e<0&&(n=e),n<0){if(e<0)throw new fi;n=ne.MAX_VALUE}this.buf=ue.copyOfUint8Array(this.buf,n)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,r,n){if(r<0||r>e.length||n<0||r+n-e.length>0)throw new le;this.ensureCapacity(this.count+n),X.arraycopy(e,r,this.buf,this.count,n),this.count+=n}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ue.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var yt;(function(E){E[E.ALPHA=0]="ALPHA",E[E.LOWER=1]="LOWER",E[E.MIXED=2]="MIXED",E[E.PUNCT=3]="PUNCT",E[E.ALPHA_SHIFT=4]="ALPHA_SHIFT",E[E.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(yt||(yt={}));function Ls(){if(typeof window<"u")return window.BigInt||null;if(typeof Gl<"u")return Gl.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Fs;function Zt(E){if(typeof Fs>"u"&&(Fs=Ls()),Fs===null)throw new Error("BigInt is not supported!");return Fs(E)}function os(){let E=[];E[0]=Zt(1);let e=Zt(900);E[1]=e;for(let r=2;r<16;r++)E[r]=E[r-1]*e;return E}class ie{static decode(e,r){let n=new K(""),a=ce.ISO8859_1;n.enableDecoding(a);let l=1,o=e[l++],u=new hi;for(;l<e[0];){switch(o){case ie.TEXT_COMPACTION_MODE_LATCH:l=ie.textCompaction(e,l,n);break;case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:l=ie.byteCompaction(o,e,a,l,n);break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[l++]);break;case ie.NUMERIC_COMPACTION_MODE_LATCH:l=ie.numericCompaction(e,l,n);break;case ie.ECI_CHARSET:ce.getCharacterSetECIByValue(e[l++]);break;case ie.ECI_GENERAL_PURPOSE:l+=2;break;case ie.ECI_USER_DEFINED:l++;break;case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=ie.decodeMacroBlock(e,l,u);break;case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:throw new Y;default:l--,l=ie.textCompaction(e,l,n);break}if(l<e.length)o=e[l++];else throw Y.getFormatInstance()}if(n.length()===0)throw Y.getFormatInstance();let h=new He(null,n.toString(),null,r);return h.setOther(u),h}static decodeMacroBlock(e,r,n){if(r+ie.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw Y.getFormatInstance();let a=new Int32Array(ie.NUMBER_OF_SEQUENCE_CODEWORDS);for(let u=0;u<ie.NUMBER_OF_SEQUENCE_CODEWORDS;u++,r++)a[u]=e[r];n.setSegmentIndex(ne.parseInt(ie.decodeBase900toBase10(a,ie.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new K;r=ie.textCompaction(e,r,l),n.setFileId(l.toString());let o=-1;for(e[r]===ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=r+1);r<e[0];)switch(e[r]){case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let u=new K;r=ie.textCompaction(e,r+1,u),n.setFileName(u.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let h=new K;r=ie.textCompaction(e,r+1,h),n.setSender(h.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let g=new K;r=ie.textCompaction(e,r+1,g),n.setAddressee(g.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let v=new K;r=ie.numericCompaction(e,r+1,v),n.setSegmentCount(ne.parseInt(v.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let S=new K;r=ie.numericCompaction(e,r+1,S),n.setTimestamp(ea.parseLong(S.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new K;r=ie.numericCompaction(e,r+1,I),n.setChecksum(ne.parseInt(I.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let j=new K;r=ie.numericCompaction(e,r+1,j),n.setFileSize(ea.parseLong(j.toString()));break;default:throw Y.getFormatInstance()}break;case ie.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw Y.getFormatInstance()}if(o!==-1){let u=r-o;n.isLastSegment()&&u--,n.setOptionalData(ue.copyOfRange(e,o,o+u))}return r}static textCompaction(e,r,n){let a=new Int32Array((e[0]-r)*2),l=new Int32Array((e[0]-r)*2),o=0,u=!1;for(;r<e[0]&&!u;){let h=e[r++];if(h<ie.TEXT_COMPACTION_MODE_LATCH)a[o]=h/30,a[o+1]=h%30,o+=2;else switch(h){case ie.TEXT_COMPACTION_MODE_LATCH:a[o++]=ie.TEXT_COMPACTION_MODE_LATCH;break;case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:r--,u=!0;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[o]=ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,h=e[r++],l[o]=h,o++;break}}return ie.decodeTextCompaction(a,l,o,n),r}static decodeTextCompaction(e,r,n,a){let l=yt.ALPHA,o=yt.ALPHA,u=0;for(;u<n;){let h=e[u],g="";switch(l){case yt.ALPHA:if(h<26)g=String.fromCharCode(65+h);else switch(h){case 26:g=" ";break;case ie.LL:l=yt.LOWER;break;case ie.ML:l=yt.MIXED;break;case ie.PS:o=l,l=yt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[u]);break;case ie.TEXT_COMPACTION_MODE_LATCH:l=yt.ALPHA;break}break;case yt.LOWER:if(h<26)g=String.fromCharCode(97+h);else switch(h){case 26:g=" ";break;case ie.AS:o=l,l=yt.ALPHA_SHIFT;break;case ie.ML:l=yt.MIXED;break;case ie.PS:o=l,l=yt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[u]);break;case ie.TEXT_COMPACTION_MODE_LATCH:l=yt.ALPHA;break}break;case yt.MIXED:if(h<ie.PL)g=ie.MIXED_CHARS[h];else switch(h){case ie.PL:l=yt.PUNCT;break;case 26:g=" ";break;case ie.LL:l=yt.LOWER;break;case ie.AL:l=yt.ALPHA;break;case ie.PS:o=l,l=yt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[u]);break;case ie.TEXT_COMPACTION_MODE_LATCH:l=yt.ALPHA;break}break;case yt.PUNCT:if(h<ie.PAL)g=ie.PUNCT_CHARS[h];else switch(h){case ie.PAL:l=yt.ALPHA;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[u]);break;case ie.TEXT_COMPACTION_MODE_LATCH:l=yt.ALPHA;break}break;case yt.ALPHA_SHIFT:if(l=o,h<26)g=String.fromCharCode(65+h);else switch(h){case 26:g=" ";break;case ie.TEXT_COMPACTION_MODE_LATCH:l=yt.ALPHA;break}break;case yt.PUNCT_SHIFT:if(l=o,h<ie.PAL)g=ie.PUNCT_CHARS[h];else switch(h){case ie.PAL:l=yt.ALPHA;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[u]);break;case ie.TEXT_COMPACTION_MODE_LATCH:l=yt.ALPHA;break}break}g!==""&&a.append(g),u++}}static byteCompaction(e,r,n,a,l){let o=new Ya,u=0,h=0,g=!1;switch(e){case ie.BYTE_COMPACTION_MODE_LATCH:let v=new Int32Array(6),S=r[a++];for(;a<r[0]&&!g;)switch(v[u++]=S,h=900*h+S,S=r[a++],S){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:a--,g=!0;break;default:if(u%5===0&&u>0){for(let I=0;I<6;++I)o.write(Number(Zt(h)>>Zt(8*(5-I))));h=0,u=0}break}a===r[0]&&S<ie.TEXT_COMPACTION_MODE_LATCH&&(v[u++]=S);for(let I=0;I<u;I++)o.write(v[I]);break;case ie.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!g;){let I=r[a++];if(I<ie.TEXT_COMPACTION_MODE_LATCH)u++,h=900*h+I;else switch(I){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:a--,g=!0;break}if(u%5===0&&u>0){for(let j=0;j<6;++j)o.write(Number(Zt(h)>>Zt(8*(5-j))));h=0,u=0}}break}return l.append(Ge.decode(o.toByteArray(),n)),a}static numericCompaction(e,r,n){let a=0,l=!1,o=new Int32Array(ie.MAX_NUMERIC_CODEWORDS);for(;r<e[0]&&!l;){let u=e[r++];if(r===e[0]&&(l=!0),u<ie.TEXT_COMPACTION_MODE_LATCH)o[a]=u,a++;else switch(u){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:r--,l=!0;break}(a%ie.MAX_NUMERIC_CODEWORDS===0||u===ie.NUMERIC_COMPACTION_MODE_LATCH||l)&&a>0&&(n.append(ie.decodeBase900toBase10(o,a)),a=0)}return r}static decodeBase900toBase10(e,r){let n=Zt(0);for(let l=0;l<r;l++)n+=ie.EXP900[r-l-1]*Zt(e[l]);let a=n.toString();if(a.charAt(0)!=="1")throw new Y;return a.substring(1)}}ie.TEXT_COMPACTION_MODE_LATCH=900,ie.BYTE_COMPACTION_MODE_LATCH=901,ie.NUMERIC_COMPACTION_MODE_LATCH=902,ie.BYTE_COMPACTION_MODE_LATCH_6=924,ie.ECI_USER_DEFINED=925,ie.ECI_GENERAL_PURPOSE=926,ie.ECI_CHARSET=927,ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ie.MACRO_PDF417_TERMINATOR=922,ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ie.MAX_NUMERIC_CODEWORDS=15,ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ie.PL=25,ie.LL=27,ie.AS=27,ie.ML=28,ie.AL=28,ie.PS=29,ie.PAL=29,ie.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ie.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ie.EXP900=Ls()?os():[],ie.NUMBER_OF_SEQUENCE_CODEWORDS=2;class at{constructor(){}static decode(e,r,n,a,l,o,u){let h=new Wn(e,r,n,a,l),g=null,v=null,S;for(let L=!0;;L=!1){if(r!=null&&(g=at.getRowIndicatorColumn(e,h,r,!0,o,u)),a!=null&&(v=at.getRowIndicatorColumn(e,h,a,!1,o,u)),S=at.merge(g,v),S==null)throw B.getNotFoundInstance();let z=S.getBoundingBox();if(L&&z!=null&&(z.getMinY()<h.getMinY()||z.getMaxY()>h.getMaxY()))h=z;else break}S.setBoundingBox(h);let I=S.getBarcodeColumnCount()+1;S.setDetectionResultColumn(0,g),S.setDetectionResultColumn(I,v);let j=g!=null;for(let L=1;L<=I;L++){let z=j?L:I-L;if(S.getDetectionResultColumn(z)!==void 0)continue;let q;z===0||z===I?q=new Xa(h,z===0):q=new cn(h),S.setDetectionResultColumn(z,q);let se=-1,Ae=se;for(let Ie=h.getMinY();Ie<=h.getMaxY();Ie++){if(se=at.getStartColumn(S,z,Ie,j),se<0||se>h.getMaxX()){if(Ae===-1)continue;se=Ae}let ve=at.detectCodeword(e,h.getMinX(),h.getMaxX(),j,se,Ie,o,u);ve!=null&&(q.setCodeword(Ie,ve),Ae=se,o=Math.min(o,ve.getWidth()),u=Math.max(u,ve.getWidth()))}}return at.createDecoderResult(S)}static merge(e,r){if(e==null&&r==null)return null;let n=at.getBarcodeMetadata(e,r);if(n==null)return null;let a=Wn.merge(at.adjustBoundingBox(e),at.adjustBoundingBox(r));return new Bs(n,a)}static adjustBoundingBox(e){if(e==null)return null;let r=e.getRowHeights();if(r==null)return null;let n=at.getMax(r),a=0;for(let u of r)if(a+=n-u,u>0)break;let l=e.getCodewords();for(let u=0;a>0&&l[u]==null;u++)a--;let o=0;for(let u=r.length-1;u>=0&&(o+=n-r[u],!(r[u]>0));u--);for(let u=l.length-1;o>0&&l[u]==null;u--)o--;return e.getBoundingBox().addMissingRows(a,o,e.isLeft())}static getMax(e){let r=-1;for(let n of e)r=Math.max(r,n);return r}static getBarcodeMetadata(e,r){let n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let a;return r==null||(a=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==a.getColumnCount()&&n.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&n.getRowCount()!==a.getRowCount()?null:n}static getRowIndicatorColumn(e,r,n,a,l,o){let u=new Xa(r,a);for(let h=0;h<2;h++){let g=h===0?1:-1,v=Math.trunc(Math.trunc(n.getX()));for(let S=Math.trunc(Math.trunc(n.getY()));S<=r.getMaxY()&&S>=r.getMinY();S+=g){let I=at.detectCodeword(e,0,e.getWidth(),a,v,S,l,o);I!=null&&(u.setCodeword(S,I),a?v=I.getStartX():v=I.getEndX())}}return u}static adjustCodewordCount(e,r){let n=r[0][1],a=n.getValue(),l=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-at.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(l<1||l>$e.MAX_CODEWORDS_IN_BARCODE)throw B.getNotFoundInstance();n.setValue(l)}else a[0]!==l&&n.setValue(l)}static createDecoderResult(e){let r=at.createBarcodeMatrix(e);at.adjustCodewordCount(e,r);let n=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),l=[],o=new Array;for(let h=0;h<e.getBarcodeRowCount();h++)for(let g=0;g<e.getBarcodeColumnCount();g++){let v=r[h][g+1].getValue(),S=h*e.getBarcodeColumnCount()+g;v.length===0?n.push(S):v.length===1?a[S]=v[0]:(o.push(S),l.push(v))}let u=new Array(l.length);for(let h=0;h<u.length;h++)u[h]=l[h];return at.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,$e.toIntArray(n),$e.toIntArray(o),u)}static createDecoderResultFromAmbiguousValues(e,r,n,a,l){let o=new Int32Array(a.length),u=100;for(;u-- >0;){for(let h=0;h<o.length;h++)r[a[h]]=l[h][o[h]];try{return at.decodeCodewords(r,e,n)}catch(h){if(!(h instanceof Z))throw h}if(o.length===0)throw Z.getChecksumInstance();for(let h=0;h<o.length;h++)if(o[h]<l[h].length-1){o[h]++;break}else if(o[h]=0,h===o.length-1)throw Z.getChecksumInstance()}throw Z.getChecksumInstance()}static createBarcodeMatrix(e){let r=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let a=0;a<r.length;a++)for(let l=0;l<r[a].length;l++)r[a][l]=new Mn;let n=0;for(let a of e.getDetectionResultColumns()){if(a!=null){for(let l of a.getCodewords())if(l!=null){let o=l.getRowNumber();if(o>=0){if(o>=r.length)continue;r[o][n].setValue(l.getValue())}}}n++}return r}static isValidBarcodeColumn(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1}static getStartColumn(e,r,n,a){let l=a?1:-1,o=null;if(at.isValidBarcodeColumn(e,r-l)&&(o=e.getDetectionResultColumn(r-l).getCodeword(n)),o!=null)return a?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(r).getCodewordNearby(n),o!=null)return a?o.getStartX():o.getEndX();if(at.isValidBarcodeColumn(e,r-l)&&(o=e.getDetectionResultColumn(r-l).getCodewordNearby(n)),o!=null)return a?o.getEndX():o.getStartX();let u=0;for(;at.isValidBarcodeColumn(e,r-l);){r-=l;for(let h of e.getDetectionResultColumn(r).getCodewords())if(h!=null)return(a?h.getEndX():h.getStartX())+l*u*(h.getEndX()-h.getStartX());u++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,r,n,a,l,o,u,h){l=at.adjustCodewordStartColumn(e,r,n,a,l,o);let g=at.getModuleBitCount(e,r,n,a,l,o);if(g==null)return null;let v,S=ht.sum(g);if(a)v=l+S;else{for(let L=0;L<g.length/2;L++){let z=g[L];g[L]=g[g.length-1-L],g[g.length-1-L]=z}v=l,l=v-S}if(!at.checkCodewordSkew(S,u,h))return null;let I=or.getDecodedValue(g),j=$e.getCodeword(I);return j===-1?null:new zn(l,v,at.getCodewordBucketNumber(I),j)}static getModuleBitCount(e,r,n,a,l,o){let u=l,h=new Int32Array(8),g=0,v=a?1:-1,S=a;for(;(a?u<n:u>=r)&&g<h.length;)e.get(u,o)===S?(h[g]++,u+=v):(g++,S=!S);return g===h.length||u===(a?n:r)&&g===h.length-1?h:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,r,n,a,l,o){let u=l,h=a?-1:1;for(let g=0;g<2;g++){for(;(a?u>=r:u<n)&&a===e.get(u,o);){if(Math.abs(l-u)>at.CODEWORD_SKEW_SIZE)return l;u+=h}h=-h,a=!a}return u}static checkCodewordSkew(e,r,n){return r-at.CODEWORD_SKEW_SIZE<=e&&e<=n+at.CODEWORD_SKEW_SIZE}static decodeCodewords(e,r,n){if(e.length===0)throw Y.getFormatInstance();let a=1<<r+1,l=at.correctErrors(e,n,a);at.verifyCodewordCount(e,a);let o=ie.decode(e,""+r);return o.setErrorsCorrected(l),o.setErasures(n.length),o}static correctErrors(e,r,n){if(r!=null&&r.length>n/2+at.MAX_ERRORS||n<0||n>at.MAX_EC_CODEWORDS)throw Z.getChecksumInstance();return at.errorCorrection.decode(e,n,r)}static verifyCodewordCount(e,r){if(e.length<4)throw Y.getFormatInstance();let n=e[0];if(n>e.length)throw Y.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw Y.getFormatInstance()}static getBitCountForCodeword(e){let r=new Int32Array(8),n=0,a=r.length-1;for(;!((e&1)!==n&&(n=e&1,a--,a<0));)r[a]++,e>>=1;return r}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return at.getCodewordBucketNumber(at.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let r=new wn;for(let n=0;n<e.length;n++){r.format("Row %2d: ",n);for(let a=0;a<e[n].length;a++){let l=e[n][a];l.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}r.format("%n")}return r.toString()}}at.CODEWORD_SKEW_SIZE=2,at.MAX_ERRORS=3,at.MAX_EC_CODEWORDS=512,at.errorCorrection=new Ji;class cr{decode(e,r=null){let n=cr.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw B.getNotFoundInstance();return n[0]}decodeMultiple(e,r=null){try{return cr.decode(e,r,!0)}catch(n){throw n instanceof Y||n instanceof Z?B.getNotFoundInstance():n}}static decode(e,r,n){const a=new Array,l=nt.detectMultiple(e,r,n);for(const o of l.getPoints()){const u=at.decode(l.getBits(),o[4],o[5],o[6],o[7],cr.getMinCodewordWidth(o),cr.getMaxCodewordWidth(o)),h=new Re(u.getText(),u.getRawBytes(),void 0,o,Ne.PDF_417);h.putMetadata(Ue.ERROR_CORRECTION_LEVEL,u.getECLevel());const g=u.getOther();g!=null&&h.putMetadata(Ue.PDF417_EXTRA_METADATA,g),a.push(h)}return a.map(o=>o)}static getMaxWidth(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMinWidth(e,r){return e==null||r==null?ne.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(cr.getMaxWidth(e[0],e[4]),cr.getMaxWidth(e[6],e[2])*$e.MODULES_IN_CODEWORD/$e.MODULES_IN_STOP_PATTERN),Math.max(cr.getMaxWidth(e[1],e[5]),cr.getMaxWidth(e[7],e[3])*$e.MODULES_IN_CODEWORD/$e.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(cr.getMinWidth(e[0],e[4]),cr.getMinWidth(e[6],e[2])*$e.MODULES_IN_CODEWORD/$e.MODULES_IN_STOP_PATTERN),Math.min(cr.getMinWidth(e[1],e[5]),cr.getMinWidth(e[7],e[3])*$e.MODULES_IN_CODEWORD/$e.MODULES_IN_STOP_PATTERN)))}reset(){}}class cs extends N{}cs.kind="ReaderException";class xi{constructor(e,r){this.verbose=e===!0,r&&this.setHints(r)}decode(e,r){return r&&this.setHints(r),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const r=!b(e)&&e.get(oe.TRY_HARDER)===!0,n=b(e)?null:e.get(oe.POSSIBLE_FORMATS),a=new Array;if(!b(n)){const l=n.some(o=>o===Ne.UPC_A||o===Ne.UPC_E||o===Ne.EAN_13||o===Ne.EAN_8||o===Ne.CODABAR||o===Ne.CODE_39||o===Ne.CODE_93||o===Ne.CODE_128||o===Ne.ITF||o===Ne.RSS_14||o===Ne.RSS_EXPANDED);l&&!r&&a.push(new ss(e,this.verbose)),n.includes(Ne.QR_CODE)&&a.push(new wr),n.includes(Ne.DATA_MATRIX)&&a.push(new Kr),n.includes(Ne.AZTEC)&&a.push(new jn),n.includes(Ne.PDF_417)&&a.push(new cr),l&&r&&a.push(new ss(e,this.verbose))}a.length===0&&(r||a.push(new ss(e,this.verbose)),a.push(new wr),a.push(new Kr),a.push(new jn),a.push(new cr),r&&a.push(new ss(e,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new cs("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(e,this.hints)}catch(n){if(n instanceof cs)continue}throw new B("No MultiFormat Readers were able to detect the code.")}}class Us extends Ee{constructor(e=null,r=500){const n=new xi;n.setHints(e),super(n,r)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class mi extends Ee{constructor(e=500){super(new cr,e)}}class Za extends Ee{constructor(e=500){super(new wr,e)}}var ra;(function(E){E[E.ERROR_CORRECTION=0]="ERROR_CORRECTION",E[E.CHARACTER_SET=1]="CHARACTER_SET",E[E.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",E[E.MIN_SIZE=3]="MIN_SIZE",E[E.MAX_SIZE=4]="MAX_SIZE",E[E.MARGIN=5]="MARGIN",E[E.PDF417_COMPACT=6]="PDF417_COMPACT",E[E.PDF417_COMPACTION=7]="PDF417_COMPACTION",E[E.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",E[E.AZTEC_LAYERS=9]="AZTEC_LAYERS",E[E.QR_VERSION=10]="QR_VERSION"})(ra||(ra={}));var er=ra;class na{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new gt(e,Int32Array.from([1])))}buildGenerator(e){const r=this.cachedGenerators;if(e>=r.length){let n=r[r.length-1];const a=this.field;for(let l=r.length;l<=e;l++){const o=n.multiply(new gt(a,Int32Array.from([1,a.exp(l-1+a.getGeneratorBase())])));r.push(o),n=o}}return r[e]}encode(e,r){if(r===0)throw new _("No error correction bytes");const n=e.length-r;if(n<=0)throw new _("No data bytes provided");const a=this.buildGenerator(r),l=new Int32Array(n);X.arraycopy(e,0,l,0,n);let o=new gt(this.field,l);o=o.multiplyByMonomial(r,1);const h=o.divide(a)[1].getCoefficients(),g=r-h.length;for(let v=0;v<g;v++)e[n+v]=0;X.arraycopy(h,0,e,n+g,h.length)}}class Ot{constructor(){}static applyMaskPenaltyRule1(e){return Ot.applyMaskPenaltyRule1Internal(e,!0)+Ot.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let r=0;const n=e.getArray(),a=e.getWidth(),l=e.getHeight();for(let o=0;o<l-1;o++){const u=n[o];for(let h=0;h<a-1;h++){const g=u[h];g===u[h+1]&&g===n[o+1][h]&&g===n[o+1][h+1]&&r++}}return Ot.N2*r}static applyMaskPenaltyRule3(e){let r=0;const n=e.getArray(),a=e.getWidth(),l=e.getHeight();for(let o=0;o<l;o++)for(let u=0;u<a;u++){const h=n[o];u+6<a&&h[u]===1&&h[u+1]===0&&h[u+2]===1&&h[u+3]===1&&h[u+4]===1&&h[u+5]===0&&h[u+6]===1&&(Ot.isWhiteHorizontal(h,u-4,u)||Ot.isWhiteHorizontal(h,u+7,u+11))&&r++,o+6<l&&n[o][u]===1&&n[o+1][u]===0&&n[o+2][u]===1&&n[o+3][u]===1&&n[o+4][u]===1&&n[o+5][u]===0&&n[o+6][u]===1&&(Ot.isWhiteVertical(n,u,o-4,o)||Ot.isWhiteVertical(n,u,o+7,o+11))&&r++}return r*Ot.N3}static isWhiteHorizontal(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(let a=r;a<n;a++)if(e[a]===1)return!1;return!0}static isWhiteVertical(e,r,n,a){n=Math.max(n,0),a=Math.min(a,e.length);for(let l=n;l<a;l++)if(e[l][r]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let r=0;const n=e.getArray(),a=e.getWidth(),l=e.getHeight();for(let h=0;h<l;h++){const g=n[h];for(let v=0;v<a;v++)g[v]===1&&r++}const o=e.getHeight()*e.getWidth();return Math.floor(Math.abs(r*2-o)*10/o)*Ot.N4}static getDataMaskBit(e,r,n){let a,l;switch(e){case 0:a=n+r&1;break;case 1:a=n&1;break;case 2:a=r%3;break;case 3:a=(n+r)%3;break;case 4:a=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:l=n*r,a=(l&1)+l%3;break;case 6:l=n*r,a=(l&1)+l%3&1;break;case 7:l=n*r,a=l%3+(n+r&1)&1;break;default:throw new _("Invalid mask pattern: "+e)}return a===0}static applyMaskPenaltyRule1Internal(e,r){let n=0;const a=r?e.getHeight():e.getWidth(),l=r?e.getWidth():e.getHeight(),o=e.getArray();for(let u=0;u<a;u++){let h=0,g=-1;for(let v=0;v<l;v++){const S=r?o[u][v]:o[v][u];S===g?h++:(h>=5&&(n+=Ot.N1+(h-5)),h=1,g=S)}h>=5&&(n+=Ot.N1+(h-5))}return n}}Ot.N1=3,Ot.N2=3,Ot.N3=40,Ot.N4=10;class gi{constructor(e,r){this.width=e,this.height=r;const n=new Array(r);for(let a=0;a!==r;a++)n[a]=new Uint8Array(e);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(e,r){return this.bytes[r][e]}getArray(){return this.bytes}setNumber(e,r,n){this.bytes[r][e]=n}setBoolean(e,r,n){this.bytes[r][e]=n?1:0}clear(e){for(const r of this.bytes)ue.fill(r,e)}equals(e){if(!(e instanceof gi))return!1;const r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(let n=0,a=this.height;n<a;++n){const l=this.bytes[n],o=r.bytes[n];for(let u=0,h=this.width;u<h;++u)if(l[u]!==o[u])return!1}return!0}toString(){const e=new K;for(let r=0,n=this.height;r<n;++r){const a=this.bytes[r];for(let l=0,o=this.width;l<o;++l)switch(a[l]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Hn{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new K;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Hn.NUM_MASK_PATTERNS}}Hn.NUM_MASK_PATTERNS=8;class St extends N{}St.kind="WriterException";class Ze{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,r,n,a,l){Ze.clearMatrix(l),Ze.embedBasicPatterns(n,l),Ze.embedTypeInfo(r,a,l),Ze.maybeEmbedVersionInfo(n,l),Ze.embedDataBits(e,a,l)}static embedBasicPatterns(e,r){Ze.embedPositionDetectionPatternsAndSeparators(r),Ze.embedDarkDotAtLeftBottomCorner(r),Ze.maybeEmbedPositionAdjustmentPatterns(e,r),Ze.embedTimingPatterns(r)}static embedTypeInfo(e,r,n){const a=new Q;Ze.makeTypeInfoBits(e,r,a);for(let l=0,o=a.getSize();l<o;++l){const u=a.get(a.getSize()-1-l),h=Ze.TYPE_INFO_COORDINATES[l],g=h[0],v=h[1];if(n.setBoolean(g,v,u),l<8){const S=n.getWidth()-l-1;n.setBoolean(S,8,u)}else{const I=n.getHeight()-7+(l-8);n.setBoolean(8,I,u)}}}static maybeEmbedVersionInfo(e,r){if(e.getVersionNumber()<7)return;const n=new Q;Ze.makeVersionInfoBits(e,n);let a=17;for(let l=0;l<6;++l)for(let o=0;o<3;++o){const u=n.get(a);a--,r.setBoolean(l,r.getHeight()-11+o,u),r.setBoolean(r.getHeight()-11+o,l,u)}}static embedDataBits(e,r,n){let a=0,l=-1,o=n.getWidth()-1,u=n.getHeight()-1;for(;o>0;){for(o===6&&(o-=1);u>=0&&u<n.getHeight();){for(let h=0;h<2;++h){const g=o-h;if(!Ze.isEmpty(n.get(g,u)))continue;let v;a<e.getSize()?(v=e.get(a),++a):v=!1,r!==255&&Ot.getDataMaskBit(r,g,u)&&(v=!v),n.setBoolean(g,u,v)}u+=l}l=-l,u+=l,o-=2}if(a!==e.getSize())throw new St("Not all bits consumed: "+a+"/"+e.getSize())}static findMSBSet(e){return 32-ne.numberOfLeadingZeros(e)}static calculateBCHCode(e,r){if(r===0)throw new _("0 polynomial");const n=Ze.findMSBSet(r);for(e<<=n-1;Ze.findMSBSet(e)>=n;)e^=r<<Ze.findMSBSet(e)-n;return e}static makeTypeInfoBits(e,r,n){if(!Hn.isValidMaskPattern(r))throw new St("Invalid mask pattern");const a=e.getBits()<<3|r;n.appendBits(a,5);const l=Ze.calculateBCHCode(a,Ze.TYPE_INFO_POLY);n.appendBits(l,10);const o=new Q;if(o.appendBits(Ze.TYPE_INFO_MASK_PATTERN,15),n.xor(o),n.getSize()!==15)throw new St("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(e,r){r.appendBits(e.getVersionNumber(),6);const n=Ze.calculateBCHCode(e.getVersionNumber(),Ze.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new St("should not happen but we got: "+r.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let r=8;r<e.getWidth()-8;++r){const n=(r+1)%2;Ze.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),Ze.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new St;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,r,n){for(let a=0;a<8;++a){if(!Ze.isEmpty(n.get(e+a,r)))throw new St;n.setNumber(e+a,r,0)}}static embedVerticalSeparationPattern(e,r,n){for(let a=0;a<7;++a){if(!Ze.isEmpty(n.get(e,r+a)))throw new St;n.setNumber(e,r+a,0)}}static embedPositionAdjustmentPattern(e,r,n){for(let a=0;a<5;++a){const l=Ze.POSITION_ADJUSTMENT_PATTERN[a];for(let o=0;o<5;++o)n.setNumber(e+o,r+a,l[o])}}static embedPositionDetectionPattern(e,r,n){for(let a=0;a<7;++a){const l=Ze.POSITION_DETECTION_PATTERN[a];for(let o=0;o<7;++o)n.setNumber(e+o,r+a,l[o])}}static embedPositionDetectionPatternsAndSeparators(e){const r=Ze.POSITION_DETECTION_PATTERN[0].length;Ze.embedPositionDetectionPattern(0,0,e),Ze.embedPositionDetectionPattern(e.getWidth()-r,0,e),Ze.embedPositionDetectionPattern(0,e.getWidth()-r,e);const n=8;Ze.embedHorizontalSeparationPattern(0,n-1,e),Ze.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),Ze.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);const a=7;Ze.embedVerticalSeparationPattern(a,0,e),Ze.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),Ze.embedVerticalSeparationPattern(a,e.getHeight()-a,e)}static maybeEmbedPositionAdjustmentPatterns(e,r){if(e.getVersionNumber()<2)return;const n=e.getVersionNumber()-1,a=Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let l=0,o=a.length;l!==o;l++){const u=a[l];if(u>=0)for(let h=0;h!==o;h++){const g=a[h];g>=0&&Ze.isEmpty(r.get(g,u))&&Ze.embedPositionAdjustmentPattern(g-2,u-2,r)}}}}Ze.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ze.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ze.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ze.VERSION_INFO_POLY=7973,Ze.TYPE_INFO_POLY=1335,Ze.TYPE_INFO_MASK_PATTERN=21522;class no{constructor(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class kt{constructor(){}static calculateMaskPenalty(e){return Ot.applyMaskPenaltyRule1(e)+Ot.applyMaskPenaltyRule2(e)+Ot.applyMaskPenaltyRule3(e)+Ot.applyMaskPenaltyRule4(e)}static encode(e,r,n=null){let a=kt.DEFAULT_BYTE_MODE_ENCODING;const l=n!==null&&n.get(er.CHARACTER_SET)!==void 0;l&&(a=n.get(er.CHARACTER_SET).toString());const o=this.chooseMode(e,a),u=new Q;if(o===Ye.BYTE&&(l||kt.DEFAULT_BYTE_MODE_ENCODING!==a)){const Ie=ce.getCharacterSetECIByName(a);Ie!==void 0&&this.appendECI(Ie,u)}this.appendModeInfo(o,u);const h=new Q;this.appendBytes(e,o,h,a);let g;if(n!==null&&n.get(er.QR_VERSION)!==void 0){const Ie=Number.parseInt(n.get(er.QR_VERSION).toString(),10);g=Xe.getVersionForNumber(Ie);const ve=this.calculateBitsNeeded(o,u,h,g);if(!this.willFit(ve,g,r))throw new St("Data too big for requested version")}else g=this.recommendVersion(r,o,u,h);const v=new Q;v.appendBitArray(u);const S=o===Ye.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(S,g,o,v),v.appendBitArray(h);const I=g.getECBlocksForLevel(r),j=g.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(j,v);const L=this.interleaveWithECBytes(v,g.getTotalCodewords(),j,I.getNumBlocks()),z=new Hn;z.setECLevel(r),z.setMode(o),z.setVersion(g);const q=g.getDimensionForVersion(),se=new gi(q,q),Ae=this.chooseMaskPattern(L,r,g,se);return z.setMaskPattern(Ae),Ze.buildMatrix(L,r,g,Ae,se),z.setMatrix(se),z}static recommendVersion(e,r,n,a){const l=this.calculateBitsNeeded(r,n,a,Xe.getVersionForNumber(1)),o=this.chooseVersion(l,e),u=this.calculateBitsNeeded(r,n,a,o);return this.chooseVersion(u,e)}static calculateBitsNeeded(e,r,n,a){return r.getSize()+e.getCharacterCountBits(a)+n.getSize()}static getAlphanumericCode(e){return e<kt.ALPHANUMERIC_TABLE.length?kt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,r=null){if(ce.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Ye.KANJI;let n=!1,a=!1;for(let l=0,o=e.length;l<o;++l){const u=e.charAt(l);if(kt.isDigit(u))n=!0;else if(this.getAlphanumericCode(u.charCodeAt(0))!==-1)a=!0;else return Ye.BYTE}return a?Ye.ALPHANUMERIC:n?Ye.NUMERIC:Ye.BYTE}static isOnlyDoubleByteKanji(e){let r;try{r=Ge.encode(e,ce.SJIS)}catch{return!1}const n=r.length;if(n%2!==0)return!1;for(let a=0;a<n;a+=2){const l=r[a]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(e,r,n,a){let l=Number.MAX_SAFE_INTEGER,o=-1;for(let u=0;u<Hn.NUM_MASK_PATTERNS;u++){Ze.buildMatrix(e,r,n,u,a);let h=this.calculateMaskPenalty(a);h<l&&(l=h,o=u)}return o}static chooseVersion(e,r){for(let n=1;n<=40;n++){const a=Xe.getVersionForNumber(n);if(kt.willFit(e,a,r))return a}throw new St("Data too big")}static willFit(e,r,n){const a=r.getTotalCodewords(),o=r.getECBlocksForLevel(n).getTotalECCodewords(),u=a-o,h=(e+7)/8;return u>=h}static terminateBits(e,r){const n=e*8;if(r.getSize()>n)throw new St("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(let o=0;o<4&&r.getSize()<n;++o)r.appendBit(!1);const a=r.getSize()&7;if(a>0)for(let o=a;o<8;o++)r.appendBit(!1);const l=e-r.getSizeInBytes();for(let o=0;o<l;++o)r.appendBits((o&1)===0?236:17,8);if(r.getSize()!==n)throw new St("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,r,n,a,l,o){if(a>=n)throw new St("Block ID too large");const u=e%n,h=n-u,g=Math.floor(e/n),v=g+1,S=Math.floor(r/n),I=S+1,j=g-S,L=v-I;if(j!==L)throw new St("EC bytes mismatch");if(n!==h+u)throw new St("RS blocks mismatch");if(e!==(S+j)*h+(I+L)*u)throw new St("Total bytes mismatch");a<h?(l[0]=S,o[0]=j):(l[0]=I,o[0]=L)}static interleaveWithECBytes(e,r,n,a){if(e.getSizeInBytes()!==n)throw new St("Number of bits and data bytes does not match");let l=0,o=0,u=0;const h=new Array;for(let v=0;v<a;++v){const S=new Int32Array(1),I=new Int32Array(1);kt.getNumDataBytesAndNumECBytesForBlockID(r,n,a,v,S,I);const j=S[0],L=new Uint8Array(j);e.toBytes(8*l,L,0,j);const z=kt.generateECBytes(L,I[0]);h.push(new no(L,z)),o=Math.max(o,j),u=Math.max(u,z.length),l+=S[0]}if(n!==l)throw new St("Data bytes does not match offset");const g=new Q;for(let v=0;v<o;++v)for(const S of h){const I=S.getDataBytes();v<I.length&&g.appendBits(I[v],8)}for(let v=0;v<u;++v)for(const S of h){const I=S.getErrorCorrectionBytes();v<I.length&&g.appendBits(I[v],8)}if(r!==g.getSizeInBytes())throw new St("Interleaving error: "+r+" and "+g.getSizeInBytes()+" differ.");return g}static generateECBytes(e,r){const n=e.length,a=new Int32Array(n+r);for(let o=0;o<n;o++)a[o]=e[o]&255;new na(Pe.QR_CODE_FIELD_256).encode(a,r);const l=new Uint8Array(r);for(let o=0;o<r;o++)l[o]=a[n+o];return l}static appendModeInfo(e,r){r.appendBits(e.getBits(),4)}static appendLengthInfo(e,r,n,a){const l=n.getCharacterCountBits(r);if(e>=1<<l)throw new St(e+" is bigger than "+((1<<l)-1));a.appendBits(e,l)}static appendBytes(e,r,n,a){switch(r){case Ye.NUMERIC:kt.appendNumericBytes(e,n);break;case Ye.ALPHANUMERIC:kt.appendAlphanumericBytes(e,n);break;case Ye.BYTE:kt.append8BitBytes(e,n,a);break;case Ye.KANJI:kt.appendKanjiBytes(e,n);break;default:throw new St("Invalid mode: "+r)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const r=kt.getDigit(e);return r>=0&&r<=9}static appendNumericBytes(e,r){const n=e.length;let a=0;for(;a<n;){const l=kt.getDigit(e.charAt(a));if(a+2<n){const o=kt.getDigit(e.charAt(a+1)),u=kt.getDigit(e.charAt(a+2));r.appendBits(l*100+o*10+u,10),a+=3}else if(a+1<n){const o=kt.getDigit(e.charAt(a+1));r.appendBits(l*10+o,7),a+=2}else r.appendBits(l,4),a++}}static appendAlphanumericBytes(e,r){const n=e.length;let a=0;for(;a<n;){const l=kt.getAlphanumericCode(e.charCodeAt(a));if(l===-1)throw new St;if(a+1<n){const o=kt.getAlphanumericCode(e.charCodeAt(a+1));if(o===-1)throw new St;r.appendBits(l*45+o,11),a+=2}else r.appendBits(l,6),a++}}static append8BitBytes(e,r,n){let a;try{a=Ge.encode(e,n)}catch(l){throw new St(l)}for(let l=0,o=a.length;l!==o;l++){const u=a[l];r.appendBits(u,8)}}static appendKanjiBytes(e,r){let n;try{n=Ge.encode(e,ce.SJIS)}catch(l){throw new St(l)}const a=n.length;for(let l=0;l<a;l+=2){const o=n[l]&255,u=n[l+1]&255,h=o<<8&4294967295|u;let g=-1;if(h>=33088&&h<=40956?g=h-33088:h>=57408&&h<=60351&&(g=h-49472),g===-1)throw new St("Invalid byte sequence");const v=(g>>8)*192+(g&255);r.appendBits(v,13)}}static appendECI(e,r){r.appendBits(Ye.ECI.getBits(),4),r.appendBits(e.getValue(),8)}}kt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),kt.DEFAULT_BYTE_MODE_ENCODING=ce.UTF8.getName();class Gn{write(e,r,n,a=null){if(e.length===0)throw new _("Found empty contents");if(r<0||n<0)throw new _("Requested dimensions are too small: "+r+"x"+n);let l=Et.L,o=Gn.QUIET_ZONE_SIZE;a!==null&&(a.get(er.ERROR_CORRECTION)!==void 0&&(l=Et.fromString(a.get(er.ERROR_CORRECTION).toString())),a.get(er.MARGIN)!==void 0&&(o=Number.parseInt(a.get(er.MARGIN).toString(),10)));const u=kt.encode(e,l,a);return this.renderResult(u,r,n,o)}writeToDom(e,r,n,a,l=null){typeof e=="string"&&(e=document.querySelector(e));const o=this.write(r,n,a,l);e&&e.appendChild(o)}renderResult(e,r,n,a){const l=e.getMatrix();if(l===null)throw new At;const o=l.getWidth(),u=l.getHeight(),h=o+a*2,g=u+a*2,v=Math.max(r,h),S=Math.max(n,g),I=Math.min(Math.floor(v/h),Math.floor(S/g)),j=Math.floor((v-o*I)/2),L=Math.floor((S-u*I)/2),z=this.createSVGElement(v,S);for(let q=0,se=L;q<u;q++,se+=I)for(let Ae=0,Ie=j;Ae<o;Ae++,Ie+=I)if(l.get(Ae,q)===1){const ve=this.createSvgRectElement(Ie,se,I,I);z.appendChild(ve)}return z}createSVGElement(e,r){const n=document.createElementNS(Gn.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",r.toString()),n}createSvgRectElement(e,r,n,a){const l=document.createElementNS(Gn.SVG_NS,"rect");return l.setAttributeNS(null,"x",e.toString()),l.setAttributeNS(null,"y",r.toString()),l.setAttributeNS(null,"height",n.toString()),l.setAttributeNS(null,"width",a.toString()),l.setAttributeNS(null,"fill","#000000"),l}}Gn.QUIET_ZONE_SIZE=4,Gn.SVG_NS="http://www.w3.org/2000/svg";class us{encode(e,r,n,a,l){if(e.length===0)throw new _("Found empty contents");if(r!==Ne.QR_CODE)throw new _("Can only encode QR_CODE, but got "+r);if(n<0||a<0)throw new _(`Requested dimensions are too small: ${n}x${a}`);let o=Et.L,u=us.QUIET_ZONE_SIZE;l!==null&&(l.get(er.ERROR_CORRECTION)!==void 0&&(o=Et.fromString(l.get(er.ERROR_CORRECTION).toString())),l.get(er.MARGIN)!==void 0&&(u=Number.parseInt(l.get(er.MARGIN).toString(),10)));const h=kt.encode(e,o,l);return us.renderResult(h,n,a,u)}static renderResult(e,r,n,a){const l=e.getMatrix();if(l===null)throw new At;const o=l.getWidth(),u=l.getHeight(),h=o+a*2,g=u+a*2,v=Math.max(r,h),S=Math.max(n,g),I=Math.min(Math.floor(v/h),Math.floor(S/g)),j=Math.floor((v-o*I)/2),L=Math.floor((S-u*I)/2),z=new ge(v,S);for(let q=0,se=L;q<u;q++,se+=I)for(let Ae=0,Ie=j;Ae<o;Ae++,Ie+=I)l.get(Ae,q)===1&&z.setRegion(Ie,se,I,I);return z}}us.QUIET_ZONE_SIZE=4;class so{encode(e,r,n,a,l){let o;if(r===Ne.QR_CODE)o=new us;else throw new _("No encoder available for format "+r);return o.encode(e,r,n,a,l)}}class un extends he{constructor(e,r,n,a,l,o,u,h){if(super(o,u),this.yuvData=e,this.dataWidth=r,this.dataHeight=n,this.left=a,this.top=l,a+o>r||l+u>n)throw new _("Crop rectangle does not fit within image data.");h&&this.reverseHorizontal(o,u)}getRow(e,r){if(e<0||e>=this.getHeight())throw new _("Requested row is outside the image: "+e);const n=this.getWidth();(r==null||r.length<n)&&(r=new Uint8ClampedArray(n));const a=(e+this.top)*this.dataWidth+this.left;return X.arraycopy(this.yuvData,a,r,0,n),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;const n=e*r,a=new Uint8ClampedArray(n);let l=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return X.arraycopy(this.yuvData,l,a,0,n),a;for(let o=0;o<r;o++){const u=o*e;X.arraycopy(this.yuvData,l,a,u,e),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(e,r,n,a){return new un(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,n,a,!1)}renderThumbnail(){const e=this.getWidth()/un.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/un.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(e*r),a=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let o=0;o<r;o++){const u=o*e;for(let h=0;h<e;h++){const g=a[l+h*un.THUMBNAIL_SCALE_FACTOR]&255;n[u+h]=4278190080|g*65793}l+=this.dataWidth*un.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/un.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/un.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,r){const n=this.yuvData;for(let a=0,l=this.top*this.dataWidth+this.left;a<r;a++,l+=this.dataWidth){const o=l+e/2;for(let u=l,h=l+e-1;u<o;u++,h--){const g=n[u];n[u]=n[h],n[h]=g}}}invert(){return new H(this)}}un.THUMBNAIL_SCALE_FACTOR=2;class Ws extends he{constructor(e,r,n,a,l,o,u){if(super(r,n),this.dataWidth=a,this.dataHeight=l,this.left=o,this.top=u,e.BYTES_PER_ELEMENT===4){const h=r*n,g=new Uint8ClampedArray(h);for(let v=0;v<h;v++){const S=e[v],I=S>>16&255,j=S>>7&510,L=S&255;g[v]=(I+j+L)/4&255}this.luminances=g}else this.luminances=e;if(a===void 0&&(this.dataWidth=r),l===void 0&&(this.dataHeight=n),o===void 0&&(this.left=0),u===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+n>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(e,r){if(e<0||e>=this.getHeight())throw new _("Requested row is outside the image: "+e);const n=this.getWidth();(r==null||r.length<n)&&(r=new Uint8ClampedArray(n));const a=(e+this.top)*this.dataWidth+this.left;return X.arraycopy(this.luminances,a,r,0,n),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;const n=e*r,a=new Uint8ClampedArray(n);let l=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return X.arraycopy(this.luminances,l,a,0,n),a;for(let o=0;o<r;o++){const u=o*e;X.arraycopy(this.luminances,l,a,u,e),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(e,r,n,a){return new Ws(this.luminances,n,a,this.dataWidth,this.dataHeight,this.left+e,this.top+r)}invert(){return new H(this)}}class Ka extends ce{static forName(e){return this.getCharacterSetECIByName(e)}}class sa{}sa.ISO_8859_1=ce.ISO8859_1;class qa{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class ia{static singletonList(e){return[e]}static min(e,r){return e.sort(r)[0]}}class io{constructor(e){this.previous=e}getPrevious(){return this.previous}}class ds extends io{constructor(e,r,n){super(e),this.value=r,this.bitCount=n}appendTo(e,r){e.appendBits(this.value,this.bitCount)}add(e,r){return new ds(this,e,r)}addBinaryShift(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ds(this,e,r)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+ne.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class aa extends ds{constructor(e,r,n){super(e,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=n}appendTo(e,r){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):n===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+n],8)}addBinaryShift(e,r){return new aa(this,e,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function ao(E,e,r){return new aa(E,e,r)}function zs(E,e,r){return new ds(E,e,r)}const lo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],On=0,hs=1,xr=2,Qa=3,Qr=4,$a=new ds(null,0,0),pi=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ja(E){for(let e of E)ue.fill(e,-1);return E[On][Qr]=0,E[hs][Qr]=0,E[hs][On]=28,E[Qa][Qr]=0,E[xr][Qr]=0,E[xr][On]=15,E}const la=Ja(ue.createInt32Array(6,6));class br{constructor(e,r,n,a){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,r){let n=this.bitCount,a=this.token;if(e!==this.mode){let o=pi[this.mode][e];a=zs(a,o&65535,o>>16),n+=o>>16}let l=e===xr?4:5;return a=zs(a,r,l),new br(a,e,0,n+l)}shiftAndAppend(e,r){let n=this.token,a=this.mode===xr?4:5;return n=zs(n,la[this.mode][e],a),n=zs(n,r,5),new br(n,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(e){let r=this.token,n=this.mode,a=this.bitCount;if(this.mode===Qr||this.mode===xr){let u=pi[n][On];r=zs(r,u&65535,u>>16),a+=u>>16,n=On}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new br(r,n,this.binaryShiftByteCount+1,a+l);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=ao(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new br(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let r=this.bitCount+(pi[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=br.calculateBinaryShiftCost(e)-br.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount}toBitArray(e){let r=[];for(let a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())r.unshift(a);let n=new Q;for(const a of r)a.appendTo(n,e);return n}toString(){return te.format("%s bits=%d bytes=%d",lo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}br.INITIAL_STATE=new br($a,On,0,0);function oo(E){const e=te.getCharCode(" "),r=te.getCharCode("."),n=te.getCharCode(",");E[On][e]=1;const a=te.getCharCode("Z"),l=te.getCharCode("A");for(let I=l;I<=a;I++)E[On][I]=I-l+2;E[hs][e]=1;const o=te.getCharCode("z"),u=te.getCharCode("a");for(let I=u;I<=o;I++)E[hs][I]=I-u+2;E[xr][e]=1;const h=te.getCharCode("9"),g=te.getCharCode("0");for(let I=g;I<=h;I++)E[xr][I]=I-g+2;E[xr][n]=12,E[xr][r]=13;const v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let I=0;I<v.length;I++)E[Qa][te.getCharCode(v[I])]=I;const S=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<S.length;I++)te.getCharCode(S[I])>0&&(E[Qr][te.getCharCode(S[I])]=I);return E}const oa=oo(ue.createInt32Array(5,256));class Hs{constructor(e){this.text=e}encode(){const e=te.getCharCode(" "),r=te.getCharCode(`
`);let n=ia.singletonList(br.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let o,u=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case te.getCharCode("\r"):o=u===r?2:0;break;case te.getCharCode("."):o=u===e?3:0;break;case te.getCharCode(","):o=u===e?4:0;break;case te.getCharCode(":"):o=u===e?5:0;break;default:o=0}o>0?(n=Hs.updateStateListForPair(n,l,o),l++):n=this.updateStateListForChar(n,l)}return ia.min(n,(l,o)=>l.getBitCount()-o.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,r){const n=[];for(let a of e)this.updateStateForChar(a,r,n);return Hs.simplifyStates(n)}updateStateForChar(e,r,n){let a=this.text[r]&255,l=oa[e.getMode()][a]>0,o=null;for(let u=0;u<=Qr;u++){let h=oa[u][a];if(h>0){if(o==null&&(o=e.endBinaryShift(r)),!l||u===e.getMode()||u===xr){const g=o.latchAndAppend(u,h);n.push(g)}if(!l&&la[e.getMode()][u]>=0){const g=o.shiftAndAppend(u,h);n.push(g)}}}if(e.getBinaryShiftByteCount()>0||oa[e.getMode()][a]===0){let u=e.addBinaryShiftChar(r);n.push(u)}}static updateStateListForPair(e,r,n){const a=[];for(let l of e)this.updateStateForPair(l,r,n,a);return this.simplifyStates(a)}static updateStateForPair(e,r,n,a){let l=e.endBinaryShift(r);if(a.push(l.latchAndAppend(Qr,n)),e.getMode()!==Qr&&a.push(l.shiftAndAppend(Qr,n)),n===3||n===4){let o=l.latchAndAppend(xr,16-n).latchAndAppend(xr,1);a.push(o)}if(e.getBinaryShiftByteCount()>0){let o=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(o)}}static simplifyStates(e){let r=[];for(const n of e){let a=!0;for(const l of r){if(l.isBetterThanOrEqualTo(n)){a=!1;break}n.isBetterThanOrEqualTo(l)&&(r=r.filter(o=>o!==l))}a&&r.push(n)}return r}}class xt{constructor(){}static encodeBytes(e){return xt.encode(e,xt.DEFAULT_EC_PERCENT,xt.DEFAULT_AZTEC_LAYERS)}static encode(e,r,n){let a=new Hs(e).encode(),l=ne.truncDivision(a.getSize()*r,100)+11,o=a.getSize()+l,u,h,g,v,S;if(n!==xt.DEFAULT_AZTEC_LAYERS){if(u=n<0,h=Math.abs(n),h>(u?xt.MAX_NB_BITS_COMPACT:xt.MAX_NB_BITS))throw new _(te.format("Illegal value %s for layers",n));g=xt.totalBitsInLayer(h,u),v=xt.WORD_SIZE[h];let ve=g-g%v;if(S=xt.stuffBits(a,v),S.getSize()+l>ve)throw new _("Data to large for user specified layer");if(u&&S.getSize()>v*64)throw new _("Data to large for user specified layer")}else{v=0,S=null;for(let ve=0;;ve++){if(ve>xt.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(u=ve<=3,h=u?ve+1:ve,g=xt.totalBitsInLayer(h,u),o>g)continue;(S==null||v!==xt.WORD_SIZE[h])&&(v=xt.WORD_SIZE[h],S=xt.stuffBits(a,v));let ct=g-g%v;if(!(u&&S.getSize()>v*64)&&S.getSize()+l<=ct)break}}let I=xt.generateCheckWords(S,g,v),j=S.getSize()/v,L=xt.generateModeMessage(u,h,j),z=(u?11:14)+h*4,q=new Int32Array(z),se;if(u){se=z;for(let ve=0;ve<q.length;ve++)q[ve]=ve}else{se=z+1+2*ne.truncDivision(ne.truncDivision(z,2)-1,15);let ve=ne.truncDivision(z,2),ct=ne.truncDivision(se,2);for(let st=0;st<ve;st++){let kr=st+ne.truncDivision(st,15);q[ve-st-1]=ct-kr-1,q[ve+st]=ct+kr+1}}let Ae=new ge(se);for(let ve=0,ct=0;ve<h;ve++){let st=(h-ve)*4+(u?9:12);for(let kr=0;kr<st;kr++){let $r=kr*2;for(let tr=0;tr<2;tr++)I.get(ct+$r+tr)&&Ae.set(q[ve*2+tr],q[ve*2+kr]),I.get(ct+st*2+$r+tr)&&Ae.set(q[ve*2+kr],q[z-1-ve*2-tr]),I.get(ct+st*4+$r+tr)&&Ae.set(q[z-1-ve*2-tr],q[z-1-ve*2-kr]),I.get(ct+st*6+$r+tr)&&Ae.set(q[z-1-ve*2-kr],q[ve*2+tr])}ct+=st*8}if(xt.drawModeMessage(Ae,u,se,L),u)xt.drawBullsEye(Ae,ne.truncDivision(se,2),5);else{xt.drawBullsEye(Ae,ne.truncDivision(se,2),7);for(let ve=0,ct=0;ve<ne.truncDivision(z,2)-1;ve+=15,ct+=16)for(let st=ne.truncDivision(se,2)&1;st<se;st+=2)Ae.set(ne.truncDivision(se,2)-ct,st),Ae.set(ne.truncDivision(se,2)+ct,st),Ae.set(st,ne.truncDivision(se,2)-ct),Ae.set(st,ne.truncDivision(se,2)+ct)}let Ie=new qa;return Ie.setCompact(u),Ie.setSize(se),Ie.setLayers(h),Ie.setCodeWords(j),Ie.setMatrix(Ae),Ie}static drawBullsEye(e,r,n){for(let a=0;a<n;a+=2)for(let l=r-a;l<=r+a;l++)e.set(l,r-a),e.set(l,r+a),e.set(r-a,l),e.set(r+a,l);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)}static generateModeMessage(e,r,n){let a=new Q;return e?(a.appendBits(r-1,2),a.appendBits(n-1,6),a=xt.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(n-1,11),a=xt.generateCheckWords(a,40,4)),a}static drawModeMessage(e,r,n,a){let l=ne.truncDivision(n,2);if(r)for(let o=0;o<7;o++){let u=l-3+o;a.get(o)&&e.set(u,l-5),a.get(o+7)&&e.set(l+5,u),a.get(20-o)&&e.set(u,l+5),a.get(27-o)&&e.set(l-5,u)}else for(let o=0;o<10;o++){let u=l-5+o+ne.truncDivision(o,5);a.get(o)&&e.set(u,l-7),a.get(o+10)&&e.set(l+7,u),a.get(29-o)&&e.set(u,l+7),a.get(39-o)&&e.set(l-7,u)}}static generateCheckWords(e,r,n){let a=e.getSize()/n,l=new na(xt.getGF(n)),o=ne.truncDivision(r,n),u=xt.bitsToWords(e,n,o);l.encode(u,o-a);let h=r%n,g=new Q;g.appendBits(0,h);for(const v of Array.from(u))g.appendBits(v,n);return g}static bitsToWords(e,r,n){let a=new Int32Array(n),l,o;for(l=0,o=e.getSize()/r;l<o;l++){let u=0;for(let h=0;h<r;h++)u|=e.get(l*r+h)?1<<r-h-1:0;a[l]=u}return a}static getGF(e){switch(e){case 4:return Pe.AZTEC_PARAM;case 6:return Pe.AZTEC_DATA_6;case 8:return Pe.AZTEC_DATA_8;case 10:return Pe.AZTEC_DATA_10;case 12:return Pe.AZTEC_DATA_12;default:throw new _("Unsupported word size "+e)}}static stuffBits(e,r){let n=new Q,a=e.getSize(),l=(1<<r)-2;for(let o=0;o<a;o+=r){let u=0;for(let h=0;h<r;h++)(o+h>=a||e.get(o+h))&&(u|=1<<r-1-h);(u&l)===l?(n.appendBits(u&l,r),o--):(u&l)===0?(n.appendBits(u|1,r),o--):n.appendBits(u,r)}return n}static totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}xt.DEFAULT_EC_PERCENT=33,xt.DEFAULT_AZTEC_LAYERS=0,xt.MAX_NB_BITS=32,xt.MAX_NB_BITS_COMPACT=4,xt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Gs{encode(e,r,n,a){return this.encodeWithHints(e,r,n,a,null)}encodeWithHints(e,r,n,a,l){let o=sa.ISO_8859_1,u=xt.DEFAULT_EC_PERCENT,h=xt.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(er.CHARACTER_SET)&&(o=Ka.forName(l.get(er.CHARACTER_SET).toString())),l.has(er.ERROR_CORRECTION)&&(u=ne.parseInt(l.get(er.ERROR_CORRECTION).toString())),l.has(er.AZTEC_LAYERS)&&(h=ne.parseInt(l.get(er.AZTEC_LAYERS).toString()))),Gs.encodeLayers(e,r,n,a,o,u,h)}static encodeLayers(e,r,n,a,l,o,u){if(r!==Ne.AZTEC)throw new _("Can only encode AZTEC, but got "+r);let h=xt.encode(te.getBytes(e,l),o,u);return Gs.renderResult(h,n,a)}static renderResult(e,r,n){let a=e.getMatrix();if(a==null)throw new At;let l=a.getWidth(),o=a.getHeight(),u=Math.max(r,l),h=Math.max(n,o),g=Math.min(u/l,h/o),v=(u-l*g)/2,S=(h-o*g)/2,I=new ge(u,h);for(let j=0,L=S;j<o;j++,L+=g)for(let z=0,q=v;z<l;z++,q+=g)a.get(z,j)&&I.setRegion(q,L,g,g);return I}}x.AbstractExpandedDecoder=Yi,x.ArgumentException=O,x.ArithmeticException=We,x.AztecCode=qa,x.AztecCodeReader=jn,x.AztecCodeWriter=Gs,x.AztecDecoder=tt,x.AztecDetector=rs,x.AztecDetectorResult=zi,x.AztecEncoder=xt,x.AztecHighLevelEncoder=Hs,x.AztecPoint=hr,x.BarcodeFormat=Ne,x.Binarizer=G,x.BinaryBitmap=$,x.BitArray=Q,x.BitMatrix=ge,x.BitSource=qi,x.BrowserAztecCodeReader=to,x.BrowserBarcodeReader=za,x.BrowserCodeReader=Ee,x.BrowserDatamatrixCodeReader=ro,x.BrowserMultiFormatReader=Us,x.BrowserPDF417Reader=mi,x.BrowserQRCodeReader=Za,x.BrowserQRCodeSvgWriter=Gn,x.CharacterSetECI=ce,x.ChecksumException=Z,x.Code128Reader=je,x.Code39Reader=$t,x.DataMatrixDecodedBitStreamParser=Zr,x.DataMatrixReader=Kr,x.DecodeHintType=oe,x.DecoderResult=He,x.DefaultGridSampler=li,x.DetectorResult=ts,x.EAN13Reader=Pr,x.EncodeHintType=er,x.Exception=N,x.FormatException=Y,x.GenericGF=Pe,x.GenericGFPoly=gt,x.GlobalHistogramBinarizer=ye,x.GridSampler=ai,x.GridSamplerInstance=Vr,x.HTMLCanvasElementLuminanceSource=U,x.HybridBinarizer=fe,x.ITFReader=vt,x.IllegalArgumentException=_,x.IllegalStateException=At,x.InvertedLuminanceSource=H,x.LuminanceSource=he,x.MathUtils=ht,x.MultiFormatOneDReader=ss,x.MultiFormatReader=xi,x.MultiFormatWriter=so,x.NotFoundException=B,x.OneDReader=Ut,x.PDF417DecodedBitStreamParser=ie,x.PDF417DecoderErrorCorrection=Ji,x.PDF417Reader=cr,x.PDF417ResultMetadata=hi,x.PerspectiveTransform=Dr,x.PlanarYUVLuminanceSource=un,x.QRCodeByteMatrix=gi,x.QRCodeDataMask=ot,x.QRCodeDecodedBitStreamParser=Mt,x.QRCodeDecoderErrorCorrectionLevel=Et,x.QRCodeDecoderFormatInformation=ar,x.QRCodeEncoder=kt,x.QRCodeEncoderQRCode=Hn,x.QRCodeMaskUtil=Ot,x.QRCodeMatrixUtil=Ze,x.QRCodeMode=Ye,x.QRCodeReader=wr,x.QRCodeVersion=Xe,x.QRCodeWriter=us,x.RGBLuminanceSource=Ws,x.RSS14Reader=Tt,x.RSSExpandedReader=pe,x.ReaderException=cs,x.ReedSolomonDecoder=It,x.ReedSolomonEncoder=na,x.ReedSolomonException=pt,x.Result=Re,x.ResultMetadataType=Ue,x.ResultPoint=Oe,x.StringUtils=te,x.UnsupportedOperationException=ke,x.VideoInputDevice=P,x.WhiteRectangleDetector=sn,x.WriterException=St,x.ZXingArrays=ue,x.ZXingCharset=Ka,x.ZXingInteger=ne,x.ZXingStandardCharsets=sa,x.ZXingStringBuilder=K,x.ZXingStringEncoding=Ge,x.ZXingSystem=X,x.createAbstractExpandedDecoder=Ua,Object.defineProperty(x,"__esModule",{value:!0})}))})(_a,_a.exports)),_a.exports}var Gt=Bh();const Lh=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var t0=(function(){function f(m,x,b){if(this.formatMap=new Map([[De.QR_CODE,Gt.BarcodeFormat.QR_CODE],[De.AZTEC,Gt.BarcodeFormat.AZTEC],[De.CODABAR,Gt.BarcodeFormat.CODABAR],[De.CODE_39,Gt.BarcodeFormat.CODE_39],[De.CODE_93,Gt.BarcodeFormat.CODE_93],[De.CODE_128,Gt.BarcodeFormat.CODE_128],[De.DATA_MATRIX,Gt.BarcodeFormat.DATA_MATRIX],[De.MAXICODE,Gt.BarcodeFormat.MAXICODE],[De.ITF,Gt.BarcodeFormat.ITF],[De.EAN_13,Gt.BarcodeFormat.EAN_13],[De.EAN_8,Gt.BarcodeFormat.EAN_8],[De.PDF_417,Gt.BarcodeFormat.PDF_417],[De.RSS_14,Gt.BarcodeFormat.RSS_14],[De.RSS_EXPANDED,Gt.BarcodeFormat.RSS_EXPANDED],[De.UPC_A,Gt.BarcodeFormat.UPC_A],[De.UPC_E,Gt.BarcodeFormat.UPC_E],[De.UPC_EAN_EXTENSION,Gt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Lh)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=x,this.logger=b;var C=this.createZXingFormats(m),w=new Map;w.set(Gt.DecodeHintType.POSSIBLE_FORMATS,C),w.set(Gt.DecodeHintType.TRY_HARDER,!1),this.hints=w}return f.prototype.decodeAsync=function(m){var x=this;return new Promise(function(b,C){try{b(x.decode(m))}catch(w){C(w)}})},f.prototype.decode=function(m){var x=new Gt.MultiFormatReader(this.verbose,this.hints),b=new Gt.HTMLCanvasElementLuminanceSource(m),C=new Gt.BinaryBitmap(new Gt.HybridBinarizer(b)),w=x.decode(C);return{text:w.text,format:O0.create(this.toHtml5QrcodeSupportedFormats(w.format)),debugData:this.createDebugData()}},f.prototype.createReverseFormatMap=function(){var m=new Map;return this.formatMap.forEach(function(x,b,C){m.set(x,b)}),m},f.prototype.toHtml5QrcodeSupportedFormats=function(m){if(!this.reverseFormatMap.has(m))throw"reverseFormatMap doesn't have ".concat(m);return this.reverseFormatMap.get(m)},f.prototype.createZXingFormats=function(m){for(var x=[],b=0,C=m;b<C.length;b++){var w=C[b];this.formatMap.has(w)?x.push(this.formatMap.get(w)):this.logger.logError("".concat(w," is not supported by")+"ZXingHtml5QrcodeShim")}return x},f.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},f})(),Fh=function(f,m,x,b){function C(w){return w instanceof x?w:new x(function(k){k(w)})}return new(x||(x=Promise))(function(w,k){function M(O){try{N(b.next(O))}catch(_){k(_)}}function R(O){try{N(b.throw(O))}catch(_){k(_)}}function N(O){O.done?w(O.value):C(O.value).then(M,R)}N((b=b.apply(f,m||[])).next())})},Uh=function(f,m){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},b,C,w,k;return k={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function M(N){return function(O){return R([N,O])}}function R(N){if(b)throw new TypeError("Generator is already executing.");for(;k&&(k=0,N[0]&&(x=0)),x;)try{if(b=1,C&&(w=N[0]&2?C.return:N[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,N[1])).done)return w;switch(C=0,w&&(N=[N[0]&2,w.value]),N[0]){case 0:case 1:w=N;break;case 4:return x.label++,{value:N[1],done:!1};case 5:x.label++,C=N[1],N=[0];continue;case 7:N=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(N[0]===6||N[0]===2)){x=0;continue}if(N[0]===3&&(!w||N[1]>w[0]&&N[1]<w[3])){x.label=N[1];break}if(N[0]===6&&x.label<w[1]){x.label=w[1],w=N;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(N);break}w[2]&&x.ops.pop(),x.trys.pop();continue}N=m.call(f,x)}catch(O){N=[6,O],C=0}finally{b=w=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},r0=(function(){function f(m,x,b){if(this.formatMap=new Map([[De.QR_CODE,"qr_code"],[De.AZTEC,"aztec"],[De.CODABAR,"codabar"],[De.CODE_39,"code_39"],[De.CODE_93,"code_93"],[De.CODE_128,"code_128"],[De.DATA_MATRIX,"data_matrix"],[De.ITF,"itf"],[De.EAN_13,"ean_13"],[De.EAN_8,"ean_8"],[De.PDF_417,"pdf417"],[De.UPC_A,"upc_a"],[De.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!f.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=x,this.logger=b;var C=this.createBarcodeDetectorFormats(m);if(this.detector=new BarcodeDetector(C),!this.detector)throw"BarcodeDetector detector not supported"}return f.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var m=new BarcodeDetector({formats:["qr_code"]});return typeof m<"u"},f.prototype.decodeAsync=function(m){return Fh(this,void 0,void 0,function(){var x,b;return Uh(this,function(C){switch(C.label){case 0:return[4,this.detector.detect(m)];case 1:if(x=C.sent(),!x||x.length===0)throw"No barcode or QR code detected.";return b=this.selectLargestBarcode(x),[2,{text:b.rawValue,format:O0.create(this.toHtml5QrcodeSupportedFormats(b.format)),debugData:this.createDebugData()}]}})})},f.prototype.selectLargestBarcode=function(m){for(var x=null,b=0,C=0,w=m;C<w.length;C++){var k=w[C],M=k.boundingBox.width*k.boundingBox.height;M>b&&(b=M,x=k)}if(!x)throw"No largest barcode found";return x},f.prototype.createBarcodeDetectorFormats=function(m){for(var x=[],b=0,C=m;b<C.length;b++){var w=C[b];this.formatMap.has(w)?x.push(this.formatMap.get(w)):this.logger.warn("".concat(w," is not supported by")+"BarcodeDetectorDelegate")}return{formats:x}},f.prototype.toHtml5QrcodeSupportedFormats=function(m){if(!this.reverseFormatMap.has(m))throw"reverseFormatMap doesn't have ".concat(m);return this.reverseFormatMap.get(m)},f.prototype.createReverseFormatMap=function(){var m=new Map;return this.formatMap.forEach(function(x,b,C){m.set(x,b)}),m},f.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},f})(),n0=function(f,m,x,b){function C(w){return w instanceof x?w:new x(function(k){k(w)})}return new(x||(x=Promise))(function(w,k){function M(O){try{N(b.next(O))}catch(_){k(_)}}function R(O){try{N(b.throw(O))}catch(_){k(_)}}function N(O){O.done?w(O.value):C(O.value).then(M,R)}N((b=b.apply(f,m||[])).next())})},s0=function(f,m){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},b,C,w,k;return k={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function M(N){return function(O){return R([N,O])}}function R(N){if(b)throw new TypeError("Generator is already executing.");for(;k&&(k=0,N[0]&&(x=0)),x;)try{if(b=1,C&&(w=N[0]&2?C.return:N[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,N[1])).done)return w;switch(C=0,w&&(N=[N[0]&2,w.value]),N[0]){case 0:case 1:w=N;break;case 4:return x.label++,{value:N[1],done:!1};case 5:x.label++,C=N[1],N=[0];continue;case 7:N=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(N[0]===6||N[0]===2)){x=0;continue}if(N[0]===3&&(!w||N[1]>w[0]&&N[1]<w[3])){x.label=N[1];break}if(N[0]===6&&x.label<w[1]){x.label=w[1],w=N;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(N);break}w[2]&&x.ops.pop(),x.trys.pop();continue}N=m.call(f,x)}catch(O){N=[6,O],C=0}finally{b=w=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},Wh=(function(){function f(m,x,b,C){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=b,x&&r0.isSupported()?(this.primaryDecoder=new r0(m,b,C),this.secondaryDecoder=new t0(m,b,C)):this.primaryDecoder=new t0(m,b,C)}return f.prototype.decodeAsync=function(m){return n0(this,void 0,void 0,function(){var x;return s0(this,function(b){switch(b.label){case 0:x=performance.now(),b.label=1;case 1:return b.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(m)];case 2:return[2,b.sent()];case 3:return this.possiblyLogPerformance(x),[7];case 4:return[2]}})})},f.prototype.decodeRobustlyAsync=function(m){return n0(this,void 0,void 0,function(){var x,b;return s0(this,function(C){switch(C.label){case 0:x=performance.now(),C.label=1;case 1:return C.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(m)];case 2:return[2,C.sent()];case 3:if(b=C.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(m)];throw b;case 4:return this.possiblyLogPerformance(x),[7];case 5:return[2]}})})},f.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},f.prototype.possiblyLogPerformance=function(m){if(this.verbose){var x=performance.now()-m;this.executionResults.push(x),this.executions++,this.possiblyFlushPerformanceReport()}},f.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var m=0,x=0,b=this.executionResults;x<b.length;x++){var C=b[x];m+=C}var w=m/this.executionResults.length;console.log("".concat(w," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},f})(),zc=(function(){var f=function(m,x){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,C){b.__proto__=C}||function(b,C){for(var w in C)Object.prototype.hasOwnProperty.call(C,w)&&(b[w]=C[w])},f(m,x)};return function(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");f(m,x);function b(){this.constructor=m}m.prototype=x===null?Object.create(x):(b.prototype=x.prototype,new b)}})(),Jl=function(f,m,x,b){function C(w){return w instanceof x?w:new x(function(k){k(w)})}return new(x||(x=Promise))(function(w,k){function M(O){try{N(b.next(O))}catch(_){k(_)}}function R(O){try{N(b.throw(O))}catch(_){k(_)}}function N(O){O.done?w(O.value):C(O.value).then(M,R)}N((b=b.apply(f,m||[])).next())})},eo=function(f,m){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},b,C,w,k;return k={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function M(N){return function(O){return R([N,O])}}function R(N){if(b)throw new TypeError("Generator is already executing.");for(;k&&(k=0,N[0]&&(x=0)),x;)try{if(b=1,C&&(w=N[0]&2?C.return:N[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,N[1])).done)return w;switch(C=0,w&&(N=[N[0]&2,w.value]),N[0]){case 0:case 1:w=N;break;case 4:return x.label++,{value:N[1],done:!1};case 5:x.label++,C=N[1],N=[0];continue;case 7:N=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(N[0]===6||N[0]===2)){x=0;continue}if(N[0]===3&&(!w||N[1]>w[0]&&N[1]<w[3])){x.label=N[1];break}if(N[0]===6&&x.label<w[1]){x.label=w[1],w=N;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(N);break}w[2]&&x.ops.pop(),x.trys.pop();continue}N=m.call(f,x)}catch(O){N=[6,O],C=0}finally{b=w=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},P0=(function(){function f(m,x){this.name=m,this.track=x}return f.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},f.prototype.apply=function(m){var x={};x[this.name]=m;var b={advanced:[x]};return this.track.applyConstraints(b)},f.prototype.value=function(){var m=this.track.getSettings();if(this.name in m){var x=m[this.name];return x}return null},f})(),zh=(function(f){zc(m,f);function m(x,b){return f.call(this,x,b)||this}return m.prototype.min=function(){return this.getCapabilities().min},m.prototype.max=function(){return this.getCapabilities().max},m.prototype.step=function(){return this.getCapabilities().step},m.prototype.apply=function(x){var b={};b[this.name]=x;var C={advanced:[b]};return this.track.applyConstraints(C)},m.prototype.getCapabilities=function(){this.failIfNotSupported();var x=this.track.getCapabilities(),b=x[this.name];return{min:b.min,max:b.max,step:b.step}},m.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},m})(P0),Hh=(function(f){zc(m,f);function m(x){return f.call(this,"zoom",x)||this}return m})(zh),Gh=(function(f){zc(m,f);function m(x){return f.call(this,"torch",x)||this}return m})(P0),Vh=(function(){function f(m){this.track=m}return f.prototype.zoomFeature=function(){return new Hh(this.track)},f.prototype.torchFeature=function(){return new Gh(this.track)},f})(),Xh=(function(){function f(m,x,b){this.isClosed=!1,this.parentElement=m,this.mediaStream=x,this.callbacks=b,this.surface=this.createVideoElement(this.parentElement.clientWidth),m.append(this.surface)}return f.prototype.createVideoElement=function(m){var x=document.createElement("video");return x.style.width="".concat(m,"px"),x.style.display="block",x.muted=!0,x.setAttribute("muted","true"),x.playsInline=!0,x},f.prototype.setupSurface=function(){var m=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var x=function(){var b=m.surface.clientWidth,C=m.surface.clientHeight;m.callbacks.onRenderSurfaceReady(b,C),m.surface.removeEventListener("playing",x)};this.surface.addEventListener("playing",x),this.surface.srcObject=this.mediaStream,this.surface.play()},f.create=function(m,x,b,C){return Jl(this,void 0,void 0,function(){var w,k;return eo(this,function(M){switch(M.label){case 0:return w=new f(m,x,C),b.aspectRatio?(k={aspectRatio:b.aspectRatio},[4,w.getFirstTrackOrFail().applyConstraints(k)]):[3,2];case 1:M.sent(),M.label=2;case 2:return w.setupSurface(),[2,w]}})})},f.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},f.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},f.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},f.prototype.resume=function(m){this.failIfClosed();var x=this,b=function(){setTimeout(m,200),x.surface.removeEventListener("playing",b)};this.surface.addEventListener("playing",b),this.surface.play()},f.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},f.prototype.getSurface=function(){return this.failIfClosed(),this.surface},f.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},f.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},f.prototype.applyVideoConstraints=function(m){return Jl(this,void 0,void 0,function(){return eo(this,function(x){if("aspectRatio"in m)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(m)]})})},f.prototype.close=function(){if(this.isClosed)return Promise.resolve();var m=this;return new Promise(function(x,b){var C=m.mediaStream.getVideoTracks(),w=C.length,k=0;m.mediaStream.getVideoTracks().forEach(function(M){m.mediaStream.removeTrack(M),M.stop(),++k,k>=w&&(m.isClosed=!0,m.parentElement.removeChild(m.surface),x())})})},f.prototype.getCapabilities=function(){return new Vh(this.getFirstTrackOrFail())},f})(),Yh=(function(){function f(m){this.mediaStream=m}return f.prototype.render=function(m,x,b){return Jl(this,void 0,void 0,function(){return eo(this,function(C){return[2,Xh.create(m,this.mediaStream,x,b)]})})},f.create=function(m){return Jl(this,void 0,void 0,function(){var x,b;return eo(this,function(C){switch(C.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return x={audio:!1,video:m},[4,navigator.mediaDevices.getUserMedia(x)];case 1:return b=C.sent(),[2,new f(b)]}})})},f})(),i0=function(f,m,x,b){function C(w){return w instanceof x?w:new x(function(k){k(w)})}return new(x||(x=Promise))(function(w,k){function M(O){try{N(b.next(O))}catch(_){k(_)}}function R(O){try{N(b.throw(O))}catch(_){k(_)}}function N(O){O.done?w(O.value):C(O.value).then(M,R)}N((b=b.apply(f,m||[])).next())})},a0=function(f,m){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},b,C,w,k;return k={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function M(N){return function(O){return R([N,O])}}function R(N){if(b)throw new TypeError("Generator is already executing.");for(;k&&(k=0,N[0]&&(x=0)),x;)try{if(b=1,C&&(w=N[0]&2?C.return:N[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,N[1])).done)return w;switch(C=0,w&&(N=[N[0]&2,w.value]),N[0]){case 0:case 1:w=N;break;case 4:return x.label++,{value:N[1],done:!1};case 5:x.label++,C=N[1],N=[0];continue;case 7:N=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(N[0]===6||N[0]===2)){x=0;continue}if(N[0]===3&&(!w||N[1]>w[0]&&N[1]<w[3])){x.label=N[1];break}if(N[0]===6&&x.label<w[1]){x.label=w[1],w=N;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(N);break}w[2]&&x.ops.pop(),x.trys.pop();continue}N=m.call(f,x)}catch(O){N=[6,O],C=0}finally{b=w=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},Zh=(function(){function f(){}return f.failIfNotSupported=function(){return i0(this,void 0,void 0,function(){return a0(this,function(m){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new f]})})},f.prototype.create=function(m){return i0(this,void 0,void 0,function(){return a0(this,function(x){return[2,Yh.create(m)]})})},f})(),Kh=function(f,m,x,b){function C(w){return w instanceof x?w:new x(function(k){k(w)})}return new(x||(x=Promise))(function(w,k){function M(O){try{N(b.next(O))}catch(_){k(_)}}function R(O){try{N(b.throw(O))}catch(_){k(_)}}function N(O){O.done?w(O.value):C(O.value).then(M,R)}N((b=b.apply(f,m||[])).next())})},qh=function(f,m){var x={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},b,C,w,k;return k={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function M(N){return function(O){return R([N,O])}}function R(N){if(b)throw new TypeError("Generator is already executing.");for(;k&&(k=0,N[0]&&(x=0)),x;)try{if(b=1,C&&(w=N[0]&2?C.return:N[0]?C.throw||((w=C.return)&&w.call(C),0):C.next)&&!(w=w.call(C,N[1])).done)return w;switch(C=0,w&&(N=[N[0]&2,w.value]),N[0]){case 0:case 1:w=N;break;case 4:return x.label++,{value:N[1],done:!1};case 5:x.label++,C=N[1],N=[0];continue;case 7:N=x.ops.pop(),x.trys.pop();continue;default:if(w=x.trys,!(w=w.length>0&&w[w.length-1])&&(N[0]===6||N[0]===2)){x=0;continue}if(N[0]===3&&(!w||N[1]>w[0]&&N[1]<w[3])){x.label=N[1];break}if(N[0]===6&&x.label<w[1]){x.label=w[1],w=N;break}if(w&&x.label<w[2]){x.label=w[2],x.ops.push(N);break}w[2]&&x.ops.pop(),x.trys.pop();continue}N=m.call(f,x)}catch(O){N=[6,O],C=0}finally{b=w=0}if(N[0]&5)throw N[1];return{value:N[0]?N[1]:void 0,done:!0}}},Qh=(function(){function f(){}return f.retrieve=function(){if(navigator.mediaDevices)return f.getCamerasFromMediaDevices();var m=MediaStreamTrack;return MediaStreamTrack&&m.getSources?f.getCamerasFromMediaStreamTrack():f.rejectWithError()},f.rejectWithError=function(){var m=Pi.unableToQuerySupportedDevices();return f.isHttpsOrLocalhost()||(m=Pi.insecureContextCameraQueryError()),Promise.reject(m)},f.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var m=location.host.split(":")[0];return m==="127.0.0.1"||m==="localhost"},f.getCamerasFromMediaDevices=function(){return Kh(this,void 0,void 0,function(){var m,x,b,C,w,k,M;return qh(this,function(R){switch(R.label){case 0:return m=function(N){for(var O=N.getVideoTracks(),_=0,$=O;_<$.length;_++){var Z=$[_];Z.enabled=!1,Z.stop(),N.removeTrack(Z)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return x=R.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(b=R.sent(),C=[],w=0,k=b;w<k.length;w++)M=k[w],M.kind==="videoinput"&&C.push({id:M.deviceId,label:M.label});return m(x),[2,C]}})})},f.getCamerasFromMediaStreamTrack=function(){return new Promise(function(m,x){var b=function(w){for(var k=[],M=0,R=w;M<R.length;M++){var N=R[M];N.kind==="video"&&k.push({id:N.id,label:N.label})}m(k)},C=MediaStreamTrack;C.getSources(b)})},f})(),qt;(function(f){f[f.UNKNOWN=0]="UNKNOWN",f[f.NOT_STARTED=1]="NOT_STARTED",f[f.SCANNING=2]="SCANNING",f[f.PAUSED=3]="PAUSED"})(qt||(qt={}));var $h=(function(){function f(){this.state=qt.NOT_STARTED,this.onGoingTransactionNewState=qt.UNKNOWN}return f.prototype.directTransition=function(m){this.failIfTransitionOngoing(),this.validateTransition(m),this.state=m},f.prototype.startTransition=function(m){return this.failIfTransitionOngoing(),this.validateTransition(m),this.onGoingTransactionNewState=m,this},f.prototype.execute=function(){if(this.onGoingTransactionNewState===qt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var m=this.onGoingTransactionNewState;this.onGoingTransactionNewState=qt.UNKNOWN,this.directTransition(m)},f.prototype.cancel=function(){if(this.onGoingTransactionNewState===qt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=qt.UNKNOWN},f.prototype.getState=function(){return this.state},f.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==qt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},f.prototype.validateTransition=function(m){switch(this.state){case qt.UNKNOWN:throw"Transition from unknown is not allowed";case qt.NOT_STARTED:this.failIfNewStateIs(m,[qt.PAUSED]);break;case qt.SCANNING:break;case qt.PAUSED:break}},f.prototype.failIfNewStateIs=function(m,x){for(var b=0,C=x;b<C.length;b++){var w=C[b];if(m===w)throw"Cannot transition from ".concat(this.state," to ").concat(m)}},f})(),Jh=(function(){function f(m){this.stateManager=m}return f.prototype.startTransition=function(m){return this.stateManager.startTransition(m)},f.prototype.directTransition=function(m){this.stateManager.directTransition(m)},f.prototype.getState=function(){return this.stateManager.getState()},f.prototype.canScanFile=function(){return this.stateManager.getState()===qt.NOT_STARTED},f.prototype.isScanning=function(){return this.stateManager.getState()!==qt.NOT_STARTED},f.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===qt.SCANNING},f.prototype.isPaused=function(){return this.stateManager.getState()===qt.PAUSED},f})(),ef=(function(){function f(){}return f.create=function(){return new Jh(new $h)},f})(),tf=(function(){var f=function(m,x){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,C){b.__proto__=C}||function(b,C){for(var w in C)Object.prototype.hasOwnProperty.call(C,w)&&(b[w]=C[w])},f(m,x)};return function(m,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");f(m,x);function b(){this.constructor=m}m.prototype=x===null?Object.create(x):(b.prototype=x.prototype,new b)}})(),nn=(function(f){tf(m,f);function m(){return f!==null&&f.apply(this,arguments)||this}return m.DEFAULT_WIDTH=300,m.DEFAULT_WIDTH_OFFSET=2,m.FILE_SCAN_MIN_HEIGHT=300,m.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,m.MIN_QR_BOX_SIZE=50,m.SHADED_LEFT=1,m.SHADED_RIGHT=2,m.SHADED_TOP=3,m.SHADED_BOTTOM=4,m.SHADED_REGION_ELEMENT_ID="qr-shaded-region",m.VERBOSE=!1,m.BORDER_SHADER_DEFAULT_COLOR="#ffffff",m.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",m})(Mh),rf=(function(){function f(m,x){this.logger=x,this.fps=nn.SCAN_DEFAULT_FPS,m?(m.fps&&(this.fps=m.fps),this.disableFlip=m.disableFlip===!0,this.qrbox=m.qrbox,this.aspectRatio=m.aspectRatio,this.videoConstraints=m.videoConstraints):this.disableFlip=nn.DEFAULT_DISABLE_FLIP}return f.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?D0.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},f.prototype.isShadedBoxEnabled=function(){return!es(this.qrbox)},f.create=function(m,x){return new f(m,x)},f})(),l0=(function(){function f(m,x){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(m))throw"HTML Element with id=".concat(m," not found");this.elementId=m,this.verbose=!1;var b;typeof x=="boolean"?this.verbose=x===!0:x&&(b=x,this.verbose=b.verbose===!0,b.experimentalFeatures),this.logger=new Dh(this.verbose),this.qrcode=new Wh(this.getSupportedFormats(x),this.getUseBarCodeDetectorIfSupported(b),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=ef.create()}return f.prototype.start=function(m,x,b,C){var w=this;if(!m)throw"cameraIdOrConfig is required";if(!b||typeof b!="function")throw"qrCodeSuccessCallback is required and should be a function.";var k;C?k=C:k=this.verbose?this.logger.log:function(){};var M=rf.create(x,this.logger);this.clearElement();var R=!1;M.videoConstraints&&(M.isMediaStreamConstraintsValid()?R=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var N=R,O=document.getElementById(this.elementId);O.clientWidth?O.clientWidth:nn.DEFAULT_WIDTH,O.style.position="relative",this.shouldScan=!0,this.element=O;var _=this,$=this.stateManagerProxy.startTransition(qt.SCANNING);return new Promise(function(Z,G){var X=N?M.videoConstraints:_.createVideoConstraints(m);if(!X){$.cancel(),G("videoConstraints should be defined");return}var le={};(!N||M.aspectRatio)&&(le.aspectRatio=M.aspectRatio);var de={onRenderSurfaceReady:function(ue,ne){_.setupUi(ue,ne,M),_.isScanning=!0,_.foreverScan(M,b,k)}};Zh.failIfNotSupported().then(function(ue){ue.create(X).then(function(ne){return ne.render(w.element,le,de).then(function(Q){_.renderedCamera=Q,$.execute(),Z(null)}).catch(function(Q){$.cancel(),G(Q)})}).catch(function(ne){$.cancel(),G(Pi.errorGettingUserMedia(ne))})}).catch(function(ue){$.cancel(),G(Pi.cameraStreamingNotSupported())})})},f.prototype.pause=function(m){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(qt.PAUSED),this.showPausedState(),(es(m)||m!==!0)&&(m=!1),m&&this.renderedCamera&&this.renderedCamera.pause()},f.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var m=this,x=function(){m.stateManagerProxy.directTransition(qt.SCANNING),m.hidePausedState()};if(!this.renderedCamera.isPaused()){x();return}this.renderedCamera.resume(function(){x()})},f.prototype.getState=function(){return this.stateManagerProxy.getState()},f.prototype.stop=function(){var m=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var x=this.stateManagerProxy.startTransition(qt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var b=function(){if(m.element){var w=document.getElementById(nn.SHADED_REGION_ELEMENT_ID);w&&m.element.removeChild(w)}},C=this;return this.renderedCamera.close().then(function(){return C.renderedCamera=null,C.element&&(C.element.removeChild(C.canvasElement),C.canvasElement=null),b(),C.qrRegion&&(C.qrRegion=null),C.context&&(C.context=null),x.execute(),C.hidePausedState(),C.isScanning=!1,Promise.resolve()})},f.prototype.scanFile=function(m,x){return this.scanFileV2(m,x).then(function(b){return b.decodedText})},f.prototype.scanFileV2=function(m,x){var b=this;if(!m||!(m instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(es(x)&&(x=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(C,w){b.possiblyCloseLastScanImageFile(),b.clearElement(),b.lastScanImageFile=URL.createObjectURL(m);var k=new Image;k.onload=function(){var M=k.width,R=k.height,N=document.getElementById(b.elementId),O=N.clientWidth?N.clientWidth:nn.DEFAULT_WIDTH,_=Math.max(N.clientHeight?N.clientHeight:R,nn.FILE_SCAN_MIN_HEIGHT),$=b.computeCanvasDrawConfig(M,R,O,_);if(x){var Z=b.createCanvasElement(O,_,"qr-canvas-visible");Z.style.display="inline-block",N.appendChild(Z);var G=Z.getContext("2d");if(!G)throw"Unable to get 2d context from canvas";G.canvas.width=O,G.canvas.height=_,G.drawImage(k,0,0,M,R,$.x,$.y,$.width,$.height)}var X=nn.FILE_SCAN_HIDDEN_CANVAS_PADDING,le=Math.max(k.width,$.width),de=Math.max(k.height,$.height),ue=le+2*X,ne=de+2*X,Q=b.createCanvasElement(ue,ne);N.appendChild(Q);var xe=Q.getContext("2d");if(!xe)throw"Unable to get 2d context from canvas";xe.canvas.width=ue,xe.canvas.height=ne,xe.drawImage(k,0,0,M,R,X,X,le,de);try{b.qrcode.decodeRobustlyAsync(Q).then(function(oe){C(Jd.createFromQrcodeResult(oe))}).catch(w)}catch(oe){w("QR code parse error, error = ".concat(oe))}},k.onerror=w,k.onabort=w,k.onstalled=w,k.onsuspend=w,k.src=URL.createObjectURL(m)})},f.prototype.clear=function(){this.clearElement()},f.getCameras=function(){return Qh.retrieve()},f.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},f.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},f.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},f.prototype.applyVideoConstraints=function(m){if(m){if(!D0.isMediaStreamConstraintsValid(m,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(m)},f.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},f.prototype.getSupportedFormats=function(m){var x=[De.QR_CODE,De.AZTEC,De.CODABAR,De.CODE_39,De.CODE_93,De.CODE_128,De.DATA_MATRIX,De.MAXICODE,De.ITF,De.EAN_13,De.EAN_8,De.PDF_417,De.RSS_14,De.RSS_EXPANDED,De.UPC_A,De.UPC_E,De.UPC_EAN_EXTENSION];if(!m||typeof m=="boolean"||!m.formatsToSupport)return x;if(!Array.isArray(m.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(m.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var b=[],C=0,w=m.formatsToSupport;C<w.length;C++){var k=w[C];_h(k)?b.push(k):this.logger.warn("Invalid format: ".concat(k," passed in config, ignoring."))}if(b.length===0)throw"None of formatsToSupport match supported values.";return b},f.prototype.getUseBarCodeDetectorIfSupported=function(m){if(es(m))return!0;if(!es(m.useBarCodeDetectorIfSupported))return m.useBarCodeDetectorIfSupported!==!1;if(es(m.experimentalFeatures))return!0;var x=m.experimentalFeatures;return es(x.useBarCodeDetectorIfSupported)?!0:x.useBarCodeDetectorIfSupported!==!1},f.prototype.validateQrboxSize=function(m,x,b){var C=this,w=b.qrbox;this.validateQrboxConfig(w);var k=this.toQrdimensions(m,x,w),M=function(N){if(N<nn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(nn.MIN_QR_BOX_SIZE,"px.")},R=function(N){return N>m&&(C.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),N=m),N};M(k.width),M(k.height),k.width=R(k.width)},f.prototype.validateQrboxConfig=function(m){if(typeof m!="number"&&typeof m!="function"&&(m.width===void 0||m.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},f.prototype.toQrdimensions=function(m,x,b){if(typeof b=="number")return{width:b,height:b};if(typeof b=="function")try{return b(m,x)}catch(C){throw new Error("qrbox config was passed as a function but it failed with unknown error"+C)}return b},f.prototype.setupUi=function(m,x,b){b.isShadedBoxEnabled()&&this.validateQrboxSize(m,x,b);var C=es(b.qrbox)?{width:m,height:x}:b.qrbox;this.validateQrboxConfig(C);var w=this.toQrdimensions(m,x,C);w.height>x&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var k=b.isShadedBoxEnabled()&&w.height<=x,M={x:0,y:0,width:m,height:x},R=k?this.getShadedRegionBounds(m,x,w):M,N=this.createCanvasElement(R.width,R.height),O={willReadFrequently:!0},_=N.getContext("2d",O);_.canvas.width=R.width,_.canvas.height=R.height,this.element.append(N),k&&this.possiblyInsertShadingElement(this.element,m,x,w),this.createScannerPausedUiElement(this.element),this.qrRegion=R,this.context=_,this.canvasElement=N},f.prototype.createScannerPausedUiElement=function(m){var x=document.createElement("div");x.innerText=Pi.scannerPaused(),x.style.display="none",x.style.position="absolute",x.style.top="0px",x.style.zIndex="1",x.style.background="rgba(9, 9, 9, 0.46)",x.style.color="#FFECEC",x.style.textAlign="center",x.style.width="100%",m.appendChild(x),this.scannerPausedUiElement=x},f.prototype.scanContext=function(m,x){var b=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(C){return m(C.text,Jd.createFromQrcodeResult(C)),b.possiblyUpdateShaders(!0),!0}).catch(function(C){b.possiblyUpdateShaders(!1);var w=Pi.codeParseError(C);return x(w,Oh.createFrom(w)),!1})},f.prototype.foreverScan=function(m,x,b){var C=this;if(this.shouldScan&&this.renderedCamera){var w=this.renderedCamera.getSurface(),k=w.videoWidth/w.clientWidth,M=w.videoHeight/w.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var R=this.qrRegion.width*k,N=this.qrRegion.height*M,O=this.qrRegion.x*k,_=this.qrRegion.y*M;this.context.drawImage(w,O,_,R,N,0,0,this.qrRegion.width,this.qrRegion.height);var $=function(){C.foreverScanTimeout=setTimeout(function(){C.foreverScan(m,x,b)},C.getTimeoutFps(m.fps))};this.scanContext(x,b).then(function(Z){!Z&&m.disableFlip!==!0?(C.context.translate(C.context.canvas.width,0),C.context.scale(-1,1),C.scanContext(x,b).finally(function(){$()})):$()}).catch(function(Z){C.logger.logError("Error happend while scanning context",Z),$()})}},f.prototype.createVideoConstraints=function(m){if(typeof m=="string")return{deviceId:{exact:m}};if(typeof m=="object"){var x="facingMode",b="deviceId",C={user:!0,environment:!0},w="exact",k=function(G){if(G in C)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(G,"'")},M=Object.keys(m);if(M.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(M.length," keys");var R=Object.keys(m)[0];if(R!==x&&R!==b)throw"Only '".concat(x,"' and '").concat(b,"' ")+" are supported for 'cameraIdOrConfig'";if(R===x){var N=m.facingMode;if(typeof N=="string"){if(k(N))return{facingMode:N}}else if(typeof N=="object")if(w in N){if(k(N["".concat(w)]))return{facingMode:{exact:N["".concat(w)]}}}else throw"'facingMode' should be string or object with"+" ".concat(w," as key.");else{var O=typeof N;throw"Invalid type of 'facingMode' = ".concat(O)}}else{var _=m.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(w in _)return{deviceId:{exact:_["".concat(w)]}};throw"'deviceId' should be string or object with"+" ".concat(w," as key.")}else{var $=typeof _;throw"Invalid type of 'deviceId' = ".concat($)}}}var Z=typeof m;throw"Invalid type of 'cameraIdOrConfig' = ".concat(Z)},f.prototype.computeCanvasDrawConfig=function(m,x,b,C){if(m<=b&&x<=C){var w=(b-m)/2,k=(C-x)/2;return{x:w,y:k,width:m,height:x}}else{var M=m,R=x;return m>b&&(x=b/m*x,m=b),x>C&&(m=C/x*m,x=C),this.logger.log("Image downsampled from "+"".concat(M,"X").concat(R)+" to ".concat(m,"X").concat(x,".")),this.computeCanvasDrawConfig(m,x,b,C)}},f.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var m=document.getElementById(this.elementId);m&&(m.innerHTML="")},f.prototype.possiblyUpdateShaders=function(m){this.qrMatch!==m&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(x){x.style.backgroundColor=m?nn.BORDER_SHADER_MATCH_COLOR:nn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=m)},f.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},f.prototype.createCanvasElement=function(m,x,b){var C=m,w=x,k=document.createElement("canvas");return k.style.width="".concat(C,"px"),k.style.height="".concat(w,"px"),k.style.display="none",k.id=es(b)?"qr-canvas":b,k},f.prototype.getShadedRegionBounds=function(m,x,b){if(b.width>m||b.height>x)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(m-b.width)/2,y:(x-b.height)/2,width:b.width,height:b.height}},f.prototype.possiblyInsertShadingElement=function(m,x,b,C){if(!(x-C.width<1||b-C.height<1)){var w=document.createElement("div");w.style.position="absolute";var k=(x-C.width)/2,M=(b-C.height)/2;if(w.style.borderLeft="".concat(k,"px solid rgba(0, 0, 0, 0.48)"),w.style.borderRight="".concat(k,"px solid rgba(0, 0, 0, 0.48)"),w.style.borderTop="".concat(M,"px solid rgba(0, 0, 0, 0.48)"),w.style.borderBottom="".concat(M,"px solid rgba(0, 0, 0, 0.48)"),w.style.boxSizing="border-box",w.style.top="0px",w.style.bottom="0px",w.style.left="0px",w.style.right="0px",w.id="".concat(nn.SHADED_REGION_ELEMENT_ID),x-C.width<11||b-C.height<11)this.hasBorderShaders=!1;else{var R=5,N=40;this.insertShaderBorders(w,N,R,-R,null,0,!0),this.insertShaderBorders(w,N,R,-R,null,0,!1),this.insertShaderBorders(w,N,R,null,-R,0,!0),this.insertShaderBorders(w,N,R,null,-R,0,!1),this.insertShaderBorders(w,R,N+R,-R,null,-R,!0),this.insertShaderBorders(w,R,N+R,null,-R,-R,!0),this.insertShaderBorders(w,R,N+R,-R,null,-R,!1),this.insertShaderBorders(w,R,N+R,null,-R,-R,!1),this.hasBorderShaders=!0}m.append(w)}},f.prototype.insertShaderBorders=function(m,x,b,C,w,k,M){var R=document.createElement("div");R.style.position="absolute",R.style.backgroundColor=nn.BORDER_SHADER_DEFAULT_COLOR,R.style.width="".concat(x,"px"),R.style.height="".concat(b,"px"),C!==null&&(R.style.top="".concat(C,"px")),w!==null&&(R.style.bottom="".concat(w,"px")),M?R.style.left="".concat(k,"px"):R.style.right="".concat(k,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(R),m.appendChild(R)},f.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},f.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},f.prototype.getTimeoutFps=function(m){return 1e3/m},f})(),o0;(function(f){f[f.STATUS_DEFAULT=0]="STATUS_DEFAULT",f[f.STATUS_SUCCESS=1]="STATUS_SUCCESS",f[f.STATUS_WARNING=2]="STATUS_WARNING",f[f.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(o0||(o0={}));function nf({isOpen:f,onScan:m,onClose:x}){const b=we.useRef(null),C=we.useRef(null),[w,k]=we.useState(!1),[M,R]=we.useState(null),[N,O]=we.useState(!1),[_,$]=we.useState(""),[Z,G]=we.useState(null),[X,le]=we.useState([]),de=we.useCallback(async()=>{try{const oe=await l0.getCameras();le(oe);const Y=oe.find(me=>me.label.toLowerCase().includes("back")||me.label.toLowerCase().includes("rear")||me.label.toLowerCase().includes("environment"));return G(Y?.id||oe[0]?.id),oe}catch(oe){return console.error("Error getting cameras:",oe),R("Unable to access camera. Please grant camera permissions."),[]}},[]),ue=we.useCallback(async()=>{if(!(!b.current||C.current))try{R(null),k(!1);const oe=X.length>0?X:await de();if(oe.length===0){R("No cameras found. Please connect a camera or use manual entry."),O(!0);return}const Y=Z||oe[0]?.id,me=new l0("barcode-scanner-region");C.current=me,await me.start(Y,{fps:15,qrbox:{width:300,height:120},aspectRatio:1.777,formatsToSupport:[0,1,2,3,4,5,6,7,8,9,10,11]},ce=>{navigator.vibrate&&navigator.vibrate(100),ne(),m(ce)},ce=>{}),k(!0)}catch(oe){console.error("Scanner start error:",oe),R(oe.message||"Failed to start camera. Please try manual entry."),O(!0)}},[Z,X,de,m]),ne=we.useCallback(async()=>{if(C.current){try{await C.current.stop(),C.current.clear()}catch(oe){console.error("Error stopping scanner:",oe)}C.current=null}k(!1)},[]),Q=we.useCallback(()=>{_.trim()&&(ne(),m(_.trim()),$(""),O(!1))},[_,m,ne]),xe=we.useCallback(async()=>{if(X.length<=1)return;const Y=(X.findIndex(ce=>ce.id===Z)+1)%X.length,me=X[Y].id;await ne(),G(me)},[X,Z,ne]);return we.useEffect(()=>(f?ue():(ne(),O(!1),$(""),R(null)),()=>{ne()}),[f]),we.useEffect(()=>{f&&Z&&!N&&ue()},[Z]),f?i.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-900/90",children:[i.jsx("button",{onClick:x,className:"p-2 rounded-full bg-dark-800/80 hover:bg-dark-700",children:i.jsx(Ba,{className:"w-6 h-6 text-white"})}),i.jsx("span",{className:"text-white font-medium",children:"Scan Barcode"}),i.jsx("div",{className:"flex gap-2",children:X.length>1&&i.jsx("button",{onClick:xe,className:"p-2 rounded-full bg-dark-800/80 hover:bg-dark-700",children:i.jsx(I0,{className:"w-6 h-6 text-white"})})})]}),i.jsxs("div",{className:"flex-1 relative flex items-center justify-center bg-black",children:[i.jsx("div",{id:"barcode-scanner-region",ref:b,className:"w-full h-full",style:{minHeight:"300px"}}),w&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:i.jsxs("div",{className:"relative w-72 h-40 border-2 border-accent-primary/50 rounded-lg",children:[i.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-l-4 border-t-4 border-accent-primary rounded-tl-lg"}),i.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-r-4 border-t-4 border-accent-primary rounded-tr-lg"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-l-4 border-b-4 border-accent-primary rounded-bl-lg"}),i.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-r-4 border-b-4 border-accent-primary rounded-br-lg"})]})})]}),i.jsx("div",{className:"p-6 bg-dark-900",children:N?i.jsxs("div",{className:"text-center",children:[M&&i.jsx("p",{className:"text-amber-400 text-sm mb-3",children:M}),i.jsx("div",{className:"flex gap-2 mb-3",children:i.jsx("input",{type:"text",value:_,onChange:oe=>$(oe.target.value),onKeyDown:oe=>oe.key==="Enter"&&Q(),placeholder:"Enter barcode number",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 text-center text-lg tracking-wider",autoFocus:!0,inputMode:"numeric",pattern:"[0-9]*"})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>{O(!1),$(""),R(null),ue()},className:"flex-1 px-4 py-3 bg-dark-700 text-white rounded-lg font-medium",children:"Back to Camera"}),i.jsx("button",{onClick:Q,disabled:!_.trim(),className:"flex-1 px-4 py-3 bg-accent-primary text-white rounded-lg font-medium disabled:opacity-50",children:"Search"})]})]}):M?i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-red-400 mb-4",children:M}),i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsx("button",{onClick:()=>{R(null),ue()},className:"px-6 py-3 bg-accent-primary text-white rounded-lg font-medium",children:"Try Again"}),i.jsxs("button",{onClick:()=>O(!0),className:"px-6 py-3 bg-dark-700 text-white rounded-lg font-medium flex items-center gap-2",children:[i.jsx(Kd,{className:"w-4 h-4"}),"Enter Manually"]})]})]}):i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-white text-lg mb-2",children:w?"Position barcode within frame":"Starting camera..."}),i.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Works with UPC, EAN, QR codes, and most product barcodes"}),i.jsxs("button",{onClick:()=>O(!0),className:"text-accent-primary text-sm flex items-center gap-1 mx-auto",children:[i.jsx(Kd,{className:"w-4 h-4"}),"Enter barcode manually"]})]})})]}):null}const sf=(f,m,x,b)=>{const C=10*f+6.25*m-5*x;return b==="male"?C+5:C-161};function af(f){const{trainingHistory:m,yearsTraining:x,currentTrainingDays:b}=f;let C=0;m==="consistent"?C+=40:m==="some"?C+=20:C+=5;const w=parseFloat(x)||0;C+=Math.min(w*3.5,35);const k=parseInt(b)||0;return C+=Math.min(k*4,25),C>=86?{level:"elite",score:C,multiplier:1.4}:C>=61?{level:"advanced",score:C,multiplier:1.2}:C>=31?{level:"intermediate",score:C,multiplier:1}:{level:"beginner",score:C,multiplier:.8}}function lf(f){const{raceDate:m,aestheticGoalDate:x,targetDate:b,strengthGoalDate:C,programType:w,programSubtype:k}=f;let M=null;if(m?M=new Date(m):x?M=new Date(x):C?M=new Date(C):b&&(M=new Date(b)),M){const _=Math.ceil((M-new Date)/(1e3*60*60*24*7));return _>52?{totalWeeks:52,weeksUntilGoal:_}:_<4?{totalWeeks:4,weeksUntilGoal:_}:{totalWeeks:_,weeksUntilGoal:_}}return{totalWeeks:{endurance:{marathon:16,triathlon:20,running:12,cycling:12,swimming:12},strength:{powerlifting:12,olympic:16,strongman:12},aesthetic:{hypertrophy:12,"lean-muscle":16,recomp:16},fatloss:{aggressive:8,moderate:12,slow:16}}[w]?.[k]||12,weeksUntilGoal:null}}function of(f,m,x){const b=[],w=m==="endurance"&&["running","marathon","triathlon","cycling"].includes(x)?Math.min(3,Math.floor(f*.1)+1):0,k=f-w,M=5;let R=0;for(;R<k;){const N=Math.floor(R/M);if(R%M===4)b.push("Deload");else{const _=Math.ceil(k/M);N===0?b.push("Base"):N>=_-1&&R>=k-4?b.push("Peak"):b.push("Build")}R++}for(let N=0;N<w;N++)b.push("Taper");return b}const c0={"5k":{factor:1,miles:3.1},"10k":{factor:2.09,miles:6.2},half:{factor:4.65,miles:13.1},full:{factor:9.8,miles:26.2},ultra:{factor:22,miles:50}};function B0(f){if(!f)return 0;const m=f.split(":").map(Number);return m.length===3?m[0]*60+m[1]+m[2]/60:m.length===2?m[0]+m[1]/60:0}function cf(f,m,x){const b=c0[m]?.miles||6.2,C=c0[x]?.miles||26.2,w=B0(f);return w<=0?null:w*Math.pow(C/b,1.06)/C}function uf(f,m,x=null,b=null){const w={"5k":3.1,"10k":6.2,half:13.1,full:26.2,ultra:50}[m]||26.2;let k=null,M=null;x&&b&&(M=cf(x,b,m));const R=B0(f);R>0&&(k=R/w);const N=M||k;return N?{goalPace:rn(k||N),currentPace:M?rn(M):null,easyPace:rn(N+1.5)+" - "+rn(N+2),tempoPace:rn(N+.25)+" - "+rn(N+.5),intervalPace:rn(N-.5)+" - "+rn(N-.25),longRunPace:rn(N+1)+" - "+rn(N+1.5),recoveryPace:rn(N+2)+" - "+rn(N+2.5)}:{goalPace:"8:00/mi",currentPace:null,easyPace:"9:30-10:00/mi",tempoPace:"7:00-7:30/mi",intervalPace:"6:30-7:00/mi",longRunPace:"8:30-9:00/mi",recoveryPace:"10:00-10:30/mi"}}function rn(f){const m=Math.floor(f),x=Math.round((f-m)*60);return`${m}:${x.toString().padStart(2,"0")}/mi`}function df(f,m,x){const{level:b}=x,C={"5k":{min:25,max:40},"10k":{min:30,max:50},half:{min:35,max:55},full:{min:40,max:70},ultra:{min:50,max:80}},w=C[f]||C.full;let k=(w.min+w.max)/2;if(m){const M=parseFloat(m)||9;M<7?k=w.max:M<8?k=w.max*.9:M<9?k=(w.min+w.max)/2:k=w.min*1.1}return b==="elite"?k*=1.1:b==="advanced"?k*=1:b==="intermediate"?k*=.9:k*=.8,Math.round(k)}function hf(f,m,x,b,C=null,w=null,k=null){let R=C;(!R||R<=0)&&(R=Math.round(m*.5)),R=Math.min(R,Math.round(m*.8));const O={"5k":10,"10k":15,half:20,full:25,ultra:30}[w]||15;if(R=Math.max(R,O),b==="Taper"){const Z=x===f?.4:x===f-1?.5:.75;return Math.round(m*Z)}if(b==="Deload"){const Z=Math.min(R*Math.pow(1.1,x-1),m);return Math.round(Z*.65)}const _=x;let $=R*Math.pow(1+.1,_-1);return $=Math.min($,m),Math.round($)}function ff(f,m,x){const b=parseFloat(f)||10,{level:C}=x;return Math.min(b,C==="elite"?22:C==="advanced"?20:18)}const u0={2:{strength:[{name:"Full Body A",focus:["legs","chest","back"]},{name:"Full Body B",focus:["legs","shoulders","back"]}],aesthetic:[{name:"Upper Body",focus:["chest","back","shoulders","arms"]},{name:"Lower Body",focus:["legs","glutes","core"]}]},3:{strength:[{name:"Squat Day",focus:["legs","core"]},{name:"Bench Day",focus:["chest","shoulders","triceps"]},{name:"Deadlift Day",focus:["posterior","back","biceps"]}],aesthetic:[{name:"Push",focus:["chest","shoulders","triceps"]},{name:"Pull",focus:["back","biceps","rear-delts"]},{name:"Legs",focus:["legs","glutes","core"]}]},4:{strength:[{name:"Heavy Squat",focus:["legs","core"]},{name:"Heavy Bench",focus:["chest","shoulders","triceps"]},{name:"Heavy Deadlift",focus:["posterior","back"]},{name:"Volume Upper",focus:["shoulders","chest","arms"]}],aesthetic:[{name:"Upper Push",focus:["chest","shoulders","triceps"]},{name:"Lower",focus:["legs","glutes"]},{name:"Upper Pull",focus:["back","biceps","rear-delts"]},{name:"Arms + Shoulders",focus:["shoulders","biceps","triceps"]}]},5:{strength:[{name:"Competition Squat",focus:["legs"]},{name:"Competition Bench",focus:["chest","triceps"]},{name:"Competition Deadlift",focus:["posterior","back"]},{name:"Volume Squat",focus:["legs","core"]},{name:"Volume Bench",focus:["shoulders","chest","arms"]}],aesthetic:[{name:"Chest + Triceps",focus:["chest","triceps"]},{name:"Back + Biceps",focus:["back","biceps"]},{name:"Shoulders + Rear Delts",focus:["shoulders","rear-delts"]},{name:"Legs",focus:["legs","glutes"]},{name:"Arms + Weak Points",focus:["biceps","triceps","core"]}]},6:{strength:[{name:"Heavy Squat",focus:["legs"]},{name:"Heavy Bench",focus:["chest","triceps"]},{name:"Heavy Deadlift",focus:["posterior","back"]},{name:"Speed Squat",focus:["legs","core"]},{name:"Speed Bench",focus:["chest","shoulders"]},{name:"Back + Arms",focus:["back","biceps","triceps"]}],aesthetic:[{name:"Push A (Heavy)",focus:["chest","shoulders","triceps"]},{name:"Pull A (Heavy)",focus:["back","biceps"]},{name:"Legs A (Quad Focus)",focus:["legs","glutes"]},{name:"Push B (Volume)",focus:["chest","shoulders","triceps"]},{name:"Pull B (Volume)",focus:["back","rear-delts","biceps"]},{name:"Legs B (Posterior)",focus:["legs","core"]}]}},Di={running:{2:["Easy Run","Long Run"],3:["Easy Run","Tempo Run","Long Run"],4:["Easy Run","Tempo Run","Intervals","Long Run"],5:["Easy Run","Tempo Run","Recovery Run","Intervals","Long Run"],6:["Easy Run","Tempo Run","Easy Run","Intervals","Recovery Run","Long Run"]},triathlon:{5:["Swim + Strength","Bike Intervals + Strength","Run + Strength","Swim + Run","Long Brick"],6:["Swim + Strength","Bike Intervals","Run + Strength","Swim + Easy Ride","Run Tempo + Strength","Long Brick"],7:["Swim + Strength","Bike Intervals","Run + Strength","Swim AM / Run PM","Bike + Strength","Run Tempo","Long Brick"]}};function ja(f,m,x,b,C="full"){const w=[],{multiplier:k,level:M}=x,R=m?.6:1,N=[{name:"Single-Leg Romanian Deadlift",sets:Math.round(3*R),reps:"8-10 each leg",rpe:6,rest:"60s",notes:"Focus on hip stability, not weight. Light dumbbells only.",progression:"Master balance before adding weight. This is injury prevention."},{name:"Bulgarian Split Squat",sets:Math.round(3*R),reps:"10-12 each leg",rpe:6,rest:"60s",notes:"Control descent, drive through front heel. Build single-leg strength.",progression:"Add 5lbs every 2-3 weeks when form is solid."},{name:"Lateral Band Walks",sets:3,reps:"15 each direction",rpe:5,rest:"30s",notes:"Keep tension on band throughout. Glute med activation.",progression:"Use heavier band as it becomes easy."},{name:"Clamshells",sets:3,reps:"15-20 each side",rpe:5,rest:"30s",notes:"External hip rotation. Critical for knee health in running.",progression:"Add resistance band when bodyweight is easy."}],O=[{name:"Dead Bug",sets:3,reps:"10 each side",rpe:5,rest:"45s",notes:"Keep lower back pressed to floor. Anti-extension strength.",progression:"Slow the movement, add holds at end range."},{name:"Pallof Press",sets:3,reps:"10 each side",rpe:6,rest:"45s",notes:"Anti-rotation core work. Essential for swim and run.",progression:"Increase cable weight or add iso holds."},{name:"Side Plank",sets:2,reps:"30-45s each side",rpe:6,rest:"30s",notes:"Hip elevated, straight line from head to feet.",progression:"Add hip dips or raise top leg."},{name:"Bird Dog",sets:3,reps:"8 each side with 3s hold",rpe:5,rest:"45s",notes:"Opposite arm/leg extension with neutral spine.",progression:"Add resistance band around foot."}],_=[{name:"Band Pull-Aparts",sets:3,reps:"15-20",rpe:5,rest:"30s",notes:"Squeeze shoulder blades together. Rotator cuff health.",progression:"Essential for swim shoulder health - never skip."},{name:"External Rotation (Cable/Band)",sets:2,reps:"15 each arm",rpe:5,rest:"30s",notes:"Elbow pinned to side, rotate out. Swim-specific prehab.",progression:"Keep light - this is prehab, not strength training."},{name:"Face Pulls",sets:3,reps:"15",rpe:5,rest:"30s",notes:"Pull to face, external rotate at end. Rear delt & rotator cuff.",progression:"Keep light - focus on squeeze at end range."}];switch(C){case"hip":w.push(...N),w.push(O[0]);break;case"core":w.push(...O),w.push(N[2]);break;case"prehab":w.push(..._),w.push(O[0]),w.push(N[2]);break;default:w.push(...N),w.push(...O.slice(0,3)),w.push(..._.slice(0,2)),(M==="advanced"||M==="elite")&&w.push(O[3]);break}return w}function xf(f,m,x,b,C,w,k){const{level:M}=b;switch(m==="Taper"||m==="Peak"||m.includes("Build"),f){case"Swim + Run":return{name:"Swim / Run Double",duration:90,exercises:[{name:"Swim - Technique Focus",sets:1,reps:x?"1500m":"2000-2500m",pace:"CSS pace (threshold)",heartRateZone:"Zone 2-3",rpe:6,rest:"N/A",notes:"Focus on catch and pull technique. Include drill work.",progression:`Week ${w}: Build swim volume gradually.`},{name:"Run - Easy/Moderate",sets:1,reps:x?"30 min":"45-60 min",pace:C?.easyPace||"9:00-9:30/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy effort. Recovery between sessions.",progression:"Separate by 4-6 hours if possible."}]};case"Swim AM / Run PM":return{name:"AM Swim / PM Run",duration:105,exercises:[{name:"Morning Swim",sets:1,reps:M==="elite"?"3000-3500m":"2000-2500m",pace:"Mixed: warm up + main set + cool down",heartRateZone:"Zone 2-4",rpe:7,rest:"N/A",notes:"Main set at CSS pace. Include 4x100 at race pace.",progression:`Week ${w}: Focus on stroke efficiency.`},{name:"Evening Run",sets:1,reps:x?"40 min":"50-60 min",pace:C?.easyPace||"9:00/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy effort, focus on cadence and form.",progression:"Build run fitness off swim fatigue."}]};case"Bike Intervals":case"Bike":return{name:"Bike Intervals",duration:x?60:75,exercises:[{name:"Bike Interval Session",sets:x?3:M==="elite"?6:5,reps:"5 min @ FTP",pace:"FTP (Functional Threshold Power)",heartRateZone:"Zone 4",rpe:8,rest:"2 min easy spin",notes:"Maintain steady power throughout interval. Cadence 85-95.",progression:`Week ${w}: Add 1 interval every 2 weeks.`}]};case"Swim + Strength":return{name:"Swim + Injury Prevention",duration:75,exercises:[{name:"Technique Swim",sets:1,reps:"1500-2000m",pace:"Easy-moderate",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Drill-focused: catch-up drill, fingertip drag, 6-kick switch.",progression:"Quality over quantity on strength days."}],strengthSession:ja(m,x,b)};case"Run Tempo":return{name:"Tempo Run",duration:60,exercises:[{name:"Warm-up",sets:1,reps:"1.5 miles",pace:C?.easyPace||"9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include strides at end of warm-up."},{name:"Tempo",sets:1,reps:x?"15 min":M==="elite"?"30 min":"20-25 min",pace:C?.tempoPace||"7:30/mi",heartRateZone:"Zone 3-4",rpe:7,rest:"N/A",notes:"Comfortably hard. Should be able to speak in short sentences.",progression:`Week ${w}: Extend tempo duration by 2-3 min/week.`},{name:"Cool-down",sets:1,reps:"1 mile",pace:C?.recoveryPace||"10:00/mi",heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog + stretching."}]};case"Long Bike/Run Brick":case"Long Brick":case"Long Ride + Run Brick":const R=M==="elite"?3:M==="advanced"?2.5:2,N=M==="elite"?6:M==="advanced"?5:4;return{name:"Long Brick Session",duration:R*60+45,exercises:[{name:"Long Ride",sets:1,reps:`${x?R-.5:R} hours`,pace:"Aerobic (Zone 2)",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Practice race nutrition: 60-90g carbs/hour. Last 20 min at race pace.",progression:`Week ${w}: Key session. Build bike endurance.`},{name:"Brick Run (off bike)",sets:1,reps:`${x?N-1:N} miles`,pace:"Start easy, settle into race pace",heartRateZone:"Zone 2-3",rpe:6,rest:"N/A",notes:"T2 practice. Quick transition, find your legs.",progression:"Critical for race-day leg turnover."}]};case"Swim + Easy Ride":return{name:"Swim + Easy Ride",duration:90,exercises:[{name:"Swim - Aerobic",sets:1,reps:"2000-2500m",pace:"Easy-moderate",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Continuous swim, focus on bilateral breathing."},{name:"Easy Spin",sets:1,reps:"45-60 min",pace:"Recovery",heartRateZone:"Zone 1-2",rpe:4,rest:"N/A",notes:"Active recovery. High cadence, low power."}]};case"Easy Run":return{name:"Easy Run",duration:45,exercises:[{name:"Easy Run",sets:1,reps:x?"30 min":"45 min",pace:C?.easyPace||"9:00-9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Truly easy. Recovery run.",progression:"Keep easy days easy."}]};case"Bike Intervals + Strength":return{name:"Bike Intervals + Strength",duration:90,exercises:[{name:"Bike Interval Session",sets:x?3:M==="elite"?6:5,reps:"5 min @ FTP",pace:"FTP (Functional Threshold Power)",heartRateZone:"Zone 4",rpe:8,rest:"2 min easy spin",notes:"Quality intervals. Maintain power throughout.",progression:`Week ${w}: Key bike session.`}],strengthSession:ja(m,x,b,w,"core")};case"Run + Strength":return{name:"Run + Strength",duration:85,exercises:[{name:"Easy-Moderate Run",sets:1,reps:x?"35 min":"45-50 min",pace:C?.easyPace||"9:00/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Comfortable effort. Focus on form and cadence.",progression:`Week ${w}: Build aerobic base.`}],strengthSession:ja(m,x,b,w,"hip")};case"Bike + Strength":return{name:"Bike + Strength",duration:80,exercises:[{name:"Easy Aerobic Ride",sets:1,reps:x?"45 min":"60 min",pace:"Aerobic (Zone 2)",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy spinning. Active recovery ride with strength after.",progression:"Keep intensity low to allow for PM strength."}],strengthSession:ja(m,x,b,w,"full")};case"Run Tempo + Strength":return{name:"Run Tempo + Strength",duration:95,exercises:[{name:"Warm-up",sets:1,reps:"1 mile",pace:C?.easyPace||"9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Easy jog with strides."},{name:"Tempo",sets:1,reps:x?"12 min":M==="elite"?"25 min":"18-20 min",pace:C?.tempoPace||"7:30/mi",heartRateZone:"Zone 3-4",rpe:7,rest:"N/A",notes:"Comfortably hard. Shorter than standalone tempo to allow for strength.",progression:`Week ${w}: Quality over quantity.`},{name:"Cool-down",sets:1,reps:"0.5 miles",pace:C?.recoveryPace||"10:00/mi",heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog."}],strengthSession:ja(m,x,b,w,"prehab")};default:return{name:f,duration:60,exercises:[{name:f,sets:1,reps:"60 min",rpe:6,rest:"N/A",notes:"Moderate effort."}]}}}function Dc(f){return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][f]}function mf(f){const m={2:[0,3],3:[0,2,4],4:[0,1,3,4],5:[0,1,2,4,5],6:[0,1,2,3,4,5],7:[0,1,2,3,4,5,6]};return m[f]||m[4]}const Xl={squat:{main:{name:"Back Squat",percentages:{Base:{min:70,max:80,reps:"5-8",sets:4},Build:{min:80,max:87.5,reps:"3-5",sets:5},Peak:{min:87.5,max:95,reps:"1-3",sets:5},Deload:{min:50,max:60,reps:"5-8",sets:3}},rest:"3-4 min",notes:"Break at hips, knees track over toes, drive through heels"},variations:[{name:"Pause Squat",percent:.8,reps:"3-5",sets:3,notes:"2-3 sec pause in hole"},{name:"Front Squat",percent:.75,reps:"4-6",sets:3,notes:"Upright torso, elbows high"},{name:"Box Squat",percent:.85,reps:"3-5",sets:3,notes:"Pause on box, explode up"}],accessories:[{name:"Leg Press",reps:"8-12",sets:3,notes:"Control descent, full ROM",isBodyweight:!1},{name:"Walking Lunges",reps:"10-12 each",sets:3,notes:"Long stride, upright torso",isBodyweight:!0},{name:"Leg Extensions",reps:"12-15",sets:3,notes:"Squeeze at top, slow negative",isBodyweight:!1},{name:"Leg Curls",reps:"10-12",sets:3,notes:"Squeeze hamstrings at top",isBodyweight:!1},{name:"Bulgarian Split Squat",reps:"8-10 each",sets:3,notes:"Vertical shin on front leg",isBodyweight:!0},{name:"Goblet Squat",reps:"10-12",sets:3,notes:"Elbows inside knees at bottom",isBodyweight:!1}]},bench:{main:{name:"Bench Press",percentages:{Base:{min:70,max:80,reps:"5-8",sets:4},Build:{min:80,max:87.5,reps:"3-5",sets:5},Peak:{min:87.5,max:95,reps:"1-3",sets:5},Deload:{min:50,max:60,reps:"5-8",sets:3}},rest:"3-4 min",notes:"Retract scapula, arch back, leg drive, control descent"},variations:[{name:"Close-Grip Bench",percent:.85,reps:"4-6",sets:3,notes:"Elbows tucked, tricep focus"},{name:"Paused Bench Press",percent:.8,reps:"3-5",sets:3,notes:"2 sec pause on chest"},{name:"Incline Bench Press",percent:.75,reps:"6-8",sets:3,notes:"30-45 degree incline"},{name:"Floor Press",percent:.85,reps:"4-6",sets:3,notes:"Pause at floor, lockout strength"}],accessories:[{name:"Dumbbell Bench Press",reps:"8-12",sets:3,notes:"Full ROM, squeeze at top",isBodyweight:!1},{name:"Dumbbell Fly",reps:"10-12",sets:3,notes:"Slight bend in elbows, stretch at bottom",isBodyweight:!1},{name:"Tricep Pushdowns",reps:"12-15",sets:3,notes:"Lock elbows, squeeze triceps",isBodyweight:!1},{name:"Skull Crushers",reps:"10-12",sets:3,notes:"Keep elbows pointed up",isBodyweight:!1},{name:"Dips",reps:"8-12",sets:3,notes:"Lean forward for chest, upright for triceps",isBodyweight:!0},{name:"Overhead Tricep Extension",reps:"10-12",sets:3,notes:"Full stretch at bottom",isBodyweight:!1}]},deadlift:{main:{name:"Deadlift",percentages:{Base:{min:70,max:80,reps:"4-6",sets:3},Build:{min:80,max:87.5,reps:"2-4",sets:4},Peak:{min:87.5,max:95,reps:"1-3",sets:4},Deload:{min:50,max:60,reps:"4-6",sets:2}},rest:"4-5 min",notes:"Brace core, chest up, hinge at hips, bar close to body"},variations:[{name:"Deficit Deadlift",percent:.8,reps:"3-5",sets:3,notes:"2-3 inch deficit, speed off floor"},{name:"Romanian Deadlift",percent:.65,reps:"8-10",sets:3,notes:"Hamstring stretch, slight knee bend"},{name:"Paused Deadlift",percent:.75,reps:"2-4",sets:3,notes:"2 sec pause at knee height"},{name:"Block Pull",percent:.9,reps:"2-4",sets:3,notes:"Lockout strength, above knee"}],accessories:[{name:"Barbell Row",reps:"6-10",sets:4,notes:"Pull to lower chest, squeeze lats",isBodyweight:!1},{name:"Good Mornings",reps:"8-10",sets:3,notes:"Hip hinge, hamstring stretch",isBodyweight:!1},{name:"Back Extensions",reps:"12-15",sets:3,notes:"Squeeze glutes at top",isBodyweight:!0},{name:"Pull-ups",reps:"6-10",sets:4,notes:"Full ROM, dead hang to chin over bar",isBodyweight:!0},{name:"Face Pulls",reps:"15-20",sets:3,notes:"External rotation, rear delt focus",isBodyweight:!1},{name:"Lat Pulldown",reps:"10-12",sets:3,notes:"Drive elbows down, squeeze lats",isBodyweight:!1}]},ohp:{main:{name:"Overhead Press",percentages:{Base:{min:70,max:80,reps:"5-8",sets:4},Build:{min:80,max:87.5,reps:"3-5",sets:4},Peak:{min:85,max:92.5,reps:"2-4",sets:4},Deload:{min:50,max:60,reps:"6-8",sets:3}},rest:"2-3 min",notes:"Squeeze glutes, brace core, press straight up, head through at top"},variations:[{name:"Push Press",percent:1.1,reps:"3-5",sets:3,notes:"Small dip, explosive drive"},{name:"Z Press",percent:.7,reps:"6-8",sets:3,notes:"Seated on floor, no leg drive"},{name:"Seated Dumbbell Press",percent:.8,reps:"8-10",sets:3,notes:"Neutral grip option"}],accessories:[{name:"Lateral Raises",reps:"12-15",sets:3,notes:"Lead with elbows, control descent",isBodyweight:!1},{name:"Rear Delt Fly",reps:"12-15",sets:3,notes:"Squeeze shoulder blades together",isBodyweight:!1},{name:"Upright Rows",reps:"10-12",sets:3,notes:"Elbows above wrists at top",isBodyweight:!1},{name:"Front Raises",reps:"10-12",sets:3,notes:"Thumbs up, raise to eye level",isBodyweight:!1},{name:"Arnold Press",reps:"8-12",sets:3,notes:"Rotate palms during press",isBodyweight:!1}]}};function kn(f,m,x){if(x==="Deload")return f;const[b,C]=f.split("-").map(Number),w=Math.min(m-1,2);return`${b+w}-${C+w}`}function Yl(f,m,x,b){if(!f)return null;const C=b.percentages[m]||b.percentages.Base,{min:w,max:k}=C;let M;return M=w,Math.round(f*M/100/5)*5}function L0(f,m,x,b,C,w=[]){const k=[],M=b?.level||"intermediate",R=b?.multiplier||1,N=(C-1)%4+1,O=x?"Deload":m,_=x?.6:(m==="Build"?1.1:1)*R,$=Z=>{const G=w.find(X=>X.id===Z);return G?{current1RM:parseFloat(G.current1RM)||parseFloat(G.workingWeight)||null,target1RM:parseFloat(G.target1RM)||null}:null};if(f.includes("legs")||f.includes("Squat")){const Z=$("squat"),G=Xl.squat,X=G.main.percentages[O],le=Yl(Z?.current1RM,O,N,G.main),de=le&&Z?.current1RM?Math.round(le/Z.current1RM*100):null;if(k.push({name:G.main.name,sets:Math.round(X.sets*_),reps:kn(X.reps,N,O),rpe:x?6:M==="elite"?8.5:8,rest:G.main.rest,notes:G.main.notes,startingWeight:le?`${le} lbs (${de}% of 1RM)`:"Start light, find working weight",current1RM:Z?.current1RM?`${Z.current1RM} lbs`:null,target1RM:Z?.target1RM?`${Z.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${X.reps.split("-")[1]} reps on all sets  add 5 lbs next session`}),!x){const Q=G.variations[m==="Peak"?2:0],xe=le?Math.round(le*Q.percent/5)*5:null;k.push({name:Q.name,sets:Math.round(Q.sets*_),reps:Q.reps,rpe:7,rest:"3 min",notes:Q.notes,startingWeight:xe?`${xe} lbs (~${Math.round(Q.percent*100)}% of working weight)`:null,isVariation:!0,progression:"Follow main lift progression"})}const ue=x?1:M==="beginner"?2:M==="intermediate"?3:4;G.accessories.slice(0,ue).forEach(Q=>{k.push({name:Q.name,sets:Math.round(Q.sets*_),reps:kn(Q.reps,N,O),rpe:7,rest:"90s",notes:Q.notes,isAccessory:!0,progression:`Double progression: ${Q.reps.split("-")[0]}${Q.reps.split("-")[1]} reps, then add weight`})})}if(f.includes("chest")||f.includes("Bench")){const Z=$("bench"),G=Xl.bench,X=G.main.percentages[O],le=Yl(Z?.current1RM,O,N,G.main),de=le&&Z?.current1RM?Math.round(le/Z.current1RM*100):null;if(k.push({name:G.main.name,sets:Math.round(X.sets*_),reps:kn(X.reps,N,O),rpe:x?6:M==="elite"?8.5:8,rest:G.main.rest,notes:G.main.notes,startingWeight:le?`${le} lbs (${de}% of 1RM)`:"Start light, find working weight",current1RM:Z?.current1RM?`${Z.current1RM} lbs`:null,target1RM:Z?.target1RM?`${Z.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${X.reps.split("-")[1]} reps on all sets  add 2.5 lbs next session`}),!x){const Q=m==="Peak"?G.variations[3]:G.variations[0],xe=le?Math.round(le*Q.percent/5)*5:null;k.push({name:Q.name,sets:Math.round(Q.sets*_),reps:Q.reps,rpe:7,rest:"2-3 min",notes:Q.notes,startingWeight:xe?`${xe} lbs`:null,isVariation:!0,progression:"Follow main lift progression"})}const ue=x?1:M==="beginner"?2:M==="intermediate"?3:4;G.accessories.slice(0,ue).forEach(Q=>{k.push({name:Q.name,sets:Math.round(Q.sets*_),reps:kn(Q.reps,N,O),rpe:7,rest:"90s",notes:Q.notes,isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(f.includes("posterior")||f.includes("Deadlift")){const Z=$("deadlift"),G=Xl.deadlift,X=G.main.percentages[O],le=Yl(Z?.current1RM,O,N,G.main),de=le&&Z?.current1RM?Math.round(le/Z.current1RM*100):null;if(k.push({name:G.main.name,sets:Math.round(X.sets*_),reps:kn(X.reps,N,O),rpe:x?6:M==="elite"?8.5:8,rest:G.main.rest,notes:G.main.notes,startingWeight:le?`${le} lbs (${de}% of 1RM)`:"Start light, find working weight",current1RM:Z?.current1RM?`${Z.current1RM} lbs`:null,target1RM:Z?.target1RM?`${Z.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${X.reps.split("-")[1]} reps on all sets  add 5-10 lbs next session`}),!x){const Q=m==="Peak"?G.variations[3]:G.variations[0],xe=le?Math.round(le*Q.percent/5)*5:null;k.push({name:Q.name,sets:Math.round(Q.sets*_),reps:Q.reps,rpe:7,rest:"3-4 min",notes:Q.notes,startingWeight:xe?`${xe} lbs`:null,isVariation:!0,progression:"Follow main lift progression"})}const ue=x?1:M==="beginner"?2:M==="intermediate"?3:4;G.accessories.slice(0,ue).forEach(Q=>{k.push({name:Q.name,sets:Math.round(Q.sets*_),reps:kn(Q.reps,N,O),rpe:7,rest:"90s-2 min",notes:Q.notes,isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(f.includes("shoulders")||f.includes("OHP")){const Z=$("ohp"),G=Xl.ohp,X=G.main.percentages[O],le=Yl(Z?.current1RM,O,N,G.main),de=le&&Z?.current1RM?Math.round(le/Z.current1RM*100):null;if(k.push({name:G.main.name,sets:Math.round(X.sets*_),reps:kn(X.reps,N,O),rpe:x?6:M==="elite"?8.5:8,rest:G.main.rest,notes:G.main.notes,startingWeight:le?`${le} lbs (${de}% of 1RM)`:"Start light, find working weight",current1RM:Z?.current1RM?`${Z.current1RM} lbs`:null,target1RM:Z?.target1RM?`${Z.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${X.reps.split("-")[1]} reps  add 2.5 lbs`}),!x){const ne=G.variations[0];k.push({name:ne.name,sets:Math.round(ne.sets*_),reps:ne.reps,rpe:7,rest:"2 min",notes:ne.notes,isVariation:!0})}const ue=x?1:M==="beginner"?2:3;G.accessories.slice(0,ue).forEach(ne=>{k.push({name:ne.name,sets:Math.round(ne.sets*_),reps:kn(ne.reps,N,O),rpe:7,rest:"60-90s",notes:ne.notes,isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(f.includes("back")&&!f.includes("posterior")&&!f.includes("Deadlift")){const Z=[{name:"Barbell Row",sets:4,reps:"6-10",rpe:8,rest:"2-3 min",notes:"Pull to lower chest, squeeze lats"},{name:"Weighted Pull-ups",sets:4,reps:"6-10",rpe:8,rest:"2-3 min",notes:"Dead hang to chin over bar"},{name:"Lat Pulldown",sets:3,reps:"10-12",rpe:7,rest:"90s",notes:"Drive elbows down"},{name:"Seated Cable Row",sets:3,reps:"10-12",rpe:7,rest:"90s",notes:"Squeeze at contraction"}],G=x?2:M==="beginner"?3:4;Z.slice(0,G).forEach(X=>{k.push({...X,sets:Math.round(X.sets*_),reps:kn(X.reps,N,O),isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(f.includes("triceps")||f.includes("arms")){const Z=[{name:"Close-Grip Bench Press",sets:3,reps:"6-8",rpe:7,rest:"2 min",notes:"Elbows tucked"},{name:"Tricep Pushdowns",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Lock elbows in place"},{name:"Skull Crushers",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Lower to forehead"}],G=x?1:M==="beginner"?2:3;Z.slice(0,G).forEach(X=>{k.push({...X,sets:Math.round(X.sets*_),reps:kn(X.reps,N,O),isAccessory:!0,progression:"Double progression: 1012 reps, then +5 lbs"})})}if(f.includes("biceps")||f.includes("arms")){const Z=[{name:"Barbell Curls",sets:3,reps:"8-12",rpe:7,rest:"60s",notes:"No swinging"},{name:"Incline Dumbbell Curls",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Full stretch at bottom"},{name:"Hammer Curls",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Neutral grip"}],G=x?1:M==="beginner"?2:3;Z.slice(0,G).forEach(X=>{k.push({...X,sets:Math.round(X.sets*_),reps:kn(X.reps,N,O),isAccessory:!0,progression:"Double progression: 812 reps, then +5 lbs"})})}if(f.includes("core")){const Z=[{name:"Hanging Leg Raises",sets:3,reps:"10-15",rpe:7,rest:"60s",notes:"Control the movement"},{name:"Ab Wheel Rollouts",sets:3,reps:"8-12",rpe:7,rest:"60s",notes:"Full extension"},{name:"Plank",sets:3,reps:"45-60 sec",rpe:6,rest:"45s",notes:"Squeeze glutes, brace core"}],G=x?1:2;Z.slice(0,G).forEach(X=>{k.push({...X,sets:Math.round(X.sets*_),isAccessory:!0,progression:"Add reps or hold time, then add weight"})})}return k}function Hc(f,m,x,b,C){const w=[],k=b?.level||"intermediate",M=b?.multiplier||1,N=(x?.5:m==="Build"?1.15:1)*M,O=x?5:k==="elite"?9:k==="advanced"?8.5:8,_=(C-1)%4+1,$=_-1;return f.includes("chest")&&(w.push({name:"Bench Press",sets:Math.round(4*N),reps:`${8+$}-${10+$}`,rpe:O,rest:"2-3 min",notes:"Focus on chest contraction",progression:`Week ${_}/4: Base reps. Add 5lbs at week 4 if all reps hit`}),w.push({name:"Incline Dumbbell Press",sets:Math.round(4*N),reps:`${8+$}-${12+$}`,rpe:O-1,rest:"90s",notes:"30-45 degree incline, control the negative",progression:"Progressive overload: reps  weight  reps"}),w.push({name:"Cable Chest Fly",sets:Math.round(3*N),reps:"12-15",rpe:7,rest:"60s",notes:"Squeeze hard at contraction",progression:"Isolation: focus on mind-muscle connection over weight"}),(k==="advanced"||k==="elite")&&w.push({name:"Weighted Dips",sets:Math.round(3*N),reps:"8-12",rpe:8,rest:"2 min",notes:"Lean forward for chest emphasis",progression:"Add 5lbs when hitting 12 reps"})),f.includes("back")&&(w.push({name:"Weighted Pull-ups",sets:Math.round(4*N),reps:`${6+Math.floor($/2)}-${10+Math.floor($/2)}`,rpe:O,rest:"2-3 min",notes:"Full stretch at bottom, chin over bar",progression:"Add 2.5lbs when hitting top of rep range consistently"}),w.push({name:"Barbell Row",sets:Math.round(4*N),reps:`${6+$}-${10+$}`,rpe:O-1,rest:"2 min",notes:"Squeeze lats at top",progression:"Add 5lbs when form stays solid at top reps"}),w.push({name:"Lat Pulldown",sets:Math.round(3*N),reps:"10-12",rpe:7,rest:"90s",notes:"Drive elbows down, chest up",progression:"Focus on stretch and contraction over weight"}),w.push({name:"Seated Cable Row",sets:Math.round(3*N),reps:"10-12",rpe:7,rest:"90s",notes:"Pull to lower chest, squeeze",progression:"Add weight when form is solid"})),f.includes("shoulders")&&(w.push({name:"Overhead Press",sets:Math.round(4*N),reps:k==="elite"?"5-8":"8-10",rpe:O,rest:"2-3 min",notes:"Strict form, no leg drive",progression:"Add 2.5lbs when all reps completed"}),w.push({name:"Lateral Raises",sets:Math.round(4*N),reps:"12-15",rpe:7,rest:"60s",notes:"Lead with elbows, control the negative",progression:"Add 1 rep per week, then increase weight"}),(k==="advanced"||k==="elite")&&w.push({name:"Cable Lateral Raises",sets:3,reps:"15-20",rpe:8,rest:"45s",notes:"Constant tension, squeeze at top",progression:"Drop sets on final set for extra stimulus"})),(f.includes("legs")||f.includes("glutes"))&&(w.push({name:"Back Squat",sets:Math.round(4*N),reps:k==="elite"?"5-8":"8-10",rpe:O,rest:"3 min",notes:"ATG depth if mobility allows",progression:"Add 5lbs when all reps completed at target RPE"}),w.push({name:"Romanian Deadlift",sets:Math.round(4*N),reps:"8-12",rpe:O-1,rest:"2 min",notes:"Feel the hamstring stretch",progression:"Add 5lbs when form is solid at 12 reps"}),w.push({name:"Leg Press",sets:Math.round(3*N),reps:"10-15",rpe:8,rest:"2 min",notes:"Full range of motion",progression:"Volume work: push the reps before weight"}),w.push({name:"Leg Curls",sets:Math.round(3*N),reps:"12-15",rpe:7,rest:"60s",notes:"Squeeze at top, slow negative",progression:"Focus on contraction quality"}),w.push({name:"Standing Calf Raises",sets:Math.round(4*N),reps:"12-15",rpe:8,rest:"60s",notes:"Full stretch at bottom, pause at top",progression:"Calves respond to frequency - hit 3x/week if lagging"})),f.includes("biceps")&&(w.push({name:"Barbell Curls",sets:Math.round(3*N),reps:"8-12",rpe:8,rest:"90s",notes:"No swinging, squeeze at top",progression:"Add reps first, then weight"}),w.push({name:"Hammer Curls",sets:Math.round(3*N),reps:"10-12",rpe:7,rest:"60s",notes:"Control throughout",progression:"Brachialis focus - great for arm thickness"})),f.includes("triceps")&&(w.push({name:"Tricep Pushdowns",sets:Math.round(3*N),reps:"10-12",rpe:8,rest:"90s",notes:"Lock out at bottom",progression:"Add weight when 12 reps is easy"}),w.push({name:"Overhead Tricep Extension",sets:Math.round(3*N),reps:"12-15",rpe:7,rest:"60s",notes:"Feel the stretch at bottom",progression:"Long head focus - crucial for tricep size"})),f.includes("rear-delts")&&w.push({name:"Face Pulls",sets:Math.round(4*N),reps:"15-20",rpe:7,rest:"60s",notes:"External rotation at top",progression:"Health exercise: keep light, focus on form"}),f.includes("core")&&w.push({name:"Hanging Leg Raises",sets:3,reps:"12-15",rpe:8,rest:"60s",notes:"Control the movement",progression:"Add weight (hold DB) when hitting 15 reps"}),w}function F0(f,m,x,b,C,w,k,M,R=null,N=null){const{multiplier:O,level:_}=C,Z=(w?.goalPace||"").match(/(\d+):(\d+)/),G=Z?parseFloat(Z[1])+parseFloat(Z[2])/60:null,X=df(N,G,C),le=b?Math.round(b*1.15):X,de=Math.max(X,le),ue=hf(M,de,k,m,b,N,C),ne=ff(R,k,C),Q=m==="Taper"?.6:m==="Peak"?1.1:m.includes("Build")?1:.85;switch(f){case"Easy Run":{const xe=Math.round(ue*.2*Q*10)/10;return{name:"Easy Run",duration:Math.round(xe*10),exercises:[{name:"Easy Run",sets:1,reps:`${xe} miles`,pace:w.easyPace,heartRateZone:"Zone 2 (65-75% max HR)",rpe:4,rest:"N/A",notes:"Should be able to hold a conversation. If breathing hard, slow down.",progression:`Week ${k}: ${xe} mi. Max 5% increase per week.`}]}}case"Tempo Run":{const oe=Math.round(ue*.15*Q*10)/10,Y=1;return{name:"Tempo Run",duration:Math.round((1.5+oe+Y)*9),exercises:[{name:"Warm-up",sets:1,reps:`${1.5} miles`,pace:w.easyPace,heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include 4x100m strides at end"},{name:"Tempo",sets:1,reps:`${oe} miles`,pace:w.tempoPace,heartRateZone:"Zone 3-4 (80-88% max HR)",rpe:7,rest:"N/A",notes:"Comfortably hard - can speak in short sentences only",progression:`Week ${k}: ${oe} mi tempo. Lactate threshold training.`},{name:"Cool-down",sets:1,reps:`${Y} miles`,pace:w.recoveryPace,heartRateZone:"Zone 1-2",rpe:3,rest:"N/A",notes:"Very easy, let HR come down"}]}}case"Intervals":{const xe=_==="elite"?8:_==="advanced"?6:5,oe=_==="elite"?"800m":"400m",Y=x?Math.floor(xe/2):m==="Peak"?xe+2:xe;return{name:"Interval Training",duration:55,exercises:[{name:"Warm-up",sets:1,reps:"1.5 miles",pace:w.easyPace,heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include dynamic stretches and 4x100m strides"},{name:`${oe} Repeats`,sets:Y,reps:oe,pace:w.intervalPace,heartRateZone:"Zone 4-5 (88-95% max HR)",rpe:9,rest:_==="elite"?"2:00 jog":"1:30 jog",notes:`Consistent pace each rep. Target ${w.intervalPace}`,progression:`Week ${k}: ${Y}x${oe}. Add 1 rep every 2-3 weeks.`},{name:"Cool-down",sets:1,reps:"1 mile",pace:w.recoveryPace,heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog + static stretching"}]}}case"Long Run":{const xe=Math.round(ue*.3*Q*10)/10,oe=_==="elite"?22:_==="advanced"?20:18,Y=Math.min(xe,ne,oe);return{name:"Long Run",duration:Math.round(Y*9.5),exercises:[{name:"Long Run",sets:1,reps:`${Y} miles`,pace:w.longRunPace,heartRateZone:"Zone 2 (start)  Zone 3 (finish)",rpe:6,rest:"N/A",notes:m==="Peak"?`Practice race nutrition. Last 3mi at ${w.goalPace} (goal pace)`:"Practice race nutrition. Keep even effort throughout.",progression:`Week ${k}: ${Y} mi. Current cap: ${ne}mi (increases ~1mi/2wks). Peak: ${oe}mi.`}]}}case"Recovery Run":return{name:"Recovery Run",duration:30,exercises:[{name:"Recovery Run",sets:1,reps:"3-4 miles",pace:w.recoveryPace,heartRateZone:"Zone 1 (60-65% max HR)",rpe:3,rest:"N/A",notes:"Truly easy. This should feel almost too slow. Promotes recovery.",progression:"Keep consistent - dont increase recovery run distance"}]};default:return{name:f,duration:45,exercises:[{name:f,sets:1,reps:"45 min",rpe:6,rest:"N/A",notes:"Moderate steady effort"}]}}}function gf(f,m,x,b,C){const w=[],{multiplier:k,level:M}=b;w.push({name:M==="elite"?"EMOM Circuit":"HIIT Circuit",sets:x?2:Math.round(4*k),reps:M==="elite"?"45s work / 15s rest":"30s work / 30s rest",rpe:9,rest:"2 min between rounds",notes:M==="elite"?"Burpees, box jumps, KB swings, battle ropes":"Max effort during work intervals",progression:`Week ${C}: Add 1 round every 2 weeks`});const R=Hc(f,m,x,b,C);return w.push(...R.slice(0,4)),x||w.push({name:M==="elite"?"Assault Bike":"Incline Walk",sets:1,reps:M==="elite"?"10 min intervals":"15-20 min",rpe:M==="elite"?8:5,rest:"N/A",notes:M==="elite"?"30s sprint / 30s recovery":"10-12% incline, 3.0-3.5 mph",progression:"Add 5 min per week or increase intensity"}),w}function d0(f){return["Tempo Run","Intervals","Long Run","Interval Training"].includes(f)}function pf(f,m,x,b,C,w,k,M,R,N,O,_,$,Z,G){const X=[],le=C[f]||C[4],de=le.map((te,K)=>({runType:te,isHard:d0(te),isLongRun:te==="Long Run",dayIndex:K})),ue=de.findIndex(te=>te.isLongRun),ne=3,Q=[],xe=[];de.forEach((te,K)=>{const ge=ue!==-1&&K===ue-1;b&&!te.isHard&&!ge&&!te.isLongRun&&Q.push(K)});const oe={2:[0,3],3:[0,2,4],4:[0,1,3,4],5:[0,1,2,4,5],6:[0,1,2,3,4,5],7:[0,1,2,3,4,5,6]},Y=oe[f]||oe[4],me=[];for(let te=0;te<7;te++){const K=ue!==-1&&Y.indexOf(te)===ue-1;!(Y.indexOf(te)!==-1&&Y.indexOf(te)<le.length)&&!K&&me.push(te)}const ce=Q.length,ke=Math.max(0,ne-ce);for(let te=0;te<ke&&te<me.length;te++)xe.push(me[te]);Q.length+xe.length<ne&&b&&de.forEach((te,K)=>{Q.length+xe.length>=ne||!Q.includes(K)&&!te.isLongRun&&Q.push(K)});for(let te=0;te<7;te++){const K=Y.indexOf(te),ge=K!==-1,B=Dc(te);if(!ge){X.push({day:te+1,dayName:B,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const ye=[],fe=K<le.length?le[K]:null;if(fe){const he=F0(fe,M,R,_,k,w,N,O,$,G);ye.push({time:"AM",type:"endurance",focus:fe,duration:he.duration,exercises:he.exercises});const H=d0(fe),U=ue!==-1&&K===ue-1;if(b&&!H&&!U&&x==="strength"){const P=K%2===0?["chest","shoulders","triceps"]:["back","biceps","core"],W=Hc(P,M,!0,k,N).slice(0,4);ye.push({time:"PM",type:"strength",focus:"Supplemental Strength",duration:35,exercises:W,notes:"Keep intensity moderate - recovery is priority"})}}else if(xe.includes(te)){const H=L0(["legs","core","posterior"],M,R,k,N,Z);ye.push({time:"ANY",type:"strength",focus:"Full Body Strength",duration:k.level==="elite"?75:60,exercises:H,notes:"Primary strength day - can push intensity"})}X.push({day:te+1,dayName:B,name:ye.map(he=>he.focus).join(" / ")||"Active Recovery",isRestDay:ye.length===0,isDeload:R,sessions:ye})}return X}function yf(f){f||(console.error("generateProgram called with no formData"),f={});let{programType:m="strength",programSubtype:x="powerlifting",desiredTrainingDays:b=4,enableHybrid:C=!1,secondaryProgramType:w="",allowDoubleDays:k=!1,currentWeeklyMileage:M=0,longestRecentRun:R=0,vacations:N=[],targetFinishHours:O="",targetFinishMinutes:_="",targetFinishSeconds:$="",raceDistance:Z="",baselineRaceDistance:G="",baselineTimeHours:X="",baselineTimeMinutes:le="",baselineTimeSeconds:de="",strengthGoals:ue=[],programStartDate:ne=""}=f;b=parseInt(b)||4,b<2&&(b=2),b>7&&(b=7);const Q=x==="triathlon";Q&&(C=!0,w="strength",k=!0,b<5&&(b=5));const xe=af(f),{totalWeeks:oe,weeksUntilGoal:Y}=lf(f),me=of(oe,m,x),ce=mf(b),ke=[O,_,$].filter(Boolean).join(":"),Ge=[X,le,de].filter(Boolean).join(":"),te=uf(ke,Z,Ge,G),K=parseFloat(M)||null,ge=parseFloat(R)||null;let B="aesthetic";m==="strength"&&(B="strength");const ye=u0[Math.min(b,6)]?.[B]||u0[4][B],fe=me[0]||"Base",he=1,H=fe==="Deload"||fe==="Taper";let U=[];if(Q){const W=Di.triathlon[b]||Di.triathlon[5],Ee={4:[0,2,4,5],5:[0,1,3,4,5],6:[0,1,2,4,5,6],7:[0,1,2,3,4,5,6]},Re=Ee[b]||Ee[5];for(let Fe=0;Fe<7;Fe++){const Ne=Re.indexOf(Fe),Qe=Ne!==-1,Ue=Dc(Fe);if(!Qe){U.push({day:Fe+1,dayName:Ue,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const He=W[Ne]||"Easy Run",it=xf(He,fe,H,xe,te,he),gt=[];if(He.includes("Strength")){const We=it.strengthSession||[],Pe=He.toLowerCase().includes("swim"),pt=He.toLowerCase().includes("bike");He.toLowerCase().includes("run")||He.toLowerCase().includes("tempo");const At=it.exercises.filter(It=>!It.name.toLowerCase().includes("strength")&&!It.name.toLowerCase().includes("prevention"));if(At.length>0){const It=Pe?"swim":pt?"bike":"run",et=Pe?"Technique Swim":He.includes("Intervals")?"Bike Intervals":He.includes("Tempo")?"Tempo Run":pt?"Easy Bike":"Easy-Moderate Run";gt.push({time:"AM",type:It,focus:et,duration:Math.round(it.duration*.55),exercises:At})}if(We.length>0){const It=He.includes("Swim")?"Full Injury Prevention":He.includes("Run + Strength")?"Hip & Glute Stability":He.includes("Bike + Strength")?"Core & Stability":He.includes("Tempo")?"Prehab & Mobility":"Core & Stability";gt.push({time:"PM",type:"strength",focus:It,duration:35,exercises:We,notes:"Triathlon injury prevention: NOT hypertrophy. Focus on stability & resilience."})}}else He.includes("/")||He.includes("+")?it.exercises.length>=2?(gt.push({time:"AM",type:it.exercises[0].name.toLowerCase().includes("swim")?"swim":it.exercises[0].name.toLowerCase().includes("bike")?"bike":"run",focus:it.exercises[0].name,duration:Math.round(it.duration*.5),exercises:[it.exercises[0]]}),gt.push({time:"PM",type:it.exercises[1].name.toLowerCase().includes("swim")?"swim":it.exercises[1].name.toLowerCase().includes("bike")?"bike":"run",focus:it.exercises[1].name,duration:Math.round(it.duration*.5),exercises:[it.exercises[1]]})):gt.push({time:"ANY",type:"triathlon",focus:He,duration:it.duration,exercises:it.exercises}):He.includes("Brick")?gt.push({time:"AM",type:"brick",focus:"Long Brick",duration:it.duration,exercises:it.exercises,notes:"Key session: practice race transitions"}):gt.push({time:"ANY",type:He.toLowerCase().includes("swim")?"swim":He.toLowerCase().includes("bike")?"bike":"run",focus:He,duration:it.duration,exercises:it.exercises});U.push({day:Fe+1,dayName:Ue,name:gt.map(We=>We.focus).join(" / "),isRestDay:!1,isDeload:H,sessions:gt})}}else if(C&&m==="endurance"&&(w==="strength"||w==="aesthetic")){const W=x==="triathlon"?Di.triathlon:Di.running;U=pf(b,m,w,k,W,te,xe,fe,H,he,oe,K,ge,ue,Z)}else for(let W=0;W<7;W++){const Ee=ce.includes(W),Re=Dc(W);if(!Ee){U.push({day:W+1,dayName:Re,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const Fe=ce.indexOf(W),Ne=ye.length>0?Fe%ye.length:0,Qe=ye[Ne]||{name:"Full Body",focus:["legs","chest","back"]},Ue=[];if(m==="endurance"){const it=(x==="triathlon"?Di.triathlon:Di.running)[b]?.[Fe]||"Easy Run",gt=F0(it,fe,H,K,xe,te,he,oe,ge,Z);Ue.push({time:"AM",type:"endurance",focus:it,duration:gt.duration,exercises:gt.exercises})}else if(m==="strength"){const He=L0(Qe.focus,fe,H,xe,he,ue);Ue.push({time:"ANY",type:"strength",focus:Qe.name,duration:xe?.level==="elite"?90:75,exercises:He})}else if(m==="aesthetic"){const He=Hc(Qe.focus,fe,H,xe,he);Ue.push({time:"ANY",type:"hypertrophy",focus:Qe.name,duration:xe?.level==="elite"?75:60,exercises:He})}else if(m==="fatloss"){const He=gf(Qe.focus,fe,H,xe,he);Ue.push({time:"ANY",type:"metabolic",focus:Qe.name,duration:50,exercises:He})}C&&w==="endurance"&&k&&Ue.push({time:"PM",type:"endurance",focus:"Easy Run",duration:30,exercises:[{name:"Easy Run",sets:1,reps:"30 min",pace:te?.recoveryPace||"10:00-10:30/mi",heartRateZone:"Zone 1-2",rpe:4,rest:"N/A",notes:"Recovery pace only - prioritize strength recovery"}]}),U.push({day:W+1,dayName:Re,name:Ue.map(He=>He.focus).join(" / "),isRestDay:!1,isDeload:H,sessions:Ue})}return{name:wf(m,x,xe.level),description:`${xe.level.charAt(0).toUpperCase()+xe.level.slice(1)}-level ${m} program with ${oe}-week periodization. Max 5% weekly volume increase.`,mesocycleWeeks:oe,totalWeeks:oe,currentWeek:1,currentPhase:me[0],phases:me,athleteLevel:xe.level,athleteScore:xe.score,primaryGoal:m,primarySubtype:x,secondaryGoal:w||null,secondarySubtype:f.secondarySubtype||null,isHybrid:C||!1,allowDoubleDays:k||!1,daysPerWeek:b,vacations:N,weeksUntilGoal:Y,baseline:{endurance:m==="endurance"?{currentMileage:K,longestRecentRun:ge,referenceRace:G?{distance:G,time:Ge}:null}:null,strength:m==="strength"?{lifts:ue.filter(W=>W.current1RM).map(W=>({exercise:W.label,current1RM:parseFloat(W.current1RM),target1RM:parseFloat(W.target1RM)}))}:null},paces:m==="endurance"?te:null,generatedAt:new Date().toISOString(),startDate:ne||new Date().toISOString().split("T")[0],weeklySchedule:U,progressionRules:{strengthIncrease:xe.level==="elite"?"Micro-load 1-2.5lbs when RPE allows. Prioritize technical consistency.":"Add 2.5-5lbs per week when all reps completed at target RPE.",volumeIncrease:"Add 1 set per exercise every 2-3 weeks during Build phase.",mileageIncrease:"Max 5% weekly mileage increase. Never more.",deloadProtocol:`Every ${xe.level==="elite"?"3rd":"4th"} week: 50% volume, maintain intensity at RPE 6-7.`},dynamicAdjustments:{missedWorkouts:"Program will auto-adjust if workouts are missed.",nutritionTracking:"Calorie targets adjust based on progress.",goalTracking:"Weekly check-ins to ensure you stay on track."}}}function wf(f,m,x){const b=x==="elite"?"Elite ":x==="advanced"?"Advanced ":"";return{endurance:{running:`${b}Running Program`,marathon:`${b}Marathon Prep`,cycling:`${b}Cycling Performance`,swimming:`${b}Swim Program`,triathlon:`${b}Triathlon Builder`},strength:{powerlifting:`${b}Powerlifting Protocol`,olympic:`${b}Olympic Lifting`,strongman:`${b}Strongman Training`},aesthetic:{hypertrophy:`${b}Hypertrophy Program`,"lean-muscle":`${b}Lean Gains`,recomp:`${b}Body Recomposition`},fatloss:{aggressive:`${b}Rapid Fat Loss`,moderate:`${b}Sustainable Shred`,slow:`${b}Gradual Cut`}}[f]?.[m]||`${b}${f.charAt(0).toUpperCase()+f.slice(1)} Program`}const h0=[{id:"squat",label:"Back Squat",icon:""},{id:"bench",label:"Bench Press",icon:""},{id:"deadlift",label:"Deadlift",icon:""},{id:"ohp",label:"Overhead Press",icon:""}],Ma=[{id:"recomp",label:"Recomp",desc:"Lose fat, build muscle (Recommended)",icon:"",multiplier:1,detail:"Eat at maintenance with high protein. Gradual, sustainable progress."},{id:"gain",label:"Gain Weight",desc:"Calorie surplus for faster gains",icon:"",multiplier:.8,detail:"Better recovery, faster strength gains. Best for building muscle."},{id:"maintain",label:"Maintain",desc:"Keep current weight",icon:"",multiplier:1,detail:"Stable energy levels, steady progress."},{id:"lose",label:"Lose Weight",desc:"Calorie deficit (slower progress)",icon:"",multiplier:1.4,detail:"Less recovery, reduced energy. Strength gains will be slower."}];function f0(f,m){return!f||!m||m<1?null:m===1?f:Math.round(f*(1+m/30))}function bf(f,m,x,b){const C=m-f;if(C<=0)return{weeks:8,reason:"maintenance",monthlyRate:0};const w={beginner:30,intermediate:15,advanced:8,elite:4},M=(Ma.find($=>$.id===b)||Ma[0]).multiplier,R=w[x]||w.intermediate,N=Math.round(R/M),O=Math.ceil(C/N);return{weeks:Math.max(8,O*4),monthlyRate:N,reason:"calculated",nutritionImpact:M!==1?M<1?"faster":"slower":"normal"}}function x0(){return new Date().toISOString().split("T")[0]}function Tc(f,m){const x=f?new Date(f):new Date;return x.setDate(x.getDate()+m*7),x.toISOString().split("T")[0]}function vf(f,m){const x=new Date(f),C=new Date(m)-x;return Math.round(C/(1e3*60*60*24*7))}function Nf({strengthGoals:f,strengthGoalDate:m,programStartDate:x,nutritionGoal:b,experienceLevel:C="intermediate",bodyFatPercent:w,onUpdateGoal:k,onUpdateDate:M,onUpdateStartDate:R,onUpdateNutrition:N}){const[O,_]=we.useState({}),[$,Z]=we.useState(!1),G=f&&f.length>0?f:h0.map(ke=>({id:ke.id,label:ke.label,current1RM:"",target1RM:"",workingWeight:"",workingReps:""})),X=G.reduce((ke,Ge)=>{const te=parseFloat(Ge.current1RM)||0;return ke+te},0),le=G.reduce((ke,Ge)=>{const te=parseFloat(Ge.target1RM)||0;return ke+te},0),ue=b||((parseFloat(w)||15)<=10?"gain":"recomp"),ne=bf(X,le,C,ue),Q=x||x0(),xe=Tc(Q,ne.weeks),oe=Tc(Q,Math.max(1,ne.weeks-1));we.useEffect(()=>{if(le>X&&ne.weeks>0){const ke=Tc(Q,ne.weeks);(!m||m<ke)&&(M(ke),Z(!1))}},[Q,ne.weeks,X,le]);const Y=ke=>{const Ge=ne.weeks;vf(Q,ke)<Ge-1?Z(!0):Z(!1),M(ke)},me=(ke,Ge,te)=>{const K=G.find(B=>B.id===ke);if(!K)return;const ge={...K,[Ge]:te};if(ge.workingWeight&&ge.workingReps){const B=f0(parseFloat(ge.workingWeight),parseInt(ge.workingReps));B&&(ge.current1RM=B.toString())}k(ke,Ge,te),ge.current1RM!==K.current1RM&&k(ke,"current1RM",ge.current1RM)},ce=()=>Ma.find(ke=>ke.id===ue)||Ma[0];return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Nutrition Strategy"}),i.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Your nutrition affects how fast you can safely progress. This impacts your program timeline."}),parseFloat(w)<=10&&i.jsx("div",{className:"mb-4 p-3 bg-amber-900/20 border border-amber-600/30 rounded-lg",children:i.jsxs("p",{className:"text-sm text-amber-300",children:[i.jsx("strong",{children:"Note:"})," At 10% body fat, we recommend a calorie surplus for optimal strength gains and recovery."]})}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ma.map(ke=>i.jsxs("button",{onClick:()=>N(ke.id),className:`p-3 rounded-lg border text-left transition-all ${ue===ke.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500 hover:border-dark-400"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{children:ke.icon}),i.jsx("span",{className:"text-white font-medium",children:ke.label})]}),i.jsx("p",{className:"text-xs text-gray-400",children:ke.desc})]},ke.id))}),i.jsxs("div",{className:"mt-3 p-3 bg-dark-700 rounded-lg",children:[i.jsx("p",{className:"text-sm text-gray-300",children:ce().detail}),ue==="lose"&&i.jsx("p",{className:"text-xs text-amber-400 mt-2",children:" Strength gains are significantly slower in a deficit. Consider recomp instead."})]})]}),i.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Current Strength Baselines"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Enter your current 1 rep max (1RM) for each lift. If you don't know your 1RM, click the calculator to estimate from your working weight and reps."})]}),G.map(ke=>{const Ge=h0.find(K=>K.id===ke.id),te=O[ke.id];return i.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-white font-medium flex items-center gap-2",children:[i.jsx("span",{children:Ge?.icon}),ke.label]}),i.jsxs("button",{type:"button",onClick:()=>_(K=>({...K,[ke.id]:!K[ke.id]})),className:`flex items-center gap-1 text-xs px-2 py-1 rounded ${te?"bg-accent-primary/20 text-accent-primary":"bg-dark-600 text-gray-400 hover:text-white"}`,children:[i.jsx(ch,{className:"w-3 h-3"}),te?"Hide Calculator":"Don't know 1RM?"]})]}),te&&i.jsxs("div",{className:"p-3 bg-dark-600 rounded-lg space-y-2",children:[i.jsx("p",{className:"text-xs text-gray-400",children:"Enter the most weight you can lift for multiple reps:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("div",{children:i.jsx("input",{type:"number",value:ke.workingWeight||"",onChange:K=>me(ke.id,"workingWeight",K.target.value),placeholder:"Weight (lbs)",className:"w-full px-3 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"})}),i.jsx("div",{children:i.jsx("input",{type:"number",value:ke.workingReps||"",onChange:K=>me(ke.id,"workingReps",K.target.value),placeholder:"Reps",min:"1",max:"15",className:"w-full px-3 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"})})]}),ke.workingWeight&&ke.workingReps&&i.jsxs("p",{className:"text-xs text-accent-primary",children:["Estimated 1RM: ",i.jsxs("span",{className:"font-bold",children:[f0(parseFloat(ke.workingWeight),parseInt(ke.workingReps))," lbs"]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Current 1RM"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",value:ke.current1RM||"",onChange:K=>k(ke.id,"current1RM",K.target.value),placeholder:"e.g., 225",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:"lbs"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Goal 1RM"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",value:ke.target1RM||"",onChange:K=>k(ke.id,"target1RM",K.target.value),placeholder:"e.g., 275",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),i.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:"lbs"})]})]})]})]},ke.id)}),X>0&&le>0&&i.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 rounded-lg border border-accent-primary/30",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-gray-300",children:"Current Total"}),i.jsxs("span",{className:"text-white font-bold",children:[X," lbs"]})]}),i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("span",{className:"text-gray-300",children:"Goal Total"}),i.jsxs("span",{className:"text-accent-primary font-bold",children:[le," lbs"]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/10",children:[i.jsx("span",{className:"text-gray-300",children:"Total Gain Needed"}),i.jsxs("span",{className:"text-accent-secondary font-bold",children:["+",le-X," lbs"]})]})]}),le>X&&i.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(j0,{className:"w-5 h-5 text-accent-primary flex-shrink-0 mt-0.5"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-white font-medium mb-1",children:"Estimated Program Duration"}),i.jsxs("p",{className:"text-sm text-gray-400 mb-3",children:["Based on your goals, experience (",C,"), and nutrition strategy (",ue,"), you can realistically gain about ",i.jsxs("span",{className:"text-white",children:[ne.monthlyRate," lbs/month"]})," across your main lifts."]}),i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"text-2xl font-bold text-accent-primary",children:ne.weeks}),i.jsx("span",{className:"text-gray-400",children:"weeks estimated"})]}),ne.nutritionImpact!=="normal"&&i.jsx("p",{className:"text-xs text-gray-500",children:ne.nutritionImpact==="faster"?" Calorie surplus enables faster recovery and progress":" Calorie deficit slows recovery - timeline adjusted accordingly"})]})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Program Start Date"}),i.jsx("input",{type:"date",value:x||"",min:x0(),onChange:ke=>R(ke.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to start today"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Estimated 1RM Goal Accomplishment Date"}),i.jsx("input",{type:"date",value:m||xe,min:oe,onChange:ke=>Y(ke.target.value),className:`w-full px-4 py-3 bg-dark-700 border rounded-lg text-white ${$?"border-amber-500":"border-dark-600"}`}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Based on your start date and estimated ",ne.weeks,"-week program"]}),$&&i.jsx("div",{className:"mt-3 p-4 bg-amber-900/20 border border-amber-600/30 rounded-lg",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(A0,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-amber-300 font-medium mb-1",children:" Accelerated Timeline Warning"}),i.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Pushing your goals faster than recommended significantly increases injury risk and could set you back even further."}),i.jsxs("p",{className:"text-sm text-gray-400",children:[i.jsx("strong",{children:"We don't recommend expediting the program."})," It's already optimized for maximum safe progress. If you're progressing faster than expected, the program will automatically adjust to your performance."]})]})]})})]})]})}class Cf extends we.Component{constructor(m){super(m),this.state={hasError:!1,error:null}}static getDerivedStateFromError(m){return{hasError:!0,error:m}}componentDidCatch(m,x){console.error("Setup Wizard Error:",m),console.error("Error Info:",x),console.error("Component Stack:",x?.componentStack)}render(){return this.state.hasError?i.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center p-6",children:i.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 max-w-md text-center",children:[i.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Something went wrong"}),i.jsx("p",{className:"text-gray-400 mb-4",children:this.state.error?.message||"An unexpected error occurred"}),i.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"px-6 py-3 bg-accent-primary text-white rounded-lg font-medium",children:"Reload"})]})}):this.props.children}}const Is=()=>new Date().toISOString().split("T")[0],m0=[{id:1,title:"Personal Info",icon:M0},{id:2,title:"Body Stats",icon:_0},{id:3,title:"Primary Goal",icon:In},{id:4,title:"Goal Details",icon:si},{id:5,title:"Time Off",icon:ph},{id:6,title:"Generate",icon:Wc}],Bi=[{id:"endurance",title:"Endurance",description:"Cardiovascular training - running, cycling, swimming",icon:"",subtypes:[{id:"running",label:"Running (Race Training)"},{id:"cycling",label:"Cycling"},{id:"swimming",label:"Swimming"},{id:"triathlon",label:"Triathlon"}]},{id:"strength",title:"Strength",description:"Build maximal strength and power",icon:"",subtypes:[{id:"powerlifting",label:"Powerlifting"},{id:"olympic",label:"Olympic Lifting"},{id:"strongman",label:"Strongman"}]},{id:"aesthetic",title:"Aesthetic",description:"Physique focused - muscle building and body composition",icon:"",subtypes:[{id:"hypertrophy",label:"Hypertrophy/Bodybuilding"},{id:"lean-muscle",label:"Lean Muscle Building"},{id:"recomp",label:"Body Recomposition"}]}],Ef=[{id:"5k",label:"5K",miles:3.1},{id:"10k",label:"10K",miles:6.2},{id:"half",label:"Half Marathon",miles:13.1},{id:"full",label:"Full Marathon",miles:26.2},{id:"ultra",label:"Ultra Marathon",miles:null,requiresDistance:!0}],Sf=[{id:"5k",label:"5K"},{id:"10k",label:"10K"},{id:"half",label:"Half Marathon"},{id:"full",label:"Full Marathon"}],Af=[{id:"sprint",label:"Sprint",description:"750m swim, 20km bike, 5km run"},{id:"olympic",label:"Olympic",description:"1.5km swim, 40km bike, 10km run"},{id:"half-iron",label:"Half Ironman (70.3)",description:"1.9km swim, 90km bike, 21.1km run"},{id:"full-iron",label:"Ironman",description:"3.8km swim, 180km bike, 42.2km run"}],g0=[{id:"squat",label:"Back Squat"},{id:"bench",label:"Bench Press"},{id:"deadlift",label:"Deadlift"},{id:"ohp",label:"Overhead Press"}],p0=[{id:"running",label:"Running",icon:"",description:"2-3 easy runs per week"},{id:"cycling",label:"Cycling",icon:"",description:"2-3 bike sessions per week"},{id:"swimming",label:"Swimming",icon:"",description:"2-3 swim sessions per week"}],kf=()=>{const f={name:"Test User",age:30,sex:"male",weight:180,weightUnit:"lbs",heightFeet:5,heightInches:10,heightUnit:"imperial",programType:"endurance",programSubtype:"running",desiredTrainingDays:5,yearsTraining:3,trainingHistory:"consistent",raceDistance:"half",raceDate:new Date(Date.now()+7776e6).toISOString().split("T")[0],nutritionGoal:"maintain",weightKg:81.6,heightCm:177.8,bmr:1882,tdee:3200,macros:{calories:3200,protein:180,carbs:400,fat:100}},m={name:"Test Running Program",type:"endurance",subtype:"running",primaryGoal:"endurance",currentWeek:1,currentPhase:"Base",mesocycleWeeks:14,daysPerWeek:5,programStartDate:new Date().toISOString().split("T")[0],weeklySchedule:[{day:1,dayName:"Monday",name:"Easy Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Easy Run",duration:40,exercises:[{name:"Easy Run",sets:1,reps:"40 min",pace:"9:30-10:00/mi",rpe:5}]}]},{day:2,dayName:"Tuesday",name:"Intervals",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Intervals",duration:45,exercises:[{name:"Speed Work",sets:6,reps:"400m",pace:"7:30/mi",rpe:8}]}]},{day:3,dayName:"Wednesday",name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]},{day:4,dayName:"Thursday",name:"Tempo Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Tempo",duration:50,exercises:[{name:"Tempo Run",sets:1,reps:"4 mi",pace:"8:15/mi",rpe:7}]}]},{day:5,dayName:"Friday",name:"Easy Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Easy Run",duration:35,exercises:[{name:"Recovery Run",sets:1,reps:"30 min",pace:"10:00/mi",rpe:4}]}]},{day:6,dayName:"Saturday",name:"Long Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Long Run",duration:90,exercises:[{name:"Long Run",sets:1,reps:"10 mi",pace:"9:45/mi",rpe:6}]}]},{day:7,dayName:"Sunday",name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]}]};return{profile:f,program:m}};function If({onComplete:f}){const{user:m,signInWithGoogle:x,isAuthenticated:b,isConfigured:C}=Bc(),[w,k]=we.useState(1),[M,R]=we.useState(!1),[N,O]=we.useState(null),[_,$]=we.useState(0),Z=we.useRef(null),[G,X]=we.useState({name:"",age:"",sex:"male",weight:"",weightUnit:"lbs",heightFeet:"",heightInches:"",heightUnit:"imperial",heightCm:"",bodyFatPercent:"",currentTrainingDays:3,trainingHistory:"some",yearsTraining:1,programType:"",programSubtype:"",desiredTrainingDays:4,raceDistance:"",ultraDistance:"",triathlonDistance:"",targetFinishTime:"",targetFinishHours:"",targetFinishMinutes:"",targetFinishSeconds:"",raceDate:"",currentWeeklyMileage:"",currentPace:"",baselineRaceDistance:"",baselineTimeHours:"",baselineTimeMinutes:"",baselineTimeSeconds:"",longestRecentRun:"",strengthGoals:g0.map(K=>({id:K.id,label:K.label,current1RM:"",target1RM:"",workingWeight:"",workingReps:""})),strengthGoalDate:"",includeCardio:!1,cardioType:"",cardioDaysPerWeek:2,currentBodyFat:"",targetBodyFat:"",aestheticGoalDate:"",targetWeight:"",targetDate:"",weeklyWeightChange:.5,enableHybrid:!1,secondaryProgramType:"",secondarySubtype:"",allowDoubleDays:!1,sessionDuration:60,equipment:"full",programStartDate:"",nutritionGoal:"recomp",vacations:[]}),le=(K,ge)=>{X(B=>({...B,[K]:ge}))},de=(K,ge,B)=>{const fe=(G.strengthGoals||[]).map(he=>he.id===K?{...he,[ge]:B}:he);le("strengthGoals",fe)};we.useEffect(()=>{m&&!G.name&&le("name",m.user_metadata?.full_name||m.email?.split("@")[0]||"")},[m]);const ue=()=>{w<6&&k(K=>K+1)},ne=()=>{w>1&&k(K=>K-1)},Q=()=>{const K={id:Date.now(),name:"",startDate:"",endDate:""};le("vacations",[...G.vacations,K])},xe=(K,ge,B)=>{const ye=G.vacations.map(fe=>fe.id===K?{...fe,[ge]:B}:fe);le("vacations",ye)},oe=K=>{le("vacations",G.vacations.filter(ge=>ge.id!==K))},Y=()=>{if(G.heightUnit==="metric")return parseFloat(G.heightCm)||0;const K=parseFloat(G.heightFeet)||0,ge=parseFloat(G.heightInches)||0;return(K*12+ge)*2.54},me=async()=>{R(!0);const K={...G,programType:G.programType||"strength",programSubtype:G.programSubtype||"powerlifting",desiredTrainingDays:parseInt(G.desiredTrainingDays)||4,strengthGoals:G.strengthGoals||g0.map(W=>({id:W.id,label:W.label,current:"",target:""}))},ge=K.weightUnit==="lbs"?parseFloat(K.weight)*.453592:parseFloat(K.weight),B=Y(),ye=sf(ge,B,parseInt(K.age),K.sex),fe=Tf(K.desiredTrainingDays),he=Math.round(ye*fe),H=jf(he,K,parseFloat(K.weight)),U={...K,weightKg:ge,heightCm:B,bmr:ye,tdee:he,macros:H};let P=null;try{console.log("Calling API with profile:",K.programType,K.programSubtype);const W=await fetch("/api/generate-program",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:K,macros:H,bmr:ye,tdee:he})});if(!W.ok){const Ee=await W.text();throw console.error("API error response:",Ee),new Error(`API error: ${W.status}`)}P=await W.json(),console.log("API returned program:",P?.name)}catch(W){console.error("Error calling API, using fallback:",W),P=y0(K)}(!P||typeof P!="object")&&(console.error("Invalid program after generation, creating minimal fallback"),P=y0(K)),P={...P,primaryGoal:P.primaryGoal||K.programType,primarySubtype:P.primarySubtype||K.programSubtype,daysPerWeek:P.daysPerWeek||K.desiredTrainingDays,weeklySchedule:P.weeklySchedule||[]};try{f({profile:U,program:P})}catch(W){console.error("Error in onComplete:",W),R(!1),alert("Error saving program. Please try again.")}},ce=()=>{switch(w){case 1:return G.name&&G.age&&G.sex;case 2:const K=G.weight,ge=G.heightUnit==="metric"?G.heightCm:G.heightFeet&&G.heightInches;return K&&ge;case 3:return G.programType&&G.programSubtype&&G.desiredTrainingDays;case 4:return ke();case 5:return!0;default:return!0}},ke=()=>G.programType==="endurance"?G.programSubtype==="running"?G.raceDistance&&G.raceDate:G.programSubtype==="triathlon"?G.triathlonDistance&&G.raceDate:!0:G.programType==="strength"?!(!(G.strengthGoals||[]).some(B=>B.current1RM&&B.target1RM)||!G.strengthGoalDate):G.programType==="aesthetic"?G.targetBodyFat:G.programType==="fatloss"?G.targetWeight:!0;we.useEffect(()=>{if(G.programType!=="strength"){O(null);return}const K=G.strengthGoals||[];if(!K.some(H=>H.current1RM&&H.target1RM)||!G.strengthGoalDate){O(null);return}const B=new Date,ye=new Date(G.strengthGoalDate),fe=Math.max(1,Math.ceil((ye-B)/(1e3*60*60*24*7))),he=[];if(K.forEach(H=>{if(H.current1RM&&H.target1RM){const U=parseFloat(H.current1RM),W=parseFloat(H.target1RM)-U,Ee=W/fe;Ee>10&&he.push({lift:H.label,weeklyIncrease:Ee.toFixed(1),totalIncrease:W,weeks:fe})}}),he.length>0){const H=he.map(U=>`${U.lift}: ${U.totalIncrease}lbs in ${U.weeks} weeks = ${U.weeklyIncrease}lbs/week`).join(`
`);O(`Your strength goals are not realistic. A maximum of ~10lbs/week 1RM increase is possible with optimal training.

${H}

Please extend your goal date or reduce your targets.`)}else O(null)},[G.programType,G.strengthGoals,G.strengthGoalDate]);const Ge=K=>{K.preventDefault(),Z.current&&clearTimeout(Z.current);const ge=_+1;$(ge),ge>=5?($(0),te()):Z.current=setTimeout(()=>$(0),3e3)},te=we.useCallback(()=>{if(window.confirm("Enter test mode? This will create a mock profile for testing.")){const K=kf();f(K)}},[f]);return we.useEffect(()=>{const K=ge=>{ge.ctrlKey&&ge.shiftKey&&ge.key==="T"&&(ge.preventDefault(),te())};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[te]),i.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col",children:[i.jsxs("header",{className:"px-6 pt-8 pb-4",children:[i.jsx("h1",{className:"font-display text-3xl font-bold tracking-tight gradient-text cursor-pointer select-none",onClick:Ge,onTouchEnd:Ge,children:"MOTUS"}),i.jsx("p",{className:"text-text-secondary text-sm mt-1",children:"Build your personalized program"}),_>=3&&i.jsxs("p",{className:"text-accent-primary text-xs mt-1 animate-pulse",children:[5-_," more taps for test mode..."]}),i.jsx("p",{className:"text-gray-600 text-xs mt-1 hidden sm:block",children:"Tip: Press Ctrl+Shift+T for test mode"})]}),i.jsx("div",{className:"px-6 py-4",children:i.jsx("div",{className:"flex items-center justify-between mb-2",children:m0.map((K,ge)=>i.jsxs(N0.Fragment,{children:[i.jsxs("div",{className:"flex flex-col items-center",children:[i.jsx("div",{className:`
                    w-10 h-10 rounded-xl flex items-center justify-center
                    transition-all duration-300
                    ${w>=K.id?"bg-accent-primary text-dark-900":w===K.id-1?"bg-dark-700 text-text-secondary border border-dark-500":"bg-dark-800 text-dark-400"}
                  `,children:i.jsx(K.icon,{className:`w-5 h-5 ${w>=K.id?"stroke-[2.5]":""}`})}),i.jsx("span",{className:`text-xs mt-1.5 hidden sm:block font-medium ${w>=K.id?"text-accent-primary":"text-dark-400"}`,children:K.title})]}),ge<m0.length-1&&i.jsx("div",{className:`flex-1 h-0.5 mx-2 transition-all duration-300 rounded-full ${w>K.id?"bg-accent-primary":"bg-dark-700"}`})]},K.id))})}),i.jsxs("div",{className:"flex-1 px-6 py-6 overflow-y-auto",children:[w===1&&i.jsx(Rf,{formData:G,updateFormData:le,user:m,signInWithGoogle:x,isAuthenticated:b,isConfigured:C}),w===2&&i.jsx(_f,{formData:G,updateFormData:le}),w===3&&i.jsx(Mf,{formData:G,updateFormData:le}),w===4&&i.jsx(Of,{formData:G,updateFormData:le,updateStrengthGoal:de,strengthGoalError:N}),w===5&&i.jsx(Df,{formData:G,addVacation:Q,updateVacation:xe,removeVacation:oe}),w===6&&i.jsx(Pf,{formData:G,isGenerating:M,onGenerate:me})]}),i.jsxs("div",{className:"px-6 py-5 border-t border-dark-700 flex justify-between bg-dark-900/95 backdrop-blur-sm",children:[i.jsxs(Qt,{variant:"ghost",onClick:ne,disabled:w===1,className:"min-w-[100px]",children:[i.jsx(Da,{className:"w-5 h-5 mr-1"}),"Back"]}),w<6?i.jsxs(Qt,{onClick:ue,disabled:!ce(),className:"min-w-[100px]",children:["Next",i.jsx(ni,{className:"w-5 h-5 ml-1"})]}):null]})]})}function Tf(f){return f<=1?1.2:f<=2?1.375:f<=3?1.55:f<=5?1.725:1.9}function jf(f,m,x){let b,C,w,k;switch(m.nutritionGoal){case"maintain":b=f,C=Math.round(x*.8);break;case"recomp":b=f,C=Math.round(x*1);break;case"lose":const N=m.weeklyWeightChange*500;b=Math.round(f-N),C=Math.round(x*1);break;case"gain":const O=m.weeklyWeightChange*500;b=Math.round(f+O),C=Math.round(x*.9);break;default:b=f,C=Math.round(x*.8)}const M=C*4,R=b-M;return k=Math.round(R*.35/9),w=Math.round(R*.65/4),{calories:b,protein:C,carbs:w,fat:k}}function Rf({formData:f,updateFormData:m,user:x,signInWithGoogle:b,isAuthenticated:C,isConfigured:w}){const[k,M]=we.useState(!1),[R,N]=we.useState(null),O=async()=>{M(!0),N(null);try{const{error:_}=await b();_&&(console.error("Sign in error:",_),N(_.message||"Failed to sign in. Please try again."))}catch(_){console.error("Unexpected sign in error:",_),N("An unexpected error occurred. Please try again.")}M(!1)};return i.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Let's get to know you"}),i.jsx("p",{className:"text-gray-400",children:"Tell us about yourself to personalize your experience."})]}),w&&i.jsx("div",{className:"p-4 bg-dark-800 rounded-xl border border-dark-600",children:C?i.jsxs("div",{className:"flex items-center gap-3",children:[x?.user_metadata?.avatar_url&&i.jsx("img",{src:x.user_metadata.avatar_url,alt:"Profile",className:"w-10 h-10 rounded-full"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("p",{className:"text-white font-medium",children:x?.user_metadata?.full_name||x?.email}),i.jsxs("p",{className:"text-xs text-green-400 flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Signed in  Data syncs across devices"]})]})]}):i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Sign in to sync your data across all your devices"}),R&&i.jsxs("div",{className:"mb-3 p-3 bg-red-900/30 border border-red-700 rounded-lg",children:[i.jsx("p",{className:"text-sm text-red-400",children:R}),i.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Note: Google sign-in requires proper Supabase configuration. You can skip this and use the app offline."})]}),i.jsxs("button",{onClick:O,disabled:k,className:"w-full flex items-center justify-center gap-3 px-4 py-3 bg-white text-gray-800 font-medium rounded-lg hover:bg-gray-100 transition-colors disabled:opacity-50",children:[i.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),k?"Signing in...":"Continue with Google"]})]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Your Name"}),i.jsx("input",{type:"text",value:f.name,onChange:_=>m("name",_.target.value),placeholder:"Enter your name",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Age"}),i.jsx("input",{type:"number",value:f.age,onChange:_=>m("age",_.target.value),placeholder:"Enter your age",min:"16",max:"100",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Sex"}),i.jsx("div",{className:"flex gap-4",children:["male","female"].map(_=>i.jsx("button",{onClick:()=>m("sex",_),className:`flex-1 py-3 px-4 rounded-lg border transition-all ${f.sex===_?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400 hover:border-gray-400"}`,children:_.charAt(0).toUpperCase()+_.slice(1)},_))})]})]})]})}function _f({formData:f,updateFormData:m}){return i.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Body Measurements"}),i.jsx("p",{className:"text-gray-400",children:"Help us understand your current fitness level."})]}),i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weight"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"number",value:f.weight,onChange:x=>m("weight",x.target.value),placeholder:"Enter weight",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"}),i.jsxs("select",{value:f.weightUnit,onChange:x=>m("weightUnit",x.target.value),className:"px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[i.jsx("option",{value:"lbs",children:"lbs"}),i.jsx("option",{value:"kg",children:"kg"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Height"}),i.jsxs("div",{className:"flex gap-2 mb-2",children:[i.jsx("button",{onClick:()=>m("heightUnit","imperial"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${f.heightUnit==="imperial"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"ft / in"}),i.jsx("button",{onClick:()=>m("heightUnit","metric"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${f.heightUnit==="metric"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"cm"})]}),f.heightUnit==="imperial"?i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"number",value:f.heightFeet,onChange:x=>m("heightFeet",x.target.value),placeholder:"Feet",min:"3",max:"8",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),i.jsx("input",{type:"number",value:f.heightInches,onChange:x=>m("heightInches",x.target.value),placeholder:"Inches",min:"0",max:"11",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}):i.jsx("input",{type:"number",value:f.heightCm,onChange:x=>m("heightCm",x.target.value),placeholder:"Height in cm",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Body Fat % ",i.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),i.jsx("input",{type:"number",value:f.bodyFatPercent,onChange:x=>m("bodyFatPercent",x.target.value),placeholder:"e.g., 20",min:"5",max:"50",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),i.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Training History"}),i.jsxs("div",{className:"mb-5",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["How many days per week have you been training? ",i.jsxs("span",{className:"text-accent-primary font-bold",children:[f.currentTrainingDays," days"]})]}),i.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Average over the last 30 days"}),i.jsx("input",{type:"range",min:"0",max:"7",step:"1",value:f.currentTrainingDays,onChange:x=>m("currentTrainingDays",parseInt(x.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),i.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[0,1,2,3,4,5,6,7].map(x=>i.jsx("span",{children:x},x))})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"How consistent has your training been?"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"none",label:"New to Training",desc:"Just starting out"},{id:"some",label:"Some Experience",desc:"On and off"},{id:"consistent",label:"Consistent",desc:"Regular routine"}].map(x=>i.jsxs("button",{onClick:()=>m("trainingHistory",x.id),className:`p-3 rounded-lg border text-center ${f.trainingHistory===x.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[i.jsx("span",{className:"text-white text-sm font-medium block",children:x.label}),i.jsx("span",{className:"text-xs text-gray-400",children:x.desc})]},x.id))})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Years of training experience: ",i.jsxs("span",{className:"text-accent-primary font-bold",children:[f.yearsTraining," ",f.yearsTraining===1?"year":"years"]})]}),i.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:f.yearsTraining,onChange:x=>m("yearsTraining",parseInt(x.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[i.jsx("span",{children:"New"}),i.jsx("span",{children:"5 yrs"}),i.jsx("span",{children:"10+ yrs"})]})]})]})]})]})}function Mf({formData:f,updateFormData:m}){const x=Bi.find(b=>b.id===f.programType);return i.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"What's your primary goal?"}),i.jsx("p",{className:"text-gray-400",children:"Choose your main training focus."})]}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:Bi.map(b=>i.jsxs("button",{onClick:()=>{m("programType",b.id),m("programSubtype",""),(b.id==="strength"||b.id==="aesthetic")&&(m("enableHybrid",!1),m("secondaryProgramType",""),m("secondarySubtype",""),m("allowDoubleDays",!1)),b.id==="aesthetic"&&m("nutritionGoal","recomp")},className:`p-4 rounded-xl border text-left transition-all ${f.programType===b.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500 hover:border-gray-400"}`,children:[i.jsx("span",{className:"text-3xl mb-2 block",children:b.icon}),i.jsx("h3",{className:"text-lg font-semibold text-white",children:b.title}),i.jsx("p",{className:"text-sm text-gray-400 mt-1",children:b.description})]},b.id))}),x&&i.jsxs("div",{className:"mt-6",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Select your specific focus:"}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:x.subtypes.map(b=>i.jsx("button",{onClick:()=>m("programSubtype",b.id),className:`px-4 py-3 rounded-lg border text-sm transition-all ${f.programSubtype===b.id?"bg-accent-secondary/20 border-accent-secondary text-white":"bg-dark-700 border-dark-500 text-gray-400 hover:border-gray-400"}`,children:b.label},b.id))})]}),f.programSubtype&&i.jsxs("div",{className:"mt-6 p-4 bg-dark-800 rounded-xl border border-dark-600",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["How many days per week do you want to workout? ",i.jsxs("span",{className:"text-accent-primary font-bold",children:[f.desiredTrainingDays," days"]})]}),i.jsx("input",{type:"range",min:"2",max:"7",step:"1",value:f.desiredTrainingDays,onChange:b=>m("desiredTrainingDays",parseInt(b.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),i.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[2,3,4,5,6,7].map(b=>i.jsx("span",{children:b},b))})]}),f.programSubtype==="triathlon"&&i.jsx("div",{className:"mt-6 p-4 bg-accent-primary/10 rounded-xl border border-accent-primary/30",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-2xl",children:""}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-accent-primary font-semibold mb-1",children:"Triathlon Program Includes:"}),i.jsxs("ul",{className:"text-sm text-gray-300 space-y-1",children:[i.jsx("li",{children:" Swim, Bike, Run periodization with brick workouts"}),i.jsx("li",{children:" Double & triple day sessions built in"}),i.jsx("li",{children:" Injury prevention strength work (not hypertrophy)"}),i.jsx("li",{children:" Race-specific taper and nutrition timing"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"Based on professional triathlon training methodology. Minimum 5 training days recommended."})]})]})}),f.programSubtype&&f.programType==="endurance"&&f.programSubtype!=="triathlon"&&i.jsxs("div",{className:"mt-6 p-4 bg-dark-800 rounded-xl border border-dark-600",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-medium",children:"Enable Hybrid Training?"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Add a secondary goal to your program"})]}),i.jsx("button",{onClick:()=>m("enableHybrid",!f.enableHybrid),className:`w-14 h-8 rounded-full transition-all ${f.enableHybrid?"bg-accent-primary":"bg-dark-600"}`,children:i.jsx("div",{className:`w-6 h-6 rounded-full bg-white transition-all ${f.enableHybrid?"translate-x-7":"translate-x-1"}`})})]}),f.enableHybrid&&i.jsxs("div",{className:"space-y-4 pt-4 border-t border-dark-600",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Secondary Program Type"}),i.jsxs("select",{value:f.secondaryProgramType,onChange:b=>{m("secondaryProgramType",b.target.value),m("secondarySubtype","")},className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[i.jsx("option",{value:"",children:"Select..."}),Bi.filter(b=>b.id!==f.programType).map(b=>i.jsxs("option",{value:b.id,children:[b.icon," ",b.title]},b.id))]})]}),f.secondaryProgramType&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Secondary Focus"}),i.jsxs("select",{value:f.secondarySubtype,onChange:b=>m("secondarySubtype",b.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[i.jsx("option",{value:"",children:"Select..."}),Bi.find(b=>b.id===f.secondaryProgramType)?.subtypes?.filter(b=>b.id!=="triathlon")?.map(b=>i.jsx("option",{value:b.id,children:b.label},b.id))]})]}),i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-dark-700 rounded-lg",children:[i.jsx("input",{type:"checkbox",id:"doubleDays",checked:f.allowDoubleDays,onChange:b=>m("allowDoubleDays",b.target.checked),className:"w-5 h-5 rounded border-dark-500 text-accent-primary focus:ring-accent-primary"}),i.jsxs("label",{htmlFor:"doubleDays",className:"text-sm text-gray-300",children:[i.jsx("span",{className:"font-medium text-white",children:"Allow double days"}),i.jsx("br",{}),i.jsx("span",{className:"text-gray-400",children:"AM: Primary goal  PM: Secondary goal"})]})]})]})]})]})}function Of({formData:f,updateFormData:m,updateStrengthGoal:x,strengthGoalError:b}){const C=f||{},w=C.programType||"",k=C.programSubtype||"",M=()=>{const N=parseInt(C.yearsTraining)||0;return N<1?"beginner":N<3?"intermediate":N<6?"advanced":"elite"};if(w==="strength")return i.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Goal Details"}),i.jsx("p",{className:"text-gray-400",children:"Help us tailor your program to your specific targets."})]}),i.jsx(Nf,{strengthGoals:C.strengthGoals,strengthGoalDate:C.strengthGoalDate,programStartDate:C.programStartDate,nutritionGoal:C.nutritionGoal,experienceLevel:M(),bodyFatPercent:C.bodyFatPercent,onUpdateGoal:x,onUpdateDate:N=>m("strengthGoalDate",N),onUpdateStartDate:N=>m("programStartDate",N),onUpdateNutrition:N=>m("nutritionGoal",N)}),b&&i.jsxs("div",{className:"mt-4 p-4 bg-red-900/20 border border-red-700 rounded-xl",children:[i.jsx("h4",{className:"text-red-400 font-semibold mb-2",children:"Unrealistic Goals Detected"}),i.jsx("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:b})]}),i.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Add Cardio for Heart Health?"}),i.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Adding 2-3 days of easy cardio improves cardiovascular health and recovery without interfering with your strength gains."}),i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("button",{onClick:()=>m("includeCardio",!C.includeCardio),className:`relative w-12 h-6 rounded-full transition-colors ${C.includeCardio?"bg-accent-primary":"bg-dark-600"}`,children:i.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform ${C.includeCardio?"left-6":"left-0.5"}`})}),i.jsx("span",{className:"text-white",children:"Include cardio in my program"})]}),C.includeCardio&&i.jsxs("div",{className:"space-y-4 p-4 bg-dark-700 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cardio Type"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:p0.map(N=>i.jsxs("button",{onClick:()=>m("cardioType",N.id),className:`p-3 rounded-lg border text-center ${C.cardioType===N.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-600 border-dark-500"}`,children:[i.jsx("span",{className:"text-2xl block mb-1",children:N.icon}),i.jsx("span",{className:"text-white text-sm",children:N.label})]},N.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Days per Week"}),i.jsx("div",{className:"flex gap-2",children:[2,3].map(N=>i.jsxs("button",{onClick:()=>m("cardioDaysPerWeek",N),className:`flex-1 py-2 rounded-lg border ${C.cardioDaysPerWeek===N?"bg-accent-primary/20 border-accent-primary text-white":"bg-dark-600 border-dark-500 text-gray-400"}`,children:[N," days"]},N))}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Cardio sessions will be scheduled on rest days or as double days (AM/PM splits)"})]})]})]})]});const R=()=>{if(w==="endurance")return k==="marathon"||k==="running"?i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:" Race Details"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Distance"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:Ef.map(N=>i.jsx("button",{onClick:()=>m("raceDistance",N.id),className:`py-3 px-2 rounded-lg border text-sm ${f.raceDistance===N.id?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:N.label},N.id))}),f.raceDistance==="ultra"&&i.jsxs("div",{className:"mt-3",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ultra Distance (miles)"}),i.jsx("input",{type:"number",value:f.ultraDistance||"",onChange:N=>m("ultraDistance",N.target.value),placeholder:"e.g., 50, 100",min:"30",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Common distances: 50K (31mi), 50mi, 100K (62mi), 100mi"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Date"}),i.jsx("input",{type:"date",value:f.raceDate,min:Is(),onChange:N=>m("raceDate",N.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Finish Time"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("input",{type:"number",value:f.targetFinishHours,onChange:N=>m("targetFinishHours",N.target.value),placeholder:"Hours",min:"0",max:"24",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),i.jsxs("div",{children:[i.jsx("input",{type:"number",value:f.targetFinishMinutes,onChange:N=>m("targetFinishMinutes",N.target.value),placeholder:"Min",min:"0",max:"59",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Minutes"})]}),i.jsxs("div",{children:[i.jsx("input",{type:"number",value:f.targetFinishSeconds,onChange:N=>m("targetFinishSeconds",N.target.value),placeholder:"Sec",min:"0",max:"59",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Seconds"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Weekly Mileage"}),i.jsx("input",{type:"number",value:f.currentWeeklyMileage,onChange:N=>m("currentWeeklyMileage",N.target.value),placeholder:"e.g., 20",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),i.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[i.jsx("h4",{className:"text-md font-semibold text-white mb-2",children:" Current Fitness Baseline"}),i.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Enter a recent race or time trial so we can calculate your training paces accurately."}),i.jsxs("div",{className:"mb-4",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reference Race Distance"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Sf.map(N=>i.jsx("button",{onClick:()=>m("baselineRaceDistance",N.id),className:`py-2 px-2 rounded-lg border text-sm ${f.baselineRaceDistance===N.id?"bg-accent-secondary border-accent-secondary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:N.label},N.id))})]}),f.baselineRaceDistance&&i.jsxs("div",{className:"mb-4",children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Your Best Recent ",f.baselineRaceDistance.toUpperCase()," Time"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("input",{type:"number",value:f.baselineTimeHours,onChange:N=>m("baselineTimeHours",N.target.value),placeholder:"Hr",min:"0",max:"10",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),i.jsxs("div",{children:[i.jsx("input",{type:"number",value:f.baselineTimeMinutes,onChange:N=>m("baselineTimeMinutes",N.target.value),placeholder:"Min",min:"0",max:"59",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Min"})]}),i.jsxs("div",{children:[i.jsx("input",{type:"number",value:f.baselineTimeSeconds,onChange:N=>m("baselineTimeSeconds",N.target.value),placeholder:"Sec",min:"0",max:"59",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Sec"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Longest Run in Past Month (miles)"}),i.jsx("input",{type:"number",value:f.longestRecentRun,onChange:N=>m("longestRecentRun",N.target.value),placeholder:"e.g., 10",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]})]})]}):k==="triathlon"?i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:" Triathlon Details"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Distance"}),i.jsx("div",{className:"space-y-2",children:Af.map(N=>i.jsxs("button",{onClick:()=>m("triathlonDistance",N.id),className:`w-full p-3 rounded-lg border text-left ${f.triathlonDistance===N.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[i.jsx("span",{className:"text-white font-medium",children:N.label}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:N.description})]},N.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Date"}),i.jsx("input",{type:"date",value:f.raceDate,min:Is(),onChange:N=>m("raceDate",N.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Finish Time"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("input",{type:"number",value:f.targetFinishHours,onChange:N=>m("targetFinishHours",N.target.value),placeholder:"Hours",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),i.jsxs("div",{children:[i.jsx("input",{type:"number",value:f.targetFinishMinutes,onChange:N=>m("targetFinishMinutes",N.target.value),placeholder:"Min",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Minutes"})]}),i.jsxs("div",{children:[i.jsx("input",{type:"number",value:f.targetFinishSeconds,onChange:N=>m("targetFinishSeconds",N.target.value),placeholder:"Sec",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),i.jsx("span",{className:"text-xs text-gray-500",children:"Seconds"})]})]})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:" Endurance Goals"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Set your performance targets"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Event Date (Optional)"}),i.jsx("input",{type:"date",value:f.raceDate,min:Is(),onChange:N=>m("raceDate",N.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weekly Training Volume Goal"}),i.jsx("input",{type:"text",value:f.currentWeeklyMileage,onChange:N=>m("currentWeeklyMileage",N.target.value),placeholder:"e.g., 100 miles, 10 hours",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]})]});if(w==="aesthetic"){const N=parseFloat(f.bodyFatPercent)||0,O=parseFloat(f.targetBodyFat)||0,_=N-O;return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:" Physique Goals"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Set your body composition targets"}),f.bodyFatPercent&&i.jsx("div",{className:"p-3 bg-dark-700/50 rounded-lg border border-dark-600",children:i.jsxs("p",{className:"text-sm text-gray-400",children:["Current Body Fat: ",i.jsxs("span",{className:"text-white font-medium",children:[f.bodyFatPercent,"%"]})]})}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Body Fat %"}),i.jsx("input",{type:"number",value:f.targetBodyFat,onChange:$=>m("targetBodyFat",$.target.value),placeholder:"e.g., 12",min:"5",max:"50",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: 10-15% for men, 18-24% for women for a lean physique"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Date (Optional)"}),i.jsx("input",{type:"date",value:f.aestheticGoalDate,min:Is(),onChange:$=>m("aestheticGoalDate",$.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),N>0&&O>0&&_>0&&i.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:i.jsxs("p",{className:"text-white",children:[" You're looking to reduce body fat by"," ",i.jsxs("span",{className:"text-accent-primary font-bold",children:[_.toFixed(1),"%"]})]})}),i.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Program Start Date"}),i.jsx("input",{type:"date",value:f.programStartDate||"",min:Is(),onChange:$=>m("programStartDate",$.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to start today"})]}),i.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-lg border border-accent-primary/20",children:[i.jsx("h4",{className:"text-white font-medium mb-2",children:" Recomp Strategy"}),i.jsxs("p",{className:"text-sm text-gray-300",children:["Your nutrition is set to ",i.jsx("span",{className:"text-accent-primary font-medium",children:"recomp"})," (body recomposition). This means eating at maintenance with high protein, slightly lower on rest days, and slightly higher on training days to maximize muscle gain while losing fat."]})]}),i.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[i.jsx("h4",{className:"text-white font-semibold mb-2",children:" Add Cardio for Heart Health?"}),i.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Light cardio improves cardiovascular health and can help with fat loss without impacting your muscle-building goals."}),i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("button",{onClick:()=>m("includeCardio",!f.includeCardio),className:`relative w-12 h-6 rounded-full transition-colors ${f.includeCardio?"bg-accent-primary":"bg-dark-600"}`,children:i.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform ${f.includeCardio?"left-6":"left-0.5"}`})}),i.jsx("span",{className:"text-white",children:"Include cardio in my program"})]}),f.includeCardio&&i.jsxs("div",{className:"space-y-4 p-4 bg-dark-700 rounded-lg",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cardio Type"}),i.jsx("div",{className:"grid grid-cols-3 gap-2",children:p0.map($=>i.jsxs("button",{onClick:()=>m("cardioType",$.id),className:`p-3 rounded-lg border text-center ${f.cardioType===$.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-600 border-dark-500"}`,children:[i.jsx("span",{className:"text-2xl block mb-1",children:$.icon}),i.jsx("span",{className:"text-white text-sm",children:$.label})]},$.id))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Days per Week"}),i.jsx("div",{className:"flex gap-2",children:[2,3].map($=>i.jsxs("button",{onClick:()=>m("cardioDaysPerWeek",$),className:`flex-1 py-2 rounded-lg border ${f.cardioDaysPerWeek===$?"bg-accent-primary/20 border-accent-primary text-white":"bg-dark-600 border-dark-500 text-gray-400"}`,children:[$," days"]},$))}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Cardio sessions will be scheduled on rest days or as double days"})]})]})]})]})}if(w==="fatloss"){const N=parseFloat(f.weight)||0,O=parseFloat(f.targetWeight)||N,_=N-O,$=_/f.weeklyWeightChange;return i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:" Fat Loss Goals"}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Target Weight (",f.weightUnit,")"]}),i.jsx("input",{type:"number",value:f.targetWeight,onChange:Z=>m("targetWeight",Z.target.value),placeholder:"Enter target weight",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Weekly Weight Loss Rate: ",f.weeklyWeightChange," lbs/week"]}),i.jsx("input",{type:"range",min:"0.25",max:"1",step:"0.25",value:f.weeklyWeightChange,onChange:Z=>m("weeklyWeightChange",parseFloat(Z.target.value)),className:"w-full"}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"Slow (0.25)"}),i.jsx("span",{children:"Moderate (0.5)"}),i.jsx("span",{children:"Aggressive (1.0)"})]})]}),_>0&&i.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:i.jsxs("p",{className:"text-white",children:[" At this rate, you'll reach your goal in approximately"," ",i.jsxs("span",{className:"text-accent-primary font-bold",children:[Math.ceil($)," weeks"]})]})})]})}return null};return i.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Goal Details"}),i.jsx("p",{className:"text-gray-400",children:"Help us tailor your program to your specific targets."})]}),R(),b&&w==="strength"&&i.jsxs("div",{className:"mt-4 p-4 bg-accent-danger/10 border border-accent-danger/30 rounded-xl",children:[i.jsxs("h4",{className:"text-accent-danger font-semibold mb-2 flex items-center gap-2",children:[i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Unrealistic Goals Detected"]}),i.jsx("p",{className:"text-sm text-text-secondary whitespace-pre-line",children:b}),i.jsx("p",{className:"text-xs text-text-muted mt-3",children:"MOTUS cannot produce a plan with unrealistic goals. Please adjust your targets or extend your timeline."})]}),i.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Program Start Date"}),i.jsx("p",{className:"text-sm text-text-secondary mb-3",children:"When would you like to begin your program?"}),i.jsx("input",{type:"date",value:f.programStartDate,min:Is(),onChange:N=>m("programStartDate",N.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),i.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Leave blank to start today"})]}),i.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Nutrition Goal"}),w==="aesthetic"?i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"p-4 bg-accent-primary/20 border border-accent-primary rounded-lg",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("span",{className:"text-white font-medium",children:"Body Recomposition"}),i.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-primary/30 text-accent-primary rounded",children:"Optimal for Aesthetics"})]}),i.jsx("p",{className:"text-sm text-gray-300",children:"Simultaneously lose fat while building/maintaining muscle through strategic nutrition timing and macros."})]}),i.jsx("div",{className:"p-3 bg-dark-700 rounded-lg",children:i.jsxs("p",{className:"text-xs text-gray-400",children:[i.jsx("strong",{className:"text-gray-300",children:"Recomp Strategy:"})," Eat at maintenance calories with high protein (1g/lb bodyweight). Slight deficit on rest days, slight surplus on training days. This approach maximizes muscle retention while losing fat."]})})]}):i.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"maintain",label:"Maintain",desc:"Keep current weight"},{id:"recomp",label:"Recomp",desc:"Lose fat, keep muscle"},{id:"lose",label:"Lose Weight",desc:"Calorie deficit"},{id:"gain",label:"Gain Weight",desc:"Calorie surplus"}].map(N=>i.jsxs("button",{onClick:()=>m("nutritionGoal",N.id),className:`p-3 rounded-lg border text-left ${f.nutritionGoal===N.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[i.jsx("span",{className:"text-white font-medium",children:N.label}),i.jsx("p",{className:"text-xs text-gray-400",children:N.desc})]},N.id))}),w!=="aesthetic"&&f.nutritionGoal==="recomp"&&i.jsx("div",{className:"mt-3 p-3 bg-dark-700 rounded-lg",children:i.jsxs("p",{className:"text-xs text-gray-400",children:[i.jsx("strong",{className:"text-gray-300",children:"Recomp Strategy:"})," Eat at maintenance with high protein (1g/lb bodyweight). Slight deficit on rest days, slight surplus on training days."]})})]})]})}function Df({formData:f,addVacation:m,updateVacation:x,removeVacation:b}){return i.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Vacations & Time Off"}),i.jsx("p",{className:"text-gray-400",children:"Add planned time off so we can align deload weeks and adjust your program."})]}),f.vacations.length>0&&i.jsx("div",{className:"space-y-3",children:f.vacations.map((C,w)=>i.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg border border-dark-600",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("span",{className:"text-sm text-gray-400",children:["Trip #",w+1]}),i.jsx("button",{onClick:()=>b(C.id),className:"p-1 text-gray-500 hover:text-accent-danger",children:i.jsx(Pa,{className:"w-4 h-4"})})]}),i.jsx("input",{type:"text",value:C.name,onChange:k=>x(C.id,"name",k.target.value),placeholder:"Trip name",className:"w-full px-3 py-2 mb-3 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-text-muted",children:"Start Date"}),i.jsx("input",{type:"date",value:C.startDate,min:Is(),onChange:k=>x(C.id,"startDate",k.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-text-muted",children:"End Date"}),i.jsx("input",{type:"date",value:C.endDate,min:C.startDate||Is(),onChange:k=>x(C.id,"endDate",k.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"})]})]})]},C.id))}),i.jsxs("button",{onClick:m,className:"w-full p-4 border-2 border-dashed border-dark-500 rounded-lg hover:border-accent-primary transition-colors flex items-center justify-center gap-2 text-gray-400 hover:text-white",children:[i.jsx(Wi,{className:"w-5 h-5"}),"Add Time Off"]})]})}function Pf({formData:f,isGenerating:m,onGenerate:x}){const b=Bi.find(k=>k.id===f.programType),C=b?.subtypes.find(k=>k.id===f.programSubtype),w=()=>{if(f.programType==="endurance"&&f.raceDate){const k=new Date(f.raceDate),R=Math.ceil((k-new Date)/(10080*60*1e3)),N=[f.targetFinishHours,f.targetFinishMinutes,f.targetFinishSeconds].filter(Boolean).join(":");return`${R} weeks to race day${N?`  Target: ${N}`:""}`}return f.programType==="strength"?`${(f.strengthGoals||[]).filter(M=>M.target1RM&&M.current1RM).length} lift targets set`:f.programType==="aesthetic"&&f.targetBodyFat?`Target: ${f.targetBodyFat}% body fat`:f.programType==="fatloss"&&f.targetWeight?`~${Math.ceil((parseFloat(f.weight)-parseFloat(f.targetWeight))/f.weeklyWeightChange)} weeks to ${f.targetWeight} ${f.weightUnit}`:"Ongoing optimization"};return i.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Ready to Generate"}),i.jsx("p",{className:"text-gray-400",children:"Your AI-powered program will be optimized for your goals."})]}),i.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 space-y-4",children:[i.jsx("h3",{className:"font-semibold text-white",children:"Your Profile Summary"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Name"}),i.jsx("p",{className:"text-white font-medium",children:f.name})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Stats"}),i.jsxs("p",{className:"text-white font-medium",children:[f.weight," ",f.weightUnit,"  ",f.heightFeet,"'",f.heightInches,'"']})]})]}),i.jsx("hr",{className:"border-dark-600"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Primary Goal"}),i.jsxs("p",{className:"text-white font-medium",children:[b?.icon," ",b?.title,": ",C?.label]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Goal"}),i.jsx("p",{className:"text-accent-primary font-medium",children:w()})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Training Schedule"}),i.jsxs("p",{className:"text-white font-medium",children:[f.desiredTrainingDays," days/week"]})]}),f.enableHybrid&&f.secondaryProgramType&&i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Secondary Goal"}),i.jsxs("p",{className:"text-white font-medium",children:[Bi.find(k=>k.id===f.secondaryProgramType)?.icon," ",f.secondarySubtype]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Program Features"}),i.jsxs("ul",{className:"text-sm text-white mt-1 space-y-1",children:[i.jsx("li",{children:" Auto-periodization (Base  Build  Peak)"}),i.jsx("li",{children:" Progressive overload built-in"}),i.jsx("li",{children:" Deload weeks every 5 weeks"}),i.jsx("li",{children:" Dynamic adjustments based on progress"})]})]})]}),i.jsx(Qt,{fullWidth:!0,size:"lg",onClick:x,disabled:m,className:m?"animate-pulse":"",children:m?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"animate-spin mr-2",children:""}),"Generating Your Program..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Wc,{className:"w-5 h-5 mr-2"}),"Generate My Program"]})})]})}function y0(f){try{console.log("Generating fallback program with formData:",f);const m=yf(f);if(!m||!m.weeklySchedule)throw console.error("Fallback program generation returned invalid program:",m),new Error("Invalid program generated");return m}catch(m){return console.error("Error in generateFallbackProgram:",m),{name:`${f.programType||"Fitness"} Program`,description:"Your personalized training program",mesocycleWeeks:4,currentWeek:1,currentPhase:"Base",phases:["Base","Build","Peak","Deload"],primaryGoal:f.programType||"strength",primarySubtype:f.programSubtype||"general",daysPerWeek:f.desiredTrainingDays||4,weeklySchedule:[{day:1,dayName:"Monday",name:"Training Day 1",isRestDay:!1,isDeload:!1,sessions:[]},{day:2,dayName:"Tuesday",name:"Training Day 2",isRestDay:!1,isDeload:!1,sessions:[]},{day:3,dayName:"Wednesday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]},{day:4,dayName:"Thursday",name:"Training Day 3",isRestDay:!1,isDeload:!1,sessions:[]},{day:5,dayName:"Friday",name:"Training Day 4",isRestDay:!1,isDeload:!1,sessions:[]},{day:6,dayName:"Saturday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]},{day:7,dayName:"Sunday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]}],generatedAt:new Date().toISOString(),error:"Program generation failed - using minimal template"}}}function Bf(f){return i.jsx(Cf,{children:i.jsx(If,{...f})})}const Lf={running_easy:8,running_moderate:10,running_hard:12.5,running_sprint:15,cycling_easy:6,cycling_moderate:8,cycling_hard:12,swimming_easy:6,swimming_moderate:8,swimming_hard:10,walking:3.5,hiking:6,elliptical:5,rowing:7,jump_rope:11,stair_climbing:9,strength_light:3,strength_moderate:5,strength_vigorous:6,bodyweight:4,hiit:8,circuit_training:8,crossfit:8,yoga:2.5,pilates:3,stretching:2,rest:1},Ff={marathon:"running_moderate",running:"running_moderate",cycling:"cycling_moderate",swimming:"swimming_moderate",triathlon:"running_moderate",cardio:"elliptical",strength:"strength_moderate",bodybuilding:"strength_moderate",olympic:"strength_vigorous",bodyweight:"bodyweight",maintenance:"strength_light",hiit:"hiit",wellness:"strength_light",mobility:"yoga",functional:"circuit_training",active:"walking"};function Oa(f,m,x,b=7){const C=f*.453592;let w=Ff[m]||"strength_moderate",k=Lf[w]||5;const M=.85+(b-6)*.075;k*=M;const R=x/60;return Math.round(k*C*R)}function Gc(f,m="moderate",x=0){const C={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[m]||1.55,w=Math.round(f*C),k=w+x;return{bmr:Math.round(f),neat:Math.round(w-f),workoutCalories:x,totalDailyBurn:k,remaining:k}}function Uf(f,m,x=[],b=[],C=150){const{totalDailyBurn:w}=Gc(f,m,0),k=x.reduce((R,N)=>R+Oa(C,N.type,N.duration,N.rpe||7),0),M=b.reduce((R,N)=>R+Oa(C,N.type,N.duration||60,7),0);return w+k+M}function Wf({profile:f,program:m,meals:x,workouts:b,todaysMeals:C,todaysWorkouts:w,isSubscribed:k=!0,onLogMeal:M,onLogWorkout:R,onViewProgram:N,onViewNutrition:O,onShowPaywall:_}){const{macros:$,bmr:Z,tdee:G}=f,X=f.weightUnit==="kg"?f.weight/.453592:parseFloat(f.weight),le=C.reduce((H,U)=>({calories:H.calories+(U.calories||0),protein:H.protein+(U.protein||0),carbs:H.carbs+(U.carbs||0),fat:H.fat+(U.fat||0)}),{calories:0,protein:0,carbs:0,fat:0}),de=w.reduce((H,U)=>H+Oa(X,U.type||m?.primarySubtype||"strength",U.duration||60,U.overallRpe||7),0),ue=m?.startDate?new Date(m.startDate):null;ue&&ue.setHours(0,0,0,0);const ne=new Date;ne.setHours(0,0,0,0);const Q=!ue||ue<=ne,xe=ue&&ue.getTime()===ne.getTime(),oe=ue?Math.ceil((ue-ne)/(1e3*60*60*24)):0,Y=()=>{if(!m)return null;const{primaryGoal:H,primarySubtype:U,paces:P,baseline:W}=m;if(H==="endurance")return P?.goalPace?`Your goal: ${P.goalPace} pace for ${U}`:`Building your ${U} endurance`;if(H==="strength"&&W?.strength?.lifts?.length>0){const Ee=W.strength.lifts[0];return`Your goal: ${Ee.exercise} from ${Ee.current1RM}lbs  ${Ee.target1RM}lbs`}return H==="aesthetic"?`Building lean muscle with ${m.daysPerWeek} training days/week`:`${m.totalWeeks} weeks of structured training ahead`},me=new Date().getDay()||7,ce=Q?m?.weeklySchedule?.find(H=>H.day===me):null,ke=ce?.sessions||[],Ge=w.map(H=>H.sessionTime),te=ke.filter(H=>!Ge.includes(H.time)),K=Q&&ce&&!ce.isRestDay,ge=!K,B=Uf(Z||1800,f.activityLevel||"moderate",w.map(H=>({type:H.type||m?.primarySubtype,duration:H.duration,rpe:H.overallRpe})),K?te.map(H=>({type:H.type||m?.primarySubtype,duration:H.duration})):[],X),ye=Gc(Z||1800,f.activityLevel,K?de:0),fe=K?te.reduce((H,U)=>H+Oa(X,U.type||m?.primarySubtype,U.duration||60,7),0):0,he=le.calories-B;return i.jsxs("div",{className:"min-h-screen bg-dark-900 pb-24",children:[i.jsx("header",{className:"px-6 pt-8 pb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-text-muted text-sm font-medium uppercase tracking-wider mb-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),i.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:f.name?.split(" ")[0]||"Athlete"})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider",children:"Week"}),i.jsx("p",{className:"text-xl font-display font-bold text-accent-primary",children:m?.currentWeek||1})]})})]})}),i.jsxs("div",{className:"px-6 space-y-5",children:[i.jsx(Vt,{className:"bg-gradient-to-br from-dark-800 to-dark-900 border-accent-primary/20",children:i.jsxs(Xt,{className:"p-5",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-lg font-bold text-white mb-1",children:m?.name||"Your Program"}),i.jsxs("p",{className:"text-sm text-gray-400",children:[m?.totalWeeks," weeks  ",m?.daysPerWeek," days/week  ",m?.currentPhase||"Base"," phase"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:"Daily Target"}),i.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:$?.calories||G}),i.jsx("p",{className:"text-xs text-gray-500",children:"kcal"})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[i.jsxs("div",{className:"bg-dark-700/50 rounded-lg p-3 text-center",children:[i.jsxs("p",{className:"text-lg font-bold text-blue-400",children:[$?.protein||0,"g"]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Protein"})]}),i.jsxs("div",{className:"bg-dark-700/50 rounded-lg p-3 text-center",children:[i.jsxs("p",{className:"text-lg font-bold text-amber-400",children:[$?.carbs||0,"g"]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Carbs"})]}),i.jsxs("div",{className:"bg-dark-700/50 rounded-lg p-3 text-center",children:[i.jsxs("p",{className:"text-lg font-bold text-purple-400",children:[$?.fat||0,"g"]}),i.jsx("p",{className:"text-xs text-gray-500",children:"Fat"})]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400 bg-dark-700/30 rounded-lg p-3",children:[i.jsx(In,{className:"w-4 h-4 text-accent-primary flex-shrink-0"}),i.jsx("span",{children:Y()||`${m?.primarySubtype||"Training"} program with personalized progression`})]})]})}),k&&i.jsx(Vt,{hover:!0,onClick:O,className:"bg-gradient-to-r from-accent-success/10 to-accent-primary/10 border-accent-success/30",children:i.jsx(Xt,{className:"p-5",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-accent-success/20 flex items-center justify-center",children:i.jsx(ah,{className:"w-6 h-6 text-accent-success"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("h3",{className:"font-semibold text-white flex items-center gap-2",children:["Create Your Meal Plan",i.jsx(Wc,{className:"w-4 h-4 text-accent-primary"})]}),i.jsx("p",{className:"text-sm text-gray-400",children:"Get personalized recipes and a shopping list tailored to your goals"})]}),i.jsx(ni,{className:"w-5 h-5 text-gray-500"})]})})}),i.jsx(Vt,{hover:!0,onClick:O,className:"overflow-hidden",children:i.jsxs(Xt,{className:"p-0",children:[i.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-dark-600",children:[i.jsxs("h2",{className:"font-semibold text-white flex items-center gap-2",children:[i.jsx(Ui,{className:"w-5 h-5 text-accent-primary"}),"Energy Balance"]}),i.jsx(ni,{className:"w-5 h-5 text-dark-400"})]}),i.jsxs("div",{className:"grid grid-cols-3 divide-x divide-dark-600",children:[i.jsxs("div",{className:"p-4 text-center",children:[i.jsx(Ts,{className:"w-5 h-5 text-accent-danger mx-auto mb-2"}),i.jsx("p",{className:"font-display text-2xl font-bold text-white",children:ye.totalDailyBurn}),i.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mt-1",children:"Burned"})]}),i.jsxs("div",{className:"p-4 text-center bg-dark-700/50",children:[i.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mb-2",children:"Net"}),i.jsxs("p",{className:`font-display text-3xl font-bold ${he<0?"text-accent-success":"text-accent-primary"}`,children:[he>0?"+":"",he]}),i.jsx("p",{className:"text-xs text-text-muted mt-1",children:"kcal"})]}),i.jsxs("div",{className:"p-4 text-center",children:[i.jsx(ii,{className:"w-5 h-5 text-accent-success mx-auto mb-2"}),i.jsx("p",{className:"font-display text-2xl font-bold text-white",children:le.calories}),i.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mt-1",children:"Eaten"})]})]}),i.jsxs("div",{className:"px-5 py-4 space-y-3 border-t border-dark-600",children:[i.jsx(jc,{label:"Protein",current:le.protein,target:$.protein,color:"primary"}),i.jsx(jc,{label:"Carbs",current:le.carbs,target:$.carbs,color:"warning"}),i.jsx(jc,{label:"Fat",current:le.fat,target:$.fat,color:"secondary"})]}),i.jsx("div",{className:"px-5 py-3 bg-dark-700/30 border-t border-dark-600",children:i.jsxs("p",{className:"text-xs text-text-muted leading-relaxed",children:[i.jsx("span",{className:"text-accent-primary font-medium",children:"TDEE Estimate:"})," Based on your physiology (BMR: ",Math.round(Z||1800)," kcal) + activity level",K?` + today's workout burn (~${fe+de} kcal)`:"",".",ge&&i.jsx("span",{className:"text-gray-500",children:" No workout scheduled today."})," ","These macros are optimized for your ",i.jsx("span",{className:"text-white",children:f?.nutritionGoal||"performance"})," goal."]})})]})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs(Qt,{variant:"secondary",onClick:M,className:"py-4",children:[i.jsx(ii,{className:"w-5 h-5 mr-2"}),"Log Meal"]}),i.jsxs(Qt,{variant:"secondary",onClick:R,className:"py-4",children:[i.jsx(si,{className:"w-5 h-5 mr-2"}),"Log Workout"]})]}),i.jsx(Vt,{children:i.jsxs(Xt,{className:"p-0",children:[i.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-dark-600",children:[i.jsxs("h2",{className:"font-semibold text-white flex items-center gap-2",children:[i.jsx(si,{className:"w-5 h-5 text-accent-primary"}),"Today's Training"]}),de>0&&i.jsxs("span",{className:"text-sm text-text-muted",children:[i.jsx(Ui,{className:"w-4 h-4 inline mr-1 text-accent-danger"}),de," kcal"]})]}),i.jsx("div",{className:"p-5",children:xe?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-accent-primary/30 to-accent-secondary/30 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-accent-primary animate-pulse",children:i.jsx("span",{className:"text-5xl",children:""})}),i.jsx("h3",{className:"font-display text-2xl font-bold text-accent-primary mb-2",children:"Today is the Day!"}),i.jsxs("p",{className:"text-white font-semibold mb-3",children:["Week 1 of your ",m?.totalWeeks,"-week journey begins now"]}),i.jsx("p",{className:"text-sm text-text-secondary max-w-xs mx-auto",children:Y()})]}),i.jsx("div",{className:"bg-gradient-to-r from-accent-success/10 to-accent-primary/10 rounded-xl p-4 border border-accent-success/30",children:i.jsxs("p",{className:"text-center text-sm text-text-secondary",children:[i.jsx("span",{className:"text-accent-success font-semibold",children:"Stay the course"})," and this program will get you to your goal. Trust the process, show up every day, and the results will follow."]})}),ce&&!ce.isRestDay&&i.jsxs(Qt,{variant:"primary",className:"w-full",onClick:N,children:[i.jsx(qd,{className:"w-4 h-4 mr-2"}),"Start Your First Workout"]})]}):!Q&&ue?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center py-4",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-accent-primary/20 to-accent-secondary/20 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-accent-primary/30",children:i.jsx("span",{className:"text-4xl",children:""})}),i.jsxs("p",{className:"font-display text-3xl font-bold text-accent-primary mb-1",children:[oe," ",oe===1?"Day":"Days"]}),i.jsx("p",{className:"text-sm text-text-muted mb-2",children:"until your program begins"}),i.jsxs("p",{className:"text-white font-semibold",children:["Starting ",ue.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-xl p-4 border border-accent-primary/20",children:[i.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[i.jsx(Ts,{className:"w-4 h-4 text-accent-primary"}),"Prepare for Success"]}),i.jsxs("ul",{className:"space-y-3 text-sm",children:[i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:"Stock up on nutrition"}),i.jsx("p",{className:"text-text-muted",children:"Prepare your meals and snacks for week 1"})]})]}),i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:"Get quality sleep"}),i.jsx("p",{className:"text-text-muted",children:"Aim for 8+ hours to start fresh"})]})]}),i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:"Review your program"}),i.jsx("p",{className:"text-text-muted",children:"Familiarize yourself with week 1 workouts"})]})]}),i.jsxs("li",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-lg",children:""}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:"Set your intentions"}),i.jsx("p",{className:"text-text-muted",children:"Visualize your goals and commit fully"})]})]})]})]}),i.jsxs(Qt,{variant:"secondary",className:"w-full",onClick:N,children:[i.jsx(js,{className:"w-4 h-4 mr-2"}),"Preview Your Program"]})]}):ce&&!ce.isRestDay?i.jsx("div",{className:"space-y-3",children:ce.sessions?.map((H,U)=>{const P=w.some(Ee=>Ee.sessionTime===H.time),W=Oa(X,H.type||m?.primarySubtype,H.duration||60,7);return i.jsxs("div",{className:`p-4 rounded-xl border transition-all ${P?"bg-accent-success/5 border-accent-success/20":"bg-dark-700 border-dark-600 hover:border-dark-500"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${H.time==="AM"?"bg-accent-primary/10 text-accent-primary":"bg-blue-500/10 text-blue-400"}`,children:H.time}),i.jsx("span",{className:"font-medium text-white",children:H.focus}),P&&i.jsx("span",{className:"text-accent-success text-sm",children:" Done"})]}),i.jsxs("span",{className:"text-sm text-text-muted",children:["~",W," kcal"]})]}),i.jsxs("p",{className:"text-sm text-text-secondary mb-3",children:[H.duration," min  ",H.exercises?.length||0," exercises"]}),!P&&i.jsxs(Qt,{variant:"primary",size:"sm",className:"w-full",onClick:N,children:[i.jsx(qd,{className:"w-4 h-4 mr-2"}),"Start Workout"]})]},U)})}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 bg-dark-700 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx("span",{className:"text-3xl",children:""})}),i.jsx("p",{className:"font-semibold text-white mb-1",children:"Rest Day"}),i.jsx("p",{className:"text-sm text-text-muted",children:"Recovery is when gains happen"})]})})]})}),i.jsx(Rh,{profile:f,program:m}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Vt,{children:i.jsxs(Xt,{className:"text-center py-5",children:[i.jsx("div",{className:"w-12 h-12 bg-accent-primary/10 rounded-xl flex items-center justify-center mx-auto mb-3",children:i.jsx(In,{className:"w-6 h-6 text-accent-primary"})}),i.jsx("p",{className:"font-display text-xl font-bold text-white",children:m?.currentPhase||"Base"}),i.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider mt-1",children:"Phase"})]})}),i.jsx(Vt,{children:i.jsxs(Xt,{className:"text-center py-5",children:[i.jsx("div",{className:"w-12 h-12 bg-accent-success/10 rounded-xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Rs,{className:"w-6 h-6 text-accent-success"})}),i.jsxs("p",{className:"font-display text-xl font-bold text-white",children:[w.length,"/",ke.length||0]}),i.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider mt-1",children:"Complete"})]})})]}),i.jsx(jh,{profile:f,program:m,meals:x,workouts:b,todaysMeals:C,todaysWorkouts:w}),i.jsx(Vt,{hover:!0,onClick:N,children:i.jsxs(Xt,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-xs text-accent-primary uppercase tracking-wider font-semibold mb-1",children:[m?.isHybrid&&"Hybrid  ",m?.athleteLevel||"Intermediate"]}),i.jsx("h3",{className:"font-semibold text-white text-lg",children:m?.name||"Your Program"}),i.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:["Week ",m?.currentWeek||1," of ",m?.mesocycleWeeks||4]})]}),i.jsx("div",{className:"w-10 h-10 bg-dark-700 rounded-xl flex items-center justify-center",children:i.jsx(js,{className:"w-5 h-5 text-text-secondary"})})]}),i.jsx("div",{className:"mt-4",children:i.jsx(Fi,{value:m?.currentWeek||1,max:m?.mesocycleWeeks||4,color:"primary",size:"sm"})})]})})]})]})}function jc({label:f,current:m,target:x,color:b}){const C=m>x;return i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-xs text-text-muted uppercase tracking-wide w-16",children:f}),i.jsx("div",{className:"flex-1",children:i.jsx(Fi,{value:m,max:x,color:C?"danger":b,size:"xs"})}),i.jsxs("span",{className:`text-sm tabular-nums ${C?"text-accent-danger":"text-white"}`,children:[m,i.jsxs("span",{className:"text-text-muted",children:["/",x,"g"]})]})]})}const zf=["","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Hf=(f,m,x,b,C)=>{if(!f||m===1)return f;const w=b?.[m-1]||"Base";b?.[m-2];const k=w==="Deload"||w==="Taper";return f.map(M=>{if(M.isRestDay)return{...M};const R=M.sessions?.map(N=>{const O=N.exercises?.map(_=>{let $={..._};if(k)_.sets&&typeof _.sets=="number"&&($.sets=Math.max(2,Math.floor(_.sets*.6))),_.rpe&&($.rpe=Math.max(5,_.rpe-2));else if(w==="Peak")_.rpe&&($.rpe=Math.min(10,_.rpe+.5));else if(w.includes("Build")){const Z=w==="Build 2"?1.15:1.08;_.sets&&typeof _.sets=="number"&&($.sets=Math.round(_.sets*Z))}return $.progression=_.progression?.replace(/Week \d+/g,`Week ${m}`),$});return{...N,exercises:O}});return{...M,sessions:R,isDeload:k}})},Gf=(f,m,x,b)=>{const C=x?.[f-1]||"Base",w=f>1?x?.[f-2]:null,k=w&&w!==C,M=C==="Deload"||C==="Taper",R=[];if(k&&R.push({type:"phase",icon:"",text:`New phase: ${w}  ${C}`}),M)R.push({type:"deload",icon:"",text:"Reduced volume (60%) - focus on recovery"});else if(C==="Peak"){let O="Peak intensity training";b?.primaryGoal==="endurance"?O="Peak intensity - race simulation workouts":b?.primaryGoal==="strength"?O="Peak intensity - test maxes and competition prep":b?.primaryGoal==="aesthetic"&&(O="Peak intensity - maximum pump and definition"),R.push({type:"peak",icon:"",text:O})}else C.includes("Build")&&f>1&&R.push({type:"progression",icon:"",text:"Volume increases ~5% from last week"});if(b?.primaryGoal==="endurance"){const O=b?.baseline?.endurance?.currentMileage||20,_=b?.athleteLevel==="elite"?60:50;let $;M?$=Math.round(O*Math.pow(1.05,f-2)*.7):C==="Taper"?$=Math.round(_*.6):$=Math.min(Math.round(O*Math.pow(1.05,f-1)),_),R.push({type:"mileage",icon:"",text:`Target mileage: ~${$} miles`})}const N={1:"Establish baseline, focus on form",2:"Build consistency, dial in paces",3:"First small volume increase",4:"Recovery week - let adaptations settle"};return f<=4&&N[f]&&R.push({type:"goal",icon:"",text:N[f]}),{weekNumber:f,totalWeeks:m,phase:C,changes:R,isDeload:M}},Vf=f=>{const m=f?.primaryGoal||"aesthetic",x=[{icon:"",title:"Stretching & Mobility",description:"15-20 min of dynamic stretching or yoga",detail:"Focus on areas worked yesterday"},{icon:"",title:"Light Walk",description:"20-30 min easy walk outdoors",detail:"Promotes blood flow without stress"},{icon:"",title:"Hydration",description:"Drink 3-4L water with electrolytes",detail:"Sodium, potassium, magnesium for recovery",priority:!0},{icon:"",title:"Sleep",description:"Get 8+ hours of quality sleep",detail:"Most recovery happens during deep sleep",priority:!0},{icon:"",title:"Nutrition",description:"Eat at maintenance or slight surplus",detail:"Prioritize protein (1g/lb) for repair",priority:!0}];return m==="endurance"?[...x,{icon:"",title:"Cold Therapy",description:"10-15 min ice bath or cold shower",detail:"Reduces inflammation from high mileage"},{icon:"",title:"Foam Rolling",description:"10 min on calves, quads, IT band",detail:"Breaks up adhesions, improves mobility"},{icon:"",title:"Compression",description:"Wear compression socks/sleeves",detail:"Promotes circulation and reduces swelling"}]:m==="strength"?[...x,{icon:"",title:"Sauna",description:"15-20 min at 170-190F",detail:"Increases blood flow, promotes recovery"},{icon:"",title:"Self-Massage",description:"Lacrosse ball on tight areas",detail:"Target shoulders, hips, and back"},{icon:"",title:"Contrast Therapy",description:"3 min hot / 1 min cold, repeat 3x",detail:"Flushes metabolic waste from muscles"}]:m==="aesthetic"?[...x,{icon:"",title:"Sauna",description:"15-20 min for recovery",detail:"Also supports fat loss through heat exposure"},{icon:"",title:"Yoga Flow",description:"20-30 min gentle yoga",detail:"Mind-muscle connection, flexibility"}]:m==="fatloss"?[...x,{icon:"",title:"LISS Cardio",description:"30-45 min walk or light bike",detail:"Burns extra calories without cortisol spike"},{icon:"",title:"Cold Exposure",description:"2-5 min cold shower",detail:"Activates brown fat, boosts metabolism"}]:x};function Xf({program:f,completedWorkouts:m,onCompleteExercise:x,onCompleteSession:b,onUpdateExerciseLog:C,onBack:w}){const[k,M]=we.useState(1),[R,N]=we.useState(0),[O,_]=we.useState(f?.currentWeek||1),[$,Z]=we.useState(null),[G,X]=we.useState({sets:"",reps:"",weight:"",notes:""}),le=f?.totalWeeks||f?.mesocycleWeeks||12,de=f?.phases||[],ue=f?.startDate?new Date(f.startDate):new Date;ue.getDay();const ne=U=>{const P=new Date(ue);return P.setDate(P.getDate()+(U-1)*7),P},Q=U=>{const P=ne(O),W=U-1,Ee=new Date(P);return Ee.setDate(Ee.getDate()+W),Ee},xe=U=>U.toLocaleDateString("en-US",{month:"short",day:"numeric"}),oe=()=>{const U=ne(O),P=new Date(U);return P.setDate(P.getDate()+6),`${xe(U)}  ${xe(P)}`},Y=we.useMemo(()=>O===1||O===f?.currentWeek?f?.weeklySchedule:Hf(f?.weeklySchedule,O,le,de),[O,f?.weeklySchedule,le,de]),me=Y?.find(U=>U.day===k),ce=we.useMemo(()=>Gf(O,le,de,f),[O,le,de,f]),ke=(U,P)=>O!==f?.currentWeek?!1:m.some(W=>W.day===k&&W.sessionIndex===U&&W.completedExercises?.includes(P)),Ge=(U,P)=>m.find(Ee=>Ee.day===k&&Ee.sessionIndex===U)?.exerciseLogs?.[P]||null,te=U=>{const P=me?.sessions?.[U];return P?.exercises?P.exercises.every((W,Ee)=>ke(U,Ee)):!1},K=(U,P,W)=>{const Ee=Ge(U,P);Z({sessionIdx:U,exIdx:P}),X({sets:Ee?.sets||W.sets||"",reps:Ee?.reps||W.reps||"",weight:Ee?.weight||W.startingWeight||"",notes:Ee?.notes||""})},ge=()=>{$&&C&&C(k,$.sessionIdx,$.exIdx,G),Z(null),X({sets:"",reps:"",weight:"",notes:""})},B=U=>{b&&b(k,U)},ye=O>1,fe=O<le,he=O>(f?.currentWeek||1);O<(f?.currentWeek||1);const H=Vf(f);return i.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[i.jsx("header",{className:"px-6 py-4 bg-dark-800 border-b border-dark-700",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:w,className:"p-2 rounded-lg hover:bg-dark-700",children:i.jsx(Da,{className:"w-6 h-6 text-white"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h1",{className:"text-xl font-bold text-white",children:f?.name||"Your Program"}),i.jsxs("p",{className:"text-gray-400 text-sm",children:[f?.currentPhase," Phase"]})]})]})}),i.jsxs("div",{className:"px-6 py-3 bg-dark-800/50 border-b border-dark-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:()=>ye&&_(U=>U-1),disabled:!ye,className:`p-2 rounded-lg ${ye?"hover:bg-dark-700 text-white":"text-gray-600 cursor-not-allowed"}`,children:i.jsx(Da,{className:"w-5 h-5"})}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(js,{className:"w-5 h-5 text-accent-primary"}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-lg font-bold text-white",children:["Week ",O]}),i.jsxs("span",{className:"text-gray-400 text-sm",children:[" of ",le]}),O===f?.currentWeek&&i.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-primary rounded-full text-white",children:"Current"}),he&&i.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-secondary/50 rounded-full text-accent-secondary",children:"Preview"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:oe()})]})]}),i.jsx("button",{onClick:()=>fe&&_(U=>U+1),disabled:!fe,className:`p-2 rounded-lg ${fe?"hover:bg-dark-700 text-white":"text-gray-600 cursor-not-allowed"}`,children:i.jsx(ni,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"flex gap-1 mt-2 overflow-x-auto pb-1 scrollbar-thin",children:Array.from({length:le},(U,P)=>P+1).map(U=>{const P=de[U-1]||"Base",W={Base:{bg:"bg-blue-500/20",text:"text-blue-400",selected:"bg-blue-500"},Build:{bg:"bg-orange-500/20",text:"text-orange-400",selected:"bg-orange-500"},"Build 1":{bg:"bg-orange-500/20",text:"text-orange-400",selected:"bg-orange-500"},"Build 2":{bg:"bg-red-500/20",text:"text-red-400",selected:"bg-red-500"},Peak:{bg:"bg-purple-500/20",text:"text-purple-400",selected:"bg-purple-500"},Taper:{bg:"bg-cyan-500/20",text:"text-cyan-400",selected:"bg-cyan-500"},Deload:{bg:"bg-green-500/20",text:"text-green-400",selected:"bg-green-500"}},Ee=W[P]||W.Base,Re=U===O,Fe=U===f?.currentWeek,Ne=U<(f?.currentWeek||1);return i.jsx("button",{onClick:()=>_(U),className:`px-2 py-1 text-xs rounded-lg min-w-[28px] transition-all ${Re?`${Ee.selected} text-white font-medium`:Fe?`${Ee.bg} ${Ee.text} ring-1 ring-current`:Ne?"bg-dark-600/50 text-gray-500":`${Ee.bg} ${Ee.text} hover:opacity-80`}`,title:`Week ${U}: ${P}`,children:U},U)})}),i.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 text-[10px]",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Base"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Build"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Deload"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),"Peak"]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-cyan-500"}),"Taper"]})]})]}),ce.changes.length>0&&i.jsxs("div",{className:"px-6 py-3 bg-dark-800/30 border-b border-dark-700",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Rs,{className:"w-4 h-4 text-accent-secondary"}),i.jsxs("span",{className:"text-sm font-medium text-white",children:["Week ",O," Focus"]}),i.jsx("span",{className:"px-2 py-0.5 text-xs bg-dark-600 rounded-full text-gray-300",children:ce.phase})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:ce.changes.map((U,P)=>i.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-lg text-xs ${U.type==="deload"?"bg-green-500/20 text-green-400":U.type==="peak"?"bg-red-500/20 text-red-400":U.type==="phase"?"bg-accent-primary/20 text-accent-primary":"bg-dark-600 text-gray-300"}`,children:[i.jsx("span",{children:U.icon}),i.jsx("span",{children:U.text})]},P))})]}),he&&i.jsxs("div",{className:"mx-6 mt-3 p-3 bg-accent-secondary/10 border border-accent-secondary/30 rounded-lg flex items-start gap-2",children:[i.jsx(ql,{className:"w-4 h-4 text-accent-secondary mt-0.5 flex-shrink-0"}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-accent-secondary font-medium",children:"Preview Mode:"}),i.jsx("span",{className:"text-gray-400 ml-1",children:"This is a projected schedule. Actual workouts may adjust based on your progress."})]})]}),i.jsx("div",{className:"px-6 py-4 overflow-x-auto",children:i.jsx("div",{className:"flex gap-2 min-w-max",children:[1,2,3,4,5,6,7].map(U=>{const P=Y?.find(Qe=>Qe.day===U),W=P?.isRestDay,Ee=k===U,Re=P?.isDeload,Fe=Q(U),Ne=Fe.toDateString()===new Date().toDateString();return i.jsxs("button",{onClick:()=>M(U),className:`flex flex-col items-center px-3 py-2 rounded-xl min-w-[64px] transition-all ${Ee?"bg-accent-primary text-white":Ne?"bg-accent-primary/20 text-accent-primary ring-1 ring-accent-primary/50":Re?"bg-green-500/10 text-green-400 hover:bg-green-500/20":"bg-dark-700 text-gray-400 hover:bg-dark-600"} ${W&&!Ee&&!Ne?"opacity-50":""}`,children:[i.jsx("span",{className:"text-xs font-medium",children:zf[U]}),i.jsx("span",{className:`text-[10px] ${Ee?"text-white/80":Ne?"text-accent-primary/80":"text-gray-500"}`,children:Fe.getDate()}),i.jsx("span",{className:"text-lg font-bold mt-0.5",children:W?"":Re?"":""})]},U)})})}),i.jsx("div",{className:"px-6 py-4",children:me?.isRestDay?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center py-6",children:[i.jsx("span",{className:"text-5xl mb-3 block",children:""}),i.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:"Active Recovery Day"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Recovery is when adaptation happens. Make the most of it."})]}),i.jsxs("div",{className:"bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 rounded-xl p-4 border border-accent-primary/30",children:[i.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[i.jsx(fh,{className:"w-5 h-5 text-accent-primary"}),"Recovery Essentials"]}),i.jsx("div",{className:"space-y-3",children:H.filter(U=>U.priority).map((U,P)=>i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-xl",children:U.icon}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:U.title}),i.jsx("p",{className:"text-sm text-gray-300",children:U.description})]})]},P))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-semibold mb-3",children:"Recommended Activities"}),i.jsx("div",{className:"grid gap-3",children:H.filter(U=>!U.priority).map((U,P)=>i.jsx(Vt,{children:i.jsxs(Xt,{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-2xl",children:U.icon}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"text-white font-medium",children:U.title}),i.jsx("p",{className:"text-sm text-gray-400",children:U.description}),i.jsx("p",{className:"text-xs text-gray-500 mt-1",children:U.detail})]})]})},P))})]}),i.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-dark-600",children:[i.jsx("h3",{className:"text-white font-semibold mb-2",children:" Pro Tips"}),i.jsxs("ul",{className:"text-sm text-gray-400 space-y-2",children:[i.jsx("li",{children:" Avoid intense exercise - save it for training days"}),i.jsx("li",{children:" Listen to your body - if you feel sore, prioritize sleep"}),i.jsx("li",{children:" Mental recovery matters too - take time to destress"}),i.jsx("li",{children:" Prep meals for the week to stay on track"})]})]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-white",children:me?.name}),me?.sessions?.map((U,P)=>i.jsxs(Vt,{children:[i.jsx("button",{onClick:()=>N(R===P?-1:P),className:"w-full",children:i.jsx(Xt,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${U.time==="AM"?"bg-yellow-500/20":U.time==="PM"?"bg-blue-500/20":"bg-purple-500/20"}`,children:i.jsx("span",{className:"text-2xl",children:U.type==="strength"||U.type==="hypertrophy"?"":U.type==="endurance"?"":""})}),i.jsxs("div",{className:"text-left",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[(U.time==="AM"||U.time==="PM")&&i.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${U.time==="AM"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:U.time}),i.jsx("h3",{className:"font-semibold text-white",children:U.focus})]}),i.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-400",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Uc,{className:"w-4 h-4"}),U.duration," min"]}),i.jsxs("span",{children:[U.exercises?.length," exercises"]})]})]})]}),i.jsx(ni,{className:`w-5 h-5 text-gray-400 transition-transform ${R===P?"rotate-90":""}`})]})})}),R===P&&i.jsxs("div",{className:"px-5 pb-5 space-y-3",children:[i.jsx("hr",{className:"border-dark-600"}),U.exercises?.map((W,Ee)=>{const Re=ke(P,Ee),Fe=Ge(P,Ee),Ne=$?.sessionIdx===P&&$?.exIdx===Ee;return i.jsx("div",{className:`p-4 rounded-lg border ${Re?"bg-accent-success/10 border-accent-success/30":"bg-dark-700 border-dark-600"}`,children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[i.jsx("h4",{className:"font-medium text-white",children:W.name}),Re&&i.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-accent-success/20 rounded-full",children:[i.jsx(Fn,{className:"w-3 h-3 text-accent-success"}),i.jsx("span",{className:"text-xs text-accent-success font-medium",children:"Done"})]})]}),Ne?i.jsxs("div",{className:"mt-3 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Sets"}),i.jsx("input",{type:"text",value:G.sets,onChange:Qe=>X({...G,sets:Qe.target.value}),placeholder:W.sets||"Sets",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Reps"}),i.jsx("input",{type:"text",value:G.reps,onChange:Qe=>X({...G,reps:Qe.target.value}),placeholder:W.reps||"Reps",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Weight"}),i.jsx("input",{type:"text",value:G.weight,onChange:Qe=>X({...G,weight:Qe.target.value}),placeholder:W.startingWeight||"Weight",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Notes (optional)"}),i.jsx("input",{type:"text",value:G.notes,onChange:Qe=>X({...G,notes:Qe.target.value}),placeholder:"How did it feel? Any adjustments?",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("button",{onClick:ge,className:"flex items-center gap-1 px-3 py-1.5 bg-accent-success text-white rounded-lg text-sm font-medium hover:bg-accent-success/80",children:[i.jsx(wh,{className:"w-4 h-4"}),"Save"]}),i.jsxs("button",{onClick:()=>Z(null),className:"flex items-center gap-1 px-3 py-1.5 bg-dark-600 text-gray-400 rounded-lg text-sm hover:bg-dark-500",children:[i.jsx(Ba,{className:"w-4 h-4"}),"Cancel"]})]})]}):i.jsxs(i.Fragment,{children:[Fe&&i.jsxs("div",{className:"mt-2 p-2 bg-accent-primary/10 rounded-lg border border-accent-primary/20",children:[i.jsx("span",{className:"text-xs text-accent-primary font-medium",children:"Logged: "}),i.jsxs("span",{className:"text-sm text-white",children:[Fe.sets&&`${Fe.sets} sets`,Fe.reps&&`  ${Fe.reps}`,Fe.weight&&` @ ${Fe.weight}`]}),Fe.notes&&i.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:['"',Fe.notes,'"']})]}),i.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-sm",children:[W.sets&&i.jsxs("span",{className:"text-gray-400",children:[i.jsx("span",{className:"text-white font-medium",children:W.sets})," sets"]}),W.reps&&i.jsx("span",{className:"text-gray-400",children:i.jsx("span",{className:"text-white font-medium",children:W.reps})}),W.startingWeight&&i.jsxs("span",{className:"text-gray-400",children:["Target ",i.jsx("span",{className:"text-accent-primary font-medium",children:W.startingWeight})]}),W.rpe&&i.jsxs("span",{className:"text-gray-400",children:["RPE ",i.jsx("span",{className:"text-accent-warning font-medium",children:W.rpe})]}),W.pace&&i.jsxs("span",{className:"text-gray-400",children:["Pace ",i.jsx("span",{className:"text-accent-primary font-medium",children:W.pace})]}),W.heartRateZone&&i.jsxs("span",{className:"text-gray-400",children:["Zone ",i.jsx("span",{className:"text-red-400 font-medium",children:W.heartRateZone})]}),W.rest&&i.jsxs("span",{className:"text-gray-400",children:["Rest ",i.jsx("span",{className:"text-white",children:W.rest})]})]}),(W.current1RM||W.target1RM)&&i.jsxs("div",{className:"flex gap-4 mt-2 text-xs",children:[W.current1RM&&i.jsxs("span",{className:"text-gray-500",children:["Current 1RM: ",i.jsx("span",{className:"text-gray-300",children:W.current1RM})]}),W.target1RM&&i.jsxs("span",{className:"text-gray-500",children:["Target 1RM: ",i.jsx("span",{className:"text-accent-secondary",children:W.target1RM})]})]}),W.notes&&i.jsxs("p",{className:"mt-2 text-sm text-gray-500 italic",children:[" ",W.notes]}),W.progression&&i.jsxs("p",{className:"mt-1 text-xs text-accent-secondary",children:[" ",W.progression]})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[!Ne&&O===f?.currentWeek&&i.jsx("button",{onClick:()=>K(P,Ee,W),className:"p-2 rounded-lg text-gray-500 hover:text-accent-primary hover:bg-dark-600 transition-colors",title:"Log actual performance",children:i.jsx(gh,{className:"w-5 h-5"})}),!Ne&&i.jsx("button",{onClick:()=>x(k,P,Ee),className:`p-2 rounded-lg transition-colors ${Re?"text-accent-success":"text-gray-500 hover:text-white hover:bg-dark-600"}`,title:Re?"Mark incomplete":"Mark complete",children:Re?i.jsx(Fn,{className:"w-6 h-6"}):i.jsx(dh,{className:"w-6 h-6"})})]})]})},Ee)}),te(P)?i.jsxs("div",{className:"mt-4 p-3 bg-accent-success/20 rounded-lg border border-accent-success/30 text-center",children:[i.jsx(Fn,{className:"w-5 h-5 text-accent-success inline mr-2"}),i.jsx("span",{className:"text-accent-success font-medium",children:"Session Complete!"})]}):i.jsxs(Qt,{fullWidth:!0,variant:"success",className:"mt-4",onClick:()=>B(P),children:[i.jsx(Ts,{className:"w-4 h-4 mr-2"}),"Complete All Exercises"]})]})]},P))]})})]})}function Yf({profile:f,meals:m,workouts:x,onLogMeal:b,onDeleteMeal:C,onBack:w}){const[k,M]=we.useState(new Date),[R,N]=we.useState(!1),{macros:O,bmr:_,tdee:$}=f,Z=f.weightUnit==="kg"?f.weight/.453592:parseFloat(f.weight),G=k.toISOString().split("T")[0],X=m.filter(Y=>Y.loggedAt?.startsWith(G)||Y.createdAt?.startsWith(G)),le=x.filter(Y=>Y.loggedAt?.startsWith(G)||Y.completedAt?.startsWith(G)),de=X.reduce((Y,me)=>({calories:Y.calories+(me.calories||0),protein:Y.protein+(me.protein||0),carbs:Y.carbs+(me.carbs||0),fat:Y.fat+(me.fat||0),fiber:Y.fiber+(me.fiber||0),sugar:Y.sugar+(me.sugar||0),sodium:Y.sodium+(me.sodium||0)}),{calories:0,protein:0,carbs:0,fat:0,fiber:0,sugar:0,sodium:0}),ue=le.reduce((Y,me)=>Y+(me.caloriesBurned||200),0),ne=Gc(_||1800,f.activityLevel,ue),Q=Zf(f,ne.totalDailyBurn),xe=Y=>{const me=new Date(k);me.setDate(me.getDate()+Y),M(me)},oe=k.toISOString().split("T")[0]===new Date().toISOString().split("T")[0];return i.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[i.jsxs("header",{className:"px-6 py-5 bg-dark-800 border-b border-dark-700",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[w&&i.jsx("button",{onClick:w,className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:i.jsx(Da,{className:"w-5 h-5 text-white"})}),i.jsx("div",{children:i.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(Ui,{className:"w-6 h-6 text-accent-warning"}),"Nutrition"]})})]}),i.jsxs(Qt,{size:"sm",onClick:b,children:[i.jsx(Wi,{className:"w-4 h-4 mr-1"}),"Log Meal"]})]}),i.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4",children:[i.jsx("button",{onClick:()=>xe(-1),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:i.jsx(Da,{className:"w-5 h-5 text-gray-400"})}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-white font-medium",children:oe?"Today":k.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})}),i.jsx("button",{onClick:()=>xe(1),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",disabled:oe,children:i.jsx(ni,{className:`w-5 h-5 ${oe?"text-gray-600":"text-gray-400"}`})})]})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsx(Vt,{children:i.jsxs(Xt,{children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx(Ts,{className:"w-5 h-5 text-accent-danger mx-auto mb-1"}),i.jsx("p",{className:"text-xl font-bold text-white",children:ne.totalDailyBurn}),i.jsx("p",{className:"text-xs text-gray-400",children:"Burned"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Net"}),i.jsxs("p",{className:`text-2xl font-bold ${de.calories-ne.totalDailyBurn<0?"text-accent-success":"text-accent-warning"}`,children:[de.calories-ne.totalDailyBurn>0?"+":"",de.calories-ne.totalDailyBurn]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx(In,{className:"w-5 h-5 text-accent-success mx-auto mb-1"}),i.jsx("p",{className:"text-xl font-bold text-white",children:de.calories}),i.jsx("p",{className:"text-xs text-gray-400",children:"Consumed"})]})]}),i.jsx("div",{className:"h-px bg-dark-600 my-4"}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[i.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[i.jsx("p",{className:"text-gray-400",children:"BMR"}),i.jsx("p",{className:"text-white font-medium",children:ne.bmr})]}),i.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[i.jsx("p",{className:"text-gray-400",children:"Activity"}),i.jsx("p",{className:"text-white font-medium",children:ne.neat})]}),i.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[i.jsx("p",{className:"text-gray-400",children:"Workouts"}),i.jsx("p",{className:"text-white font-medium",children:ue})]})]})]})}),i.jsx(Vt,{children:i.jsxs(Xt,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[i.jsx(In,{className:"w-5 h-5 text-accent-primary"}),"Recommended Intake"]}),i.jsxs("span",{className:"text-xs text-gray-400 px-2 py-1 bg-dark-700 rounded",children:[f.nutritionGoal==="maintain"&&"Maintain",f.nutritionGoal==="recomp"&&"Recomp",f.nutritionGoal==="lose"&&"Weight Loss",f.nutritionGoal==="gain"&&"Weight Gain"]})]}),i.jsx("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-lg mb-4",children:i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold text-white",children:Q.calories}),i.jsx("p",{className:"text-sm text-gray-400",children:"Recommended daily calories"})]})}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[i.jsxs("p",{className:"text-lg font-bold text-accent-success",children:[Q.protein,"g"]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Protein"}),i.jsxs("p",{className:"text-xs text-gray-500",children:[Q.proteinPerLb,"g/lb"]})]}),i.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[i.jsxs("p",{className:"text-lg font-bold text-accent-warning",children:[Q.carbs,"g"]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),i.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[i.jsxs("p",{className:"text-lg font-bold text-accent-secondary",children:[Q.fat,"g"]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-3 flex items-start gap-1",children:[i.jsx(j0,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),"Based on your ",f.nutritionGoal," goal and estimated ",ne.totalDailyBurn," daily calorie burn"]})]})}),i.jsx(Vt,{children:i.jsxs(Xt,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h2",{className:"text-lg font-semibold text-white",children:"Today's Macros"}),i.jsx("button",{onClick:()=>N(!R),className:"text-sm text-accent-primary",children:R?"Simple View":"Detailed View"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(Rc,{label:"Protein",current:de.protein,target:Q.protein,color:"success",calories:de.protein*4}),i.jsx(Rc,{label:"Carbohydrates",current:de.carbs,target:Q.carbs,color:"warning",calories:de.carbs*4}),i.jsx(Rc,{label:"Fat",current:de.fat,target:Q.fat,color:"secondary",calories:de.fat*9})]}),R&&i.jsxs("div",{className:"mt-6 pt-4 border-t border-dark-600",children:[i.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-3",children:"Additional Nutrients"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(Zl,{label:"Fiber",value:de.fiber,target:30,unit:"g"}),i.jsx(Zl,{label:"Sugar",value:de.sugar,target:50,unit:"g",warn:!0}),i.jsx(Zl,{label:"Sodium",value:de.sodium,target:2300,unit:"mg",warn:!0}),i.jsx(Zl,{label:"Water",value:Math.round(Z*.5),target:Math.round(Z*.67),unit:"oz"})]})]}),i.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-600",children:[i.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Calorie Distribution"}),i.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden bg-dark-600",children:[i.jsx("div",{className:"bg-accent-success",style:{width:`${de.calories>0?de.protein*4/de.calories*100:0}%`}}),i.jsx("div",{className:"bg-accent-warning",style:{width:`${de.calories>0?de.carbs*4/de.calories*100:0}%`}}),i.jsx("div",{className:"bg-accent-secondary",style:{width:`${de.calories>0?de.fat*9/de.calories*100:0}%`}})]}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[i.jsxs("span",{children:["P: ",de.calories>0?Math.round(de.protein*4/de.calories*100):0,"%"]}),i.jsxs("span",{children:["C: ",de.calories>0?Math.round(de.carbs*4/de.calories*100):0,"%"]}),i.jsxs("span",{children:["F: ",de.calories>0?Math.round(de.fat*9/de.calories*100):0,"%"]})]})]})]})}),i.jsxs("div",{children:[i.jsxs("h2",{className:"text-lg font-semibold text-white mb-3",children:["Meals (",X.length,")"]}),X.length>0?i.jsx("div",{className:"space-y-3",children:X.map(Y=>i.jsx(Vt,{children:i.jsx(Xt,{className:"p-4",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-medium text-white",children:Y.name||"Meal"}),i.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 mt-2 text-sm",children:[i.jsxs("span",{className:"text-white font-medium",children:[Y.calories," kcal"]}),i.jsxs("span",{className:"text-accent-success",children:["P: ",Y.protein,"g"]}),i.jsxs("span",{className:"text-accent-warning",children:["C: ",Y.carbs,"g"]}),i.jsxs("span",{className:"text-accent-secondary",children:["F: ",Y.fat,"g"]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(Y.loggedAt||Y.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),Y.screenshot&&i.jsx("img",{src:Y.screenshot,alt:"Meal",className:"w-14 h-14 object-cover rounded-lg ml-3"}),i.jsx("button",{onClick:()=>C&&C(Y.id),className:"p-2 text-gray-500 hover:text-accent-danger ml-2",children:i.jsx(Pa,{className:"w-4 h-4"})})]})})},Y.id))}):i.jsx(Vt,{children:i.jsxs(Xt,{className:"text-center py-8",children:[i.jsx("span",{className:"text-4xl mb-2 block",children:""}),i.jsx("p",{className:"text-gray-400",children:"No meals logged yet"}),i.jsxs(Qt,{variant:"secondary",size:"sm",className:"mt-4",onClick:b,children:[i.jsx(Wi,{className:"w-4 h-4 mr-1"}),"Log Your First Meal"]})]})})]})]})]})}function Zf(f,m){const x=f.weightUnit==="kg"?f.weight/.453592:parseFloat(f.weight);let b,C,w;switch(f.nutritionGoal){case"maintain":b=m,w=.8,C=Math.round(x*w);break;case"recomp":b=m,w=1,C=Math.round(x*w);break;case"lose":const O=(f.weeklyWeightChange||.5)*500;b=Math.round(m-O),w=1,C=Math.round(x*w);break;case"gain":const _=(f.weeklyWeightChange||.5)*500;b=Math.round(m+_),w=.9,C=Math.round(x*w);break;default:b=m,w=.8,C=Math.round(x*w)}const k=C*4,M=b-k,R=Math.round(M*.3/9),N=Math.round(M*.7/4);return{calories:b,protein:C,proteinPerLb:w,carbs:N,fat:R}}function Rc({label:f,current:m,target:x,color:b,calories:C}){const w=m>x;return i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-gray-400",children:f}),i.jsxs("div",{className:"text-right",children:[i.jsxs("span",{className:`font-medium ${w?"text-accent-danger":"text-white"}`,children:[m,"g"]}),i.jsxs("span",{className:"text-gray-500",children:[" / ",x,"g"]}),i.jsxs("span",{className:"text-gray-600 text-xs ml-2",children:["(",C," kcal)"]})]})]}),i.jsx(Fi,{value:m,max:x,color:w?"danger":b,size:"sm"})]})}function Zl({label:f,value:m,target:x,unit:b,warn:C=!1}){const w=m/x*100,k=m>x;return i.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-gray-400",children:f}),i.jsxs("span",{className:`font-medium ${C&&k?"text-accent-danger":"text-white"}`,children:[m,b]})]}),i.jsx("div",{className:"mt-1 h-1 bg-dark-600 rounded-full overflow-hidden",children:i.jsx("div",{className:`h-full rounded-full ${C&&k?"bg-accent-danger":"bg-accent-primary"}`,style:{width:`${Math.min(w,100)}%`}})})]})}function Kf({profile:f,program:m,meals:x,workouts:b}){const C=new Date,w=new Date(C);w.setDate(C.getDate()-C.getDay()),w.setHours(0,0,0,0);const k=x.filter(Z=>new Date(Z.loggedAt||Z.createdAt)>=w),M=b.filter(Z=>new Date(Z.loggedAt||Z.completedAt)>=w),R=k.length?Math.round(k.reduce((Z,G)=>Z+(G.calories||0),0)/Math.min(7,k.length)):0,N=k.length?Math.round(k.reduce((Z,G)=>Z+(G.protein||0),0)/Math.min(7,k.length)):0,O=f.daysPerWeek||4,_=Math.min(Math.round(M.length/O*100),100),$=M.reduce((Z,G)=>Z+(G.exercises?.reduce((X,le)=>X+(parseInt(le.sets)||0),0)||0),0);return i.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[i.jsxs("header",{className:"px-6 py-5 bg-dark-800 border-b border-dark-700",children:[i.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[i.jsx(Lc,{className:"w-6 h-6 text-accent-primary"}),"Stats & Progress"]}),i.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"This week's overview"})]}),i.jsxs("div",{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(Vt,{children:i.jsxs(Xt,{className:"text-center",children:[i.jsx(si,{className:"w-8 h-8 text-accent-primary mx-auto mb-2"}),i.jsx("div",{className:"text-3xl font-bold text-white",children:M.length}),i.jsx("p",{className:"text-sm text-gray-400",children:"Workouts"}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["of ",O," planned"]})]})}),i.jsx(Vt,{children:i.jsxs(Xt,{className:"text-center",children:[i.jsx(In,{className:"w-8 h-8 text-accent-success mx-auto mb-2"}),i.jsxs("div",{className:"text-3xl font-bold text-white",children:[_,"%"]}),i.jsx("p",{className:"text-sm text-gray-400",children:"Adherence"})]})})]}),i.jsx(Vt,{children:i.jsxs(Xt,{children:[i.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[i.jsx(Rs,{className:"w-5 h-5 text-accent-primary"}),"Training Progress"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Program Week"}),i.jsxs("span",{className:"text-white font-medium",children:[m?.currentWeek||1," of ",m?.mesocycleWeeks||4]})]}),i.jsx(Fi,{value:m?.currentWeek||1,max:m?.mesocycleWeeks||4,color:"primary"}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[i.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[i.jsx("p",{className:"text-2xl font-bold text-white",children:$}),i.jsx("p",{className:"text-xs text-gray-400",children:"Weekly Sets"})]}),i.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[i.jsx("p",{className:"text-2xl font-bold text-white",children:M.length>0?Math.round(M.reduce((Z,G)=>Z+(G.duration||0),0)/M.length):0}),i.jsx("p",{className:"text-xs text-gray-400",children:"Avg Duration"})]})]})]})]})}),i.jsx(Vt,{children:i.jsxs(Xt,{children:[i.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[i.jsx(Ui,{className:"w-5 h-5 text-accent-warning"}),"Nutrition Averages"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{className:"text-gray-400",children:"Avg Daily Calories"}),i.jsxs("span",{className:"text-white",children:[R," / ",f.macros?.calories]})]}),i.jsx(Fi,{value:R,max:f.macros?.calories||2e3,color:R>(f.macros?.calories||2e3)?"danger":"warning",size:"sm"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between mb-1",children:[i.jsx("span",{className:"text-gray-400",children:"Avg Daily Protein"}),i.jsxs("span",{className:"text-white",children:[N,"g / ",f.macros?.protein,"g"]})]}),i.jsx(Fi,{value:N,max:f.macros?.protein||150,color:"success",size:"sm"})]}),i.jsxs("div",{className:"pt-2 text-sm text-gray-500",children:["Based on ",k.length," logged meals"]})]})]})}),i.jsx(Vt,{children:i.jsxs(Xt,{children:[i.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[i.jsx(js,{className:"w-5 h-5 text-accent-secondary"}),"Mesocycle Progress"]}),i.jsx("div",{className:"flex gap-2",children:m?.phases?.map((Z,G)=>{const X=Z===m.currentPhase,le=m.phases.indexOf(m.currentPhase)>G;return i.jsx("div",{className:`flex-1 p-3 rounded-lg text-center text-sm ${X?"bg-accent-primary text-white":le?"bg-accent-success/20 text-accent-success":"bg-dark-700 text-gray-500"}`,children:Z},Z)})})]})})]})]})}const qf=f=>!f||f<1?"Beginner":f<2?"Novice":f<4?"Intermediate":f<7?"Advanced":"Expert",Qf=f=>f?f.charAt(0).toUpperCase()+f.slice(1):"";function $f({profile:f,program:m,onResetSetup:x}){const{macros:b}=f,C={strength:" Strength",bodybuilding:" Bodybuilding",endurance:" Endurance",fatloss:" Fat Loss",marathon:" Marathon",general:" General"};return i.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[i.jsx("header",{className:"px-6 py-8 bg-gradient-to-b from-accent-primary/20 to-dark-900",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-20 h-20 bg-accent-primary rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-3xl",children:f.name?f.name.charAt(0).toUpperCase():""})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:f.name||"Athlete"}),i.jsxs("p",{className:"text-gray-400",children:[qf(f.yearsTraining)," Level"]})]})]})}),i.jsxs("div",{className:"px-6 py-4 space-y-4",children:[i.jsx(Vt,{children:i.jsxs(Xt,{children:[i.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[i.jsx(_0,{className:"w-5 h-5 text-accent-secondary"}),"Body Stats"]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[i.jsx("p",{className:"text-2xl font-bold text-white",children:f.weight}),i.jsx("p",{className:"text-xs text-gray-400",children:f.weightUnit||"lbs"})]}),i.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[i.jsx("p",{className:"text-2xl font-bold text-white",children:f.heightUnit==="metric"?f.heightCm:`${f.heightFeet}'${f.heightInches}"`}),i.jsx("p",{className:"text-xs text-gray-400",children:f.heightUnit==="metric"?"cm":"imperial"})]}),i.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[i.jsx("p",{className:"text-2xl font-bold text-white",children:f.age}),i.jsx("p",{className:"text-xs text-gray-400",children:"years"})]})]})]})}),i.jsx(Vt,{children:i.jsxs(Xt,{children:[i.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[i.jsx(Ui,{className:"w-5 h-5 text-accent-warning"}),"Daily Nutrition Targets"]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[i.jsx("p",{className:"text-3xl font-bold text-white",children:b?.calories}),i.jsx("p",{className:"text-sm text-gray-400",children:"Calories"})]}),i.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[i.jsxs("p",{className:"text-3xl font-bold text-accent-success",children:[b?.protein,"g"]}),i.jsx("p",{className:"text-sm text-gray-400",children:"Protein"})]}),i.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[i.jsxs("p",{className:"text-3xl font-bold text-accent-warning",children:[b?.carbs,"g"]}),i.jsx("p",{className:"text-sm text-gray-400",children:"Carbs"})]}),i.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[i.jsxs("p",{className:"text-3xl font-bold text-accent-secondary",children:[b?.fat,"g"]}),i.jsx("p",{className:"text-sm text-gray-400",children:"Fat"})]})]}),i.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["TDEE: ",f.tdee," kcal/day  BMR: ",f.bmr," kcal/day"]})]})}),i.jsx(Vt,{children:i.jsxs(Xt,{children:[i.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[i.jsx(In,{className:"w-5 h-5 text-accent-primary"}),"Training Goals"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[i.jsx("span",{className:"text-gray-400",children:"Primary"}),i.jsx("span",{className:"text-white font-medium",children:C[f.programSubtype]||Qf(f.programType)})]}),f.enableHybrid&&f.secondaryProgramType&&i.jsxs("div",{className:"flex items-center justify-between p-3 bg-accent-primary/10 border border-accent-primary/30 rounded-lg",children:[i.jsx("span",{className:"text-accent-primary",children:"Hybrid"}),i.jsxs("span",{className:"text-white",children:[" ",f.allowDoubleDays?"AM/PM Splits":"Alternating"]})]})]})]})}),i.jsx(Vt,{children:i.jsxs(Xt,{children:[i.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[i.jsx(js,{className:"w-5 h-5 text-accent-secondary"}),"Current Program"]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Program"}),i.jsx("span",{className:"text-white",children:m?.name||"Custom"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Week"}),i.jsxs("span",{className:"text-white",children:[m?.currentWeek," of ",m?.mesocycleWeeks]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Phase"}),i.jsx("span",{className:"text-white",children:m?.currentPhase})]})]})]})}),i.jsx("div",{className:"pt-4",children:i.jsxs(Qt,{variant:"secondary",fullWidth:!0,onClick:x,children:[i.jsx(yh,{className:"w-4 h-4 mr-2"}),"Reset & Start Over"]})}),i.jsx("p",{className:"text-center text-xs text-gray-600 pt-4",children:"MOTUS v1.0  Powered by Claude AI"})]})]})}const U0="https://world.openfoodfacts.org/api/v2",w0={g:1,gram:1,grams:1,kg:1e3,oz:28.3495,ounce:28.3495,ounces:28.3495,lb:453.592,pound:453.592,pounds:453.592,ml:1,milliliter:1,milliliters:1,l:1e3,liter:1e3,liters:1e3,"fl oz":29.5735,"fluid ounce":29.5735,"fluid ounces":29.5735,cup:236.588,cups:236.588,tbsp:14.787,tablespoon:14.787,tablespoons:14.787,tsp:4.929,teaspoon:4.929,teaspoons:4.929,pint:473.176,quart:946.353,gallon:3785.41},Jf=[{label:"Serving",value:"serving",icon:""},{label:"Gram (g)",value:"g",icon:""},{label:"Ounce (oz)",value:"oz",icon:""},{label:"Cup",value:"cup",icon:""},{label:"Tablespoon",value:"tbsp",icon:""},{label:"Teaspoon",value:"tsp",icon:""},{label:"Fluid Oz",value:"fl oz",icon:""},{label:"mL",value:"ml",icon:""},{label:"Piece",value:"piece",icon:""},{label:"Slice",value:"slice",icon:""},{label:"Container",value:"container",icon:""}];function W0(f,m,x){const b=m.toLowerCase(),C=x.toLowerCase();if(b===C)return f;const w=w0[b],k=w0[C];return!w||!k?(console.warn(`Unknown unit conversion: ${m} to ${x}`),f):f*w/k}async function ex(f){try{const x=await(await fetch(`${U0}/product/${f}.json`)).json();if(x.status!==1||!x.product)return{success:!1,error:"Product not found"};const b=x.product,C=b.nutriments||{},w=b.serving_size||"100g",k=z0(w);return{success:!0,product:{barcode:f,name:b.product_name||b.product_name_en||"Unknown Product",brand:b.brands||"",image:b.image_front_small_url||b.image_url||null,servingSize:w,servingSizeGrams:k,per100g:{calories:Math.round(C["energy-kcal_100g"]||C.energy_100g/4.184||0),protein:Math.round((C.proteins_100g||0)*10)/10,carbs:Math.round((C.carbohydrates_100g||0)*10)/10,fat:Math.round((C.fat_100g||0)*10)/10,fiber:Math.round((C.fiber_100g||0)*10)/10,sugar:Math.round((C.sugars_100g||0)*10)/10,sodium:Math.round(C.sodium_100g*1e3||0)},perServing:{calories:Math.round(C["energy-kcal_serving"]||(C["energy-kcal_100g"]||0)*k/100),protein:Math.round((C.proteins_serving||(C.proteins_100g||0)*k/100)*10)/10,carbs:Math.round((C.carbohydrates_serving||(C.carbohydrates_100g||0)*k/100)*10)/10,fat:Math.round((C.fat_serving||(C.fat_100g||0)*k/100)*10)/10},categories:b.categories||"",ingredients:b.ingredients_text||b.ingredients_text_en||"",allergens:b.allergens||"",nutriscore:b.nutriscore_grade||null}}}catch(m){return console.error("Error fetching product:",m),{success:!1,error:"Failed to fetch product data"}}}async function tx(f,m=1){try{const b=await(await fetch(`${U0}/search?search_terms=${encodeURIComponent(f)}&page=${m}&page_size=20&fields=code,product_name,brands,image_front_small_url,nutriments,serving_size`)).json();return b.products?{success:!0,products:b.products.map(w=>{const k=w.nutriments||{},M=w.serving_size||"100g",R=z0(M);return{barcode:w.code,name:w.product_name||"Unknown Product",brand:w.brands||"",image:w.image_front_small_url||null,servingSize:M,servingSizeGrams:R,perServing:{calories:Math.round((k["energy-kcal_100g"]||0)*R/100),protein:Math.round((k.proteins_100g||0)*R/100*10)/10,carbs:Math.round((k.carbohydrates_100g||0)*R/100*10)/10,fat:Math.round((k.fat_100g||0)*R/100*10)/10},per100g:{calories:Math.round(k["energy-kcal_100g"]||0),protein:Math.round((k.proteins_100g||0)*10)/10,carbs:Math.round((k.carbohydrates_100g||0)*10)/10,fat:Math.round((k.fat_100g||0)*10)/10}}}).filter(w=>w.name!=="Unknown Product"),totalCount:b.count||0,page:b.page||1}:{success:!1,error:"No products found",products:[]}}catch(x){return console.error("Error searching products:",x),{success:!1,error:"Failed to search products",products:[]}}}function z0(f){if(!f)return 100;const m=f.match(/(\d+\.?\d*)\s*(g|ml|oz|cup|tbsp|tsp)?/i);if(m){const x=parseFloat(m[1]),b=(m[2]||"g").toLowerCase();return W0(x,b,"g")}return 100}function rx(f,m,x){if(!f||!f.per100g)return null;let b;x==="serving"?(b=f.servingSizeGrams||100,b*=m):x==="piece"||x==="slice"||x==="container"?b=(f.servingSizeGrams||100)*m:b=W0(m,x,"g");const C=b/100;return{calories:Math.round(f.per100g.calories*C),protein:Math.round(f.per100g.protein*C*10)/10,carbs:Math.round(f.per100g.carbs*C*10)/10,fat:Math.round(f.per100g.fat*C*10)/10,fiber:f.per100g.fiber?Math.round(f.per100g.fiber*C*10)/10:null,sugar:f.per100g.sugar?Math.round(f.per100g.sugar*C*10)/10:null,grams:Math.round(b)}}const nx=[{id:"egg",name:"Egg (large)",brand:"Generic",servingSize:"1 large (50g)",servingSizeGrams:50,per100g:{calories:143,protein:12.6,carbs:.7,fat:9.5},perServing:{calories:72,protein:6.3,carbs:.4,fat:4.8}},{id:"chicken_breast",name:"Chicken Breast (cooked)",brand:"Generic",servingSize:"3 oz (85g)",servingSizeGrams:85,per100g:{calories:165,protein:31,carbs:0,fat:3.6},perServing:{calories:140,protein:26,carbs:0,fat:3.1}},{id:"rice_white",name:"White Rice (cooked)",brand:"Generic",servingSize:"1 cup (158g)",servingSizeGrams:158,per100g:{calories:130,protein:2.7,carbs:28,fat:.3},perServing:{calories:205,protein:4.3,carbs:44.2,fat:.4}},{id:"oats",name:"Oatmeal (dry)",brand:"Generic",servingSize:"1/2 cup (40g)",servingSizeGrams:40,per100g:{calories:389,protein:16.9,carbs:66,fat:6.9},perServing:{calories:156,protein:6.8,carbs:26.4,fat:2.8}},{id:"banana",name:"Banana (medium)",brand:"Generic",servingSize:"1 medium (118g)",servingSizeGrams:118,per100g:{calories:89,protein:1.1,carbs:23,fat:.3},perServing:{calories:105,protein:1.3,carbs:27,fat:.4}},{id:"apple",name:"Apple (medium)",brand:"Generic",servingSize:"1 medium (182g)",servingSizeGrams:182,per100g:{calories:52,protein:.3,carbs:14,fat:.2},perServing:{calories:95,protein:.5,carbs:25,fat:.3}},{id:"greek_yogurt",name:"Greek Yogurt (plain)",brand:"Generic",servingSize:"1 cup (227g)",servingSizeGrams:227,per100g:{calories:59,protein:10,carbs:3.6,fat:.7},perServing:{calories:134,protein:23,carbs:8.2,fat:1.6}},{id:"almonds",name:"Almonds",brand:"Generic",servingSize:"1 oz (28g)",servingSizeGrams:28,per100g:{calories:579,protein:21,carbs:22,fat:50},perServing:{calories:162,protein:6,carbs:6,fat:14}},{id:"salmon",name:"Salmon (cooked)",brand:"Generic",servingSize:"3 oz (85g)",servingSizeGrams:85,per100g:{calories:208,protein:20,carbs:0,fat:13},perServing:{calories:177,protein:17,carbs:0,fat:11}},{id:"broccoli",name:"Broccoli (cooked)",brand:"Generic",servingSize:"1 cup (156g)",servingSizeGrams:156,per100g:{calories:35,protein:2.4,carbs:7,fat:.4},perServing:{calories:55,protein:3.7,carbs:11,fat:.6}},{id:"avocado",name:"Avocado",brand:"Generic",servingSize:"1/2 avocado (68g)",servingSizeGrams:68,per100g:{calories:160,protein:2,carbs:9,fat:15},perServing:{calories:109,protein:1.4,carbs:6,fat:10}},{id:"protein_shake",name:"Protein Shake (whey)",brand:"Generic",servingSize:"1 scoop (30g)",servingSizeGrams:30,per100g:{calories:400,protein:80,carbs:10,fat:5},perServing:{calories:120,protein:24,carbs:3,fat:1.5}}];function sx({isOpen:f,onClose:m,onSave:x}){const[b,C]=we.useState("main"),[w,k]=we.useState(!1),[M,R]=we.useState(null),[N,O]=we.useState([]),[_,$]=we.useState(""),[Z,G]=we.useState([]),[X,le]=we.useState(null),[de,ue]=we.useState("1"),[ne,Q]=we.useState("serving"),[xe,oe]=we.useState(null),[Y,me]=we.useState(""),[ce,ke]=we.useState("");we.useEffect(()=>{f||(C("main"),O([]),$(""),G([]),le(null),ue("1"),Q("serving"),R(null),me(""),ke(""))},[f]),we.useEffect(()=>{if(X){const H=parseFloat(de)||0,U=rx(X,H,ne);oe(U)}},[X,de,ne]);const Ge=async H=>{C("main"),k(!0),R(null);try{const U=await ex(H);U.success?(le(U.product),ue("1"),Q(U.product.servingSize||"serving"),C("product")):R(`Product not found for barcode: ${H}`)}catch{R("Failed to fetch product. Please try again.")}finally{k(!1)}},te=async()=>{if(_.trim()){k(!0),R(null);try{const H=await tx(_);H.success?(G(H.products),H.products.length===0&&R("No products found. Try a different search term.")):R("Search failed. Please try again.")}catch{R("Search failed. Please try again.")}finally{k(!1)}}},K=H=>{le(H),ue("1"),Q(H.servingSize||"serving"),C("product")},ge=()=>{if(!X||!xe)return;const H={id:Date.now(),name:X.name,brand:X.brand,barcode:X.barcode,amount:parseFloat(de)||1,unit:ne,...xe};O([...N,H]),le(null),oe(null),C("main")},B=H=>{O(N.filter(U=>U.id!==H))},ye=N.reduce((H,U)=>({calories:H.calories+(U.calories||0),protein:H.protein+(U.protein||0),carbs:H.carbs+(U.carbs||0),fat:H.fat+(U.fat||0)}),{calories:0,protein:0,carbs:0,fat:0}),fe=()=>{if(N.length===0)return;const H={name:ce||`Meal (${N.length} items)`,items:N,calories:Math.round(ye.calories),protein:Math.round(ye.protein*10)/10,carbs:Math.round(ye.carbs*10)/10,fat:Math.round(ye.fat*10)/10,loggedAt:new Date().toISOString()};x(H),m()},he=()=>{Y.trim()&&Ge(Y.trim())};return b==="scanner"?i.jsx(nf,{isOpen:!0,onScan:Ge,onClose:()=>C("main")}):b==="product"&&X?i.jsx(Kl,{isOpen:f,onClose:()=>C("main"),title:"Add Food",size:"md",children:i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{className:"flex gap-4",children:[X.image?i.jsx("img",{src:X.image,alt:X.name,className:"w-20 h-20 rounded-lg object-cover bg-dark-700"}):i.jsx("div",{className:"w-20 h-20 rounded-lg bg-dark-700 flex items-center justify-center",children:i.jsx(ii,{className:"w-8 h-8 text-gray-500"})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-white",children:X.name}),X.brand&&i.jsx("p",{className:"text-sm text-gray-400",children:X.brand}),i.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Serving: ",X.servingSize]})]})]}),i.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl space-y-4",children:[i.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Serving Size"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Amount"}),i.jsx("input",{type:"number",value:de,onChange:H=>ue(H.target.value),min:"0.1",step:"0.1",className:"w-full px-4 py-3 bg-dark-600 border border-dark-500 rounded-lg text-white text-lg font-medium focus:border-accent-primary focus:outline-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Unit"}),i.jsx("select",{value:ne,onChange:H=>Q(H.target.value),className:"w-full px-4 py-3 bg-dark-600 border border-dark-500 rounded-lg text-white focus:border-accent-primary focus:outline-none appearance-none",children:Jf.map(H=>i.jsxs("option",{value:H.value,children:[H.icon," ",H.label]},H.value))})]})]}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:[.5,1,1.5,2].map(H=>i.jsxs("button",{onClick:()=>ue(H.toString()),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${parseFloat(de)===H?"bg-accent-primary text-white":"bg-dark-600 text-gray-400 hover:bg-dark-500"}`,children:[H," ",ne==="serving"?"serving":ne]},H))})]}),xe&&i.jsx("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-xl border border-accent-primary/20",children:i.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-white",children:xe.calories}),i.jsx("p",{className:"text-xs text-gray-400",children:"Calories"})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-2xl font-bold text-accent-primary",children:[xe.protein,"g"]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Protein"})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-2xl font-bold text-accent-warning",children:[xe.carbs,"g"]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-2xl font-bold text-accent-secondary",children:[xe.fat,"g"]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]})}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Qt,{variant:"secondary",onClick:()=>C("main"),fullWidth:!0,children:"Cancel"}),i.jsxs(Qt,{onClick:ge,fullWidth:!0,disabled:!xe,children:[i.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Add to Meal"]})]})]})}):b==="search"?i.jsx(Kl,{isOpen:f,onClose:()=>C("main"),title:"Search Food",size:"md",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(Mc,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),i.jsx("input",{type:"text",value:_,onChange:H=>$(H.target.value),onKeyPress:H=>H.key==="Enter"&&te(),placeholder:"Search foods...",className:"w-full pl-10 pr-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white focus:border-accent-primary focus:outline-none",autoFocus:!0})]}),i.jsx(Qt,{onClick:te,disabled:w,children:w?i.jsx(_c,{className:"w-5 h-5 animate-spin"}):"Search"})]}),M&&i.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2",children:[i.jsx(ql,{className:"w-5 h-5 text-red-400"}),i.jsx("span",{className:"text-sm text-red-400",children:M})]}),i.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:Z.map((H,U)=>i.jsxs("button",{onClick:()=>K(H),className:"w-full p-3 bg-dark-700 rounded-lg flex items-center gap-3 hover:bg-dark-600 transition-colors text-left",children:[H.image?i.jsx("img",{src:H.image,alt:"",className:"w-12 h-12 rounded-lg object-cover"}):i.jsx("div",{className:"w-12 h-12 rounded-lg bg-dark-600 flex items-center justify-center",children:i.jsx(ii,{className:"w-5 h-5 text-gray-500"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-white font-medium truncate",children:H.name}),H.brand&&i.jsx("p",{className:"text-xs text-gray-500 truncate",children:H.brand}),i.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[H.perServing.calories," cal  ",H.perServing.protein,"g P"]})]}),i.jsx(Fc,{className:"w-5 h-5 text-gray-500 rotate-[-90deg]"})]},U))}),Z.length===0&&!w&&i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Common Foods"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:nx.slice(0,8).map(H=>i.jsxs("button",{onClick:()=>K(H),className:"p-3 bg-dark-700 rounded-lg text-left hover:bg-dark-600 transition-colors",children:[i.jsx("p",{className:"text-sm text-white truncate",children:H.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[H.perServing.calories," cal"]})]},H.id))})]}),i.jsx(Qt,{variant:"secondary",onClick:()=>C("main"),fullWidth:!0,children:"Back"})]})}):i.jsx(Kl,{isOpen:f,onClose:m,title:"Log Meal",size:"md",children:i.jsxs("div",{className:"space-y-5",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("button",{onClick:()=>C("scanner"),className:"p-4 bg-gradient-to-br from-accent-primary/20 to-accent-primary/5 border border-accent-primary/30 rounded-xl flex flex-col items-center gap-2 hover:border-accent-primary/50 transition-colors",children:[i.jsx("div",{className:"w-12 h-12 bg-accent-primary/20 rounded-full flex items-center justify-center",children:i.jsx(oh,{className:"w-6 h-6 text-accent-primary"})}),i.jsx("span",{className:"text-white font-medium",children:"Scan Barcode"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Point at product"})]}),i.jsxs("button",{onClick:()=>C("search"),className:"p-4 bg-dark-700 border border-dark-500 rounded-xl flex flex-col items-center gap-2 hover:border-dark-400 transition-colors",children:[i.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-full flex items-center justify-center",children:i.jsx(Mc,{className:"w-6 h-6 text-gray-400"})}),i.jsx("span",{className:"text-white font-medium",children:"Search Food"}),i.jsx("span",{className:"text-xs text-gray-400",children:"Browse database"})]})]}),i.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[i.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Or enter barcode manually:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("input",{type:"text",value:Y,onChange:H=>me(H.target.value),placeholder:"Enter barcode number...",className:"flex-1 px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm focus:border-accent-primary focus:outline-none"}),i.jsx(Qt,{size:"sm",onClick:he,disabled:!Y.trim()||w,children:w?i.jsx(_c,{className:"w-4 h-4 animate-spin"}):"Look up"})]})]}),M&&i.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2",children:[i.jsx(ql,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),i.jsx("span",{className:"text-sm text-red-400",children:M}),i.jsx("button",{onClick:()=>R(null),className:"ml-auto",children:i.jsx(Ba,{className:"w-4 h-4 text-red-400"})})]}),N.length>0&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center justify-between",children:[i.jsxs("span",{children:["Food Items (",N.length,")"]}),i.jsxs("span",{className:"text-accent-primary",children:[Math.round(ye.calories)," cal"]})]}),i.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:N.map(H=>i.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-white text-sm font-medium truncate",children:H.name}),i.jsxs("p",{className:"text-xs text-gray-500",children:[H.amount," ",H.unit,"  ",H.calories," cal  ",H.protein,"g P"]})]}),i.jsx("button",{onClick:()=>B(H.id),className:"p-2 text-gray-500 hover:text-red-400 transition-colors",children:i.jsx(Pa,{className:"w-4 h-4"})})]},H.id))}),i.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-success/10 to-accent-primary/10 rounded-xl border border-accent-success/20",children:[i.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Meal Totals"}),i.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-xl font-bold text-white",children:Math.round(ye.calories)}),i.jsx("p",{className:"text-xs text-gray-400",children:"cal"})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-xl font-bold text-accent-primary",children:[Math.round(ye.protein),"g"]}),i.jsx("p",{className:"text-xs text-gray-400",children:"protein"})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-xl font-bold text-accent-warning",children:[Math.round(ye.carbs),"g"]}),i.jsx("p",{className:"text-xs text-gray-400",children:"carbs"})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-xl font-bold text-accent-secondary",children:[Math.round(ye.fat),"g"]}),i.jsx("p",{className:"text-xs text-gray-400",children:"fat"})]})]})]})]}),N.length>0&&i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Meal Type (optional)"}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:["Breakfast","Lunch","Dinner","Snack","Pre-workout","Post-workout"].map(H=>i.jsx("button",{onClick:()=>ke(ce===H?"":H),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${ce===H?"bg-accent-primary text-white":"bg-dark-700 border border-dark-500 text-gray-300 hover:border-accent-primary"}`,children:H},H))})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Qt,{variant:"secondary",onClick:m,fullWidth:!0,children:"Cancel"}),i.jsxs(Qt,{onClick:fe,fullWidth:!0,disabled:N.length===0,children:[i.jsx(Fn,{className:"w-4 h-4 mr-2"}),"Log Meal"]})]})]})})}const b0=["Ab Wheel Rollout","Arnold Press","Back Extension","Band Pull Apart","Barbell Bent Over Row","Barbell Curl","Barbell Hip Thrust","Barbell Lunge","Barbell Row","Barbell Shrug","Barbell Squat","Battle Ropes","Bench Dip","Bench Press","Bent Over Dumbbell Row","Bicycle Crunch","Bird Dog","Box Jump","Bulgarian Split Squat","Burpee","Cable Crossover","Cable Crunch","Cable Face Pull","Cable Fly","Cable Kickback","Cable Lateral Raise","Cable Pull Through","Cable Row","Cable Tricep Extension","Cable Woodchop","Calf Press","Calf Raise","Chest Dip","Chest Fly","Chin Up","Clean","Clean and Jerk","Close Grip Bench Press","Concentration Curl","Crunch","Dead Bug","Deadlift","Decline Bench Press","Decline Crunch","Deficit Deadlift","Dip","Dumbbell Bench Press","Dumbbell Bulgarian Split Squat","Dumbbell Curl","Dumbbell Fly","Dumbbell Front Raise","Dumbbell Lateral Raise","Dumbbell Lunge","Dumbbell Overhead Press","Dumbbell Pullover","Dumbbell Romanian Deadlift","Dumbbell Row","Dumbbell Shrug","Dumbbell Squat","Dumbbell Step Up","Dumbbell Tricep Extension","EZ Bar Curl","EZ Bar Skull Crusher","Face Pull","Farmer's Walk","Floor Press","Front Raise","Front Squat","Glute Bridge","Goblet Squat","Good Morning","Hack Squat","Hammer Curl","Hanging Knee Raise","Hanging Leg Raise","High Pull","Hip Abduction","Hip Adduction","Hip Thrust","Incline Bench Press","Incline Dumbbell Curl","Incline Dumbbell Fly","Incline Dumbbell Press","Inverted Row","Jump Rope","Jump Squat","Kettlebell Clean","Kettlebell Snatch","Kettlebell Swing","Kettlebell Turkish Get Up","Kneeling Cable Crunch","Landmine Press","Landmine Row","Lat Pulldown","Lateral Raise","Leg Curl","Leg Extension","Leg Press","Leg Raise","Lunges","Lying Leg Curl","Lying Tricep Extension","Machine Chest Press","Machine Fly","Machine Row","Machine Shoulder Press","Medicine Ball Slam","Military Press","Mountain Climber","Muscle Up","Overhead Press","Overhead Squat","Pallof Press","Pause Squat","Pec Deck","Pendlay Row","Pistol Squat","Plank","Power Clean","Preacher Curl","Press Up","Pull Up","Push Press","Push Up","Rack Pull","Rear Delt Fly","Reverse Crunch","Reverse Fly","Reverse Grip Lat Pulldown","Reverse Lunge","Romanian Deadlift","Rope Climb","Rope Tricep Pushdown","Rowing Machine","Russian Twist","Seated Cable Row","Seated Calf Raise","Seated Dumbbell Press","Seated Leg Curl","Shoulder Press","Side Bend","Side Plank","Single Arm Dumbbell Row","Single Leg Deadlift","Single Leg Squat","Sissy Squat","Sit Up","Skull Crusher","Sled Push","Smith Machine Squat","Snatch","Spider Curl","Split Squat","Squat","Standing Calf Raise","Step Up","Stiff Leg Deadlift","Sumo Deadlift","Sumo Squat","Superman","T-Bar Row","Thruster","Toe Touch","Trap Bar Deadlift","Tricep Dip","Tricep Kickback","Tricep Pushdown","Upright Row","V-Up","Walking Lunge","Wall Ball","Wide Grip Lat Pulldown","Wide Grip Pull Up","Wrist Curl","Zercher Squat","Zottman Curl"];function ix({isOpen:f,onClose:m,onSave:x,program:b}){const[C,w]=we.useState("strength"),[k,M]=we.useState(""),[R,N]=we.useState("AM"),[O,_]=we.useState([]),[$,Z]=we.useState(""),[G,X]=we.useState("7"),[le,de]=we.useState(null),[ue,ne]=we.useState(null),[Q,xe]=we.useState(null),[oe,Y]=we.useState(""),me=we.useRef(null),ce=B=>{const ye=B.target.files[0];if(ye){const fe=new FileReader;fe.onload=he=>ne(he.target.result),fe.readAsDataURL(ye)}},ke=()=>{_([...O,{id:Date.now(),name:"",sets:"",reps:"",weight:""}]),xe(null),Y("")},Ge=(B,ye,fe)=>{_(O.map(he=>he.id===B?{...he,[ye]:fe}:he)),ye==="name"&&(xe(null),Y(""))},te=B=>_(O.filter(ye=>ye.id!==B)),K=()=>oe?b0.filter(B=>B.toLowerCase().includes(oe.toLowerCase())):b0,ge=()=>{x({type:C,duration:parseInt(k)||0,sessionTime:R,exercises:O.filter(B=>B.name),notes:$,screenshot:ue,overallRpe:parseInt(G),day:new Date().getDay()||7,loggedAt:new Date().toISOString()}),w("strength"),M(""),N("AM"),_([]),Z(""),X("7"),de(null),ne(null),xe(null),Y(""),m()};return i.jsx(Kl,{isOpen:f,onClose:m,title:"Log Workout",size:"lg",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Type"}),i.jsx("div",{className:"flex gap-2",children:["strength","cardio","hiit"].map(B=>i.jsxs("button",{onClick:()=>w(B),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${C===B?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:[B==="strength"?"":B==="cardio"?"":""," ",B.charAt(0).toUpperCase()+B.slice(1)]},B))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Session"}),i.jsx("div",{className:"flex gap-2",children:["AM","PM"].map(B=>i.jsxs("button",{onClick:()=>N(B),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${R===B?B==="AM"?"bg-yellow-500/20 border-yellow-500 text-yellow-400":"bg-blue-500/20 border-blue-500 text-blue-400":"bg-dark-700 border-dark-500 text-gray-400"}`,children:[B==="AM"?"":""," ",B]},B))})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(kh,{label:"Duration (min)",type:"number",value:k,onChange:B=>M(B.target.value),placeholder:"60"}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"RPE"}),i.jsx("select",{value:G,onChange:B=>X(B.target.value),className:"w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[6,7,8,9,10].map(B=>i.jsxs("option",{value:B,children:["RPE ",B]},B))})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Exercises"}),i.jsxs(Qt,{variant:"ghost",size:"sm",onClick:ke,children:[i.jsx(Wi,{className:"w-4 h-4 mr-1"}),"Add"]})]}),O.length>0?i.jsx("div",{className:"space-y-3",children:O.map((B,ye)=>i.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg border border-dark-600",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsxs("span",{className:"text-sm text-gray-500",children:["#",ye+1]}),i.jsxs("div",{className:"flex-1 relative",children:[i.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-sm cursor-pointer hover:border-dark-400",onClick:()=>{xe(Q===B.id?null:B.id),Y(B.name||"")},children:[i.jsx("span",{className:B.name?"text-white":"text-gray-500",children:B.name||"Select exercise..."}),i.jsx(Fc,{className:"w-4 h-4 text-gray-400"})]}),Q===B.id&&i.jsxs("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 bg-dark-700 border border-dark-500 rounded-lg shadow-xl max-h-60 overflow-hidden",children:[i.jsx("div",{className:"p-2 border-b border-dark-600",children:i.jsxs("div",{className:"relative",children:[i.jsx(Mc,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),i.jsx("input",{type:"text",value:oe,onChange:fe=>Y(fe.target.value),placeholder:"Type to search...",className:"w-full pl-8 pr-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500 focus:outline-none focus:border-accent-primary",autoFocus:!0,onClick:fe=>fe.stopPropagation()})]})}),i.jsx("div",{className:"max-h-48 overflow-y-auto",children:K().length>0?K().map(fe=>i.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-white hover:bg-dark-600 transition-colors",onClick:he=>{he.stopPropagation(),Ge(B.id,"name",fe)},children:fe},fe)):i.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500",children:['No matches. Use custom name: "',oe,'"',i.jsxs("button",{className:"block w-full mt-2 px-3 py-1.5 bg-accent-primary/20 text-accent-primary rounded text-xs",onClick:fe=>{fe.stopPropagation(),Ge(B.id,"name",oe)},children:['Use "',oe,'"']})]})})]})]}),i.jsx("button",{onClick:()=>te(B.id),className:"p-1.5 text-gray-500 hover:text-accent-danger",children:i.jsx(Pa,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsx("input",{type:"number",value:B.sets,onChange:fe=>Ge(B.id,"sets",fe.target.value),placeholder:"Sets",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"}),i.jsx("input",{type:"text",value:B.reps,onChange:fe=>Ge(B.id,"reps",fe.target.value),placeholder:"Reps",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"}),i.jsx("input",{type:"text",value:B.weight,onChange:fe=>Ge(B.id,"weight",fe.target.value),placeholder:"Weight",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"})]})]},B.id))}):i.jsxs("div",{className:"p-6 text-center bg-dark-700 rounded-lg border border-dashed border-dark-500",children:[i.jsx(si,{className:"w-8 h-8 text-gray-600 mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add" to track exercises'})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Screenshot (Optional)"}),i.jsx("input",{ref:me,type:"file",accept:"image/*",onChange:ce,className:"hidden"}),ue?i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:ue,alt:"Preview",className:"w-full h-40 object-cover rounded-lg"}),i.jsx("button",{onClick:()=>ne(null),className:"absolute top-2 right-2 p-2 bg-dark-900/80 rounded-lg",children:i.jsx(Pa,{className:"w-4 h-4 text-white"})})]}):i.jsxs("button",{onClick:()=>me.current?.click(),className:"w-full p-6 border-2 border-dashed border-dark-500 rounded-lg hover:border-accent-primary flex flex-col items-center gap-2",children:[i.jsx(I0,{className:"w-6 h-6 text-gray-400"}),i.jsx("span",{className:"text-sm text-gray-400",children:"Upload screenshot"})]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(Qt,{variant:"secondary",onClick:m,fullWidth:!0,children:"Cancel"}),i.jsxs(Qt,{onClick:ge,fullWidth:!0,children:[i.jsx(Wi,{className:"w-4 h-4 mr-2"}),"Log Workout"]})]})]})})}function ax({isOpen:f,onClose:m,onSuccess:x}){const[b,C]=we.useState(!1),[w,k]=we.useState(null);if(!f)return null;const M=!1,R=async()=>{C(!0),k(null);try{if(!M){setTimeout(()=>{x?.({customerId:"demo_customer_"+Date.now(),subscriptionId:"demo_sub_"+Date.now(),currentPeriodEnd:new Date(Date.now()+720*60*60*1e3).toISOString()}),C(!1)},1500);return}const N=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:void 0,successUrl:`${window.location.origin}/subscription-success`,cancelUrl:window.location.href})}),{url:O,error:_}=await N.json();if(_)throw new Error(_);window.location.href=O}catch(N){console.error("Subscription error:",N),k(N.message||"Failed to process subscription"),C(!1)}};return i.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70",children:i.jsxs("div",{className:"relative w-full max-w-md bg-dark-800 rounded-xl shadow-2xl border border-dark-600 overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[i.jsx("h3",{className:"text-lg font-semibold text-white",children:"Subscribe to MOTUS"}),i.jsx("button",{onClick:m,className:"p-1 text-gray-400 hover:text-white transition-colors",children:i.jsx(Ba,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 mb-6 border border-dark-500",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-white font-medium",children:"MOTUS Premium"}),i.jsx("span",{className:"text-accent-primary font-bold",children:"$5/month"})]}),i.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(Li,{className:"w-4 h-4 text-accent-success"}),"Personalized training program"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(Li,{className:"w-4 h-4 text-accent-success"}),"Custom meal plans & recipes"]}),i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx(Li,{className:"w-4 h-4 text-accent-success"}),"Progress tracking & analytics"]})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Accepted payment methods"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:"flex-1 bg-dark-700 rounded-lg p-3 flex items-center justify-center border border-dark-500",children:[i.jsx("svg",{className:"h-6",viewBox:"0 0 50 20",fill:"white",children:i.jsx("path",{d:"M9.5 5.3c-.5.6-1.3 1.1-2.1 1-.1-.8.3-1.6.7-2.1.5-.6 1.4-1 2-1 .1.8-.2 1.6-.6 2.1zm.6 1.1c-1.2-.1-2.2.7-2.7.7-.6 0-1.4-.6-2.4-.6-1.2 0-2.3.7-2.9 1.8-1.3 2.2-.3 5.4.9 7.2.6.9 1.3 1.8 2.3 1.8.9 0 1.3-.6 2.4-.6 1.1 0 1.4.6 2.4.6 1 0 1.6-.9 2.2-1.8.7-1 1-2 1-2-.1 0-1.9-.7-1.9-2.9 0-1.8 1.5-2.7 1.6-2.8-.9-1.3-2.3-1.4-2.9-1.4z"})}),i.jsx("span",{className:"ml-1 text-white text-sm font-medium",children:"Pay"})]}),i.jsx("div",{className:"flex-1 bg-dark-700 rounded-lg p-3 flex items-center justify-center border border-dark-500",children:i.jsx("svg",{className:"h-5",viewBox:"0 0 40 16",fill:"white",children:i.jsx("path",{d:"M19.6 7.8v4.5h-1.4V3h3.7c.9 0 1.7.3 2.3.9.6.6.9 1.3.9 2.2 0 .9-.3 1.6-.9 2.2-.6.6-1.4.9-2.3.9h-2.3zm0-3.5v2.3h2.4c.5 0 .9-.2 1.2-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2c-.3-.3-.7-.5-1.2-.5h-2.4z"})})}),i.jsxs("div",{className:"flex-1 bg-dark-700 rounded-lg p-3 flex items-center justify-center border border-dark-500",children:[i.jsx(Ql,{className:"w-5 h-5 text-white"}),i.jsx("span",{className:"ml-1 text-white text-sm",children:"Card"})]})]})]}),w&&i.jsxs("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-2 text-red-400 text-sm",children:[i.jsx(ql,{className:"w-4 h-4 flex-shrink-0"}),w]}),i.jsx("button",{onClick:R,disabled:b,className:"w-full py-3 px-6 bg-accent-primary hover:bg-accent-primary/90 disabled:opacity-50 disabled:cursor-not-allowed text-dark-900 font-semibold rounded-lg transition-colors flex items-center justify-center gap-2",children:b?i.jsxs(i.Fragment,{children:[i.jsx(_c,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):i.jsxs(i.Fragment,{children:[i.jsx(Ql,{className:"w-5 h-5"}),"Subscribe - $5/month"]})}),i.jsx("p",{className:"text-xs text-amber-400 text-center mt-3",children:" Demo mode: Stripe not configured. Add VITE_STRIPE_PUBLIC_KEY to enable real payments."}),i.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"By subscribing, you agree to our Terms of Service and Privacy Policy. You can cancel anytime from your profile settings."})]})]})})}function lx({referralCode:f,referralCount:m,referralsNeeded:x,onReferralComplete:b}){const[C,w]=we.useState(!1),k=f?`${window.location.origin}?ref=${f}`:null,M=async()=>{if(k)try{await navigator.clipboard.writeText(k),w(!0),setTimeout(()=>w(!1),2e3)}catch(O){console.error("Failed to copy:",O)}},R=async()=>{if(k)if(navigator.share)try{await navigator.share({title:"Join MOTUS - AI-Powered Fitness",text:"Check out MOTUS! Get a personalized training program powered by AI.",url:k})}catch{console.log("Share cancelled")}else M()},N=m/3*100;return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"bg-dark-700 rounded-xl p-5 border border-dark-500",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 rounded-full bg-accent-secondary/20 flex items-center justify-center",children:i.jsx(T0,{className:"w-5 h-5 text-accent-secondary"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white",children:"Get 1 Month Free!"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Refer 3 friends to unlock"})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[i.jsx("span",{className:"text-gray-400",children:"Progress"}),i.jsxs("span",{className:"text-white font-medium",children:[m,"/3 friends"]})]}),i.jsx("div",{className:"h-3 bg-dark-600 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-accent-secondary to-accent-primary transition-all duration-500 rounded-full",style:{width:`${N}%`}})}),x>0&&i.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[x," more referral",x>1?"s":""," to unlock your first month free!"]}),x===0&&i.jsxs("p",{className:"text-xs text-accent-success mt-2 flex items-center gap-1",children:[i.jsx(Li,{className:"w-4 h-4"}),"Congratulations! Your first month is free!"]})]}),f&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-sm text-gray-400",children:"Your referral link"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("div",{className:"flex-1 bg-dark-600 rounded-lg px-3 py-2 text-sm text-gray-300 font-mono truncate",children:k}),i.jsx("button",{onClick:M,className:`px-3 py-2 rounded-lg transition-colors flex items-center gap-1 ${C?"bg-accent-success/20 text-accent-success":"bg-dark-600 hover:bg-dark-500 text-white"}`,children:C?i.jsx(Li,{className:"w-4 h-4"}):i.jsx(hh,{className:"w-4 h-4"})})]}),i.jsxs("button",{onClick:R,className:"w-full py-3 px-4 bg-accent-secondary/20 hover:bg-accent-secondary/30 text-accent-secondary rounded-lg transition-colors flex items-center justify-center gap-2",children:[i.jsx(bh,{className:"w-5 h-5"}),"Share with Friends"]})]})]}),i.jsxs("div",{className:"bg-dark-700/50 rounded-xl p-4 border border-dark-600",children:[i.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"How it works"}),i.jsxs("ol",{className:"space-y-2 text-sm text-gray-400",children:[i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"w-5 h-5 rounded-full bg-dark-600 flex items-center justify-center text-xs text-white flex-shrink-0",children:"1"}),"Share your unique link with friends"]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"w-5 h-5 rounded-full bg-dark-600 flex items-center justify-center text-xs text-white flex-shrink-0",children:"2"}),"They sign up and create their program"]}),i.jsxs("li",{className:"flex items-start gap-2",children:[i.jsx("span",{className:"w-5 h-5 rounded-full bg-dark-600 flex items-center justify-center text-xs text-white flex-shrink-0",children:"3"}),"After 3 sign-ups, your first month is unlocked!"]})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Note: Referral bonus applies to first month only. After that, subscribe to continue."})]})]})}function ox({isVisible:f,onClose:m,onSuccess:x}){const{referralCode:b,referralCount:C,referralsNeeded:w,activateTylersFriend:k,bypassPaywall:M}=S0(),[R,N]=we.useState(!1),[O,_]=we.useState("subscribe");if(!f||M)return null;const $=G=>{N(!1),x?.(G)},Z=()=>{k(),m?.()};return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:i.jsxs("div",{className:"relative w-full max-w-lg bg-dark-800 rounded-2xl shadow-2xl border border-dark-600 overflow-hidden",children:[i.jsxs("div",{className:"relative bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 p-6 text-center",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-accent-primary/20 flex items-center justify-center",children:i.jsx(R0,{className:"w-8 h-8 text-accent-primary"})}),i.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Unlock Your Full Program"}),i.jsx("p",{className:"text-gray-400",children:"Your personalized training program is ready! Subscribe to access all features."})]}),i.jsxs("div",{className:"flex border-b border-dark-600",children:[i.jsxs("button",{onClick:()=>_("subscribe"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${O==="subscribe"?"text-accent-primary border-b-2 border-accent-primary bg-dark-700/50":"text-gray-400 hover:text-white"}`,children:[i.jsx(Ql,{className:"w-4 h-4 inline mr-2"}),"Subscribe"]}),i.jsxs("button",{onClick:()=>_("refer"),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${O==="refer"?"text-accent-primary border-b-2 border-accent-primary bg-dark-700/50":"text-gray-400 hover:text-white"}`,children:[i.jsx(Nh,{className:"w-4 h-4 inline mr-2"}),"Refer Friends"]})]}),i.jsxs("div",{className:"p-6",children:[O==="subscribe"?i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"bg-dark-700 rounded-xl p-6 text-center border border-dark-500",children:[i.jsxs("div",{className:"text-4xl font-bold text-white mb-1",children:["$5",i.jsx("span",{className:"text-lg font-normal text-gray-400",children:"/month"})]}),i.jsx("p",{className:"text-gray-400 text-sm mb-4",children:"Cancel anytime"}),i.jsx("ul",{className:"text-left space-y-2 mb-6",children:["Full access to your custom program","Personalized meal plans & recipes","Progress tracking & analytics","Workout logging with weight recommendations","Shopping list with Instacart integration"].map((G,X)=>i.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-300",children:[i.jsx(Li,{className:"w-4 h-4 text-accent-success flex-shrink-0 mt-0.5"}),G]},X))}),i.jsxs("button",{onClick:()=>N(!0),className:"w-full py-3 px-6 bg-accent-primary hover:bg-accent-primary/90 text-dark-900 font-semibold rounded-lg transition-colors flex items-center justify-center gap-2",children:[i.jsx(Ql,{className:"w-5 h-5"}),"Subscribe Now"]}),i.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Secure payment via Stripe. Supports Apple Pay, Google Pay & cards."})]})}):i.jsx(lx,{referralCode:b,referralCount:C,referralsNeeded:w,onReferralComplete:x}),i.jsxs("div",{className:"relative my-6",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-dark-600"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsx("span",{className:"px-2 bg-dark-800 text-gray-500",children:"or"})})]}),i.jsxs("button",{onClick:Z,className:"w-full py-3 px-4 bg-dark-700 hover:bg-dark-600 text-gray-300 rounded-lg transition-colors flex items-center justify-center gap-2 border border-dark-500",children:[i.jsx(T0,{className:"w-5 h-5 text-accent-secondary"}),"I'm Tyler's Friend"]}),i.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Special access for friends & family"})]})]})}),i.jsx(ax,{isOpen:R,onClose:()=>N(!1),onSuccess:$})]})}function Ra(f,m){const[x,b]=we.useState(()=>{try{const w=window.localStorage.getItem(f);return w?JSON.parse(w):m}catch{return m}});return[x,w=>{try{const k=w instanceof Function?w(x):w;b(k),window.localStorage.setItem(f,JSON.stringify(k))}catch(k){console.error(k)}}]}function cx(){const{user:f,loading:m,isAuthenticated:x}=Bc(),{isSubscribed:b,loading:C,initializeSubscription:w,activatePaidSubscription:k}=S0(),[M,R]=Ra("motus_profile",null),[N,O]=Ra("motus_program",null),[_,$]=Ra("motus_meals",[]),[Z,G]=Ra("motus_workouts",[]),[X,le]=Ra("motus_completed",[]),[de,ue]=we.useState("dashboard"),[ne,Q]=we.useState(!1),[xe,oe]=we.useState(!1),[Y,me]=we.useState(!1),[ce,ke]=we.useState(!0),[Ge,te]=we.useState(!0),[K,ge]=we.useState(!1);we.useEffect(()=>{m||(async()=>{te(!0),x&&await eh();const[Pe,pt,At,It]=await Promise.all([Y1(),K1(),Q1(),J1()]);Pe.data&&R(Pe.data),pt.data&&O(pt.data),At.data&&$(At.data),It.data&&G(It.data),Pe.data&&pt.data?(me(!0),ke(!1)):localStorage.getItem("motus_has_visited")&&ke(!1),te(!1)})()},[x,m]);const B=async We=>{R(We),await X1(We)},ye=async We=>{O(We),await Z1(We)},fe=async We=>{$(We),await q1(We)},he=async We=>{G(We),await $1(We)},H=async We=>{await B(We.profile),await ye(We.program),await w(),b||ge(!0),me(!0)},U=async We=>{We&&await k(We),ge(!1)},P=async We=>{const Pe=[..._,{...We,id:Date.now()}];await fe(Pe),Q(!1)},W=async We=>{const Pe=_.filter(pt=>pt.id!==We);await fe(Pe)},Ee=async We=>{const Pe=[...Z,{...We,id:Date.now()}];await he(Pe),oe(!1)},Re=(We,Pe,pt)=>{const At=X.find(It=>It.day===We&&It.sessionIndex===Pe);if(At)if(At.completedExercises.includes(pt)){const It=X.map(et=>et.day===We&&et.sessionIndex===Pe?{...et,completedExercises:et.completedExercises.filter(tt=>tt!==pt)}:et);le(It)}else{const It=X.map(et=>et.day===We&&et.sessionIndex===Pe?{...et,completedExercises:[...et.completedExercises,pt]}:et);le(It)}else le([...X,{day:We,sessionIndex:Pe,completedExercises:[pt]}])},Fe=(We,Pe)=>{const pt=N?.weeklySchedule?.find(et=>et.day===We)?.sessions?.[Pe];if(!pt?.exercises)return;const At=pt.exercises.map((et,tt)=>tt);if(X.find(et=>et.day===We&&et.sessionIndex===Pe)){const et=X.map(tt=>tt.day===We&&tt.sessionIndex===Pe?{...tt,completedExercises:At}:tt);le(et)}else le([...X,{day:We,sessionIndex:Pe,completedExercises:At,exerciseLogs:{}}])},Ne=(We,Pe,pt,At)=>{if(X.find(et=>et.day===We&&et.sessionIndex===Pe)){const et=X.map(tt=>tt.day===We&&tt.sessionIndex===Pe?{...tt,exerciseLogs:{...tt.exerciseLogs,[pt]:At},completedExercises:tt.completedExercises.includes(pt)?tt.completedExercises:[...tt.completedExercises,pt]}:tt);le(et)}else le([...X,{day:We,sessionIndex:Pe,completedExercises:[pt],exerciseLogs:{[pt]:At}}])},Qe=async()=>{window.confirm("Are you sure you want to reset? All your data will be lost.")&&(await B(null),await ye(null),await fe([]),await he([]),le([]),me(!1),ue("dashboard"))};if(m||Ge||C)return i.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-accent-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-gray-400",children:"Loading your data..."})]})});we.useEffect(()=>{const Pe=new URLSearchParams(window.location.search).get("ref");Pe&&(localStorage.setItem("motus_referral_code",Pe),window.history.replaceState({},"",window.location.pathname))},[]);const Ue=new Date().toISOString().split("T")[0],He=_.filter(We=>(We.loggedAt||We.createdAt)?.startsWith(Ue)),it=Z.filter(We=>(We.loggedAt||We.completedAt)?.startsWith(Ue)),gt=()=>{localStorage.setItem("motus_has_visited","true"),ke(!1)};return ce&&!Y?i.jsx(Eh,{onGetStarted:gt}):Y?i.jsxs("div",{className:"min-h-screen bg-dark-900",children:[i.jsx(ox,{isVisible:K&&!b,onClose:()=>ge(!1),onSuccess:U}),i.jsxs("div",{className:!b&&Y?"relative":"",children:[!b&&Y&&de!=="dashboard"&&i.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md z-40 flex items-center justify-center",children:i.jsxs("div",{className:"text-center p-6",children:[i.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-accent-primary/20 flex items-center justify-center",children:i.jsx("svg",{className:"w-8 h-8 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Premium Feature"}),i.jsx("p",{className:"text-gray-400 mb-4",children:"Subscribe to unlock this tab"}),i.jsx("button",{onClick:()=>ge(!0),className:"px-6 py-2 bg-accent-primary text-dark-900 font-medium rounded-lg hover:bg-accent-primary/90",children:"Unlock Now"})]})}),de==="dashboard"&&i.jsx(Wf,{profile:M,program:N,meals:_,workouts:Z,todaysMeals:He,todaysWorkouts:it,isSubscribed:b,onLogMeal:()=>b?Q(!0):ge(!0),onLogWorkout:()=>b?oe(!0):ge(!0),onViewProgram:()=>b?ue("program"):ge(!0),onViewNutrition:()=>b?ue("nutrition"):ge(!0),onShowPaywall:()=>ge(!0)}),de==="program"&&b&&i.jsx(Xf,{program:N,completedWorkouts:X,onCompleteExercise:Re,onCompleteSession:Fe,onUpdateExerciseLog:Ne,onBack:()=>ue("dashboard")}),de==="nutrition"&&b&&i.jsx(Yf,{profile:M,meals:_,workouts:Z,onLogMeal:()=>Q(!0),onDeleteMeal:W,onBack:()=>ue("dashboard")}),de==="stats"&&b&&i.jsx(Kf,{profile:M,program:N,meals:_,workouts:Z}),de==="profile"&&i.jsx($f,{profile:M,program:N,isSubscribed:b,onResetSetup:Qe,onShowPaywall:()=>ge(!0)})]}),i.jsx(Th,{activeTab:de,onChange:We=>{!b&&We!=="dashboard"&&We!=="profile"?ge(!0):ue(We)},isSubscribed:b}),i.jsx(sx,{isOpen:ne,onClose:()=>Q(!1),onSave:P}),i.jsx(ix,{isOpen:xe,onClose:()=>oe(!1),onSave:Ee,program:N})]}):i.jsx(Bf,{onComplete:H})}function ux(){return i.jsx(V1,{children:i.jsx(rh,{children:i.jsx(cx,{})})})}H1.createRoot(document.getElementById("root")).render(i.jsx(N0.StrictMode,{children:i.jsx(ux,{})}));
