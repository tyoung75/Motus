(function(){const h=document.createElement("link").relList;if(h&&h.supports&&h.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))E(j);new MutationObserver(j=>{for(const g of j)if(g.type==="childList")for(const N of g.addedNodes)N.tagName==="LINK"&&N.rel==="modulepreload"&&E(N)}).observe(document,{childList:!0,subtree:!0});function m(j){const g={};return j.integrity&&(g.integrity=j.integrity),j.referrerPolicy&&(g.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?g.credentials="include":j.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function E(j){if(j.ep)return;j.ep=!0;const g=m(j);fetch(j.href,g)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};var hasRequiredReact_production_min;function requireReact_production_min(){if(hasRequiredReact_production_min)return react_production_min;hasRequiredReact_production_min=1;var d=Symbol.for("react.element"),h=Symbol.for("react.portal"),m=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),N=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),_=Symbol.iterator;function J(D){return D===null||typeof D!="object"?null:(D=_&&D[_]||D["@@iterator"],typeof D=="function"?D:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ie=Object.assign,q={};function L(D,G,Ie){this.props=D,this.context=G,this.refs=q,this.updater=Ie||W}L.prototype.isReactComponent={},L.prototype.setState=function(D,G){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,G,"setState")},L.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function Ee(){}Ee.prototype=L.prototype;function ue(D,G,Ie){this.props=D,this.context=G,this.refs=q,this.updater=Ie||W}var te=ue.prototype=new Ee;te.constructor=ue,ie(te,L.prototype),te.isPureReactComponent=!0;var K=Array.isArray,me=Object.prototype.hasOwnProperty,re={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function U(D,G,Ie){var ee,Re={},je=null,Ve=null;if(G!=null)for(ee in G.ref!==void 0&&(Ve=G.ref),G.key!==void 0&&(je=""+G.key),G)me.call(G,ee)&&!F.hasOwnProperty(ee)&&(Re[ee]=G[ee]);var Be=arguments.length-2;if(Be===1)Re.children=Ie;else if(1<Be){for(var Fe=Array(Be),Ke=0;Ke<Be;Ke++)Fe[Ke]=arguments[Ke+2];Re.children=Fe}if(D&&D.defaultProps)for(ee in Be=D.defaultProps,Be)Re[ee]===void 0&&(Re[ee]=Be[ee]);return{$$typeof:d,type:D,key:je,ref:Ve,props:Re,_owner:re.current}}function Q(D,G){return{$$typeof:d,type:D.type,key:G,ref:D.ref,props:D.props,_owner:D._owner}}function xe(D){return typeof D=="object"&&D!==null&&D.$$typeof===d}function Ce(D){var G={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(Ie){return G[Ie]})}var B=/\/+/g;function Z(D,G){return typeof D=="object"&&D!==null&&D.key!=null?Ce(""+D.key):G.toString(36)}function ge(D,G,Ie,ee,Re){var je=typeof D;(je==="undefined"||je==="boolean")&&(D=null);var Ve=!1;if(D===null)Ve=!0;else switch(je){case"string":case"number":Ve=!0;break;case"object":switch(D.$$typeof){case d:case h:Ve=!0}}if(Ve)return Ve=D,Re=Re(Ve),D=ee===""?"."+Z(Ve,0):ee,K(Re)?(Ie="",D!=null&&(Ie=D.replace(B,"$&/")+"/"),ge(Re,G,Ie,"",function(Ke){return Ke})):Re!=null&&(xe(Re)&&(Re=Q(Re,Ie+(!Re.key||Ve&&Ve.key===Re.key?"":(""+Re.key).replace(B,"$&/")+"/")+D)),G.push(Re)),1;if(Ve=0,ee=ee===""?".":ee+":",K(D))for(var Be=0;Be<D.length;Be++){je=D[Be];var Fe=ee+Z(je,Be);Ve+=ge(je,G,Ie,Fe,Re)}else if(Fe=J(D),typeof Fe=="function")for(D=Fe.call(D),Be=0;!(je=D.next()).done;)je=je.value,Fe=ee+Z(je,Be++),Ve+=ge(je,G,Ie,Fe,Re);else if(je==="object")throw G=String(D),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.");return Ve}function I(D,G,Ie){if(D==null)return D;var ee=[],Re=0;return ge(D,ee,"","",function(je){return G.call(Ie,je,Re++)}),ee}function ne(D){if(D._status===-1){var G=D._result;G=G(),G.then(function(Ie){(D._status===0||D._status===-1)&&(D._status=1,D._result=Ie)},function(Ie){(D._status===0||D._status===-1)&&(D._status=2,D._result=Ie)}),D._status===-1&&(D._status=0,D._result=G)}if(D._status===1)return D._result.default;throw D._result}var le={current:null},de={transition:null},ye={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:de,ReactCurrentOwner:re};function z(){throw Error("act(...) is not supported in production builds of React.")}return react_production_min.Children={map:I,forEach:function(D,G,Ie){I(D,function(){G.apply(this,arguments)},Ie)},count:function(D){var G=0;return I(D,function(){G++}),G},toArray:function(D){return I(D,function(G){return G})||[]},only:function(D){if(!xe(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},react_production_min.Component=L,react_production_min.Fragment=m,react_production_min.Profiler=j,react_production_min.PureComponent=ue,react_production_min.StrictMode=E,react_production_min.Suspense=A,react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ye,react_production_min.act=z,react_production_min.cloneElement=function(D,G,Ie){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var ee=ie({},D.props),Re=D.key,je=D.ref,Ve=D._owner;if(G!=null){if(G.ref!==void 0&&(je=G.ref,Ve=re.current),G.key!==void 0&&(Re=""+G.key),D.type&&D.type.defaultProps)var Be=D.type.defaultProps;for(Fe in G)me.call(G,Fe)&&!F.hasOwnProperty(Fe)&&(ee[Fe]=G[Fe]===void 0&&Be!==void 0?Be[Fe]:G[Fe])}var Fe=arguments.length-2;if(Fe===1)ee.children=Ie;else if(1<Fe){Be=Array(Fe);for(var Ke=0;Ke<Fe;Ke++)Be[Ke]=arguments[Ke+2];ee.children=Be}return{$$typeof:d,type:D.type,key:Re,ref:je,props:ee,_owner:Ve}},react_production_min.createContext=function(D){return D={$$typeof:N,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:g,_context:D},D.Consumer=D},react_production_min.createElement=U,react_production_min.createFactory=function(D){var G=U.bind(null,D);return G.type=D,G},react_production_min.createRef=function(){return{current:null}},react_production_min.forwardRef=function(D){return{$$typeof:k,render:D}},react_production_min.isValidElement=xe,react_production_min.lazy=function(D){return{$$typeof:M,_payload:{_status:-1,_result:D},_init:ne}},react_production_min.memo=function(D,G){return{$$typeof:w,type:D,compare:G===void 0?null:G}},react_production_min.startTransition=function(D){var G=de.transition;de.transition={};try{D()}finally{de.transition=G}},react_production_min.unstable_act=z,react_production_min.useCallback=function(D,G){return le.current.useCallback(D,G)},react_production_min.useContext=function(D){return le.current.useContext(D)},react_production_min.useDebugValue=function(){},react_production_min.useDeferredValue=function(D){return le.current.useDeferredValue(D)},react_production_min.useEffect=function(D,G){return le.current.useEffect(D,G)},react_production_min.useId=function(){return le.current.useId()},react_production_min.useImperativeHandle=function(D,G,Ie){return le.current.useImperativeHandle(D,G,Ie)},react_production_min.useInsertionEffect=function(D,G){return le.current.useInsertionEffect(D,G)},react_production_min.useLayoutEffect=function(D,G){return le.current.useLayoutEffect(D,G)},react_production_min.useMemo=function(D,G){return le.current.useMemo(D,G)},react_production_min.useReducer=function(D,G,Ie){return le.current.useReducer(D,G,Ie)},react_production_min.useRef=function(D){return le.current.useRef(D)},react_production_min.useState=function(D){return le.current.useState(D)},react_production_min.useSyncExternalStore=function(D,G,Ie){return le.current.useSyncExternalStore(D,G,Ie)},react_production_min.useTransition=function(){return le.current.useTransition()},react_production_min.version="18.3.1",react_production_min}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production_min()),react.exports}var hasRequiredReactJsxRuntime_production_min;function requireReactJsxRuntime_production_min(){if(hasRequiredReactJsxRuntime_production_min)return reactJsxRuntime_production_min;hasRequiredReactJsxRuntime_production_min=1;var d=requireReact(),h=Symbol.for("react.element"),m=Symbol.for("react.fragment"),E=Object.prototype.hasOwnProperty,j=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function N(k,A,w){var M,_={},J=null,W=null;w!==void 0&&(J=""+w),A.key!==void 0&&(J=""+A.key),A.ref!==void 0&&(W=A.ref);for(M in A)E.call(A,M)&&!g.hasOwnProperty(M)&&(_[M]=A[M]);if(k&&k.defaultProps)for(M in A=k.defaultProps,A)_[M]===void 0&&(_[M]=A[M]);return{$$typeof:h,type:k,key:J,ref:W,props:_,_owner:j.current}}return reactJsxRuntime_production_min.Fragment=m,reactJsxRuntime_production_min.jsx=N,reactJsxRuntime_production_min.jsxs=N,reactJsxRuntime_production_min}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production_min()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports);var client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};var hasRequiredScheduler_production_min;function requireScheduler_production_min(){return hasRequiredScheduler_production_min||(hasRequiredScheduler_production_min=1,(function(d){function h(de,ye){var z=de.length;de.push(ye);e:for(;0<z;){var D=z-1>>>1,G=de[D];if(0<j(G,ye))de[D]=ye,de[z]=G,z=D;else break e}}function m(de){return de.length===0?null:de[0]}function E(de){if(de.length===0)return null;var ye=de[0],z=de.pop();if(z!==ye){de[0]=z;e:for(var D=0,G=de.length,Ie=G>>>1;D<Ie;){var ee=2*(D+1)-1,Re=de[ee],je=ee+1,Ve=de[je];if(0>j(Re,z))je<G&&0>j(Ve,Re)?(de[D]=Ve,de[je]=z,D=je):(de[D]=Re,de[ee]=z,D=ee);else if(je<G&&0>j(Ve,z))de[D]=Ve,de[je]=z,D=je;else break e}}return ye}function j(de,ye){var z=de.sortIndex-ye.sortIndex;return z!==0?z:de.id-ye.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;d.unstable_now=function(){return g.now()}}else{var N=Date,k=N.now();d.unstable_now=function(){return N.now()-k}}var A=[],w=[],M=1,_=null,J=3,W=!1,ie=!1,q=!1,L=typeof setTimeout=="function"?setTimeout:null,Ee=typeof clearTimeout=="function"?clearTimeout:null,ue=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(de){for(var ye=m(w);ye!==null;){if(ye.callback===null)E(w);else if(ye.startTime<=de)E(w),ye.sortIndex=ye.expirationTime,h(A,ye);else break;ye=m(w)}}function K(de){if(q=!1,te(de),!ie)if(m(A)!==null)ie=!0,ne(me);else{var ye=m(w);ye!==null&&le(K,ye.startTime-de)}}function me(de,ye){ie=!1,q&&(q=!1,Ee(U),U=-1),W=!0;var z=J;try{for(te(ye),_=m(A);_!==null&&(!(_.expirationTime>ye)||de&&!Ce());){var D=_.callback;if(typeof D=="function"){_.callback=null,J=_.priorityLevel;var G=D(_.expirationTime<=ye);ye=d.unstable_now(),typeof G=="function"?_.callback=G:_===m(A)&&E(A),te(ye)}else E(A);_=m(A)}if(_!==null)var Ie=!0;else{var ee=m(w);ee!==null&&le(K,ee.startTime-ye),Ie=!1}return Ie}finally{_=null,J=z,W=!1}}var re=!1,F=null,U=-1,Q=5,xe=-1;function Ce(){return!(d.unstable_now()-xe<Q)}function B(){if(F!==null){var de=d.unstable_now();xe=de;var ye=!0;try{ye=F(!0,de)}finally{ye?Z():(re=!1,F=null)}}else re=!1}var Z;if(typeof ue=="function")Z=function(){ue(B)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,I=ge.port2;ge.port1.onmessage=B,Z=function(){I.postMessage(null)}}else Z=function(){L(B,0)};function ne(de){F=de,re||(re=!0,Z())}function le(de,ye){U=L(function(){de(d.unstable_now())},ye)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(de){de.callback=null},d.unstable_continueExecution=function(){ie||W||(ie=!0,ne(me))},d.unstable_forceFrameRate=function(de){0>de||125<de?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<de?Math.floor(1e3/de):5},d.unstable_getCurrentPriorityLevel=function(){return J},d.unstable_getFirstCallbackNode=function(){return m(A)},d.unstable_next=function(de){switch(J){case 1:case 2:case 3:var ye=3;break;default:ye=J}var z=J;J=ye;try{return de()}finally{J=z}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(de,ye){switch(de){case 1:case 2:case 3:case 4:case 5:break;default:de=3}var z=J;J=de;try{return ye()}finally{J=z}},d.unstable_scheduleCallback=function(de,ye,z){var D=d.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?D+z:D):z=D,de){case 1:var G=-1;break;case 2:G=250;break;case 5:G=1073741823;break;case 4:G=1e4;break;default:G=5e3}return G=z+G,de={id:M++,callback:ye,priorityLevel:de,startTime:z,expirationTime:G,sortIndex:-1},z>D?(de.sortIndex=z,h(w,de),m(A)===null&&de===m(w)&&(q?(Ee(U),U=-1):q=!0,le(K,z-D))):(de.sortIndex=G,h(A,de),ie||W||(ie=!0,ne(me))),de},d.unstable_shouldYield=Ce,d.unstable_wrapCallback=function(de){var ye=J;return function(){var z=J;J=ye;try{return de.apply(this,arguments)}finally{J=z}}}})(scheduler_production_min)),scheduler_production_min}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production_min()),scheduler.exports}var hasRequiredReactDom_production_min;function requireReactDom_production_min(){if(hasRequiredReactDom_production_min)return reactDom_production_min;hasRequiredReactDom_production_min=1;var d=requireReact(),h=requireScheduler();function m(t){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+t,l=1;l<arguments.length;l++)n+="&args[]="+encodeURIComponent(arguments[l]);return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E=new Set,j={};function g(t,n){N(t,n),N(t+"Capture",n)}function N(t,n){for(j[t]=n,t=0;t<n.length;t++)E.add(n[t])}var k=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M={},_={};function J(t){return A.call(_,t)?!0:A.call(M,t)?!1:w.test(t)?_[t]=!0:(M[t]=!0,!1)}function W(t,n,l,u){if(l!==null&&l.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return u?!1:l!==null?!l.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function ie(t,n,l,u){if(n===null||typeof n>"u"||W(t,n,l,u))return!0;if(u)return!1;if(l!==null)switch(l.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function q(t,n,l,u,f,y,C){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=u,this.attributeNamespace=f,this.mustUseProperty=l,this.propertyName=t,this.type=n,this.sanitizeURL=y,this.removeEmptyString=C}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){L[t]=new q(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var n=t[0];L[n]=new q(n,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){L[t]=new q(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){L[t]=new q(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){L[t]=new q(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){L[t]=new q(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){L[t]=new q(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){L[t]=new q(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){L[t]=new q(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ee=/[\-:]([a-z])/g;function ue(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var n=t.replace(Ee,ue);L[n]=new q(n,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var n=t.replace(Ee,ue);L[n]=new q(n,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var n=t.replace(Ee,ue);L[n]=new q(n,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){L[t]=new q(t,1,!1,t.toLowerCase(),null,!1,!1)}),L.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){L[t]=new q(t,1,!1,t.toLowerCase(),null,!0,!0)});function te(t,n,l,u){var f=L.hasOwnProperty(n)?L[n]:null;(f!==null?f.type!==0:u||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(ie(n,l,f,u)&&(l=null),u||f===null?J(n)&&(l===null?t.removeAttribute(n):t.setAttribute(n,""+l)):f.mustUseProperty?t[f.propertyName]=l===null?f.type===3?!1:"":l:(n=f.attributeName,u=f.attributeNamespace,l===null?t.removeAttribute(n):(f=f.type,l=f===3||f===4&&l===!0?"":""+l,u?t.setAttributeNS(u,n,l):t.setAttribute(n,l))))}var K=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,me=Symbol.for("react.element"),re=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),xe=Symbol.for("react.provider"),Ce=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),de=Symbol.iterator;function ye(t){return t===null||typeof t!="object"?null:(t=de&&t[de]||t["@@iterator"],typeof t=="function"?t:null)}var z=Object.assign,D;function G(t){if(D===void 0)try{throw Error()}catch(l){var n=l.stack.trim().match(/\n( *(at )?)/);D=n&&n[1]||""}return`
`+D+t}var Ie=!1;function ee(t,n){if(!t||Ie)return"";Ie=!0;var l=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(fe){var u=fe}Reflect.construct(t,[],n)}else{try{n.call()}catch(fe){u=fe}t.call(n.prototype)}else{try{throw Error()}catch(fe){u=fe}t()}}catch(fe){if(fe&&u&&typeof fe.stack=="string"){for(var f=fe.stack.split(`
`),y=u.stack.split(`
`),C=f.length-1,O=y.length-1;1<=C&&0<=O&&f[C]!==y[O];)O--;for(;1<=C&&0<=O;C--,O--)if(f[C]!==y[O]){if(C!==1||O!==1)do if(C--,O--,0>O||f[C]!==y[O]){var V=`
`+f[C].replace(" at new "," at ");return t.displayName&&V.includes("<anonymous>")&&(V=V.replace("<anonymous>",t.displayName)),V}while(1<=C&&0<=O);break}}}finally{Ie=!1,Error.prepareStackTrace=l}return(t=t?t.displayName||t.name:"")?G(t):""}function Re(t){switch(t.tag){case 5:return G(t.type);case 16:return G("Lazy");case 13:return G("Suspense");case 19:return G("SuspenseList");case 0:case 2:case 15:return t=ee(t.type,!1),t;case 11:return t=ee(t.type.render,!1),t;case 1:return t=ee(t.type,!0),t;default:return""}}function je(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case F:return"Fragment";case re:return"Portal";case Q:return"Profiler";case U:return"StrictMode";case Z:return"Suspense";case ge:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ce:return(t.displayName||"Context")+".Consumer";case xe:return(t._context.displayName||"Context")+".Provider";case B:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return n=t.displayName||null,n!==null?n:je(t.type)||"Memo";case ne:n=t._payload,t=t._init;try{return je(t(n))}catch{}}return null}function Ve(t){var n=t.type;switch(t.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=n.render,t=t.displayName||t.name||"",n.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return je(n);case 8:return n===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function Be(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fe(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Ke(t){var n=Fe(t)?"checked":"value",l=Object.getOwnPropertyDescriptor(t.constructor.prototype,n),u=""+t[n];if(!t.hasOwnProperty(n)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,y=l.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return f.call(this)},set:function(C){u=""+C,y.call(this,C)}}),Object.defineProperty(t,n,{enumerable:l.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function ct(t){t._valueTracker||(t._valueTracker=Ke(t))}function Ss(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var l=n.getValue(),u="";return t&&(u=Fe(t)?t.checked?"true":"false":t.value),t=u,t!==l?(n.setValue(t),!0):!1}function rt(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ks(t,n){var l=n.checked;return z({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:l??t._wrapperState.initialChecked})}function as(t,n){var l=n.defaultValue==null?"":n.defaultValue,u=n.checked!=null?n.checked:n.defaultChecked;l=Be(n.value!=null?n.value:l),t._wrapperState={initialChecked:u,initialValue:l,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function xs(t,n){n=n.checked,n!=null&&te(t,"checked",n,!1)}function _t(t,n){xs(t,n);var l=Be(n.value),u=n.type;if(l!=null)u==="number"?(l===0&&t.value===""||t.value!=l)&&(t.value=""+l):t.value!==""+l&&(t.value=""+l);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}n.hasOwnProperty("value")?nt(t,n.type,l):n.hasOwnProperty("defaultValue")&&nt(t,n.type,Be(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(t.defaultChecked=!!n.defaultChecked)}function gt(t,n,l){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var u=n.type;if(!(u!=="submit"&&u!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+t._wrapperState.initialValue,l||n===t.value||(t.value=n),t.defaultValue=n}l=t.name,l!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,l!==""&&(t.name=l)}function nt(t,n,l){(n!=="number"||rt(t.ownerDocument)!==t)&&(l==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+l&&(t.defaultValue=""+l))}var Ks=Array.isArray;function Pe(t,n,l,u){if(t=t.options,n){n={};for(var f=0;f<l.length;f++)n["$"+l[f]]=!0;for(l=0;l<t.length;l++)f=n.hasOwnProperty("$"+t[l].value),t[l].selected!==f&&(t[l].selected=f),f&&u&&(t[l].defaultSelected=!0)}else{for(l=""+Be(l),n=null,f=0;f<t.length;f++){if(t[f].value===l){t[f].selected=!0,u&&(t[f].defaultSelected=!0);return}n!==null||t[f].disabled||(n=t[f])}n!==null&&(n.selected=!0)}}function cr(t,n){if(n.dangerouslySetInnerHTML!=null)throw Error(m(91));return z({},n,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function hn(t,n){var l=n.value;if(l==null){if(l=n.children,n=n.defaultValue,l!=null){if(n!=null)throw Error(m(92));if(Ks(l)){if(1<l.length)throw Error(m(93));l=l[0]}n=l}n==null&&(n=""),l=n}t._wrapperState={initialValue:Be(l)}}function _s(t,n){var l=Be(n.value),u=Be(n.defaultValue);l!=null&&(l=""+l,l!==t.value&&(t.value=l),n.defaultValue==null&&t.defaultValue!==l&&(t.defaultValue=l)),u!=null&&(t.defaultValue=""+u)}function Wr(t){var n=t.textContent;n===t._wrapperState.initialValue&&n!==""&&n!==null&&(t.value=n)}function Oe(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function at(t,n){return t==null||t==="http://www.w3.org/1999/xhtml"?Oe(n):t==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var mt,jt=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,l,u,f){MSApp.execUnsafeLocalFunction(function(){return t(n,l,u,f)})}:t})(function(t,n){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=n;else{for(mt=mt||document.createElement("div"),mt.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=mt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;n.firstChild;)t.appendChild(n.firstChild)}});function qt(t,n){if(n){var l=t.firstChild;if(l&&l===t.lastChild&&l.nodeType===3){l.nodeValue=n;return}}t.textContent=n}var ut={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gt=["Webkit","ms","Moz","O"];Object.keys(ut).forEach(function(t){Gt.forEach(function(n){n=n+t.charAt(0).toUpperCase()+t.substring(1),ut[n]=ut[t]})});function Bt(t,n,l){return n==null||typeof n=="boolean"||n===""?"":l||typeof n!="number"||n===0||ut.hasOwnProperty(t)&&ut[t]?(""+n).trim():n+"px"}function _e(t,n){t=t.style;for(var l in n)if(n.hasOwnProperty(l)){var u=l.indexOf("--")===0,f=Bt(l,n[l],u);l==="float"&&(l="cssFloat"),u?t.setProperty(l,f):t[l]=f}}var Vt=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,n){if(n){if(Vt[t]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(m(137,t));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(m(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(m(61))}if(n.style!=null&&typeof n.style!="object")throw Error(m(62))}}function St(t,n){if(t.indexOf("-")===-1)return typeof n.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Sr=null;function pn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Un=null,ot=null,Ms=null;function mi(t){if(t=Li(t)){if(typeof Un!="function")throw Error(m(280));var n=t.stateNode;n&&(n=ja(n),Un(t.stateNode,t.type,n))}}function hi(t){ot?Ms?Ms.push(t):Ms=[t]:ot=t}function Ps(){if(ot){var t=ot,n=Ms;if(Ms=ot=null,mi(t),n)for(t=0;t<n.length;t++)mi(n[t])}}function Wn(t,n){return t(n)}function Jt(){}var Er=!1;function fn(t,n,l){if(Er)return t(n,l);Er=!0;try{return Wn(t,n,l)}finally{Er=!1,(ot!==null||Ms!==null)&&(Jt(),Ps())}}function Es(t,n){var l=t.stateNode;if(l===null)return null;var u=ja(l);if(u===null)return null;l=u[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(l&&typeof l!="function")throw Error(m(231,n,typeof l));return l}var pi=!1;if(k)try{var Ws={};Object.defineProperty(Ws,"passive",{get:function(){pi=!0}}),window.addEventListener("test",Ws,Ws),window.removeEventListener("test",Ws,Ws)}catch{pi=!1}function fi(t,n,l,u,f,y,C,O,V){var fe=Array.prototype.slice.call(arguments,3);try{n.apply(l,fe)}catch(Ne){this.onError(Ne)}}var Kt=!1,$s=null,ms=!1,Me=null,Hr={onError:function(t){Kt=!0,$s=t}};function gi(t,n,l,u,f,y,C,O,V){Kt=!1,$s=null,fi.apply(Hr,arguments)}function js(t,n,l,u,f,y,C,O,V){if(gi.apply(this,arguments),Kt){if(Kt){var fe=$s;Kt=!1,$s=null}else throw Error(m(198));ms||(ms=!0,Me=fe)}}function Ds(t){var n=t,l=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(l=n.return),t=n.return;while(t)}return n.tag===3?l:null}function gn(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function yn(t){if(Ds(t)!==t)throw Error(m(188))}function Js(t){var n=t.alternate;if(!n){if(n=Ds(t),n===null)throw Error(m(188));return n!==t?null:t}for(var l=t,u=n;;){var f=l.return;if(f===null)break;var y=f.alternate;if(y===null){if(u=f.return,u!==null){l=u;continue}break}if(f.child===y.child){for(y=f.child;y;){if(y===l)return yn(f),t;if(y===u)return yn(f),n;y=y.sibling}throw Error(m(188))}if(l.return!==u.return)l=f,u=y;else{for(var C=!1,O=f.child;O;){if(O===l){C=!0,l=f,u=y;break}if(O===u){C=!0,u=f,l=y;break}O=O.sibling}if(!C){for(O=y.child;O;){if(O===l){C=!0,l=y,u=f;break}if(O===u){C=!0,u=y,l=f;break}O=O.sibling}if(!C)throw Error(m(189))}}if(l.alternate!==u)throw Error(m(190))}if(l.tag!==3)throw Error(m(188));return l.stateNode.current===l?t:n}function Ji(t){return t=Js(t),t!==null?ea(t):null}function ea(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var n=ea(t);if(n!==null)return n;t=t.sibling}return null}var Hs=h.unstable_scheduleCallback,os=h.unstable_cancelCallback,kt=h.unstable_shouldYield,ta=h.unstable_requestPaint,wt=h.unstable_now,yi=h.unstable_getCurrentPriorityLevel,we=h.unstable_ImmediatePriority,sa=h.unstable_UserBlockingPriority,Nt=h.unstable_NormalPriority,zr=h.unstable_LowPriority,ra=h.unstable_IdlePriority,xt=null,tt=null;function lt(t){if(tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(xt,t,void 0,(t.current.flags&128)===128)}catch{}}var As=Math.clz32?Math.clz32:Xt,Ei=Math.log,ji=Math.LN2;function Xt(t){return t>>>=0,t===0?32:31-(Ei(t)/ji|0)|0}var zs=64,Hn=4194304;function Ct(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gs(t,n){var l=t.pendingLanes;if(l===0)return 0;var u=0,f=t.suspendedLanes,y=t.pingedLanes,C=l&268435455;if(C!==0){var O=C&~f;O!==0?u=Ct(O):(y&=C,y!==0&&(u=Ct(y)))}else C=l&~f,C!==0?u=Ct(C):y!==0&&(u=Ct(y));if(u===0)return 0;if(n!==0&&n!==u&&(n&f)===0&&(f=u&-u,y=n&-n,f>=y||f===16&&(y&4194240)!==0))return n;if((u&4)!==0&&(u|=l&16),n=t.entangledLanes,n!==0)for(t=t.entanglements,n&=u;0<n;)l=31-As(n),f=1<<l,u|=t[l],n&=~f;return u}function io(t,n){switch(t){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gr(t,n){for(var l=t.suspendedLanes,u=t.pingedLanes,f=t.expirationTimes,y=t.pendingLanes;0<y;){var C=31-As(y),O=1<<C,V=f[C];V===-1?((O&l)===0||(O&u)!==0)&&(f[C]=io(O,n)):V<=n&&(t.expiredLanes|=O),y&=~O}}function Rt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function es(){var t=zs;return zs<<=1,(zs&4194240)===0&&(zs=64),t}function ae(t){for(var n=[],l=0;31>l;l++)n.push(t);return n}function T(t,n,l){t.pendingLanes|=n,n!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,n=31-As(n),t[n]=l}function ze(t,n){var l=t.pendingLanes&~n;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=n,t.mutableReadLanes&=n,t.entangledLanes&=n,n=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<l;){var f=31-As(l),y=1<<f;n[f]=0,u[f]=-1,t[f]=-1,l&=~y}}function Wt(t,n){var l=t.entangledLanes|=n;for(t=t.entanglements;l;){var u=31-As(l),f=1<<u;f&n|t[u]&n&&(t[u]|=n),l&=~f}}var st=0;function na(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var zn,ws,Ge,At,wi,Ri=!1,Vr=[],Vs=null,er=null,jr=null,Dt=new Map,ur=new Map,hs=[],Qe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ia(t,n){switch(t){case"focusin":case"focusout":Vs=null;break;case"dragenter":case"dragleave":er=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Dt.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":ur.delete(n.pointerId)}}function $e(t,n,l,u,f,y){return t===null||t.nativeEvent!==y?(t={blockedOn:n,domEventName:l,eventSystemFlags:u,nativeEvent:y,targetContainers:[f]},n!==null&&(n=Li(n),n!==null&&ws(n)),t):(t.eventSystemFlags|=u,n=t.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),t)}function ts(t,n,l,u,f){switch(n){case"focusin":return Vs=$e(Vs,t,n,l,u,f),!0;case"dragenter":return er=$e(er,t,n,l,u,f),!0;case"mouseover":return jr=$e(jr,t,n,l,u,f),!0;case"pointerover":var y=f.pointerId;return Dt.set(y,$e(Dt.get(y)||null,t,n,l,u,f)),!0;case"gotpointercapture":return y=f.pointerId,ur.set(y,$e(ur.get(y)||null,t,n,l,u,f)),!0}return!1}function aa(t){var n=kn(t.target);if(n!==null){var l=Ds(n);if(l!==null){if(n=l.tag,n===13){if(n=gn(l),n!==null){t.blockedOn=n,wi(t.priority,function(){Ge(l)});return}}else if(n===3&&l.stateNode.current.memoizedState.isDehydrated){t.blockedOn=l.tag===3?l.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xr(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var l=Gn(t.domEventName,t.eventSystemFlags,n[0],t.nativeEvent);if(l===null){l=t.nativeEvent;var u=new l.constructor(l.type,l);Sr=u,l.target.dispatchEvent(u),Sr=null}else return n=Li(l),n!==null&&ws(n),t.blockedOn=l,!1;n.shift()}return!0}function bi(t,n,l){Xr(t)&&l.delete(n)}function kr(){Ri=!1,Vs!==null&&Xr(Vs)&&(Vs=null),er!==null&&Xr(er)&&(er=null),jr!==null&&Xr(jr)&&(jr=null),Dt.forEach(bi),ur.forEach(bi)}function En(t,n){t.blockedOn===n&&(t.blockedOn=null,Ri||(Ri=!0,h.unstable_scheduleCallback(h.unstable_NormalPriority,kr)))}function dr(t){function n(f){return En(f,t)}if(0<Vr.length){En(Vr[0],t);for(var l=1;l<Vr.length;l++){var u=Vr[l];u.blockedOn===t&&(u.blockedOn=null)}}for(Vs!==null&&En(Vs,t),er!==null&&En(er,t),jr!==null&&En(jr,t),Dt.forEach(n),ur.forEach(n),l=0;l<hs.length;l++)u=hs[l],u.blockedOn===t&&(u.blockedOn=null);for(;0<hs.length&&(l=hs[0],l.blockedOn===null);)aa(l),l.blockedOn===null&&hs.shift()}var tr=K.ReactCurrentBatchConfig,wr=!0;function oa(t,n,l,u){var f=st,y=tr.transition;tr.transition=null;try{st=1,Ar(t,n,l,u)}finally{st=f,tr.transition=y}}function jn(t,n,l,u){var f=st,y=tr.transition;tr.transition=null;try{st=4,Ar(t,n,l,u)}finally{st=f,tr.transition=y}}function Ar(t,n,l,u){if(wr){var f=Gn(t,n,l,u);if(f===null)fo(t,n,u,ss,l),ia(t,u);else if(ts(f,t,n,l,u))u.stopPropagation();else if(ia(t,u),n&4&&-1<Qe.indexOf(t)){for(;f!==null;){var y=Li(f);if(y!==null&&zn(y),y=Gn(t,n,l,u),y===null&&fo(t,n,u,ss,l),y===f)break;f=y}f!==null&&u.stopPropagation()}else fo(t,n,u,null,l)}}var ss=null;function Gn(t,n,l,u){if(ss=null,t=pn(u),t=kn(t),t!==null)if(n=Ds(t),n===null)t=null;else if(l=n.tag,l===13){if(t=gn(n),t!==null)return t;t=null}else if(l===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null);return ss=t,null}function vi(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(yi()){case we:return 1;case sa:return 4;case Nt:case zr:return 16;case ra:return 536870912;default:return 16}default:return 16}}var xr=null,Ni=null,Vn=null;function la(){if(Vn)return Vn;var t,n=Ni,l=n.length,u,f="value"in xr?xr.value:xr.textContent,y=f.length;for(t=0;t<l&&n[t]===f[t];t++);var C=l-t;for(u=1;u<=C&&n[l-u]===f[y-u];u++);return Vn=f.slice(t,1<u?1-u:void 0)}function ht(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function wn(){return!0}function Rn(){return!1}function Ht(t){function n(l,u,f,y,C){this._reactName=l,this._targetInst=f,this.type=u,this.nativeEvent=y,this.target=C,this.currentTarget=null;for(var O in t)t.hasOwnProperty(O)&&(l=t[O],this[O]=l?l(y):y[O]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?wn:Rn,this.isPropagationStopped=Rn,this}return z(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var l=this.nativeEvent;l&&(l.preventDefault?l.preventDefault():typeof l.returnValue!="unknown"&&(l.returnValue=!1),this.isDefaultPrevented=wn)},stopPropagation:function(){var l=this.nativeEvent;l&&(l.stopPropagation?l.stopPropagation():typeof l.cancelBubble!="unknown"&&(l.cancelBubble=!0),this.isPropagationStopped=wn)},persist:function(){},isPersistent:wn}),n}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pe=Ht(Yr),et=z({},Yr,{view:0,detail:0}),rs=Ht(et),Zr,Xn,bn,Yn=z({},et,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bn&&(bn&&t.type==="mousemove"?(Zr=t.screenX-bn.screenX,Xn=t.screenY-bn.screenY):Xn=Zr=0,bn=t),Zr)},movementY:function(t){return"movementY"in t?t.movementY:Xn}}),ca=Ht(Yn),Ci=z({},Yn,{dataTransfer:0}),Yt=Ht(Ci),Si=z({},et,{relatedTarget:0}),It=Ht(Si),Zn=z({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ir=Ht(Zn),bt=z({},Yr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xe=Ht(bt),ao=z({},Yr,{data:0}),vt=Ht(ao),Tr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sr(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=oo[t])?!!n[t]:!1}function vn(){return sr}var ua=z({},et,{key:function(t){if(t.key){var n=Tr[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=ht(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qr[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vn,charCode:function(t){return t.type==="keypress"?ht(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ht(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ki=Ht(ua),da=z({},Yn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ai=Ht(da),lo=z({},et,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vn}),qr=Ht(lo),Ii=z({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),co=Ht(Ii),Nn=z({},Yn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uo=Ht(Nn),Rr=[9,13,27,32],Kr=k&&"CompositionEvent"in window,ls=null;k&&"documentMode"in document&&(ls=document.documentMode);var xa=k&&"TextEvent"in window&&!ls,Xs=k&&(!Kr||ls&&8<ls&&11>=ls),ma=" ",Qn=!1;function ha(t,n){switch(t){case"keyup":return Rr.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ti(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ps=!1;function xo(t,n){switch(t){case"compositionend":return Ti(n);case"keypress":return n.which!==32?null:(Qn=!0,ma);case"textInput":return t=n.data,t===ma&&Qn?null:t;default:return null}}function _i(t,n){if(ps)return t==="compositionend"||!Kr&&ha(t,n)?(t=la(),Vn=Ni=xr=null,ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Xs&&n.locale!=="ko"?null:n.data;default:return null}}var Cn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dt(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Cn[t.type]:n==="textarea"}function Sn(t,n,l,u){hi(u),n=ga(n,"onChange"),0<n.length&&(l=new pe("onChange","change",null,l,u),t.push({event:l,listeners:n}))}var b=null,e=null;function s(t){Pl(t,0)}function r(t){var n=$n(t);if(Ss(n))return t}function i(t,n){if(t==="change")return n}var a=!1;if(k){var o;if(k){var c="oninput"in document;if(!c){var x=document.createElement("div");x.setAttribute("oninput","return;"),c=typeof x.oninput=="function"}o=c}else o=!1;a=o&&(!document.documentMode||9<document.documentMode)}function p(){b&&(b.detachEvent("onpropertychange",R),e=b=null)}function R(t){if(t.propertyName==="value"&&r(e)){var n=[];Sn(n,e,t,pn(t)),fn(s,n)}}function v(t,n,l){t==="focusin"?(p(),b=n,e=l,b.attachEvent("onpropertychange",R)):t==="focusout"&&p()}function S(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return r(e)}function P(t,n){if(t==="click")return r(n)}function H(t,n){if(t==="input"||t==="change")return r(n)}function Y(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var se=typeof Object.is=="function"?Object.is:Y;function he(t,n){if(se(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var l=Object.keys(t),u=Object.keys(n);if(l.length!==u.length)return!1;for(u=0;u<l.length;u++){var f=l[u];if(!A.call(n,f)||!se(t[f],n[f]))return!1}return!0}function ke(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ae(t,n){var l=ke(t);t=0;for(var u;l;){if(l.nodeType===3){if(u=t+l.textContent.length,t<=n&&u>=n)return{node:l,offset:n-t};t=u}e:{for(;l;){if(l.nextSibling){l=l.nextSibling;break e}l=l.parentNode}l=void 0}l=ke(l)}}function ve(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?ve(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function it(){for(var t=window,n=rt();n instanceof t.HTMLIFrameElement;){try{var l=typeof n.contentWindow.location.href=="string"}catch{l=!1}if(l)t=n.contentWindow;else break;n=rt(t.document)}return n}function Je(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}function Rs(t){var n=it(),l=t.focusedElem,u=t.selectionRange;if(n!==l&&l&&l.ownerDocument&&ve(l.ownerDocument.documentElement,l)){if(u!==null&&Je(l)){if(n=u.start,t=u.end,t===void 0&&(t=n),"selectionStart"in l)l.selectionStart=n,l.selectionEnd=Math.min(t,l.value.length);else if(t=(n=l.ownerDocument||document)&&n.defaultView||window,t.getSelection){t=t.getSelection();var f=l.textContent.length,y=Math.min(u.start,f);u=u.end===void 0?y:Math.min(u.end,f),!t.extend&&y>u&&(f=u,u=y,y=f),f=Ae(l,y);var C=Ae(l,u);f&&C&&(t.rangeCount!==1||t.anchorNode!==f.node||t.anchorOffset!==f.offset||t.focusNode!==C.node||t.focusOffset!==C.offset)&&(n=n.createRange(),n.setStart(f.node,f.offset),t.removeAllRanges(),y>u?(t.addRange(n),t.extend(C.node,C.offset)):(n.setEnd(C.node,C.offset),t.addRange(n)))}}for(n=[],t=l;t=t.parentNode;)t.nodeType===1&&n.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof l.focus=="function"&&l.focus(),l=0;l<n.length;l++)t=n[l],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ys=k&&"documentMode"in document&&11>=document.documentMode,Zt=null,Et=null,Lt=null,fs=!1;function _r(t,n,l){var u=l.window===l?l.document:l.nodeType===9?l:l.ownerDocument;fs||Zt==null||Zt!==rt(u)||(u=Zt,"selectionStart"in u&&Je(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Lt&&he(Lt,u)||(Lt=u,u=ga(Et,"onSelect"),0<u.length&&(n=new pe("onSelect","select",null,n,l),t.push({event:n,listeners:u}),n.target=Zt)))}function mr(t,n){var l={};return l[t.toLowerCase()]=n.toLowerCase(),l["Webkit"+t]="webkit"+n,l["Moz"+t]="moz"+n,l}var $r={animationend:mr("Animation","AnimationEnd"),animationiteration:mr("Animation","AnimationIteration"),animationstart:mr("Animation","AnimationStart"),transitionend:mr("Transition","TransitionEnd")},Mi={},Cl={};k&&(Cl=document.createElement("div").style,"AnimationEvent"in window||(delete $r.animationend.animation,delete $r.animationiteration.animation,delete $r.animationstart.animation),"TransitionEvent"in window||delete $r.transitionend.transition);function pa(t){if(Mi[t])return Mi[t];if(!$r[t])return t;var n=$r[t],l;for(l in n)if(n.hasOwnProperty(l)&&l in Cl)return Mi[t]=n[l];return t}var Sl=pa("animationend"),kl=pa("animationiteration"),Al=pa("animationstart"),Il=pa("transitionend"),Tl=new Map,_l="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(t,n){Tl.set(t,n),g(n,[t])}for(var mo=0;mo<_l.length;mo++){var ho=_l[mo],yu=ho.toLowerCase(),Eu=ho[0].toUpperCase()+ho.slice(1);Jr(yu,"on"+Eu)}Jr(Sl,"onAnimationEnd"),Jr(kl,"onAnimationIteration"),Jr(Al,"onAnimationStart"),Jr("dblclick","onDoubleClick"),Jr("focusin","onFocus"),Jr("focusout","onBlur"),Jr(Il,"onTransitionEnd"),N("onMouseEnter",["mouseout","mouseover"]),N("onMouseLeave",["mouseout","mouseover"]),N("onPointerEnter",["pointerout","pointerover"]),N("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ju=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pi));function Ml(t,n,l){var u=t.type||"unknown-event";t.currentTarget=l,js(u,n,void 0,t),t.currentTarget=null}function Pl(t,n){n=(n&4)!==0;for(var l=0;l<t.length;l++){var u=t[l],f=u.event;u=u.listeners;e:{var y=void 0;if(n)for(var C=u.length-1;0<=C;C--){var O=u[C],V=O.instance,fe=O.currentTarget;if(O=O.listener,V!==y&&f.isPropagationStopped())break e;Ml(f,O,fe),y=V}else for(C=0;C<u.length;C++){if(O=u[C],V=O.instance,fe=O.currentTarget,O=O.listener,V!==y&&f.isPropagationStopped())break e;Ml(f,O,fe),y=V}}}if(ms)throw t=Me,ms=!1,Me=null,t}function Mt(t,n){var l=n[Ro];l===void 0&&(l=n[Ro]=new Set);var u=t+"__bubble";l.has(u)||(Dl(n,t,2,!1),l.add(u))}function po(t,n,l){var u=0;n&&(u|=4),Dl(l,t,u,n)}var fa="_reactListening"+Math.random().toString(36).slice(2);function Di(t){if(!t[fa]){t[fa]=!0,E.forEach(function(l){l!=="selectionchange"&&(ju.has(l)||po(l,!1,t),po(l,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[fa]||(n[fa]=!0,po("selectionchange",!1,n))}}function Dl(t,n,l,u){switch(vi(n)){case 1:var f=oa;break;case 4:f=jn;break;default:f=Ar}l=f.bind(null,n,l,t),f=void 0,!pi||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),u?f!==void 0?t.addEventListener(n,l,{capture:!0,passive:f}):t.addEventListener(n,l,!0):f!==void 0?t.addEventListener(n,l,{passive:f}):t.addEventListener(n,l,!1)}function fo(t,n,l,u,f){var y=u;if((n&1)===0&&(n&2)===0&&u!==null)e:for(;;){if(u===null)return;var C=u.tag;if(C===3||C===4){var O=u.stateNode.containerInfo;if(O===f||O.nodeType===8&&O.parentNode===f)break;if(C===4)for(C=u.return;C!==null;){var V=C.tag;if((V===3||V===4)&&(V=C.stateNode.containerInfo,V===f||V.nodeType===8&&V.parentNode===f))return;C=C.return}for(;O!==null;){if(C=kn(O),C===null)return;if(V=C.tag,V===5||V===6){u=y=C;continue e}O=O.parentNode}}u=u.return}fn(function(){var fe=y,Ne=pn(l),Se=[];e:{var be=Tl.get(t);if(be!==void 0){var De=pe,Ue=t;switch(t){case"keypress":if(ht(l)===0)break e;case"keydown":case"keyup":De=ki;break;case"focusin":Ue="focus",De=It;break;case"focusout":Ue="blur",De=It;break;case"beforeblur":case"afterblur":De=It;break;case"click":if(l.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":De=ca;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":De=Yt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":De=qr;break;case Sl:case kl:case Al:De=Ir;break;case Il:De=co;break;case"scroll":De=rs;break;case"wheel":De=uo;break;case"copy":case"cut":case"paste":De=Xe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":De=Ai}var We=(n&4)!==0,Qt=!We&&t==="scroll",oe=We?be!==null?be+"Capture":null:be;We=[];for(var $=fe,ce;$!==null;){ce=$;var Te=ce.stateNode;if(ce.tag===5&&Te!==null&&(ce=Te,oe!==null&&(Te=Es($,oe),Te!=null&&We.push(Oi($,Te,ce)))),Qt)break;$=$.return}0<We.length&&(be=new De(be,Ue,null,l,Ne),Se.push({event:be,listeners:We}))}}if((n&7)===0){e:{if(be=t==="mouseover"||t==="pointerover",De=t==="mouseout"||t==="pointerout",be&&l!==Sr&&(Ue=l.relatedTarget||l.fromElement)&&(kn(Ue)||Ue[Mr]))break e;if((De||be)&&(be=Ne.window===Ne?Ne:(be=Ne.ownerDocument)?be.defaultView||be.parentWindow:window,De?(Ue=l.relatedTarget||l.toElement,De=fe,Ue=Ue?kn(Ue):null,Ue!==null&&(Qt=Ds(Ue),Ue!==Qt||Ue.tag!==5&&Ue.tag!==6)&&(Ue=null)):(De=null,Ue=fe),De!==Ue)){if(We=ca,Te="onMouseLeave",oe="onMouseEnter",$="mouse",(t==="pointerout"||t==="pointerover")&&(We=Ai,Te="onPointerLeave",oe="onPointerEnter",$="pointer"),Qt=De==null?be:$n(De),ce=Ue==null?be:$n(Ue),be=new We(Te,$+"leave",De,l,Ne),be.target=Qt,be.relatedTarget=ce,Te=null,kn(Ne)===fe&&(We=new We(oe,$+"enter",Ue,l,Ne),We.target=ce,We.relatedTarget=Qt,Te=We),Qt=Te,De&&Ue)t:{for(We=De,oe=Ue,$=0,ce=We;ce;ce=qn(ce))$++;for(ce=0,Te=oe;Te;Te=qn(Te))ce++;for(;0<$-ce;)We=qn(We),$--;for(;0<ce-$;)oe=qn(oe),ce--;for(;$--;){if(We===oe||oe!==null&&We===oe.alternate)break t;We=qn(We),oe=qn(oe)}We=null}else We=null;De!==null&&Ol(Se,be,De,We,!1),Ue!==null&&Qt!==null&&Ol(Se,Qt,Ue,We,!0)}}e:{if(be=fe?$n(fe):window,De=be.nodeName&&be.nodeName.toLowerCase(),De==="select"||De==="input"&&be.type==="file")var He=i;else if(dt(be))if(a)He=H;else{He=S;var Ye=v}else(De=be.nodeName)&&De.toLowerCase()==="input"&&(be.type==="checkbox"||be.type==="radio")&&(He=P);if(He&&(He=He(t,fe))){Sn(Se,He,l,Ne);break e}Ye&&Ye(t,be,fe),t==="focusout"&&(Ye=be._wrapperState)&&Ye.controlled&&be.type==="number"&&nt(be,"number",be.value)}switch(Ye=fe?$n(fe):window,t){case"focusin":(dt(Ye)||Ye.contentEditable==="true")&&(Zt=Ye,Et=fe,Lt=null);break;case"focusout":Lt=Et=Zt=null;break;case"mousedown":fs=!0;break;case"contextmenu":case"mouseup":case"dragend":fs=!1,_r(Se,l,Ne);break;case"selectionchange":if(Ys)break;case"keydown":case"keyup":_r(Se,l,Ne)}var Ze;if(Kr)e:{switch(t){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else ps?ha(t,l)&&(qe="onCompositionEnd"):t==="keydown"&&l.keyCode===229&&(qe="onCompositionStart");qe&&(Xs&&l.locale!=="ko"&&(ps||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&ps&&(Ze=la()):(xr=Ne,Ni="value"in xr?xr.value:xr.textContent,ps=!0)),Ye=ga(fe,qe),0<Ye.length&&(qe=new vt(qe,t,null,l,Ne),Se.push({event:qe,listeners:Ye}),Ze?qe.data=Ze:(Ze=Ti(l),Ze!==null&&(qe.data=Ze)))),(Ze=xa?xo(t,l):_i(t,l))&&(fe=ga(fe,"onBeforeInput"),0<fe.length&&(Ne=new vt("onBeforeInput","beforeinput",null,l,Ne),Se.push({event:Ne,listeners:fe}),Ne.data=Ze))}Pl(Se,n)})}function Oi(t,n,l){return{instance:t,listener:n,currentTarget:l}}function ga(t,n){for(var l=n+"Capture",u=[];t!==null;){var f=t,y=f.stateNode;f.tag===5&&y!==null&&(f=y,y=Es(t,l),y!=null&&u.unshift(Oi(t,y,f)),y=Es(t,n),y!=null&&u.push(Oi(t,y,f))),t=t.return}return u}function qn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ol(t,n,l,u,f){for(var y=n._reactName,C=[];l!==null&&l!==u;){var O=l,V=O.alternate,fe=O.stateNode;if(V!==null&&V===u)break;O.tag===5&&fe!==null&&(O=fe,f?(V=Es(l,y),V!=null&&C.unshift(Oi(l,V,O))):f||(V=Es(l,y),V!=null&&C.push(Oi(l,V,O)))),l=l.return}C.length!==0&&t.push({event:n,listeners:C})}var wu=/\r\n?/g,Ru=/\u0000|\uFFFD/g;function Bl(t){return(typeof t=="string"?t:""+t).replace(wu,`
`).replace(Ru,"")}function ya(t,n,l){if(n=Bl(n),Bl(t)!==n&&l)throw Error(m(425))}function Ea(){}var go=null,yo=null;function Eo(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var jo=typeof setTimeout=="function"?setTimeout:void 0,bu=typeof clearTimeout=="function"?clearTimeout:void 0,Ll=typeof Promise=="function"?Promise:void 0,vu=typeof queueMicrotask=="function"?queueMicrotask:typeof Ll<"u"?function(t){return Ll.resolve(null).then(t).catch(Nu)}:jo;function Nu(t){setTimeout(function(){throw t})}function wo(t,n){var l=n,u=0;do{var f=l.nextSibling;if(t.removeChild(l),f&&f.nodeType===8)if(l=f.data,l==="/$"){if(u===0){t.removeChild(f),dr(n);return}u--}else l!=="$"&&l!=="$?"&&l!=="$!"||u++;l=f}while(l);dr(n)}function en(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return t}function Fl(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var l=t.data;if(l==="$"||l==="$!"||l==="$?"){if(n===0)return t;n--}else l==="/$"&&n++}t=t.previousSibling}return null}var Kn=Math.random().toString(36).slice(2),br="__reactFiber$"+Kn,Bi="__reactProps$"+Kn,Mr="__reactContainer$"+Kn,Ro="__reactEvents$"+Kn,Cu="__reactListeners$"+Kn,Su="__reactHandles$"+Kn;function kn(t){var n=t[br];if(n)return n;for(var l=t.parentNode;l;){if(n=l[Mr]||l[br]){if(l=n.alternate,n.child!==null||l!==null&&l.child!==null)for(t=Fl(t);t!==null;){if(l=t[br])return l;t=Fl(t)}return n}t=l,l=t.parentNode}return null}function Li(t){return t=t[br]||t[Mr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $n(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(m(33))}function ja(t){return t[Bi]||null}var bo=[],Jn=-1;function tn(t){return{current:t}}function Pt(t){0>Jn||(t.current=bo[Jn],bo[Jn]=null,Jn--)}function Tt(t,n){Jn++,bo[Jn]=t.current,t.current=n}var sn={},bs=tn(sn),Os=tn(!1),An=sn;function ei(t,n){var l=t.type.contextTypes;if(!l)return sn;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===n)return u.__reactInternalMemoizedMaskedChildContext;var f={},y;for(y in l)f[y]=n[y];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=n,t.__reactInternalMemoizedMaskedChildContext=f),f}function Bs(t){return t=t.childContextTypes,t!=null}function wa(){Pt(Os),Pt(bs)}function Ul(t,n,l){if(bs.current!==sn)throw Error(m(168));Tt(bs,n),Tt(Os,l)}function Wl(t,n,l){var u=t.stateNode;if(n=n.childContextTypes,typeof u.getChildContext!="function")return l;u=u.getChildContext();for(var f in u)if(!(f in n))throw Error(m(108,Ve(t)||"Unknown",f));return z({},l,u)}function Ra(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||sn,An=bs.current,Tt(bs,t),Tt(Os,Os.current),!0}function Hl(t,n,l){var u=t.stateNode;if(!u)throw Error(m(169));l?(t=Wl(t,n,An),u.__reactInternalMemoizedMergedChildContext=t,Pt(Os),Pt(bs),Tt(bs,t)):Pt(Os),Tt(Os,l)}var Pr=null,ba=!1,vo=!1;function zl(t){Pr===null?Pr=[t]:Pr.push(t)}function ku(t){ba=!0,zl(t)}function rn(){if(!vo&&Pr!==null){vo=!0;var t=0,n=st;try{var l=Pr;for(st=1;t<l.length;t++){var u=l[t];do u=u(!0);while(u!==null)}Pr=null,ba=!1}catch(f){throw Pr!==null&&(Pr=Pr.slice(t+1)),Hs(we,rn),f}finally{st=n,vo=!1}}return null}var ti=[],si=0,va=null,Na=0,rr=[],nr=0,In=null,Dr=1,Or="";function Tn(t,n){ti[si++]=Na,ti[si++]=va,va=t,Na=n}function Gl(t,n,l){rr[nr++]=Dr,rr[nr++]=Or,rr[nr++]=In,In=t;var u=Dr;t=Or;var f=32-As(u)-1;u&=~(1<<f),l+=1;var y=32-As(n)+f;if(30<y){var C=f-f%5;y=(u&(1<<C)-1).toString(32),u>>=C,f-=C,Dr=1<<32-As(n)+f|l<<f|u,Or=y+t}else Dr=1<<y|l<<f|u,Or=t}function No(t){t.return!==null&&(Tn(t,1),Gl(t,1,0))}function Co(t){for(;t===va;)va=ti[--si],ti[si]=null,Na=ti[--si],ti[si]=null;for(;t===In;)In=rr[--nr],rr[nr]=null,Or=rr[--nr],rr[nr]=null,Dr=rr[--nr],rr[nr]=null}var Zs=null,Qs=null,Ot=!1,hr=null;function Vl(t,n){var l=lr(5,null,null,0);l.elementType="DELETED",l.stateNode=n,l.return=t,n=t.deletions,n===null?(t.deletions=[l],t.flags|=16):n.push(l)}function Xl(t,n){switch(t.tag){case 5:var l=t.type;return n=n.nodeType!==1||l.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(t.stateNode=n,Zs=t,Qs=en(n.firstChild),!0):!1;case 6:return n=t.pendingProps===""||n.nodeType!==3?null:n,n!==null?(t.stateNode=n,Zs=t,Qs=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(l=In!==null?{id:Dr,overflow:Or}:null,t.memoizedState={dehydrated:n,treeContext:l,retryLane:1073741824},l=lr(18,null,null,0),l.stateNode=n,l.return=t,t.child=l,Zs=t,Qs=null,!0):!1;default:return!1}}function So(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ko(t){if(Ot){var n=Qs;if(n){var l=n;if(!Xl(t,n)){if(So(t))throw Error(m(418));n=en(l.nextSibling);var u=Zs;n&&Xl(t,n)?Vl(u,l):(t.flags=t.flags&-4097|2,Ot=!1,Zs=t)}}else{if(So(t))throw Error(m(418));t.flags=t.flags&-4097|2,Ot=!1,Zs=t}}}function Yl(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zs=t}function Ca(t){if(t!==Zs)return!1;if(!Ot)return Yl(t),Ot=!0,!1;var n;if((n=t.tag!==3)&&!(n=t.tag!==5)&&(n=t.type,n=n!=="head"&&n!=="body"&&!Eo(t.type,t.memoizedProps)),n&&(n=Qs)){if(So(t))throw Zl(),Error(m(418));for(;n;)Vl(t,n),n=en(n.nextSibling)}if(Yl(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(m(317));e:{for(t=t.nextSibling,n=0;t;){if(t.nodeType===8){var l=t.data;if(l==="/$"){if(n===0){Qs=en(t.nextSibling);break e}n--}else l!=="$"&&l!=="$!"&&l!=="$?"||n++}t=t.nextSibling}Qs=null}}else Qs=Zs?en(t.stateNode.nextSibling):null;return!0}function Zl(){for(var t=Qs;t;)t=en(t.nextSibling)}function ri(){Qs=Zs=null,Ot=!1}function Ao(t){hr===null?hr=[t]:hr.push(t)}var Au=K.ReactCurrentBatchConfig;function Fi(t,n,l){if(t=l.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(l._owner){if(l=l._owner,l){if(l.tag!==1)throw Error(m(309));var u=l.stateNode}if(!u)throw Error(m(147,t));var f=u,y=""+t;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===y?n.ref:(n=function(C){var O=f.refs;C===null?delete O[y]:O[y]=C},n._stringRef=y,n)}if(typeof t!="string")throw Error(m(284));if(!l._owner)throw Error(m(290,t))}return t}function Sa(t,n){throw t=Object.prototype.toString.call(n),Error(m(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}function Ql(t){var n=t._init;return n(t._payload)}function ql(t){function n(oe,$){if(t){var ce=oe.deletions;ce===null?(oe.deletions=[$],oe.flags|=16):ce.push($)}}function l(oe,$){if(!t)return null;for(;$!==null;)n(oe,$),$=$.sibling;return null}function u(oe,$){for(oe=new Map;$!==null;)$.key!==null?oe.set($.key,$):oe.set($.index,$),$=$.sibling;return oe}function f(oe,$){return oe=xn(oe,$),oe.index=0,oe.sibling=null,oe}function y(oe,$,ce){return oe.index=ce,t?(ce=oe.alternate,ce!==null?(ce=ce.index,ce<$?(oe.flags|=2,$):ce):(oe.flags|=2,$)):(oe.flags|=1048576,$)}function C(oe){return t&&oe.alternate===null&&(oe.flags|=2),oe}function O(oe,$,ce,Te){return $===null||$.tag!==6?($=jl(ce,oe.mode,Te),$.return=oe,$):($=f($,ce),$.return=oe,$)}function V(oe,$,ce,Te){var He=ce.type;return He===F?Ne(oe,$,ce.props.children,Te,ce.key):$!==null&&($.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===ne&&Ql(He)===$.type)?(Te=f($,ce.props),Te.ref=Fi(oe,$,ce),Te.return=oe,Te):(Te=Ka(ce.type,ce.key,ce.props,null,oe.mode,Te),Te.ref=Fi(oe,$,ce),Te.return=oe,Te)}function fe(oe,$,ce,Te){return $===null||$.tag!==4||$.stateNode.containerInfo!==ce.containerInfo||$.stateNode.implementation!==ce.implementation?($=wl(ce,oe.mode,Te),$.return=oe,$):($=f($,ce.children||[]),$.return=oe,$)}function Ne(oe,$,ce,Te,He){return $===null||$.tag!==7?($=Fn(ce,oe.mode,Te,He),$.return=oe,$):($=f($,ce),$.return=oe,$)}function Se(oe,$,ce){if(typeof $=="string"&&$!==""||typeof $=="number")return $=jl(""+$,oe.mode,ce),$.return=oe,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case me:return ce=Ka($.type,$.key,$.props,null,oe.mode,ce),ce.ref=Fi(oe,null,$),ce.return=oe,ce;case re:return $=wl($,oe.mode,ce),$.return=oe,$;case ne:var Te=$._init;return Se(oe,Te($._payload),ce)}if(Ks($)||ye($))return $=Fn($,oe.mode,ce,null),$.return=oe,$;Sa(oe,$)}return null}function be(oe,$,ce,Te){var He=$!==null?$.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number")return He!==null?null:O(oe,$,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case me:return ce.key===He?V(oe,$,ce,Te):null;case re:return ce.key===He?fe(oe,$,ce,Te):null;case ne:return He=ce._init,be(oe,$,He(ce._payload),Te)}if(Ks(ce)||ye(ce))return He!==null?null:Ne(oe,$,ce,Te,null);Sa(oe,ce)}return null}function De(oe,$,ce,Te,He){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return oe=oe.get(ce)||null,O($,oe,""+Te,He);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case me:return oe=oe.get(Te.key===null?ce:Te.key)||null,V($,oe,Te,He);case re:return oe=oe.get(Te.key===null?ce:Te.key)||null,fe($,oe,Te,He);case ne:var Ye=Te._init;return De(oe,$,ce,Ye(Te._payload),He)}if(Ks(Te)||ye(Te))return oe=oe.get(ce)||null,Ne($,oe,Te,He,null);Sa($,Te)}return null}function Ue(oe,$,ce,Te){for(var He=null,Ye=null,Ze=$,qe=$=0,ds=null;Ze!==null&&qe<ce.length;qe++){Ze.index>qe?(ds=Ze,Ze=null):ds=Ze.sibling;var ft=be(oe,Ze,ce[qe],Te);if(ft===null){Ze===null&&(Ze=ds);break}t&&Ze&&ft.alternate===null&&n(oe,Ze),$=y(ft,$,qe),Ye===null?He=ft:Ye.sibling=ft,Ye=ft,Ze=ds}if(qe===ce.length)return l(oe,Ze),Ot&&Tn(oe,qe),He;if(Ze===null){for(;qe<ce.length;qe++)Ze=Se(oe,ce[qe],Te),Ze!==null&&($=y(Ze,$,qe),Ye===null?He=Ze:Ye.sibling=Ze,Ye=Ze);return Ot&&Tn(oe,qe),He}for(Ze=u(oe,Ze);qe<ce.length;qe++)ds=De(Ze,oe,qe,ce[qe],Te),ds!==null&&(t&&ds.alternate!==null&&Ze.delete(ds.key===null?qe:ds.key),$=y(ds,$,qe),Ye===null?He=ds:Ye.sibling=ds,Ye=ds);return t&&Ze.forEach(function(mn){return n(oe,mn)}),Ot&&Tn(oe,qe),He}function We(oe,$,ce,Te){var He=ye(ce);if(typeof He!="function")throw Error(m(150));if(ce=He.call(ce),ce==null)throw Error(m(151));for(var Ye=He=null,Ze=$,qe=$=0,ds=null,ft=ce.next();Ze!==null&&!ft.done;qe++,ft=ce.next()){Ze.index>qe?(ds=Ze,Ze=null):ds=Ze.sibling;var mn=be(oe,Ze,ft.value,Te);if(mn===null){Ze===null&&(Ze=ds);break}t&&Ze&&mn.alternate===null&&n(oe,Ze),$=y(mn,$,qe),Ye===null?He=mn:Ye.sibling=mn,Ye=mn,Ze=ds}if(ft.done)return l(oe,Ze),Ot&&Tn(oe,qe),He;if(Ze===null){for(;!ft.done;qe++,ft=ce.next())ft=Se(oe,ft.value,Te),ft!==null&&($=y(ft,$,qe),Ye===null?He=ft:Ye.sibling=ft,Ye=ft);return Ot&&Tn(oe,qe),He}for(Ze=u(oe,Ze);!ft.done;qe++,ft=ce.next())ft=De(Ze,oe,qe,ft.value,Te),ft!==null&&(t&&ft.alternate!==null&&Ze.delete(ft.key===null?qe:ft.key),$=y(ft,$,qe),Ye===null?He=ft:Ye.sibling=ft,Ye=ft);return t&&Ze.forEach(function(ld){return n(oe,ld)}),Ot&&Tn(oe,qe),He}function Qt(oe,$,ce,Te){if(typeof ce=="object"&&ce!==null&&ce.type===F&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case me:e:{for(var He=ce.key,Ye=$;Ye!==null;){if(Ye.key===He){if(He=ce.type,He===F){if(Ye.tag===7){l(oe,Ye.sibling),$=f(Ye,ce.props.children),$.return=oe,oe=$;break e}}else if(Ye.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===ne&&Ql(He)===Ye.type){l(oe,Ye.sibling),$=f(Ye,ce.props),$.ref=Fi(oe,Ye,ce),$.return=oe,oe=$;break e}l(oe,Ye);break}else n(oe,Ye);Ye=Ye.sibling}ce.type===F?($=Fn(ce.props.children,oe.mode,Te,ce.key),$.return=oe,oe=$):(Te=Ka(ce.type,ce.key,ce.props,null,oe.mode,Te),Te.ref=Fi(oe,$,ce),Te.return=oe,oe=Te)}return C(oe);case re:e:{for(Ye=ce.key;$!==null;){if($.key===Ye)if($.tag===4&&$.stateNode.containerInfo===ce.containerInfo&&$.stateNode.implementation===ce.implementation){l(oe,$.sibling),$=f($,ce.children||[]),$.return=oe,oe=$;break e}else{l(oe,$);break}else n(oe,$);$=$.sibling}$=wl(ce,oe.mode,Te),$.return=oe,oe=$}return C(oe);case ne:return Ye=ce._init,Qt(oe,$,Ye(ce._payload),Te)}if(Ks(ce))return Ue(oe,$,ce,Te);if(ye(ce))return We(oe,$,ce,Te);Sa(oe,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"?(ce=""+ce,$!==null&&$.tag===6?(l(oe,$.sibling),$=f($,ce),$.return=oe,oe=$):(l(oe,$),$=jl(ce,oe.mode,Te),$.return=oe,oe=$),C(oe)):l(oe,$)}return Qt}var ni=ql(!0),Kl=ql(!1),ka=tn(null),Aa=null,ii=null,Io=null;function To(){Io=ii=Aa=null}function _o(t){var n=ka.current;Pt(ka),t._currentValue=n}function Mo(t,n,l){for(;t!==null;){var u=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,u!==null&&(u.childLanes|=n)):u!==null&&(u.childLanes&n)!==n&&(u.childLanes|=n),t===l)break;t=t.return}}function ai(t,n){Aa=t,Io=ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&n)!==0&&(Ls=!0),t.firstContext=null)}function ir(t){var n=t._currentValue;if(Io!==t)if(t={context:t,memoizedValue:n,next:null},ii===null){if(Aa===null)throw Error(m(308));ii=t,Aa.dependencies={lanes:0,firstContext:t}}else ii=ii.next=t;return n}var _n=null;function Po(t){_n===null?_n=[t]:_n.push(t)}function $l(t,n,l,u){var f=n.interleaved;return f===null?(l.next=l,Po(n)):(l.next=f.next,f.next=l),n.interleaved=l,Br(t,u)}function Br(t,n){t.lanes|=n;var l=t.alternate;for(l!==null&&(l.lanes|=n),l=t,t=t.return;t!==null;)t.childLanes|=n,l=t.alternate,l!==null&&(l.childLanes|=n),l=t,t=t.return;return l.tag===3?l.stateNode:null}var nn=!1;function Do(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jl(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Lr(t,n){return{eventTime:t,lane:n,tag:0,payload:null,callback:null,next:null}}function an(t,n,l){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(pt&2)!==0){var f=u.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),u.pending=n,Br(t,l)}return f=u.interleaved,f===null?(n.next=n,Po(u)):(n.next=f.next,f.next=n),u.interleaved=n,Br(t,l)}function Ia(t,n,l){if(n=n.updateQueue,n!==null&&(n=n.shared,(l&4194240)!==0)){var u=n.lanes;u&=t.pendingLanes,l|=u,n.lanes=l,Wt(t,l)}}function ec(t,n){var l=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,l===u)){var f=null,y=null;if(l=l.firstBaseUpdate,l!==null){do{var C={eventTime:l.eventTime,lane:l.lane,tag:l.tag,payload:l.payload,callback:l.callback,next:null};y===null?f=y=C:y=y.next=C,l=l.next}while(l!==null);y===null?f=y=n:y=y.next=n}else f=y=n;l={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:y,shared:u.shared,effects:u.effects},t.updateQueue=l;return}t=l.lastBaseUpdate,t===null?l.firstBaseUpdate=n:t.next=n,l.lastBaseUpdate=n}function Ta(t,n,l,u){var f=t.updateQueue;nn=!1;var y=f.firstBaseUpdate,C=f.lastBaseUpdate,O=f.shared.pending;if(O!==null){f.shared.pending=null;var V=O,fe=V.next;V.next=null,C===null?y=fe:C.next=fe,C=V;var Ne=t.alternate;Ne!==null&&(Ne=Ne.updateQueue,O=Ne.lastBaseUpdate,O!==C&&(O===null?Ne.firstBaseUpdate=fe:O.next=fe,Ne.lastBaseUpdate=V))}if(y!==null){var Se=f.baseState;C=0,Ne=fe=V=null,O=y;do{var be=O.lane,De=O.eventTime;if((u&be)===be){Ne!==null&&(Ne=Ne.next={eventTime:De,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Ue=t,We=O;switch(be=n,De=l,We.tag){case 1:if(Ue=We.payload,typeof Ue=="function"){Se=Ue.call(De,Se,be);break e}Se=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=We.payload,be=typeof Ue=="function"?Ue.call(De,Se,be):Ue,be==null)break e;Se=z({},Se,be);break e;case 2:nn=!0}}O.callback!==null&&O.lane!==0&&(t.flags|=64,be=f.effects,be===null?f.effects=[O]:be.push(O))}else De={eventTime:De,lane:be,tag:O.tag,payload:O.payload,callback:O.callback,next:null},Ne===null?(fe=Ne=De,V=Se):Ne=Ne.next=De,C|=be;if(O=O.next,O===null){if(O=f.shared.pending,O===null)break;be=O,O=be.next,be.next=null,f.lastBaseUpdate=be,f.shared.pending=null}}while(!0);if(Ne===null&&(V=Se),f.baseState=V,f.firstBaseUpdate=fe,f.lastBaseUpdate=Ne,n=f.shared.interleaved,n!==null){f=n;do C|=f.lane,f=f.next;while(f!==n)}else y===null&&(f.shared.lanes=0);Dn|=C,t.lanes=C,t.memoizedState=Se}}function tc(t,n,l){if(t=n.effects,n.effects=null,t!==null)for(n=0;n<t.length;n++){var u=t[n],f=u.callback;if(f!==null){if(u.callback=null,u=l,typeof f!="function")throw Error(m(191,f));f.call(u)}}}var Ui={},vr=tn(Ui),Wi=tn(Ui),Hi=tn(Ui);function Mn(t){if(t===Ui)throw Error(m(174));return t}function Oo(t,n){switch(Tt(Hi,n),Tt(Wi,t),Tt(vr,Ui),t=n.nodeType,t){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:at(null,"");break;default:t=t===8?n.parentNode:n,n=t.namespaceURI||null,t=t.tagName,n=at(n,t)}Pt(vr),Tt(vr,n)}function oi(){Pt(vr),Pt(Wi),Pt(Hi)}function sc(t){Mn(Hi.current);var n=Mn(vr.current),l=at(n,t.type);n!==l&&(Tt(Wi,t),Tt(vr,l))}function Bo(t){Wi.current===t&&(Pt(vr),Pt(Wi))}var Ft=tn(0);function _a(t){for(var n=t;n!==null;){if(n.tag===13){var l=n.memoizedState;if(l!==null&&(l=l.dehydrated,l===null||l.data==="$?"||l.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Lo=[];function Fo(){for(var t=0;t<Lo.length;t++)Lo[t]._workInProgressVersionPrimary=null;Lo.length=0}var Ma=K.ReactCurrentDispatcher,Uo=K.ReactCurrentBatchConfig,Pn=0,Ut=null,ns=null,cs=null,Pa=!1,zi=!1,Gi=0,Iu=0;function vs(){throw Error(m(321))}function Wo(t,n){if(n===null)return!1;for(var l=0;l<n.length&&l<t.length;l++)if(!se(t[l],n[l]))return!1;return!0}function Ho(t,n,l,u,f,y){if(Pn=y,Ut=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Ma.current=t===null||t.memoizedState===null?Pu:Du,t=l(u,f),zi){y=0;do{if(zi=!1,Gi=0,25<=y)throw Error(m(301));y+=1,cs=ns=null,n.updateQueue=null,Ma.current=Ou,t=l(u,f)}while(zi)}if(Ma.current=Ba,n=ns!==null&&ns.next!==null,Pn=0,cs=ns=Ut=null,Pa=!1,n)throw Error(m(300));return t}function zo(){var t=Gi!==0;return Gi=0,t}function Nr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return cs===null?Ut.memoizedState=cs=t:cs=cs.next=t,cs}function ar(){if(ns===null){var t=Ut.alternate;t=t!==null?t.memoizedState:null}else t=ns.next;var n=cs===null?Ut.memoizedState:cs.next;if(n!==null)cs=n,ns=t;else{if(t===null)throw Error(m(310));ns=t,t={memoizedState:ns.memoizedState,baseState:ns.baseState,baseQueue:ns.baseQueue,queue:ns.queue,next:null},cs===null?Ut.memoizedState=cs=t:cs=cs.next=t}return cs}function Vi(t,n){return typeof n=="function"?n(t):n}function Go(t){var n=ar(),l=n.queue;if(l===null)throw Error(m(311));l.lastRenderedReducer=t;var u=ns,f=u.baseQueue,y=l.pending;if(y!==null){if(f!==null){var C=f.next;f.next=y.next,y.next=C}u.baseQueue=f=y,l.pending=null}if(f!==null){y=f.next,u=u.baseState;var O=C=null,V=null,fe=y;do{var Ne=fe.lane;if((Pn&Ne)===Ne)V!==null&&(V=V.next={lane:0,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null}),u=fe.hasEagerState?fe.eagerState:t(u,fe.action);else{var Se={lane:Ne,action:fe.action,hasEagerState:fe.hasEagerState,eagerState:fe.eagerState,next:null};V===null?(O=V=Se,C=u):V=V.next=Se,Ut.lanes|=Ne,Dn|=Ne}fe=fe.next}while(fe!==null&&fe!==y);V===null?C=u:V.next=O,se(u,n.memoizedState)||(Ls=!0),n.memoizedState=u,n.baseState=C,n.baseQueue=V,l.lastRenderedState=u}if(t=l.interleaved,t!==null){f=t;do y=f.lane,Ut.lanes|=y,Dn|=y,f=f.next;while(f!==t)}else f===null&&(l.lanes=0);return[n.memoizedState,l.dispatch]}function Vo(t){var n=ar(),l=n.queue;if(l===null)throw Error(m(311));l.lastRenderedReducer=t;var u=l.dispatch,f=l.pending,y=n.memoizedState;if(f!==null){l.pending=null;var C=f=f.next;do y=t(y,C.action),C=C.next;while(C!==f);se(y,n.memoizedState)||(Ls=!0),n.memoizedState=y,n.baseQueue===null&&(n.baseState=y),l.lastRenderedState=y}return[y,u]}function rc(){}function nc(t,n){var l=Ut,u=ar(),f=n(),y=!se(u.memoizedState,f);if(y&&(u.memoizedState=f,Ls=!0),u=u.queue,Xo(oc.bind(null,l,u,t),[t]),u.getSnapshot!==n||y||cs!==null&&cs.memoizedState.tag&1){if(l.flags|=2048,Xi(9,ac.bind(null,l,u,f,n),void 0,null),us===null)throw Error(m(349));(Pn&30)!==0||ic(l,n,f)}return f}function ic(t,n,l){t.flags|=16384,t={getSnapshot:n,value:l},n=Ut.updateQueue,n===null?(n={lastEffect:null,stores:null},Ut.updateQueue=n,n.stores=[t]):(l=n.stores,l===null?n.stores=[t]:l.push(t))}function ac(t,n,l,u){n.value=l,n.getSnapshot=u,lc(n)&&cc(t)}function oc(t,n,l){return l(function(){lc(n)&&cc(t)})}function lc(t){var n=t.getSnapshot;t=t.value;try{var l=n();return!se(t,l)}catch{return!0}}function cc(t){var n=Br(t,1);n!==null&&yr(n,t,1,-1)}function uc(t){var n=Nr();return typeof t=="function"&&(t=t()),n.memoizedState=n.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vi,lastRenderedState:t},n.queue=t,t=t.dispatch=Mu.bind(null,Ut,t),[n.memoizedState,t]}function Xi(t,n,l,u){return t={tag:t,create:n,destroy:l,deps:u,next:null},n=Ut.updateQueue,n===null?(n={lastEffect:null,stores:null},Ut.updateQueue=n,n.lastEffect=t.next=t):(l=n.lastEffect,l===null?n.lastEffect=t.next=t:(u=l.next,l.next=t,t.next=u,n.lastEffect=t)),t}function dc(){return ar().memoizedState}function Da(t,n,l,u){var f=Nr();Ut.flags|=t,f.memoizedState=Xi(1|n,l,void 0,u===void 0?null:u)}function Oa(t,n,l,u){var f=ar();u=u===void 0?null:u;var y=void 0;if(ns!==null){var C=ns.memoizedState;if(y=C.destroy,u!==null&&Wo(u,C.deps)){f.memoizedState=Xi(n,l,y,u);return}}Ut.flags|=t,f.memoizedState=Xi(1|n,l,y,u)}function xc(t,n){return Da(8390656,8,t,n)}function Xo(t,n){return Oa(2048,8,t,n)}function mc(t,n){return Oa(4,2,t,n)}function hc(t,n){return Oa(4,4,t,n)}function pc(t,n){if(typeof n=="function")return t=t(),n(t),function(){n(null)};if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function fc(t,n,l){return l=l!=null?l.concat([t]):null,Oa(4,4,pc.bind(null,n,t),l)}function Yo(){}function gc(t,n){var l=ar();n=n===void 0?null:n;var u=l.memoizedState;return u!==null&&n!==null&&Wo(n,u[1])?u[0]:(l.memoizedState=[t,n],t)}function yc(t,n){var l=ar();n=n===void 0?null:n;var u=l.memoizedState;return u!==null&&n!==null&&Wo(n,u[1])?u[0]:(t=t(),l.memoizedState=[t,n],t)}function Ec(t,n,l){return(Pn&21)===0?(t.baseState&&(t.baseState=!1,Ls=!0),t.memoizedState=l):(se(l,n)||(l=es(),Ut.lanes|=l,Dn|=l,t.baseState=!0),n)}function Tu(t,n){var l=st;st=l!==0&&4>l?l:4,t(!0);var u=Uo.transition;Uo.transition={};try{t(!1),n()}finally{st=l,Uo.transition=u}}function jc(){return ar().memoizedState}function _u(t,n,l){var u=un(t);if(l={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null},wc(t))Rc(n,l);else if(l=$l(t,n,l,u),l!==null){var f=Ts();yr(l,t,u,f),bc(l,n,u)}}function Mu(t,n,l){var u=un(t),f={lane:u,action:l,hasEagerState:!1,eagerState:null,next:null};if(wc(t))Rc(n,f);else{var y=t.alternate;if(t.lanes===0&&(y===null||y.lanes===0)&&(y=n.lastRenderedReducer,y!==null))try{var C=n.lastRenderedState,O=y(C,l);if(f.hasEagerState=!0,f.eagerState=O,se(O,C)){var V=n.interleaved;V===null?(f.next=f,Po(n)):(f.next=V.next,V.next=f),n.interleaved=f;return}}catch{}l=$l(t,n,f,u),l!==null&&(f=Ts(),yr(l,t,u,f),bc(l,n,u))}}function wc(t){var n=t.alternate;return t===Ut||n!==null&&n===Ut}function Rc(t,n){zi=Pa=!0;var l=t.pending;l===null?n.next=n:(n.next=l.next,l.next=n),t.pending=n}function bc(t,n,l){if((l&4194240)!==0){var u=n.lanes;u&=t.pendingLanes,l|=u,n.lanes=l,Wt(t,l)}}var Ba={readContext:ir,useCallback:vs,useContext:vs,useEffect:vs,useImperativeHandle:vs,useInsertionEffect:vs,useLayoutEffect:vs,useMemo:vs,useReducer:vs,useRef:vs,useState:vs,useDebugValue:vs,useDeferredValue:vs,useTransition:vs,useMutableSource:vs,useSyncExternalStore:vs,useId:vs,unstable_isNewReconciler:!1},Pu={readContext:ir,useCallback:function(t,n){return Nr().memoizedState=[t,n===void 0?null:n],t},useContext:ir,useEffect:xc,useImperativeHandle:function(t,n,l){return l=l!=null?l.concat([t]):null,Da(4194308,4,pc.bind(null,n,t),l)},useLayoutEffect:function(t,n){return Da(4194308,4,t,n)},useInsertionEffect:function(t,n){return Da(4,2,t,n)},useMemo:function(t,n){var l=Nr();return n=n===void 0?null:n,t=t(),l.memoizedState=[t,n],t},useReducer:function(t,n,l){var u=Nr();return n=l!==void 0?l(n):n,u.memoizedState=u.baseState=n,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:n},u.queue=t,t=t.dispatch=_u.bind(null,Ut,t),[u.memoizedState,t]},useRef:function(t){var n=Nr();return t={current:t},n.memoizedState=t},useState:uc,useDebugValue:Yo,useDeferredValue:function(t){return Nr().memoizedState=t},useTransition:function(){var t=uc(!1),n=t[0];return t=Tu.bind(null,t[1]),Nr().memoizedState=t,[n,t]},useMutableSource:function(){},useSyncExternalStore:function(t,n,l){var u=Ut,f=Nr();if(Ot){if(l===void 0)throw Error(m(407));l=l()}else{if(l=n(),us===null)throw Error(m(349));(Pn&30)!==0||ic(u,n,l)}f.memoizedState=l;var y={value:l,getSnapshot:n};return f.queue=y,xc(oc.bind(null,u,y,t),[t]),u.flags|=2048,Xi(9,ac.bind(null,u,y,l,n),void 0,null),l},useId:function(){var t=Nr(),n=us.identifierPrefix;if(Ot){var l=Or,u=Dr;l=(u&~(1<<32-As(u)-1)).toString(32)+l,n=":"+n+"R"+l,l=Gi++,0<l&&(n+="H"+l.toString(32)),n+=":"}else l=Iu++,n=":"+n+"r"+l.toString(32)+":";return t.memoizedState=n},unstable_isNewReconciler:!1},Du={readContext:ir,useCallback:gc,useContext:ir,useEffect:Xo,useImperativeHandle:fc,useInsertionEffect:mc,useLayoutEffect:hc,useMemo:yc,useReducer:Go,useRef:dc,useState:function(){return Go(Vi)},useDebugValue:Yo,useDeferredValue:function(t){var n=ar();return Ec(n,ns.memoizedState,t)},useTransition:function(){var t=Go(Vi)[0],n=ar().memoizedState;return[t,n]},useMutableSource:rc,useSyncExternalStore:nc,useId:jc,unstable_isNewReconciler:!1},Ou={readContext:ir,useCallback:gc,useContext:ir,useEffect:Xo,useImperativeHandle:fc,useInsertionEffect:mc,useLayoutEffect:hc,useMemo:yc,useReducer:Vo,useRef:dc,useState:function(){return Vo(Vi)},useDebugValue:Yo,useDeferredValue:function(t){var n=ar();return ns===null?n.memoizedState=t:Ec(n,ns.memoizedState,t)},useTransition:function(){var t=Vo(Vi)[0],n=ar().memoizedState;return[t,n]},useMutableSource:rc,useSyncExternalStore:nc,useId:jc,unstable_isNewReconciler:!1};function pr(t,n){if(t&&t.defaultProps){n=z({},n),t=t.defaultProps;for(var l in t)n[l]===void 0&&(n[l]=t[l]);return n}return n}function Zo(t,n,l,u){n=t.memoizedState,l=l(u,n),l=l==null?n:z({},n,l),t.memoizedState=l,t.lanes===0&&(t.updateQueue.baseState=l)}var La={isMounted:function(t){return(t=t._reactInternals)?Ds(t)===t:!1},enqueueSetState:function(t,n,l){t=t._reactInternals;var u=Ts(),f=un(t),y=Lr(u,f);y.payload=n,l!=null&&(y.callback=l),n=an(t,y,f),n!==null&&(yr(n,t,f,u),Ia(n,t,f))},enqueueReplaceState:function(t,n,l){t=t._reactInternals;var u=Ts(),f=un(t),y=Lr(u,f);y.tag=1,y.payload=n,l!=null&&(y.callback=l),n=an(t,y,f),n!==null&&(yr(n,t,f,u),Ia(n,t,f))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var l=Ts(),u=un(t),f=Lr(l,u);f.tag=2,n!=null&&(f.callback=n),n=an(t,f,u),n!==null&&(yr(n,t,u,l),Ia(n,t,u))}};function vc(t,n,l,u,f,y,C){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,y,C):n.prototype&&n.prototype.isPureReactComponent?!he(l,u)||!he(f,y):!0}function Nc(t,n,l){var u=!1,f=sn,y=n.contextType;return typeof y=="object"&&y!==null?y=ir(y):(f=Bs(n)?An:bs.current,u=n.contextTypes,y=(u=u!=null)?ei(t,f):sn),n=new n(l,y),t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=La,t.stateNode=n,n._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=f,t.__reactInternalMemoizedMaskedChildContext=y),n}function Cc(t,n,l,u){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(l,u),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(l,u),n.state!==t&&La.enqueueReplaceState(n,n.state,null)}function Qo(t,n,l,u){var f=t.stateNode;f.props=l,f.state=t.memoizedState,f.refs={},Do(t);var y=n.contextType;typeof y=="object"&&y!==null?f.context=ir(y):(y=Bs(n)?An:bs.current,f.context=ei(t,y)),f.state=t.memoizedState,y=n.getDerivedStateFromProps,typeof y=="function"&&(Zo(t,n,y,l),f.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(n=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),n!==f.state&&La.enqueueReplaceState(f,f.state,null),Ta(t,l,f,u),f.state=t.memoizedState),typeof f.componentDidMount=="function"&&(t.flags|=4194308)}function li(t,n){try{var l="",u=n;do l+=Re(u),u=u.return;while(u);var f=l}catch(y){f=`
Error generating stack: `+y.message+`
`+y.stack}return{value:t,source:n,stack:f,digest:null}}function qo(t,n,l){return{value:t,source:null,stack:l??null,digest:n??null}}function Ko(t,n){try{console.error(n.value)}catch(l){setTimeout(function(){throw l})}}var Bu=typeof WeakMap=="function"?WeakMap:Map;function Sc(t,n,l){l=Lr(-1,l),l.tag=3,l.payload={element:null};var u=n.value;return l.callback=function(){Va||(Va=!0,xl=u),Ko(t,n)},l}function kc(t,n,l){l=Lr(-1,l),l.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var f=n.value;l.payload=function(){return u(f)},l.callback=function(){Ko(t,n)}}var y=t.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(l.callback=function(){Ko(t,n),typeof u!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var C=n.stack;this.componentDidCatch(n.value,{componentStack:C!==null?C:""})}),l}function Ac(t,n,l){var u=t.pingCache;if(u===null){u=t.pingCache=new Bu;var f=new Set;u.set(n,f)}else f=u.get(n),f===void 0&&(f=new Set,u.set(n,f));f.has(l)||(f.add(l),t=Ku.bind(null,t,n,l),n.then(t,t))}function Ic(t){do{var n;if((n=t.tag===13)&&(n=t.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return t;t=t.return}while(t!==null);return null}function Tc(t,n,l,u,f){return(t.mode&1)===0?(t===n?t.flags|=65536:(t.flags|=128,l.flags|=131072,l.flags&=-52805,l.tag===1&&(l.alternate===null?l.tag=17:(n=Lr(-1,1),n.tag=2,an(l,n,1))),l.lanes|=1),t):(t.flags|=65536,t.lanes=f,t)}var Lu=K.ReactCurrentOwner,Ls=!1;function Is(t,n,l,u){n.child=t===null?Kl(n,null,l,u):ni(n,t.child,l,u)}function _c(t,n,l,u,f){l=l.render;var y=n.ref;return ai(n,f),u=Ho(t,n,l,u,y,f),l=zo(),t!==null&&!Ls?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~f,Fr(t,n,f)):(Ot&&l&&No(n),n.flags|=1,Is(t,n,u,f),n.child)}function Mc(t,n,l,u,f){if(t===null){var y=l.type;return typeof y=="function"&&!El(y)&&y.defaultProps===void 0&&l.compare===null&&l.defaultProps===void 0?(n.tag=15,n.type=y,Pc(t,n,y,u,f)):(t=Ka(l.type,null,u,n,n.mode,f),t.ref=n.ref,t.return=n,n.child=t)}if(y=t.child,(t.lanes&f)===0){var C=y.memoizedProps;if(l=l.compare,l=l!==null?l:he,l(C,u)&&t.ref===n.ref)return Fr(t,n,f)}return n.flags|=1,t=xn(y,u),t.ref=n.ref,t.return=n,n.child=t}function Pc(t,n,l,u,f){if(t!==null){var y=t.memoizedProps;if(he(y,u)&&t.ref===n.ref)if(Ls=!1,n.pendingProps=u=y,(t.lanes&f)!==0)(t.flags&131072)!==0&&(Ls=!0);else return n.lanes=t.lanes,Fr(t,n,f)}return $o(t,n,l,u,f)}function Dc(t,n,l){var u=n.pendingProps,f=u.children,y=t!==null?t.memoizedState:null;if(u.mode==="hidden")if((n.mode&1)===0)n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(ui,qs),qs|=l;else{if((l&1073741824)===0)return t=y!==null?y.baseLanes|l:l,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:t,cachePool:null,transitions:null},n.updateQueue=null,Tt(ui,qs),qs|=t,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=y!==null?y.baseLanes:l,Tt(ui,qs),qs|=u}else y!==null?(u=y.baseLanes|l,n.memoizedState=null):u=l,Tt(ui,qs),qs|=u;return Is(t,n,f,l),n.child}function Oc(t,n){var l=n.ref;(t===null&&l!==null||t!==null&&t.ref!==l)&&(n.flags|=512,n.flags|=2097152)}function $o(t,n,l,u,f){var y=Bs(l)?An:bs.current;return y=ei(n,y),ai(n,f),l=Ho(t,n,l,u,y,f),u=zo(),t!==null&&!Ls?(n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~f,Fr(t,n,f)):(Ot&&u&&No(n),n.flags|=1,Is(t,n,l,f),n.child)}function Bc(t,n,l,u,f){if(Bs(l)){var y=!0;Ra(n)}else y=!1;if(ai(n,f),n.stateNode===null)Ua(t,n),Nc(n,l,u),Qo(n,l,u,f),u=!0;else if(t===null){var C=n.stateNode,O=n.memoizedProps;C.props=O;var V=C.context,fe=l.contextType;typeof fe=="object"&&fe!==null?fe=ir(fe):(fe=Bs(l)?An:bs.current,fe=ei(n,fe));var Ne=l.getDerivedStateFromProps,Se=typeof Ne=="function"||typeof C.getSnapshotBeforeUpdate=="function";Se||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(O!==u||V!==fe)&&Cc(n,C,u,fe),nn=!1;var be=n.memoizedState;C.state=be,Ta(n,u,C,f),V=n.memoizedState,O!==u||be!==V||Os.current||nn?(typeof Ne=="function"&&(Zo(n,l,Ne,u),V=n.memoizedState),(O=nn||vc(n,l,O,u,be,V,fe))?(Se||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(n.flags|=4194308)):(typeof C.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=u,n.memoizedState=V),C.props=u,C.state=V,C.context=fe,u=O):(typeof C.componentDidMount=="function"&&(n.flags|=4194308),u=!1)}else{C=n.stateNode,Jl(t,n),O=n.memoizedProps,fe=n.type===n.elementType?O:pr(n.type,O),C.props=fe,Se=n.pendingProps,be=C.context,V=l.contextType,typeof V=="object"&&V!==null?V=ir(V):(V=Bs(l)?An:bs.current,V=ei(n,V));var De=l.getDerivedStateFromProps;(Ne=typeof De=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(O!==Se||be!==V)&&Cc(n,C,u,V),nn=!1,be=n.memoizedState,C.state=be,Ta(n,u,C,f);var Ue=n.memoizedState;O!==Se||be!==Ue||Os.current||nn?(typeof De=="function"&&(Zo(n,l,De,u),Ue=n.memoizedState),(fe=nn||vc(n,l,fe,u,be,Ue,V)||!1)?(Ne||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(u,Ue,V),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(u,Ue,V)),typeof C.componentDidUpdate=="function"&&(n.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof C.componentDidUpdate!="function"||O===t.memoizedProps&&be===t.memoizedState||(n.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&be===t.memoizedState||(n.flags|=1024),n.memoizedProps=u,n.memoizedState=Ue),C.props=u,C.state=Ue,C.context=V,u=fe):(typeof C.componentDidUpdate!="function"||O===t.memoizedProps&&be===t.memoizedState||(n.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||O===t.memoizedProps&&be===t.memoizedState||(n.flags|=1024),u=!1)}return Jo(t,n,l,u,y,f)}function Jo(t,n,l,u,f,y){Oc(t,n);var C=(n.flags&128)!==0;if(!u&&!C)return f&&Hl(n,l,!1),Fr(t,n,y);u=n.stateNode,Lu.current=n;var O=C&&typeof l.getDerivedStateFromError!="function"?null:u.render();return n.flags|=1,t!==null&&C?(n.child=ni(n,t.child,null,y),n.child=ni(n,null,O,y)):Is(t,n,O,y),n.memoizedState=u.state,f&&Hl(n,l,!0),n.child}function Lc(t){var n=t.stateNode;n.pendingContext?Ul(t,n.pendingContext,n.pendingContext!==n.context):n.context&&Ul(t,n.context,!1),Oo(t,n.containerInfo)}function Fc(t,n,l,u,f){return ri(),Ao(f),n.flags|=256,Is(t,n,l,u),n.child}var el={dehydrated:null,treeContext:null,retryLane:0};function tl(t){return{baseLanes:t,cachePool:null,transitions:null}}function Uc(t,n,l){var u=n.pendingProps,f=Ft.current,y=!1,C=(n.flags&128)!==0,O;if((O=C)||(O=t!==null&&t.memoizedState===null?!1:(f&2)!==0),O?(y=!0,n.flags&=-129):(t===null||t.memoizedState!==null)&&(f|=1),Tt(Ft,f&1),t===null)return ko(n),t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((n.mode&1)===0?n.lanes=1:t.data==="$!"?n.lanes=8:n.lanes=1073741824,null):(C=u.children,t=u.fallback,y?(u=n.mode,y=n.child,C={mode:"hidden",children:C},(u&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=C):y=$a(C,u,0,null),t=Fn(t,u,l,null),y.return=n,t.return=n,y.sibling=t,n.child=y,n.child.memoizedState=tl(l),n.memoizedState=el,t):sl(n,C));if(f=t.memoizedState,f!==null&&(O=f.dehydrated,O!==null))return Fu(t,n,C,u,O,f,l);if(y){y=u.fallback,C=n.mode,f=t.child,O=f.sibling;var V={mode:"hidden",children:u.children};return(C&1)===0&&n.child!==f?(u=n.child,u.childLanes=0,u.pendingProps=V,n.deletions=null):(u=xn(f,V),u.subtreeFlags=f.subtreeFlags&14680064),O!==null?y=xn(O,y):(y=Fn(y,C,l,null),y.flags|=2),y.return=n,u.return=n,u.sibling=y,n.child=u,u=y,y=n.child,C=t.child.memoizedState,C=C===null?tl(l):{baseLanes:C.baseLanes|l,cachePool:null,transitions:C.transitions},y.memoizedState=C,y.childLanes=t.childLanes&~l,n.memoizedState=el,u}return y=t.child,t=y.sibling,u=xn(y,{mode:"visible",children:u.children}),(n.mode&1)===0&&(u.lanes=l),u.return=n,u.sibling=null,t!==null&&(l=n.deletions,l===null?(n.deletions=[t],n.flags|=16):l.push(t)),n.child=u,n.memoizedState=null,u}function sl(t,n){return n=$a({mode:"visible",children:n},t.mode,0,null),n.return=t,t.child=n}function Fa(t,n,l,u){return u!==null&&Ao(u),ni(n,t.child,null,l),t=sl(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function Fu(t,n,l,u,f,y,C){if(l)return n.flags&256?(n.flags&=-257,u=qo(Error(m(422))),Fa(t,n,C,u)):n.memoizedState!==null?(n.child=t.child,n.flags|=128,null):(y=u.fallback,f=n.mode,u=$a({mode:"visible",children:u.children},f,0,null),y=Fn(y,f,C,null),y.flags|=2,u.return=n,y.return=n,u.sibling=y,n.child=u,(n.mode&1)!==0&&ni(n,t.child,null,C),n.child.memoizedState=tl(C),n.memoizedState=el,y);if((n.mode&1)===0)return Fa(t,n,C,null);if(f.data==="$!"){if(u=f.nextSibling&&f.nextSibling.dataset,u)var O=u.dgst;return u=O,y=Error(m(419)),u=qo(y,u,void 0),Fa(t,n,C,u)}if(O=(C&t.childLanes)!==0,Ls||O){if(u=us,u!==null){switch(C&-C){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(u.suspendedLanes|C))!==0?0:f,f!==0&&f!==y.retryLane&&(y.retryLane=f,Br(t,f),yr(u,t,f,-1))}return yl(),u=qo(Error(m(421))),Fa(t,n,C,u)}return f.data==="$?"?(n.flags|=128,n.child=t.child,n=$u.bind(null,t),f._reactRetry=n,null):(t=y.treeContext,Qs=en(f.nextSibling),Zs=n,Ot=!0,hr=null,t!==null&&(rr[nr++]=Dr,rr[nr++]=Or,rr[nr++]=In,Dr=t.id,Or=t.overflow,In=n),n=sl(n,u.children),n.flags|=4096,n)}function Wc(t,n,l){t.lanes|=n;var u=t.alternate;u!==null&&(u.lanes|=n),Mo(t.return,n,l)}function rl(t,n,l,u,f){var y=t.memoizedState;y===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:u,tail:l,tailMode:f}:(y.isBackwards=n,y.rendering=null,y.renderingStartTime=0,y.last=u,y.tail=l,y.tailMode=f)}function Hc(t,n,l){var u=n.pendingProps,f=u.revealOrder,y=u.tail;if(Is(t,n,u.children,l),u=Ft.current,(u&2)!==0)u=u&1|2,n.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Wc(t,l,n);else if(t.tag===19)Wc(t,l,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if(Tt(Ft,u),(n.mode&1)===0)n.memoizedState=null;else switch(f){case"forwards":for(l=n.child,f=null;l!==null;)t=l.alternate,t!==null&&_a(t)===null&&(f=l),l=l.sibling;l=f,l===null?(f=n.child,n.child=null):(f=l.sibling,l.sibling=null),rl(n,!1,f,l,y);break;case"backwards":for(l=null,f=n.child,n.child=null;f!==null;){if(t=f.alternate,t!==null&&_a(t)===null){n.child=f;break}t=f.sibling,f.sibling=l,l=f,f=t}rl(n,!0,l,null,y);break;case"together":rl(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ua(t,n){(n.mode&1)===0&&t!==null&&(t.alternate=null,n.alternate=null,n.flags|=2)}function Fr(t,n,l){if(t!==null&&(n.dependencies=t.dependencies),Dn|=n.lanes,(l&n.childLanes)===0)return null;if(t!==null&&n.child!==t.child)throw Error(m(153));if(n.child!==null){for(t=n.child,l=xn(t,t.pendingProps),n.child=l,l.return=n;t.sibling!==null;)t=t.sibling,l=l.sibling=xn(t,t.pendingProps),l.return=n;l.sibling=null}return n.child}function Uu(t,n,l){switch(n.tag){case 3:Lc(n),ri();break;case 5:sc(n);break;case 1:Bs(n.type)&&Ra(n);break;case 4:Oo(n,n.stateNode.containerInfo);break;case 10:var u=n.type._context,f=n.memoizedProps.value;Tt(ka,u._currentValue),u._currentValue=f;break;case 13:if(u=n.memoizedState,u!==null)return u.dehydrated!==null?(Tt(Ft,Ft.current&1),n.flags|=128,null):(l&n.child.childLanes)!==0?Uc(t,n,l):(Tt(Ft,Ft.current&1),t=Fr(t,n,l),t!==null?t.sibling:null);Tt(Ft,Ft.current&1);break;case 19:if(u=(l&n.childLanes)!==0,(t.flags&128)!==0){if(u)return Hc(t,n,l);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Tt(Ft,Ft.current),u)break;return null;case 22:case 23:return n.lanes=0,Dc(t,n,l)}return Fr(t,n,l)}var zc,nl,Gc,Vc;zc=function(t,n){for(var l=n.child;l!==null;){if(l.tag===5||l.tag===6)t.appendChild(l.stateNode);else if(l.tag!==4&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return;l=l.return}l.sibling.return=l.return,l=l.sibling}},nl=function(){},Gc=function(t,n,l,u){var f=t.memoizedProps;if(f!==u){t=n.stateNode,Mn(vr.current);var y=null;switch(l){case"input":f=ks(t,f),u=ks(t,u),y=[];break;case"select":f=z({},f,{value:void 0}),u=z({},u,{value:void 0}),y=[];break;case"textarea":f=cr(t,f),u=cr(t,u),y=[];break;default:typeof f.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Ea)}yt(l,u);var C;l=null;for(fe in f)if(!u.hasOwnProperty(fe)&&f.hasOwnProperty(fe)&&f[fe]!=null)if(fe==="style"){var O=f[fe];for(C in O)O.hasOwnProperty(C)&&(l||(l={}),l[C]="")}else fe!=="dangerouslySetInnerHTML"&&fe!=="children"&&fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&fe!=="autoFocus"&&(j.hasOwnProperty(fe)?y||(y=[]):(y=y||[]).push(fe,null));for(fe in u){var V=u[fe];if(O=f?.[fe],u.hasOwnProperty(fe)&&V!==O&&(V!=null||O!=null))if(fe==="style")if(O){for(C in O)!O.hasOwnProperty(C)||V&&V.hasOwnProperty(C)||(l||(l={}),l[C]="");for(C in V)V.hasOwnProperty(C)&&O[C]!==V[C]&&(l||(l={}),l[C]=V[C])}else l||(y||(y=[]),y.push(fe,l)),l=V;else fe==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,O=O?O.__html:void 0,V!=null&&O!==V&&(y=y||[]).push(fe,V)):fe==="children"?typeof V!="string"&&typeof V!="number"||(y=y||[]).push(fe,""+V):fe!=="suppressContentEditableWarning"&&fe!=="suppressHydrationWarning"&&(j.hasOwnProperty(fe)?(V!=null&&fe==="onScroll"&&Mt("scroll",t),y||O===V||(y=[])):(y=y||[]).push(fe,V))}l&&(y=y||[]).push("style",l);var fe=y;(n.updateQueue=fe)&&(n.flags|=4)}},Vc=function(t,n,l,u){l!==u&&(n.flags|=4)};function Yi(t,n){if(!Ot)switch(t.tailMode){case"hidden":n=t.tail;for(var l=null;n!==null;)n.alternate!==null&&(l=n),n=n.sibling;l===null?t.tail=null:l.sibling=null;break;case"collapsed":l=t.tail;for(var u=null;l!==null;)l.alternate!==null&&(u=l),l=l.sibling;u===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ns(t){var n=t.alternate!==null&&t.alternate.child===t.child,l=0,u=0;if(n)for(var f=t.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags&14680064,u|=f.flags&14680064,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)l|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=u,t.childLanes=l,n}function Wu(t,n,l){var u=n.pendingProps;switch(Co(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ns(n),null;case 1:return Bs(n.type)&&wa(),Ns(n),null;case 3:return u=n.stateNode,oi(),Pt(Os),Pt(bs),Fo(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Ca(n)?n.flags|=4:t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,hr!==null&&(pl(hr),hr=null))),nl(t,n),Ns(n),null;case 5:Bo(n);var f=Mn(Hi.current);if(l=n.type,t!==null&&n.stateNode!=null)Gc(t,n,l,u,f),t.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!u){if(n.stateNode===null)throw Error(m(166));return Ns(n),null}if(t=Mn(vr.current),Ca(n)){u=n.stateNode,l=n.type;var y=n.memoizedProps;switch(u[br]=n,u[Bi]=y,t=(n.mode&1)!==0,l){case"dialog":Mt("cancel",u),Mt("close",u);break;case"iframe":case"object":case"embed":Mt("load",u);break;case"video":case"audio":for(f=0;f<Pi.length;f++)Mt(Pi[f],u);break;case"source":Mt("error",u);break;case"img":case"image":case"link":Mt("error",u),Mt("load",u);break;case"details":Mt("toggle",u);break;case"input":as(u,y),Mt("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!y.multiple},Mt("invalid",u);break;case"textarea":hn(u,y),Mt("invalid",u)}yt(l,y),f=null;for(var C in y)if(y.hasOwnProperty(C)){var O=y[C];C==="children"?typeof O=="string"?u.textContent!==O&&(y.suppressHydrationWarning!==!0&&ya(u.textContent,O,t),f=["children",O]):typeof O=="number"&&u.textContent!==""+O&&(y.suppressHydrationWarning!==!0&&ya(u.textContent,O,t),f=["children",""+O]):j.hasOwnProperty(C)&&O!=null&&C==="onScroll"&&Mt("scroll",u)}switch(l){case"input":ct(u),gt(u,y,!0);break;case"textarea":ct(u),Wr(u);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(u.onclick=Ea)}u=f,n.updateQueue=u,u!==null&&(n.flags|=4)}else{C=f.nodeType===9?f:f.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Oe(l)),t==="http://www.w3.org/1999/xhtml"?l==="script"?(t=C.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=C.createElement(l,{is:u.is}):(t=C.createElement(l),l==="select"&&(C=t,u.multiple?C.multiple=!0:u.size&&(C.size=u.size))):t=C.createElementNS(t,l),t[br]=n,t[Bi]=u,zc(t,n,!1,!1),n.stateNode=t;e:{switch(C=St(l,u),l){case"dialog":Mt("cancel",t),Mt("close",t),f=u;break;case"iframe":case"object":case"embed":Mt("load",t),f=u;break;case"video":case"audio":for(f=0;f<Pi.length;f++)Mt(Pi[f],t);f=u;break;case"source":Mt("error",t),f=u;break;case"img":case"image":case"link":Mt("error",t),Mt("load",t),f=u;break;case"details":Mt("toggle",t),f=u;break;case"input":as(t,u),f=ks(t,u),Mt("invalid",t);break;case"option":f=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},f=z({},u,{value:void 0}),Mt("invalid",t);break;case"textarea":hn(t,u),f=cr(t,u),Mt("invalid",t);break;default:f=u}yt(l,f),O=f;for(y in O)if(O.hasOwnProperty(y)){var V=O[y];y==="style"?_e(t,V):y==="dangerouslySetInnerHTML"?(V=V?V.__html:void 0,V!=null&&jt(t,V)):y==="children"?typeof V=="string"?(l!=="textarea"||V!=="")&&qt(t,V):typeof V=="number"&&qt(t,""+V):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(j.hasOwnProperty(y)?V!=null&&y==="onScroll"&&Mt("scroll",t):V!=null&&te(t,y,V,C))}switch(l){case"input":ct(t),gt(t,u,!1);break;case"textarea":ct(t),Wr(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Be(u.value));break;case"select":t.multiple=!!u.multiple,y=u.value,y!=null?Pe(t,!!u.multiple,y,!1):u.defaultValue!=null&&Pe(t,!!u.multiple,u.defaultValue,!0);break;default:typeof f.onClick=="function"&&(t.onclick=Ea)}switch(l){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ns(n),null;case 6:if(t&&n.stateNode!=null)Vc(t,n,t.memoizedProps,u);else{if(typeof u!="string"&&n.stateNode===null)throw Error(m(166));if(l=Mn(Hi.current),Mn(vr.current),Ca(n)){if(u=n.stateNode,l=n.memoizedProps,u[br]=n,(y=u.nodeValue!==l)&&(t=Zs,t!==null))switch(t.tag){case 3:ya(u.nodeValue,l,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ya(u.nodeValue,l,(t.mode&1)!==0)}y&&(n.flags|=4)}else u=(l.nodeType===9?l:l.ownerDocument).createTextNode(u),u[br]=n,n.stateNode=u}return Ns(n),null;case 13:if(Pt(Ft),u=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ot&&Qs!==null&&(n.mode&1)!==0&&(n.flags&128)===0)Zl(),ri(),n.flags|=98560,y=!1;else if(y=Ca(n),u!==null&&u.dehydrated!==null){if(t===null){if(!y)throw Error(m(318));if(y=n.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(m(317));y[br]=n}else ri(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Ns(n),y=!1}else hr!==null&&(pl(hr),hr=null),y=!0;if(!y)return n.flags&65536?n:null}return(n.flags&128)!==0?(n.lanes=l,n):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(n.child.flags|=8192,(n.mode&1)!==0&&(t===null||(Ft.current&1)!==0?is===0&&(is=3):yl())),n.updateQueue!==null&&(n.flags|=4),Ns(n),null);case 4:return oi(),nl(t,n),t===null&&Di(n.stateNode.containerInfo),Ns(n),null;case 10:return _o(n.type._context),Ns(n),null;case 17:return Bs(n.type)&&wa(),Ns(n),null;case 19:if(Pt(Ft),y=n.memoizedState,y===null)return Ns(n),null;if(u=(n.flags&128)!==0,C=y.rendering,C===null)if(u)Yi(y,!1);else{if(is!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(C=_a(t),C!==null){for(n.flags|=128,Yi(y,!1),u=C.updateQueue,u!==null&&(n.updateQueue=u,n.flags|=4),n.subtreeFlags=0,u=l,l=n.child;l!==null;)y=l,t=u,y.flags&=14680066,C=y.alternate,C===null?(y.childLanes=0,y.lanes=t,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=C.childLanes,y.lanes=C.lanes,y.child=C.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=C.memoizedProps,y.memoizedState=C.memoizedState,y.updateQueue=C.updateQueue,y.type=C.type,t=C.dependencies,y.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),l=l.sibling;return Tt(Ft,Ft.current&1|2),n.child}t=t.sibling}y.tail!==null&&wt()>di&&(n.flags|=128,u=!0,Yi(y,!1),n.lanes=4194304)}else{if(!u)if(t=_a(C),t!==null){if(n.flags|=128,u=!0,l=t.updateQueue,l!==null&&(n.updateQueue=l,n.flags|=4),Yi(y,!0),y.tail===null&&y.tailMode==="hidden"&&!C.alternate&&!Ot)return Ns(n),null}else 2*wt()-y.renderingStartTime>di&&l!==1073741824&&(n.flags|=128,u=!0,Yi(y,!1),n.lanes=4194304);y.isBackwards?(C.sibling=n.child,n.child=C):(l=y.last,l!==null?l.sibling=C:n.child=C,y.last=C)}return y.tail!==null?(n=y.tail,y.rendering=n,y.tail=n.sibling,y.renderingStartTime=wt(),n.sibling=null,l=Ft.current,Tt(Ft,u?l&1|2:l&1),n):(Ns(n),null);case 22:case 23:return gl(),u=n.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(n.flags|=8192),u&&(n.mode&1)!==0?(qs&1073741824)!==0&&(Ns(n),n.subtreeFlags&6&&(n.flags|=8192)):Ns(n),null;case 24:return null;case 25:return null}throw Error(m(156,n.tag))}function Hu(t,n){switch(Co(n),n.tag){case 1:return Bs(n.type)&&wa(),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return oi(),Pt(Os),Pt(bs),Fo(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 5:return Bo(n),null;case 13:if(Pt(Ft),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(m(340));ri()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return Pt(Ft),null;case 4:return oi(),null;case 10:return _o(n.type._context),null;case 22:case 23:return gl(),null;case 24:return null;default:return null}}var Wa=!1,Cs=!1,zu=typeof WeakSet=="function"?WeakSet:Set,Le=null;function ci(t,n){var l=t.ref;if(l!==null)if(typeof l=="function")try{l(null)}catch(u){zt(t,n,u)}else l.current=null}function il(t,n,l){try{l()}catch(u){zt(t,n,u)}}var Xc=!1;function Gu(t,n){if(go=wr,t=it(),Je(t)){if("selectionStart"in t)var l={start:t.selectionStart,end:t.selectionEnd};else e:{l=(l=t.ownerDocument)&&l.defaultView||window;var u=l.getSelection&&l.getSelection();if(u&&u.rangeCount!==0){l=u.anchorNode;var f=u.anchorOffset,y=u.focusNode;u=u.focusOffset;try{l.nodeType,y.nodeType}catch{l=null;break e}var C=0,O=-1,V=-1,fe=0,Ne=0,Se=t,be=null;t:for(;;){for(var De;Se!==l||f!==0&&Se.nodeType!==3||(O=C+f),Se!==y||u!==0&&Se.nodeType!==3||(V=C+u),Se.nodeType===3&&(C+=Se.nodeValue.length),(De=Se.firstChild)!==null;)be=Se,Se=De;for(;;){if(Se===t)break t;if(be===l&&++fe===f&&(O=C),be===y&&++Ne===u&&(V=C),(De=Se.nextSibling)!==null)break;Se=be,be=Se.parentNode}Se=De}l=O===-1||V===-1?null:{start:O,end:V}}else l=null}l=l||{start:0,end:0}}else l=null;for(yo={focusedElem:t,selectionRange:l},wr=!1,Le=n;Le!==null;)if(n=Le,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Le=t;else for(;Le!==null;){n=Le;try{var Ue=n.alternate;if((n.flags&1024)!==0)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Ue!==null){var We=Ue.memoizedProps,Qt=Ue.memoizedState,oe=n.stateNode,$=oe.getSnapshotBeforeUpdate(n.elementType===n.type?We:pr(n.type,We),Qt);oe.__reactInternalSnapshotBeforeUpdate=$}break;case 3:var ce=n.stateNode.containerInfo;ce.nodeType===1?ce.textContent="":ce.nodeType===9&&ce.documentElement&&ce.removeChild(ce.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(m(163))}}catch(Te){zt(n,n.return,Te)}if(t=n.sibling,t!==null){t.return=n.return,Le=t;break}Le=n.return}return Ue=Xc,Xc=!1,Ue}function Zi(t,n,l){var u=n.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&t)===t){var y=f.destroy;f.destroy=void 0,y!==void 0&&il(n,l,y)}f=f.next}while(f!==u)}}function Ha(t,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var l=n=n.next;do{if((l.tag&t)===t){var u=l.create;l.destroy=u()}l=l.next}while(l!==n)}}function al(t){var n=t.ref;if(n!==null){var l=t.stateNode;t.tag,t=l,typeof n=="function"?n(t):n.current=t}}function Yc(t){var n=t.alternate;n!==null&&(t.alternate=null,Yc(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&(delete n[br],delete n[Bi],delete n[Ro],delete n[Cu],delete n[Su])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zc(t){return t.tag===5||t.tag===3||t.tag===4}function Qc(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zc(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ol(t,n,l){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?l.nodeType===8?l.parentNode.insertBefore(t,n):l.insertBefore(t,n):(l.nodeType===8?(n=l.parentNode,n.insertBefore(t,l)):(n=l,n.appendChild(t)),l=l._reactRootContainer,l!=null||n.onclick!==null||(n.onclick=Ea));else if(u!==4&&(t=t.child,t!==null))for(ol(t,n,l),t=t.sibling;t!==null;)ol(t,n,l),t=t.sibling}function ll(t,n,l){var u=t.tag;if(u===5||u===6)t=t.stateNode,n?l.insertBefore(t,n):l.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(ll(t,n,l),t=t.sibling;t!==null;)ll(t,n,l),t=t.sibling}var gs=null,fr=!1;function on(t,n,l){for(l=l.child;l!==null;)qc(t,n,l),l=l.sibling}function qc(t,n,l){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(xt,l)}catch{}switch(l.tag){case 5:Cs||ci(l,n);case 6:var u=gs,f=fr;gs=null,on(t,n,l),gs=u,fr=f,gs!==null&&(fr?(t=gs,l=l.stateNode,t.nodeType===8?t.parentNode.removeChild(l):t.removeChild(l)):gs.removeChild(l.stateNode));break;case 18:gs!==null&&(fr?(t=gs,l=l.stateNode,t.nodeType===8?wo(t.parentNode,l):t.nodeType===1&&wo(t,l),dr(t)):wo(gs,l.stateNode));break;case 4:u=gs,f=fr,gs=l.stateNode.containerInfo,fr=!0,on(t,n,l),gs=u,fr=f;break;case 0:case 11:case 14:case 15:if(!Cs&&(u=l.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){f=u=u.next;do{var y=f,C=y.destroy;y=y.tag,C!==void 0&&((y&2)!==0||(y&4)!==0)&&il(l,n,C),f=f.next}while(f!==u)}on(t,n,l);break;case 1:if(!Cs&&(ci(l,n),u=l.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=l.memoizedProps,u.state=l.memoizedState,u.componentWillUnmount()}catch(O){zt(l,n,O)}on(t,n,l);break;case 21:on(t,n,l);break;case 22:l.mode&1?(Cs=(u=Cs)||l.memoizedState!==null,on(t,n,l),Cs=u):on(t,n,l);break;default:on(t,n,l)}}function Kc(t){var n=t.updateQueue;if(n!==null){t.updateQueue=null;var l=t.stateNode;l===null&&(l=t.stateNode=new zu),n.forEach(function(u){var f=Ju.bind(null,t,u);l.has(u)||(l.add(u),u.then(f,f))})}}function gr(t,n){var l=n.deletions;if(l!==null)for(var u=0;u<l.length;u++){var f=l[u];try{var y=t,C=n,O=C;e:for(;O!==null;){switch(O.tag){case 5:gs=O.stateNode,fr=!1;break e;case 3:gs=O.stateNode.containerInfo,fr=!0;break e;case 4:gs=O.stateNode.containerInfo,fr=!0;break e}O=O.return}if(gs===null)throw Error(m(160));qc(y,C,f),gs=null,fr=!1;var V=f.alternate;V!==null&&(V.return=null),f.return=null}catch(fe){zt(f,n,fe)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)$c(n,t),n=n.sibling}function $c(t,n){var l=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(gr(n,t),Cr(t),u&4){try{Zi(3,t,t.return),Ha(3,t)}catch(We){zt(t,t.return,We)}try{Zi(5,t,t.return)}catch(We){zt(t,t.return,We)}}break;case 1:gr(n,t),Cr(t),u&512&&l!==null&&ci(l,l.return);break;case 5:if(gr(n,t),Cr(t),u&512&&l!==null&&ci(l,l.return),t.flags&32){var f=t.stateNode;try{qt(f,"")}catch(We){zt(t,t.return,We)}}if(u&4&&(f=t.stateNode,f!=null)){var y=t.memoizedProps,C=l!==null?l.memoizedProps:y,O=t.type,V=t.updateQueue;if(t.updateQueue=null,V!==null)try{O==="input"&&y.type==="radio"&&y.name!=null&&xs(f,y),St(O,C);var fe=St(O,y);for(C=0;C<V.length;C+=2){var Ne=V[C],Se=V[C+1];Ne==="style"?_e(f,Se):Ne==="dangerouslySetInnerHTML"?jt(f,Se):Ne==="children"?qt(f,Se):te(f,Ne,Se,fe)}switch(O){case"input":_t(f,y);break;case"textarea":_s(f,y);break;case"select":var be=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!y.multiple;var De=y.value;De!=null?Pe(f,!!y.multiple,De,!1):be!==!!y.multiple&&(y.defaultValue!=null?Pe(f,!!y.multiple,y.defaultValue,!0):Pe(f,!!y.multiple,y.multiple?[]:"",!1))}f[Bi]=y}catch(We){zt(t,t.return,We)}}break;case 6:if(gr(n,t),Cr(t),u&4){if(t.stateNode===null)throw Error(m(162));f=t.stateNode,y=t.memoizedProps;try{f.nodeValue=y}catch(We){zt(t,t.return,We)}}break;case 3:if(gr(n,t),Cr(t),u&4&&l!==null&&l.memoizedState.isDehydrated)try{dr(n.containerInfo)}catch(We){zt(t,t.return,We)}break;case 4:gr(n,t),Cr(t);break;case 13:gr(n,t),Cr(t),f=t.child,f.flags&8192&&(y=f.memoizedState!==null,f.stateNode.isHidden=y,!y||f.alternate!==null&&f.alternate.memoizedState!==null||(dl=wt())),u&4&&Kc(t);break;case 22:if(Ne=l!==null&&l.memoizedState!==null,t.mode&1?(Cs=(fe=Cs)||Ne,gr(n,t),Cs=fe):gr(n,t),Cr(t),u&8192){if(fe=t.memoizedState!==null,(t.stateNode.isHidden=fe)&&!Ne&&(t.mode&1)!==0)for(Le=t,Ne=t.child;Ne!==null;){for(Se=Le=Ne;Le!==null;){switch(be=Le,De=be.child,be.tag){case 0:case 11:case 14:case 15:Zi(4,be,be.return);break;case 1:ci(be,be.return);var Ue=be.stateNode;if(typeof Ue.componentWillUnmount=="function"){u=be,l=be.return;try{n=u,Ue.props=n.memoizedProps,Ue.state=n.memoizedState,Ue.componentWillUnmount()}catch(We){zt(u,l,We)}}break;case 5:ci(be,be.return);break;case 22:if(be.memoizedState!==null){tu(Se);continue}}De!==null?(De.return=be,Le=De):tu(Se)}Ne=Ne.sibling}e:for(Ne=null,Se=t;;){if(Se.tag===5){if(Ne===null){Ne=Se;try{f=Se.stateNode,fe?(y=f.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(O=Se.stateNode,V=Se.memoizedProps.style,C=V!=null&&V.hasOwnProperty("display")?V.display:null,O.style.display=Bt("display",C))}catch(We){zt(t,t.return,We)}}}else if(Se.tag===6){if(Ne===null)try{Se.stateNode.nodeValue=fe?"":Se.memoizedProps}catch(We){zt(t,t.return,We)}}else if((Se.tag!==22&&Se.tag!==23||Se.memoizedState===null||Se===t)&&Se.child!==null){Se.child.return=Se,Se=Se.child;continue}if(Se===t)break e;for(;Se.sibling===null;){if(Se.return===null||Se.return===t)break e;Ne===Se&&(Ne=null),Se=Se.return}Ne===Se&&(Ne=null),Se.sibling.return=Se.return,Se=Se.sibling}}break;case 19:gr(n,t),Cr(t),u&4&&Kc(t);break;case 21:break;default:gr(n,t),Cr(t)}}function Cr(t){var n=t.flags;if(n&2){try{e:{for(var l=t.return;l!==null;){if(Zc(l)){var u=l;break e}l=l.return}throw Error(m(160))}switch(u.tag){case 5:var f=u.stateNode;u.flags&32&&(qt(f,""),u.flags&=-33);var y=Qc(t);ll(t,y,f);break;case 3:case 4:var C=u.stateNode.containerInfo,O=Qc(t);ol(t,O,C);break;default:throw Error(m(161))}}catch(V){zt(t,t.return,V)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Vu(t,n,l){Le=t,Jc(t)}function Jc(t,n,l){for(var u=(t.mode&1)!==0;Le!==null;){var f=Le,y=f.child;if(f.tag===22&&u){var C=f.memoizedState!==null||Wa;if(!C){var O=f.alternate,V=O!==null&&O.memoizedState!==null||Cs;O=Wa;var fe=Cs;if(Wa=C,(Cs=V)&&!fe)for(Le=f;Le!==null;)C=Le,V=C.child,C.tag===22&&C.memoizedState!==null?su(f):V!==null?(V.return=C,Le=V):su(f);for(;y!==null;)Le=y,Jc(y),y=y.sibling;Le=f,Wa=O,Cs=fe}eu(t)}else(f.subtreeFlags&8772)!==0&&y!==null?(y.return=f,Le=y):eu(t)}}function eu(t){for(;Le!==null;){var n=Le;if((n.flags&8772)!==0){var l=n.alternate;try{if((n.flags&8772)!==0)switch(n.tag){case 0:case 11:case 15:Cs||Ha(5,n);break;case 1:var u=n.stateNode;if(n.flags&4&&!Cs)if(l===null)u.componentDidMount();else{var f=n.elementType===n.type?l.memoizedProps:pr(n.type,l.memoizedProps);u.componentDidUpdate(f,l.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var y=n.updateQueue;y!==null&&tc(n,y,u);break;case 3:var C=n.updateQueue;if(C!==null){if(l=null,n.child!==null)switch(n.child.tag){case 5:l=n.child.stateNode;break;case 1:l=n.child.stateNode}tc(n,C,l)}break;case 5:var O=n.stateNode;if(l===null&&n.flags&4){l=O;var V=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":V.autoFocus&&l.focus();break;case"img":V.src&&(l.src=V.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var fe=n.alternate;if(fe!==null){var Ne=fe.memoizedState;if(Ne!==null){var Se=Ne.dehydrated;Se!==null&&dr(Se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(m(163))}Cs||n.flags&512&&al(n)}catch(be){zt(n,n.return,be)}}if(n===t){Le=null;break}if(l=n.sibling,l!==null){l.return=n.return,Le=l;break}Le=n.return}}function tu(t){for(;Le!==null;){var n=Le;if(n===t){Le=null;break}var l=n.sibling;if(l!==null){l.return=n.return,Le=l;break}Le=n.return}}function su(t){for(;Le!==null;){var n=Le;try{switch(n.tag){case 0:case 11:case 15:var l=n.return;try{Ha(4,n)}catch(V){zt(n,l,V)}break;case 1:var u=n.stateNode;if(typeof u.componentDidMount=="function"){var f=n.return;try{u.componentDidMount()}catch(V){zt(n,f,V)}}var y=n.return;try{al(n)}catch(V){zt(n,y,V)}break;case 5:var C=n.return;try{al(n)}catch(V){zt(n,C,V)}}}catch(V){zt(n,n.return,V)}if(n===t){Le=null;break}var O=n.sibling;if(O!==null){O.return=n.return,Le=O;break}Le=n.return}}var Xu=Math.ceil,za=K.ReactCurrentDispatcher,cl=K.ReactCurrentOwner,or=K.ReactCurrentBatchConfig,pt=0,us=null,$t=null,ys=0,qs=0,ui=tn(0),is=0,Qi=null,Dn=0,Ga=0,ul=0,qi=null,Fs=null,dl=0,di=1/0,Ur=null,Va=!1,xl=null,ln=null,Xa=!1,cn=null,Ya=0,Ki=0,ml=null,Za=-1,Qa=0;function Ts(){return(pt&6)!==0?wt():Za!==-1?Za:Za=wt()}function un(t){return(t.mode&1)===0?1:(pt&2)!==0&&ys!==0?ys&-ys:Au.transition!==null?(Qa===0&&(Qa=es()),Qa):(t=st,t!==0||(t=window.event,t=t===void 0?16:vi(t.type)),t)}function yr(t,n,l,u){if(50<Ki)throw Ki=0,ml=null,Error(m(185));T(t,l,u),((pt&2)===0||t!==us)&&(t===us&&((pt&2)===0&&(Ga|=l),is===4&&dn(t,ys)),Us(t,u),l===1&&pt===0&&(n.mode&1)===0&&(di=wt()+500,ba&&rn()))}function Us(t,n){var l=t.callbackNode;Gr(t,n);var u=Gs(t,t===us?ys:0);if(u===0)l!==null&&os(l),t.callbackNode=null,t.callbackPriority=0;else if(n=u&-u,t.callbackPriority!==n){if(l!=null&&os(l),n===1)t.tag===0?ku(nu.bind(null,t)):zl(nu.bind(null,t)),vu(function(){(pt&6)===0&&rn()}),l=null;else{switch(na(u)){case 1:l=we;break;case 4:l=sa;break;case 16:l=Nt;break;case 536870912:l=ra;break;default:l=Nt}l=xu(l,ru.bind(null,t))}t.callbackPriority=n,t.callbackNode=l}}function ru(t,n){if(Za=-1,Qa=0,(pt&6)!==0)throw Error(m(327));var l=t.callbackNode;if(xi()&&t.callbackNode!==l)return null;var u=Gs(t,t===us?ys:0);if(u===0)return null;if((u&30)!==0||(u&t.expiredLanes)!==0||n)n=qa(t,u);else{n=u;var f=pt;pt|=2;var y=au();(us!==t||ys!==n)&&(Ur=null,di=wt()+500,Bn(t,n));do try{Qu();break}catch(O){iu(t,O)}while(!0);To(),za.current=y,pt=f,$t!==null?n=0:(us=null,ys=0,n=is)}if(n!==0){if(n===2&&(f=Rt(t),f!==0&&(u=f,n=hl(t,f))),n===1)throw l=Qi,Bn(t,0),dn(t,u),Us(t,wt()),l;if(n===6)dn(t,u);else{if(f=t.current.alternate,(u&30)===0&&!Yu(f)&&(n=qa(t,u),n===2&&(y=Rt(t),y!==0&&(u=y,n=hl(t,y))),n===1))throw l=Qi,Bn(t,0),dn(t,u),Us(t,wt()),l;switch(t.finishedWork=f,t.finishedLanes=u,n){case 0:case 1:throw Error(m(345));case 2:Ln(t,Fs,Ur);break;case 3:if(dn(t,u),(u&130023424)===u&&(n=dl+500-wt(),10<n)){if(Gs(t,0)!==0)break;if(f=t.suspendedLanes,(f&u)!==u){Ts(),t.pingedLanes|=t.suspendedLanes&f;break}t.timeoutHandle=jo(Ln.bind(null,t,Fs,Ur),n);break}Ln(t,Fs,Ur);break;case 4:if(dn(t,u),(u&4194240)===u)break;for(n=t.eventTimes,f=-1;0<u;){var C=31-As(u);y=1<<C,C=n[C],C>f&&(f=C),u&=~y}if(u=f,u=wt()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*Xu(u/1960))-u,10<u){t.timeoutHandle=jo(Ln.bind(null,t,Fs,Ur),u);break}Ln(t,Fs,Ur);break;case 5:Ln(t,Fs,Ur);break;default:throw Error(m(329))}}}return Us(t,wt()),t.callbackNode===l?ru.bind(null,t):null}function hl(t,n){var l=qi;return t.current.memoizedState.isDehydrated&&(Bn(t,n).flags|=256),t=qa(t,n),t!==2&&(n=Fs,Fs=l,n!==null&&pl(n)),t}function pl(t){Fs===null?Fs=t:Fs.push.apply(Fs,t)}function Yu(t){for(var n=t;;){if(n.flags&16384){var l=n.updateQueue;if(l!==null&&(l=l.stores,l!==null))for(var u=0;u<l.length;u++){var f=l[u],y=f.getSnapshot;f=f.value;try{if(!se(y(),f))return!1}catch{return!1}}}if(l=n.child,n.subtreeFlags&16384&&l!==null)l.return=n,n=l;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function dn(t,n){for(n&=~ul,n&=~Ga,t.suspendedLanes|=n,t.pingedLanes&=~n,t=t.expirationTimes;0<n;){var l=31-As(n),u=1<<l;t[l]=-1,n&=~u}}function nu(t){if((pt&6)!==0)throw Error(m(327));xi();var n=Gs(t,0);if((n&1)===0)return Us(t,wt()),null;var l=qa(t,n);if(t.tag!==0&&l===2){var u=Rt(t);u!==0&&(n=u,l=hl(t,u))}if(l===1)throw l=Qi,Bn(t,0),dn(t,n),Us(t,wt()),l;if(l===6)throw Error(m(345));return t.finishedWork=t.current.alternate,t.finishedLanes=n,Ln(t,Fs,Ur),Us(t,wt()),null}function fl(t,n){var l=pt;pt|=1;try{return t(n)}finally{pt=l,pt===0&&(di=wt()+500,ba&&rn())}}function On(t){cn!==null&&cn.tag===0&&(pt&6)===0&&xi();var n=pt;pt|=1;var l=or.transition,u=st;try{if(or.transition=null,st=1,t)return t()}finally{st=u,or.transition=l,pt=n,(pt&6)===0&&rn()}}function gl(){qs=ui.current,Pt(ui)}function Bn(t,n){t.finishedWork=null,t.finishedLanes=0;var l=t.timeoutHandle;if(l!==-1&&(t.timeoutHandle=-1,bu(l)),$t!==null)for(l=$t.return;l!==null;){var u=l;switch(Co(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&wa();break;case 3:oi(),Pt(Os),Pt(bs),Fo();break;case 5:Bo(u);break;case 4:oi();break;case 13:Pt(Ft);break;case 19:Pt(Ft);break;case 10:_o(u.type._context);break;case 22:case 23:gl()}l=l.return}if(us=t,$t=t=xn(t.current,null),ys=qs=n,is=0,Qi=null,ul=Ga=Dn=0,Fs=qi=null,_n!==null){for(n=0;n<_n.length;n++)if(l=_n[n],u=l.interleaved,u!==null){l.interleaved=null;var f=u.next,y=l.pending;if(y!==null){var C=y.next;y.next=f,u.next=C}l.pending=u}_n=null}return t}function iu(t,n){do{var l=$t;try{if(To(),Ma.current=Ba,Pa){for(var u=Ut.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Pa=!1}if(Pn=0,cs=ns=Ut=null,zi=!1,Gi=0,cl.current=null,l===null||l.return===null){is=1,Qi=n,$t=null;break}e:{var y=t,C=l.return,O=l,V=n;if(n=ys,O.flags|=32768,V!==null&&typeof V=="object"&&typeof V.then=="function"){var fe=V,Ne=O,Se=Ne.tag;if((Ne.mode&1)===0&&(Se===0||Se===11||Se===15)){var be=Ne.alternate;be?(Ne.updateQueue=be.updateQueue,Ne.memoizedState=be.memoizedState,Ne.lanes=be.lanes):(Ne.updateQueue=null,Ne.memoizedState=null)}var De=Ic(C);if(De!==null){De.flags&=-257,Tc(De,C,O,y,n),De.mode&1&&Ac(y,fe,n),n=De,V=fe;var Ue=n.updateQueue;if(Ue===null){var We=new Set;We.add(V),n.updateQueue=We}else Ue.add(V);break e}else{if((n&1)===0){Ac(y,fe,n),yl();break e}V=Error(m(426))}}else if(Ot&&O.mode&1){var Qt=Ic(C);if(Qt!==null){(Qt.flags&65536)===0&&(Qt.flags|=256),Tc(Qt,C,O,y,n),Ao(li(V,O));break e}}y=V=li(V,O),is!==4&&(is=2),qi===null?qi=[y]:qi.push(y),y=C;do{switch(y.tag){case 3:y.flags|=65536,n&=-n,y.lanes|=n;var oe=Sc(y,V,n);ec(y,oe);break e;case 1:O=V;var $=y.type,ce=y.stateNode;if((y.flags&128)===0&&(typeof $.getDerivedStateFromError=="function"||ce!==null&&typeof ce.componentDidCatch=="function"&&(ln===null||!ln.has(ce)))){y.flags|=65536,n&=-n,y.lanes|=n;var Te=kc(y,O,n);ec(y,Te);break e}}y=y.return}while(y!==null)}lu(l)}catch(He){n=He,$t===l&&l!==null&&($t=l=l.return);continue}break}while(!0)}function au(){var t=za.current;return za.current=Ba,t===null?Ba:t}function yl(){(is===0||is===3||is===2)&&(is=4),us===null||(Dn&268435455)===0&&(Ga&268435455)===0||dn(us,ys)}function qa(t,n){var l=pt;pt|=2;var u=au();(us!==t||ys!==n)&&(Ur=null,Bn(t,n));do try{Zu();break}catch(f){iu(t,f)}while(!0);if(To(),pt=l,za.current=u,$t!==null)throw Error(m(261));return us=null,ys=0,is}function Zu(){for(;$t!==null;)ou($t)}function Qu(){for(;$t!==null&&!kt();)ou($t)}function ou(t){var n=du(t.alternate,t,qs);t.memoizedProps=t.pendingProps,n===null?lu(t):$t=n,cl.current=null}function lu(t){var n=t;do{var l=n.alternate;if(t=n.return,(n.flags&32768)===0){if(l=Wu(l,n,qs),l!==null){$t=l;return}}else{if(l=Hu(l,n),l!==null){l.flags&=32767,$t=l;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{is=6,$t=null;return}}if(n=n.sibling,n!==null){$t=n;return}$t=n=t}while(n!==null);is===0&&(is=5)}function Ln(t,n,l){var u=st,f=or.transition;try{or.transition=null,st=1,qu(t,n,l,u)}finally{or.transition=f,st=u}return null}function qu(t,n,l,u){do xi();while(cn!==null);if((pt&6)!==0)throw Error(m(327));l=t.finishedWork;var f=t.finishedLanes;if(l===null)return null;if(t.finishedWork=null,t.finishedLanes=0,l===t.current)throw Error(m(177));t.callbackNode=null,t.callbackPriority=0;var y=l.lanes|l.childLanes;if(ze(t,y),t===us&&($t=us=null,ys=0),(l.subtreeFlags&2064)===0&&(l.flags&2064)===0||Xa||(Xa=!0,xu(Nt,function(){return xi(),null})),y=(l.flags&15990)!==0,(l.subtreeFlags&15990)!==0||y){y=or.transition,or.transition=null;var C=st;st=1;var O=pt;pt|=4,cl.current=null,Gu(t,l),$c(l,t),Rs(yo),wr=!!go,yo=go=null,t.current=l,Vu(l),ta(),pt=O,st=C,or.transition=y}else t.current=l;if(Xa&&(Xa=!1,cn=t,Ya=f),y=t.pendingLanes,y===0&&(ln=null),lt(l.stateNode),Us(t,wt()),n!==null)for(u=t.onRecoverableError,l=0;l<n.length;l++)f=n[l],u(f.value,{componentStack:f.stack,digest:f.digest});if(Va)throw Va=!1,t=xl,xl=null,t;return(Ya&1)!==0&&t.tag!==0&&xi(),y=t.pendingLanes,(y&1)!==0?t===ml?Ki++:(Ki=0,ml=t):Ki=0,rn(),null}function xi(){if(cn!==null){var t=na(Ya),n=or.transition,l=st;try{if(or.transition=null,st=16>t?16:t,cn===null)var u=!1;else{if(t=cn,cn=null,Ya=0,(pt&6)!==0)throw Error(m(331));var f=pt;for(pt|=4,Le=t.current;Le!==null;){var y=Le,C=y.child;if((Le.flags&16)!==0){var O=y.deletions;if(O!==null){for(var V=0;V<O.length;V++){var fe=O[V];for(Le=fe;Le!==null;){var Ne=Le;switch(Ne.tag){case 0:case 11:case 15:Zi(8,Ne,y)}var Se=Ne.child;if(Se!==null)Se.return=Ne,Le=Se;else for(;Le!==null;){Ne=Le;var be=Ne.sibling,De=Ne.return;if(Yc(Ne),Ne===fe){Le=null;break}if(be!==null){be.return=De,Le=be;break}Le=De}}}var Ue=y.alternate;if(Ue!==null){var We=Ue.child;if(We!==null){Ue.child=null;do{var Qt=We.sibling;We.sibling=null,We=Qt}while(We!==null)}}Le=y}}if((y.subtreeFlags&2064)!==0&&C!==null)C.return=y,Le=C;else e:for(;Le!==null;){if(y=Le,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Zi(9,y,y.return)}var oe=y.sibling;if(oe!==null){oe.return=y.return,Le=oe;break e}Le=y.return}}var $=t.current;for(Le=$;Le!==null;){C=Le;var ce=C.child;if((C.subtreeFlags&2064)!==0&&ce!==null)ce.return=C,Le=ce;else e:for(C=$;Le!==null;){if(O=Le,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Ha(9,O)}}catch(He){zt(O,O.return,He)}if(O===C){Le=null;break e}var Te=O.sibling;if(Te!==null){Te.return=O.return,Le=Te;break e}Le=O.return}}if(pt=f,rn(),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(xt,t)}catch{}u=!0}return u}finally{st=l,or.transition=n}}return!1}function cu(t,n,l){n=li(l,n),n=Sc(t,n,1),t=an(t,n,1),n=Ts(),t!==null&&(T(t,1,n),Us(t,n))}function zt(t,n,l){if(t.tag===3)cu(t,t,l);else for(;n!==null;){if(n.tag===3){cu(n,t,l);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ln===null||!ln.has(u))){t=li(l,t),t=kc(n,t,1),n=an(n,t,1),t=Ts(),n!==null&&(T(n,1,t),Us(n,t));break}}n=n.return}}function Ku(t,n,l){var u=t.pingCache;u!==null&&u.delete(n),n=Ts(),t.pingedLanes|=t.suspendedLanes&l,us===t&&(ys&l)===l&&(is===4||is===3&&(ys&130023424)===ys&&500>wt()-dl?Bn(t,0):ul|=l),Us(t,n)}function uu(t,n){n===0&&((t.mode&1)===0?n=1:(n=Hn,Hn<<=1,(Hn&130023424)===0&&(Hn=4194304)));var l=Ts();t=Br(t,n),t!==null&&(T(t,n,l),Us(t,l))}function $u(t){var n=t.memoizedState,l=0;n!==null&&(l=n.retryLane),uu(t,l)}function Ju(t,n){var l=0;switch(t.tag){case 13:var u=t.stateNode,f=t.memoizedState;f!==null&&(l=f.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(m(314))}u!==null&&u.delete(n),uu(t,l)}var du;du=function(t,n,l){if(t!==null)if(t.memoizedProps!==n.pendingProps||Os.current)Ls=!0;else{if((t.lanes&l)===0&&(n.flags&128)===0)return Ls=!1,Uu(t,n,l);Ls=(t.flags&131072)!==0}else Ls=!1,Ot&&(n.flags&1048576)!==0&&Gl(n,Na,n.index);switch(n.lanes=0,n.tag){case 2:var u=n.type;Ua(t,n),t=n.pendingProps;var f=ei(n,bs.current);ai(n,l),f=Ho(null,n,u,t,f,l);var y=zo();return n.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Bs(u)?(y=!0,Ra(n)):y=!1,n.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Do(n),f.updater=La,n.stateNode=f,f._reactInternals=n,Qo(n,u,t,l),n=Jo(null,n,u,!0,y,l)):(n.tag=0,Ot&&y&&No(n),Is(null,n,f,l),n=n.child),n;case 16:u=n.elementType;e:{switch(Ua(t,n),t=n.pendingProps,f=u._init,u=f(u._payload),n.type=u,f=n.tag=td(u),t=pr(u,t),f){case 0:n=$o(null,n,u,t,l);break e;case 1:n=Bc(null,n,u,t,l);break e;case 11:n=_c(null,n,u,t,l);break e;case 14:n=Mc(null,n,u,pr(u.type,t),l);break e}throw Error(m(306,u,""))}return n;case 0:return u=n.type,f=n.pendingProps,f=n.elementType===u?f:pr(u,f),$o(t,n,u,f,l);case 1:return u=n.type,f=n.pendingProps,f=n.elementType===u?f:pr(u,f),Bc(t,n,u,f,l);case 3:e:{if(Lc(n),t===null)throw Error(m(387));u=n.pendingProps,y=n.memoizedState,f=y.element,Jl(t,n),Ta(n,u,null,l);var C=n.memoizedState;if(u=C.element,y.isDehydrated)if(y={element:u,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},n.updateQueue.baseState=y,n.memoizedState=y,n.flags&256){f=li(Error(m(423)),n),n=Fc(t,n,u,l,f);break e}else if(u!==f){f=li(Error(m(424)),n),n=Fc(t,n,u,l,f);break e}else for(Qs=en(n.stateNode.containerInfo.firstChild),Zs=n,Ot=!0,hr=null,l=Kl(n,null,u,l),n.child=l;l;)l.flags=l.flags&-3|4096,l=l.sibling;else{if(ri(),u===f){n=Fr(t,n,l);break e}Is(t,n,u,l)}n=n.child}return n;case 5:return sc(n),t===null&&ko(n),u=n.type,f=n.pendingProps,y=t!==null?t.memoizedProps:null,C=f.children,Eo(u,f)?C=null:y!==null&&Eo(u,y)&&(n.flags|=32),Oc(t,n),Is(t,n,C,l),n.child;case 6:return t===null&&ko(n),null;case 13:return Uc(t,n,l);case 4:return Oo(n,n.stateNode.containerInfo),u=n.pendingProps,t===null?n.child=ni(n,null,u,l):Is(t,n,u,l),n.child;case 11:return u=n.type,f=n.pendingProps,f=n.elementType===u?f:pr(u,f),_c(t,n,u,f,l);case 7:return Is(t,n,n.pendingProps,l),n.child;case 8:return Is(t,n,n.pendingProps.children,l),n.child;case 12:return Is(t,n,n.pendingProps.children,l),n.child;case 10:e:{if(u=n.type._context,f=n.pendingProps,y=n.memoizedProps,C=f.value,Tt(ka,u._currentValue),u._currentValue=C,y!==null)if(se(y.value,C)){if(y.children===f.children&&!Os.current){n=Fr(t,n,l);break e}}else for(y=n.child,y!==null&&(y.return=n);y!==null;){var O=y.dependencies;if(O!==null){C=y.child;for(var V=O.firstContext;V!==null;){if(V.context===u){if(y.tag===1){V=Lr(-1,l&-l),V.tag=2;var fe=y.updateQueue;if(fe!==null){fe=fe.shared;var Ne=fe.pending;Ne===null?V.next=V:(V.next=Ne.next,Ne.next=V),fe.pending=V}}y.lanes|=l,V=y.alternate,V!==null&&(V.lanes|=l),Mo(y.return,l,n),O.lanes|=l;break}V=V.next}}else if(y.tag===10)C=y.type===n.type?null:y.child;else if(y.tag===18){if(C=y.return,C===null)throw Error(m(341));C.lanes|=l,O=C.alternate,O!==null&&(O.lanes|=l),Mo(C,l,n),C=y.sibling}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===n){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}Is(t,n,f.children,l),n=n.child}return n;case 9:return f=n.type,u=n.pendingProps.children,ai(n,l),f=ir(f),u=u(f),n.flags|=1,Is(t,n,u,l),n.child;case 14:return u=n.type,f=pr(u,n.pendingProps),f=pr(u.type,f),Mc(t,n,u,f,l);case 15:return Pc(t,n,n.type,n.pendingProps,l);case 17:return u=n.type,f=n.pendingProps,f=n.elementType===u?f:pr(u,f),Ua(t,n),n.tag=1,Bs(u)?(t=!0,Ra(n)):t=!1,ai(n,l),Nc(n,u,f),Qo(n,u,f,l),Jo(null,n,u,!0,t,l);case 19:return Hc(t,n,l);case 22:return Dc(t,n,l)}throw Error(m(156,n.tag))};function xu(t,n){return Hs(t,n)}function ed(t,n,l,u){this.tag=t,this.key=l,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function lr(t,n,l,u){return new ed(t,n,l,u)}function El(t){return t=t.prototype,!(!t||!t.isReactComponent)}function td(t){if(typeof t=="function")return El(t)?1:0;if(t!=null){if(t=t.$$typeof,t===B)return 11;if(t===I)return 14}return 2}function xn(t,n){var l=t.alternate;return l===null?(l=lr(t.tag,n,t.key,t.mode),l.elementType=t.elementType,l.type=t.type,l.stateNode=t.stateNode,l.alternate=t,t.alternate=l):(l.pendingProps=n,l.type=t.type,l.flags=0,l.subtreeFlags=0,l.deletions=null),l.flags=t.flags&14680064,l.childLanes=t.childLanes,l.lanes=t.lanes,l.child=t.child,l.memoizedProps=t.memoizedProps,l.memoizedState=t.memoizedState,l.updateQueue=t.updateQueue,n=t.dependencies,l.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},l.sibling=t.sibling,l.index=t.index,l.ref=t.ref,l}function Ka(t,n,l,u,f,y){var C=2;if(u=t,typeof t=="function")El(t)&&(C=1);else if(typeof t=="string")C=5;else e:switch(t){case F:return Fn(l.children,f,y,n);case U:C=8,f|=8;break;case Q:return t=lr(12,l,n,f|2),t.elementType=Q,t.lanes=y,t;case Z:return t=lr(13,l,n,f),t.elementType=Z,t.lanes=y,t;case ge:return t=lr(19,l,n,f),t.elementType=ge,t.lanes=y,t;case le:return $a(l,f,y,n);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xe:C=10;break e;case Ce:C=9;break e;case B:C=11;break e;case I:C=14;break e;case ne:C=16,u=null;break e}throw Error(m(130,t==null?t:typeof t,""))}return n=lr(C,l,n,f),n.elementType=t,n.type=u,n.lanes=y,n}function Fn(t,n,l,u){return t=lr(7,t,u,n),t.lanes=l,t}function $a(t,n,l,u){return t=lr(22,t,u,n),t.elementType=le,t.lanes=l,t.stateNode={isHidden:!1},t}function jl(t,n,l){return t=lr(6,t,null,n),t.lanes=l,t}function wl(t,n,l){return n=lr(4,t.children!==null?t.children:[],t.key,n),n.lanes=l,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}function sd(t,n,l,u,f){this.tag=n,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ae(0),this.expirationTimes=ae(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ae(0),this.identifierPrefix=u,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Rl(t,n,l,u,f,y,C,O,V){return t=new sd(t,n,l,O,V),n===1?(n=1,y===!0&&(n|=8)):n=0,y=lr(3,null,null,n),t.current=y,y.stateNode=t,y.memoizedState={element:u,isDehydrated:l,cache:null,transitions:null,pendingSuspenseBoundaries:null},Do(y),t}function rd(t,n,l){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:re,key:u==null?null:""+u,children:t,containerInfo:n,implementation:l}}function mu(t){if(!t)return sn;t=t._reactInternals;e:{if(Ds(t)!==t||t.tag!==1)throw Error(m(170));var n=t;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Bs(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(m(171))}if(t.tag===1){var l=t.type;if(Bs(l))return Wl(t,l,n)}return n}function hu(t,n,l,u,f,y,C,O,V){return t=Rl(l,u,!0,t,f,y,C,O,V),t.context=mu(null),l=t.current,u=Ts(),f=un(l),y=Lr(u,f),y.callback=n??null,an(l,y,f),t.current.lanes=f,T(t,f,u),Us(t,u),t}function Ja(t,n,l,u){var f=n.current,y=Ts(),C=un(f);return l=mu(l),n.context===null?n.context=l:n.pendingContext=l,n=Lr(y,C),n.payload={element:t},u=u===void 0?null:u,u!==null&&(n.callback=u),t=an(f,n,C),t!==null&&(yr(t,f,C,y),Ia(t,f,C)),C}function eo(t){return t=t.current,t.child?(t.child.tag===5,t.child.stateNode):null}function pu(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var l=t.retryLane;t.retryLane=l!==0&&l<n?l:n}}function bl(t,n){pu(t,n),(t=t.alternate)&&pu(t,n)}function nd(){return null}var fu=typeof reportError=="function"?reportError:function(t){console.error(t)};function vl(t){this._internalRoot=t}to.prototype.render=vl.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(m(409));Ja(t,n,null,null)},to.prototype.unmount=vl.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;On(function(){Ja(null,t,null,null)}),n[Mr]=null}};function to(t){this._internalRoot=t}to.prototype.unstable_scheduleHydration=function(t){if(t){var n=At();t={blockedOn:null,target:t,priority:n};for(var l=0;l<hs.length&&n!==0&&n<hs[l].priority;l++);hs.splice(l,0,t),l===0&&aa(t)}};function Nl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function so(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function gu(){}function id(t,n,l,u,f){if(f){if(typeof u=="function"){var y=u;u=function(){var fe=eo(C);y.call(fe)}}var C=hu(n,u,t,0,null,!1,!1,"",gu);return t._reactRootContainer=C,t[Mr]=C.current,Di(t.nodeType===8?t.parentNode:t),On(),C}for(;f=t.lastChild;)t.removeChild(f);if(typeof u=="function"){var O=u;u=function(){var fe=eo(V);O.call(fe)}}var V=Rl(t,0,!1,null,null,!1,!1,"",gu);return t._reactRootContainer=V,t[Mr]=V.current,Di(t.nodeType===8?t.parentNode:t),On(function(){Ja(n,V,l,u)}),V}function ro(t,n,l,u,f){var y=l._reactRootContainer;if(y){var C=y;if(typeof f=="function"){var O=f;f=function(){var V=eo(C);O.call(V)}}Ja(n,C,t,f)}else C=id(l,n,t,f,u);return eo(C)}zn=function(t){switch(t.tag){case 3:var n=t.stateNode;if(n.current.memoizedState.isDehydrated){var l=Ct(n.pendingLanes);l!==0&&(Wt(n,l|1),Us(n,wt()),(pt&6)===0&&(di=wt()+500,rn()))}break;case 13:On(function(){var u=Br(t,1);if(u!==null){var f=Ts();yr(u,t,1,f)}}),bl(t,1)}},ws=function(t){if(t.tag===13){var n=Br(t,134217728);if(n!==null){var l=Ts();yr(n,t,134217728,l)}bl(t,134217728)}},Ge=function(t){if(t.tag===13){var n=un(t),l=Br(t,n);if(l!==null){var u=Ts();yr(l,t,n,u)}bl(t,n)}},At=function(){return st},wi=function(t,n){var l=st;try{return st=t,n()}finally{st=l}},Un=function(t,n,l){switch(n){case"input":if(_t(t,l),n=l.name,l.type==="radio"&&n!=null){for(l=t;l.parentNode;)l=l.parentNode;for(l=l.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<l.length;n++){var u=l[n];if(u!==t&&u.form===t.form){var f=ja(u);if(!f)throw Error(m(90));Ss(u),_t(u,f)}}}break;case"textarea":_s(t,l);break;case"select":n=l.value,n!=null&&Pe(t,!!l.multiple,n,!1)}},Wn=fl,Jt=On;var ad={usingClientEntryPoint:!1,Events:[Li,$n,ja,hi,Ps,fl]},$i={findFiberByHostInstance:kn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},od={bundleType:$i.bundleType,version:$i.version,rendererPackageName:$i.rendererPackageName,rendererConfig:$i.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:K.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ji(t),t===null?null:t.stateNode},findFiberByHostInstance:$i.findFiberByHostInstance||nd,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var no=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!no.isDisabled&&no.supportsFiber)try{xt=no.inject(od),tt=no}catch{}}return reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ad,reactDom_production_min.createPortal=function(t,n){var l=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nl(n))throw Error(m(200));return rd(t,n,null,l)},reactDom_production_min.createRoot=function(t,n){if(!Nl(t))throw Error(m(299));var l=!1,u="",f=fu;return n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(u=n.identifierPrefix),n.onRecoverableError!==void 0&&(f=n.onRecoverableError)),n=Rl(t,1,!1,null,null,l,!1,u,f),t[Mr]=n.current,Di(t.nodeType===8?t.parentNode:t),new vl(n)},reactDom_production_min.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(m(188)):(t=Object.keys(t).join(","),Error(m(268,t)));return t=Ji(n),t=t===null?null:t.stateNode,t},reactDom_production_min.flushSync=function(t){return On(t)},reactDom_production_min.hydrate=function(t,n,l){if(!so(n))throw Error(m(200));return ro(null,t,n,!0,l)},reactDom_production_min.hydrateRoot=function(t,n,l){if(!Nl(t))throw Error(m(405));var u=l!=null&&l.hydratedSources||null,f=!1,y="",C=fu;if(l!=null&&(l.unstable_strictMode===!0&&(f=!0),l.identifierPrefix!==void 0&&(y=l.identifierPrefix),l.onRecoverableError!==void 0&&(C=l.onRecoverableError)),n=hu(n,null,t,1,l??null,f,!1,y,C),t[Mr]=n.current,Di(t),u)for(t=0;t<u.length;t++)l=u[t],f=l._getVersion,f=f(l._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[l,f]:n.mutableSourceEagerHydrationData.push(l,f);return new to(n)},reactDom_production_min.render=function(t,n,l){if(!so(n))throw Error(m(200));return ro(null,t,n,!1,l)},reactDom_production_min.unmountComponentAtNode=function(t){if(!so(t))throw Error(m(40));return t._reactRootContainer?(On(function(){ro(null,null,t,!1,function(){t._reactRootContainer=null,t[Mr]=null})}),!0):!1},reactDom_production_min.unstable_batchedUpdates=fl,reactDom_production_min.unstable_renderSubtreeIntoContainer=function(t,n,l,u){if(!so(l))throw Error(m(200));if(t==null||t._reactInternals===void 0)throw Error(m(38));return ro(t,n,l,!1,u)},reactDom_production_min.version="18.3.1-next-f1338f8080-20240426",reactDom_production_min}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(h){console.error(h)}}return d(),reactDom.exports=requireReactDom_production_min(),reactDom.exports}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client;hasRequiredClient=1;var d=requireReactDom();return client.createRoot=d.createRoot,client.hydrateRoot=d.hydrateRoot,client}var clientExports=requireClient();const ReactDOM=getDefaultExportFromCjs(clientExports);console.warn("Supabase credentials not found. Running in offline mode.");const supabase=null,isSupabaseConfigured=()=>!1,AuthContext=reactExports.createContext({}),useAuth=()=>reactExports.useContext(AuthContext);function AuthProvider({children:d}){const[h,m]=reactExports.useState(null),[E,j]=reactExports.useState(!0),[g,N]=reactExports.useState({strava:!1,garmin:!1});reactExports.useEffect(()=>{{j(!1);return}},[]);const Ee={user:h,loading:E,sendPhoneOTP:async ue=>({error:{message:"Authentication not configured."}}),verifyPhoneOTP:async(ue,te)=>({error:{message:"Authentication not configured."}}),signInWithGoogle:async()=>(console.error("Supabase not configured"),{error:{message:"Authentication not configured. Please check your Supabase credentials."}}),signInWithApple:async()=>({error:{message:"Authentication not configured."}}),signOut:async()=>{},connectStrava:async()=>({error:{message:"Strava not configured. Add VITE_STRAVA_CLIENT_ID to your environment."}}),connectGarmin:async()=>({error:{message:"Garmin not configured. Add VITE_GARMIN_CLIENT_ID to your environment."}}),handleStravaCallback:async(ue,te)=>{const K=localStorage.getItem("strava_oauth_state");if(te!==K)return{error:{message:"Invalid state parameter. Please try again."}};localStorage.removeItem("strava_oauth_state");try{const me=await fetch("/api/auth/strava/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:ue})});if(!me.ok)throw new Error("Failed to exchange Strava token");const re=await me.json();return h&&isSupabaseConfigured(),{data:re,error:null}}catch(me){return console.error("Strava callback error:",me),{error:{message:me.message}}}},handleGarminCallback:async(ue,te,K)=>{const me=localStorage.getItem("garmin_oauth_state");if(K!==me)return{error:{message:"Invalid state parameter. Please try again."}};localStorage.removeItem("garmin_oauth_state");try{const re=await fetch("/api/auth/garmin/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({oauthToken:ue,oauthVerifier:te})});if(!re.ok)throw new Error("Failed to exchange Garmin token");const F=await re.json();return h&&isSupabaseConfigured(),{data:F,error:null}}catch(re){return console.error("Garmin callback error:",re),{error:{message:re.message}}}},disconnectProvider:async ue=>{},connectedProviders:g,isAuthenticated:!!h,isConfigured:isSupabaseConfigured()};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:Ee,children:d})}const getUserId=async()=>null,saveProfile=async d=>(await getUserId(),localStorage.setItem("motus_profile",JSON.stringify(d)),{data:d,error:null}),loadProfile=async()=>{await getUserId();{const d=localStorage.getItem("motus_profile");return{data:d?JSON.parse(d):null,error:null}}},saveProgram=async d=>(await getUserId(),localStorage.setItem("motus_program",JSON.stringify(d)),{data:d,error:null}),loadProgram=async()=>{await getUserId();{const d=localStorage.getItem("motus_program");return{data:d?JSON.parse(d):null,error:null}}},saveMeals=async d=>(await getUserId(),localStorage.setItem("motus_meals",JSON.stringify(d)),{data:d,error:null}),loadMeals=async()=>{await getUserId();{const d=localStorage.getItem("motus_meals");return{data:d?JSON.parse(d):[],error:null}}},saveWorkouts=async d=>(await getUserId(),localStorage.setItem("motus_workouts",JSON.stringify(d)),{data:d,error:null}),loadWorkouts=async()=>{await getUserId();{const d=localStorage.getItem("motus_workouts");return{data:d?JSON.parse(d):[],error:null}}},syncLocalToCloud=async()=>{await getUserId()},saveSubscription=async d=>(await getUserId(),localStorage.setItem("motus_subscription",JSON.stringify(d)),{data:d,error:null}),loadSubscription=async()=>{await getUserId();{const d=localStorage.getItem("motus_subscription");return{data:d?JSON.parse(d):null,error:null}}},loadReferrals=async()=>(await getUserId(),{data:[],error:null}),completeReferral=async(d,h)=>({data:null,error:new Error("Supabase not configured")}),saveNutritionPreferences=async d=>(await getUserId(),localStorage.setItem("motus_nutrition_preferences",JSON.stringify(d)),{data:d,error:null}),loadNutritionPreferences=async()=>{await getUserId();{const d=localStorage.getItem("motus_nutrition_preferences");return{data:d?JSON.parse(d):null,error:null}}},SubscriptionContext=reactExports.createContext(null);function SubscriptionProvider({children:d}){const{user:h,isAuthenticated:m}=useAuth(),[E,j]=reactExports.useState(null),[g,N]=reactExports.useState([]),[k,A]=reactExports.useState(!0),w=localStorage.getItem("motus_bypass_paywall")==="true"||localStorage.getItem("motus_tylers_friend")==="true",M=reactExports.useCallback(()=>{if(w)return!0;if(!E)return!1;const K=new Date,me=E.current_period_end?new Date(E.current_period_end):null;return E.status==="active"&&E.subscription_type==="paid"?!me||K<me:E.status==="referral"||E.status==="active"?me&&K<me:!1},[E,w]);reactExports.useEffect(()=>{(async()=>{if(!m||!h){j(null),N([]),A(!1);return}A(!0);try{const{data:me}=await loadSubscription();j(me);const{data:re}=await loadReferrals();N(re||[])}catch(me){console.error("Error loading subscription:",me)}A(!1)})()},[m,h]);const _=reactExports.useCallback(async()=>{if(!m||!h)return null;const{data:K}=await loadSubscription();if(K)return j(K),K;const me={status:"trial",subscription_type:null,referral_count:0,created_at:new Date().toISOString()},{data:re,error:F}=await saveSubscription(me);return!F&&re?(j(re),re):null},[m,h]),J=reactExports.useCallback(async K=>{const me={...E,status:"active",subscription_type:"paid",stripe_customer_id:K.customerId,stripe_subscription_id:K.subscriptionId,current_period_start:new Date().toISOString(),current_period_end:K.currentPeriodEnd,updated_at:new Date().toISOString()},{data:re,error:F}=await saveSubscription(me);return!F&&re?(j(re),re):null},[E]),W=reactExports.useCallback(async(K,me)=>{const{data:re,error:F}=await completeReferral();if(!F){const{data:U}=await loadSubscription();j(U);const{data:Q}=await loadReferrals();N(Q||[])}return{data:re,error:F}},[]),ie=E?.referral_count||0,q=E?.referral_code||null,L=Math.max(0,3-ie),Ee=reactExports.useCallback(()=>{if(!E||E.subscription_type!=="referral")return!1;const K=E.current_period_end?new Date(E.current_period_end):null;return K&&new Date<K},[E]),ue=reactExports.useCallback(()=>{localStorage.setItem("motus_tylers_friend","true"),window.location.reload()},[]),te={subscription:E,referrals:g,loading:k,isSubscribed:M(),bypassPaywall:w,referralCount:ie,referralCode:q,referralsNeeded:L,isReferralActive:Ee(),initializeSubscription:_,activatePaidSubscription:J,processReferralCompletion:W,activateTylersFriend:ue};return jsxRuntimeExports.jsx(SubscriptionContext.Provider,{value:te,children:d})}function useSubscription(){const d=reactExports.useContext(SubscriptionContext);if(!d)throw new Error("useSubscription must be used within a SubscriptionProvider");return d}var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const toKebabCase=d=>d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(d,h)=>{const m=reactExports.forwardRef(({color:E="currentColor",size:j=24,strokeWidth:g=2,absoluteStrokeWidth:N,className:k="",children:A,...w},M)=>reactExports.createElement("svg",{ref:M,...defaultAttributes,width:j,height:j,stroke:E,strokeWidth:N?Number(g)*24/Number(j):g,className:["lucide",`lucide-${toKebabCase(d)}`,k].join(" "),...w},[...h.map(([_,J])=>reactExports.createElement(_,J)),...Array.isArray(A)?A:[A]]));return m.displayName=`${d}`,m};const Activity=createLucideIcon("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);const AlertCircle=createLucideIcon("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const AlertTriangle=createLucideIcon("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Apple=createLucideIcon("Apple",[["path",{d:"M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 6-8 6-12.22A4.91 4.91 0 0 0 17 5c-2.22 0-4 1.44-5 2-1-.56-2.78-2-5-2a4.9 4.9 0 0 0-5 4.78C2 14 5 22 8 22c1.25 0 2.5-1.06 4-1.06Z",key:"3s7exb"}],["path",{d:"M10 2c1 .5 2 2 2 5",key:"fcco2y"}]]);const ArrowLeft=createLucideIcon("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const ArrowRight=createLucideIcon("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const BarChart2=createLucideIcon("BarChart2",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);const BarChart3=createLucideIcon("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Barcode=createLucideIcon("Barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);const Brain=createLucideIcon("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);const Calculator=createLucideIcon("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);const Calendar=createLucideIcon("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);const Camera=createLucideIcon("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const CheckCircle=createLucideIcon("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Check=createLucideIcon("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const ChefHat=createLucideIcon("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);const ChevronDown=createLucideIcon("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const ChevronLeft=createLucideIcon("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const ChevronRight=createLucideIcon("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const ChevronUp=createLucideIcon("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Circle=createLucideIcon("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Clock=createLucideIcon("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const Copy=createLucideIcon("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const CreditCard=createLucideIcon("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Dumbbell=createLucideIcon("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);const ExternalLink=createLucideIcon("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]);const Flame=createLucideIcon("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);const Gift=createLucideIcon("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);const Heart=createLucideIcon("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const Home=createLucideIcon("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);const Info=createLucideIcon("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Instagram=createLucideIcon("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);const Keyboard=createLucideIcon("Keyboard",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",ry:"2",key:"15u882"}],["path",{d:"M6 8h.001",key:"1ej0i3"}],["path",{d:"M10 8h.001",key:"1x2st2"}],["path",{d:"M14 8h.001",key:"1vkmyp"}],["path",{d:"M18 8h.001",key:"kfsenl"}],["path",{d:"M8 12h.001",key:"1sjpby"}],["path",{d:"M12 12h.001",key:"al75ts"}],["path",{d:"M16 12h.001",key:"931bgk"}],["path",{d:"M7 16h10",key:"wp8him"}]]);const Layers=createLucideIcon("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);const Leaf=createLucideIcon("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);const Loader2=createLucideIcon("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Lock=createLucideIcon("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const Mail=createLucideIcon("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Package=createLucideIcon("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const PenLine=createLucideIcon("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);const Pen=createLucideIcon("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);const Phone=createLucideIcon("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const Plane=createLucideIcon("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);const Play=createLucideIcon("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const Plus=createLucideIcon("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const RefreshCw=createLucideIcon("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const Save=createLucideIcon("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);const Scale=createLucideIcon("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Search=createLucideIcon("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Send=createLucideIcon("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const Shield=createLucideIcon("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);const ShoppingCart=createLucideIcon("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);const Sparkles=createLucideIcon("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);const Target=createLucideIcon("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const TrendingUp=createLucideIcon("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const Upload=createLucideIcon("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Users=createLucideIcon("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Utensils=createLucideIcon("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);const X=createLucideIcon("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Zap=createLucideIcon("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),FEATURES=[{icon:Brain,title:"Intelligent Programming",description:"Periodized training blocks built from proven methodologies. Auto-regulated progression based on your actual performance data."},{icon:Target,title:"Sport-Specific Periodization",description:"Whether you're peaking for a meet, racing a marathon, or training for a triathlonyour mesocycles are structured for your event."},{icon:Utensils,title:"Performance Nutrition",description:"Macros calibrated to your training load and body composition goals. Nutrient timing aligned with your session schedule."},{icon:TrendingUp,title:"Progressive Overload Engine",description:"Systematic volume and intensity progression with strategic deloads. No guesswork, no stalled progress."},{icon:Activity,title:"Session Tracking",description:"Log sets, reps, RPE, and actual loads. Track deviations from prescribed work to inform future programming."},{icon:BarChart3,title:"Performance Analytics",description:"Volume load trends, strength curve analysis, and training density metrics. Data-driven decisions, not guesswork."}];function LandingPage({onGetStarted:d,onShowPrivacy:h,onShowTerms:m}){return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-950 text-white overflow-x-hidden",children:[jsxRuntimeExports.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-dark-950/80 backdrop-blur-lg border-b border-dark-800",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-accent-primary to-accent-primaryHover rounded-xl flex items-center justify-center",children:jsxRuntimeExports.jsx(Zap,{className:"w-6 h-6 text-dark-950"})}),jsxRuntimeExports.jsx("span",{className:"text-2xl font-display font-bold tracking-tight",children:"MOTUS"})]}),jsxRuntimeExports.jsxs("div",{className:"hidden md:flex items-center gap-8",children:[jsxRuntimeExports.jsx("a",{href:"#features",className:"text-gray-400 hover:text-white transition-colors",children:"Features"}),jsxRuntimeExports.jsx("a",{href:"#how-it-works",className:"text-gray-400 hover:text-white transition-colors",children:"How It Works"}),jsxRuntimeExports.jsx("a",{href:"#programs",className:"text-gray-400 hover:text-white transition-colors",children:"Programs"})]}),jsxRuntimeExports.jsx("button",{onClick:d,className:"px-5 py-2.5 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-semibold rounded-lg transition-all hover:scale-105",children:"Get Started"})]})}),jsxRuntimeExports.jsxs("section",{className:"relative min-h-screen flex items-center justify-center pt-20 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-dark-950 via-dark-900 to-dark-950"}),jsxRuntimeExports.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-accent-primary/10 rounded-full blur-3xl"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-accent-secondary/10 rounded-full blur-3xl"}),jsxRuntimeExports.jsx("div",{className:"absolute inset-0 opacity-5",children:jsxRuntimeExports.jsx("div",{className:"h-full w-full",style:{backgroundImage:"linear-gradient(rgba(212,168,83,0.3) 1px, transparent 1px), linear-gradient(90deg, rgba(212,168,83,0.3) 1px, transparent 1px)",backgroundSize:"50px 50px"}})}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-6 text-center",children:[jsxRuntimeExports.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-accent-primary/10 border border-accent-primary/30 rounded-full mb-8",children:[jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4 text-accent-primary"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-accent-primary font-medium",children:"Periodized Training + Precision Nutrition"})]}),jsxRuntimeExports.jsxs("h1",{className:"text-5xl md:text-7xl lg:text-8xl font-display font-bold tracking-tight mb-6",children:[jsxRuntimeExports.jsx("span",{className:"block",children:"TRAIN WITH"}),jsxRuntimeExports.jsx("span",{className:"block bg-gradient-to-r from-accent-primary via-accent-primaryHover to-accent-secondary bg-clip-text text-transparent",children:"INTENT."})]}),jsxRuntimeExports.jsxs("p",{className:"text-xl md:text-2xl text-gray-400 max-w-3xl mx-auto mb-10 leading-relaxed",children:["Structured programming for serious athletes. ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Periodized workouts"}),","," ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"calibrated nutrition"}),", and"," ",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"intelligent progression"}),"all in one platform."]}),jsxRuntimeExports.jsx("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mb-16",children:jsxRuntimeExports.jsxs("button",{onClick:d,className:"group px-8 py-4 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-bold text-lg rounded-xl transition-all hover:scale-105 flex items-center gap-2 shadow-lg shadow-accent-primary/25",children:["Build Your Program",jsxRuntimeExports.jsx(ArrowRight,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[jsxRuntimeExports.jsx(Layers,{className:"w-5 h-5 text-accent-primary"}),jsxRuntimeExports.jsx("span",{children:"Mesocycle-based periodization"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[jsxRuntimeExports.jsx(Clock,{className:"w-5 h-5 text-accent-primary"}),jsxRuntimeExports.jsx("span",{children:"Auto-regulated deloads"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-3 text-gray-400",children:[jsxRuntimeExports.jsx(Shield,{className:"w-5 h-5 text-accent-primary"}),jsxRuntimeExports.jsx("span",{children:"Research-backed protocols"})]})]})]}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce",children:jsxRuntimeExports.jsx("div",{className:"w-6 h-10 border-2 border-gray-600 rounded-full flex items-start justify-center p-2",children:jsxRuntimeExports.jsx("div",{className:"w-1.5 h-3 bg-accent-primary rounded-full animate-pulse"})})})]}),jsxRuntimeExports.jsx("section",{className:"py-24 bg-dark-900",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-6",children:jsxRuntimeExports.jsxs("div",{className:"grid md:grid-cols-2 gap-16 items-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["You Know What You're Doing. ",jsxRuntimeExports.jsx("span",{className:"text-accent-danger",children:"Your Tools Should Too."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 text-gray-400",children:[jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Generic apps that don't understand periodization or peaking"]}),jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Nutrition trackers disconnected from your training load"]}),jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-danger mt-1",children:""}),"No intelligent programmingjust random workouts"]}),jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-danger mt-1",children:""}),"Fragmented tools that don't talk to each other"]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-3xl md:text-4xl font-display font-bold mb-6",children:["MOTUS Gets It. ",jsxRuntimeExports.jsx("span",{className:"text-accent-success",children:"Built for Athletes."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4 text-gray-400",children:[jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Proper periodization with base, build, peak, and taper phases"})]}),jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Nutrition that scales with your training volume and intensity"})]}),jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:"Progressive overload with strategic deload weeks built in"})]}),jsxRuntimeExports.jsxs("p",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-accent-success mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:"One integrated platformworkouts, nutrition, and tracking"})]})]})]})]})})}),jsxRuntimeExports.jsx("section",{id:"features",className:"py-24 bg-dark-950",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Built for ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:"Performance"})]}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-400 max-w-2xl mx-auto",children:"Every feature designed around how serious athletes actually train."})]}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:FEATURES.map((E,j)=>jsxRuntimeExports.jsxs("div",{className:"group p-6 bg-dark-900 border border-dark-700 rounded-2xl hover:border-accent-primary/50 transition-all hover:-translate-y-1",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-accent-primary/10 rounded-xl flex items-center justify-center mb-4 group-hover:bg-accent-primary/20 transition-colors",children:jsxRuntimeExports.jsx(E.icon,{className:"w-6 h-6 text-accent-primary"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-2",children:E.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:E.description})]},j))})]})}),jsxRuntimeExports.jsx("section",{id:"how-it-works",className:"py-24 bg-dark-900",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Setup in ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:"5 Minutes"})]}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-400",children:"Input your data. Get your program. Start training."})]}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{step:"01",title:"Define Your Goal",description:"Select your primary focusstrength, endurance, hypertrophy, or triathlon. Set your target event or timeline.",icon:Target},{step:"02",title:"Input Your Baseline",description:"Current lifts, recent race times, training history. We need real numbers to build a real program.",icon:Brain},{step:"03",title:"Execute & Track",description:"Follow your periodized program. Log your sessions. Let the system adjust based on your actual performance.",icon:TrendingUp}].map((E,j)=>jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("div",{className:"text-7xl font-display font-bold text-dark-800 absolute -top-4 -left-2",children:E.step}),jsxRuntimeExports.jsxs("div",{className:"relative bg-dark-800 border border-dark-700 rounded-2xl p-6 pt-12",children:[jsxRuntimeExports.jsx("div",{className:"w-14 h-14 bg-accent-primary rounded-xl flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(E.icon,{className:"w-7 h-7 text-dark-950"})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold mb-2",children:E.title}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:E.description})]}),j<2&&jsxRuntimeExports.jsx("div",{className:"hidden md:block absolute top-1/2 -right-4 transform -translate-y-1/2",children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-8 h-8 text-dark-600"})})]},j))})]})}),jsxRuntimeExports.jsx("section",{id:"programs",className:"py-24 bg-dark-950",children:jsxRuntimeExports.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center mb-16",children:[jsxRuntimeExports.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold mb-4",children:["Specialized ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:"Programming"})]}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-400",children:"Structured training systems for your discipline"})]}),jsxRuntimeExports.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:[{title:"Strength",subtitle:"Powerlifting & Strength Sport",description:"Periodized programming for squat, bench, and deadlift. Volume blocks, intensity blocks, and peaking protocols.",icon:"",color:"from-red-500/20 to-orange-500/20",border:"border-red-500/30"},{title:"Endurance",subtitle:"Running & Cycling",description:"5K to marathon and beyond. Pace-based training zones, mileage progression, and taper protocols.",icon:"",color:"from-blue-500/20 to-cyan-500/20",border:"border-blue-500/30"},{title:"Hypertrophy",subtitle:"Bodybuilding & Physique",description:"Volume-driven programming for muscle development. Progressive overload with strategic deloads.",icon:"",color:"from-purple-500/20 to-pink-500/20",border:"border-purple-500/30"},{title:"Triathlon",subtitle:"Swim  Bike  Run",description:"Multi-sport periodization with brick workouts and double days. Injury-prevention strength work built in.",icon:"",color:"from-accent-primary/20 to-yellow-500/20",border:"border-accent-primary/30"}].map((E,j)=>jsxRuntimeExports.jsxs("div",{className:`p-6 rounded-2xl bg-gradient-to-br ${E.color} border ${E.border} hover:scale-105 transition-transform cursor-pointer`,children:[jsxRuntimeExports.jsx("span",{className:"text-4xl mb-4 block",children:E.icon}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-bold mb-1",children:E.title}),jsxRuntimeExports.jsx("p",{className:"text-accent-primary text-sm font-medium mb-3",children:E.subtitle}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:E.description})]},j))})]})}),jsxRuntimeExports.jsxs("section",{className:"py-24 bg-dark-900 relative overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-accent-primary/5 via-transparent to-accent-secondary/5"}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-full h-px bg-gradient-to-r from-transparent via-accent-primary/50 to-transparent"}),jsxRuntimeExports.jsxs("div",{className:"relative max-w-4xl mx-auto px-6 text-center",children:[jsxRuntimeExports.jsxs("h2",{className:"text-4xl md:text-6xl font-display font-bold mb-6",children:["Stop Guessing. ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:"Start Training."})]}),jsxRuntimeExports.jsx("p",{className:"text-xl text-gray-400 mb-10 max-w-2xl mx-auto",children:"Your personalized program is 5 minutes away."}),jsxRuntimeExports.jsxs("button",{onClick:d,className:"group px-10 py-5 bg-accent-primary hover:bg-accent-primaryHover text-dark-950 font-bold text-xl rounded-xl transition-all hover:scale-105 flex items-center gap-3 mx-auto shadow-lg shadow-accent-primary/25",children:["Build My Program",jsxRuntimeExports.jsx(ArrowRight,{className:"w-6 h-6 group-hover:translate-x-1 transition-transform"})]})]})]}),jsxRuntimeExports.jsx("footer",{className:"py-12 bg-dark-950 border-t border-dark-800",children:jsxRuntimeExports.jsx("div",{className:"max-w-7xl mx-auto px-6",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-accent-primary to-accent-primaryHover rounded-lg flex items-center justify-center",children:jsxRuntimeExports.jsx(Zap,{className:"w-5 h-5 text-dark-950"})}),jsxRuntimeExports.jsx("span",{className:"text-xl font-display font-bold",children:"MOTUS"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[jsxRuntimeExports.jsx("button",{onClick:h,className:"hover:text-white transition-colors",children:"Privacy"}),jsxRuntimeExports.jsx("button",{onClick:m,className:"hover:text-white transition-colors",children:"Terms"}),jsxRuntimeExports.jsx("a",{href:"mailto:support@motusfit.app",className:"hover:text-white transition-colors",children:"Contact"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:" 2024 MOTUS. Train With Intent."})]})})})]})}const variants={primary:"bg-accent-primary hover:bg-accent-primaryHover active:bg-accent-primaryMuted text-dark-900 font-semibold shadow-sm",secondary:"bg-dark-700 hover:bg-dark-600 text-white border border-dark-500 hover:border-dark-400",ghost:"bg-transparent hover:bg-dark-800 text-text-secondary hover:text-white",danger:"bg-accent-danger hover:bg-red-500 text-white",success:"bg-accent-success hover:bg-green-500 text-dark-900 font-semibold",outline:"bg-transparent border-2 border-accent-primary text-accent-primary hover:bg-accent-primary hover:text-dark-900"},sizes={sm:"px-3 py-1.5 text-sm rounded-md",md:"px-5 py-2.5 text-sm rounded-lg",lg:"px-6 py-3 text-base rounded-lg",xl:"px-8 py-4 text-lg rounded-xl"};function Button({children:d,variant:h="primary",size:m="md",disabled:E=!1,fullWidth:j=!1,onClick:g,type:N="button",className:k="",icon:A,iconPosition:w="left",...M}){return jsxRuntimeExports.jsxs("button",{type:N,onClick:g,disabled:E,className:`
        ${variants[h]}
        ${sizes[m]}
        ${j?"w-full":""}
        ${E?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        font-medium tracking-wide
        transition-all duration-200
        focus:outline-none focus:ring-2 focus:ring-accent-primary/50 focus:ring-offset-2 focus:ring-offset-dark-900
        inline-flex items-center justify-center gap-2
        ${k}
      `,...M,children:[A&&w==="left"&&jsxRuntimeExports.jsx("span",{className:"flex-shrink-0",children:A}),d,A&&w==="right"&&jsxRuntimeExports.jsx("span",{className:"flex-shrink-0",children:A})]})}function Card({children:d,className:h="",hover:m=!1,onClick:E,variant:j="default",padding:g=!0}){const N="rounded-xl transition-all duration-300",k={default:"bg-dark-800 border border-dark-600",elevated:"bg-dark-800 border border-dark-600 shadow-lg shadow-black/20",outlined:"bg-transparent border border-dark-500",solid:"bg-dark-700"},A=m?"hover:border-dark-400 hover:shadow-gold cursor-pointer":"";return jsxRuntimeExports.jsx("div",{onClick:E,className:`
        ${N}
        ${k[j]}
        ${A}
        ${h}
      `,children:d})}function CardBody({children:d,className:h=""}){return jsxRuntimeExports.jsx("div",{className:`p-6 ${h}`,children:d})}function Input({label:d,type:h="text",value:m,onChange:E,placeholder:j,error:g,helper:N,disabled:k=!1,className:A="",size:w="md",...M}){const _={sm:"px-3 py-2 text-sm",md:"px-4 py-3 text-base",lg:"px-5 py-4 text-lg"};return jsxRuntimeExports.jsxs("div",{className:`space-y-2 ${A}`,children:[d&&jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-text-secondary",children:d}),jsxRuntimeExports.jsx("input",{type:h,value:m,onChange:E,placeholder:j,disabled:k,className:`
          w-full ${_[w]}
          bg-dark-700 border rounded-lg
          text-white placeholder-dark-400
          focus:outline-none focus:border-accent-primary focus:ring-1 focus:ring-accent-primary
          hover:border-dark-400
          transition-colors duration-200
          ${g?"border-accent-danger focus:border-accent-danger focus:ring-accent-danger":"border-dark-600"}
          ${k?"opacity-50 cursor-not-allowed bg-dark-800":""}
        `,...M}),g&&jsxRuntimeExports.jsxs("p",{className:"text-sm text-accent-danger flex items-center gap-1",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),g]}),N&&!g&&jsxRuntimeExports.jsx("p",{className:"text-sm text-text-muted",children:N})]})}function Modal({isOpen:d,onClose:h,title:m,children:E,size:j="md",showClose:g=!0}){const N=reactExports.useRef(null),k={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl",full:"max-w-[90vw]"};return reactExports.useEffect(()=>{const A=w=>{w.key==="Escape"&&h()};return d&&(document.addEventListener("keydown",A),document.body.style.overflow="hidden",N.current?.focus()),()=>{document.removeEventListener("keydown",A),document.body.style.overflow="unset"}},[d,h]),d?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 bg-dark-950/80 backdrop-blur-sm",onClick:h}),jsxRuntimeExports.jsxs("div",{ref:N,role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",tabIndex:-1,className:`
          relative w-full ${k[j]}
          bg-dark-800 rounded-2xl
          border border-dark-600
          shadow-2xl shadow-black/50
          animate-in fade-in zoom-in-95 duration-200
        `,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-6 py-5 border-b border-dark-600",children:[jsxRuntimeExports.jsx("h2",{id:"modal-title",className:"text-xl font-semibold text-white tracking-tight",children:m}),g&&jsxRuntimeExports.jsx("button",{onClick:h,className:"p-2 rounded-lg text-dark-400 hover:text-white hover:bg-dark-700 transition-colors","aria-label":"Close modal",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"px-6 py-5 max-h-[70vh] overflow-y-auto",children:E})]})]}):null}function ProgressBar({value:d,max:h=100,color:m="primary",showLabel:E=!1,size:j="md",className:g=""}){const N=Math.min(Math.max(d/h*100,0),100),k={primary:"bg-accent-primary",secondary:"bg-text-secondary",success:"bg-accent-success",warning:"bg-accent-warning",danger:"bg-accent-danger",gold:"bg-gradient-to-r from-accent-primaryMuted via-accent-primary to-accent-primaryHover"},A={xs:"h-1",sm:"h-1.5",md:"h-2",lg:"h-3",xl:"h-4"};return jsxRuntimeExports.jsxs("div",{className:`w-full ${g}`,children:[jsxRuntimeExports.jsx("div",{className:`w-full bg-dark-700 rounded-full ${A[j]} overflow-hidden`,children:jsxRuntimeExports.jsx("div",{className:`${k[m]} ${A[j]} rounded-full transition-all duration-500 ease-out`,style:{width:`${N}%`}})}),E&&jsxRuntimeExports.jsxs("div",{className:"flex justify-between mt-1.5 text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-text-secondary",children:d}),jsxRuntimeExports.jsx("span",{className:"text-text-muted",children:h})]})]})}const TABS=[{id:"dashboard",label:"Home",icon:Home,requiresSubscription:!1},{id:"program",label:"Program",icon:Calendar,requiresSubscription:!0},{id:"nutrition",label:"Nutrition",icon:Utensils,requiresSubscription:!0},{id:"stats",label:"Stats",icon:BarChart3,requiresSubscription:!0},{id:"profile",label:"Profile",icon:User,requiresSubscription:!1}];function TabBar({activeTab:d,onChange:h,isSubscribed:m=!0}){return jsxRuntimeExports.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-dark-900/95 backdrop-blur-md border-t border-dark-700 px-2 pt-2 z-50",style:{paddingBottom:"max(0.5rem, env(safe-area-inset-bottom))"},children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:TABS.map(E=>{const j=d===E.id,g=!m&&E.requiresSubscription,N=E.icon;return jsxRuntimeExports.jsxs("button",{onClick:()=>h(E.id),className:`
                flex flex-col items-center px-4 py-2 rounded-xl transition-all duration-200 relative
                ${j?"text-accent-primary":g?"text-dark-500":"text-dark-400 hover:text-text-secondary"}
              `,children:[jsxRuntimeExports.jsxs("div",{className:`
                relative p-1.5 rounded-lg transition-all duration-200
                ${j?"bg-accent-primary/10":""}
              `,children:[jsxRuntimeExports.jsx(N,{className:`w-5 h-5 ${j?"stroke-[2.5]":"stroke-[1.5]"} ${g?"opacity-50":""}`}),j&&!g&&jsxRuntimeExports.jsx("div",{className:"absolute -bottom-1 left-1/2 -translate-x-1/2 w-1 h-1 bg-accent-primary rounded-full"}),g&&jsxRuntimeExports.jsx("div",{className:"absolute -top-1 -right-1 w-3.5 h-3.5 bg-dark-600 rounded-full flex items-center justify-center border border-dark-500",children:jsxRuntimeExports.jsx(Lock,{className:"w-2 h-2 text-accent-warning"})})]}),jsxRuntimeExports.jsx("span",{className:`text-xs mt-1 ${j?"font-semibold":"font-medium"} ${g?"opacity-50":""}`,children:E.label})]},E.id)})})})}function ProgressWidget({profile:d,program:h,meals:m,workouts:E,todaysMeals:j,todaysWorkouts:g}){const N=()=>{let Ee=null;if(d?.raceDate?Ee=new Date(d.raceDate):d?.aestheticGoalDate?Ee=new Date(d.aestheticGoalDate):d?.targetDate&&(Ee=new Date(d.targetDate)),Ee){const te=Ee-new Date,K=Math.ceil(te/(1e3*60*60*24));return K>0?K:null}return null},k=()=>{const Ee=N(),ue=d?.programType||h?.primaryGoal,te=d?.programSubtype||h?.primarySubtype,K=h?.currentPhase||"Base",me=h?.currentWeek||1,re=h?.mesocycleWeeks||5;if(ue==="endurance"){if(te==="marathon"||te==="running"){const U=d?.raceDistance||"race";return Ee?`Your ${U} is ${Ee} days away! Every run gets you closer to the finish line. `:"Building your aerobic base. Consistency beats intensity at this stage!"}return te==="triathlon"?Ee?`${Ee} days until race day! Swim, bike, run - you've got this! `:"Training all three disciplines builds an unstoppable athlete.":"Endurance is built one workout at a time. Keep moving forward!"}if(ue==="strength"){const U=d?.strengthGoals?.filter(Q=>Q.target)||[];return U.length>0?`${U.length} lift targets set. Progressive overload is your path to strength! `:`${K} phase - building the foundation for serious strength gains.`}if(ue==="aesthetic"){const U=d?.targetBodyFat;return U?`Working toward ${U}% body fat. Trust the process - gains take time! `:"Sculpting takes patience. Your dedication will pay off!"}if(ue==="fatloss"){const U=d?.targetWeight;return U?`On track to ${U} ${d?.weightUnit||"lbs"}. Small daily wins add up! `:"Fat loss is a marathon, not a sprint. Stay consistent!"}return{Base:`Building your foundation in the ${K} phase. This sets you up for success!`,Build:`${K} phase - time to push your limits and grow stronger!`,Peak:`${K} phase - you're at your strongest. Time to perform!`,Deload:"Recovery week - your body adapts and grows during rest. Embrace it!"}[K]||`Week ${me} of ${re} - keep showing up!`},A=()=>{const Ee=new Date().getDay()||7,ue=h?.weeklySchedule?.find(re=>re.day===Ee),te=ue?.isRestDay,K=ue?.sessions||[],me=g?.length||0;return{isRestDay:te,totalSessions:K.length,completedSessions:me,sessionNames:K.map(re=>re.focus).join(" + ")}},w=()=>{const Ee=h?.daysPerWeek||d?.desiredTrainingDays||4,ue=new Date,te=new Date(ue);te.setDate(ue.getDate()-ue.getDay()+1);const K=E?.filter(me=>{const re=new Date(me.loggedAt||me.completedAt);return re>=te&&re<=ue})||[];return{completed:K.length,target:Ee,percentage:Math.min(K.length/Ee*100,100)}},M=()=>{const Ee=d?.macros?.calories||d?.tdee||2e3,ue=j?.reduce((me,re)=>me+(re.calories||0),0)||0,te=Ee-ue,K=ue/Ee*100;return{consumed:ue,target:Ee,remaining:Math.max(te,0),percentOfTarget:K,mealsLogged:j?.length||0}},_=()=>{const Ee=h?.currentWeek||1,ue=h?.mesocycleWeeks||5;return{currentWeek:Ee,totalWeeks:ue,percentage:Ee/ue*100,phase:h?.currentPhase||"Base"}},J=N(),W=A(),ie=w(),q=M(),L=_();return jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"px-4 py-3 border-b border-dark-600",children:jsxRuntimeExports.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"w-5 h-5 text-accent-primary"}),"Daily Summary"]})}),jsxRuntimeExports.jsxs("div",{className:"mx-4 mt-4 p-4 rounded-lg bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30",children:[J&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 text-accent-primary"}),jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-white",children:J}),jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"days to go"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-200",children:k()})]}),jsxRuntimeExports.jsxs("div",{className:"mx-4 mt-4 p-3 rounded-lg bg-dark-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-5 h-5 text-accent-secondary"}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Today"})]}),W.isRestDay?jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:" Rest Day"}):jsxRuntimeExports.jsxs("span",{className:"text-gray-300",children:[W.completedSessions,"/",W.totalSessions," sessions"]})]}),!W.isRestDay&&W.sessionNames&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mt-1 ml-7",children:W.sessionNames})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-4 h-4"}),"This Week"]}),jsxRuntimeExports.jsxs("span",{className:"text-white font-medium",children:[ie.completed,"/",ie.target," workouts"]})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full rounded-full transition-all duration-500 bg-accent-primary",style:{width:`${ie.percentage}%`}})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Utensils,{className:"w-4 h-4"}),"Calories Today"]}),jsxRuntimeExports.jsxs("span",{className:`font-medium ${q.percentOfTarget>100?"text-orange-400":"text-green-400"}`,children:[q.consumed.toLocaleString()," / ",q.target.toLocaleString()]})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${q.percentOfTarget<=100?"bg-green-500":"bg-orange-500"}`,style:{width:`${Math.min(q.percentOfTarget,100)}%`}})}),q.remaining>0&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[q.remaining," kcal remaining"]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-400 flex items-center gap-1",children:[jsxRuntimeExports.jsx(Flame,{className:"w-4 h-4"}),L.phase," Phase"]}),jsxRuntimeExports.jsxs("span",{className:"text-white font-medium",children:["Week ",L.currentWeek," of ",L.totalWeeks]})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-dark-600 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-accent-secondary rounded-full transition-all duration-500",style:{width:`${L.percentage}%`}})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[jsxRuntimeExports.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:E?.length||0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Total Workouts"})]}),jsxRuntimeExports.jsxs("div",{className:"bg-dark-700 rounded-lg p-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:m?.length||0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Meals Logged"})]})]})]})]})}function ProgramOverview({profile:d,program:h}){const[m,E]=reactExports.useState(!0);if(!h)return null;const{name:j,description:g,totalWeeks:N,currentWeek:k,currentPhase:A,phases:w,athleteLevel:M,daysPerWeek:_,paces:J,baseline:W,progressionRules:ie,primaryGoal:q,primarySubtype:L,secondaryGoal:Ee,isHybrid:ue,allowDoubleDays:te,weeksUntilGoal:K}=h,me=()=>{if(!w||w.length===0)return[];const B=[];let Z=null;return w.forEach((ge,I)=>{const ne=I+1;!Z||Z.name!==ge?(Z&&B.push(Z),Z={name:ge,startWeek:ne,endWeek:ne,weeks:1}):(Z.endWeek=ne,Z.weeks++)}),Z&&B.push(Z),B},re=B=>{const Z={Base:{focus:"Building aerobic foundation & movement patterns",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Increasing volume & introducing intensity",intensity:"Moderate",icon:""},"Build 2":{focus:"Peak volume & race-specific workouts",intensity:"Moderate-High",icon:""},Build:{focus:"Increasing mileage & race-specific workouts",intensity:"Moderate-High",icon:""},Peak:{focus:"Sharpening fitness & race simulation",intensity:"High",icon:""},Taper:{focus:"Reducing volume for race readiness",intensity:"Low (recovery)",icon:""},Deload:{focus:"Active recovery & adaptation",intensity:"Low",icon:""}},ge={Base:{focus:"Building movement patterns & work capacity",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Progressive overload & strength gains",intensity:"Moderate",icon:""},"Build 2":{focus:"Heavy singles & competition prep",intensity:"Moderate-High",icon:""},Build:{focus:"Progressive overload & strength gains",intensity:"Moderate-High",icon:""},Peak:{focus:"Testing maxes & competition preparation",intensity:"High",icon:""},Taper:{focus:"Reducing volume for max strength",intensity:"Low (maintain)",icon:""},Deload:{focus:"Active recovery & CNS restoration",intensity:"Low",icon:""}},I={Base:{focus:"Building mind-muscle connection & form",intensity:"Low-Moderate",icon:""},"Build 1":{focus:"Increasing volume & hypertrophy",intensity:"Moderate",icon:""},"Build 2":{focus:"Peak volume & maximum pump",intensity:"Moderate-High",icon:""},Build:{focus:"Progressive overload & muscle building",intensity:"Moderate-High",icon:""},Peak:{focus:"Maximum intensity & muscle definition",intensity:"High",icon:""},Taper:{focus:"Reducing fatigue for peak aesthetics",intensity:"Low (maintain)",icon:""},Deload:{focus:"Active recovery & muscle repair",intensity:"Low",icon:""}};let ne;return q==="endurance"?ne=Z:q==="strength"?ne=ge:q==="aesthetic"?ne=I:ne=ge,ne[B]||{focus:"Training adaptation",intensity:"Moderate",icon:""}},F=()=>{if(q!=="endurance"||!W?.endurance)return null;const B=W.endurance.currentMileage||20,Z=M==="elite"?60:M==="advanced"?50:40,ge=[];let I=B;for(let ne=1;ne<=N;ne++)(ne===1||ne===Math.floor(N*.25)||ne===Math.floor(N*.5)||ne===Math.floor(N*.75)||ne===N-2||ne===N)&&ge.push({week:ne,mileage:Math.round(I)}),I=Math.min(I*1.05,Z);return{starting:B,peak:Z,milestones:ge}},U=()=>{const Z=(h.weeklySchedule||[]).filter(I=>!I.isRestDay),ge=Z.reduce((I,ne)=>I+(ne.sessions?.reduce((le,de)=>le+(de.exercises?.length||0),0)||0),0);return{workoutDays:Z.length,totalExercises:ge,avgExercisesPerDay:Math.round(ge/Math.max(Z.length,1))}},Q=me(),xe=F(),Ce=U();return jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl border border-dark-600 overflow-hidden",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>E(!m),className:"w-full px-4 py-3 border-b border-dark-600 flex items-center justify-between hover:bg-dark-700 transition-colors",children:[jsxRuntimeExports.jsxs("h3",{className:"text-white font-semibold flex items-center gap-2",children:[jsxRuntimeExports.jsx(BarChart2,{className:"w-5 h-5 text-accent-primary"}),"Program Overview"]}),m?jsxRuntimeExports.jsx(ChevronUp,{className:"w-5 h-5 text-gray-400"}):jsxRuntimeExports.jsx(ChevronDown,{className:"w-5 h-5 text-gray-400"})]}),m&&jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-5",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30",children:[jsxRuntimeExports.jsx("h4",{className:"text-lg font-bold text-white mb-1",children:j}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:g}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3 mt-3 text-xs",children:[jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-full text-gray-300",children:[N," weeks"]}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-dark-700 rounded-full text-gray-300",children:[_," days/week"]}),jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-accent-primary/30 rounded-full text-accent-primary",children:[M," level"]}),K&&jsxRuntimeExports.jsxs("span",{className:"px-2 py-1 bg-accent-secondary/30 rounded-full text-accent-secondary",children:[K," weeks to race"]})]})]}),(ue||L==="triathlon")&&jsxRuntimeExports.jsxs("div",{className:"p-4 rounded-lg bg-dark-700 border border-dark-500",children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-white mb-3 flex items-center gap-2",children:[L==="triathlon"?"":"",L==="triathlon"?"Triathlon Training Structure":"Hybrid Program Structure"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3 text-sm",children:L==="triathlon"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:"text-gray-300",children:["This program combines ",jsxRuntimeExports.jsx("span",{className:"text-cyan-400 font-medium",children:"swim"}),","," ",jsxRuntimeExports.jsx("span",{className:"text-orange-400 font-medium",children:"bike"}),", and"," ",jsxRuntimeExports.jsx("span",{className:"text-green-400 font-medium",children:"run"})," training with"," ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary font-medium",children:"injury prevention strength"})," work."]}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 text-gray-400",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{children:"3 strength sessions/week (hip stability, core, shoulders)"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{children:"Double day sessions (AM cardio + PM strength)"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{children:"Brick workouts for race-day transitions"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{children:"Periodized build to peak race fitness"})]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{className:"text-gray-300",children:["This hybrid program balances ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary font-medium",children:q})," training with ",jsxRuntimeExports.jsx("span",{className:"text-accent-secondary font-medium",children:Ee})," work for well-rounded athletic development."]}),jsxRuntimeExports.jsxs("ul",{className:"space-y-2 text-gray-400",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsxs("span",{children:["Minimum 3 ",Ee," sessions strategically placed"]})]}),te&&jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{children:"Double days on recovery/easy training days"})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{children:"Smart scheduling to avoid interference"})]})]})]})})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4"}),"Training Phases"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:Q.map((B,Z)=>{const ge=re(B.name),I=B.name===A,ne={Base:{border:"border-l-blue-500",bg:"bg-blue-500/5"},Build:{border:"border-l-orange-500",bg:"bg-orange-500/5"},"Build 1":{border:"border-l-orange-500",bg:"bg-orange-500/5"},"Build 2":{border:"border-l-red-500",bg:"bg-red-500/5"},Peak:{border:"border-l-purple-500",bg:"bg-purple-500/5"},Taper:{border:"border-l-cyan-500",bg:"bg-cyan-500/5"},Deload:{border:"border-l-green-500",bg:"bg-green-500/5"}},le=ne[B.name]||ne.Base,de=()=>{if(B.weeks===1)return`Week ${B.startWeek}`;if(B.weeks<=3){const ye=[];for(let z=B.startWeek;z<=B.endWeek;z++)ye.push(z);return`Weeks ${ye.join(", ")}`}else return`Weeks ${B.startWeek}${B.endWeek}`};return jsxRuntimeExports.jsxs("div",{className:`p-3 rounded-lg border-l-4 ${le.border} ${I?"bg-accent-primary/20 border border-l-4 border-accent-primary/50":`${le.bg} border border-dark-600`}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:ge.icon}),jsxRuntimeExports.jsx("span",{className:"font-medium text-white",children:B.name}),I&&jsxRuntimeExports.jsx("span",{className:"text-xs px-2 py-0.5 bg-accent-primary rounded-full text-white",children:"Current"})]}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-accent-primary font-medium",children:de()}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:["(",B.weeks," ",B.weeks===1?"week":"weeks",")"]})]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:ge.focus}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Intensity: ",ge.intensity]})]},Z)})})]}),xe&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-4 h-4"}),"Weekly Mileage Progression"]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Start"}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Peak"})]}),jsxRuntimeExports.jsxs("div",{className:"relative h-8 bg-dark-600 rounded-full overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"absolute left-0 top-0 h-full bg-gradient-to-r from-accent-primary to-accent-secondary rounded-full",style:{width:`${xe.starting/xe.peak*100}%`}}),jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-xs font-medium text-white",children:[xe.starting," mi"]}),jsxRuntimeExports.jsxs("span",{className:"text-xs font-medium text-white",children:[xe.peak," mi"]})]})]}),jsxRuntimeExports.jsx("div",{className:"mt-3 grid grid-cols-3 gap-2 text-center",children:xe.milestones.slice(0,3).map((B,Z)=>jsxRuntimeExports.jsxs("div",{className:"text-xs",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-500",children:["Wk ",B.week]}),jsxRuntimeExports.jsxs("p",{className:"text-white font-medium",children:[B.mileage," mi"]})]},Z))})]})]}),J&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4"}),"Your Training Paces"]}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{label:"Easy",pace:J.easyPace,zone:"Zone 2"},{label:"Tempo",pace:J.tempoPace,zone:"Zone 3-4"},{label:"Interval",pace:J.intervalPace,zone:"Zone 4-5"},{label:"Long Run",pace:J.longRunPace,zone:"Zone 2"}].map((B,Z)=>jsxRuntimeExports.jsxs("div",{className:"p-2 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:B.label}),jsxRuntimeExports.jsx("p",{className:"text-sm font-medium text-white",children:B.pace}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:B.zone})]},Z))}),J.currentPace&&J.goalPace!==J.currentPace&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:["Current: ",J.currentPace,"  Goal: ",J.goalPace]})]}),W?.strength?.lifts?.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-4 h-4"}),"Your Lift Targets"]}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:W.strength.lifts.map((B,Z)=>jsxRuntimeExports.jsxs("div",{className:"p-2 bg-dark-700 rounded-lg flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-white",children:B.exercise}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:[B.current1RM,"lbs"]}),jsxRuntimeExports.jsx("span",{className:"text-gray-500 mx-1",children:""}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-accent-secondary font-medium",children:[B.target1RM,"lbs"]})]})]},Z))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),"Weekly Structure"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:Ce.workoutDays}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Workout Days"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:Ce.totalExercises}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Exercises/Week"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:7-Ce.workoutDays}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Rest Days"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h5",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4"}),"Program Principles"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[ie&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ie.mileageIncrease&&jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-4 h-4 text-accent-warning mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:ie.mileageIncrease})]}),ie.strengthIncrease&&jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-4 h-4 text-accent-success mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:ie.strengthIncrease})]}),ie.deloadProtocol&&jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4 text-accent-primary mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:ie.deloadProtocol})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[jsxRuntimeExports.jsx(Target,{className:"w-4 h-4 text-accent-secondary mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"RPE-based intensity to auto-regulate based on daily readiness"})]})]})]})]})]})}var Html5QrcodeSupportedFormats;(function(d){d[d.QR_CODE=0]="QR_CODE",d[d.AZTEC=1]="AZTEC",d[d.CODABAR=2]="CODABAR",d[d.CODE_39=3]="CODE_39",d[d.CODE_93=4]="CODE_93",d[d.CODE_128=5]="CODE_128",d[d.DATA_MATRIX=6]="DATA_MATRIX",d[d.MAXICODE=7]="MAXICODE",d[d.ITF=8]="ITF",d[d.EAN_13=9]="EAN_13",d[d.EAN_8=10]="EAN_8",d[d.PDF_417=11]="PDF_417",d[d.RSS_14=12]="RSS_14",d[d.RSS_EXPANDED=13]="RSS_EXPANDED",d[d.UPC_A=14]="UPC_A",d[d.UPC_E=15]="UPC_E",d[d.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Html5QrcodeSupportedFormats||(Html5QrcodeSupportedFormats={}));var html5QrcodeSupportedFormatsTextMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,"QR_CODE"],[Html5QrcodeSupportedFormats.AZTEC,"AZTEC"],[Html5QrcodeSupportedFormats.CODABAR,"CODABAR"],[Html5QrcodeSupportedFormats.CODE_39,"CODE_39"],[Html5QrcodeSupportedFormats.CODE_93,"CODE_93"],[Html5QrcodeSupportedFormats.CODE_128,"CODE_128"],[Html5QrcodeSupportedFormats.DATA_MATRIX,"DATA_MATRIX"],[Html5QrcodeSupportedFormats.MAXICODE,"MAXICODE"],[Html5QrcodeSupportedFormats.ITF,"ITF"],[Html5QrcodeSupportedFormats.EAN_13,"EAN_13"],[Html5QrcodeSupportedFormats.EAN_8,"EAN_8"],[Html5QrcodeSupportedFormats.PDF_417,"PDF_417"],[Html5QrcodeSupportedFormats.RSS_14,"RSS_14"],[Html5QrcodeSupportedFormats.RSS_EXPANDED,"RSS_EXPANDED"],[Html5QrcodeSupportedFormats.UPC_A,"UPC_A"],[Html5QrcodeSupportedFormats.UPC_E,"UPC_E"],[Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),DecodedTextType;(function(d){d[d.UNKNOWN=0]="UNKNOWN",d[d.URL=1]="URL"})(DecodedTextType||(DecodedTextType={}));function isValidHtml5QrcodeSupportedFormats(d){return Object.values(Html5QrcodeSupportedFormats).includes(d)}var Html5QrcodeScanType;(function(d){d[d.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",d[d.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Html5QrcodeScanType||(Html5QrcodeScanType={}));var Html5QrcodeConstants=(function(){function d(){}return d.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",d.SCAN_DEFAULT_FPS=2,d.DEFAULT_DISABLE_FLIP=!1,d.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,d.DEFAULT_SUPPORTED_SCAN_TYPE=[Html5QrcodeScanType.SCAN_TYPE_CAMERA,Html5QrcodeScanType.SCAN_TYPE_FILE],d})(),QrcodeResultFormat=(function(){function d(h,m){this.format=h,this.formatName=m}return d.prototype.toString=function(){return this.formatName},d.create=function(h){if(!html5QrcodeSupportedFormatsTextMap.has(h))throw"".concat(h," not in html5QrcodeSupportedFormatsTextMap");return new d(h,html5QrcodeSupportedFormatsTextMap.get(h))},d})(),Html5QrcodeResultFactory=(function(){function d(){}return d.createFromText=function(h){var m={text:h};return{decodedText:h,result:m}},d.createFromQrcodeResult=function(h){return{decodedText:h.text,result:h}},d})(),Html5QrcodeErrorTypes;(function(d){d[d.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",d[d.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",d[d.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Html5QrcodeErrorTypes||(Html5QrcodeErrorTypes={}));var Html5QrcodeErrorFactory=(function(){function d(){}return d.createFrom=function(h){return{errorMessage:h,type:Html5QrcodeErrorTypes.UNKWOWN_ERROR}},d})(),BaseLoggger=(function(){function d(h){this.verbose=h}return d.prototype.log=function(h){this.verbose&&console.log(h)},d.prototype.warn=function(h){this.verbose&&console.warn(h)},d.prototype.logError=function(h,m){(this.verbose||m===!0)&&console.error(h)},d.prototype.logErrors=function(h){if(h.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(h)},d})();function isNullOrUndefined(d){return typeof d>"u"||d===null}var Html5QrcodeStrings=(function(){function d(){}return d.codeParseError=function(h){return"QR code parse error, error = ".concat(h)},d.errorGettingUserMedia=function(h){return"Error getting userMedia, error = ".concat(h)},d.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},d.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},d.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},d.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},d.scannerPaused=function(){return"Scanner paused"},d})(),VideoConstraintsUtil=(function(){function d(){}return d.isMediaStreamConstraintsValid=function(h,m){if(typeof h!="object"){var E=typeof h;return m.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(E,"."),!0),!1}for(var j=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(j),N=Object.keys(h),k=0,A=N;k<A.length;k++){var w=A[k];if(g.has(w))return m.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},d})(),zxingJs_umd$1={exports:{}},zxingJs_umd=zxingJs_umd$1.exports,hasRequiredZxingJs_umd;function requireZxingJs_umd(){return hasRequiredZxingJs_umd||(hasRequiredZxingJs_umd=1,(function(d,h){(function(m,E){E(h)})(zxingJs_umd,(function(m){function E(b){return b==null}var j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,e){b.__proto__=e}||function(b,e){for(var s in e)e.hasOwnProperty(s)&&(b[s]=e[s])};function g(b,e){j(b,e);function s(){this.constructor=b}b.prototype=e===null?Object.create(e):(s.prototype=e.prototype,new s)}function N(b,e){var s=Object.setPrototypeOf;s?s(b,e):b.__proto__=e}function k(b,e){e===void 0&&(e=b.constructor);var s=Error.captureStackTrace;s&&s(b,e)}var A=(function(b){g(e,b);function e(s){var r=this.constructor,i=b.call(this,s)||this;return Object.defineProperty(i,"name",{value:r.name,enumerable:!1}),N(i,r.prototype),k(i),i}return e})(Error);class w extends A{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}w.kind="Exception";class M extends w{}M.kind="ArgumentException";class _ extends w{}_.kind="IllegalArgumentException";class J{constructor(e){if(this.binarizer=e,e===null)throw new _("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,s){return this.binarizer.getBlackRow(e,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,s,r,i){const a=this.binarizer.getLuminanceSource().crop(e,s,r,i);return new J(this.binarizer.createBinarizer(a))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new J(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new J(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class W extends w{static getChecksumInstance(){return new W}}W.kind="ChecksumException";class ie{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class q{static arraycopy(e,s,r,i,a){for(;a--;)r[i++]=e[s++]}static currentTimeMillis(){return Date.now()}}class L extends w{}L.kind="IndexOutOfBoundsException";class Ee extends L{constructor(e=void 0,s=void 0){super(s),this.index=e,this.message=s}}Ee.kind="ArrayIndexOutOfBoundsException";class ue{static fill(e,s){for(let r=0,i=e.length;r<i;r++)e[r]=s}static fillWithin(e,s,r,i){ue.rangeCheck(e.length,s,r);for(let a=s;a<r;a++)e[a]=i}static rangeCheck(e,s,r){if(s>r)throw new _("fromIndex("+s+") > toIndex("+r+")");if(s<0)throw new Ee(s);if(r>e)throw new Ee(r)}static asList(...e){return e}static create(e,s,r){return Array.from({length:e}).map(a=>Array.from({length:s}).fill(r))}static createInt32Array(e,s,r){return Array.from({length:e}).map(a=>Int32Array.from({length:s}).fill(r))}static equals(e,s){if(!e||!s||!e.length||!s.length||e.length!==s.length)return!1;for(let r=0,i=e.length;r<i;r++)if(e[r]!==s[r])return!1;return!0}static hashCode(e){if(e===null)return 0;let s=1;for(const r of e)s=31*s+r;return s}static fillUint8Array(e,s){for(let r=0;r!==e.length;r++)e[r]=s}static copyOf(e,s){return e.slice(0,s)}static copyOfUint8Array(e,s){if(e.length<=s){const r=new Uint8Array(s);return r.set(e),r}return e.slice(0,s)}static copyOfRange(e,s,r){const i=r-s,a=new Int32Array(i);return q.arraycopy(e,s,a,0,i),a}static binarySearch(e,s,r){r===void 0&&(r=ue.numberComparator);let i=0,a=e.length-1;for(;i<=a;){const o=a+i>>1,c=r(s,e[o]);if(c>0)i=o+1;else if(c<0)a=o-1;else return o}return-i-1}static numberComparator(e,s){return e-s}}class te{static numberOfTrailingZeros(e){let s;if(e===0)return 32;let r=31;return s=e<<16,s!==0&&(r-=16,e=s),s=e<<8,s!==0&&(r-=8,e=s),s=e<<4,s!==0&&(r-=4,e=s),s=e<<2,s!==0&&(r-=2,e=s),r-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let s=1;return e>>>16||(s+=16,e<<=16),e>>>24||(s+=8,e<<=8),e>>>28||(s+=4,e<<=4),e>>>30||(s+=2,e<<=2),s-=e>>>31,s}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,s){return Math.trunc(e/s)}static parseInt(e,s=void 0){return parseInt(e,s)}}te.MIN_VALUE_32_BITS=-2147483648,te.MAX_VALUE=Number.MAX_SAFE_INTEGER;class K{constructor(e,s){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,s==null?this.bits=K.makeArray(e):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const s=K.makeArray(e);q.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const s=this.size;if(e>=s)return s;const r=this.bits;let i=Math.floor(e/32),a=r[i];a&=~((1<<(e&31))-1);const o=r.length;for(;a===0;){if(++i===o)return s;a=r[i]}const c=i*32+te.numberOfTrailingZeros(a);return c>s?s:c}getNextUnset(e){const s=this.size;if(e>=s)return s;const r=this.bits;let i=Math.floor(e/32),a=~r[i];a&=~((1<<(e&31))-1);const o=r.length;for(;a===0;){if(++i===o)return s;a=~r[i]}const c=i*32+te.numberOfTrailingZeros(a);return c>s?s:c}setBulk(e,s){this.bits[Math.floor(e/32)]=s}setRange(e,s){if(s<e||e<0||s>this.size)throw new _;if(s===e)return;s--;const r=Math.floor(e/32),i=Math.floor(s/32),a=this.bits;for(let o=r;o<=i;o++){const c=o>r?0:e&31,p=(2<<(o<i?31:s&31))-(1<<c);a[o]|=p}}clear(){const e=this.bits.length,s=this.bits;for(let r=0;r<e;r++)s[r]=0}isRange(e,s,r){if(s<e||e<0||s>this.size)throw new _;if(s===e)return!0;s--;const i=Math.floor(e/32),a=Math.floor(s/32),o=this.bits;for(let c=i;c<=a;c++){const x=c>i?0:e&31,R=(2<<(c<a?31:s&31))-(1<<x)&4294967295;if((o[c]&R)!==(r?R:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,s){if(s<0||s>32)throw new _("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let r=s;r>0;r--)this.appendBit((e>>r-1&1)===1)}appendBitArray(e){const s=e.size;this.ensureCapacity(this.size+s);for(let r=0;r<s;r++)this.appendBit(e.get(r))}xor(e){if(this.size!==e.size)throw new _("Sizes don't match");const s=this.bits;for(let r=0,i=s.length;r<i;r++)s[r]^=e.bits[r]}toBytes(e,s,r,i){for(let a=0;a<i;a++){let o=0;for(let c=0;c<8;c++)this.get(e)&&(o|=1<<7-c),e++;s[r+a]=o}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),r=s+1,i=this.bits;for(let a=0;a<r;a++){let o=i[a];o=o>>1&1431655765|(o&1431655765)<<1,o=o>>2&858993459|(o&858993459)<<2,o=o>>4&252645135|(o&252645135)<<4,o=o>>8&16711935|(o&16711935)<<8,o=o>>16&65535|(o&65535)<<16,e[s-a]=o}if(this.size!==r*32){const a=r*32-this.size;let o=e[0]>>>a;for(let c=1;c<r;c++){const x=e[c];o|=x<<32-a,e[c-1]=o,o=x>>>a}e[r-1]=o}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof K))return!1;const s=e;return this.size===s.size&&ue.equals(this.bits,s.bits)}hashCode(){return 31*this.size+ue.hashCode(this.bits)}toString(){let e="";for(let s=0,r=this.size;s<r;s++)(s&7)===0&&(e+=" "),e+=this.get(s)?"X":".";return e}clone(){return new K(this.size,this.bits.slice())}}var me;(function(b){b[b.OTHER=0]="OTHER",b[b.PURE_BARCODE=1]="PURE_BARCODE",b[b.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",b[b.TRY_HARDER=3]="TRY_HARDER",b[b.CHARACTER_SET=4]="CHARACTER_SET",b[b.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",b[b.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",b[b.ASSUME_GS1=7]="ASSUME_GS1",b[b.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",b[b.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",b[b.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(me||(me={}));var re=me;class F extends w{static getFormatInstance(){return new F}}F.kind="FormatException";var U;(function(b){b[b.Cp437=0]="Cp437",b[b.ISO8859_1=1]="ISO8859_1",b[b.ISO8859_2=2]="ISO8859_2",b[b.ISO8859_3=3]="ISO8859_3",b[b.ISO8859_4=4]="ISO8859_4",b[b.ISO8859_5=5]="ISO8859_5",b[b.ISO8859_6=6]="ISO8859_6",b[b.ISO8859_7=7]="ISO8859_7",b[b.ISO8859_8=8]="ISO8859_8",b[b.ISO8859_9=9]="ISO8859_9",b[b.ISO8859_10=10]="ISO8859_10",b[b.ISO8859_11=11]="ISO8859_11",b[b.ISO8859_13=12]="ISO8859_13",b[b.ISO8859_14=13]="ISO8859_14",b[b.ISO8859_15=14]="ISO8859_15",b[b.ISO8859_16=15]="ISO8859_16",b[b.SJIS=16]="SJIS",b[b.Cp1250=17]="Cp1250",b[b.Cp1251=18]="Cp1251",b[b.Cp1252=19]="Cp1252",b[b.Cp1256=20]="Cp1256",b[b.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",b[b.UTF8=22]="UTF8",b[b.ASCII=23]="ASCII",b[b.Big5=24]="Big5",b[b.GB18030=25]="GB18030",b[b.EUC_KR=26]="EUC_KR"})(U||(U={}));class Q{constructor(e,s,r,...i){this.valueIdentifier=e,this.name=r,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=i,Q.VALUE_IDENTIFIER_TO_ECI.set(e,this),Q.NAME_TO_ECI.set(r,this);const a=this.values;for(let o=0,c=a.length;o!==c;o++){const x=a[o];Q.VALUES_TO_ECI.set(x,this)}for(const o of i)Q.NAME_TO_ECI.set(o,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new F("incorect value");const s=Q.VALUES_TO_ECI.get(e);if(s===void 0)throw new F("incorect value");return s}static getCharacterSetECIByName(e){const s=Q.NAME_TO_ECI.get(e);if(s===void 0)throw new F("incorect value");return s}equals(e){if(!(e instanceof Q))return!1;const s=e;return this.getName()===s.getName()}}Q.VALUE_IDENTIFIER_TO_ECI=new Map,Q.VALUES_TO_ECI=new Map,Q.NAME_TO_ECI=new Map,Q.Cp437=new Q(U.Cp437,Int32Array.from([0,2]),"Cp437"),Q.ISO8859_1=new Q(U.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Q.ISO8859_2=new Q(U.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Q.ISO8859_3=new Q(U.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Q.ISO8859_4=new Q(U.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Q.ISO8859_5=new Q(U.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Q.ISO8859_6=new Q(U.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Q.ISO8859_7=new Q(U.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Q.ISO8859_8=new Q(U.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Q.ISO8859_9=new Q(U.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Q.ISO8859_10=new Q(U.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Q.ISO8859_11=new Q(U.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Q.ISO8859_13=new Q(U.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Q.ISO8859_14=new Q(U.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Q.ISO8859_15=new Q(U.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Q.ISO8859_16=new Q(U.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Q.SJIS=new Q(U.SJIS,20,"SJIS","Shift_JIS"),Q.Cp1250=new Q(U.Cp1250,21,"Cp1250","windows-1250"),Q.Cp1251=new Q(U.Cp1251,22,"Cp1251","windows-1251"),Q.Cp1252=new Q(U.Cp1252,23,"Cp1252","windows-1252"),Q.Cp1256=new Q(U.Cp1256,24,"Cp1256","windows-1256"),Q.UnicodeBigUnmarked=new Q(U.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Q.UTF8=new Q(U.UTF8,26,"UTF8","UTF-8"),Q.ASCII=new Q(U.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Q.Big5=new Q(U.Big5,28,"Big5"),Q.GB18030=new Q(U.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Q.EUC_KR=new Q(U.EUC_KR,30,"EUC_KR","EUC-KR");class xe extends w{}xe.kind="UnsupportedOperationException";class Ce{static decode(e,s){const r=this.encodingName(s);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)}static shouldDecodeOnFallback(e){return!Ce.isBrowser()&&e==="ISO-8859-1"}static encode(e,s){const r=this.encodingName(s);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof Q?e:Q.getCharacterSetECIByName(e)}static decodeFallback(e,s){const r=this.encodingCharacterSet(s);if(Ce.isDecodeFallbackSupported(r)){let i="";for(let a=0,o=e.length;a<o;a++){let c=e[a].toString(16);c.length<2&&(c="0"+c),i+="%"+c}return decodeURIComponent(i)}if(r.equals(Q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new xe(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(Q.UTF8)||e.equals(Q.ISO8859_1)||e.equals(Q.ASCII)}static encodeFallback(e){const r=btoa(unescape(encodeURIComponent(e))).split(""),i=[];for(let a=0;a<r.length;a++)i.push(r[a].charCodeAt(0));return new Uint8Array(i)}}class B{static castAsNonUtf8Char(e,s=null){const r=s?s.getName():this.ISO88591;return Ce.decode(new Uint8Array([e]),r)}static guessEncoding(e,s){if(s!=null&&s.get(re.CHARACTER_SET)!==void 0)return s.get(re.CHARACTER_SET).toString();const r=e.length;let i=!0,a=!0,o=!0,c=0,x=0,p=0,R=0,v=0,S=0,P=0,H=0,Y=0,se=0,he=0;const ke=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let Ae=0;Ae<r&&(i||a||o);Ae++){const ve=e[Ae]&255;o&&(c>0?(ve&128)===0?o=!1:c--:(ve&128)!==0&&((ve&64)===0?o=!1:(c++,(ve&32)===0?x++:(c++,(ve&16)===0?p++:(c++,(ve&8)===0?R++:o=!1))))),i&&(ve>127&&ve<160?i=!1:ve>159&&(ve<192||ve===215||ve===247)&&he++),a&&(v>0?ve<64||ve===127||ve>252?a=!1:v--:ve===128||ve===160||ve>239?a=!1:ve>160&&ve<224?(S++,H=0,P++,P>Y&&(Y=P)):ve>127?(v++,P=0,H++,H>se&&(se=H)):(P=0,H=0))}return o&&c>0&&(o=!1),a&&v>0&&(a=!1),o&&(ke||x+p+R>0)?B.UTF8:a&&(B.ASSUME_SHIFT_JIS||Y>=3||se>=3)?B.SHIFT_JIS:i&&a?Y===2&&S===2||he*10>=r?B.SHIFT_JIS:B.ISO88591:i?B.ISO88591:a?B.SHIFT_JIS:o?B.UTF8:B.PLATFORM_DEFAULT_ENCODING}static format(e,...s){let r=-1;function i(o,c,x,p,R,v){if(o==="%%")return"%";if(s[++r]===void 0)return;o=p?parseInt(p.substr(1)):void 0;let S=R?parseInt(R.substr(1)):void 0,P;switch(v){case"s":P=s[r];break;case"c":P=s[r][0];break;case"f":P=parseFloat(s[r]).toFixed(o);break;case"p":P=parseFloat(s[r]).toPrecision(o);break;case"e":P=parseFloat(s[r]).toExponential(o);break;case"x":P=parseInt(s[r]).toString(S||16);break;case"d":P=parseFloat(parseInt(s[r],S||10).toPrecision(o)).toFixed(0);break}P=typeof P=="object"?JSON.stringify(P):(+P).toString(S);let H=parseInt(x),Y=x&&x[0]+""=="0"?"0":" ";for(;P.length<H;)P=c!==void 0?P+Y:Y+P;return P}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)}static getBytes(e,s){return Ce.encode(e,s)}static getCharCode(e,s=0){return e.charCodeAt(s)}static getCharAt(e){return String.fromCharCode(e)}}B.SHIFT_JIS=Q.SJIS.getName(),B.GB2312="GB2312",B.ISO88591=Q.ISO8859_1.getName(),B.EUC_JP="EUC_JP",B.UTF8=Q.UTF8.getName(),B.PLATFORM_DEFAULT_ENCODING=B.UTF8,B.ASSUME_SHIFT_JIS=!1;class Z{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=B.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,s,r){for(let i=s;s<s+r;i++)this.append(e[i]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,s){this.value=this.value.substr(0,e)+s+this.value.substr(e+1)}substring(e,s){return this.value.substring(e,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,s){this.value=this.value.substr(0,e)+s+this.value.substr(e+s.length)}}class ge{constructor(e,s,r,i){if(this.width=e,this.height=s,this.rowSize=r,this.bits=i,s==null&&(s=e),this.height=s,e<1||s<1)throw new _("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const s=e.length,r=e[0].length,i=new ge(r,s);for(let a=0;a<s;a++){const o=e[a];for(let c=0;c<r;c++)o[c]&&i.set(c,a)}return i}static parseFromString(e,s,r){if(e===null)throw new _("stringRepresentation cannot be null");const i=new Array(e.length);let a=0,o=0,c=-1,x=0,p=0;for(;p<e.length;)if(e.charAt(p)===`
`||e.charAt(p)==="\r"){if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new _("row lengths do not match");o=a,x++}p++}else if(e.substring(p,p+s.length)===s)p+=s.length,i[a]=!0,a++;else if(e.substring(p,p+r.length)===r)p+=r.length,i[a]=!1,a++;else throw new _("illegal character encountered: "+e.substring(p));if(a>o){if(c===-1)c=a-o;else if(a-o!==c)throw new _("row lengths do not match");x++}const R=new ge(c,x);for(let v=0;v<a;v++)i[v]&&R.set(Math.floor(v%c),Math.floor(v/c));return R}get(e,s){const r=s*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0}set(e,s){const r=s*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295}unset(e,s){const r=s*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)}flip(e,s){const r=s*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new _("input matrix dimensions do not match");const s=new K(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits;for(let a=0,o=this.height;a<o;a++){const c=a*r,x=e.getRow(a,s).getBitArray();for(let p=0;p<r;p++)i[c+p]^=x[p]}}clear(){const e=this.bits,s=e.length;for(let r=0;r<s;r++)e[r]=0}setRegion(e,s,r,i){if(s<0||e<0)throw new _("Left and top must be nonnegative");if(i<1||r<1)throw new _("Height and width must be at least 1");const a=e+r,o=s+i;if(o>this.height||a>this.width)throw new _("The region must fit inside the matrix");const c=this.rowSize,x=this.bits;for(let p=s;p<o;p++){const R=p*c;for(let v=e;v<a;v++)x[R+Math.floor(v/32)]|=1<<(v&31)&4294967295}}getRow(e,s){s==null||s.getSize()<this.width?s=new K(this.width):s.clear();const r=this.rowSize,i=this.bits,a=e*r;for(let o=0;o<r;o++)s.setBulk(o*32,i[a+o]);return s}setRow(e,s){q.arraycopy(s.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),s=this.getHeight();let r=new K(e),i=new K(e);for(let a=0,o=Math.floor((s+1)/2);a<o;a++)r=this.getRow(a,r),i=this.getRow(s-1-a,i),r.reverse(),i.reverse(),this.setRow(a,i),this.setRow(s-1-a,r)}getEnclosingRectangle(){const e=this.width,s=this.height,r=this.rowSize,i=this.bits;let a=e,o=s,c=-1,x=-1;for(let p=0;p<s;p++)for(let R=0;R<r;R++){const v=i[p*r+R];if(v!==0){if(p<o&&(o=p),p>x&&(x=p),R*32<a){let S=0;for(;(v<<31-S&4294967295)===0;)S++;R*32+S<a&&(a=R*32+S)}if(R*32+31>c){let S=31;for(;!(v>>>S);)S--;R*32+S>c&&(c=R*32+S)}}}return c<a||x<o?null:Int32Array.from([a,o,c-a+1,x-o+1])}getTopLeftOnBit(){const e=this.rowSize,s=this.bits;let r=0;for(;r<s.length&&s[r]===0;)r++;if(r===s.length)return null;const i=r/e;let a=r%e*32;const o=s[r];let c=0;for(;(o<<31-c&4294967295)===0;)c++;return a+=c,Int32Array.from([a,i])}getBottomRightOnBit(){const e=this.rowSize,s=this.bits;let r=s.length-1;for(;r>=0&&s[r]===0;)r--;if(r<0)return null;const i=Math.floor(r/e);let a=Math.floor(r%e)*32;const o=s[r];let c=31;for(;!(o>>>c);)c--;return a+=c,Int32Array.from([a,i])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof ge))return!1;const s=e;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&ue.equals(this.bits,s.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+ue.hashCode(this.bits),e}toString(e="X ",s="  ",r=`
`){return this.buildToString(e,s,r)}buildToString(e,s,r){let i=new Z;for(let a=0,o=this.height;a<o;a++){for(let c=0,x=this.width;c<x;c++)i.append(this.get(c,a)?e:s);i.append(r)}return i.toString()}clone(){return new ge(this.width,this.height,this.rowSize,this.bits.slice())}}class I extends w{static getNotFoundInstance(){return new I}}I.kind="NotFoundException";class ne extends ie{constructor(e){super(e),this.luminances=ne.EMPTY,this.buckets=new Int32Array(ne.LUMINANCE_BUCKETS)}getBlackRow(e,s){const r=this.getLuminanceSource(),i=r.getWidth();s==null||s.getSize()<i?s=new K(i):s.clear(),this.initArrays(i);const a=r.getRow(e,this.luminances),o=this.buckets;for(let x=0;x<i;x++)o[(a[x]&255)>>ne.LUMINANCE_SHIFT]++;const c=ne.estimateBlackPoint(o);if(i<3)for(let x=0;x<i;x++)(a[x]&255)<c&&s.set(x);else{let x=a[0]&255,p=a[1]&255;for(let R=1;R<i-1;R++){const v=a[R+1]&255;(p*4-x-v)/2<c&&s.set(R),x=p,p=v}}return s}getBlackMatrix(){const e=this.getLuminanceSource(),s=e.getWidth(),r=e.getHeight(),i=new ge(s,r);this.initArrays(s);const a=this.buckets;for(let x=1;x<5;x++){const p=Math.floor(r*x/5),R=e.getRow(p,this.luminances),v=Math.floor(s*4/5);for(let S=Math.floor(s/5);S<v;S++){const P=R[S]&255;a[P>>ne.LUMINANCE_SHIFT]++}}const o=ne.estimateBlackPoint(a),c=e.getMatrix();for(let x=0;x<r;x++){const p=x*s;for(let R=0;R<s;R++)(c[p+R]&255)<o&&i.set(R,x)}return i}createBinarizer(e){return new ne(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const s=this.buckets;for(let r=0;r<ne.LUMINANCE_BUCKETS;r++)s[r]=0}static estimateBlackPoint(e){const s=e.length;let r=0,i=0,a=0;for(let R=0;R<s;R++)e[R]>a&&(i=R,a=e[R]),e[R]>r&&(r=e[R]);let o=0,c=0;for(let R=0;R<s;R++){const v=R-i,S=e[R]*v*v;S>c&&(o=R,c=S)}if(i>o){const R=i;i=o,o=R}if(o-i<=s/16)throw new I;let x=o-1,p=-1;for(let R=o-1;R>i;R--){const v=R-i,S=v*v*(o-R)*(r-e[R]);S>p&&(x=R,p=S)}return x<<ne.LUMINANCE_SHIFT}}ne.LUMINANCE_BITS=5,ne.LUMINANCE_SHIFT=8-ne.LUMINANCE_BITS,ne.LUMINANCE_BUCKETS=1<<ne.LUMINANCE_BITS,ne.EMPTY=Uint8ClampedArray.from([0]);class le extends ne{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),s=e.getWidth(),r=e.getHeight();if(s>=le.MINIMUM_DIMENSION&&r>=le.MINIMUM_DIMENSION){const i=e.getMatrix();let a=s>>le.BLOCK_SIZE_POWER;(s&le.BLOCK_SIZE_MASK)!==0&&a++;let o=r>>le.BLOCK_SIZE_POWER;(r&le.BLOCK_SIZE_MASK)!==0&&o++;const c=le.calculateBlackPoints(i,a,o,s,r),x=new ge(s,r);le.calculateThresholdForBlock(i,a,o,s,r,c,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new le(e)}static calculateThresholdForBlock(e,s,r,i,a,o,c){const x=a-le.BLOCK_SIZE,p=i-le.BLOCK_SIZE;for(let R=0;R<r;R++){let v=R<<le.BLOCK_SIZE_POWER;v>x&&(v=x);const S=le.cap(R,2,r-3);for(let P=0;P<s;P++){let H=P<<le.BLOCK_SIZE_POWER;H>p&&(H=p);const Y=le.cap(P,2,s-3);let se=0;for(let ke=-2;ke<=2;ke++){const Ae=o[S+ke];se+=Ae[Y-2]+Ae[Y-1]+Ae[Y]+Ae[Y+1]+Ae[Y+2]}const he=se/25;le.thresholdBlock(e,H,v,he,i,c)}}}static cap(e,s,r){return e<s?s:e>r?r:e}static thresholdBlock(e,s,r,i,a,o){for(let c=0,x=r*a+s;c<le.BLOCK_SIZE;c++,x+=a)for(let p=0;p<le.BLOCK_SIZE;p++)(e[x+p]&255)<=i&&o.set(s+p,r+c)}static calculateBlackPoints(e,s,r,i,a){const o=a-le.BLOCK_SIZE,c=i-le.BLOCK_SIZE,x=new Array(r);for(let p=0;p<r;p++){x[p]=new Int32Array(s);let R=p<<le.BLOCK_SIZE_POWER;R>o&&(R=o);for(let v=0;v<s;v++){let S=v<<le.BLOCK_SIZE_POWER;S>c&&(S=c);let P=0,H=255,Y=0;for(let he=0,ke=R*i+S;he<le.BLOCK_SIZE;he++,ke+=i){for(let Ae=0;Ae<le.BLOCK_SIZE;Ae++){const ve=e[ke+Ae]&255;P+=ve,ve<H&&(H=ve),ve>Y&&(Y=ve)}if(Y-H>le.MIN_DYNAMIC_RANGE)for(he++,ke+=i;he<le.BLOCK_SIZE;he++,ke+=i)for(let Ae=0;Ae<le.BLOCK_SIZE;Ae++)P+=e[ke+Ae]&255}let se=P>>le.BLOCK_SIZE_POWER*2;if(Y-H<=le.MIN_DYNAMIC_RANGE&&(se=H/2,p>0&&v>0)){const he=(x[p-1][v]+2*x[p][v-1]+x[p-1][v-1])/4;H<he&&(se=he)}x[p][v]=se}}return x}}le.BLOCK_SIZE_POWER=3,le.BLOCK_SIZE=1<<le.BLOCK_SIZE_POWER,le.BLOCK_SIZE_MASK=le.BLOCK_SIZE-1,le.MINIMUM_DIMENSION=le.BLOCK_SIZE*5,le.MIN_DYNAMIC_RANGE=24;class de{constructor(e,s){this.width=e,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,s,r,i){throw new xe("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new xe("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new xe("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let s=new Z;for(let r=0;r<this.height;r++){const i=this.getRow(r,e);for(let a=0;a<this.width;a++){const o=i[a]&255;let c;o<64?c="#":o<128?c="+":o<192?c=".":c=" ",s.append(c)}s.append(`
`)}return s.toString()}}class ye extends de{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,s){const r=this.delegate.getRow(e,s),i=this.getWidth();for(let a=0;a<i;a++)r[a]=255-(r[a]&255);return r}getMatrix(){const e=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(s);for(let i=0;i<s;i++)r[i]=255-(e[i]&255);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(e,s,r,i){return new ye(this.delegate.crop(e,s,r,i))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ye(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ye(this.delegate.rotateCounterClockwise45())}}class z extends de{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=z.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const s=e.getContext("2d").getImageData(0,0,e.width,e.height);return z.toGrayscaleBuffer(s.data,e.width,e.height)}static toGrayscaleBuffer(e,s,r){const i=new Uint8ClampedArray(s*r);for(let a=0,o=0,c=e.length;a<c;a+=4,o++){let x;if(e[a+3]===0)x=255;else{const R=e[a],v=e[a+1],S=e[a+2];x=306*R+601*v+117*S+512>>10}i[o]=x}return i}getRow(e,s){if(e<0||e>=this.getHeight())throw new _("Requested row is outside the image: "+e);const r=this.getWidth(),i=e*r;return s===null?s=this.buffer.slice(i,i+r):(s.length<r&&(s=new Uint8ClampedArray(r)),s.set(this.buffer.slice(i,i+r))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,s,r,i){return super.crop(e,s,r,i),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const s=this.getTempCanvasElement(),r=s.getContext("2d"),i=e*z.DEGREE_TO_RADIANS,a=this.canvas.width,o=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*o),x=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*o);return s.width=c,s.height=x,r.translate(c/2,x/2),r.rotate(i),r.drawImage(this.canvas,a/-2,o/-2),this.buffer=z.makeBufferFromCanvasImageData(s),this}invert(){return new ye(this)}}z.DEGREE_TO_RADIANS=Math.PI/180;class D{constructor(e,s,r){this.deviceId=e,this.label=s,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var G=(globalThis||commonjsGlobal||self||window||void 0)&&(globalThis||commonjsGlobal||self||window||void 0).__awaiter||function(b,e,s,r){function i(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function c(R){try{p(r.next(R))}catch(v){o(v)}}function x(R){try{p(r.throw(R))}catch(v){o(v)}}function p(R){R.done?a(R.value):i(R.value).then(c,x)}p((r=r.apply(b,e||[])).next())})};class Ie{constructor(e,s=500,r){this.reader=e,this.timeBetweenScansMillis=s,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return G(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const r of e){const i=r.kind==="video"?"videoinput":r.kind;if(i!=="videoinput")continue;const a=r.deviceId||r.id,o=r.label||`Video device ${s.length+1}`,c=r.groupId,x={deviceId:a,label:o,kind:i,groupId:c};s.push(x)}return s})}getVideoInputDevices(){return G(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new D(s.deviceId,s.label))})}findDeviceById(e){return G(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(r=>r.deviceId===e):null})}decodeFromInputVideoDevice(e,s){return G(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,s)})}decodeOnceFromVideoDevice(e,s){return G(this,void 0,void 0,function*(){this.reset();let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const i={video:r};return yield this.decodeOnceFromConstraints(i,s)})}decodeOnceFromConstraints(e,s){return G(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(r,s)})}decodeOnceFromStream(e,s){return G(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,s);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(e,s,r){return G(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,s,r)})}decodeFromVideoDevice(e,s,r){return G(this,void 0,void 0,function*(){let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const a={video:i};return yield this.decodeFromConstraints(a,s,r)})}decodeFromConstraints(e,s,r){return G(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(i,s,r)})}decodeFromStream(e,s,r){return G(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,s);return yield this.decodeContinuously(i,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,s){return G(this,void 0,void 0,function*(){const r=this.prepareVideoElement(s);return this.addVideoSource(r,e),this.videoElement=r,this.stream=e,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(e){return new Promise((s,r)=>this.playVideoOnLoad(e,()=>s()))}playVideoOnLoad(e,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",s),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return G(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,s){const r=document.getElementById(e);if(!r)throw new M(`element with id '${e}' not found`);if(r.nodeName.toLowerCase()!==s.toLowerCase())throw new M(`element with id '${e}' must be an ${s} element`);return r}decodeFromImage(e,s){if(!e&&!s)throw new M("either imageElement with a src set or an url must be provided");return s&&!e?this.decodeFromImageUrl(s):this.decodeFromImageElement(e)}decodeFromVideo(e,s){if(!e&&!s)throw new M("Either an element with a src set or an URL must be provided");return s&&!e?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,s,r){if(e===void 0&&s===void 0)throw new M("Either an element with a src set or an URL must be provided");return s&&!e?this.decodeFromVideoUrlContinuously(s,r):this.decodeFromVideoElementContinuously(e,r)}decodeFromImageElement(e){if(!e)throw new M("An image element must be provided.");this.reset();const s=this.prepareImageElement(e);this.imageElement=s;let r;return this.isImageLoaded(s)?r=this.decodeOnce(s,!1,!0):r=this._decodeOnLoadImage(s),r}decodeFromVideoElement(e){const s=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(e,s){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,s)}_decodeFromVideoElementSetup(e){if(!e)throw new M("A video element must be provided.");this.reset();const s=this.prepareVideoElement(e);return this.videoElement=s,s}decodeFromImageUrl(e){if(!e)throw new M("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const r=this._decodeOnLoadImage(s);return s.src=e,r}decodeFromVideoUrl(e){if(!e)throw new M("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),r=this.decodeFromVideoElement(s);return s.src=e,r}decodeFromVideoUrlContinuously(e,s){if(!e)throw new M("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,s);return r.src=e,i}_decodeOnLoadImage(e){return new Promise((s,r)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(s,r),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return G(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,s){return G(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,s)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let s;return typeof e>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof e=="string"&&(s=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(s=e),s}prepareVideoElement(e){let s;return!e&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof e=="string"&&(s=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(s=e),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(e,s=!0,r=!0){this._stopAsyncDecode=!1;const i=(a,o)=>{if(this._stopAsyncDecode){o(new I("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const c=this.decode(e);a(c)}catch(c){const x=s&&c instanceof I,R=(c instanceof W||c instanceof F)&&r;if(x||R)return setTimeout(i,this._timeBetweenDecodingAttempts,a,o);o(c)}};return new Promise((a,o)=>i(a,o))}decodeContinuously(e,s){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const i=this.decode(e);s(i,null),setTimeout(r,this.timeBetweenScansMillis)}catch(i){s(null,i);const a=i instanceof W||i instanceof F,o=i instanceof I;(a||o)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(e){const s=this.createBinaryBitmap(e);return this.decodeBitmap(s)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,s,r){s||(s={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(e,s,r=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const s=this.getCaptureCanvas(e),r=new z(s),i=new le(r);return new J(i)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const r=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=r}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const s=this.createCaptureCanvas(e);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),s.style.width=r+"px",s.style.height=i+"px",s.width=r,s.height=i,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,s){try{e.srcObject=s}catch{e.src=URL.createObjectURL(s)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class ee{constructor(e,s,r=s==null?0:8*s.length,i,a,o=q.currentTimeMillis()){this.text=e,this.rawBytes=s,this.numBits=r,this.resultPoints=i,this.format=a,this.timestamp=o,this.text=e,this.rawBytes=s,r==null?this.numBits=s==null?0:8*s.length:this.numBits=r,this.resultPoints=i,this.format=a,this.resultMetadata=null,o==null?this.timestamp=q.currentTimeMillis():this.timestamp=o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,s)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const s=this.resultPoints;if(s===null)this.resultPoints=e;else if(e!==null&&e.length>0){const r=new Array(s.length+e.length);q.arraycopy(s,0,r,0,s.length),q.arraycopy(e,0,r,s.length,e.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Re;(function(b){b[b.AZTEC=0]="AZTEC",b[b.CODABAR=1]="CODABAR",b[b.CODE_39=2]="CODE_39",b[b.CODE_93=3]="CODE_93",b[b.CODE_128=4]="CODE_128",b[b.DATA_MATRIX=5]="DATA_MATRIX",b[b.EAN_8=6]="EAN_8",b[b.EAN_13=7]="EAN_13",b[b.ITF=8]="ITF",b[b.MAXICODE=9]="MAXICODE",b[b.PDF_417=10]="PDF_417",b[b.QR_CODE=11]="QR_CODE",b[b.RSS_14=12]="RSS_14",b[b.RSS_EXPANDED=13]="RSS_EXPANDED",b[b.UPC_A=14]="UPC_A",b[b.UPC_E=15]="UPC_E",b[b.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Re||(Re={}));var je=Re,Ve;(function(b){b[b.OTHER=0]="OTHER",b[b.ORIENTATION=1]="ORIENTATION",b[b.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",b[b.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",b[b.ISSUE_NUMBER=4]="ISSUE_NUMBER",b[b.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",b[b.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",b[b.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",b[b.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",b[b.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",b[b.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ve||(Ve={}));var Be=Ve;class Fe{constructor(e,s,r,i,a=-1,o=-1){this.rawBytes=e,this.text=s,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=o,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ke{exp(e){return this.expTable[e]}log(e){if(e===0)throw new _;return this.logTable[e]}static addOrSubtract(e,s){return e^s}}class ct{constructor(e,s){if(s.length===0)throw new _;this.field=e;const r=s.length;if(r>1&&s[0]===0){let i=1;for(;i<r&&s[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),q.arraycopy(s,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const s=this.coefficients;let r;if(e===1){r=0;for(let o=0,c=s.length;o!==c;o++){const x=s[o];r=Ke.addOrSubtract(r,x)}return r}r=s[0];const i=s.length,a=this.field;for(let o=1;o<i;o++)r=Ke.addOrSubtract(a.multiply(e,r),s[o]);return r}addOrSubtract(e){if(!this.field.equals(e.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let s=this.coefficients,r=e.coefficients;if(s.length>r.length){const o=s;s=r,r=o}let i=new Int32Array(r.length);const a=r.length-s.length;q.arraycopy(r,0,i,0,a);for(let o=a;o<r.length;o++)i[o]=Ke.addOrSubtract(s[o-a],r[o]);return new ct(this.field,i)}multiply(e){if(!this.field.equals(e.field))throw new _("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const s=this.coefficients,r=s.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1),c=this.field;for(let x=0;x<r;x++){const p=s[x];for(let R=0;R<a;R++)o[x+R]=Ke.addOrSubtract(o[x+R],c.multiply(p,i[R]))}return new ct(c,o)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const s=this.coefficients.length,r=this.field,i=new Int32Array(s),a=this.coefficients;for(let o=0;o<s;o++)i[o]=r.multiply(a[o],e);return new ct(r,i)}multiplyByMonomial(e,s){if(e<0)throw new _;if(s===0)return this.field.getZero();const r=this.coefficients,i=r.length,a=new Int32Array(i+e),o=this.field;for(let c=0;c<i;c++)a[c]=o.multiply(r[c],s);return new ct(o,a)}divide(e){if(!this.field.equals(e.field))throw new _("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new _("Divide by 0");const s=this.field;let r=s.getZero(),i=this;const a=e.getCoefficient(e.getDegree()),o=s.inverse(a);for(;i.getDegree()>=e.getDegree()&&!i.isZero();){const c=i.getDegree()-e.getDegree(),x=s.multiply(i.getCoefficient(i.getDegree()),o),p=e.multiplyByMonomial(c,x),R=s.buildMonomial(c,x);r=r.addOrSubtract(R),i=i.addOrSubtract(p)}return[r,i]}toString(){let e="";for(let s=this.getDegree();s>=0;s--){let r=this.getCoefficient(s);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),s===0||r!==1){const i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}s!==0&&(s===1?e+="x":(e+="x^",e+=s))}}return e}}class Ss extends w{}Ss.kind="ArithmeticException";class rt extends Ke{constructor(e,s,r){super(),this.primitive=e,this.size=s,this.generatorBase=r;const i=new Int32Array(s);let a=1;for(let c=0;c<s;c++)i[c]=a,a*=2,a>=s&&(a^=e,a&=s-1);this.expTable=i;const o=new Int32Array(s);for(let c=0;c<s-1;c++)o[i[c]]=c;this.logTable=o,this.zero=new ct(this,Int32Array.from([0])),this.one=new ct(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,s){if(e<0)throw new _;if(s===0)return this.zero;const r=new Int32Array(e+1);return r[0]=s,new ct(this,r)}inverse(e){if(e===0)throw new Ss;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,s){return e===0||s===0?0:this.expTable[(this.logTable[e]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+te.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}rt.AZTEC_DATA_12=new rt(4201,4096,1),rt.AZTEC_DATA_10=new rt(1033,1024,1),rt.AZTEC_DATA_6=new rt(67,64,1),rt.AZTEC_PARAM=new rt(19,16,1),rt.QR_CODE_FIELD_256=new rt(285,256,0),rt.DATA_MATRIX_FIELD_256=new rt(301,256,1),rt.AZTEC_DATA_8=rt.DATA_MATRIX_FIELD_256,rt.MAXICODE_FIELD_64=rt.AZTEC_DATA_6;class ks extends w{}ks.kind="ReedSolomonException";class as extends w{}as.kind="IllegalStateException";class xs{constructor(e){this.field=e}decode(e,s){const r=this.field,i=new ct(r,e),a=new Int32Array(s);let o=!0;for(let P=0;P<s;P++){const H=i.evaluateAt(r.exp(P+r.getGeneratorBase()));a[a.length-1-P]=H,H!==0&&(o=!1)}if(o)return;const c=new ct(r,a),x=this.runEuclideanAlgorithm(r.buildMonomial(s,1),c,s),p=x[0],R=x[1],v=this.findErrorLocations(p),S=this.findErrorMagnitudes(R,v);for(let P=0;P<v.length;P++){const H=e.length-1-r.log(v[P]);if(H<0)throw new ks("Bad error location");e[H]=rt.addOrSubtract(e[H],S[P])}}runEuclideanAlgorithm(e,s,r){if(e.getDegree()<s.getDegree()){const P=e;e=s,s=P}const i=this.field;let a=e,o=s,c=i.getZero(),x=i.getOne();for(;o.getDegree()>=(r/2|0);){let P=a,H=c;if(a=o,c=x,a.isZero())throw new ks("r_{i-1} was zero");o=P;let Y=i.getZero();const se=a.getCoefficient(a.getDegree()),he=i.inverse(se);for(;o.getDegree()>=a.getDegree()&&!o.isZero();){const ke=o.getDegree()-a.getDegree(),Ae=i.multiply(o.getCoefficient(o.getDegree()),he);Y=Y.addOrSubtract(i.buildMonomial(ke,Ae)),o=o.addOrSubtract(a.multiplyByMonomial(ke,Ae))}if(x=Y.multiply(c).addOrSubtract(H),o.getDegree()>=a.getDegree())throw new as("Division algorithm failed to reduce polynomial?")}const p=x.getCoefficient(0);if(p===0)throw new ks("sigmaTilde(0) was zero");const R=i.inverse(p),v=x.multiplyScalar(R),S=o.multiplyScalar(R);return[v,S]}findErrorLocations(e){const s=e.getDegree();if(s===1)return Int32Array.from([e.getCoefficient(1)]);const r=new Int32Array(s);let i=0;const a=this.field;for(let o=1;o<a.getSize()&&i<s;o++)e.evaluateAt(o)===0&&(r[i]=a.inverse(o),i++);if(i!==s)throw new ks("Error locator degree does not match number of roots");return r}findErrorMagnitudes(e,s){const r=s.length,i=new Int32Array(r),a=this.field;for(let o=0;o<r;o++){const c=a.inverse(s[o]);let x=1;for(let p=0;p<r;p++)if(o!==p){const R=a.multiply(s[p],c),v=(R&1)===0?R|1:R&-2;x=a.multiply(x,v)}i[o]=a.multiply(e.evaluateAt(c),a.inverse(x)),a.getGeneratorBase()!==0&&(i[o]=a.multiply(i[o],c))}return i}}var _t;(function(b){b[b.UPPER=0]="UPPER",b[b.LOWER=1]="LOWER",b[b.MIXED=2]="MIXED",b[b.DIGIT=3]="DIGIT",b[b.PUNCT=4]="PUNCT",b[b.BINARY=5]="BINARY"})(_t||(_t={}));class gt{decode(e){this.ddata=e;let s=e.getBits(),r=this.extractBits(s),i=this.correctBits(r),a=gt.convertBoolArrayToByteArray(i),o=gt.getEncodedData(i),c=new Fe(a,o,null,null);return c.setNumBits(i.length),c}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let s=e.length,r=_t.UPPER,i=_t.UPPER,a="",o=0;for(;o<s;)if(i===_t.BINARY){if(s-o<5)break;let c=gt.readCode(e,o,5);if(o+=5,c===0){if(s-o<11)break;c=gt.readCode(e,o,11)+31,o+=11}for(let x=0;x<c;x++){if(s-o<8){o=s;break}const p=gt.readCode(e,o,8);a+=B.castAsNonUtf8Char(p),o+=8}i=r}else{let c=i===_t.DIGIT?4:5;if(s-o<c)break;let x=gt.readCode(e,o,c);o+=c;let p=gt.getCharacter(i,x);p.startsWith("CTRL_")?(r=i,i=gt.getTable(p.charAt(5)),p.charAt(6)==="L"&&(r=i)):(a+=p,i=r)}return a}static getTable(e){switch(e){case"L":return _t.LOWER;case"P":return _t.PUNCT;case"M":return _t.MIXED;case"D":return _t.DIGIT;case"B":return _t.BINARY;default:return _t.UPPER}}static getCharacter(e,s){switch(e){case _t.UPPER:return gt.UPPER_TABLE[s];case _t.LOWER:return gt.LOWER_TABLE[s];case _t.MIXED:return gt.MIXED_TABLE[s];case _t.PUNCT:return gt.PUNCT_TABLE[s];case _t.DIGIT:return gt.DIGIT_TABLE[s];default:throw new as("Bad table")}}correctBits(e){let s,r;this.ddata.getNbLayers()<=2?(r=6,s=rt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,s=rt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,s=rt.AZTEC_DATA_10):(r=12,s=rt.AZTEC_DATA_12);let i=this.ddata.getNbDatablocks(),a=e.length/r;if(a<i)throw new F;let o=e.length%r,c=new Int32Array(a);for(let S=0;S<a;S++,o+=r)c[S]=gt.readCode(e,o,r);try{new xs(s).decode(c,a-i)}catch(S){throw new F(S)}let x=(1<<r)-1,p=0;for(let S=0;S<i;S++){let P=c[S];if(P===0||P===x)throw new F;(P===1||P===x-1)&&p++}let R=new Array(i*r-p),v=0;for(let S=0;S<i;S++){let P=c[S];if(P===1||P===x-1)R.fill(P>1,v,v+r-1),v+=r-1;else for(let H=r-1;H>=0;--H)R[v++]=(P&1<<H)!==0}return R}extractBits(e){let s=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(s?11:14)+r*4,a=new Int32Array(i),o=new Array(this.totalBitsInLayer(r,s));if(s)for(let c=0;c<a.length;c++)a[c]=c;else{let c=i+1+2*te.truncDivision(te.truncDivision(i,2)-1,15),x=i/2,p=te.truncDivision(c,2);for(let R=0;R<x;R++){let v=R+te.truncDivision(R,15);a[x-R-1]=p-v-1,a[x+R]=p+v+1}}for(let c=0,x=0;c<r;c++){let p=(r-c)*4+(s?9:12),R=c*2,v=i-1-R;for(let S=0;S<p;S++){let P=S*2;for(let H=0;H<2;H++)o[x+P+H]=e.get(a[R+H],a[R+S]),o[x+2*p+P+H]=e.get(a[R+S],a[v-H]),o[x+4*p+P+H]=e.get(a[v-H],a[v-S]),o[x+6*p+P+H]=e.get(a[v-S],a[R+H])}x+=p*8}return o}static readCode(e,s,r){let i=0;for(let a=s;a<s+r;a++)i<<=1,e[a]&&(i|=1);return i}static readByte(e,s){let r=e.length-s;return r>=8?gt.readCode(e,s,8):gt.readCode(e,s,r)<<8-r}static convertBoolArrayToByteArray(e){let s=new Uint8Array((e.length+7)/8);for(let r=0;r<s.length;r++)s[r]=gt.readByte(e,8*r);return s}totalBitsInLayer(e,s){return((s?88:112)+16*e)*e}}gt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],gt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],gt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],gt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],gt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class nt{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,s,r,i){const a=e-r,o=s-i;return Math.sqrt(a*a+o*o)}static sum(e){let s=0;for(let r=0,i=e.length;r!==i;r++){const a=e[r];s+=a}return s}}class Ks{static floatToIntBits(e){return e}}Ks.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Pe{constructor(e,s){this.x=e,this.y=s}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Pe){const s=e;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Ks.floatToIntBits(this.x)+Ks.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const s=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]);let a,o,c;if(r>=s&&r>=i?(o=e[0],a=e[1],c=e[2]):i>=r&&i>=s?(o=e[1],a=e[0],c=e[2]):(o=e[2],a=e[0],c=e[1]),this.crossProductZ(a,o,c)<0){const x=a;a=c,c=x}e[0]=a,e[1]=o,e[2]=c}static distance(e,s){return nt.distance(e.x,e.y,s.x,s.y)}static crossProductZ(e,s,r){const i=s.x,a=s.y;return(r.x-i)*(e.y-a)-(r.y-a)*(e.x-i)}}class cr{constructor(e,s){this.bits=e,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class hn extends cr{constructor(e,s,r,i,a){super(e,s),this.compact=r,this.nbDatablocks=i,this.nbLayers=a}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class _s{constructor(e,s,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),s==null&&(s=_s.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);const a=s/2|0;if(this.leftInit=r-a,this.rightInit=r+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new I}detect(){let e=this.leftInit,s=this.rightInit,r=this.upInit,i=this.downInit,a=!1,o=!0,c=!1,x=!1,p=!1,R=!1,v=!1;const S=this.width,P=this.height;for(;o;){o=!1;let H=!0;for(;(H||!x)&&s<S;)H=this.containsBlackPoint(r,i,s,!1),H?(s++,o=!0,x=!0):x||s++;if(s>=S){a=!0;break}let Y=!0;for(;(Y||!p)&&i<P;)Y=this.containsBlackPoint(e,s,i,!0),Y?(i++,o=!0,p=!0):p||i++;if(i>=P){a=!0;break}let se=!0;for(;(se||!R)&&e>=0;)se=this.containsBlackPoint(r,i,e,!1),se?(e--,o=!0,R=!0):R||e--;if(e<0){a=!0;break}let he=!0;for(;(he||!v)&&r>=0;)he=this.containsBlackPoint(e,s,r,!0),he?(r--,o=!0,v=!0):v||r--;if(r<0){a=!0;break}o&&(c=!0)}if(!a&&c){const H=s-e;let Y=null;for(let Ae=1;Y===null&&Ae<H;Ae++)Y=this.getBlackPointOnSegment(e,i-Ae,e+Ae,i);if(Y==null)throw new I;let se=null;for(let Ae=1;se===null&&Ae<H;Ae++)se=this.getBlackPointOnSegment(e,r+Ae,e+Ae,r);if(se==null)throw new I;let he=null;for(let Ae=1;he===null&&Ae<H;Ae++)he=this.getBlackPointOnSegment(s,r+Ae,s-Ae,r);if(he==null)throw new I;let ke=null;for(let Ae=1;ke===null&&Ae<H;Ae++)ke=this.getBlackPointOnSegment(s,i-Ae,s-Ae,i);if(ke==null)throw new I;return this.centerEdges(ke,Y,he,se)}else throw new I}getBlackPointOnSegment(e,s,r,i){const a=nt.round(nt.distance(e,s,r,i)),o=(r-e)/a,c=(i-s)/a,x=this.image;for(let p=0;p<a;p++){const R=nt.round(e+p*o),v=nt.round(s+p*c);if(x.get(R,v))return new Pe(R,v)}return null}centerEdges(e,s,r,i){const a=e.getX(),o=e.getY(),c=s.getX(),x=s.getY(),p=r.getX(),R=r.getY(),v=i.getX(),S=i.getY(),P=_s.CORR;return a<this.width/2?[new Pe(v-P,S+P),new Pe(c+P,x+P),new Pe(p-P,R-P),new Pe(a+P,o-P)]:[new Pe(v+P,S+P),new Pe(c+P,x-P),new Pe(p-P,R+P),new Pe(a-P,o-P)]}containsBlackPoint(e,s,r,i){const a=this.image;if(i){for(let o=e;o<=s;o++)if(a.get(o,r))return!0}else for(let o=e;o<=s;o++)if(a.get(r,o))return!0;return!1}}_s.INIT_SIZE=10,_s.CORR=1;class Wr{static checkAndNudgePoints(e,s){const r=e.getWidth(),i=e.getHeight();let a=!0;for(let o=0;o<s.length&&a;o+=2){const c=Math.floor(s[o]),x=Math.floor(s[o+1]);if(c<-1||c>r||x<-1||x>i)throw new I;a=!1,c===-1?(s[o]=0,a=!0):c===r&&(s[o]=r-1,a=!0),x===-1?(s[o+1]=0,a=!0):x===i&&(s[o+1]=i-1,a=!0)}a=!0;for(let o=s.length-2;o>=0&&a;o-=2){const c=Math.floor(s[o]),x=Math.floor(s[o+1]);if(c<-1||c>r||x<-1||x>i)throw new I;a=!1,c===-1?(s[o]=0,a=!0):c===r&&(s[o]=r-1,a=!0),x===-1?(s[o+1]=0,a=!0):x===i&&(s[o+1]=i-1,a=!0)}}}class Oe{constructor(e,s,r,i,a,o,c,x,p){this.a11=e,this.a21=s,this.a31=r,this.a12=i,this.a22=a,this.a32=o,this.a13=c,this.a23=x,this.a33=p}static quadrilateralToQuadrilateral(e,s,r,i,a,o,c,x,p,R,v,S,P,H,Y,se){const he=Oe.quadrilateralToSquare(e,s,r,i,a,o,c,x);return Oe.squareToQuadrilateral(p,R,v,S,P,H,Y,se).times(he)}transformPoints(e){const s=e.length,r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,x=this.a23,p=this.a31,R=this.a32,v=this.a33;for(let S=0;S<s;S+=2){const P=e[S],H=e[S+1],Y=a*P+x*H+v;e[S]=(r*P+o*H+p)/Y,e[S+1]=(i*P+c*H+R)/Y}}transformPointsWithValues(e,s){const r=this.a11,i=this.a12,a=this.a13,o=this.a21,c=this.a22,x=this.a23,p=this.a31,R=this.a32,v=this.a33,S=e.length;for(let P=0;P<S;P++){const H=e[P],Y=s[P],se=a*H+x*Y+v;e[P]=(r*H+o*Y+p)/se,s[P]=(i*H+c*Y+R)/se}}static squareToQuadrilateral(e,s,r,i,a,o,c,x){const p=e-r+a-c,R=s-i+o-x;if(p===0&&R===0)return new Oe(r-e,a-r,e,i-s,o-i,s,0,0,1);{const v=r-a,S=c-a,P=i-o,H=x-o,Y=v*H-S*P,se=(p*H-S*R)/Y,he=(v*R-p*P)/Y;return new Oe(r-e+se*r,c-e+he*c,e,i-s+se*i,x-s+he*x,s,se,he,1)}}static quadrilateralToSquare(e,s,r,i,a,o,c,x){return Oe.squareToQuadrilateral(e,s,r,i,a,o,c,x).buildAdjoint()}buildAdjoint(){return new Oe(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new Oe(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class at extends Wr{sampleGrid(e,s,r,i,a,o,c,x,p,R,v,S,P,H,Y,se,he,ke,Ae){const ve=Oe.quadrilateralToQuadrilateral(i,a,o,c,x,p,R,v,S,P,H,Y,se,he,ke,Ae);return this.sampleGridWithTransform(e,s,r,ve)}sampleGridWithTransform(e,s,r,i){if(s<=0||r<=0)throw new I;const a=new ge(s,r),o=new Float32Array(2*s);for(let c=0;c<r;c++){const x=o.length,p=c+.5;for(let R=0;R<x;R+=2)o[R]=R/2+.5,o[R+1]=p;i.transformPoints(o),Wr.checkAndNudgePoints(e,o);try{for(let R=0;R<x;R+=2)e.get(Math.floor(o[R]),Math.floor(o[R+1]))&&a.set(R/2,c)}catch{throw new I}}return a}}class mt{static setGridSampler(e){mt.gridSampler=e}static getInstance(){return mt.gridSampler}}mt.gridSampler=new at;class jt{constructor(e,s){this.x=e,this.y=s}toResultPoint(){return new Pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class qt{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let s=this.getMatrixCenter(),r=this.getBullsEyeCorners(s);if(e){let o=r[0];r[0]=r[2],r[2]=o}this.extractParameters(r);let i=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),a=this.getMatrixCornerPoints(r);return new hn(i,a,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new I;let s=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],s),this.sampleLine(e[1],e[2],s),this.sampleLine(e[2],e[3],s),this.sampleLine(e[3],e[0],s)]);this.shift=this.getRotation(r,s);let i=0;for(let o=0;o<4;o++){let c=r[(this.shift+o)%4];this.compact?(i<<=7,i+=c>>1&127):(i<<=10,i+=(c>>2&992)+(c>>1&31))}let a=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(a>>6)+1,this.nbDataBlocks=(a&63)+1):(this.nbLayers=(a>>11)+1,this.nbDataBlocks=(a&2047)+1)}getRotation(e,s){let r=0;e.forEach((i,a,o)=>{let c=(i>>s-2<<1)+(i&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(let i=0;i<4;i++)if(te.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new I}getCorrectedParameterData(e,s){let r,i;s?(r=7,i=2):(r=10,i=4);let a=r-i,o=new Int32Array(r);for(let x=r-1;x>=0;--x)o[x]=e&15,e>>=4;try{new xs(rt.AZTEC_PARAM).decode(o,a)}catch{throw new I}let c=0;for(let x=0;x<i;x++)c=(c<<4)+o[x];return c}getBullsEyeCorners(e){let s=e,r=e,i=e,a=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let v=this.getFirstDifferent(s,o,1,-1),S=this.getFirstDifferent(r,o,1,1),P=this.getFirstDifferent(i,o,-1,1),H=this.getFirstDifferent(a,o,-1,-1);if(this.nbCenterLayers>2){let Y=this.distancePoint(H,v)*this.nbCenterLayers/(this.distancePoint(a,s)*(this.nbCenterLayers+2));if(Y<.75||Y>1.25||!this.isWhiteOrBlackRectangle(v,S,P,H))break}s=v,r=S,i=P,a=H,o=!o}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new I;this.compact=this.nbCenterLayers===5;let c=new Pe(s.getX()+.5,s.getY()-.5),x=new Pe(r.getX()+.5,r.getY()+.5),p=new Pe(i.getX()-.5,i.getY()+.5),R=new Pe(a.getX()-.5,a.getY()-.5);return this.expandSquare([c,x,p,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,s,r,i;try{let c=new _s(this.image).detect();e=c[0],s=c[1],r=c[2],i=c[3]}catch{let x=this.image.getWidth()/2,p=this.image.getHeight()/2;e=this.getFirstDifferent(new jt(x+7,p-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new jt(x+7,p+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new jt(x-7,p+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new jt(x-7,p-7),!1,-1,-1).toResultPoint()}let a=nt.round((e.getX()+i.getX()+s.getX()+r.getX())/4),o=nt.round((e.getY()+i.getY()+s.getY()+r.getY())/4);try{let c=new _s(this.image,15,a,o).detect();e=c[0],s=c[1],r=c[2],i=c[3]}catch{e=this.getFirstDifferent(new jt(a+7,o-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new jt(a+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new jt(a-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new jt(a-7,o-7),!1,-1,-1).toResultPoint()}return a=nt.round((e.getX()+i.getX()+s.getX()+r.getX())/4),o=nt.round((e.getY()+i.getY()+s.getY()+r.getY())/4),new jt(a,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,s,r,i,a){let o=mt.getInstance(),c=this.getDimension(),x=c/2-this.nbCenterLayers,p=c/2+this.nbCenterLayers;return o.sampleGrid(e,c,c,x,x,p,x,p,p,x,p,s.getX(),s.getY(),r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY())}sampleLine(e,s,r){let i=0,a=this.distanceResultPoint(e,s),o=a/r,c=e.getX(),x=e.getY(),p=o*(s.getX()-e.getX())/a,R=o*(s.getY()-e.getY())/a;for(let v=0;v<r;v++)this.image.get(nt.round(c+v*p),nt.round(x+v*R))&&(i|=1<<r-v-1);return i}isWhiteOrBlackRectangle(e,s,r,i){let a=3;e=new jt(e.getX()-a,e.getY()+a),s=new jt(s.getX()-a,s.getY()-a),r=new jt(r.getX()+a,r.getY()-a),i=new jt(i.getX()+a,i.getY()+a);let o=this.getColor(i,e);if(o===0)return!1;let c=this.getColor(e,s);return c!==o||(c=this.getColor(s,r),c!==o)?!1:(c=this.getColor(r,i),c===o)}getColor(e,s){let r=this.distancePoint(e,s),i=(s.getX()-e.getX())/r,a=(s.getY()-e.getY())/r,o=0,c=e.getX(),x=e.getY(),p=this.image.get(e.getX(),e.getY()),R=Math.ceil(r);for(let S=0;S<R;S++)c+=i,x+=a,this.image.get(nt.round(c),nt.round(x))!==p&&o++;let v=o/r;return v>.1&&v<.9?0:v<=.1===p?1:-1}getFirstDifferent(e,s,r,i){let a=e.getX()+r,o=e.getY()+i;for(;this.isValid(a,o)&&this.image.get(a,o)===s;)a+=r,o+=i;for(a-=r,o-=i;this.isValid(a,o)&&this.image.get(a,o)===s;)a+=r;for(a-=r;this.isValid(a,o)&&this.image.get(a,o)===s;)o+=i;return o-=i,new jt(a,o)}expandSquare(e,s,r){let i=r/(2*s),a=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),c=(e[0].getX()+e[2].getX())/2,x=(e[0].getY()+e[2].getY())/2,p=new Pe(c+i*a,x+i*o),R=new Pe(c-i*a,x-i*o);a=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),c=(e[1].getX()+e[3].getX())/2,x=(e[1].getY()+e[3].getY())/2;let v=new Pe(c+i*a,x+i*o),S=new Pe(c-i*a,x-i*o);return[p,v,R,S]}isValid(e,s){return e>=0&&e<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(e){let s=nt.round(e.getX()),r=nt.round(e.getY());return this.isValid(s,r)}distancePoint(e,s){return nt.distance(e.getX(),e.getY(),s.getX(),s.getY())}distanceResultPoint(e,s){return nt.distance(e.getX(),e.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(te.truncDivision(this.nbLayers-4,8)+1)+15}}class ut{decode(e,s=null){let r=null,i=new qt(e.getBlackMatrix()),a=null,o=null;try{let R=i.detectMirror(!1);a=R.getPoints(),this.reportFoundResultPoints(s,a),o=new gt().decode(R)}catch(R){r=R}if(o==null)try{let R=i.detectMirror(!0);a=R.getPoints(),this.reportFoundResultPoints(s,a),o=new gt().decode(R)}catch(R){throw r??R}let c=new ee(o.getText(),o.getRawBytes(),o.getNumBits(),a,je.AZTEC,q.currentTimeMillis()),x=o.getByteSegments();x!=null&&c.putMetadata(Be.BYTE_SEGMENTS,x);let p=o.getECLevel();return p!=null&&c.putMetadata(Be.ERROR_CORRECTION_LEVEL,p),c}reportFoundResultPoints(e,s){if(e!=null){let r=e.get(re.NEED_RESULT_POINT_CALLBACK);r!=null&&s.forEach((i,a,o)=>{r.foundPossibleResultPoint(i)})}}reset(){}}class Gt extends Ie{constructor(e=500){super(new ut,e)}}class Bt{decode(e,s){try{return this.doDecode(e,s)}catch{if(s&&s.get(re.TRY_HARDER)===!0&&e.isRotateSupported()){const a=e.rotateCounterClockwise(),o=this.doDecode(a,s),c=o.getResultMetadata();let x=270;c!==null&&c.get(Be.ORIENTATION)===!0&&(x=x+c.get(Be.ORIENTATION)%360),o.putMetadata(Be.ORIENTATION,x);const p=o.getResultPoints();if(p!==null){const R=a.getHeight();for(let v=0;v<p.length;v++)p[v]=new Pe(R-p[v].getY()-1,p[v].getX())}return o}else throw new I}}reset(){}doDecode(e,s){const r=e.getWidth(),i=e.getHeight();let a=new K(r);const o=s&&s.get(re.TRY_HARDER)===!0,c=Math.max(1,i>>(o?8:5));let x;o?x=i:x=15;const p=Math.trunc(i/2);for(let R=0;R<x;R++){const v=Math.trunc((R+1)/2),S=(R&1)===0,P=p+c*(S?v:-v);if(P<0||P>=i)break;try{a=e.getBlackRow(P,a)}catch{continue}for(let H=0;H<2;H++){if(H===1&&(a.reverse(),s&&s.get(re.NEED_RESULT_POINT_CALLBACK)===!0)){const Y=new Map;s.forEach((se,he)=>Y.set(he,se)),Y.delete(re.NEED_RESULT_POINT_CALLBACK),s=Y}try{const Y=this.decodeRow(P,a,s);if(H===1){Y.putMetadata(Be.ORIENTATION,180);const se=Y.getResultPoints();se!==null&&(se[0]=new Pe(r-se[0].getX()-1,se[0].getY()),se[1]=new Pe(r-se[1].getX()-1,se[1].getY()))}return Y}catch{}}}throw new I}static recordPattern(e,s,r){const i=r.length;for(let p=0;p<i;p++)r[p]=0;const a=e.getSize();if(s>=a)throw new I;let o=!e.get(s),c=0,x=s;for(;x<a;){if(e.get(x)!==o)r[c]++;else{if(++c===i)break;r[c]=1,o=!o}x++}if(!(c===i||c===i-1&&x===a))throw new I}static recordPatternInReverse(e,s,r){let i=r.length,a=e.get(s);for(;s>0&&i>=0;)e.get(--s)!==a&&(i--,a=!a);if(i>=0)throw new I;Bt.recordPattern(e,s+1,r)}static patternMatchVariance(e,s,r){const i=e.length;let a=0,o=0;for(let p=0;p<i;p++)a+=e[p],o+=s[p];if(a<o)return Number.POSITIVE_INFINITY;const c=a/o;r*=c;let x=0;for(let p=0;p<i;p++){const R=e[p],v=s[p]*c,S=R>v?R-v:v-R;if(S>r)return Number.POSITIVE_INFINITY;x+=S}return x/a}}class _e extends Bt{static findStartPattern(e){const s=e.getSize(),r=e.getNextSet(0);let i=0,a=Int32Array.from([0,0,0,0,0,0]),o=r,c=!1;const x=6;for(let p=r;p<s;p++)if(e.get(p)!==c)a[i]++;else{if(i===x-1){let R=_e.MAX_AVG_VARIANCE,v=-1;for(let S=_e.CODE_START_A;S<=_e.CODE_START_C;S++){const P=Bt.patternMatchVariance(a,_e.CODE_PATTERNS[S],_e.MAX_INDIVIDUAL_VARIANCE);P<R&&(R=P,v=S)}if(v>=0&&e.isRange(Math.max(0,o-(p-o)/2),o,!1))return Int32Array.from([o,p,v]);o+=a[0]+a[1],a=a.slice(2,a.length-1),a[i-1]=0,a[i]=0,i--}else i++;a[i]=1,c=!c}throw new I}static decodeCode(e,s,r){Bt.recordPattern(e,r,s);let i=_e.MAX_AVG_VARIANCE,a=-1;for(let o=0;o<_e.CODE_PATTERNS.length;o++){const c=_e.CODE_PATTERNS[o],x=this.patternMatchVariance(s,c,_e.MAX_INDIVIDUAL_VARIANCE);x<i&&(i=x,a=o)}if(a>=0)return a;throw new I}decodeRow(e,s,r){const i=r&&r.get(re.ASSUME_GS1)===!0,a=_e.findStartPattern(s),o=a[2];let c=0;const x=new Uint8Array(20);x[c++]=o;let p;switch(o){case _e.CODE_START_A:p=_e.CODE_CODE_A;break;case _e.CODE_START_B:p=_e.CODE_CODE_B;break;case _e.CODE_START_C:p=_e.CODE_CODE_C;break;default:throw new F}let R=!1,v=!1,S="",P=a[0],H=a[1];const Y=Int32Array.from([0,0,0,0,0,0]);let se=0,he=0,ke=o,Ae=0,ve=!0,it=!1,Je=!1;for(;!R;){const mr=v;switch(v=!1,se=he,he=_e.decodeCode(s,Y,H),x[c++]=he,he!==_e.CODE_STOP&&(ve=!0),he!==_e.CODE_STOP&&(Ae++,ke+=Ae*he),P=H,H+=Y.reduce(($r,Mi)=>$r+Mi,0),he){case _e.CODE_START_A:case _e.CODE_START_B:case _e.CODE_START_C:throw new F}switch(p){case _e.CODE_CODE_A:if(he<64)Je===it?S+=String.fromCharCode(32+he):S+=String.fromCharCode(32+he+128),Je=!1;else if(he<96)Je===it?S+=String.fromCharCode(he-64):S+=String.fromCharCode(he+64),Je=!1;else switch(he!==_e.CODE_STOP&&(ve=!1),he){case _e.CODE_FNC_1:i&&(S.length===0?S+="]C1":S+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_A:!it&&Je?(it=!0,Je=!1):it&&Je?(it=!1,Je=!1):Je=!0;break;case _e.CODE_SHIFT:v=!0,p=_e.CODE_CODE_B;break;case _e.CODE_CODE_B:p=_e.CODE_CODE_B;break;case _e.CODE_CODE_C:p=_e.CODE_CODE_C;break;case _e.CODE_STOP:R=!0;break}break;case _e.CODE_CODE_B:if(he<96)Je===it?S+=String.fromCharCode(32+he):S+=String.fromCharCode(32+he+128),Je=!1;else switch(he!==_e.CODE_STOP&&(ve=!1),he){case _e.CODE_FNC_1:i&&(S.length===0?S+="]C1":S+="");break;case _e.CODE_FNC_2:case _e.CODE_FNC_3:break;case _e.CODE_FNC_4_B:!it&&Je?(it=!0,Je=!1):it&&Je?(it=!1,Je=!1):Je=!0;break;case _e.CODE_SHIFT:v=!0,p=_e.CODE_CODE_A;break;case _e.CODE_CODE_A:p=_e.CODE_CODE_A;break;case _e.CODE_CODE_C:p=_e.CODE_CODE_C;break;case _e.CODE_STOP:R=!0;break}break;case _e.CODE_CODE_C:if(he<100)he<10&&(S+="0"),S+=he;else switch(he!==_e.CODE_STOP&&(ve=!1),he){case _e.CODE_FNC_1:i&&(S.length===0?S+="]C1":S+="");break;case _e.CODE_CODE_A:p=_e.CODE_CODE_A;break;case _e.CODE_CODE_B:p=_e.CODE_CODE_B;break;case _e.CODE_STOP:R=!0;break}break}mr&&(p=p===_e.CODE_CODE_A?_e.CODE_CODE_B:_e.CODE_CODE_A)}const Rs=H-P;if(H=s.getNextUnset(H),!s.isRange(H,Math.min(s.getSize(),H+(H-P)/2),!1))throw new I;if(ke-=Ae*se,ke%103!==se)throw new W;const Ys=S.length;if(Ys===0)throw new I;Ys>0&&ve&&(p===_e.CODE_CODE_C?S=S.substring(0,Ys-2):S=S.substring(0,Ys-1));const Zt=(a[1]+a[0])/2,Et=P+Rs/2,Lt=x.length,fs=new Uint8Array(Lt);for(let mr=0;mr<Lt;mr++)fs[mr]=x[mr];const _r=[new Pe(Zt,e),new Pe(Et,e)];return new ee(S,fs,0,_r,je.CODE_128,new Date().getTime())}}_e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],_e.MAX_AVG_VARIANCE=.25,_e.MAX_INDIVIDUAL_VARIANCE=.7,_e.CODE_SHIFT=98,_e.CODE_CODE_C=99,_e.CODE_CODE_B=100,_e.CODE_CODE_A=101,_e.CODE_FNC_1=102,_e.CODE_FNC_2=97,_e.CODE_FNC_3=96,_e.CODE_FNC_4_A=101,_e.CODE_FNC_4_B=100,_e.CODE_START_A=103,_e.CODE_START_B=104,_e.CODE_START_C=105,_e.CODE_STOP=106;class Vt extends Bt{constructor(e=!1,s=!1){super(),this.usingCheckDigit=e,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,s,r){let i=this.counters;i.fill(0),this.decodeRowResult="";let a=Vt.findAsteriskPattern(s,i),o=s.getNextSet(a[1]),c=s.getSize(),x,p;do{Vt.recordPattern(s,o,i);let Y=Vt.toNarrowWidePattern(i);if(Y<0)throw new I;x=Vt.patternToChar(Y),this.decodeRowResult+=x,p=o;for(let se of i)o+=se;o=s.getNextSet(o)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let Y of i)R+=Y;let v=o-p-R;if(o!==c&&v*2<R)throw new I;if(this.usingCheckDigit){let Y=this.decodeRowResult.length-1,se=0;for(let he=0;he<Y;he++)se+=Vt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(he));if(this.decodeRowResult.charAt(Y)!==Vt.ALPHABET_STRING.charAt(se%43))throw new W;this.decodeRowResult=this.decodeRowResult.substring(0,Y)}if(this.decodeRowResult.length===0)throw new I;let S;this.extendedMode?S=Vt.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let P=(a[1]+a[0])/2,H=p+R/2;return new ee(S,null,0,[new Pe(P,e),new Pe(H,e)],je.CODE_39,new Date().getTime())}static findAsteriskPattern(e,s){let r=e.getSize(),i=e.getNextSet(0),a=0,o=i,c=!1,x=s.length;for(let p=i;p<r;p++)if(e.get(p)!==c)s[a]++;else{if(a===x-1){if(this.toNarrowWidePattern(s)===Vt.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((p-o)/2)),o,!1))return[o,p];o+=s[0]+s[1],s.copyWithin(0,2,2+a-1),s[a-1]=0,s[a]=0,a--}else a++;s[a]=1,c=!c}throw new I}static toNarrowWidePattern(e){let s=e.length,r=0,i;do{let a=2147483647;for(let x of e)x<a&&x>r&&(a=x);r=a,i=0;let o=0,c=0;for(let x=0;x<s;x++){let p=e[x];p>r&&(c|=1<<s-1-x,i++,o+=p)}if(i===3){for(let x=0;x<s&&i>0;x++){let p=e[x];if(p>r&&(i--,p*2>=o))return-1}return c}}while(i>3);return-1}static patternToChar(e){for(let s=0;s<Vt.CHARACTER_ENCODINGS.length;s++)if(Vt.CHARACTER_ENCODINGS[s]===e)return Vt.ALPHABET_STRING.charAt(s);if(e===Vt.ASTERISK_ENCODING)return"*";throw new I}static decodeExtended(e){let s=e.length,r="";for(let i=0;i<s;i++){let a=e.charAt(i);if(a==="+"||a==="$"||a==="%"||a==="/"){let o=e.charAt(i+1),c="\0";switch(a){case"+":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)+32);else throw new F;break;case"$":if(o>="A"&&o<="Z")c=String.fromCharCode(o.charCodeAt(0)-64);else throw new F;break;case"%":if(o>="A"&&o<="E")c=String.fromCharCode(o.charCodeAt(0)-38);else if(o>="F"&&o<="J")c=String.fromCharCode(o.charCodeAt(0)-11);else if(o>="K"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)+16);else if(o>="P"&&o<="T")c=String.fromCharCode(o.charCodeAt(0)+43);else if(o==="U")c="\0";else if(o==="V")c="@";else if(o==="W")c="`";else if(o==="X"||o==="Y"||o==="Z")c="";else throw new F;break;case"/":if(o>="A"&&o<="O")c=String.fromCharCode(o.charCodeAt(0)-32);else if(o==="Z")c=":";else throw new F;break}r+=c,i++}else r+=a}return r}}Vt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Vt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Vt.ASTERISK_ENCODING=148;class yt extends Bt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,s,r){let i=this.decodeStart(s),a=this.decodeEnd(s),o=new Z;yt.decodeMiddle(s,i[1],a[0],o);let c=o.toString(),x=null;r!=null&&(x=r.get(re.ALLOWED_LENGTHS)),x==null&&(x=yt.DEFAULT_ALLOWED_LENGTHS);let p=c.length,R=!1,v=0;for(let H of x){if(p===H){R=!0;break}H>v&&(v=H)}if(!R&&p>v&&(R=!0),!R)throw new F;const S=[new Pe(i[1],e),new Pe(a[0],e)];return new ee(c,null,0,S,je.ITF,new Date().getTime())}static decodeMiddle(e,s,r,i){let a=new Int32Array(10),o=new Int32Array(5),c=new Int32Array(5);for(a.fill(0),o.fill(0),c.fill(0);s<r;){Bt.recordPattern(e,s,a);for(let p=0;p<5;p++){let R=2*p;o[p]=a[R],c[p]=a[R+1]}let x=yt.decodeDigit(o);i.append(x.toString()),x=this.decodeDigit(c),i.append(x.toString()),a.forEach(function(p){s+=p})}}decodeStart(e){let s=yt.skipWhiteSpace(e),r=yt.findGuardPattern(e,s,yt.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r}validateQuietZone(e,s){let r=this.narrowLineWidth*10;r=r<s?r:s;for(let i=s-1;r>0&&i>=0&&!e.get(i);i--)r--;if(r!==0)throw new I}static skipWhiteSpace(e){const s=e.getSize(),r=e.getNextSet(0);if(r===s)throw new I;return r}decodeEnd(e){e.reverse();try{let s=yt.skipWhiteSpace(e),r;try{r=yt.findGuardPattern(e,s,yt.END_PATTERN_REVERSED[0])}catch(a){a instanceof I&&(r=yt.findGuardPattern(e,s,yt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);let i=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-i,r}finally{e.reverse()}}static findGuardPattern(e,s,r){let i=r.length,a=new Int32Array(i),o=e.getSize(),c=!1,x=0,p=s;a.fill(0);for(let R=s;R<o;R++)if(e.get(R)!==c)a[x]++;else{if(x===i-1){if(Bt.patternMatchVariance(a,r,yt.MAX_INDIVIDUAL_VARIANCE)<yt.MAX_AVG_VARIANCE)return[p,R];p+=a[0]+a[1],q.arraycopy(a,2,a,0,x-1),a[x-1]=0,a[x]=0,x--}else x++;a[x]=1,c=!c}throw new I}static decodeDigit(e){let s=yt.MAX_AVG_VARIANCE,r=-1,i=yt.PATTERNS.length;for(let a=0;a<i;a++){let o=yt.PATTERNS[a],c=Bt.patternMatchVariance(e,o,yt.MAX_INDIVIDUAL_VARIANCE);c<s?(s=c,r=a):c===s&&(r=-1)}if(r>=0)return r%10;throw new I}}yt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],yt.MAX_AVG_VARIANCE=.38,yt.MAX_INDIVIDUAL_VARIANCE=.5,yt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],yt.START_PATTERN=Int32Array.from([1,1,1,1]),yt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class St extends Bt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let s=!1,r,i=0,a=Int32Array.from([0,0,0]);for(;!s;){a=Int32Array.from([0,0,0]),r=St.findGuardPattern(e,i,!1,this.START_END_PATTERN,a);let o=r[0];i=r[1];let c=o-(i-o);c>=0&&(s=e.isRange(c,o,!1))}return r}static checkChecksum(e){return St.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let s=e.length;if(s===0)return!1;let r=parseInt(e.charAt(s-1),10);return St.getStandardUPCEANChecksum(e.substring(0,s-1))===r}static getStandardUPCEANChecksum(e){let s=e.length,r=0;for(let i=s-1;i>=0;i-=2){let a=e.charAt(i).charCodeAt(0)-48;if(a<0||a>9)throw new F;r+=a}r*=3;for(let i=s-2;i>=0;i-=2){let a=e.charAt(i).charCodeAt(0)-48;if(a<0||a>9)throw new F;r+=a}return(1e3-r)%10}static decodeEnd(e,s){return St.findGuardPattern(e,s,!1,St.START_END_PATTERN,new Int32Array(St.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,s,r,i){return this.findGuardPattern(e,s,r,i,new Int32Array(i.length))}static findGuardPattern(e,s,r,i,a){let o=e.getSize();s=r?e.getNextUnset(s):e.getNextSet(s);let c=0,x=s,p=i.length,R=r;for(let v=s;v<o;v++)if(e.get(v)!==R)a[c]++;else{if(c===p-1){if(Bt.patternMatchVariance(a,i,St.MAX_INDIVIDUAL_VARIANCE)<St.MAX_AVG_VARIANCE)return Int32Array.from([x,v]);x+=a[0]+a[1];let S=a.slice(2,a.length-1);for(let P=0;P<c-1;P++)a[P]=S[P];a[c-1]=0,a[c]=0,c--}else c++;a[c]=1,R=!R}throw new I}static decodeDigit(e,s,r,i){this.recordPattern(e,r,s);let a=this.MAX_AVG_VARIANCE,o=-1,c=i.length;for(let x=0;x<c;x++){let p=i[x],R=Bt.patternMatchVariance(s,p,St.MAX_INDIVIDUAL_VARIANCE);R<a&&(a=R,o=x)}if(o>=0)return o;throw new I}}St.MAX_AVG_VARIANCE=.48,St.MAX_INDIVIDUAL_VARIANCE=.7,St.START_END_PATTERN=Int32Array.from([1,1,1]),St.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),St.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),St.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Sr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,s,r){let i=this.decodeRowStringBuffer,a=this.decodeMiddle(s,r,i),o=i.toString(),c=Sr.parseExtensionString(o),x=[new Pe((r[0]+r[1])/2,e),new Pe(a,e)],p=new ee(o,null,0,x,je.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&p.putAllMetadata(c),p}decodeMiddle(e,s,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o=s[1],c=0;for(let p=0;p<5&&o<a;p++){let R=St.decodeDigit(e,i,o,St.L_AND_G_PATTERNS);r+=String.fromCharCode(48+R%10);for(let v of i)o+=v;R>=10&&(c|=1<<4-p),p!==4&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(r.length!==5)throw new I;let x=this.determineCheckDigit(c);if(Sr.extensionChecksum(r.toString())!==x)throw new I;return o}static extensionChecksum(e){let s=e.length,r=0;for(let i=s-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(let i=s-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10}determineCheckDigit(e){for(let s=0;s<10;s++)if(e===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new I}static parseExtensionString(e){if(e.length!==5)return null;let s=Sr.parseExtension5String(e);return s==null?null:new Map([[Be.SUGGESTED_PRICE,s]])}static parseExtension5String(e){let s;switch(e.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let r=parseInt(e.substring(1)),i=(r/100).toString(),a=r%100,o=a<10?"0"+a:a.toString();return s+i+"."+o}}class pn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,s,r){let i=this.decodeRowStringBuffer,a=this.decodeMiddle(s,r,i),o=i.toString(),c=pn.parseExtensionString(o),x=[new Pe((r[0]+r[1])/2,e),new Pe(a,e)],p=new ee(o,null,0,x,je.UPC_EAN_EXTENSION,new Date().getTime());return c!=null&&p.putAllMetadata(c),p}decodeMiddle(e,s,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o=s[1],c=0;for(let x=0;x<2&&o<a;x++){let p=St.decodeDigit(e,i,o,St.L_AND_G_PATTERNS);r+=String.fromCharCode(48+p%10);for(let R of i)o+=R;p>=10&&(c|=1<<1-x),x!==1&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(r.length!==2)throw new I;if(parseInt(r.toString())%4!==c)throw new I;return o}static parseExtensionString(e){return e.length!==2?null:new Map([[Be.ISSUE_NUMBER,parseInt(e)]])}}class Un{static decodeRow(e,s,r){let i=St.findGuardPattern(s,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Sr().decodeRow(e,s,i)}catch{return new pn().decodeRow(e,s,i)}}}Un.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ot extends St{constructor(){super(),this.decodeRowStringBuffer="",ot.L_AND_G_PATTERNS=ot.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let s=ot.L_PATTERNS[e-10],r=new Int32Array(s.length);for(let i=0;i<s.length;i++)r[i]=s[s.length-i-1];ot.L_AND_G_PATTERNS[e]=r}}decodeRow(e,s,r){let i=ot.findStartGuardPattern(s),a=r==null?null:r.get(re.NEED_RESULT_POINT_CALLBACK);if(a!=null){const ve=new Pe((i[0]+i[1])/2,e);a.foundPossibleResultPoint(ve)}let o=this.decodeMiddle(s,i,this.decodeRowStringBuffer),c=o.rowOffset,x=o.resultString;if(a!=null){const ve=new Pe(c,e);a.foundPossibleResultPoint(ve)}let p=this.decodeEnd(s,c);if(a!=null){const ve=new Pe((p[0]+p[1])/2,e);a.foundPossibleResultPoint(ve)}let R=p[1],v=R+(R-p[0]);if(v>=s.getSize()||!s.isRange(R,v,!1))throw new I;let S=x.toString();if(S.length<8)throw new F;if(!ot.checkChecksum(S))throw new W;let P=(i[1]+i[0])/2,H=(p[1]+p[0])/2,Y=this.getBarcodeFormat(),se=[new Pe(P,e),new Pe(H,e)],he=new ee(S,null,0,se,Y,new Date().getTime()),ke=0;try{let ve=Un.decodeRow(e,s,p[1]);he.putMetadata(Be.UPC_EAN_EXTENSION,ve.getText()),he.putAllMetadata(ve.getResultMetadata()),he.addResultPoints(ve.getResultPoints()),ke=ve.getText().length}catch{}let Ae=r==null?null:r.get(re.ALLOWED_EAN_EXTENSIONS);if(Ae!=null){let ve=!1;for(let it in Ae)if(ke.toString()===it){ve=!0;break}if(!ve)throw new I}return he}decodeEnd(e,s){return ot.findGuardPattern(e,s,!1,ot.START_END_PATTERN,new Int32Array(ot.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return ot.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let s=e.length;if(s===0)return!1;let r=parseInt(e.charAt(s-1),10);return ot.getStandardUPCEANChecksum(e.substring(0,s-1))===r}static getStandardUPCEANChecksum(e){let s=e.length,r=0;for(let i=s-1;i>=0;i-=2){let a=e.charAt(i).charCodeAt(0)-48;if(a<0||a>9)throw new F;r+=a}r*=3;for(let i=s-2;i>=0;i-=2){let a=e.charAt(i).charCodeAt(0)-48;if(a<0||a>9)throw new F;r+=a}return(1e3-r)%10}}class Ms extends ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,s,r){let i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o=s[1],c=0;for(let p=0;p<6&&o<a;p++){let R=ot.decodeDigit(e,i,o,ot.L_AND_G_PATTERNS);r+=String.fromCharCode(48+R%10);for(let v of i)o+=v;R>=10&&(c|=1<<5-p)}r=Ms.determineFirstDigit(r,c),o=ot.findGuardPattern(e,o,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<6&&o<a;p++){let R=ot.decodeDigit(e,i,o,ot.L_PATTERNS);r+=String.fromCharCode(48+R);for(let v of i)o+=v}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return je.EAN_13}static determineFirstDigit(e,s){for(let r=0;r<10;r++)if(s===this.FIRST_DIGIT_ENCODINGS[r])return e=String.fromCharCode(48+r)+e,e;throw new I}}Ms.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class mi extends ot{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,s,r){const i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o=s[1];for(let x=0;x<4&&o<a;x++){let p=ot.decodeDigit(e,i,o,ot.L_PATTERNS);r+=String.fromCharCode(48+p);for(let R of i)o+=R}o=ot.findGuardPattern(e,o,!0,ot.MIDDLE_PATTERN,new Int32Array(ot.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&o<a;x++){let p=ot.decodeDigit(e,i,o,ot.L_PATTERNS);r+=String.fromCharCode(48+p);for(let R of i)o+=R}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return je.EAN_8}}class hi extends ot{constructor(){super(...arguments),this.ean13Reader=new Ms}getBarcodeFormat(){return je.UPC_A}decode(e,s){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,s,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,s,r))}decodeMiddle(e,s,r){return this.ean13Reader.decodeMiddle(e,s,r)}maybeReturnResult(e){let s=e.getText();if(s.charAt(0)==="0"){let r=new ee(s.substring(1),null,null,e.getResultPoints(),je.UPC_A);return e.getResultMetadata()!=null&&r.putAllMetadata(e.getResultMetadata()),r}else throw new I}reset(){this.ean13Reader.reset()}}class Ps extends ot{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,s,r){const i=this.decodeMiddleCounters.map(p=>p);i[0]=0,i[1]=0,i[2]=0,i[3]=0;const a=e.getSize();let o=s[1],c=0;for(let p=0;p<6&&o<a;p++){const R=Ps.decodeDigit(e,i,o,Ps.L_AND_G_PATTERNS);r+=String.fromCharCode(48+R%10);for(let v of i)o+=v;R>=10&&(c|=1<<5-p)}let x=Ps.determineNumSysAndCheckDigit(r,c);return{rowOffset:o,resultString:x}}decodeEnd(e,s){return Ps.findGuardPatternWithoutCounters(e,s,!0,Ps.MIDDLE_END_PATTERN)}checkChecksum(e){return ot.checkChecksum(Ps.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,s){for(let r=0;r<=1;r++)for(let i=0;i<10;i++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][i]){let a=String.fromCharCode(48+r),o=String.fromCharCode(48+i);return a+e+o}throw I.getNotFoundInstance()}getBarcodeFormat(){return je.UPC_E}static convertUPCEtoUPCA(e){const s=e.slice(1,7).split("").map(a=>a.charCodeAt(0)),r=new Z;r.append(e.charAt(0));let i=s[5];switch(i){case 0:case 1:case 2:r.appendChars(s,0,2),r.append(i),r.append("0000"),r.appendChars(s,2,3);break;case 3:r.appendChars(s,0,3),r.append("00000"),r.appendChars(s,3,2);break;case 4:r.appendChars(s,0,4),r.append("00000"),r.append(s[4]);break;default:r.appendChars(s,0,5),r.append("0000"),r.append(i);break}return e.length>=8&&r.append(e.charAt(7)),r.toString()}}Ps.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ps.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Wn extends Bt{constructor(e){super();let s=e==null?null:e.get(re.POSSIBLE_FORMATS),r=[];E(s)?(r.push(new Ms),r.push(new hi),r.push(new mi),r.push(new Ps)):(s.indexOf(je.EAN_13)>-1&&r.push(new Ms),s.indexOf(je.UPC_A)>-1&&r.push(new hi),s.indexOf(je.EAN_8)>-1&&r.push(new mi),s.indexOf(je.UPC_E)>-1&&r.push(new Ps)),this.readers=r}decodeRow(e,s,r){for(let i of this.readers)try{const a=i.decodeRow(e,s,r),o=a.getBarcodeFormat()===je.EAN_13&&a.getText().charAt(0)==="0",c=r==null?null:r.get(re.POSSIBLE_FORMATS),x=c==null||c.includes(je.UPC_A);if(o&&x){const p=a.getRawBytes(),R=new ee(a.getText().substring(1),p,p?p.length:null,a.getResultPoints(),je.UPC_A);return R.putAllMetadata(a.getResultMetadata()),R}return a}catch{}throw new I}reset(){for(let e of this.readers)e.reset()}}class Jt extends Bt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,s){for(let r=0;r<s.length;r++)if(Bt.patternMatchVariance(e,s[r],Jt.MAX_INDIVIDUAL_VARIANCE)<Jt.MAX_AVG_VARIANCE)return r;throw new I}static count(e){return nt.sum(new Int32Array(e))}static increment(e,s){let r=0,i=s[0];for(let a=1;a<e.length;a++)s[a]>i&&(i=s[a],r=a);e[r]++}static decrement(e,s){let r=0,i=s[0];for(let a=1;a<e.length;a++)s[a]<i&&(i=s[a],r=a);e[r]--}static isFinderPattern(e){let s=e[0]+e[1],r=s+e[2]+e[3],i=s/r;if(i>=Jt.MIN_FINDER_PATTERN_RATIO&&i<=Jt.MAX_FINDER_PATTERN_RATIO){let a=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;for(let c of e)c>o&&(o=c),c<a&&(a=c);return o<10*a}return!1}}Jt.MAX_AVG_VARIANCE=.2,Jt.MAX_INDIVIDUAL_VARIANCE=.45,Jt.MIN_FINDER_PATTERN_RATIO=9.5/12,Jt.MAX_FINDER_PATTERN_RATIO=12.5/14;class Er{constructor(e,s){this.value=e,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Er))return!1;const s=e;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class fn{constructor(e,s,r,i,a){this.value=e,this.startEnd=s,this.value=e,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Pe(r,a)),this.resultPoints.push(new Pe(i,a))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof fn))return!1;const s=e;return this.value===s.value}hashCode(){return this.value}}class Es{constructor(){}static getRSSvalue(e,s,r){let i=0;for(let x of e)i+=x;let a=0,o=0,c=e.length;for(let x=0;x<c-1;x++){let p;for(p=1,o|=1<<x;p<e[x];p++,o&=~(1<<x)){let R=Es.combins(i-p-1,c-x-2);if(r&&o===0&&i-p-(c-x-1)>=c-x-1&&(R-=Es.combins(i-p-(c-x),c-x-2)),c-x-1>1){let v=0;for(let S=i-p-(c-x-2);S>s;S--)v+=Es.combins(i-p-S-1,c-x-3);R-=v*(c-1-x)}else i-p>s&&R--;a+=R}i-=p}return a}static combins(e,s){let r,i;e-s>s?(i=s,r=e-s):(i=e-s,r=s);let a=1,o=1;for(let c=e;c>r;c--)a*=c,o<=i&&(a/=o,o++);for(;o<=i;)a/=o,o++;return a}}class pi{static buildBitArray(e){let s=e.length*2-1;e[e.length-1].getRightChar()==null&&(s-=1);let r=12*s,i=new K(r),a=0,c=e[0].getRightChar().getValue();for(let x=11;x>=0;--x)(c&1<<x)!=0&&i.set(a),a++;for(let x=1;x<e.length;++x){let p=e[x],R=p.getLeftChar().getValue();for(let v=11;v>=0;--v)(R&1<<v)!=0&&i.set(a),a++;if(p.getRightChar()!=null){let v=p.getRightChar().getValue();for(let S=11;S>=0;--S)(v&1<<S)!=0&&i.set(a),a++}}return i}}class Ws{constructor(e,s){s?this.decodedInformation=null:(this.finished=e,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class fi{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Kt extends fi{constructor(e,s){super(e),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Kt.FNC1}}Kt.FNC1="$";class $s extends fi{constructor(e,s,r){super(e),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ms extends fi{constructor(e,s,r){if(super(e),s<0||s>10||r<0||r>10)throw new F;this.firstDigit=s,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ms.FNC1}isSecondDigitFNC1(){return this.secondDigit===ms.FNC1}isAnyFNC1(){return this.firstDigit===ms.FNC1||this.secondDigit===ms.FNC1}}ms.FNC1=10;class Me{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new I;let s=e.substring(0,2);for(let a of Me.TWO_DIGIT_DATA_LENGTH)if(a[0]===s)return a[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(2,a[2],e):Me.processFixedAI(2,a[1],e);if(e.length<3)throw new I;let r=e.substring(0,3);for(let a of Me.THREE_DIGIT_DATA_LENGTH)if(a[0]===r)return a[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(3,a[2],e):Me.processFixedAI(3,a[1],e);for(let a of Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(a[0]===r)return a[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,a[2],e):Me.processFixedAI(4,a[1],e);if(e.length<4)throw new I;let i=e.substring(0,4);for(let a of Me.FOUR_DIGIT_DATA_LENGTH)if(a[0]===i)return a[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,a[2],e):Me.processFixedAI(4,a[1],e);throw new I}static processFixedAI(e,s,r){if(r.length<e)throw new I;let i=r.substring(0,e);if(r.length<e+s)throw new I;let a=r.substring(e,e+s),o=r.substring(e+s),c="("+i+")"+a,x=Me.parseFieldsInGeneralPurpose(o);return x==null?c:c+x}static processVariableAI(e,s,r){let i=r.substring(0,e),a;r.length<e+s?a=r.length:a=e+s;let o=r.substring(e,a),c=r.substring(a),x="("+i+")"+o,p=Me.parseFieldsInGeneralPurpose(c);return p==null?x:x+p}}Me.VARIABLE_LENGTH=[],Me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Me.VARIABLE_LENGTH,20],["22",Me.VARIABLE_LENGTH,29],["30",Me.VARIABLE_LENGTH,8],["37",Me.VARIABLE_LENGTH,8],["90",Me.VARIABLE_LENGTH,30],["91",Me.VARIABLE_LENGTH,30],["92",Me.VARIABLE_LENGTH,30],["93",Me.VARIABLE_LENGTH,30],["94",Me.VARIABLE_LENGTH,30],["95",Me.VARIABLE_LENGTH,30],["96",Me.VARIABLE_LENGTH,30],["97",Me.VARIABLE_LENGTH,3],["98",Me.VARIABLE_LENGTH,30],["99",Me.VARIABLE_LENGTH,30]],Me.THREE_DIGIT_DATA_LENGTH=[["240",Me.VARIABLE_LENGTH,30],["241",Me.VARIABLE_LENGTH,30],["242",Me.VARIABLE_LENGTH,6],["250",Me.VARIABLE_LENGTH,30],["251",Me.VARIABLE_LENGTH,30],["253",Me.VARIABLE_LENGTH,17],["254",Me.VARIABLE_LENGTH,20],["400",Me.VARIABLE_LENGTH,30],["401",Me.VARIABLE_LENGTH,30],["402",17],["403",Me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Me.VARIABLE_LENGTH,20],["421",Me.VARIABLE_LENGTH,15],["422",3],["423",Me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Me.VARIABLE_LENGTH,15],["391",Me.VARIABLE_LENGTH,18],["392",Me.VARIABLE_LENGTH,15],["393",Me.VARIABLE_LENGTH,18],["703",Me.VARIABLE_LENGTH,30]],Me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Me.VARIABLE_LENGTH,20],["8003",Me.VARIABLE_LENGTH,30],["8004",Me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Me.VARIABLE_LENGTH,30],["8008",Me.VARIABLE_LENGTH,12],["8018",18],["8020",Me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Me.VARIABLE_LENGTH,70],["8200",Me.VARIABLE_LENGTH,70]];class Hr{constructor(e){this.buffer=new Z,this.information=e}decodeAllCodes(e,s){let r=s,i=null;do{let a=this.decodeGeneralPurposeField(r,i),o=Me.parseFieldsInGeneralPurpose(a.getNewString());if(o!=null&&e.append(o),a.isRemaining()?i=""+a.getRemainingValue():i=null,r===a.getNewPosition())break;r=a.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let s=e;s<e+3;++s)if(this.information.get(s))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let a=this.extractNumericValueFromBitArray(e,4);return a===0?new ms(this.information.getSize(),ms.FNC1,ms.FNC1):new ms(this.information.getSize(),a-1,ms.FNC1)}let s=this.extractNumericValueFromBitArray(e,7),r=(s-8)/11,i=(s-8)%11;return new ms(e+7,r,i)}extractNumericValueFromBitArray(e,s){return Hr.extractNumericValueFromBitArray(this.information,e,s)}static extractNumericValueFromBitArray(e,s,r){let i=0;for(let a=0;a<r;++a)e.get(s+a)&&(i|=1<<r-a-1);return i}decodeGeneralPurposeField(e,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(e);let r=this.parseBlocks();return r!=null&&r.isRemaining()?new $s(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new $s(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,s;do{let r=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),e=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),e=s.isFinished()):(s=this.parseNumericBlock(),e=s.isFinished()),!(r!==this.current.getPosition())&&!e)break}while(!e);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let s;return e.isSecondDigitFNC1()?s=new $s(this.current.getPosition(),this.buffer.toString()):s=new $s(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ws(!0,s)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let s=new $s(this.current.getPosition(),this.buffer.toString());return new Ws(!0,s)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ws(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let s=new $s(this.current.getPosition(),this.buffer.toString());return new Ws(!0,s)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ws(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let s=new $s(this.current.getPosition(),this.buffer.toString());return new Ws(!0,s)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ws(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,5);if(s>=5&&s<16)return!0;if(e+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253}decodeIsoIec646(e){let s=this.extractNumericValueFromBitArray(e,5);if(s===15)return new Kt(e+5,Kt.FNC1);if(s>=5&&s<15)return new Kt(e+5,"0"+(s-5));let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Kt(e+7,""+(r+1));if(r>=90&&r<116)return new Kt(e+7,""+(r+7));let i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new F}return new Kt(e+8,a)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(e,5);if(s>=5&&s<16)return!0;if(e+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63}decodeAlphanumeric(e){let s=this.extractNumericValueFromBitArray(e,5);if(s===15)return new Kt(e+5,Kt.FNC1);if(s>=5&&s<15)return new Kt(e+5,"0"+(s-5));let r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Kt(e+6,""+(r+33));let i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new as("Decoding invalid alphanumeric value: "+r)}return new Kt(e+6,i)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let s=0;s<5&&s+e<this.information.getSize();++s)if(s===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+s))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let s=e;s<e+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let s=0;s<4&&s+e<this.information.getSize();++s)if(this.information.get(e+s))return!1;return!0}}class gi{constructor(e){this.information=e,this.generalDecoder=new Hr(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class js extends gi{constructor(e){super(e)}encodeCompressedGtin(e,s){e.append("(01)");let r=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,s,r)}encodeCompressedGtinWithoutAI(e,s,r){for(let i=0;i<4;++i){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*i,10);a/100===0&&e.append("0"),a/10===0&&e.append("0"),e.append(a)}js.appendCheckDigit(e,r)}static appendCheckDigit(e,s){let r=0;for(let i=0;i<13;i++){let a=e.charAt(i+s).charCodeAt(0)-48;r+=(i&1)===0?3*a:a}r=10-r%10,r===10&&(r=0),e.append(r)}}js.GTIN_SIZE=40;class Ds extends js{constructor(e){super(e)}parseInformation(){let e=new Z;e.append("(01)");let s=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(Ds.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,Ds.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(e,Ds.HEADER_SIZE+44)}}Ds.HEADER_SIZE=4;class gn extends gi{constructor(e){super(e)}parseInformation(){let e=new Z;return this.getGeneralDecoder().decodeAllCodes(e,gn.HEADER_SIZE)}}gn.HEADER_SIZE=5;class yn extends js{constructor(e){super(e)}encodeCompressedWeight(e,s,r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(s,r);this.addWeightCode(e,i);let a=this.checkWeight(i),o=1e5;for(let c=0;c<5;++c)a/o===0&&e.append("0"),o/=10;e.append(a)}}class Js extends yn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Js.HEADER_SIZE+yn.GTIN_SIZE+Js.WEIGHT_SIZE)throw new I;let e=new Z;return this.encodeCompressedGtin(e,Js.HEADER_SIZE),this.encodeCompressedWeight(e,Js.HEADER_SIZE+yn.GTIN_SIZE,Js.WEIGHT_SIZE),e.toString()}}Js.HEADER_SIZE=5,Js.WEIGHT_SIZE=15;class Ji extends Js{constructor(e){super(e)}addWeightCode(e,s){e.append("(3103)")}checkWeight(e){return e}}class ea extends Js{constructor(e){super(e)}addWeightCode(e,s){s<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Hs extends js{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Hs.HEADER_SIZE+js.GTIN_SIZE)throw new I;let e=new Z;this.encodeCompressedGtin(e,Hs.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Hs.HEADER_SIZE+js.GTIN_SIZE,Hs.LAST_DIGIT_SIZE);e.append("(392"),e.append(s),e.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(Hs.HEADER_SIZE+js.GTIN_SIZE+Hs.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()}}Hs.HEADER_SIZE=8,Hs.LAST_DIGIT_SIZE=2;class os extends js{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<os.HEADER_SIZE+js.GTIN_SIZE)throw new I;let e=new Z;this.encodeCompressedGtin(e,os.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(os.HEADER_SIZE+js.GTIN_SIZE,os.LAST_DIGIT_SIZE);e.append("(393"),e.append(s),e.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(os.HEADER_SIZE+js.GTIN_SIZE+os.LAST_DIGIT_SIZE,os.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);let i=this.getGeneralDecoder().decodeGeneralPurposeField(os.HEADER_SIZE+js.GTIN_SIZE+os.LAST_DIGIT_SIZE+os.FIRST_THREE_DIGITS_SIZE,null);return e.append(i.getNewString()),e.toString()}}os.HEADER_SIZE=8,os.LAST_DIGIT_SIZE=2,os.FIRST_THREE_DIGITS_SIZE=10;class kt extends yn{constructor(e,s,r){super(e),this.dateCode=r,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=kt.HEADER_SIZE+kt.GTIN_SIZE+kt.WEIGHT_SIZE+kt.DATE_SIZE)throw new I;let e=new Z;return this.encodeCompressedGtin(e,kt.HEADER_SIZE),this.encodeCompressedWeight(e,kt.HEADER_SIZE+kt.GTIN_SIZE,kt.WEIGHT_SIZE),this.encodeCompressedDate(e,kt.HEADER_SIZE+kt.GTIN_SIZE+kt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,s){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(s,kt.DATE_SIZE);if(r==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let i=r%32;r/=32;let a=r%12+1;r/=12;let o=r;o/10==0&&e.append("0"),e.append(o),a/10==0&&e.append("0"),e.append(a),i/10==0&&e.append("0"),e.append(i)}addWeightCode(e,s){e.append("("),e.append(this.firstAIdigits),e.append(s/1e5),e.append(")")}checkWeight(e){return e%1e5}}kt.HEADER_SIZE=8,kt.WEIGHT_SIZE=20,kt.DATE_SIZE=16;function ta(b){try{if(b.get(1))return new Ds(b);if(!b.get(2))return new gn(b);switch(Hr.extractNumericValueFromBitArray(b,1,4)){case 4:return new Ji(b);case 5:return new ea(b)}switch(Hr.extractNumericValueFromBitArray(b,1,5)){case 12:return new Hs(b);case 13:return new os(b)}switch(Hr.extractNumericValueFromBitArray(b,1,7)){case 56:return new kt(b,"310","11");case 57:return new kt(b,"320","11");case 58:return new kt(b,"310","13");case 59:return new kt(b,"320","13");case 60:return new kt(b,"310","15");case 61:return new kt(b,"320","15");case 62:return new kt(b,"310","17");case 63:return new kt(b,"320","17")}}catch(e){throw console.log(e),new as("unknown decoder: "+b)}}class wt{constructor(e,s,r,i){this.leftchar=e,this.rightchar=s,this.finderpattern=r,this.maybeLast=i}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,s){return e instanceof wt?wt.equalsOrNull(e.leftchar,s.leftchar)&&wt.equalsOrNull(e.rightchar,s.rightchar)&&wt.equalsOrNull(e.finderpattern,s.finderpattern):!1}static equalsOrNull(e,s){return e===null?s===null:wt.equals(e,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class yi{constructor(e,s,r){this.pairs=e,this.rowNumber=s,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,s){return e instanceof yi?this.checkEqualitity(e,s)&&e.wasReversed===s.wasReversed:!1}checkEqualitity(e,s){if(!e||!s)return;let r;return e.forEach((i,a)=>{s.forEach(o=>{i.getLeftChar().getValue()===o.getLeftChar().getValue()&&i.getRightChar().getValue()===o.getRightChar().getValue()&&i.getFinderPatter().getValue()===o.getFinderPatter().getValue()&&(r=!0)})}),r}}class we extends Jt{constructor(e){super(...arguments),this.pairs=new Array(we.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,s,r){this.pairs.length=0,this.startFromEven=!1;try{return we.constructResult(this.decodeRow2pairs(e,s))}catch(i){this.verbose&&console.log(i)}return this.pairs.length=0,this.startFromEven=!0,we.constructResult(this.decodeRow2pairs(e,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,s){let r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,e))}catch(a){if(a instanceof I){if(!this.pairs.length)throw new I;r=!0}}if(this.checkChecksum())return this.pairs;let i;if(this.rows.length?i=!0:i=!1,this.storeRow(e,!1),i){let a=this.checkRowsBoolean(!1);if(a!=null||(a=this.checkRowsBoolean(!0),a!=null))return a}throw new I}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(r){this.verbose&&console.log(r)}return e&&(this.rows=this.rows.reverse()),s}checkRows(e,s){for(let r=s;r<this.rows.length;r++){let i=this.rows[r];this.pairs.length=0;for(let o of e)this.pairs.push(o.getPairs());if(this.pairs.push(i.getPairs()),!we.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let a=new Array(e);a.push(i);try{return this.checkRows(a,r+1)}catch(o){this.verbose&&console.log(o)}}throw new I}static isValidSequence(e){for(let s of we.FINDER_PATTERN_SEQUENCES){if(e.length>s.length)continue;let r=!0;for(let i=0;i<e.length;i++)if(e[i].getFinderPattern().getValue()!=s[i]){r=!1;break}if(r)return!0}return!1}storeRow(e,s){let r=0,i=!1,a=!1;for(;r<this.rows.length;){let o=this.rows[r];if(o.getRowNumber()>e){a=o.isEquivalent(this.pairs);break}i=o.isEquivalent(this.pairs),r++}a||i||we.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new yi(this.pairs,e,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,s){for(let r of s)if(r.getPairs().length!==e.length){for(let i of r.getPairs())for(let a of e)if(wt.equals(i,a))break}}static isPartialRow(e,s){for(let r of s){let i=!0;for(let a of e){let o=!1;for(let c of r.getPairs())if(a.equals(c)){o=!0;break}if(!o){i=!1;break}}if(i)return!0}return!1}getRows(){return this.rows}static constructResult(e){let s=pi.buildBitArray(e),i=ta(s).parseInformation(),a=e[0].getFinderPattern().getResultPoints(),o=e[e.length-1].getFinderPattern().getResultPoints(),c=[a[0],a[1],o[0],o[1]];return new ee(i,null,null,c,je.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),s=e.getLeftChar(),r=e.getRightChar();if(r==null)return!1;let i=r.getChecksumPortion(),a=2;for(let c=1;c<this.pairs.size();++c){let x=this.pairs.get(c);i+=x.getLeftChar().getChecksumPortion(),a++;let p=x.getRightChar();p!=null&&(i+=p.getChecksumPortion(),a++)}return i%=211,211*(a-4)+i==s.getValue()}static getNextSecondBar(e,s){let r;return e.get(s)?(r=e.getNextUnset(s),r=e.getNextSet(r)):(r=e.getNextSet(s),r=e.getNextUnset(r)),r}retrieveNextPair(e,s,r){let i=s.length%2==0;this.startFromEven&&(i=!i);let a,o=!0,c=-1;do this.findNextPair(e,s,c),a=this.parseFoundFinderPattern(e,r,i),a==null?c=we.getNextSecondBar(e,this.startEnd[0]):o=!1;while(o);let x=this.decodeDataCharacter(e,a,i,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new I;let p;try{p=this.decodeDataCharacter(e,a,i,!1)}catch(R){p=null,this.verbose&&console.log(R)}return new wt(x,p,a,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,s,r){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),o;r>=0?o=r:this.isEmptyPair(s)?o=0:o=s[s.length-1].getFinderPattern().getStartEnd()[1];let c=s.length%2!=0;this.startFromEven&&(c=!c);let x=!1;for(;o<a&&(x=!e.get(o),!!x);)o++;let p=0,R=o;for(let v=o;v<a;v++)if(e.get(v)!=x)i[p]++;else{if(p==3){if(c&&we.reverseCounters(i),we.isFinderPattern(i)){this.startEnd[0]=R,this.startEnd[1]=v;return}c&&we.reverseCounters(i),R+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,p--}else p++;i[p]=1,x=!x}throw new I}static reverseCounters(e){let s=e.length;for(let r=0;r<s/2;++r){let i=e[r];e[r]=e[s-r-1],e[s-r-1]=i}}parseFoundFinderPattern(e,s,r){let i,a,o;if(r){let p=this.startEnd[0]-1;for(;p>=0&&!e.get(p);)p--;p++,i=this.startEnd[0]-p,a=p,o=this.startEnd[1]}else a=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),i=o-this.startEnd[1];let c=this.getDecodeFinderCounters();q.arraycopy(c,0,c,1,c.length-1),c[0]=i;let x;try{x=this.parseFinderValue(c,we.FINDER_PATTERNS)}catch{return null}return new fn(x,[a,o],a,o,s)}decodeDataCharacter(e,s,r,i){let a=this.getDataCharacterCounters();for(let Et=0;Et<a.length;Et++)a[Et]=0;if(i)we.recordPatternInReverse(e,s.getStartEnd()[0],a);else{we.recordPattern(e,s.getStartEnd()[1],a);for(let Et=0,Lt=a.length-1;Et<Lt;Et++,Lt--){let fs=a[Et];a[Et]=a[Lt],a[Lt]=fs}}let o=17,c=nt.sum(new Int32Array(a))/o,x=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(c-x)/x>.3)throw new I;let p=this.getOddCounts(),R=this.getEvenCounts(),v=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let Et=0;Et<a.length;Et++){let Lt=1*a[Et]/c,fs=Lt+.5;if(fs<1){if(Lt<.3)throw new I;fs=1}else if(fs>8){if(Lt>8.7)throw new I;fs=8}let _r=Et/2;(Et&1)==0?(p[_r]=fs,v[_r]=Lt-fs):(R[_r]=fs,S[_r]=Lt-fs)}this.adjustOddEvenCounts(o);let P=4*s.getValue()+(r?0:2)+(i?0:1)-1,H=0,Y=0;for(let Et=p.length-1;Et>=0;Et--){if(we.isNotA1left(s,r,i)){let Lt=we.WEIGHTS[P][2*Et];Y+=p[Et]*Lt}H+=p[Et]}let se=0;for(let Et=R.length-1;Et>=0;Et--)if(we.isNotA1left(s,r,i)){let Lt=we.WEIGHTS[P][2*Et+1];se+=R[Et]*Lt}let he=Y+se;if((H&1)!=0||H>13||H<4)throw new I;let ke=(13-H)/2,Ae=we.SYMBOL_WIDEST[ke],ve=9-Ae,it=Es.getRSSvalue(p,Ae,!0),Je=Es.getRSSvalue(R,ve,!1),Rs=we.EVEN_TOTAL_SUBSET[ke],Ys=we.GSUM[ke],Zt=it*Rs+Je+Ys;return new Er(Zt,he)}static isNotA1left(e,s,r){return!(e.getValue()==0&&s&&r)}adjustOddEvenCounts(e){let s=nt.sum(new Int32Array(this.getOddCounts())),r=nt.sum(new Int32Array(this.getEvenCounts())),i=!1,a=!1;s>13?a=!0:s<4&&(i=!0);let o=!1,c=!1;r>13?c=!0:r<4&&(o=!0);let x=s+r-e,p=(s&1)==1,R=(r&1)==0;if(x==1)if(p){if(R)throw new I;a=!0}else{if(!R)throw new I;c=!0}else if(x==-1)if(p){if(R)throw new I;i=!0}else{if(!R)throw new I;o=!0}else if(x==0){if(p){if(!R)throw new I;s<r?(i=!0,c=!0):(a=!0,o=!0)}else if(R)throw new I}else throw new I;if(i){if(a)throw new I;we.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(a&&we.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(c)throw new I;we.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&we.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}we.SYMBOL_WIDEST=[7,5,4,3,1],we.EVEN_TOTAL_SUBSET=[4,20,52,104,204],we.GSUM=[0,348,1388,2948,3988],we.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],we.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],we.FINDER_PAT_A=0,we.FINDER_PAT_B=1,we.FINDER_PAT_C=2,we.FINDER_PAT_D=3,we.FINDER_PAT_E=4,we.FINDER_PAT_F=5,we.FINDER_PATTERN_SEQUENCES=[[we.FINDER_PAT_A,we.FINDER_PAT_A],[we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B],[we.FINDER_PAT_A,we.FINDER_PAT_C,we.FINDER_PAT_B,we.FINDER_PAT_D],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_C],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_D,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_D],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_E],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F]],we.MAX_PAIRS=11;class sa extends Er{constructor(e,s,r){super(e,s),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Nt extends Jt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,s,r){const i=this.decodePair(s,!1,e,r);Nt.addOrTally(this.possibleLeftPairs,i),s.reverse();let a=this.decodePair(s,!0,e,r);Nt.addOrTally(this.possibleRightPairs,a),s.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1){for(let c of this.possibleRightPairs)if(c.getCount()>1&&Nt.checkChecksum(o,c))return Nt.constructResult(o,c)}throw new I}static addOrTally(e,s){if(s==null)return;let r=!1;for(let i of e)if(i.getValue()===s.getValue()){i.incrementCount(),r=!0;break}r||e.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,s){let r=4537077*e.getValue()+s.getValue(),i=new String(r).toString(),a=new Z;for(let p=13-i.length;p>0;p--)a.append("0");a.append(i);let o=0;for(let p=0;p<13;p++){let R=a.charAt(p).charCodeAt(0)-48;o+=(p&1)===0?3*R:R}o=10-o%10,o===10&&(o=0),a.append(o.toString());let c=e.getFinderPattern().getResultPoints(),x=s.getFinderPattern().getResultPoints();return new ee(a.toString(),null,0,[c[0],c[1],x[0],x[1]],je.RSS_14,new Date().getTime())}static checkChecksum(e,s){let r=(e.getChecksumPortion()+16*s.getChecksumPortion())%79,i=9*e.getFinderPattern().getValue()+s.getFinderPattern().getValue();return i>72&&i--,i>8&&i--,r===i}decodePair(e,s,r,i){try{let a=this.findFinderPattern(e,s),o=this.parseFoundFinderPattern(e,r,s,a),c=i==null?null:i.get(re.NEED_RESULT_POINT_CALLBACK);if(c!=null){let R=(a[0]+a[1])/2;s&&(R=e.getSize()-1-R),c.foundPossibleResultPoint(new Pe(R,r))}let x=this.decodeDataCharacter(e,o,!0),p=this.decodeDataCharacter(e,o,!1);return new sa(1597*x.getValue()+p.getValue(),x.getChecksumPortion()+4*p.getChecksumPortion(),o)}catch{return null}}decodeDataCharacter(e,s,r){let i=this.getDataCharacterCounters();for(let se=0;se<i.length;se++)i[se]=0;if(r)Bt.recordPatternInReverse(e,s.getStartEnd()[0],i);else{Bt.recordPattern(e,s.getStartEnd()[1]+1,i);for(let se=0,he=i.length-1;se<he;se++,he--){let ke=i[se];i[se]=i[he],i[he]=ke}}let a=r?16:15,o=nt.sum(new Int32Array(i))/a,c=this.getOddCounts(),x=this.getEvenCounts(),p=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let se=0;se<i.length;se++){let he=i[se]/o,ke=Math.floor(he+.5);ke<1?ke=1:ke>8&&(ke=8);let Ae=Math.floor(se/2);(se&1)===0?(c[Ae]=ke,p[Ae]=he-ke):(x[Ae]=ke,R[Ae]=he-ke)}this.adjustOddEvenCounts(r,a);let v=0,S=0;for(let se=c.length-1;se>=0;se--)S*=9,S+=c[se],v+=c[se];let P=0,H=0;for(let se=x.length-1;se>=0;se--)P*=9,P+=x[se],H+=x[se];let Y=S+3*P;if(r){if((v&1)!==0||v>12||v<4)throw new I;let se=(12-v)/2,he=Nt.OUTSIDE_ODD_WIDEST[se],ke=9-he,Ae=Es.getRSSvalue(c,he,!1),ve=Es.getRSSvalue(x,ke,!0),it=Nt.OUTSIDE_EVEN_TOTAL_SUBSET[se],Je=Nt.OUTSIDE_GSUM[se];return new Er(Ae*it+ve+Je,Y)}else{if((H&1)!==0||H>10||H<4)throw new I;let se=(10-H)/2,he=Nt.INSIDE_ODD_WIDEST[se],ke=9-he,Ae=Es.getRSSvalue(c,he,!0),ve=Es.getRSSvalue(x,ke,!1),it=Nt.INSIDE_ODD_TOTAL_SUBSET[se],Je=Nt.INSIDE_GSUM[se];return new Er(ve*it+Ae+Je,Y)}}findFinderPattern(e,s){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let i=e.getSize(),a=!1,o=0;for(;o<i&&(a=!e.get(o),s!==a);)o++;let c=0,x=o;for(let p=o;p<i;p++)if(e.get(p)!==a)r[c]++;else{if(c===3){if(Jt.isFinderPattern(r))return[x,p];x+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,c--}else c++;r[c]=1,a=!a}throw new I}parseFoundFinderPattern(e,s,r,i){let a=e.get(i[0]),o=i[0]-1;for(;o>=0&&a!==e.get(o);)o--;o++;const c=i[0]-o,x=this.getDecodeFinderCounters(),p=new Int32Array(x.length);q.arraycopy(x,0,p,1,x.length-1),p[0]=c;const R=this.parseFinderValue(p,Nt.FINDER_PATTERNS);let v=o,S=i[1];return r&&(v=e.getSize()-1-v,S=e.getSize()-1-S),new fn(R,[o,i[1]],v,S,s)}adjustOddEvenCounts(e,s){let r=nt.sum(new Int32Array(this.getOddCounts())),i=nt.sum(new Int32Array(this.getEvenCounts())),a=!1,o=!1,c=!1,x=!1;e?(r>12?o=!0:r<4&&(a=!0),i>12?x=!0:i<4&&(c=!0)):(r>11?o=!0:r<5&&(a=!0),i>10?x=!0:i<4&&(c=!0));let p=r+i-s,R=(r&1)===(e?1:0),v=(i&1)===1;if(p===1)if(R){if(v)throw new I;o=!0}else{if(!v)throw new I;x=!0}else if(p===-1)if(R){if(v)throw new I;a=!0}else{if(!v)throw new I;c=!0}else if(p===0){if(R){if(!v)throw new I;r<i?(a=!0,x=!0):(o=!0,c=!0)}else if(v)throw new I}else throw new I;if(a){if(o)throw new I;Jt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Jt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(x)throw new I;Jt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&Jt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Nt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Nt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Nt.OUTSIDE_GSUM=[0,161,961,2015,2715],Nt.INSIDE_GSUM=[0,336,1036,1516],Nt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Nt.INSIDE_ODD_WIDEST=[2,4,6,8],Nt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class zr extends Bt{constructor(e,s){super(),this.readers=[],this.verbose=s===!0;const r=e?e.get(re.POSSIBLE_FORMATS):null,i=e&&e.get(re.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;r?((r.includes(je.EAN_13)||r.includes(je.UPC_A)||r.includes(je.EAN_8)||r.includes(je.UPC_E))&&this.readers.push(new Wn(e)),r.includes(je.CODE_39)&&this.readers.push(new Vt(i)),r.includes(je.CODE_128)&&this.readers.push(new _e),r.includes(je.ITF)&&this.readers.push(new yt),r.includes(je.RSS_14)&&this.readers.push(new Nt),r.includes(je.RSS_EXPANDED)&&this.readers.push(new we(this.verbose))):(this.readers.push(new Wn(e)),this.readers.push(new Vt),this.readers.push(new Wn(e)),this.readers.push(new _e),this.readers.push(new yt),this.readers.push(new Nt),this.readers.push(new we(this.verbose)))}decodeRow(e,s,r){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,s,r)}catch{}throw new I}reset(){this.readers.forEach(e=>e.reset())}}class ra extends Ie{constructor(e=500,s){super(new zr(s),e,s)}}class xt{constructor(e,s,r){this.ecCodewords=e,this.ecBlocks=[s],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class tt{constructor(e,s){this.count=e,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class lt{constructor(e,s,r,i,a,o){this.versionNumber=e,this.symbolSizeRows=s,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=o;let c=0;const x=o.getECCodewords(),p=o.getECBlocks();for(let R of p)c+=R.getCount()*(R.getDataCodewords()+x);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,s){if((e&1)!==0||(s&1)!==0)throw new F;for(let r of lt.VERSIONS)if(r.symbolSizeRows===e&&r.symbolSizeColumns===s)return r;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new lt(1,10,10,8,8,new xt(5,new tt(1,3))),new lt(2,12,12,10,10,new xt(7,new tt(1,5))),new lt(3,14,14,12,12,new xt(10,new tt(1,8))),new lt(4,16,16,14,14,new xt(12,new tt(1,12))),new lt(5,18,18,16,16,new xt(14,new tt(1,18))),new lt(6,20,20,18,18,new xt(18,new tt(1,22))),new lt(7,22,22,20,20,new xt(20,new tt(1,30))),new lt(8,24,24,22,22,new xt(24,new tt(1,36))),new lt(9,26,26,24,24,new xt(28,new tt(1,44))),new lt(10,32,32,14,14,new xt(36,new tt(1,62))),new lt(11,36,36,16,16,new xt(42,new tt(1,86))),new lt(12,40,40,18,18,new xt(48,new tt(1,114))),new lt(13,44,44,20,20,new xt(56,new tt(1,144))),new lt(14,48,48,22,22,new xt(68,new tt(1,174))),new lt(15,52,52,24,24,new xt(42,new tt(2,102))),new lt(16,64,64,14,14,new xt(56,new tt(2,140))),new lt(17,72,72,16,16,new xt(36,new tt(4,92))),new lt(18,80,80,18,18,new xt(48,new tt(4,114))),new lt(19,88,88,20,20,new xt(56,new tt(4,144))),new lt(20,96,96,22,22,new xt(68,new tt(4,174))),new lt(21,104,104,24,24,new xt(56,new tt(6,136))),new lt(22,120,120,18,18,new xt(68,new tt(6,175))),new lt(23,132,132,20,20,new xt(62,new tt(8,163))),new lt(24,144,144,22,22,new xt(62,new tt(8,156),new tt(2,155))),new lt(25,8,18,6,16,new xt(7,new tt(1,5))),new lt(26,8,32,6,14,new xt(11,new tt(1,10))),new lt(27,12,26,10,24,new xt(14,new tt(1,16))),new lt(28,12,36,10,16,new xt(18,new tt(1,22))),new lt(29,16,36,14,16,new xt(24,new tt(1,32))),new lt(30,16,48,14,22,new xt(28,new tt(1,49)))]}}lt.VERSIONS=lt.buildVersions();class As{constructor(e){const s=e.getHeight();if(s<8||s>144||(s&1)!==0)throw new F;this.version=As.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ge(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const s=e.getHeight(),r=e.getWidth();return lt.getVersionForDimensions(s,r)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let s=0,r=4,i=0;const a=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let c=!1,x=!1,p=!1,R=!1;do if(r===a&&i===0&&!c)e[s++]=this.readCorner1(a,o)&255,r-=2,i+=2,c=!0;else if(r===a-2&&i===0&&(o&3)!==0&&!x)e[s++]=this.readCorner2(a,o)&255,r-=2,i+=2,x=!0;else if(r===a+4&&i===2&&(o&7)===0&&!p)e[s++]=this.readCorner3(a,o)&255,r-=2,i+=2,p=!0;else if(r===a-2&&i===0&&(o&7)===4&&!R)e[s++]=this.readCorner4(a,o)&255,r-=2,i+=2,R=!0;else{do r<a&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[s++]=this.readUtah(r,i,a,o)&255),r-=2,i+=2;while(r>=0&&i<o);r+=1,i+=3;do r>=0&&i<o&&!this.readMappingMatrix.get(i,r)&&(e[s++]=this.readUtah(r,i,a,o)&255),r+=2,i-=2;while(r<a&&i>=0);r+=3,i+=1}while(r<a||i<o);if(s!==this.version.getTotalCodewords())throw new F;return e}readModule(e,s,r,i){return e<0&&(e+=r,s+=4-(r+4&7)),s<0&&(s+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(s,e),this.mappingBitMatrix.get(s,e)}readUtah(e,s,r,i){let a=0;return this.readModule(e-2,s-2,r,i)&&(a|=1),a<<=1,this.readModule(e-2,s-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,s-2,r,i)&&(a|=1),a<<=1,this.readModule(e-1,s-1,r,i)&&(a|=1),a<<=1,this.readModule(e-1,s,r,i)&&(a|=1),a<<=1,this.readModule(e,s-2,r,i)&&(a|=1),a<<=1,this.readModule(e,s-1,r,i)&&(a|=1),a<<=1,this.readModule(e,s,r,i)&&(a|=1),a}readCorner1(e,s){let r=0;return this.readModule(e-1,0,e,s)&&(r|=1),r<<=1,this.readModule(e-1,1,e,s)&&(r|=1),r<<=1,this.readModule(e-1,2,e,s)&&(r|=1),r<<=1,this.readModule(0,s-2,e,s)&&(r|=1),r<<=1,this.readModule(0,s-1,e,s)&&(r|=1),r<<=1,this.readModule(1,s-1,e,s)&&(r|=1),r<<=1,this.readModule(2,s-1,e,s)&&(r|=1),r<<=1,this.readModule(3,s-1,e,s)&&(r|=1),r}readCorner2(e,s){let r=0;return this.readModule(e-3,0,e,s)&&(r|=1),r<<=1,this.readModule(e-2,0,e,s)&&(r|=1),r<<=1,this.readModule(e-1,0,e,s)&&(r|=1),r<<=1,this.readModule(0,s-4,e,s)&&(r|=1),r<<=1,this.readModule(0,s-3,e,s)&&(r|=1),r<<=1,this.readModule(0,s-2,e,s)&&(r|=1),r<<=1,this.readModule(0,s-1,e,s)&&(r|=1),r<<=1,this.readModule(1,s-1,e,s)&&(r|=1),r}readCorner3(e,s){let r=0;return this.readModule(e-1,0,e,s)&&(r|=1),r<<=1,this.readModule(e-1,s-1,e,s)&&(r|=1),r<<=1,this.readModule(0,s-3,e,s)&&(r|=1),r<<=1,this.readModule(0,s-2,e,s)&&(r|=1),r<<=1,this.readModule(0,s-1,e,s)&&(r|=1),r<<=1,this.readModule(1,s-3,e,s)&&(r|=1),r<<=1,this.readModule(1,s-2,e,s)&&(r|=1),r<<=1,this.readModule(1,s-1,e,s)&&(r|=1),r}readCorner4(e,s){let r=0;return this.readModule(e-3,0,e,s)&&(r|=1),r<<=1,this.readModule(e-2,0,e,s)&&(r|=1),r<<=1,this.readModule(e-1,0,e,s)&&(r|=1),r<<=1,this.readModule(0,s-2,e,s)&&(r|=1),r<<=1,this.readModule(0,s-1,e,s)&&(r|=1),r<<=1,this.readModule(1,s-1,e,s)&&(r|=1),r<<=1,this.readModule(2,s-1,e,s)&&(r|=1),r<<=1,this.readModule(3,s-1,e,s)&&(r|=1),r}extractDataRegion(e){const s=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==s)throw new _("Dimension of bitMatrix must match the version size");const i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),o=s/i|0,c=r/a|0,x=o*i,p=c*a,R=new ge(p,x);for(let v=0;v<o;++v){const S=v*i;for(let P=0;P<c;++P){const H=P*a;for(let Y=0;Y<i;++Y){const se=v*(i+2)+1+Y,he=S+Y;for(let ke=0;ke<a;++ke){const Ae=P*(a+2)+1+ke;if(e.get(Ae,se)){const ve=H+ke;R.set(ve,he)}}}}}return R}}class Ei{constructor(e,s){this.numDataCodewords=e,this.codewords=s}static getDataBlocks(e,s){const r=s.getECBlocks();let i=0;const a=r.getECBlocks();for(let Y of a)i+=Y.getCount();const o=new Array(i);let c=0;for(let Y of a)for(let se=0;se<Y.getCount();se++){const he=Y.getDataCodewords(),ke=r.getECCodewords()+he;o[c++]=new Ei(he,new Uint8Array(ke))}const p=o[0].codewords.length-r.getECCodewords(),R=p-1;let v=0;for(let Y=0;Y<R;Y++)for(let se=0;se<c;se++)o[se].codewords[Y]=e[v++];const S=s.getVersionNumber()===24,P=S?8:c;for(let Y=0;Y<P;Y++)o[Y].codewords[p-1]=e[v++];const H=o[0].codewords.length;for(let Y=p;Y<H;Y++)for(let se=0;se<c;se++){const he=S?(se+8)%c:se,ke=S&&he>7?Y-1:Y;o[he].codewords[ke]=e[v++]}if(v!==e.length)throw new _;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ji{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new _(""+e);let s=0,r=this.bitOffset,i=this.byteOffset;const a=this.bytes;if(r>0){const o=8-r,c=e<o?e:o,x=o-c,p=255>>8-c<<x;s=(a[i]&p)>>x,e-=c,r+=c,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)s=s<<8|a[i]&255,i++,e-=8;if(e>0){const o=8-e,c=255>>o<<o;s=s<<e|(a[i]&c)>>o,r+=e}}return this.bitOffset=r,this.byteOffset=i,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Xt;(function(b){b[b.PAD_ENCODE=0]="PAD_ENCODE",b[b.ASCII_ENCODE=1]="ASCII_ENCODE",b[b.C40_ENCODE=2]="C40_ENCODE",b[b.TEXT_ENCODE=3]="TEXT_ENCODE",b[b.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",b[b.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",b[b.BASE256_ENCODE=6]="BASE256_ENCODE"})(Xt||(Xt={}));class zs{static decode(e){const s=new ji(e),r=new Z,i=new Z,a=new Array;let o=Xt.ASCII_ENCODE;do if(o===Xt.ASCII_ENCODE)o=this.decodeAsciiSegment(s,r,i);else{switch(o){case Xt.C40_ENCODE:this.decodeC40Segment(s,r);break;case Xt.TEXT_ENCODE:this.decodeTextSegment(s,r);break;case Xt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,r);break;case Xt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,r);break;case Xt.BASE256_ENCODE:this.decodeBase256Segment(s,r,a);break;default:throw new F}o=Xt.ASCII_ENCODE}while(o!==Xt.PAD_ENCODE&&s.available()>0);return i.length()>0&&r.append(i.toString()),new Fe(e,r.toString(),a.length===0?null:a,null)}static decodeAsciiSegment(e,s,r){let i=!1;do{let a=e.readBits(8);if(a===0)throw new F;if(a<=128)return i&&(a+=128),s.append(String.fromCharCode(a-1)),Xt.ASCII_ENCODE;if(a===129)return Xt.PAD_ENCODE;if(a<=229){const o=a-130;o<10&&s.append("0"),s.append(""+o)}else switch(a){case 230:return Xt.C40_ENCODE;case 231:return Xt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:s.append("[)>05"),r.insert(0,"");break;case 237:s.append("[)>06"),r.insert(0,"");break;case 238:return Xt.ANSIX12_ENCODE;case 239:return Xt.TEXT_ENCODE;case 240:return Xt.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new F;break}}while(e.available()>0);return Xt.ASCII_ENCODE}static decodeC40Segment(e,s){let r=!1;const i=[];let a=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(let c=0;c<3;c++){const x=i[c];switch(a){case 0:if(x<3)a=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const p=this.C40_BASIC_SET_CHARS[x];r?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),r=!1):s.append(p)}else throw new F;break;case 1:r?(s.append(String.fromCharCode(x+128)),r=!1):s.append(String.fromCharCode(x)),a=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const p=this.C40_SHIFT2_SET_CHARS[x];r?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),r=!1):s.append(p)}else switch(x){case 27:s.append("");break;case 30:r=!0;break;default:throw new F}a=0;break;case 3:r?(s.append(String.fromCharCode(x+224)),r=!1):s.append(String.fromCharCode(x+96)),a=0;break;default:throw new F}}}while(e.available()>0)}static decodeTextSegment(e,s){let r=!1,i=[],a=0;do{if(e.available()===8)return;const o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),i);for(let c=0;c<3;c++){const x=i[c];switch(a){case 0:if(x<3)a=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const p=this.TEXT_BASIC_SET_CHARS[x];r?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),r=!1):s.append(p)}else throw new F;break;case 1:r?(s.append(String.fromCharCode(x+128)),r=!1):s.append(String.fromCharCode(x)),a=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const p=this.TEXT_SHIFT2_SET_CHARS[x];r?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),r=!1):s.append(p)}else switch(x){case 27:s.append("");break;case 30:r=!0;break;default:throw new F}a=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const p=this.TEXT_SHIFT3_SET_CHARS[x];r?(s.append(String.fromCharCode(p.charCodeAt(0)+128)),r=!1):s.append(p),a=0}else throw new F;break;default:throw new F}}}while(e.available()>0)}static decodeAnsiX12Segment(e,s){const r=[];do{if(e.available()===8)return;const i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(let a=0;a<3;a++){const o=r[a];switch(o){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(o<14)s.append(String.fromCharCode(o+44));else if(o<40)s.append(String.fromCharCode(o+51));else throw new F;break}}}while(e.available()>0)}static parseTwoBytes(e,s,r){let i=(e<<8)+s-1,a=Math.floor(i/1600);r[0]=a,i-=a*1600,a=Math.floor(i/40),r[1]=a,r[2]=i-a*40}static decodeEdifactSegment(e,s){do{if(e.available()<=16)return;for(let r=0;r<4;r++){let i=e.readBits(6);if(i===31){const a=8-e.getBitOffset();a!==8&&e.readBits(a);return}(i&32)===0&&(i|=64),s.append(String.fromCharCode(i))}}while(e.available()>0)}static decodeBase256Segment(e,s,r){let i=1+e.getByteOffset();const a=this.unrandomize255State(e.readBits(8),i++);let o;if(a===0?o=e.available()/8|0:a<250?o=a:o=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),o<0)throw new F;const c=new Uint8Array(o);for(let x=0;x<o;x++){if(e.available()<8)throw new F;c[x]=this.unrandomize255State(e.readBits(8),i++)}r.push(c);try{s.append(Ce.decode(c,B.ISO88591))}catch(x){throw new as("Platform does not support required encoding: "+x.message)}}static unrandomize255State(e,s){const r=149*s%255+1,i=e-r;return i>=0?i:i+256}}zs.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],zs.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],zs.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],zs.TEXT_SHIFT2_SET_CHARS=zs.C40_SHIFT2_SET_CHARS,zs.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Hn{constructor(){this.rsDecoder=new xs(rt.DATA_MATRIX_FIELD_256)}decode(e){const s=new As(e),r=s.getVersion(),i=s.readCodewords(),a=Ei.getDataBlocks(i,r);let o=0;for(let p of a)o+=p.getNumDataCodewords();const c=new Uint8Array(o),x=a.length;for(let p=0;p<x;p++){const R=a[p],v=R.getCodewords(),S=R.getNumDataCodewords();this.correctErrors(v,S);for(let P=0;P<S;P++)c[P*x+p]=v[P]}return zs.decode(c)}correctErrors(e,s){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-s)}catch{throw new W}for(let i=0;i<s;i++)e[i]=r[i]}}class Ct{constructor(e){this.image=e,this.rectangleDetector=new _s(this.image)}detect(){const e=this.rectangleDetector.detect();let s=this.detectSolid1(e);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new I;s=this.shiftToModuleCenter(s);const r=s[0],i=s[1],a=s[2],o=s[3];let c=this.transitionsBetween(r,o)+1,x=this.transitionsBetween(a,o)+1;(c&1)===1&&(c+=1),(x&1)===1&&(x+=1),4*c<7*x&&4*x<7*c&&(c=x=Math.max(c,x));let p=Ct.sampleGrid(this.image,r,i,a,o,c,x);return new cr(p,[r,i,a,o])}static shiftPoint(e,s,r){let i=(s.getX()-e.getX())/(r+1),a=(s.getY()-e.getY())/(r+1);return new Pe(e.getX()+i,e.getY()+a)}static moveAway(e,s,r){let i=e.getX(),a=e.getY();return i<s?i-=1:i+=1,a<r?a-=1:a+=1,new Pe(i,a)}detectSolid1(e){let s=e[0],r=e[1],i=e[3],a=e[2],o=this.transitionsBetween(s,r),c=this.transitionsBetween(r,i),x=this.transitionsBetween(i,a),p=this.transitionsBetween(a,s),R=o,v=[a,s,r,i];return R>c&&(R=c,v[0]=s,v[1]=r,v[2]=i,v[3]=a),R>x&&(R=x,v[0]=r,v[1]=i,v[2]=a,v[3]=s),R>p&&(v[0]=i,v[1]=a,v[2]=s,v[3]=r),v}detectSolid2(e){let s=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(s,a),c=Ct.shiftPoint(r,i,(o+1)*4),x=Ct.shiftPoint(i,r,(o+1)*4),p=this.transitionsBetween(c,s),R=this.transitionsBetween(x,a);return p<R?(e[0]=s,e[1]=r,e[2]=i,e[3]=a):(e[0]=r,e[1]=i,e[2]=a,e[3]=s),e}correctTopRight(e){let s=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(s,a),c=this.transitionsBetween(r,a),x=Ct.shiftPoint(s,r,(c+1)*4),p=Ct.shiftPoint(i,r,(o+1)*4);o=this.transitionsBetween(x,a),c=this.transitionsBetween(p,a);let R=new Pe(a.getX()+(i.getX()-r.getX())/(o+1),a.getY()+(i.getY()-r.getY())/(o+1)),v=new Pe(a.getX()+(s.getX()-r.getX())/(c+1),a.getY()+(s.getY()-r.getY())/(c+1));if(!this.isValid(R))return this.isValid(v)?v:null;if(!this.isValid(v))return R;let S=this.transitionsBetween(x,R)+this.transitionsBetween(p,R),P=this.transitionsBetween(x,v)+this.transitionsBetween(p,v);return S>P?R:v}shiftToModuleCenter(e){let s=e[0],r=e[1],i=e[2],a=e[3],o=this.transitionsBetween(s,a)+1,c=this.transitionsBetween(i,a)+1,x=Ct.shiftPoint(s,r,c*4),p=Ct.shiftPoint(i,r,o*4);o=this.transitionsBetween(x,a)+1,c=this.transitionsBetween(p,a)+1,(o&1)===1&&(o+=1),(c&1)===1&&(c+=1);let R=(s.getX()+r.getX()+i.getX()+a.getX())/4,v=(s.getY()+r.getY()+i.getY()+a.getY())/4;s=Ct.moveAway(s,R,v),r=Ct.moveAway(r,R,v),i=Ct.moveAway(i,R,v),a=Ct.moveAway(a,R,v);let S,P;return x=Ct.shiftPoint(s,r,c*4),x=Ct.shiftPoint(x,a,o*4),S=Ct.shiftPoint(r,s,c*4),S=Ct.shiftPoint(S,i,o*4),p=Ct.shiftPoint(i,a,c*4),p=Ct.shiftPoint(p,r,o*4),P=Ct.shiftPoint(a,i,c*4),P=Ct.shiftPoint(P,s,o*4),[x,S,p,P]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,s,r,i,a,o,c){return mt.getInstance().sampleGrid(e,o,c,.5,.5,o-.5,.5,o-.5,c-.5,.5,c-.5,s.getX(),s.getY(),a.getX(),a.getY(),i.getX(),i.getY(),r.getX(),r.getY())}transitionsBetween(e,s){let r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(s.getX()),o=Math.trunc(s.getY()),c=Math.abs(o-i)>Math.abs(a-r);if(c){let Y=r;r=i,i=Y,Y=a,a=o,o=Y}let x=Math.abs(a-r),p=Math.abs(o-i),R=-x/2,v=i<o?1:-1,S=r<a?1:-1,P=0,H=this.image.get(c?i:r,c?r:i);for(let Y=r,se=i;Y!==a;Y+=S){let he=this.image.get(c?se:Y,c?Y:se);if(he!==H&&(P++,H=he),R+=p,R>0){if(se===o)break;se+=v,R-=x}}return P}}class Gs{constructor(){this.decoder=new Hn}decode(e,s=null){let r,i;if(s!=null&&s.has(re.PURE_BARCODE)){const p=Gs.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(p),i=Gs.NO_POINTS}else{const p=new Ct(e.getBlackMatrix()).detect();r=this.decoder.decode(p.getBits()),i=p.getPoints()}const a=r.getRawBytes(),o=new ee(r.getText(),a,8*a.length,i,je.DATA_MATRIX,q.currentTimeMillis()),c=r.getByteSegments();c!=null&&o.putMetadata(Be.BYTE_SEGMENTS,c);const x=r.getECLevel();return x!=null&&o.putMetadata(Be.ERROR_CORRECTION_LEVEL,x),o}reset(){}static extractPureBits(e){const s=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(s==null||r==null)throw new I;const i=this.moduleSize(s,e);let a=s[1];const o=r[1];let c=s[0];const p=(r[0]-c+1)/i,R=(o-a+1)/i;if(p<=0||R<=0)throw new I;const v=i/2;a+=v,c+=v;const S=new ge(p,R);for(let P=0;P<R;P++){const H=a+P*i;for(let Y=0;Y<p;Y++)e.get(c+Y*i,H)&&S.set(Y,P)}return S}static moduleSize(e,s){const r=s.getWidth();let i=e[0];const a=e[1];for(;i<r&&s.get(i,a);)i++;if(i===r)throw new I;const o=i-e[0];if(o===0)throw new I;return o}}Gs.NO_POINTS=[];class io extends Ie{constructor(e=500){super(new Gs,e)}}var Gr;(function(b){b[b.L=0]="L",b[b.M=1]="M",b[b.Q=2]="Q",b[b.H=3]="H"})(Gr||(Gr={}));class Rt{constructor(e,s,r){this.value=e,this.stringValue=s,this.bits=r,Rt.FOR_BITS.set(r,this),Rt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return Rt.L;case"M":return Rt.M;case"Q":return Rt.Q;case"H":return Rt.H;default:throw new M(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof Rt))return!1;const s=e;return this.value===s.value}static forBits(e){if(e<0||e>=Rt.FOR_BITS.size)throw new _;return Rt.FOR_BITS.get(e)}}Rt.FOR_BITS=new Map,Rt.FOR_VALUE=new Map,Rt.L=new Rt(Gr.L,"L",1),Rt.M=new Rt(Gr.M,"M",0),Rt.Q=new Rt(Gr.Q,"Q",3),Rt.H=new Rt(Gr.H,"H",2);class es{constructor(e){this.errorCorrectionLevel=Rt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,s){return te.bitCount(e^s)}static decodeFormatInformation(e,s){const r=es.doDecodeFormatInformation(e,s);return r!==null?r:es.doDecodeFormatInformation(e^es.FORMAT_INFO_MASK_QR,s^es.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,s){let r=Number.MAX_SAFE_INTEGER,i=0;for(const a of es.FORMAT_INFO_DECODE_LOOKUP){const o=a[0];if(o===e||o===s)return new es(a[1]);let c=es.numBitsDiffering(e,o);c<r&&(i=a[1],r=c),e!==s&&(c=es.numBitsDiffering(s,o),c<r&&(i=a[1],r=c))}return r<=3?new es(i):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof es))return!1;const s=e;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}es.FORMAT_INFO_MASK_QR=21522,es.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ae{constructor(e,...s){this.ecCodewordsPerBlock=e,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const s=this.ecBlocks;for(const r of s)e+=r.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class T{constructor(e,s){this.count=e,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ze{constructor(e,s,...r){this.versionNumber=e,this.alignmentPatternCenters=s,this.ecBlocks=r;let i=0;const a=r[0].getECCodewordsPerBlock(),o=r[0].getECBlocks();for(const c of o)i+=c.getCount()*(c.getDataCodewords()+a);this.totalCodewords=i}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new F;try{return this.getVersionForNumber((e-17)/4)}catch{throw new F}}static getVersionForNumber(e){if(e<1||e>40)throw new _;return ze.VERSIONS[e-1]}static decodeVersionInformation(e){let s=Number.MAX_SAFE_INTEGER,r=0;for(let i=0;i<ze.VERSION_DECODE_INFO.length;i++){const a=ze.VERSION_DECODE_INFO[i];if(a===e)return ze.getVersionForNumber(i+7);const o=es.numBitsDiffering(e,a);o<s&&(r=i+7,s=o)}return s<=3?ze.getVersionForNumber(r):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),s=new ge(e);s.setRegion(0,0,9,9),s.setRegion(e-8,0,8,9),s.setRegion(0,e-8,9,8);const r=this.alignmentPatternCenters.length;for(let i=0;i<r;i++){const a=this.alignmentPatternCenters[i]-2;for(let o=0;o<r;o++)i===0&&(o===0||o===r-1)||i===r-1&&o===0||s.setRegion(this.alignmentPatternCenters[o]-2,a,5,5)}return s.setRegion(6,9,1,e-17),s.setRegion(9,6,e-17,1),this.versionNumber>6&&(s.setRegion(e-11,0,3,6),s.setRegion(0,e-11,6,3)),s}toString(){return""+this.versionNumber}}ze.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ze.VERSIONS=[new ze(1,new Int32Array(0),new ae(7,new T(1,19)),new ae(10,new T(1,16)),new ae(13,new T(1,13)),new ae(17,new T(1,9))),new ze(2,Int32Array.from([6,18]),new ae(10,new T(1,34)),new ae(16,new T(1,28)),new ae(22,new T(1,22)),new ae(28,new T(1,16))),new ze(3,Int32Array.from([6,22]),new ae(15,new T(1,55)),new ae(26,new T(1,44)),new ae(18,new T(2,17)),new ae(22,new T(2,13))),new ze(4,Int32Array.from([6,26]),new ae(20,new T(1,80)),new ae(18,new T(2,32)),new ae(26,new T(2,24)),new ae(16,new T(4,9))),new ze(5,Int32Array.from([6,30]),new ae(26,new T(1,108)),new ae(24,new T(2,43)),new ae(18,new T(2,15),new T(2,16)),new ae(22,new T(2,11),new T(2,12))),new ze(6,Int32Array.from([6,34]),new ae(18,new T(2,68)),new ae(16,new T(4,27)),new ae(24,new T(4,19)),new ae(28,new T(4,15))),new ze(7,Int32Array.from([6,22,38]),new ae(20,new T(2,78)),new ae(18,new T(4,31)),new ae(18,new T(2,14),new T(4,15)),new ae(26,new T(4,13),new T(1,14))),new ze(8,Int32Array.from([6,24,42]),new ae(24,new T(2,97)),new ae(22,new T(2,38),new T(2,39)),new ae(22,new T(4,18),new T(2,19)),new ae(26,new T(4,14),new T(2,15))),new ze(9,Int32Array.from([6,26,46]),new ae(30,new T(2,116)),new ae(22,new T(3,36),new T(2,37)),new ae(20,new T(4,16),new T(4,17)),new ae(24,new T(4,12),new T(4,13))),new ze(10,Int32Array.from([6,28,50]),new ae(18,new T(2,68),new T(2,69)),new ae(26,new T(4,43),new T(1,44)),new ae(24,new T(6,19),new T(2,20)),new ae(28,new T(6,15),new T(2,16))),new ze(11,Int32Array.from([6,30,54]),new ae(20,new T(4,81)),new ae(30,new T(1,50),new T(4,51)),new ae(28,new T(4,22),new T(4,23)),new ae(24,new T(3,12),new T(8,13))),new ze(12,Int32Array.from([6,32,58]),new ae(24,new T(2,92),new T(2,93)),new ae(22,new T(6,36),new T(2,37)),new ae(26,new T(4,20),new T(6,21)),new ae(28,new T(7,14),new T(4,15))),new ze(13,Int32Array.from([6,34,62]),new ae(26,new T(4,107)),new ae(22,new T(8,37),new T(1,38)),new ae(24,new T(8,20),new T(4,21)),new ae(22,new T(12,11),new T(4,12))),new ze(14,Int32Array.from([6,26,46,66]),new ae(30,new T(3,115),new T(1,116)),new ae(24,new T(4,40),new T(5,41)),new ae(20,new T(11,16),new T(5,17)),new ae(24,new T(11,12),new T(5,13))),new ze(15,Int32Array.from([6,26,48,70]),new ae(22,new T(5,87),new T(1,88)),new ae(24,new T(5,41),new T(5,42)),new ae(30,new T(5,24),new T(7,25)),new ae(24,new T(11,12),new T(7,13))),new ze(16,Int32Array.from([6,26,50,74]),new ae(24,new T(5,98),new T(1,99)),new ae(28,new T(7,45),new T(3,46)),new ae(24,new T(15,19),new T(2,20)),new ae(30,new T(3,15),new T(13,16))),new ze(17,Int32Array.from([6,30,54,78]),new ae(28,new T(1,107),new T(5,108)),new ae(28,new T(10,46),new T(1,47)),new ae(28,new T(1,22),new T(15,23)),new ae(28,new T(2,14),new T(17,15))),new ze(18,Int32Array.from([6,30,56,82]),new ae(30,new T(5,120),new T(1,121)),new ae(26,new T(9,43),new T(4,44)),new ae(28,new T(17,22),new T(1,23)),new ae(28,new T(2,14),new T(19,15))),new ze(19,Int32Array.from([6,30,58,86]),new ae(28,new T(3,113),new T(4,114)),new ae(26,new T(3,44),new T(11,45)),new ae(26,new T(17,21),new T(4,22)),new ae(26,new T(9,13),new T(16,14))),new ze(20,Int32Array.from([6,34,62,90]),new ae(28,new T(3,107),new T(5,108)),new ae(26,new T(3,41),new T(13,42)),new ae(30,new T(15,24),new T(5,25)),new ae(28,new T(15,15),new T(10,16))),new ze(21,Int32Array.from([6,28,50,72,94]),new ae(28,new T(4,116),new T(4,117)),new ae(26,new T(17,42)),new ae(28,new T(17,22),new T(6,23)),new ae(30,new T(19,16),new T(6,17))),new ze(22,Int32Array.from([6,26,50,74,98]),new ae(28,new T(2,111),new T(7,112)),new ae(28,new T(17,46)),new ae(30,new T(7,24),new T(16,25)),new ae(24,new T(34,13))),new ze(23,Int32Array.from([6,30,54,78,102]),new ae(30,new T(4,121),new T(5,122)),new ae(28,new T(4,47),new T(14,48)),new ae(30,new T(11,24),new T(14,25)),new ae(30,new T(16,15),new T(14,16))),new ze(24,Int32Array.from([6,28,54,80,106]),new ae(30,new T(6,117),new T(4,118)),new ae(28,new T(6,45),new T(14,46)),new ae(30,new T(11,24),new T(16,25)),new ae(30,new T(30,16),new T(2,17))),new ze(25,Int32Array.from([6,32,58,84,110]),new ae(26,new T(8,106),new T(4,107)),new ae(28,new T(8,47),new T(13,48)),new ae(30,new T(7,24),new T(22,25)),new ae(30,new T(22,15),new T(13,16))),new ze(26,Int32Array.from([6,30,58,86,114]),new ae(28,new T(10,114),new T(2,115)),new ae(28,new T(19,46),new T(4,47)),new ae(28,new T(28,22),new T(6,23)),new ae(30,new T(33,16),new T(4,17))),new ze(27,Int32Array.from([6,34,62,90,118]),new ae(30,new T(8,122),new T(4,123)),new ae(28,new T(22,45),new T(3,46)),new ae(30,new T(8,23),new T(26,24)),new ae(30,new T(12,15),new T(28,16))),new ze(28,Int32Array.from([6,26,50,74,98,122]),new ae(30,new T(3,117),new T(10,118)),new ae(28,new T(3,45),new T(23,46)),new ae(30,new T(4,24),new T(31,25)),new ae(30,new T(11,15),new T(31,16))),new ze(29,Int32Array.from([6,30,54,78,102,126]),new ae(30,new T(7,116),new T(7,117)),new ae(28,new T(21,45),new T(7,46)),new ae(30,new T(1,23),new T(37,24)),new ae(30,new T(19,15),new T(26,16))),new ze(30,Int32Array.from([6,26,52,78,104,130]),new ae(30,new T(5,115),new T(10,116)),new ae(28,new T(19,47),new T(10,48)),new ae(30,new T(15,24),new T(25,25)),new ae(30,new T(23,15),new T(25,16))),new ze(31,Int32Array.from([6,30,56,82,108,134]),new ae(30,new T(13,115),new T(3,116)),new ae(28,new T(2,46),new T(29,47)),new ae(30,new T(42,24),new T(1,25)),new ae(30,new T(23,15),new T(28,16))),new ze(32,Int32Array.from([6,34,60,86,112,138]),new ae(30,new T(17,115)),new ae(28,new T(10,46),new T(23,47)),new ae(30,new T(10,24),new T(35,25)),new ae(30,new T(19,15),new T(35,16))),new ze(33,Int32Array.from([6,30,58,86,114,142]),new ae(30,new T(17,115),new T(1,116)),new ae(28,new T(14,46),new T(21,47)),new ae(30,new T(29,24),new T(19,25)),new ae(30,new T(11,15),new T(46,16))),new ze(34,Int32Array.from([6,34,62,90,118,146]),new ae(30,new T(13,115),new T(6,116)),new ae(28,new T(14,46),new T(23,47)),new ae(30,new T(44,24),new T(7,25)),new ae(30,new T(59,16),new T(1,17))),new ze(35,Int32Array.from([6,30,54,78,102,126,150]),new ae(30,new T(12,121),new T(7,122)),new ae(28,new T(12,47),new T(26,48)),new ae(30,new T(39,24),new T(14,25)),new ae(30,new T(22,15),new T(41,16))),new ze(36,Int32Array.from([6,24,50,76,102,128,154]),new ae(30,new T(6,121),new T(14,122)),new ae(28,new T(6,47),new T(34,48)),new ae(30,new T(46,24),new T(10,25)),new ae(30,new T(2,15),new T(64,16))),new ze(37,Int32Array.from([6,28,54,80,106,132,158]),new ae(30,new T(17,122),new T(4,123)),new ae(28,new T(29,46),new T(14,47)),new ae(30,new T(49,24),new T(10,25)),new ae(30,new T(24,15),new T(46,16))),new ze(38,Int32Array.from([6,32,58,84,110,136,162]),new ae(30,new T(4,122),new T(18,123)),new ae(28,new T(13,46),new T(32,47)),new ae(30,new T(48,24),new T(14,25)),new ae(30,new T(42,15),new T(32,16))),new ze(39,Int32Array.from([6,26,54,82,110,138,166]),new ae(30,new T(20,117),new T(4,118)),new ae(28,new T(40,47),new T(7,48)),new ae(30,new T(43,24),new T(22,25)),new ae(30,new T(10,15),new T(67,16))),new ze(40,Int32Array.from([6,30,58,86,114,142,170]),new ae(30,new T(19,118),new T(6,119)),new ae(28,new T(18,47),new T(31,48)),new ae(30,new T(34,24),new T(34,25)),new ae(30,new T(20,15),new T(61,16)))];var Wt;(function(b){b[b.DATA_MASK_000=0]="DATA_MASK_000",b[b.DATA_MASK_001=1]="DATA_MASK_001",b[b.DATA_MASK_010=2]="DATA_MASK_010",b[b.DATA_MASK_011=3]="DATA_MASK_011",b[b.DATA_MASK_100=4]="DATA_MASK_100",b[b.DATA_MASK_101=5]="DATA_MASK_101",b[b.DATA_MASK_110=6]="DATA_MASK_110",b[b.DATA_MASK_111=7]="DATA_MASK_111"})(Wt||(Wt={}));class st{constructor(e,s){this.value=e,this.isMasked=s}unmaskBitMatrix(e,s){for(let r=0;r<s;r++)for(let i=0;i<s;i++)this.isMasked(r,i)&&e.flip(i,r)}}st.values=new Map([[Wt.DATA_MASK_000,new st(Wt.DATA_MASK_000,(b,e)=>(b+e&1)===0)],[Wt.DATA_MASK_001,new st(Wt.DATA_MASK_001,(b,e)=>(b&1)===0)],[Wt.DATA_MASK_010,new st(Wt.DATA_MASK_010,(b,e)=>e%3===0)],[Wt.DATA_MASK_011,new st(Wt.DATA_MASK_011,(b,e)=>(b+e)%3===0)],[Wt.DATA_MASK_100,new st(Wt.DATA_MASK_100,(b,e)=>(Math.floor(b/2)+Math.floor(e/3)&1)===0)],[Wt.DATA_MASK_101,new st(Wt.DATA_MASK_101,(b,e)=>b*e%6===0)],[Wt.DATA_MASK_110,new st(Wt.DATA_MASK_110,(b,e)=>b*e%6<3)],[Wt.DATA_MASK_111,new st(Wt.DATA_MASK_111,(b,e)=>(b+e+b*e%3&1)===0)]]);class na{constructor(e){const s=e.getHeight();if(s<21||(s&3)!==1)throw new F;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let a=0;a<6;a++)e=this.copyBit(a,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let a=5;a>=0;a--)e=this.copyBit(8,a,e);const s=this.bitMatrix.getHeight();let r=0;const i=s-7;for(let a=s-1;a>=i;a--)r=this.copyBit(8,a,r);for(let a=s-8;a<s;a++)r=this.copyBit(a,8,r);if(this.parsedFormatInfo=es.decodeFormatInformation(e,r),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),s=Math.floor((e-17)/4);if(s<=6)return ze.getVersionForNumber(s);let r=0;const i=e-11;for(let o=5;o>=0;o--)for(let c=e-9;c>=i;c--)r=this.copyBit(c,o,r);let a=ze.decodeVersionInformation(r);if(a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;r=0;for(let o=5;o>=0;o--)for(let c=e-9;c>=i;c--)r=this.copyBit(o,c,r);if(a=ze.decodeVersionInformation(r),a!==null&&a.getDimensionForVersion()===e)return this.parsedVersion=a,a;throw new F}copyBit(e,s,r){return(this.isMirror?this.bitMatrix.get(s,e):this.bitMatrix.get(e,s))?r<<1|1:r<<1}readCodewords(){const e=this.readFormatInformation(),s=this.readVersion(),r=st.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);const a=s.buildFunctionPattern();let o=!0;const c=new Uint8Array(s.getTotalCodewords());let x=0,p=0,R=0;for(let v=i-1;v>0;v-=2){v===6&&v--;for(let S=0;S<i;S++){const P=o?i-1-S:S;for(let H=0;H<2;H++)a.get(v-H,P)||(R++,p<<=1,this.bitMatrix.get(v-H,P)&&(p|=1),R===8&&(c[x++]=p,R=0,p=0))}o=!o}if(x!==s.getTotalCodewords())throw new F;return c}remask(){if(this.parsedFormatInfo===null)return;const e=st.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,s)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let s=0,r=e.getWidth();s<r;s++)for(let i=s+1,a=e.getHeight();i<a;i++)e.get(s,i)!==e.get(i,s)&&(e.flip(i,s),e.flip(s,i))}}class zn{constructor(e,s){this.numDataCodewords=e,this.codewords=s}static getDataBlocks(e,s,r){if(e.length!==s.getTotalCodewords())throw new _;const i=s.getECBlocksForLevel(r);let a=0;const o=i.getECBlocks();for(const H of o)a+=H.getCount();const c=new Array(a);let x=0;for(const H of o)for(let Y=0;Y<H.getCount();Y++){const se=H.getDataCodewords(),he=i.getECCodewordsPerBlock()+se;c[x++]=new zn(se,new Uint8Array(he))}const p=c[0].codewords.length;let R=c.length-1;for(;R>=0&&c[R].codewords.length!==p;)R--;R++;const v=p-i.getECCodewordsPerBlock();let S=0;for(let H=0;H<v;H++)for(let Y=0;Y<x;Y++)c[Y].codewords[H]=e[S++];for(let H=R;H<x;H++)c[H].codewords[v]=e[S++];const P=c[0].codewords.length;for(let H=v;H<P;H++)for(let Y=0;Y<x;Y++){const se=Y<R?H:H+1;c[Y].codewords[se]=e[S++]}return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ws;(function(b){b[b.TERMINATOR=0]="TERMINATOR",b[b.NUMERIC=1]="NUMERIC",b[b.ALPHANUMERIC=2]="ALPHANUMERIC",b[b.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",b[b.BYTE=4]="BYTE",b[b.ECI=5]="ECI",b[b.KANJI=6]="KANJI",b[b.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",b[b.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",b[b.HANZI=9]="HANZI"})(ws||(ws={}));class Ge{constructor(e,s,r,i){this.value=e,this.stringValue=s,this.characterCountBitsForVersions=r,this.bits=i,Ge.FOR_BITS.set(i,this),Ge.FOR_VALUE.set(e,this)}static forBits(e){const s=Ge.FOR_BITS.get(e);if(s===void 0)throw new _;return s}getCharacterCountBits(e){const s=e.getVersionNumber();let r;return s<=9?r=0:s<=26?r=1:r=2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Ge))return!1;const s=e;return this.value===s.value}toString(){return this.stringValue}}Ge.FOR_BITS=new Map,Ge.FOR_VALUE=new Map,Ge.TERMINATOR=new Ge(ws.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ge.NUMERIC=new Ge(ws.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ge.ALPHANUMERIC=new Ge(ws.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ge.STRUCTURED_APPEND=new Ge(ws.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ge.BYTE=new Ge(ws.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ge.ECI=new Ge(ws.ECI,"ECI",Int32Array.from([0,0,0]),7),Ge.KANJI=new Ge(ws.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ge.FNC1_FIRST_POSITION=new Ge(ws.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ge.FNC1_SECOND_POSITION=new Ge(ws.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ge.HANZI=new Ge(ws.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class At{static decode(e,s,r,i){const a=new ji(e);let o=new Z;const c=new Array;let x=-1,p=-1;try{let R=null,v=!1,S;do{if(a.available()<4)S=Ge.TERMINATOR;else{const P=a.readBits(4);S=Ge.forBits(P)}switch(S){case Ge.TERMINATOR:break;case Ge.FNC1_FIRST_POSITION:case Ge.FNC1_SECOND_POSITION:v=!0;break;case Ge.STRUCTURED_APPEND:if(a.available()<16)throw new F;x=a.readBits(8),p=a.readBits(8);break;case Ge.ECI:const P=At.parseECIValue(a);if(R=Q.getCharacterSetECIByValue(P),R===null)throw new F;break;case Ge.HANZI:const H=a.readBits(4),Y=a.readBits(S.getCharacterCountBits(s));H===At.GB2312_SUBSET&&At.decodeHanziSegment(a,o,Y);break;default:const se=a.readBits(S.getCharacterCountBits(s));switch(S){case Ge.NUMERIC:At.decodeNumericSegment(a,o,se);break;case Ge.ALPHANUMERIC:At.decodeAlphanumericSegment(a,o,se,v);break;case Ge.BYTE:At.decodeByteSegment(a,o,se,R,c,i);break;case Ge.KANJI:At.decodeKanjiSegment(a,o,se);break;default:throw new F}break}}while(S!==Ge.TERMINATOR)}catch{throw new F}return new Fe(e,o.toString(),c.length===0?null:c,r===null?null:r.toString(),x,p)}static decodeHanziSegment(e,s,r){if(r*13>e.available())throw new F;const i=new Uint8Array(2*r);let a=0;for(;r>0;){const o=e.readBits(13);let c=o/96<<8&4294967295|o%96;c<959?c+=41377:c+=42657,i[a]=c>>8&255,i[a+1]=c&255,a+=2,r--}try{s.append(Ce.decode(i,B.GB2312))}catch(o){throw new F(o)}}static decodeKanjiSegment(e,s,r){if(r*13>e.available())throw new F;const i=new Uint8Array(2*r);let a=0;for(;r>0;){const o=e.readBits(13);let c=o/192<<8&4294967295|o%192;c<7936?c+=33088:c+=49472,i[a]=c>>8,i[a+1]=c,a+=2,r--}try{s.append(Ce.decode(i,B.SHIFT_JIS))}catch(o){throw new F(o)}}static decodeByteSegment(e,s,r,i,a,o){if(8*r>e.available())throw new F;const c=new Uint8Array(r);for(let p=0;p<r;p++)c[p]=e.readBits(8);let x;i===null?x=B.guessEncoding(c,o):x=i.getName();try{s.append(Ce.decode(c,x))}catch(p){throw new F(p)}a.push(c)}static toAlphaNumericChar(e){if(e>=At.ALPHANUMERIC_CHARS.length)throw new F;return At.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,s,r,i){const a=s.length();for(;r>1;){if(e.available()<11)throw new F;const o=e.readBits(11);s.append(At.toAlphaNumericChar(Math.floor(o/45))),s.append(At.toAlphaNumericChar(o%45)),r-=2}if(r===1){if(e.available()<6)throw new F;s.append(At.toAlphaNumericChar(e.readBits(6)))}if(i)for(let o=a;o<s.length();o++)s.charAt(o)==="%"&&(o<s.length()-1&&s.charAt(o+1)==="%"?s.deleteCharAt(o+1):s.setCharAt(o,""))}static decodeNumericSegment(e,s,r){for(;r>=3;){if(e.available()<10)throw new F;const i=e.readBits(10);if(i>=1e3)throw new F;s.append(At.toAlphaNumericChar(Math.floor(i/100))),s.append(At.toAlphaNumericChar(Math.floor(i/10)%10)),s.append(At.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new F;const i=e.readBits(7);if(i>=100)throw new F;s.append(At.toAlphaNumericChar(Math.floor(i/10))),s.append(At.toAlphaNumericChar(i%10))}else if(r===1){if(e.available()<4)throw new F;const i=e.readBits(4);if(i>=10)throw new F;s.append(At.toAlphaNumericChar(i))}}static parseECIValue(e){const s=e.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const r=e.readBits(8);return(s&63)<<8&4294967295|r}if((s&224)===192){const r=e.readBits(16);return(s&31)<<16&4294967295|r}throw new F}}At.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",At.GB2312_SUBSET=1;class wi{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const s=e[0];e[0]=e[2],e[2]=s}}class Ri{constructor(){this.rsDecoder=new xs(rt.QR_CODE_FIELD_256)}decodeBooleanArray(e,s){return this.decodeBitMatrix(ge.parseFromBooleanArray(e),s)}decodeBitMatrix(e,s){const r=new na(e);let i=null;try{return this.decodeBitMatrixParser(r,s)}catch(a){i=a}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const a=this.decodeBitMatrixParser(r,s);return a.setOther(new wi(!0)),a}catch(a){throw i!==null?i:a}}decodeBitMatrixParser(e,s){const r=e.readVersion(),i=e.readFormatInformation().getErrorCorrectionLevel(),a=e.readCodewords(),o=zn.getDataBlocks(a,r,i);let c=0;for(const R of o)c+=R.getNumDataCodewords();const x=new Uint8Array(c);let p=0;for(const R of o){const v=R.getCodewords(),S=R.getNumDataCodewords();this.correctErrors(v,S);for(let P=0;P<S;P++)x[p++]=v[P]}return At.decode(x,r,i,s)}correctErrors(e,s){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-s)}catch{throw new W}for(let i=0;i<s;i++)e[i]=r[i]}}class Vr extends Pe{constructor(e,s,r){super(e,s),this.estimatedModuleSize=r}aboutEquals(e,s,r){if(Math.abs(s-this.getY())<=e&&Math.abs(r-this.getX())<=e){const i=Math.abs(e-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1}combineEstimate(e,s,r){const i=(this.getX()+s)/2,a=(this.getY()+e)/2,o=(this.estimatedModuleSize+r)/2;return new Vr(i,a,o)}}class Vs{constructor(e,s,r,i,a,o,c){this.image=e,this.startX=s,this.startY=r,this.width=i,this.height=a,this.moduleSize=o,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,s=this.height,r=this.width,i=e+r,a=this.startY+s/2,o=new Int32Array(3),c=this.image;for(let x=0;x<s;x++){const p=a+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));o[0]=0,o[1]=0,o[2]=0;let R=e;for(;R<i&&!c.get(R,p);)R++;let v=0;for(;R<i;){if(c.get(R,p))if(v===1)o[1]++;else if(v===2){if(this.foundPatternCross(o)){const S=this.handlePossibleCenter(o,p,R);if(S!==null)return S}o[0]=o[2],o[1]=1,o[2]=0,v=1}else o[++v]++;else v===1&&v++,o[v]++;R++}if(this.foundPatternCross(o)){const S=this.handlePossibleCenter(o,p,i);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new I}static centerFromEnd(e,s){return s-e[2]-e[1]/2}foundPatternCross(e){const s=this.moduleSize,r=s/2;for(let i=0;i<3;i++)if(Math.abs(s-e[i])>=r)return!1;return!0}crossCheckVertical(e,s,r,i){const a=this.image,o=a.getHeight(),c=this.crossCheckStateCount;c[0]=0,c[1]=0,c[2]=0;let x=e;for(;x>=0&&a.get(s,x)&&c[1]<=r;)c[1]++,x--;if(x<0||c[1]>r)return NaN;for(;x>=0&&!a.get(s,x)&&c[0]<=r;)c[0]++,x--;if(c[0]>r)return NaN;for(x=e+1;x<o&&a.get(s,x)&&c[1]<=r;)c[1]++,x++;if(x===o||c[1]>r)return NaN;for(;x<o&&!a.get(s,x)&&c[2]<=r;)c[2]++,x++;if(c[2]>r)return NaN;const p=c[0]+c[1]+c[2];return 5*Math.abs(p-i)>=2*i?NaN:this.foundPatternCross(c)?Vs.centerFromEnd(c,x):NaN}handlePossibleCenter(e,s,r){const i=e[0]+e[1]+e[2],a=Vs.centerFromEnd(e,r),o=this.crossCheckVertical(s,a,2*e[1],i);if(!isNaN(o)){const c=(e[0]+e[1]+e[2])/3;for(const p of this.possibleCenters)if(p.aboutEquals(c,o,a))return p.combineEstimate(o,a,c);const x=new Vr(a,o,c);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class er extends Pe{constructor(e,s,r,i){super(e,s),this.estimatedModuleSize=r,this.count=i,i===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,s,r){if(Math.abs(s-this.getY())<=e&&Math.abs(r-this.getX())<=e){const i=Math.abs(e-this.estimatedModuleSize);return i<=1||i<=this.estimatedModuleSize}return!1}combineEstimate(e,s,r){const i=this.count+1,a=(this.count*this.getX()+s)/i,o=(this.count*this.getY()+e)/i,c=(this.count*this.estimatedModuleSize+r)/i;return new er(a,o,c,i)}}class jr{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Dt{constructor(e,s){this.image=e,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const s=e!=null&&e.get(re.TRY_HARDER)!==void 0,r=e!=null&&e.get(re.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),o=i.getWidth();let c=Math.floor(3*a/(4*Dt.MAX_MODULES));(c<Dt.MIN_SKIP||s)&&(c=Dt.MIN_SKIP);let x=!1;const p=new Int32Array(5);for(let v=c-1;v<a&&!x;v+=c){p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0;let S=0;for(let P=0;P<o;P++)if(i.get(P,v))(S&1)===1&&S++,p[S]++;else if((S&1)===0)if(S===4)if(Dt.foundPatternCross(p)){if(this.handlePossibleCenter(p,v,P,r)===!0)if(c=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const Y=this.findRowSkip();Y>p[2]&&(v+=Y-p[2]-c,P=o-1)}else{p[0]=p[2],p[1]=p[3],p[2]=p[4],p[3]=1,p[4]=0,S=3;continue}S=0,p[0]=0,p[1]=0,p[2]=0,p[3]=0,p[4]=0}else p[0]=p[2],p[1]=p[3],p[2]=p[4],p[3]=1,p[4]=0,S=3;else p[++S]++;else p[S]++;Dt.foundPatternCross(p)&&this.handlePossibleCenter(p,v,o,r)===!0&&(c=p[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Pe.orderBestPatterns(R),new jr(R)}static centerFromEnd(e,s){return s-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let s=0;for(let a=0;a<5;a++){const o=e[a];if(o===0)return!1;s+=o}if(s<7)return!1;const r=s/7,i=r/2;return Math.abs(r-e[0])<i&&Math.abs(r-e[1])<i&&Math.abs(3*r-e[2])<3*i&&Math.abs(r-e[3])<i&&Math.abs(r-e[4])<i}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,s,r,i){const a=this.getCrossCheckStateCount();let o=0;const c=this.image;for(;e>=o&&s>=o&&c.get(s-o,e-o);)a[2]++,o++;if(e<o||s<o)return!1;for(;e>=o&&s>=o&&!c.get(s-o,e-o)&&a[1]<=r;)a[1]++,o++;if(e<o||s<o||a[1]>r)return!1;for(;e>=o&&s>=o&&c.get(s-o,e-o)&&a[0]<=r;)a[0]++,o++;if(a[0]>r)return!1;const x=c.getHeight(),p=c.getWidth();for(o=1;e+o<x&&s+o<p&&c.get(s+o,e+o);)a[2]++,o++;if(e+o>=x||s+o>=p)return!1;for(;e+o<x&&s+o<p&&!c.get(s+o,e+o)&&a[3]<r;)a[3]++,o++;if(e+o>=x||s+o>=p||a[3]>=r)return!1;for(;e+o<x&&s+o<p&&c.get(s+o,e+o)&&a[4]<r;)a[4]++,o++;if(a[4]>=r)return!1;const R=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(R-i)<2*i&&Dt.foundPatternCross(a)}crossCheckVertical(e,s,r,i){const a=this.image,o=a.getHeight(),c=this.getCrossCheckStateCount();let x=e;for(;x>=0&&a.get(s,x);)c[2]++,x--;if(x<0)return NaN;for(;x>=0&&!a.get(s,x)&&c[1]<=r;)c[1]++,x--;if(x<0||c[1]>r)return NaN;for(;x>=0&&a.get(s,x)&&c[0]<=r;)c[0]++,x--;if(c[0]>r)return NaN;for(x=e+1;x<o&&a.get(s,x);)c[2]++,x++;if(x===o)return NaN;for(;x<o&&!a.get(s,x)&&c[3]<r;)c[3]++,x++;if(x===o||c[3]>=r)return NaN;for(;x<o&&a.get(s,x)&&c[4]<r;)c[4]++,x++;if(c[4]>=r)return NaN;const p=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(p-i)>=2*i?NaN:Dt.foundPatternCross(c)?Dt.centerFromEnd(c,x):NaN}crossCheckHorizontal(e,s,r,i){const a=this.image,o=a.getWidth(),c=this.getCrossCheckStateCount();let x=e;for(;x>=0&&a.get(x,s);)c[2]++,x--;if(x<0)return NaN;for(;x>=0&&!a.get(x,s)&&c[1]<=r;)c[1]++,x--;if(x<0||c[1]>r)return NaN;for(;x>=0&&a.get(x,s)&&c[0]<=r;)c[0]++,x--;if(c[0]>r)return NaN;for(x=e+1;x<o&&a.get(x,s);)c[2]++,x++;if(x===o)return NaN;for(;x<o&&!a.get(x,s)&&c[3]<r;)c[3]++,x++;if(x===o||c[3]>=r)return NaN;for(;x<o&&a.get(x,s)&&c[4]<r;)c[4]++,x++;if(c[4]>=r)return NaN;const p=c[0]+c[1]+c[2]+c[3]+c[4];return 5*Math.abs(p-i)>=i?NaN:Dt.foundPatternCross(c)?Dt.centerFromEnd(c,x):NaN}handlePossibleCenter(e,s,r,i){const a=e[0]+e[1]+e[2]+e[3]+e[4];let o=Dt.centerFromEnd(e,r),c=this.crossCheckVertical(s,Math.floor(o),e[2],a);if(!isNaN(c)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(c),e[2],a),!isNaN(o)&&(!i||this.crossCheckDiagonal(Math.floor(c),Math.floor(o),e[2],a)))){const x=a/7;let p=!1;const R=this.possibleCenters;for(let v=0,S=R.length;v<S;v++){const P=R[v];if(P.aboutEquals(x,c,o)){R[v]=P.combineEstimate(c,o,x),p=!0;break}}if(!p){const v=new er(o,c,x);R.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const r of this.possibleCenters)if(r.getCount()>=Dt.CENTER_QUORUM)if(s==null)s=r;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-r.getX())-Math.abs(s.getY()-r.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,s=0;const r=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=Dt.CENTER_QUORUM&&(e++,s+=o.getEstimatedModuleSize());if(e<3)return!1;const i=s/r;let a=0;for(const o of this.possibleCenters)a+=Math.abs(o.getEstimatedModuleSize()-i);return a<=.05*s}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new I;const s=this.possibleCenters;let r;if(e>3){let i=0,a=0;for(const x of this.possibleCenters){const p=x.getEstimatedModuleSize();i+=p,a+=p*p}r=i/e;let o=Math.sqrt(a/e-r*r);s.sort((x,p)=>{const R=Math.abs(p.getEstimatedModuleSize()-r),v=Math.abs(x.getEstimatedModuleSize()-r);return R<v?-1:R>v?1:0});const c=Math.max(.2*r,o);for(let x=0;x<s.length&&s.length>3;x++){const p=s[x];Math.abs(p.getEstimatedModuleSize()-r)>c&&(s.splice(x,1),x--)}}if(s.length>3){let i=0;for(const a of s)i+=a.getEstimatedModuleSize();r=i/s.length,s.sort((a,o)=>{if(o.getCount()===a.getCount()){const c=Math.abs(o.getEstimatedModuleSize()-r),x=Math.abs(a.getEstimatedModuleSize()-r);return c<x?1:c>x?-1:0}else return o.getCount()-a.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Dt.CENTER_QUORUM=2,Dt.MIN_SKIP=3,Dt.MAX_MODULES=57;class ur{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(re.NEED_RESULT_POINT_CALLBACK);const r=new Dt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(r)}processFinderPatternInfo(e){const s=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(s,r,i);if(a<1)throw new I("No pattern found in proccess finder.");const o=ur.computeDimension(s,r,i,a),c=ze.getProvisionalVersionForDimension(o),x=c.getDimensionForVersion()-7;let p=null;if(c.getAlignmentPatternCenters().length>0){const P=r.getX()-s.getX()+i.getX(),H=r.getY()-s.getY()+i.getY(),Y=1-3/x,se=Math.floor(s.getX()+Y*(P-s.getX())),he=Math.floor(s.getY()+Y*(H-s.getY()));for(let ke=4;ke<=16;ke<<=1)try{p=this.findAlignmentInRegion(a,se,he,ke);break}catch(Ae){if(!(Ae instanceof I))throw Ae}}const R=ur.createTransform(s,r,i,p,o),v=ur.sampleGrid(this.image,R,o);let S;return p===null?S=[i,s,r]:S=[i,s,r,p],new cr(v,S)}static createTransform(e,s,r,i,a){const o=a-3.5;let c,x,p,R;return i!==null?(c=i.getX(),x=i.getY(),p=o-3,R=p):(c=s.getX()-e.getX()+r.getX(),x=s.getY()-e.getY()+r.getY(),p=o,R=o),Oe.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,p,R,3.5,o,e.getX(),e.getY(),s.getX(),s.getY(),c,x,r.getX(),r.getY())}static sampleGrid(e,s,r){return mt.getInstance().sampleGridWithTransform(e,r,r,s)}static computeDimension(e,s,r,i){const a=nt.round(Pe.distance(e,s)/i),o=nt.round(Pe.distance(e,r)/i);let c=Math.floor((a+o)/2)+7;switch(c&3){case 0:c++;break;case 2:c--;break;case 3:throw new I("Dimensions could be not found.")}return c}calculateModuleSize(e,s,r){return(this.calculateModuleSizeOneWay(e,s)+this.calculateModuleSizeOneWay(e,r))/2}calculateModuleSizeOneWay(e,s){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(s.getX()),Math.floor(s.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14}sizeOfBlackWhiteBlackRunBothWays(e,s,r,i){let a=this.sizeOfBlackWhiteBlackRun(e,s,r,i),o=1,c=e-(r-e);c<0?(o=e/(e-c),c=0):c>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(c-e),c=this.image.getWidth()-1);let x=Math.floor(s-(i-s)*o);return o=1,x<0?(o=s/(s-x),x=0):x>=this.image.getHeight()&&(o=(this.image.getHeight()-1-s)/(x-s),x=this.image.getHeight()-1),c=Math.floor(e+(c-e)*o),a+=this.sizeOfBlackWhiteBlackRun(e,s,c,x),a-1}sizeOfBlackWhiteBlackRun(e,s,r,i){const a=Math.abs(i-s)>Math.abs(r-e);if(a){let P=e;e=s,s=P,P=r,r=i,i=P}const o=Math.abs(r-e),c=Math.abs(i-s);let x=-o/2;const p=e<r?1:-1,R=s<i?1:-1;let v=0;const S=r+p;for(let P=e,H=s;P!==S;P+=p){const Y=a?H:P,se=a?P:H;if(v===1===this.image.get(Y,se)){if(v===2)return nt.distance(P,H,e,s);v++}if(x+=c,x>0){if(H===i)break;H+=R,x-=o}}return v===2?nt.distance(r+p,i,e,s):NaN}findAlignmentInRegion(e,s,r,i){const a=Math.floor(i*e),o=Math.max(0,s-a),c=Math.min(this.image.getWidth()-1,s+a);if(c-o<e*3)throw new I("Alignment top exceeds estimated module size.");const x=Math.max(0,r-a),p=Math.min(this.image.getHeight()-1,r+a);if(p-x<e*3)throw new I("Alignment bottom exceeds estimated module size.");return new Vs(this.image,o,x,c-o,p-x,e,this.resultPointCallback).find()}}class hs{constructor(){this.decoder=new Ri}getDecoder(){return this.decoder}decode(e,s){let r,i;if(s!=null&&s.get(re.PURE_BARCODE)!==void 0){const x=hs.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(x,s),i=hs.NO_POINTS}else{const x=new ur(e.getBlackMatrix()).detect(s);r=this.decoder.decodeBitMatrix(x.getBits(),s),i=x.getPoints()}r.getOther()instanceof wi&&r.getOther().applyMirroredCorrection(i);const a=new ee(r.getText(),r.getRawBytes(),void 0,i,je.QR_CODE,void 0),o=r.getByteSegments();o!==null&&a.putMetadata(Be.BYTE_SEGMENTS,o);const c=r.getECLevel();return c!==null&&a.putMetadata(Be.ERROR_CORRECTION_LEVEL,c),r.hasStructuredAppend()&&(a.putMetadata(Be.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),a.putMetadata(Be.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),a}reset(){}static extractPureBits(e){const s=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(s===null||r===null)throw new I;const i=this.moduleSize(s,e);let a=s[1],o=r[1],c=s[0],x=r[0];if(c>=x||a>=o)throw new I;if(o-a!==x-c&&(x=c+(o-a),x>=e.getWidth()))throw new I;const p=Math.round((x-c+1)/i),R=Math.round((o-a+1)/i);if(p<=0||R<=0)throw new I;if(R!==p)throw new I;const v=Math.floor(i/2);a+=v,c+=v;const S=c+Math.floor((p-1)*i)-x;if(S>0){if(S>v)throw new I;c-=S}const P=a+Math.floor((R-1)*i)-o;if(P>0){if(P>v)throw new I;a-=P}const H=new ge(p,R);for(let Y=0;Y<R;Y++){const se=a+Math.floor(Y*i);for(let he=0;he<p;he++)e.get(c+Math.floor(he*i),se)&&H.set(he,Y)}return H}static moduleSize(e,s){const r=s.getHeight(),i=s.getWidth();let a=e[0],o=e[1],c=!0,x=0;for(;a<i&&o<r;){if(c!==s.get(a,o)){if(++x===5)break;c=!c}a++,o++}if(a===i||o===r)throw new I;return(a-e[0])/7}}hs.NO_POINTS=new Array;class Qe{PDF417Common(){}static getBitCountSum(e){return nt.sum(e)}static toIntArray(e){if(e==null||!e.length)return Qe.EMPTY_INT_ARRAY;const s=new Int32Array(e.length);let r=0;for(const i of e)s[r++]=i;return s}static getCodeword(e){const s=ue.binarySearch(Qe.SYMBOL_TABLE,e&262143);return s<0?-1:(Qe.CODEWORD_TABLE[s]-1)%Qe.NUMBER_OF_CODEWORDS}}Qe.NUMBER_OF_CODEWORDS=929,Qe.MAX_CODEWORDS_IN_BARCODE=Qe.NUMBER_OF_CODEWORDS-1,Qe.MIN_ROWS_IN_BARCODE=3,Qe.MAX_ROWS_IN_BARCODE=90,Qe.MODULES_IN_CODEWORD=17,Qe.MODULES_IN_STOP_PATTERN=18,Qe.BARS_IN_MODULE=8,Qe.EMPTY_INT_ARRAY=new Int32Array([]),Qe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Qe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class ia{constructor(e,s){this.bits=e,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class $e{static detectMultiple(e,s,r){let i=e.getBlackMatrix(),a=$e.detect(r,i);return a.length||(i=i.clone(),i.rotate180(),a=$e.detect(r,i)),new ia(i,a)}static detect(e,s){const r=new Array;let i=0,a=0,o=!1;for(;i<s.getHeight();){const c=$e.findVertices(s,i,a);if(c[0]==null&&c[3]==null){if(!o)break;o=!1,a=0;for(const x of r)x[1]!=null&&(i=Math.trunc(Math.max(i,x[1].getY()))),x[3]!=null&&(i=Math.max(i,Math.trunc(x[3].getY())));i+=$e.ROW_STEP;continue}if(o=!0,r.push(c),!e)break;c[2]!=null?(a=Math.trunc(c[2].getX()),i=Math.trunc(c[2].getY())):(a=Math.trunc(c[4].getX()),i=Math.trunc(c[4].getY()))}return r}static findVertices(e,s,r){const i=e.getHeight(),a=e.getWidth(),o=new Array(8);return $e.copyToResult(o,$e.findRowsWithPattern(e,i,a,s,r,$e.START_PATTERN),$e.INDEXES_START_PATTERN),o[4]!=null&&(r=Math.trunc(o[4].getX()),s=Math.trunc(o[4].getY())),$e.copyToResult(o,$e.findRowsWithPattern(e,i,a,s,r,$e.STOP_PATTERN),$e.INDEXES_STOP_PATTERN),o}static copyToResult(e,s,r){for(let i=0;i<r.length;i++)e[r[i]]=s[i]}static findRowsWithPattern(e,s,r,i,a,o){const c=new Array(4);let x=!1;const p=new Int32Array(o.length);for(;i<s;i+=$e.ROW_STEP){let v=$e.findGuardPattern(e,a,i,r,!1,o,p);if(v!=null){for(;i>0;){const S=$e.findGuardPattern(e,a,--i,r,!1,o,p);if(S!=null)v=S;else{i++;break}}c[0]=new Pe(v[0],i),c[1]=new Pe(v[1],i),x=!0;break}}let R=i+1;if(x){let v=0,S=Int32Array.from([Math.trunc(c[0].getX()),Math.trunc(c[1].getX())]);for(;R<s;R++){const P=$e.findGuardPattern(e,S[0],R,r,!1,o,p);if(P!=null&&Math.abs(S[0]-P[0])<$e.MAX_PATTERN_DRIFT&&Math.abs(S[1]-P[1])<$e.MAX_PATTERN_DRIFT)S=P,v=0;else{if(v>$e.SKIPPED_ROW_COUNT_MAX)break;v++}}R-=v+1,c[2]=new Pe(S[0],R),c[3]=new Pe(S[1],R)}return R-i<$e.BARCODE_MIN_HEIGHT&&ue.fill(c,null),c}static findGuardPattern(e,s,r,i,a,o,c){ue.fillWithin(c,0,c.length,0);let x=s,p=0;for(;e.get(x,r)&&x>0&&p++<$e.MAX_PIXEL_DRIFT;)x--;let R=x,v=0,S=o.length;for(let P=a;R<i;R++)if(e.get(R,r)!==P)c[v]++;else{if(v===S-1){if($e.patternMatchVariance(c,o,$e.MAX_INDIVIDUAL_VARIANCE)<$e.MAX_AVG_VARIANCE)return new Int32Array([x,R]);x+=c[0]+c[1],q.arraycopy(c,2,c,0,v-1),c[v-1]=0,c[v]=0,v--}else v++;c[v]=1,P=!P}return v===S-1&&$e.patternMatchVariance(c,o,$e.MAX_INDIVIDUAL_VARIANCE)<$e.MAX_AVG_VARIANCE?new Int32Array([x,R-1]):null}static patternMatchVariance(e,s,r){let i=e.length,a=0,o=0;for(let p=0;p<i;p++)a+=e[p],o+=s[p];if(a<o)return 1/0;let c=a/o;r*=c;let x=0;for(let p=0;p<i;p++){let R=e[p],v=s[p]*c,S=R>v?R-v:v-R;if(S>r)return 1/0;x+=S}return x/a}}$e.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),$e.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),$e.MAX_AVG_VARIANCE=.42,$e.MAX_INDIVIDUAL_VARIANCE=.8,$e.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),$e.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),$e.MAX_PIXEL_DRIFT=3,$e.MAX_PATTERN_DRIFT=5,$e.SKIPPED_ROW_COUNT_MAX=25,$e.ROW_STEP=5,$e.BARCODE_MIN_HEIGHT=10;class ts{constructor(e,s){if(s.length===0)throw new _;this.field=e;let r=s.length;if(r>1&&s[0]===0){let i=1;for(;i<r&&s[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),q.arraycopy(s,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let i=0;for(let a of this.coefficients)i=this.field.add(i,a);return i}let s=this.coefficients[0],r=this.coefficients.length;for(let i=1;i<r;i++)s=this.field.add(this.field.multiply(e,s),this.coefficients[i]);return s}add(e){if(!this.field.equals(e.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let s=this.coefficients,r=e.coefficients;if(s.length>r.length){let o=s;s=r,r=o}let i=new Int32Array(r.length),a=r.length-s.length;q.arraycopy(r,0,i,0,a);for(let o=a;o<r.length;o++)i[o]=this.field.add(s[o-a],r[o]);return new ts(this.field,i)}subtract(e){if(!this.field.equals(e.field))throw new _("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof ts?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new _("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new ts(this.field,new Int32Array([0]));let s=this.coefficients,r=s.length,i=e.coefficients,a=i.length,o=new Int32Array(r+a-1);for(let c=0;c<r;c++){let x=s[c];for(let p=0;p<a;p++)o[c+p]=this.field.add(o[c+p],this.field.multiply(x,i[p]))}return new ts(this.field,o)}negative(){let e=this.coefficients.length,s=new Int32Array(e);for(let r=0;r<e;r++)s[r]=this.field.subtract(0,this.coefficients[r]);return new ts(this.field,s)}multiplyScalar(e){if(e===0)return new ts(this.field,new Int32Array([0]));if(e===1)return this;let s=this.coefficients.length,r=new Int32Array(s);for(let i=0;i<s;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new ts(this.field,r)}multiplyByMonomial(e,s){if(e<0)throw new _;if(s===0)return new ts(this.field,new Int32Array([0]));let r=this.coefficients.length,i=new Int32Array(r+e);for(let a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],s);return new ts(this.field,i)}toString(){let e=new Z;for(let s=this.getDegree();s>=0;s--){let r=this.getCoefficient(s);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(s===0||r!==1)&&e.append(r),s!==0&&(s===1?e.append("x"):(e.append("x^"),e.append(s))))}return e.toString()}}class aa{add(e,s){return(e+s)%this.modulus}subtract(e,s){return(this.modulus+e-s)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new _;return this.logTable[e]}inverse(e){if(e===0)throw new Ss;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,s){return e===0||s===0?0:this.expTable[(this.logTable[e]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Xr extends aa{constructor(e,s){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let r=1;for(let i=0;i<e;i++)this.expTable[i]=r,r=r*s%e;for(let i=0;i<e-1;i++)this.logTable[this.expTable[i]]=i;this.zero=new ts(this,new Int32Array([0])),this.one=new ts(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,s){if(e<0)throw new _;if(s===0)return this.zero;let r=new Int32Array(e+1);return r[0]=s,new ts(this,r)}}Xr.PDF417_GF=new Xr(Qe.NUMBER_OF_CODEWORDS,3);class bi{constructor(){this.field=Xr.PDF417_GF}decode(e,s,r){let i=new ts(this.field,e),a=new Int32Array(s),o=!1;for(let H=s;H>0;H--){let Y=i.evaluateAt(this.field.exp(H));a[s-H]=Y,Y!==0&&(o=!0)}if(!o)return 0;let c=this.field.getOne();if(r!=null)for(const H of r){let Y=this.field.exp(e.length-1-H),se=new ts(this.field,new Int32Array([this.field.subtract(0,Y),1]));c=c.multiply(se)}let x=new ts(this.field,a),p=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),x,s),R=p[0],v=p[1],S=this.findErrorLocations(R),P=this.findErrorMagnitudes(v,R,S);for(let H=0;H<S.length;H++){let Y=e.length-1-this.field.log(S[H]);if(Y<0)throw W.getChecksumInstance();e[Y]=this.field.subtract(e[Y],P[H])}return S.length}runEuclideanAlgorithm(e,s,r){if(e.getDegree()<s.getDegree()){let S=e;e=s,s=S}let i=e,a=s,o=this.field.getZero(),c=this.field.getOne();for(;a.getDegree()>=Math.round(r/2);){let S=i,P=o;if(i=a,o=c,i.isZero())throw W.getChecksumInstance();a=S;let H=this.field.getZero(),Y=i.getCoefficient(i.getDegree()),se=this.field.inverse(Y);for(;a.getDegree()>=i.getDegree()&&!a.isZero();){let he=a.getDegree()-i.getDegree(),ke=this.field.multiply(a.getCoefficient(a.getDegree()),se);H=H.add(this.field.buildMonomial(he,ke)),a=a.subtract(i.multiplyByMonomial(he,ke))}c=H.multiply(o).subtract(P).negative()}let x=c.getCoefficient(0);if(x===0)throw W.getChecksumInstance();let p=this.field.inverse(x),R=c.multiply(p),v=a.multiply(p);return[R,v]}findErrorLocations(e){let s=e.getDegree(),r=new Int32Array(s),i=0;for(let a=1;a<this.field.getSize()&&i<s;a++)e.evaluateAt(a)===0&&(r[i]=this.field.inverse(a),i++);if(i!==s)throw W.getChecksumInstance();return r}findErrorMagnitudes(e,s,r){let i=s.getDegree(),a=new Int32Array(i);for(let p=1;p<=i;p++)a[i-p]=this.field.multiply(p,s.getCoefficient(p));let o=new ts(this.field,a),c=r.length,x=new Int32Array(c);for(let p=0;p<c;p++){let R=this.field.inverse(r[p]),v=this.field.subtract(0,e.evaluateAt(R)),S=this.field.inverse(o.evaluateAt(R));x[p]=this.field.multiply(v,S)}return x}}class kr{constructor(e,s,r,i,a){e instanceof kr?this.constructor_2(e):this.constructor_1(e,s,r,i,a)}constructor_1(e,s,r,i,a){const o=s==null||r==null,c=i==null||a==null;if(o&&c)throw new I;o?(s=new Pe(0,i.getY()),r=new Pe(0,a.getY())):c&&(i=new Pe(e.getWidth()-1,s.getY()),a=new Pe(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=s,this.bottomLeft=r,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(s.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(s.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),a.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,s){return e==null?s:s==null?e:new kr(e.image,e.topLeft,e.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(e,s,r){let i=this.topLeft,a=this.bottomLeft,o=this.topRight,c=this.bottomRight;if(e>0){let x=r?this.topLeft:this.topRight,p=Math.trunc(x.getY()-e);p<0&&(p=0);let R=new Pe(x.getX(),p);r?i=R:o=R}if(s>0){let x=r?this.bottomLeft:this.bottomRight,p=Math.trunc(x.getY()+s);p>=this.image.getHeight()&&(p=this.image.getHeight()-1);let R=new Pe(x.getX(),p);r?a=R:c=R}return new kr(this.image,i,a,o,c)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class En{constructor(e,s,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=s,this.rowCountLowerPart=r,this.rowCount=s+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class dr{constructor(){this.buffer=""}static form(e,s){let r=-1;function i(o,c,x,p,R,v){if(o==="%%")return"%";if(s[++r]===void 0)return;o=p?parseInt(p.substr(1)):void 0;let S=R?parseInt(R.substr(1)):void 0,P;switch(v){case"s":P=s[r];break;case"c":P=s[r][0];break;case"f":P=parseFloat(s[r]).toFixed(o);break;case"p":P=parseFloat(s[r]).toPrecision(o);break;case"e":P=parseFloat(s[r]).toExponential(o);break;case"x":P=parseInt(s[r]).toString(S||16);break;case"d":P=parseFloat(parseInt(s[r],S||10).toPrecision(o)).toFixed(0);break}P=typeof P=="object"?JSON.stringify(P):(+P).toString(S);let H=parseInt(x),Y=x&&x[0]+""=="0"?"0":" ";for(;P.length<H;)P=c!==void 0?P+Y:Y+P;return P}let a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)}format(e,...s){this.buffer+=dr.form(e,s)}toString(){return this.buffer}}class tr{constructor(e){this.boundingBox=new kr(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let s=this.getCodeword(e);if(s!=null)return s;for(let r=1;r<tr.MAX_NEARBY_DISTANCE;r++){let i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(s=this.codewords[i],s!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(s=this.codewords[i],s!=null)))return s}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,s){this.codewords[this.imageRowToCodewordIndex(e)]=s}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new dr;let s=0;for(const r of this.codewords){if(r==null){e.format("%3d:    |   %n",s++);continue}e.format("%3d: %3d|%3d%n",s++,r.getRowNumber(),r.getValue())}return e.toString()}}tr.MAX_NEARBY_DISTANCE=5;class wr{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let s=this.values.get(e);s==null&&(s=0),s++,this.values.set(e,s)}getValue(){let e=-1,s=new Array;for(const[r,i]of this.values.entries()){const a={getKey:()=>r,getValue:()=>i};a.getValue()>e?(e=a.getValue(),s=[],s.push(a.getKey())):a.getValue()===e&&s.push(a.getKey())}return Qe.toIntArray(s)}getConfidence(e){return this.values.get(e)}}class oa extends tr{constructor(e,s){super(e),this._isLeft=s}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,e);let r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),x=-1,p=1,R=0;for(let v=o;v<c;v++){if(s[v]==null)continue;let S=s[v],P=S.getRowNumber()-x;if(P===0)R++;else if(P===1)p=Math.max(p,R),R=1,x=S.getRowNumber();else if(P<0||S.getRowNumber()>=e.getRowCount()||P>v)s[v]=null;else{let H;p>2?H=(p-2)*P:H=P;let Y=H>=v;for(let se=1;se<=H&&!Y;se++)Y=s[v-se]!=null;Y?s[v]=null:(x=S.getRowNumber(),R=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let s=new Int32Array(e.getRowCount());for(let r of this.getCodewords())if(r!=null){let i=r.getRowNumber();if(i>=s.length)continue;s[i]++}return s}adjustIncompleteIndicatorColumnRowNumbers(e){let s=this.getBoundingBox(),r=this._isLeft?s.getTopLeft():s.getTopRight(),i=this._isLeft?s.getBottomLeft():s.getBottomRight(),a=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(i.getY())),c=this.getCodewords(),x=-1;for(let p=a;p<o;p++){if(c[p]==null)continue;let R=c[p];R.setRowNumberAsRowIndicatorColumn();let v=R.getRowNumber()-x;v===0||(v===1?x=R.getRowNumber():R.getRowNumber()>=e.getRowCount()?c[p]=null:x=R.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),s=new wr,r=new wr,i=new wr,a=new wr;for(let c of e){if(c==null)continue;c.setRowNumberAsRowIndicatorColumn();let x=c.getValue()%30,p=c.getRowNumber();switch(this._isLeft||(p+=2),p%3){case 0:r.setValue(x*3+1);break;case 1:a.setValue(x/3),i.setValue(x%3);break;case 2:s.setValue(x+1);break}}if(s.getValue().length===0||r.getValue().length===0||i.getValue().length===0||a.getValue().length===0||s.getValue()[0]<1||r.getValue()[0]+i.getValue()[0]<Qe.MIN_ROWS_IN_BARCODE||r.getValue()[0]+i.getValue()[0]>Qe.MAX_ROWS_IN_BARCODE)return null;let o=new En(s.getValue()[0],r.getValue()[0],i.getValue()[0],a.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,s){for(let r=0;r<e.length;r++){let i=e[r];if(e[r]==null)continue;let a=i.getValue()%30,o=i.getRowNumber();if(o>s.getRowCount()){e[r]=null;continue}switch(this._isLeft||(o+=2),o%3){case 0:a*3+1!==s.getRowCountUpperPart()&&(e[r]=null);break;case 1:(Math.trunc(a/3)!==s.getErrorCorrectionLevel()||a%3!==s.getRowCountLowerPart())&&(e[r]=null);break;case 2:a+1!==s.getColumnCount()&&(e[r]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class jn{constructor(e,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=Qe.MAX_CODEWORDS_IN_BARCODE,s;do s=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let r=this.detectionResultColumns[s].getCodewords();for(let i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(s,i,r))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++)if(e[r]!=null&&s[r]!=null&&e[r].getRowNumber()===s[r].getRowNumber())for(let i=1;i<=this.barcodeColumnCount;i++){let a=this.detectionResultColumns[i].getCodewords()[r];a!=null&&(a.setRowNumber(e[r].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<s.length;r++){if(s[r]==null)continue;let i=s[r].getRowNumber(),a=0;for(let o=this.barcodeColumnCount+1;o>0&&a<this.ADJUST_ROW_NUMBER_SKIP;o--){let c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=jn.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,s=this.detectionResultColumns[0].getCodewords();for(let r=0;r<s.length;r++){if(s[r]==null)continue;let i=s[r].getRowNumber(),a=0;for(let o=1;o<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;o++){let c=this.detectionResultColumns[o].getCodewords()[r];c!=null&&(a=jn.adjustRowNumberIfValid(i,a,c),c.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,s,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),s=0):++s),s}adjustRowNumbers(e,s,r){if(!this.detectionResultColumns[e-1])return;let i=r[s],a=this.detectionResultColumns[e-1].getCodewords(),o=a;this.detectionResultColumns[e+1]!=null&&(o=this.detectionResultColumns[e+1].getCodewords());let c=new Array(14);c[2]=a[s],c[3]=o[s],s>0&&(c[0]=r[s-1],c[4]=a[s-1],c[5]=o[s-1]),s>1&&(c[8]=r[s-2],c[10]=a[s-2],c[11]=o[s-2]),s<r.length-1&&(c[1]=r[s+1],c[6]=a[s+1],c[7]=o[s+1]),s<r.length-2&&(c[9]=r[s+2],c[12]=a[s+2],c[13]=o[s+2]);for(let x of c)if(jn.adjustRowNumber(i,x))return}static adjustRowNumber(e,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===e.getBucket()?(e.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,s){this.detectionResultColumns[e]=s}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new dr;for(let r=0;r<e.getCodewords().length;r++){s.format("CW %3d:",r);for(let i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){s.format("    |   ");continue}let a=this.detectionResultColumns[i].getCodewords()[r];if(a==null){s.format("    |   ");continue}s.format(" %3d|%3d",a.getRowNumber(),a.getValue())}s.format("%n")}return s.toString()}}class Ar{constructor(e,s,r,i){this.rowNumber=Ar.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(s),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Ar.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Ar.BARCODE_ROW_UNKNOWN=-1;class ss{static initialize(){for(let e=0;e<Qe.SYMBOL_TABLE.length;e++){let s=Qe.SYMBOL_TABLE[e],r=s&1;for(let i=0;i<Qe.BARS_IN_MODULE;i++){let a=0;for(;(s&1)===r;)a+=1,s>>=1;r=s&1,ss.RATIOS_TABLE[e]||(ss.RATIOS_TABLE[e]=new Array(Qe.BARS_IN_MODULE)),ss.RATIOS_TABLE[e][Qe.BARS_IN_MODULE-i-1]=Math.fround(a/Qe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let s=ss.getDecodedCodewordValue(ss.sampleBitCounts(e));return s!==-1?s:ss.getClosestDecodedValue(e)}static sampleBitCounts(e){let s=nt.sum(e),r=new Int32Array(Qe.BARS_IN_MODULE),i=0,a=0;for(let o=0;o<Qe.MODULES_IN_CODEWORD;o++){let c=s/(2*Qe.MODULES_IN_CODEWORD)+o*s/Qe.MODULES_IN_CODEWORD;a+e[i]<=c&&(a+=e[i],i++),r[i]++}return r}static getDecodedCodewordValue(e){let s=ss.getBitValue(e);return Qe.getCodeword(s)===-1?-1:s}static getBitValue(e){let s=0;for(let r=0;r<e.length;r++)for(let i=0;i<e[r];i++)s=s<<1|(r%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(e){let s=nt.sum(e),r=new Array(Qe.BARS_IN_MODULE);if(s>1)for(let o=0;o<r.length;o++)r[o]=Math.fround(e[o]/s);let i=Ks.MAX_VALUE,a=-1;this.bSymbolTableReady||ss.initialize();for(let o=0;o<ss.RATIOS_TABLE.length;o++){let c=0,x=ss.RATIOS_TABLE[o];for(let p=0;p<Qe.BARS_IN_MODULE;p++){let R=Math.fround(x[p]-r[p]);if(c+=Math.fround(R*R),c>=i)break}c<i&&(i=c,a=Qe.SYMBOL_TABLE[o])}return a}}ss.bSymbolTableReady=!1,ss.RATIOS_TABLE=new Array(Qe.SYMBOL_TABLE.length).map(b=>new Array(Qe.BARS_IN_MODULE));class Gn{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class vi{static parseLong(e,s=void 0){return parseInt(e,s)}}class xr extends w{}xr.kind="NullPointerException";class Ni{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,s,r){if(e==null)throw new xr;if(s<0||s>e.length||r<0||s+r>e.length||s+r<0)throw new L;if(r===0)return;for(let i=0;i<r;i++)this.write(e[s+i])}flush(){}close(){}}class Vn extends w{}class la extends Ni{constructor(e=32){if(super(),this.count=0,e<0)throw new _("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let r=this.buf.length<<1;if(r-e<0&&(r=e),r<0){if(e<0)throw new Vn;r=te.MAX_VALUE}this.buf=ue.copyOfUint8Array(this.buf,r)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,s,r){if(s<0||s>e.length||r<0||s+r-e.length>0)throw new L;this.ensureCapacity(this.count+r),q.arraycopy(e,s,this.buf,this.count,r),this.count+=r}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ue.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var ht;(function(b){b[b.ALPHA=0]="ALPHA",b[b.LOWER=1]="LOWER",b[b.MIXED=2]="MIXED",b[b.PUNCT=3]="PUNCT",b[b.ALPHA_SHIFT=4]="ALPHA_SHIFT",b[b.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ht||(ht={}));function wn(){if(typeof window<"u")return window.BigInt||null;if(typeof commonjsGlobal<"u")return commonjsGlobal.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Rn;function Ht(b){if(typeof Rn>"u"&&(Rn=wn()),Rn===null)throw new Error("BigInt is not supported!");return Rn(b)}function Yr(){let b=[];b[0]=Ht(1);let e=Ht(900);b[1]=e;for(let s=2;s<16;s++)b[s]=b[s-1]*e;return b}class pe{static decode(e,s){let r=new Z(""),i=Q.ISO8859_1;r.enableDecoding(i);let a=1,o=e[a++],c=new Gn;for(;a<e[0];){switch(o){case pe.TEXT_COMPACTION_MODE_LATCH:a=pe.textCompaction(e,a,r);break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:a=pe.byteCompaction(o,e,i,a,r);break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[a++]);break;case pe.NUMERIC_COMPACTION_MODE_LATCH:a=pe.numericCompaction(e,a,r);break;case pe.ECI_CHARSET:Q.getCharacterSetECIByValue(e[a++]);break;case pe.ECI_GENERAL_PURPOSE:a+=2;break;case pe.ECI_USER_DEFINED:a++;break;case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=pe.decodeMacroBlock(e,a,c);break;case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:throw new F;default:a--,a=pe.textCompaction(e,a,r);break}if(a<e.length)o=e[a++];else throw F.getFormatInstance()}if(r.length()===0)throw F.getFormatInstance();let x=new Fe(null,r.toString(),null,s);return x.setOther(c),x}static decodeMacroBlock(e,s,r){if(s+pe.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw F.getFormatInstance();let i=new Int32Array(pe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let c=0;c<pe.NUMBER_OF_SEQUENCE_CODEWORDS;c++,s++)i[c]=e[s];r.setSegmentIndex(te.parseInt(pe.decodeBase900toBase10(i,pe.NUMBER_OF_SEQUENCE_CODEWORDS)));let a=new Z;s=pe.textCompaction(e,s,a),r.setFileId(a.toString());let o=-1;for(e[s]===pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=s+1);s<e[0];)switch(e[s]){case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,e[s]){case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let c=new Z;s=pe.textCompaction(e,s+1,c),r.setFileName(c.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new Z;s=pe.textCompaction(e,s+1,x),r.setSender(x.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let p=new Z;s=pe.textCompaction(e,s+1,p),r.setAddressee(p.toString());break;case pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new Z;s=pe.numericCompaction(e,s+1,R),r.setSegmentCount(te.parseInt(R.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let v=new Z;s=pe.numericCompaction(e,s+1,v),r.setTimestamp(vi.parseLong(v.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new Z;s=pe.numericCompaction(e,s+1,S),r.setChecksum(te.parseInt(S.toString()));break;case pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let P=new Z;s=pe.numericCompaction(e,s+1,P),r.setFileSize(vi.parseLong(P.toString()));break;default:throw F.getFormatInstance()}break;case pe.MACRO_PDF417_TERMINATOR:s++,r.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(o!==-1){let c=s-o;r.isLastSegment()&&c--,r.setOptionalData(ue.copyOfRange(e,o,o+c))}return s}static textCompaction(e,s,r){let i=new Int32Array((e[0]-s)*2),a=new Int32Array((e[0]-s)*2),o=0,c=!1;for(;s<e[0]&&!c;){let x=e[s++];if(x<pe.TEXT_COMPACTION_MODE_LATCH)i[o]=x/30,i[o+1]=x%30,o+=2;else switch(x){case pe.TEXT_COMPACTION_MODE_LATCH:i[o++]=pe.TEXT_COMPACTION_MODE_LATCH;break;case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:s--,c=!0;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[o]=pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=e[s++],a[o]=x,o++;break}}return pe.decodeTextCompaction(i,a,o,r),s}static decodeTextCompaction(e,s,r,i){let a=ht.ALPHA,o=ht.ALPHA,c=0;for(;c<r;){let x=e[c],p="";switch(a){case ht.ALPHA:if(x<26)p=String.fromCharCode(65+x);else switch(x){case 26:p=" ";break;case pe.LL:a=ht.LOWER;break;case pe.ML:a=ht.MIXED;break;case pe.PS:o=a,a=ht.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(s[c]);break;case pe.TEXT_COMPACTION_MODE_LATCH:a=ht.ALPHA;break}break;case ht.LOWER:if(x<26)p=String.fromCharCode(97+x);else switch(x){case 26:p=" ";break;case pe.AS:o=a,a=ht.ALPHA_SHIFT;break;case pe.ML:a=ht.MIXED;break;case pe.PS:o=a,a=ht.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(s[c]);break;case pe.TEXT_COMPACTION_MODE_LATCH:a=ht.ALPHA;break}break;case ht.MIXED:if(x<pe.PL)p=pe.MIXED_CHARS[x];else switch(x){case pe.PL:a=ht.PUNCT;break;case 26:p=" ";break;case pe.LL:a=ht.LOWER;break;case pe.AL:a=ht.ALPHA;break;case pe.PS:o=a,a=ht.PUNCT_SHIFT;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(s[c]);break;case pe.TEXT_COMPACTION_MODE_LATCH:a=ht.ALPHA;break}break;case ht.PUNCT:if(x<pe.PAL)p=pe.PUNCT_CHARS[x];else switch(x){case pe.PAL:a=ht.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(s[c]);break;case pe.TEXT_COMPACTION_MODE_LATCH:a=ht.ALPHA;break}break;case ht.ALPHA_SHIFT:if(a=o,x<26)p=String.fromCharCode(65+x);else switch(x){case 26:p=" ";break;case pe.TEXT_COMPACTION_MODE_LATCH:a=ht.ALPHA;break}break;case ht.PUNCT_SHIFT:if(a=o,x<pe.PAL)p=pe.PUNCT_CHARS[x];else switch(x){case pe.PAL:a=ht.ALPHA;break;case pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(s[c]);break;case pe.TEXT_COMPACTION_MODE_LATCH:a=ht.ALPHA;break}break}p!==""&&i.append(p),c++}}static byteCompaction(e,s,r,i,a){let o=new la,c=0,x=0,p=!1;switch(e){case pe.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),v=s[i++];for(;i<s[0]&&!p;)switch(R[c++]=v,x=900*x+v,v=s[i++],v){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:i--,p=!0;break;default:if(c%5===0&&c>0){for(let S=0;S<6;++S)o.write(Number(Ht(x)>>Ht(8*(5-S))));x=0,c=0}break}i===s[0]&&v<pe.TEXT_COMPACTION_MODE_LATCH&&(R[c++]=v);for(let S=0;S<c;S++)o.write(R[S]);break;case pe.BYTE_COMPACTION_MODE_LATCH_6:for(;i<s[0]&&!p;){let S=s[i++];if(S<pe.TEXT_COMPACTION_MODE_LATCH)c++,x=900*x+S;else switch(S){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.NUMERIC_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:i--,p=!0;break}if(c%5===0&&c>0){for(let P=0;P<6;++P)o.write(Number(Ht(x)>>Ht(8*(5-P))));x=0,c=0}}break}return a.append(Ce.decode(o.toByteArray(),r)),i}static numericCompaction(e,s,r){let i=0,a=!1,o=new Int32Array(pe.MAX_NUMERIC_CODEWORDS);for(;s<e[0]&&!a;){let c=e[s++];if(s===e[0]&&(a=!0),c<pe.TEXT_COMPACTION_MODE_LATCH)o[i]=c,i++;else switch(c){case pe.TEXT_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH:case pe.BYTE_COMPACTION_MODE_LATCH_6:case pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case pe.MACRO_PDF417_TERMINATOR:s--,a=!0;break}(i%pe.MAX_NUMERIC_CODEWORDS===0||c===pe.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(r.append(pe.decodeBase900toBase10(o,i)),i=0)}return s}static decodeBase900toBase10(e,s){let r=Ht(0);for(let a=0;a<s;a++)r+=pe.EXP900[s-a-1]*Ht(e[a]);let i=r.toString();if(i.charAt(0)!=="1")throw new F;return i.substring(1)}}pe.TEXT_COMPACTION_MODE_LATCH=900,pe.BYTE_COMPACTION_MODE_LATCH=901,pe.NUMERIC_COMPACTION_MODE_LATCH=902,pe.BYTE_COMPACTION_MODE_LATCH_6=924,pe.ECI_USER_DEFINED=925,pe.ECI_GENERAL_PURPOSE=926,pe.ECI_CHARSET=927,pe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,pe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,pe.MACRO_PDF417_TERMINATOR=922,pe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,pe.MAX_NUMERIC_CODEWORDS=15,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,pe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,pe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,pe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,pe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,pe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,pe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,pe.PL=25,pe.LL=27,pe.AS=27,pe.ML=28,pe.AL=28,pe.PS=29,pe.PAL=29,pe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,pe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",pe.EXP900=wn()?Yr():[],pe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class et{constructor(){}static decode(e,s,r,i,a,o,c){let x=new kr(e,s,r,i,a),p=null,R=null,v;for(let H=!0;;H=!1){if(s!=null&&(p=et.getRowIndicatorColumn(e,x,s,!0,o,c)),i!=null&&(R=et.getRowIndicatorColumn(e,x,i,!1,o,c)),v=et.merge(p,R),v==null)throw I.getNotFoundInstance();let Y=v.getBoundingBox();if(H&&Y!=null&&(Y.getMinY()<x.getMinY()||Y.getMaxY()>x.getMaxY()))x=Y;else break}v.setBoundingBox(x);let S=v.getBarcodeColumnCount()+1;v.setDetectionResultColumn(0,p),v.setDetectionResultColumn(S,R);let P=p!=null;for(let H=1;H<=S;H++){let Y=P?H:S-H;if(v.getDetectionResultColumn(Y)!==void 0)continue;let se;Y===0||Y===S?se=new oa(x,Y===0):se=new tr(x),v.setDetectionResultColumn(Y,se);let he=-1,ke=he;for(let Ae=x.getMinY();Ae<=x.getMaxY();Ae++){if(he=et.getStartColumn(v,Y,Ae,P),he<0||he>x.getMaxX()){if(ke===-1)continue;he=ke}let ve=et.detectCodeword(e,x.getMinX(),x.getMaxX(),P,he,Ae,o,c);ve!=null&&(se.setCodeword(Ae,ve),ke=he,o=Math.min(o,ve.getWidth()),c=Math.max(c,ve.getWidth()))}}return et.createDecoderResult(v)}static merge(e,s){if(e==null&&s==null)return null;let r=et.getBarcodeMetadata(e,s);if(r==null)return null;let i=kr.merge(et.adjustBoundingBox(e),et.adjustBoundingBox(s));return new jn(r,i)}static adjustBoundingBox(e){if(e==null)return null;let s=e.getRowHeights();if(s==null)return null;let r=et.getMax(s),i=0;for(let c of s)if(i+=r-c,c>0)break;let a=e.getCodewords();for(let c=0;i>0&&a[c]==null;c++)i--;let o=0;for(let c=s.length-1;c>=0&&(o+=r-s[c],!(s[c]>0));c--);for(let c=a.length-1;o>0&&a[c]==null;c--)o--;return e.getBoundingBox().addMissingRows(i,o,e.isLeft())}static getMax(e){let s=-1;for(let r of e)s=Math.max(s,r);return s}static getBarcodeMetadata(e,s){let r;if(e==null||(r=e.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let i;return s==null||(i=s.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r}static getRowIndicatorColumn(e,s,r,i,a,o){let c=new oa(s,i);for(let x=0;x<2;x++){let p=x===0?1:-1,R=Math.trunc(Math.trunc(r.getX()));for(let v=Math.trunc(Math.trunc(r.getY()));v<=s.getMaxY()&&v>=s.getMinY();v+=p){let S=et.detectCodeword(e,0,e.getWidth(),i,R,v,a,o);S!=null&&(c.setCodeword(v,S),i?R=S.getStartX():R=S.getEndX())}}return c}static adjustCodewordCount(e,s){let r=s[0][1],i=r.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-et.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Qe.MAX_CODEWORDS_IN_BARCODE)throw I.getNotFoundInstance();r.setValue(a)}else i[0]!==a&&r.setValue(a)}static createDecoderResult(e){let s=et.createBarcodeMatrix(e);et.adjustCodewordCount(e,s);let r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],o=new Array;for(let x=0;x<e.getBarcodeRowCount();x++)for(let p=0;p<e.getBarcodeColumnCount();p++){let R=s[x][p+1].getValue(),v=x*e.getBarcodeColumnCount()+p;R.length===0?r.push(v):R.length===1?i[v]=R[0]:(o.push(v),a.push(R))}let c=new Array(a.length);for(let x=0;x<c.length;x++)c[x]=a[x];return et.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Qe.toIntArray(r),Qe.toIntArray(o),c)}static createDecoderResultFromAmbiguousValues(e,s,r,i,a){let o=new Int32Array(i.length),c=100;for(;c-- >0;){for(let x=0;x<o.length;x++)s[i[x]]=a[x][o[x]];try{return et.decodeCodewords(s,e,r)}catch(x){if(!(x instanceof W))throw x}if(o.length===0)throw W.getChecksumInstance();for(let x=0;x<o.length;x++)if(o[x]<a[x].length-1){o[x]++;break}else if(o[x]=0,x===o.length-1)throw W.getChecksumInstance()}throw W.getChecksumInstance()}static createBarcodeMatrix(e){let s=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let i=0;i<s.length;i++)for(let a=0;a<s[i].length;a++)s[i][a]=new wr;let r=0;for(let i of e.getDetectionResultColumns()){if(i!=null){for(let a of i.getCodewords())if(a!=null){let o=a.getRowNumber();if(o>=0){if(o>=s.length)continue;s[o][r].setValue(a.getValue())}}}r++}return s}static isValidBarcodeColumn(e,s){return s>=0&&s<=e.getBarcodeColumnCount()+1}static getStartColumn(e,s,r,i){let a=i?1:-1,o=null;if(et.isValidBarcodeColumn(e,s-a)&&(o=e.getDetectionResultColumn(s-a).getCodeword(r)),o!=null)return i?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(s).getCodewordNearby(r),o!=null)return i?o.getStartX():o.getEndX();if(et.isValidBarcodeColumn(e,s-a)&&(o=e.getDetectionResultColumn(s-a).getCodewordNearby(r)),o!=null)return i?o.getEndX():o.getStartX();let c=0;for(;et.isValidBarcodeColumn(e,s-a);){s-=a;for(let x of e.getDetectionResultColumn(s).getCodewords())if(x!=null)return(i?x.getEndX():x.getStartX())+a*c*(x.getEndX()-x.getStartX());c++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,s,r,i,a,o,c,x){a=et.adjustCodewordStartColumn(e,s,r,i,a,o);let p=et.getModuleBitCount(e,s,r,i,a,o);if(p==null)return null;let R,v=nt.sum(p);if(i)R=a+v;else{for(let H=0;H<p.length/2;H++){let Y=p[H];p[H]=p[p.length-1-H],p[p.length-1-H]=Y}R=a,a=R-v}if(!et.checkCodewordSkew(v,c,x))return null;let S=ss.getDecodedValue(p),P=Qe.getCodeword(S);return P===-1?null:new Ar(a,R,et.getCodewordBucketNumber(S),P)}static getModuleBitCount(e,s,r,i,a,o){let c=a,x=new Int32Array(8),p=0,R=i?1:-1,v=i;for(;(i?c<r:c>=s)&&p<x.length;)e.get(c,o)===v?(x[p]++,c+=R):(p++,v=!v);return p===x.length||c===(i?r:s)&&p===x.length-1?x:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,s,r,i,a,o){let c=a,x=i?-1:1;for(let p=0;p<2;p++){for(;(i?c>=s:c<r)&&i===e.get(c,o);){if(Math.abs(a-c)>et.CODEWORD_SKEW_SIZE)return a;c+=x}x=-x,i=!i}return c}static checkCodewordSkew(e,s,r){return s-et.CODEWORD_SKEW_SIZE<=e&&e<=r+et.CODEWORD_SKEW_SIZE}static decodeCodewords(e,s,r){if(e.length===0)throw F.getFormatInstance();let i=1<<s+1,a=et.correctErrors(e,r,i);et.verifyCodewordCount(e,i);let o=pe.decode(e,""+s);return o.setErrorsCorrected(a),o.setErasures(r.length),o}static correctErrors(e,s,r){if(s!=null&&s.length>r/2+et.MAX_ERRORS||r<0||r>et.MAX_EC_CODEWORDS)throw W.getChecksumInstance();return et.errorCorrection.decode(e,r,s)}static verifyCodewordCount(e,s){if(e.length<4)throw F.getFormatInstance();let r=e[0];if(r>e.length)throw F.getFormatInstance();if(r===0)if(s<e.length)e[0]=e.length-s;else throw F.getFormatInstance()}static getBitCountForCodeword(e){let s=new Int32Array(8),r=0,i=s.length-1;for(;!((e&1)!==r&&(r=e&1,i--,i<0));)s[i]++,e>>=1;return s}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return et.getCodewordBucketNumber(et.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let s=new dr;for(let r=0;r<e.length;r++){s.format("Row %2d: ",r);for(let i=0;i<e[r].length;i++){let a=e[r][i];a.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}s.format("%n")}return s.toString()}}et.CODEWORD_SKEW_SIZE=2,et.MAX_ERRORS=3,et.MAX_EC_CODEWORDS=512,et.errorCorrection=new bi;class rs{decode(e,s=null){let r=rs.decode(e,s,!1);if(r==null||r.length===0||r[0]==null)throw I.getNotFoundInstance();return r[0]}decodeMultiple(e,s=null){try{return rs.decode(e,s,!0)}catch(r){throw r instanceof F||r instanceof W?I.getNotFoundInstance():r}}static decode(e,s,r){const i=new Array,a=$e.detectMultiple(e,s,r);for(const o of a.getPoints()){const c=et.decode(a.getBits(),o[4],o[5],o[6],o[7],rs.getMinCodewordWidth(o),rs.getMaxCodewordWidth(o)),x=new ee(c.getText(),c.getRawBytes(),void 0,o,je.PDF_417);x.putMetadata(Be.ERROR_CORRECTION_LEVEL,c.getECLevel());const p=c.getOther();p!=null&&x.putMetadata(Be.PDF417_EXTRA_METADATA,p),i.push(x)}return i.map(o=>o)}static getMaxWidth(e,s){return e==null||s==null?0:Math.trunc(Math.abs(e.getX()-s.getX()))}static getMinWidth(e,s){return e==null||s==null?te.MAX_VALUE:Math.trunc(Math.abs(e.getX()-s.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(rs.getMaxWidth(e[0],e[4]),rs.getMaxWidth(e[6],e[2])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN),Math.max(rs.getMaxWidth(e[1],e[5]),rs.getMaxWidth(e[7],e[3])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(rs.getMinWidth(e[0],e[4]),rs.getMinWidth(e[6],e[2])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN),Math.min(rs.getMinWidth(e[1],e[5]),rs.getMinWidth(e[7],e[3])*Qe.MODULES_IN_CODEWORD/Qe.MODULES_IN_STOP_PATTERN)))}reset(){}}class Zr extends w{}Zr.kind="ReaderException";class Xn{constructor(e,s){this.verbose=e===!0,s&&this.setHints(s)}decode(e,s){return s&&this.setHints(s),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const s=!E(e)&&e.get(re.TRY_HARDER)===!0,r=E(e)?null:e.get(re.POSSIBLE_FORMATS),i=new Array;if(!E(r)){const a=r.some(o=>o===je.UPC_A||o===je.UPC_E||o===je.EAN_13||o===je.EAN_8||o===je.CODABAR||o===je.CODE_39||o===je.CODE_93||o===je.CODE_128||o===je.ITF||o===je.RSS_14||o===je.RSS_EXPANDED);a&&!s&&i.push(new zr(e,this.verbose)),r.includes(je.QR_CODE)&&i.push(new hs),r.includes(je.DATA_MATRIX)&&i.push(new Gs),r.includes(je.AZTEC)&&i.push(new ut),r.includes(je.PDF_417)&&i.push(new rs),a&&s&&i.push(new zr(e,this.verbose))}i.length===0&&(s||i.push(new zr(e,this.verbose)),i.push(new hs),i.push(new Gs),i.push(new ut),i.push(new rs),s&&i.push(new zr(e,this.verbose))),this.readers=i}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Zr("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(e,this.hints)}catch(r){if(r instanceof Zr)continue}throw new I("No MultiFormat Readers were able to detect the code.")}}class bn extends Ie{constructor(e=null,s=500){const r=new Xn;r.setHints(e),super(r,s)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class Yn extends Ie{constructor(e=500){super(new rs,e)}}class ca extends Ie{constructor(e=500){super(new hs,e)}}var Ci;(function(b){b[b.ERROR_CORRECTION=0]="ERROR_CORRECTION",b[b.CHARACTER_SET=1]="CHARACTER_SET",b[b.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",b[b.MIN_SIZE=3]="MIN_SIZE",b[b.MAX_SIZE=4]="MAX_SIZE",b[b.MARGIN=5]="MARGIN",b[b.PDF417_COMPACT=6]="PDF417_COMPACT",b[b.PDF417_COMPACTION=7]="PDF417_COMPACTION",b[b.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",b[b.AZTEC_LAYERS=9]="AZTEC_LAYERS",b[b.QR_VERSION=10]="QR_VERSION"})(Ci||(Ci={}));var Yt=Ci;class Si{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ct(e,Int32Array.from([1])))}buildGenerator(e){const s=this.cachedGenerators;if(e>=s.length){let r=s[s.length-1];const i=this.field;for(let a=s.length;a<=e;a++){const o=r.multiply(new ct(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));s.push(o),r=o}}return s[e]}encode(e,s){if(s===0)throw new _("No error correction bytes");const r=e.length-s;if(r<=0)throw new _("No data bytes provided");const i=this.buildGenerator(s),a=new Int32Array(r);q.arraycopy(e,0,a,0,r);let o=new ct(this.field,a);o=o.multiplyByMonomial(s,1);const x=o.divide(i)[1].getCoefficients(),p=s-x.length;for(let R=0;R<p;R++)e[r+R]=0;q.arraycopy(x,0,e,r+p,x.length)}}class It{constructor(){}static applyMaskPenaltyRule1(e){return It.applyMaskPenaltyRule1Internal(e,!0)+It.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let s=0;const r=e.getArray(),i=e.getWidth(),a=e.getHeight();for(let o=0;o<a-1;o++){const c=r[o];for(let x=0;x<i-1;x++){const p=c[x];p===c[x+1]&&p===r[o+1][x]&&p===r[o+1][x+1]&&s++}}return It.N2*s}static applyMaskPenaltyRule3(e){let s=0;const r=e.getArray(),i=e.getWidth(),a=e.getHeight();for(let o=0;o<a;o++)for(let c=0;c<i;c++){const x=r[o];c+6<i&&x[c]===1&&x[c+1]===0&&x[c+2]===1&&x[c+3]===1&&x[c+4]===1&&x[c+5]===0&&x[c+6]===1&&(It.isWhiteHorizontal(x,c-4,c)||It.isWhiteHorizontal(x,c+7,c+11))&&s++,o+6<a&&r[o][c]===1&&r[o+1][c]===0&&r[o+2][c]===1&&r[o+3][c]===1&&r[o+4][c]===1&&r[o+5][c]===0&&r[o+6][c]===1&&(It.isWhiteVertical(r,c,o-4,o)||It.isWhiteVertical(r,c,o+7,o+11))&&s++}return s*It.N3}static isWhiteHorizontal(e,s,r){s=Math.max(s,0),r=Math.min(r,e.length);for(let i=s;i<r;i++)if(e[i]===1)return!1;return!0}static isWhiteVertical(e,s,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(let a=r;a<i;a++)if(e[a][s]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let s=0;const r=e.getArray(),i=e.getWidth(),a=e.getHeight();for(let x=0;x<a;x++){const p=r[x];for(let R=0;R<i;R++)p[R]===1&&s++}const o=e.getHeight()*e.getWidth();return Math.floor(Math.abs(s*2-o)*10/o)*It.N4}static getDataMaskBit(e,s,r){let i,a;switch(e){case 0:i=r+s&1;break;case 1:i=r&1;break;case 2:i=s%3;break;case 3:i=(r+s)%3;break;case 4:i=Math.floor(r/2)+Math.floor(s/3)&1;break;case 5:a=r*s,i=(a&1)+a%3;break;case 6:a=r*s,i=(a&1)+a%3&1;break;case 7:a=r*s,i=a%3+(r+s&1)&1;break;default:throw new _("Invalid mask pattern: "+e)}return i===0}static applyMaskPenaltyRule1Internal(e,s){let r=0;const i=s?e.getHeight():e.getWidth(),a=s?e.getWidth():e.getHeight(),o=e.getArray();for(let c=0;c<i;c++){let x=0,p=-1;for(let R=0;R<a;R++){const v=s?o[c][R]:o[R][c];v===p?x++:(x>=5&&(r+=It.N1+(x-5)),x=1,p=v)}x>=5&&(r+=It.N1+(x-5))}return r}}It.N1=3,It.N2=3,It.N3=40,It.N4=10;class Zn{constructor(e,s){this.width=e,this.height=s;const r=new Array(s);for(let i=0;i!==s;i++)r[i]=new Uint8Array(e);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(e,s){return this.bytes[s][e]}getArray(){return this.bytes}setNumber(e,s,r){this.bytes[s][e]=r}setBoolean(e,s,r){this.bytes[s][e]=r?1:0}clear(e){for(const s of this.bytes)ue.fill(s,e)}equals(e){if(!(e instanceof Zn))return!1;const s=e;if(this.width!==s.width||this.height!==s.height)return!1;for(let r=0,i=this.height;r<i;++r){const a=this.bytes[r],o=s.bytes[r];for(let c=0,x=this.width;c<x;++c)if(a[c]!==o[c])return!1}return!0}toString(){const e=new Z;for(let s=0,r=this.height;s<r;++s){const i=this.bytes[s];for(let a=0,o=this.width;a<o;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class Ir{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Z;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Ir.NUM_MASK_PATTERNS}}Ir.NUM_MASK_PATTERNS=8;class bt extends w{}bt.kind="WriterException";class Xe{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,s,r,i,a){Xe.clearMatrix(a),Xe.embedBasicPatterns(r,a),Xe.embedTypeInfo(s,i,a),Xe.maybeEmbedVersionInfo(r,a),Xe.embedDataBits(e,i,a)}static embedBasicPatterns(e,s){Xe.embedPositionDetectionPatternsAndSeparators(s),Xe.embedDarkDotAtLeftBottomCorner(s),Xe.maybeEmbedPositionAdjustmentPatterns(e,s),Xe.embedTimingPatterns(s)}static embedTypeInfo(e,s,r){const i=new K;Xe.makeTypeInfoBits(e,s,i);for(let a=0,o=i.getSize();a<o;++a){const c=i.get(i.getSize()-1-a),x=Xe.TYPE_INFO_COORDINATES[a],p=x[0],R=x[1];if(r.setBoolean(p,R,c),a<8){const v=r.getWidth()-a-1;r.setBoolean(v,8,c)}else{const S=r.getHeight()-7+(a-8);r.setBoolean(8,S,c)}}}static maybeEmbedVersionInfo(e,s){if(e.getVersionNumber()<7)return;const r=new K;Xe.makeVersionInfoBits(e,r);let i=17;for(let a=0;a<6;++a)for(let o=0;o<3;++o){const c=r.get(i);i--,s.setBoolean(a,s.getHeight()-11+o,c),s.setBoolean(s.getHeight()-11+o,a,c)}}static embedDataBits(e,s,r){let i=0,a=-1,o=r.getWidth()-1,c=r.getHeight()-1;for(;o>0;){for(o===6&&(o-=1);c>=0&&c<r.getHeight();){for(let x=0;x<2;++x){const p=o-x;if(!Xe.isEmpty(r.get(p,c)))continue;let R;i<e.getSize()?(R=e.get(i),++i):R=!1,s!==255&&It.getDataMaskBit(s,p,c)&&(R=!R),r.setBoolean(p,c,R)}c+=a}a=-a,c+=a,o-=2}if(i!==e.getSize())throw new bt("Not all bits consumed: "+i+"/"+e.getSize())}static findMSBSet(e){return 32-te.numberOfLeadingZeros(e)}static calculateBCHCode(e,s){if(s===0)throw new _("0 polynomial");const r=Xe.findMSBSet(s);for(e<<=r-1;Xe.findMSBSet(e)>=r;)e^=s<<Xe.findMSBSet(e)-r;return e}static makeTypeInfoBits(e,s,r){if(!Ir.isValidMaskPattern(s))throw new bt("Invalid mask pattern");const i=e.getBits()<<3|s;r.appendBits(i,5);const a=Xe.calculateBCHCode(i,Xe.TYPE_INFO_POLY);r.appendBits(a,10);const o=new K;if(o.appendBits(Xe.TYPE_INFO_MASK_PATTERN,15),r.xor(o),r.getSize()!==15)throw new bt("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(e,s){s.appendBits(e.getVersionNumber(),6);const r=Xe.calculateBCHCode(e.getVersionNumber(),Xe.VERSION_INFO_POLY);if(s.appendBits(r,12),s.getSize()!==18)throw new bt("should not happen but we got: "+s.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let s=8;s<e.getWidth()-8;++s){const r=(s+1)%2;Xe.isEmpty(e.get(s,6))&&e.setNumber(s,6,r),Xe.isEmpty(e.get(6,s))&&e.setNumber(6,s,r)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new bt;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,s,r){for(let i=0;i<8;++i){if(!Xe.isEmpty(r.get(e+i,s)))throw new bt;r.setNumber(e+i,s,0)}}static embedVerticalSeparationPattern(e,s,r){for(let i=0;i<7;++i){if(!Xe.isEmpty(r.get(e,s+i)))throw new bt;r.setNumber(e,s+i,0)}}static embedPositionAdjustmentPattern(e,s,r){for(let i=0;i<5;++i){const a=Xe.POSITION_ADJUSTMENT_PATTERN[i];for(let o=0;o<5;++o)r.setNumber(e+o,s+i,a[o])}}static embedPositionDetectionPattern(e,s,r){for(let i=0;i<7;++i){const a=Xe.POSITION_DETECTION_PATTERN[i];for(let o=0;o<7;++o)r.setNumber(e+o,s+i,a[o])}}static embedPositionDetectionPatternsAndSeparators(e){const s=Xe.POSITION_DETECTION_PATTERN[0].length;Xe.embedPositionDetectionPattern(0,0,e),Xe.embedPositionDetectionPattern(e.getWidth()-s,0,e),Xe.embedPositionDetectionPattern(0,e.getWidth()-s,e);const r=8;Xe.embedHorizontalSeparationPattern(0,r-1,e),Xe.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),Xe.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);const i=7;Xe.embedVerticalSeparationPattern(i,0,e),Xe.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),Xe.embedVerticalSeparationPattern(i,e.getHeight()-i,e)}static maybeEmbedPositionAdjustmentPatterns(e,s){if(e.getVersionNumber()<2)return;const r=e.getVersionNumber()-1,i=Xe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let a=0,o=i.length;a!==o;a++){const c=i[a];if(c>=0)for(let x=0;x!==o;x++){const p=i[x];p>=0&&Xe.isEmpty(s.get(p,c))&&Xe.embedPositionAdjustmentPattern(p-2,c-2,s)}}}}Xe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Xe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Xe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Xe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Xe.VERSION_INFO_POLY=7973,Xe.TYPE_INFO_POLY=1335,Xe.TYPE_INFO_MASK_PATTERN=21522;class ao{constructor(e,s){this.dataBytes=e,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class vt{constructor(){}static calculateMaskPenalty(e){return It.applyMaskPenaltyRule1(e)+It.applyMaskPenaltyRule2(e)+It.applyMaskPenaltyRule3(e)+It.applyMaskPenaltyRule4(e)}static encode(e,s,r=null){let i=vt.DEFAULT_BYTE_MODE_ENCODING;const a=r!==null&&r.get(Yt.CHARACTER_SET)!==void 0;a&&(i=r.get(Yt.CHARACTER_SET).toString());const o=this.chooseMode(e,i),c=new K;if(o===Ge.BYTE&&(a||vt.DEFAULT_BYTE_MODE_ENCODING!==i)){const Ae=Q.getCharacterSetECIByName(i);Ae!==void 0&&this.appendECI(Ae,c)}this.appendModeInfo(o,c);const x=new K;this.appendBytes(e,o,x,i);let p;if(r!==null&&r.get(Yt.QR_VERSION)!==void 0){const Ae=Number.parseInt(r.get(Yt.QR_VERSION).toString(),10);p=ze.getVersionForNumber(Ae);const ve=this.calculateBitsNeeded(o,c,x,p);if(!this.willFit(ve,p,s))throw new bt("Data too big for requested version")}else p=this.recommendVersion(s,o,c,x);const R=new K;R.appendBitArray(c);const v=o===Ge.BYTE?x.getSizeInBytes():e.length;this.appendLengthInfo(v,p,o,R),R.appendBitArray(x);const S=p.getECBlocksForLevel(s),P=p.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(P,R);const H=this.interleaveWithECBytes(R,p.getTotalCodewords(),P,S.getNumBlocks()),Y=new Ir;Y.setECLevel(s),Y.setMode(o),Y.setVersion(p);const se=p.getDimensionForVersion(),he=new Zn(se,se),ke=this.chooseMaskPattern(H,s,p,he);return Y.setMaskPattern(ke),Xe.buildMatrix(H,s,p,ke,he),Y.setMatrix(he),Y}static recommendVersion(e,s,r,i){const a=this.calculateBitsNeeded(s,r,i,ze.getVersionForNumber(1)),o=this.chooseVersion(a,e),c=this.calculateBitsNeeded(s,r,i,o);return this.chooseVersion(c,e)}static calculateBitsNeeded(e,s,r,i){return s.getSize()+e.getCharacterCountBits(i)+r.getSize()}static getAlphanumericCode(e){return e<vt.ALPHANUMERIC_TABLE.length?vt.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,s=null){if(Q.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(e))return Ge.KANJI;let r=!1,i=!1;for(let a=0,o=e.length;a<o;++a){const c=e.charAt(a);if(vt.isDigit(c))r=!0;else if(this.getAlphanumericCode(c.charCodeAt(0))!==-1)i=!0;else return Ge.BYTE}return i?Ge.ALPHANUMERIC:r?Ge.NUMERIC:Ge.BYTE}static isOnlyDoubleByteKanji(e){let s;try{s=Ce.encode(e,Q.SJIS)}catch{return!1}const r=s.length;if(r%2!==0)return!1;for(let i=0;i<r;i+=2){const a=s[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0}static chooseMaskPattern(e,s,r,i){let a=Number.MAX_SAFE_INTEGER,o=-1;for(let c=0;c<Ir.NUM_MASK_PATTERNS;c++){Xe.buildMatrix(e,s,r,c,i);let x=this.calculateMaskPenalty(i);x<a&&(a=x,o=c)}return o}static chooseVersion(e,s){for(let r=1;r<=40;r++){const i=ze.getVersionForNumber(r);if(vt.willFit(e,i,s))return i}throw new bt("Data too big")}static willFit(e,s,r){const i=s.getTotalCodewords(),o=s.getECBlocksForLevel(r).getTotalECCodewords(),c=i-o,x=(e+7)/8;return c>=x}static terminateBits(e,s){const r=e*8;if(s.getSize()>r)throw new bt("data bits cannot fit in the QR Code"+s.getSize()+" > "+r);for(let o=0;o<4&&s.getSize()<r;++o)s.appendBit(!1);const i=s.getSize()&7;if(i>0)for(let o=i;o<8;o++)s.appendBit(!1);const a=e-s.getSizeInBytes();for(let o=0;o<a;++o)s.appendBits((o&1)===0?236:17,8);if(s.getSize()!==r)throw new bt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,s,r,i,a,o){if(i>=r)throw new bt("Block ID too large");const c=e%r,x=r-c,p=Math.floor(e/r),R=p+1,v=Math.floor(s/r),S=v+1,P=p-v,H=R-S;if(P!==H)throw new bt("EC bytes mismatch");if(r!==x+c)throw new bt("RS blocks mismatch");if(e!==(v+P)*x+(S+H)*c)throw new bt("Total bytes mismatch");i<x?(a[0]=v,o[0]=P):(a[0]=S,o[0]=H)}static interleaveWithECBytes(e,s,r,i){if(e.getSizeInBytes()!==r)throw new bt("Number of bits and data bytes does not match");let a=0,o=0,c=0;const x=new Array;for(let R=0;R<i;++R){const v=new Int32Array(1),S=new Int32Array(1);vt.getNumDataBytesAndNumECBytesForBlockID(s,r,i,R,v,S);const P=v[0],H=new Uint8Array(P);e.toBytes(8*a,H,0,P);const Y=vt.generateECBytes(H,S[0]);x.push(new ao(H,Y)),o=Math.max(o,P),c=Math.max(c,Y.length),a+=v[0]}if(r!==a)throw new bt("Data bytes does not match offset");const p=new K;for(let R=0;R<o;++R)for(const v of x){const S=v.getDataBytes();R<S.length&&p.appendBits(S[R],8)}for(let R=0;R<c;++R)for(const v of x){const S=v.getErrorCorrectionBytes();R<S.length&&p.appendBits(S[R],8)}if(s!==p.getSizeInBytes())throw new bt("Interleaving error: "+s+" and "+p.getSizeInBytes()+" differ.");return p}static generateECBytes(e,s){const r=e.length,i=new Int32Array(r+s);for(let o=0;o<r;o++)i[o]=e[o]&255;new Si(rt.QR_CODE_FIELD_256).encode(i,s);const a=new Uint8Array(s);for(let o=0;o<s;o++)a[o]=i[r+o];return a}static appendModeInfo(e,s){s.appendBits(e.getBits(),4)}static appendLengthInfo(e,s,r,i){const a=r.getCharacterCountBits(s);if(e>=1<<a)throw new bt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)}static appendBytes(e,s,r,i){switch(s){case Ge.NUMERIC:vt.appendNumericBytes(e,r);break;case Ge.ALPHANUMERIC:vt.appendAlphanumericBytes(e,r);break;case Ge.BYTE:vt.append8BitBytes(e,r,i);break;case Ge.KANJI:vt.appendKanjiBytes(e,r);break;default:throw new bt("Invalid mode: "+s)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const s=vt.getDigit(e);return s>=0&&s<=9}static appendNumericBytes(e,s){const r=e.length;let i=0;for(;i<r;){const a=vt.getDigit(e.charAt(i));if(i+2<r){const o=vt.getDigit(e.charAt(i+1)),c=vt.getDigit(e.charAt(i+2));s.appendBits(a*100+o*10+c,10),i+=3}else if(i+1<r){const o=vt.getDigit(e.charAt(i+1));s.appendBits(a*10+o,7),i+=2}else s.appendBits(a,4),i++}}static appendAlphanumericBytes(e,s){const r=e.length;let i=0;for(;i<r;){const a=vt.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new bt;if(i+1<r){const o=vt.getAlphanumericCode(e.charCodeAt(i+1));if(o===-1)throw new bt;s.appendBits(a*45+o,11),i+=2}else s.appendBits(a,6),i++}}static append8BitBytes(e,s,r){let i;try{i=Ce.encode(e,r)}catch(a){throw new bt(a)}for(let a=0,o=i.length;a!==o;a++){const c=i[a];s.appendBits(c,8)}}static appendKanjiBytes(e,s){let r;try{r=Ce.encode(e,Q.SJIS)}catch(a){throw new bt(a)}const i=r.length;for(let a=0;a<i;a+=2){const o=r[a]&255,c=r[a+1]&255,x=o<<8&4294967295|c;let p=-1;if(x>=33088&&x<=40956?p=x-33088:x>=57408&&x<=60351&&(p=x-49472),p===-1)throw new bt("Invalid byte sequence");const R=(p>>8)*192+(p&255);s.appendBits(R,13)}}static appendECI(e,s){s.appendBits(Ge.ECI.getBits(),4),s.appendBits(e.getValue(),8)}}vt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),vt.DEFAULT_BYTE_MODE_ENCODING=Q.UTF8.getName();class Tr{write(e,s,r,i=null){if(e.length===0)throw new _("Found empty contents");if(s<0||r<0)throw new _("Requested dimensions are too small: "+s+"x"+r);let a=Rt.L,o=Tr.QUIET_ZONE_SIZE;i!==null&&(i.get(Yt.ERROR_CORRECTION)!==void 0&&(a=Rt.fromString(i.get(Yt.ERROR_CORRECTION).toString())),i.get(Yt.MARGIN)!==void 0&&(o=Number.parseInt(i.get(Yt.MARGIN).toString(),10)));const c=vt.encode(e,a,i);return this.renderResult(c,s,r,o)}writeToDom(e,s,r,i,a=null){typeof e=="string"&&(e=document.querySelector(e));const o=this.write(s,r,i,a);e&&e.appendChild(o)}renderResult(e,s,r,i){const a=e.getMatrix();if(a===null)throw new as;const o=a.getWidth(),c=a.getHeight(),x=o+i*2,p=c+i*2,R=Math.max(s,x),v=Math.max(r,p),S=Math.min(Math.floor(R/x),Math.floor(v/p)),P=Math.floor((R-o*S)/2),H=Math.floor((v-c*S)/2),Y=this.createSVGElement(R,v);for(let se=0,he=H;se<c;se++,he+=S)for(let ke=0,Ae=P;ke<o;ke++,Ae+=S)if(a.get(ke,se)===1){const ve=this.createSvgRectElement(Ae,he,S,S);Y.appendChild(ve)}return Y}createSVGElement(e,s){const r=document.createElementNS(Tr.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",s.toString()),r}createSvgRectElement(e,s,r,i){const a=document.createElementNS(Tr.SVG_NS,"rect");return a.setAttributeNS(null,"x",e.toString()),a.setAttributeNS(null,"y",s.toString()),a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",i.toString()),a.setAttributeNS(null,"fill","#000000"),a}}Tr.QUIET_ZONE_SIZE=4,Tr.SVG_NS="http://www.w3.org/2000/svg";class Qr{encode(e,s,r,i,a){if(e.length===0)throw new _("Found empty contents");if(s!==je.QR_CODE)throw new _("Can only encode QR_CODE, but got "+s);if(r<0||i<0)throw new _(`Requested dimensions are too small: ${r}x${i}`);let o=Rt.L,c=Qr.QUIET_ZONE_SIZE;a!==null&&(a.get(Yt.ERROR_CORRECTION)!==void 0&&(o=Rt.fromString(a.get(Yt.ERROR_CORRECTION).toString())),a.get(Yt.MARGIN)!==void 0&&(c=Number.parseInt(a.get(Yt.MARGIN).toString(),10)));const x=vt.encode(e,o,a);return Qr.renderResult(x,r,i,c)}static renderResult(e,s,r,i){const a=e.getMatrix();if(a===null)throw new as;const o=a.getWidth(),c=a.getHeight(),x=o+i*2,p=c+i*2,R=Math.max(s,x),v=Math.max(r,p),S=Math.min(Math.floor(R/x),Math.floor(v/p)),P=Math.floor((R-o*S)/2),H=Math.floor((v-c*S)/2),Y=new ge(R,v);for(let se=0,he=H;se<c;se++,he+=S)for(let ke=0,Ae=P;ke<o;ke++,Ae+=S)a.get(ke,se)===1&&Y.setRegion(Ae,he,S,S);return Y}}Qr.QUIET_ZONE_SIZE=4;class oo{encode(e,s,r,i,a){let o;if(s===je.QR_CODE)o=new Qr;else throw new _("No encoder available for format "+s);return o.encode(e,s,r,i,a)}}class sr extends de{constructor(e,s,r,i,a,o,c,x){if(super(o,c),this.yuvData=e,this.dataWidth=s,this.dataHeight=r,this.left=i,this.top=a,i+o>s||a+c>r)throw new _("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(o,c)}getRow(e,s){if(e<0||e>=this.getHeight())throw new _("Requested row is outside the image: "+e);const r=this.getWidth();(s==null||s.length<r)&&(s=new Uint8ClampedArray(r));const i=(e+this.top)*this.dataWidth+this.left;return q.arraycopy(this.yuvData,i,s,0,r),s}getMatrix(){const e=this.getWidth(),s=this.getHeight();if(e===this.dataWidth&&s===this.dataHeight)return this.yuvData;const r=e*s,i=new Uint8ClampedArray(r);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return q.arraycopy(this.yuvData,a,i,0,r),i;for(let o=0;o<s;o++){const c=o*e;q.arraycopy(this.yuvData,a,i,c,e),a+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,s,r,i){return new sr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+s,r,i,!1)}renderThumbnail(){const e=this.getWidth()/sr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/sr.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*s),i=this.yuvData;let a=this.top*this.dataWidth+this.left;for(let o=0;o<s;o++){const c=o*e;for(let x=0;x<e;x++){const p=i[a+x*sr.THUMBNAIL_SCALE_FACTOR]&255;r[c+x]=4278190080|p*65793}a+=this.dataWidth*sr.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/sr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/sr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,s){const r=this.yuvData;for(let i=0,a=this.top*this.dataWidth+this.left;i<s;i++,a+=this.dataWidth){const o=a+e/2;for(let c=a,x=a+e-1;c<o;c++,x--){const p=r[c];r[c]=r[x],r[x]=p}}}invert(){return new ye(this)}}sr.THUMBNAIL_SCALE_FACTOR=2;class vn extends de{constructor(e,s,r,i,a,o,c){if(super(s,r),this.dataWidth=i,this.dataHeight=a,this.left=o,this.top=c,e.BYTES_PER_ELEMENT===4){const x=s*r,p=new Uint8ClampedArray(x);for(let R=0;R<x;R++){const v=e[R],S=v>>16&255,P=v>>7&510,H=v&255;p[R]=(S+P+H)/4&255}this.luminances=p}else this.luminances=e;if(i===void 0&&(this.dataWidth=s),a===void 0&&(this.dataHeight=r),o===void 0&&(this.left=0),c===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+r>this.dataHeight)throw new _("Crop rectangle does not fit within image data.")}getRow(e,s){if(e<0||e>=this.getHeight())throw new _("Requested row is outside the image: "+e);const r=this.getWidth();(s==null||s.length<r)&&(s=new Uint8ClampedArray(r));const i=(e+this.top)*this.dataWidth+this.left;return q.arraycopy(this.luminances,i,s,0,r),s}getMatrix(){const e=this.getWidth(),s=this.getHeight();if(e===this.dataWidth&&s===this.dataHeight)return this.luminances;const r=e*s,i=new Uint8ClampedArray(r);let a=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return q.arraycopy(this.luminances,a,i,0,r),i;for(let o=0;o<s;o++){const c=o*e;q.arraycopy(this.luminances,a,i,c,e),a+=this.dataWidth}return i}isCropSupported(){return!0}crop(e,s,r,i){return new vn(this.luminances,r,i,this.dataWidth,this.dataHeight,this.left+e,this.top+s)}invert(){return new ye(this)}}class ua extends Q{static forName(e){return this.getCharacterSetECIByName(e)}}class ki{}ki.ISO_8859_1=Q.ISO8859_1;class da{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Ai{static singletonList(e){return[e]}static min(e,s){return e.sort(s)[0]}}class lo{constructor(e){this.previous=e}getPrevious(){return this.previous}}class qr extends lo{constructor(e,s,r){super(e),this.value=s,this.bitCount=r}appendTo(e,s){e.appendBits(this.value,this.bitCount)}add(e,s){return new qr(this,e,s)}addBinaryShift(e,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new qr(this,e,s)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+te.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Ii extends qr{constructor(e,s,r){super(e,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=r}appendTo(e,s){for(let r=0;r<this.binaryShiftByteCount;r++)(r===0||r===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):r===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(s[this.binaryShiftStart+r],8)}addBinaryShift(e,s){return new Ii(this,e,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function co(b,e,s){return new Ii(b,e,s)}function Nn(b,e,s){return new qr(b,e,s)}const uo=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Rr=0,Kr=1,ls=2,xa=3,Xs=4,ma=new qr(null,0,0),Qn=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ha(b){for(let e of b)ue.fill(e,-1);return b[Rr][Xs]=0,b[Kr][Xs]=0,b[Kr][Rr]=28,b[xa][Xs]=0,b[ls][Xs]=0,b[ls][Rr]=15,b}const Ti=ha(ue.createInt32Array(6,6));class ps{constructor(e,s,r,i){this.token=e,this.mode=s,this.binaryShiftByteCount=r,this.bitCount=i}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,s){let r=this.bitCount,i=this.token;if(e!==this.mode){let o=Qn[this.mode][e];i=Nn(i,o&65535,o>>16),r+=o>>16}let a=e===ls?4:5;return i=Nn(i,s,a),new ps(i,e,0,r+a)}shiftAndAppend(e,s){let r=this.token,i=this.mode===ls?4:5;return r=Nn(r,Ti[this.mode][e],i),r=Nn(r,s,5),new ps(r,this.mode,0,this.bitCount+i+5)}addBinaryShiftChar(e){let s=this.token,r=this.mode,i=this.bitCount;if(this.mode===Xs||this.mode===ls){let c=Qn[r][Rr];s=Nn(s,c&65535,c>>16),i+=c>>16,r=Rr}let a=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,o=new ps(s,r,this.binaryShiftByteCount+1,i+a);return o.binaryShiftByteCount===2078&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=co(s,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new ps(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let s=this.bitCount+(Qn[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?s+=ps.calculateBinaryShiftCost(e)-ps.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(s+=10),s<=e.bitCount}toBitArray(e){let s=[];for(let i=this.endBinaryShift(e.length).token;i!==null;i=i.getPrevious())s.unshift(i);let r=new K;for(const i of s)i.appendTo(r,e);return r}toString(){return B.format("%s bits=%d bytes=%d",uo[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}ps.INITIAL_STATE=new ps(ma,Rr,0,0);function xo(b){const e=B.getCharCode(" "),s=B.getCharCode("."),r=B.getCharCode(",");b[Rr][e]=1;const i=B.getCharCode("Z"),a=B.getCharCode("A");for(let S=a;S<=i;S++)b[Rr][S]=S-a+2;b[Kr][e]=1;const o=B.getCharCode("z"),c=B.getCharCode("a");for(let S=c;S<=o;S++)b[Kr][S]=S-c+2;b[ls][e]=1;const x=B.getCharCode("9"),p=B.getCharCode("0");for(let S=p;S<=x;S++)b[ls][S]=S-p+2;b[ls][r]=12,b[ls][s]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<R.length;S++)b[xa][B.getCharCode(R[S])]=S;const v=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<v.length;S++)B.getCharCode(v[S])>0&&(b[Xs][B.getCharCode(v[S])]=S);return b}const _i=xo(ue.createInt32Array(5,256));class Cn{constructor(e){this.text=e}encode(){const e=B.getCharCode(" "),s=B.getCharCode(`
`);let r=Ai.singletonList(ps.INITIAL_STATE);for(let a=0;a<this.text.length;a++){let o,c=a+1<this.text.length?this.text[a+1]:0;switch(this.text[a]){case B.getCharCode("\r"):o=c===s?2:0;break;case B.getCharCode("."):o=c===e?3:0;break;case B.getCharCode(","):o=c===e?4:0;break;case B.getCharCode(":"):o=c===e?5:0;break;default:o=0}o>0?(r=Cn.updateStateListForPair(r,a,o),a++):r=this.updateStateListForChar(r,a)}return Ai.min(r,(a,o)=>a.getBitCount()-o.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,s){const r=[];for(let i of e)this.updateStateForChar(i,s,r);return Cn.simplifyStates(r)}updateStateForChar(e,s,r){let i=this.text[s]&255,a=_i[e.getMode()][i]>0,o=null;for(let c=0;c<=Xs;c++){let x=_i[c][i];if(x>0){if(o==null&&(o=e.endBinaryShift(s)),!a||c===e.getMode()||c===ls){const p=o.latchAndAppend(c,x);r.push(p)}if(!a&&Ti[e.getMode()][c]>=0){const p=o.shiftAndAppend(c,x);r.push(p)}}}if(e.getBinaryShiftByteCount()>0||_i[e.getMode()][i]===0){let c=e.addBinaryShiftChar(s);r.push(c)}}static updateStateListForPair(e,s,r){const i=[];for(let a of e)this.updateStateForPair(a,s,r,i);return this.simplifyStates(i)}static updateStateForPair(e,s,r,i){let a=e.endBinaryShift(s);if(i.push(a.latchAndAppend(Xs,r)),e.getMode()!==Xs&&i.push(a.shiftAndAppend(Xs,r)),r===3||r===4){let o=a.latchAndAppend(ls,16-r).latchAndAppend(ls,1);i.push(o)}if(e.getBinaryShiftByteCount()>0){let o=e.addBinaryShiftChar(s).addBinaryShiftChar(s+1);i.push(o)}}static simplifyStates(e){let s=[];for(const r of e){let i=!0;for(const a of s){if(a.isBetterThanOrEqualTo(r)){i=!1;break}r.isBetterThanOrEqualTo(a)&&(s=s.filter(o=>o!==a))}i&&s.push(r)}return s}}class dt{constructor(){}static encodeBytes(e){return dt.encode(e,dt.DEFAULT_EC_PERCENT,dt.DEFAULT_AZTEC_LAYERS)}static encode(e,s,r){let i=new Cn(e).encode(),a=te.truncDivision(i.getSize()*s,100)+11,o=i.getSize()+a,c,x,p,R,v;if(r!==dt.DEFAULT_AZTEC_LAYERS){if(c=r<0,x=Math.abs(r),x>(c?dt.MAX_NB_BITS_COMPACT:dt.MAX_NB_BITS))throw new _(B.format("Illegal value %s for layers",r));p=dt.totalBitsInLayer(x,c),R=dt.WORD_SIZE[x];let ve=p-p%R;if(v=dt.stuffBits(i,R),v.getSize()+a>ve)throw new _("Data to large for user specified layer");if(c&&v.getSize()>R*64)throw new _("Data to large for user specified layer")}else{R=0,v=null;for(let ve=0;;ve++){if(ve>dt.MAX_NB_BITS)throw new _("Data too large for an Aztec code");if(c=ve<=3,x=c?ve+1:ve,p=dt.totalBitsInLayer(x,c),o>p)continue;(v==null||R!==dt.WORD_SIZE[x])&&(R=dt.WORD_SIZE[x],v=dt.stuffBits(i,R));let it=p-p%R;if(!(c&&v.getSize()>R*64)&&v.getSize()+a<=it)break}}let S=dt.generateCheckWords(v,p,R),P=v.getSize()/R,H=dt.generateModeMessage(c,x,P),Y=(c?11:14)+x*4,se=new Int32Array(Y),he;if(c){he=Y;for(let ve=0;ve<se.length;ve++)se[ve]=ve}else{he=Y+1+2*te.truncDivision(te.truncDivision(Y,2)-1,15);let ve=te.truncDivision(Y,2),it=te.truncDivision(he,2);for(let Je=0;Je<ve;Je++){let Rs=Je+te.truncDivision(Je,15);se[ve-Je-1]=it-Rs-1,se[ve+Je]=it+Rs+1}}let ke=new ge(he);for(let ve=0,it=0;ve<x;ve++){let Je=(x-ve)*4+(c?9:12);for(let Rs=0;Rs<Je;Rs++){let Ys=Rs*2;for(let Zt=0;Zt<2;Zt++)S.get(it+Ys+Zt)&&ke.set(se[ve*2+Zt],se[ve*2+Rs]),S.get(it+Je*2+Ys+Zt)&&ke.set(se[ve*2+Rs],se[Y-1-ve*2-Zt]),S.get(it+Je*4+Ys+Zt)&&ke.set(se[Y-1-ve*2-Zt],se[Y-1-ve*2-Rs]),S.get(it+Je*6+Ys+Zt)&&ke.set(se[Y-1-ve*2-Rs],se[ve*2+Zt])}it+=Je*8}if(dt.drawModeMessage(ke,c,he,H),c)dt.drawBullsEye(ke,te.truncDivision(he,2),5);else{dt.drawBullsEye(ke,te.truncDivision(he,2),7);for(let ve=0,it=0;ve<te.truncDivision(Y,2)-1;ve+=15,it+=16)for(let Je=te.truncDivision(he,2)&1;Je<he;Je+=2)ke.set(te.truncDivision(he,2)-it,Je),ke.set(te.truncDivision(he,2)+it,Je),ke.set(Je,te.truncDivision(he,2)-it),ke.set(Je,te.truncDivision(he,2)+it)}let Ae=new da;return Ae.setCompact(c),Ae.setSize(he),Ae.setLayers(x),Ae.setCodeWords(P),Ae.setMatrix(ke),Ae}static drawBullsEye(e,s,r){for(let i=0;i<r;i+=2)for(let a=s-i;a<=s+i;a++)e.set(a,s-i),e.set(a,s+i),e.set(s-i,a),e.set(s+i,a);e.set(s-r,s-r),e.set(s-r+1,s-r),e.set(s-r,s-r+1),e.set(s+r,s-r),e.set(s+r,s-r+1),e.set(s+r,s+r-1)}static generateModeMessage(e,s,r){let i=new K;return e?(i.appendBits(s-1,2),i.appendBits(r-1,6),i=dt.generateCheckWords(i,28,4)):(i.appendBits(s-1,5),i.appendBits(r-1,11),i=dt.generateCheckWords(i,40,4)),i}static drawModeMessage(e,s,r,i){let a=te.truncDivision(r,2);if(s)for(let o=0;o<7;o++){let c=a-3+o;i.get(o)&&e.set(c,a-5),i.get(o+7)&&e.set(a+5,c),i.get(20-o)&&e.set(c,a+5),i.get(27-o)&&e.set(a-5,c)}else for(let o=0;o<10;o++){let c=a-5+o+te.truncDivision(o,5);i.get(o)&&e.set(c,a-7),i.get(o+10)&&e.set(a+7,c),i.get(29-o)&&e.set(c,a+7),i.get(39-o)&&e.set(a-7,c)}}static generateCheckWords(e,s,r){let i=e.getSize()/r,a=new Si(dt.getGF(r)),o=te.truncDivision(s,r),c=dt.bitsToWords(e,r,o);a.encode(c,o-i);let x=s%r,p=new K;p.appendBits(0,x);for(const R of Array.from(c))p.appendBits(R,r);return p}static bitsToWords(e,s,r){let i=new Int32Array(r),a,o;for(a=0,o=e.getSize()/s;a<o;a++){let c=0;for(let x=0;x<s;x++)c|=e.get(a*s+x)?1<<s-x-1:0;i[a]=c}return i}static getGF(e){switch(e){case 4:return rt.AZTEC_PARAM;case 6:return rt.AZTEC_DATA_6;case 8:return rt.AZTEC_DATA_8;case 10:return rt.AZTEC_DATA_10;case 12:return rt.AZTEC_DATA_12;default:throw new _("Unsupported word size "+e)}}static stuffBits(e,s){let r=new K,i=e.getSize(),a=(1<<s)-2;for(let o=0;o<i;o+=s){let c=0;for(let x=0;x<s;x++)(o+x>=i||e.get(o+x))&&(c|=1<<s-1-x);(c&a)===a?(r.appendBits(c&a,s),o--):(c&a)===0?(r.appendBits(c|1,s),o--):r.appendBits(c,s)}return r}static totalBitsInLayer(e,s){return((s?88:112)+16*e)*e}}dt.DEFAULT_EC_PERCENT=33,dt.DEFAULT_AZTEC_LAYERS=0,dt.MAX_NB_BITS=32,dt.MAX_NB_BITS_COMPACT=4,dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Sn{encode(e,s,r,i){return this.encodeWithHints(e,s,r,i,null)}encodeWithHints(e,s,r,i,a){let o=ki.ISO_8859_1,c=dt.DEFAULT_EC_PERCENT,x=dt.DEFAULT_AZTEC_LAYERS;return a!=null&&(a.has(Yt.CHARACTER_SET)&&(o=ua.forName(a.get(Yt.CHARACTER_SET).toString())),a.has(Yt.ERROR_CORRECTION)&&(c=te.parseInt(a.get(Yt.ERROR_CORRECTION).toString())),a.has(Yt.AZTEC_LAYERS)&&(x=te.parseInt(a.get(Yt.AZTEC_LAYERS).toString()))),Sn.encodeLayers(e,s,r,i,o,c,x)}static encodeLayers(e,s,r,i,a,o,c){if(s!==je.AZTEC)throw new _("Can only encode AZTEC, but got "+s);let x=dt.encode(B.getBytes(e,a),o,c);return Sn.renderResult(x,r,i)}static renderResult(e,s,r){let i=e.getMatrix();if(i==null)throw new as;let a=i.getWidth(),o=i.getHeight(),c=Math.max(s,a),x=Math.max(r,o),p=Math.min(c/a,x/o),R=(c-a*p)/2,v=(x-o*p)/2,S=new ge(c,x);for(let P=0,H=v;P<o;P++,H+=p)for(let Y=0,se=R;Y<a;Y++,se+=p)i.get(Y,P)&&S.setRegion(se,H,p,p);return S}}m.AbstractExpandedDecoder=gi,m.ArgumentException=M,m.ArithmeticException=Ss,m.AztecCode=da,m.AztecCodeReader=ut,m.AztecCodeWriter=Sn,m.AztecDecoder=gt,m.AztecDetector=qt,m.AztecDetectorResult=hn,m.AztecEncoder=dt,m.AztecHighLevelEncoder=Cn,m.AztecPoint=jt,m.BarcodeFormat=je,m.Binarizer=ie,m.BinaryBitmap=J,m.BitArray=K,m.BitMatrix=ge,m.BitSource=ji,m.BrowserAztecCodeReader=Gt,m.BrowserBarcodeReader=ra,m.BrowserCodeReader=Ie,m.BrowserDatamatrixCodeReader=io,m.BrowserMultiFormatReader=bn,m.BrowserPDF417Reader=Yn,m.BrowserQRCodeReader=ca,m.BrowserQRCodeSvgWriter=Tr,m.CharacterSetECI=Q,m.ChecksumException=W,m.Code128Reader=_e,m.Code39Reader=Vt,m.DataMatrixDecodedBitStreamParser=zs,m.DataMatrixReader=Gs,m.DecodeHintType=re,m.DecoderResult=Fe,m.DefaultGridSampler=at,m.DetectorResult=cr,m.EAN13Reader=Ms,m.EncodeHintType=Yt,m.Exception=w,m.FormatException=F,m.GenericGF=rt,m.GenericGFPoly=ct,m.GlobalHistogramBinarizer=ne,m.GridSampler=Wr,m.GridSamplerInstance=mt,m.HTMLCanvasElementLuminanceSource=z,m.HybridBinarizer=le,m.ITFReader=yt,m.IllegalArgumentException=_,m.IllegalStateException=as,m.InvertedLuminanceSource=ye,m.LuminanceSource=de,m.MathUtils=nt,m.MultiFormatOneDReader=zr,m.MultiFormatReader=Xn,m.MultiFormatWriter=oo,m.NotFoundException=I,m.OneDReader=Bt,m.PDF417DecodedBitStreamParser=pe,m.PDF417DecoderErrorCorrection=bi,m.PDF417Reader=rs,m.PDF417ResultMetadata=Gn,m.PerspectiveTransform=Oe,m.PlanarYUVLuminanceSource=sr,m.QRCodeByteMatrix=Zn,m.QRCodeDataMask=st,m.QRCodeDecodedBitStreamParser=At,m.QRCodeDecoderErrorCorrectionLevel=Rt,m.QRCodeDecoderFormatInformation=es,m.QRCodeEncoder=vt,m.QRCodeEncoderQRCode=Ir,m.QRCodeMaskUtil=It,m.QRCodeMatrixUtil=Xe,m.QRCodeMode=Ge,m.QRCodeReader=hs,m.QRCodeVersion=ze,m.QRCodeWriter=Qr,m.RGBLuminanceSource=vn,m.RSS14Reader=Nt,m.RSSExpandedReader=we,m.ReaderException=Zr,m.ReedSolomonDecoder=xs,m.ReedSolomonEncoder=Si,m.ReedSolomonException=ks,m.Result=ee,m.ResultMetadataType=Be,m.ResultPoint=Pe,m.StringUtils=B,m.UnsupportedOperationException=xe,m.VideoInputDevice=D,m.WhiteRectangleDetector=_s,m.WriterException=bt,m.ZXingArrays=ue,m.ZXingCharset=ua,m.ZXingInteger=te,m.ZXingStandardCharsets=ki,m.ZXingStringBuilder=Z,m.ZXingStringEncoding=Ce,m.ZXingSystem=q,m.createAbstractExpandedDecoder=ta,Object.defineProperty(m,"__esModule",{value:!0})}))})(zxingJs_umd$1,zxingJs_umd$1.exports)),zxingJs_umd$1.exports}var zxingJs_umdExports=requireZxingJs_umd();const ZXing=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var ZXingHtml5QrcodeDecoder=(function(){function d(h,m,E){if(this.formatMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,zxingJs_umdExports.BarcodeFormat.QR_CODE],[Html5QrcodeSupportedFormats.AZTEC,zxingJs_umdExports.BarcodeFormat.AZTEC],[Html5QrcodeSupportedFormats.CODABAR,zxingJs_umdExports.BarcodeFormat.CODABAR],[Html5QrcodeSupportedFormats.CODE_39,zxingJs_umdExports.BarcodeFormat.CODE_39],[Html5QrcodeSupportedFormats.CODE_93,zxingJs_umdExports.BarcodeFormat.CODE_93],[Html5QrcodeSupportedFormats.CODE_128,zxingJs_umdExports.BarcodeFormat.CODE_128],[Html5QrcodeSupportedFormats.DATA_MATRIX,zxingJs_umdExports.BarcodeFormat.DATA_MATRIX],[Html5QrcodeSupportedFormats.MAXICODE,zxingJs_umdExports.BarcodeFormat.MAXICODE],[Html5QrcodeSupportedFormats.ITF,zxingJs_umdExports.BarcodeFormat.ITF],[Html5QrcodeSupportedFormats.EAN_13,zxingJs_umdExports.BarcodeFormat.EAN_13],[Html5QrcodeSupportedFormats.EAN_8,zxingJs_umdExports.BarcodeFormat.EAN_8],[Html5QrcodeSupportedFormats.PDF_417,zxingJs_umdExports.BarcodeFormat.PDF_417],[Html5QrcodeSupportedFormats.RSS_14,zxingJs_umdExports.BarcodeFormat.RSS_14],[Html5QrcodeSupportedFormats.RSS_EXPANDED,zxingJs_umdExports.BarcodeFormat.RSS_EXPANDED],[Html5QrcodeSupportedFormats.UPC_A,zxingJs_umdExports.BarcodeFormat.UPC_A],[Html5QrcodeSupportedFormats.UPC_E,zxingJs_umdExports.BarcodeFormat.UPC_E],[Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION,zxingJs_umdExports.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ZXing)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=m,this.logger=E;var j=this.createZXingFormats(h),g=new Map;g.set(zxingJs_umdExports.DecodeHintType.POSSIBLE_FORMATS,j),g.set(zxingJs_umdExports.DecodeHintType.TRY_HARDER,!1),this.hints=g}return d.prototype.decodeAsync=function(h){var m=this;return new Promise(function(E,j){try{E(m.decode(h))}catch(g){j(g)}})},d.prototype.decode=function(h){var m=new zxingJs_umdExports.MultiFormatReader(this.verbose,this.hints),E=new zxingJs_umdExports.HTMLCanvasElementLuminanceSource(h),j=new zxingJs_umdExports.BinaryBitmap(new zxingJs_umdExports.HybridBinarizer(E)),g=m.decode(j);return{text:g.text,format:QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},d.prototype.createReverseFormatMap=function(){var h=new Map;return this.formatMap.forEach(function(m,E,j){h.set(m,E)}),h},d.prototype.toHtml5QrcodeSupportedFormats=function(h){if(!this.reverseFormatMap.has(h))throw"reverseFormatMap doesn't have ".concat(h);return this.reverseFormatMap.get(h)},d.prototype.createZXingFormats=function(h){for(var m=[],E=0,j=h;E<j.length;E++){var g=j[E];this.formatMap.has(g)?m.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return m},d.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},d})(),__awaiter$4=function(d,h,m,E){function j(g){return g instanceof m?g:new m(function(N){N(g)})}return new(m||(m=Promise))(function(g,N){function k(M){try{w(E.next(M))}catch(_){N(_)}}function A(M){try{w(E.throw(M))}catch(_){N(_)}}function w(M){M.done?g(M.value):j(M.value).then(k,A)}w((E=E.apply(d,h||[])).next())})},__generator$4=function(d,h){var m={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,j,g,N;return N={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function k(w){return function(M){return A([w,M])}}function A(w){if(E)throw new TypeError("Generator is already executing.");for(;N&&(N=0,w[0]&&(m=0)),m;)try{if(E=1,j&&(g=w[0]&2?j.return:w[0]?j.throw||((g=j.return)&&g.call(j),0):j.next)&&!(g=g.call(j,w[1])).done)return g;switch(j=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return m.label++,{value:w[1],done:!1};case 5:m.label++,j=w[1],w=[0];continue;case 7:w=m.ops.pop(),m.trys.pop();continue;default:if(g=m.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){m=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){m.label=w[1];break}if(w[0]===6&&m.label<g[1]){m.label=g[1],g=w;break}if(g&&m.label<g[2]){m.label=g[2],m.ops.push(w);break}g[2]&&m.ops.pop(),m.trys.pop();continue}w=h.call(d,m)}catch(M){w=[6,M],j=0}finally{E=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},BarcodeDetectorDelegate=(function(){function d(h,m,E){if(this.formatMap=new Map([[Html5QrcodeSupportedFormats.QR_CODE,"qr_code"],[Html5QrcodeSupportedFormats.AZTEC,"aztec"],[Html5QrcodeSupportedFormats.CODABAR,"codabar"],[Html5QrcodeSupportedFormats.CODE_39,"code_39"],[Html5QrcodeSupportedFormats.CODE_93,"code_93"],[Html5QrcodeSupportedFormats.CODE_128,"code_128"],[Html5QrcodeSupportedFormats.DATA_MATRIX,"data_matrix"],[Html5QrcodeSupportedFormats.ITF,"itf"],[Html5QrcodeSupportedFormats.EAN_13,"ean_13"],[Html5QrcodeSupportedFormats.EAN_8,"ean_8"],[Html5QrcodeSupportedFormats.PDF_417,"pdf417"],[Html5QrcodeSupportedFormats.UPC_A,"upc_a"],[Html5QrcodeSupportedFormats.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!d.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=m,this.logger=E;var j=this.createBarcodeDetectorFormats(h);if(this.detector=new BarcodeDetector(j),!this.detector)throw"BarcodeDetector detector not supported"}return d.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var h=new BarcodeDetector({formats:["qr_code"]});return typeof h<"u"},d.prototype.decodeAsync=function(h){return __awaiter$4(this,void 0,void 0,function(){var m,E;return __generator$4(this,function(j){switch(j.label){case 0:return[4,this.detector.detect(h)];case 1:if(m=j.sent(),!m||m.length===0)throw"No barcode or QR code detected.";return E=this.selectLargestBarcode(m),[2,{text:E.rawValue,format:QrcodeResultFormat.create(this.toHtml5QrcodeSupportedFormats(E.format)),debugData:this.createDebugData()}]}})})},d.prototype.selectLargestBarcode=function(h){for(var m=null,E=0,j=0,g=h;j<g.length;j++){var N=g[j],k=N.boundingBox.width*N.boundingBox.height;k>E&&(E=k,m=N)}if(!m)throw"No largest barcode found";return m},d.prototype.createBarcodeDetectorFormats=function(h){for(var m=[],E=0,j=h;E<j.length;E++){var g=j[E];this.formatMap.has(g)?m.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:m}},d.prototype.toHtml5QrcodeSupportedFormats=function(h){if(!this.reverseFormatMap.has(h))throw"reverseFormatMap doesn't have ".concat(h);return this.reverseFormatMap.get(h)},d.prototype.createReverseFormatMap=function(){var h=new Map;return this.formatMap.forEach(function(m,E,j){h.set(m,E)}),h},d.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},d})(),__awaiter$3=function(d,h,m,E){function j(g){return g instanceof m?g:new m(function(N){N(g)})}return new(m||(m=Promise))(function(g,N){function k(M){try{w(E.next(M))}catch(_){N(_)}}function A(M){try{w(E.throw(M))}catch(_){N(_)}}function w(M){M.done?g(M.value):j(M.value).then(k,A)}w((E=E.apply(d,h||[])).next())})},__generator$3=function(d,h){var m={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,j,g,N;return N={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function k(w){return function(M){return A([w,M])}}function A(w){if(E)throw new TypeError("Generator is already executing.");for(;N&&(N=0,w[0]&&(m=0)),m;)try{if(E=1,j&&(g=w[0]&2?j.return:w[0]?j.throw||((g=j.return)&&g.call(j),0):j.next)&&!(g=g.call(j,w[1])).done)return g;switch(j=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return m.label++,{value:w[1],done:!1};case 5:m.label++,j=w[1],w=[0];continue;case 7:w=m.ops.pop(),m.trys.pop();continue;default:if(g=m.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){m=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){m.label=w[1];break}if(w[0]===6&&m.label<g[1]){m.label=g[1],g=w;break}if(g&&m.label<g[2]){m.label=g[2],m.ops.push(w);break}g[2]&&m.ops.pop(),m.trys.pop();continue}w=h.call(d,m)}catch(M){w=[6,M],j=0}finally{E=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Html5QrcodeShim=(function(){function d(h,m,E,j){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=E,m&&BarcodeDetectorDelegate.isSupported()?(this.primaryDecoder=new BarcodeDetectorDelegate(h,E,j),this.secondaryDecoder=new ZXingHtml5QrcodeDecoder(h,E,j)):this.primaryDecoder=new ZXingHtml5QrcodeDecoder(h,E,j)}return d.prototype.decodeAsync=function(h){return __awaiter$3(this,void 0,void 0,function(){var m;return __generator$3(this,function(E){switch(E.label){case 0:m=performance.now(),E.label=1;case 1:return E.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(h)];case 2:return[2,E.sent()];case 3:return this.possiblyLogPerformance(m),[7];case 4:return[2]}})})},d.prototype.decodeRobustlyAsync=function(h){return __awaiter$3(this,void 0,void 0,function(){var m,E;return __generator$3(this,function(j){switch(j.label){case 0:m=performance.now(),j.label=1;case 1:return j.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(h)];case 2:return[2,j.sent()];case 3:if(E=j.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(h)];throw E;case 4:return this.possiblyLogPerformance(m),[7];case 5:return[2]}})})},d.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},d.prototype.possiblyLogPerformance=function(h){if(this.verbose){var m=performance.now()-h;this.executionResults.push(m),this.executions++,this.possiblyFlushPerformanceReport()}},d.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var h=0,m=0,E=this.executionResults;m<E.length;m++){var j=E[m];h+=j}var g=h/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},d})(),__extends$1=(function(){var d=function(h,m){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,j){E.__proto__=j}||function(E,j){for(var g in j)Object.prototype.hasOwnProperty.call(j,g)&&(E[g]=j[g])},d(h,m)};return function(h,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");d(h,m);function E(){this.constructor=h}h.prototype=m===null?Object.create(m):(E.prototype=m.prototype,new E)}})(),__awaiter$2=function(d,h,m,E){function j(g){return g instanceof m?g:new m(function(N){N(g)})}return new(m||(m=Promise))(function(g,N){function k(M){try{w(E.next(M))}catch(_){N(_)}}function A(M){try{w(E.throw(M))}catch(_){N(_)}}function w(M){M.done?g(M.value):j(M.value).then(k,A)}w((E=E.apply(d,h||[])).next())})},__generator$2=function(d,h){var m={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,j,g,N;return N={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function k(w){return function(M){return A([w,M])}}function A(w){if(E)throw new TypeError("Generator is already executing.");for(;N&&(N=0,w[0]&&(m=0)),m;)try{if(E=1,j&&(g=w[0]&2?j.return:w[0]?j.throw||((g=j.return)&&g.call(j),0):j.next)&&!(g=g.call(j,w[1])).done)return g;switch(j=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return m.label++,{value:w[1],done:!1};case 5:m.label++,j=w[1],w=[0];continue;case 7:w=m.ops.pop(),m.trys.pop();continue;default:if(g=m.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){m=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){m.label=w[1];break}if(w[0]===6&&m.label<g[1]){m.label=g[1],g=w;break}if(g&&m.label<g[2]){m.label=g[2],m.ops.push(w);break}g[2]&&m.ops.pop(),m.trys.pop();continue}w=h.call(d,m)}catch(M){w=[6,M],j=0}finally{E=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},AbstractCameraCapability=(function(){function d(h,m){this.name=h,this.track=m}return d.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},d.prototype.apply=function(h){var m={};m[this.name]=h;var E={advanced:[m]};return this.track.applyConstraints(E)},d.prototype.value=function(){var h=this.track.getSettings();if(this.name in h){var m=h[this.name];return m}return null},d})(),AbstractRangeCameraCapability=(function(d){__extends$1(h,d);function h(m,E){return d.call(this,m,E)||this}return h.prototype.min=function(){return this.getCapabilities().min},h.prototype.max=function(){return this.getCapabilities().max},h.prototype.step=function(){return this.getCapabilities().step},h.prototype.apply=function(m){var E={};E[this.name]=m;var j={advanced:[E]};return this.track.applyConstraints(j)},h.prototype.getCapabilities=function(){this.failIfNotSupported();var m=this.track.getCapabilities(),E=m[this.name];return{min:E.min,max:E.max,step:E.step}},h.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},h})(AbstractCameraCapability),ZoomFeatureImpl=(function(d){__extends$1(h,d);function h(m){return d.call(this,"zoom",m)||this}return h})(AbstractRangeCameraCapability),TorchFeatureImpl=(function(d){__extends$1(h,d);function h(m){return d.call(this,"torch",m)||this}return h})(AbstractCameraCapability),CameraCapabilitiesImpl=(function(){function d(h){this.track=h}return d.prototype.zoomFeature=function(){return new ZoomFeatureImpl(this.track)},d.prototype.torchFeature=function(){return new TorchFeatureImpl(this.track)},d})(),RenderedCameraImpl=(function(){function d(h,m,E){this.isClosed=!1,this.parentElement=h,this.mediaStream=m,this.callbacks=E,this.surface=this.createVideoElement(this.parentElement.clientWidth),h.append(this.surface)}return d.prototype.createVideoElement=function(h){var m=document.createElement("video");return m.style.width="".concat(h,"px"),m.style.display="block",m.muted=!0,m.setAttribute("muted","true"),m.playsInline=!0,m},d.prototype.setupSurface=function(){var h=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var m=function(){var E=h.surface.clientWidth,j=h.surface.clientHeight;h.callbacks.onRenderSurfaceReady(E,j),h.surface.removeEventListener("playing",m)};this.surface.addEventListener("playing",m),this.surface.srcObject=this.mediaStream,this.surface.play()},d.create=function(h,m,E,j){return __awaiter$2(this,void 0,void 0,function(){var g,N;return __generator$2(this,function(k){switch(k.label){case 0:return g=new d(h,m,j),E.aspectRatio?(N={aspectRatio:E.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(N)]):[3,2];case 1:k.sent(),k.label=2;case 2:return g.setupSurface(),[2,g]}})})},d.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},d.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},d.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},d.prototype.resume=function(h){this.failIfClosed();var m=this,E=function(){setTimeout(h,200),m.surface.removeEventListener("playing",E)};this.surface.addEventListener("playing",E),this.surface.play()},d.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},d.prototype.getSurface=function(){return this.failIfClosed(),this.surface},d.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},d.prototype.applyVideoConstraints=function(h){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(m){if("aspectRatio"in h)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(h)]})})},d.prototype.close=function(){if(this.isClosed)return Promise.resolve();var h=this;return new Promise(function(m,E){var j=h.mediaStream.getVideoTracks(),g=j.length,N=0;h.mediaStream.getVideoTracks().forEach(function(k){h.mediaStream.removeTrack(k),k.stop(),++N,N>=g&&(h.isClosed=!0,h.parentElement.removeChild(h.surface),m())})})},d.prototype.getCapabilities=function(){return new CameraCapabilitiesImpl(this.getFirstTrackOrFail())},d})(),CameraImpl=(function(){function d(h){this.mediaStream=h}return d.prototype.render=function(h,m,E){return __awaiter$2(this,void 0,void 0,function(){return __generator$2(this,function(j){return[2,RenderedCameraImpl.create(h,this.mediaStream,m,E)]})})},d.create=function(h){return __awaiter$2(this,void 0,void 0,function(){var m,E;return __generator$2(this,function(j){switch(j.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return m={audio:!1,video:h},[4,navigator.mediaDevices.getUserMedia(m)];case 1:return E=j.sent(),[2,new d(E)]}})})},d})(),__awaiter$1=function(d,h,m,E){function j(g){return g instanceof m?g:new m(function(N){N(g)})}return new(m||(m=Promise))(function(g,N){function k(M){try{w(E.next(M))}catch(_){N(_)}}function A(M){try{w(E.throw(M))}catch(_){N(_)}}function w(M){M.done?g(M.value):j(M.value).then(k,A)}w((E=E.apply(d,h||[])).next())})},__generator$1=function(d,h){var m={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,j,g,N;return N={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function k(w){return function(M){return A([w,M])}}function A(w){if(E)throw new TypeError("Generator is already executing.");for(;N&&(N=0,w[0]&&(m=0)),m;)try{if(E=1,j&&(g=w[0]&2?j.return:w[0]?j.throw||((g=j.return)&&g.call(j),0):j.next)&&!(g=g.call(j,w[1])).done)return g;switch(j=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return m.label++,{value:w[1],done:!1};case 5:m.label++,j=w[1],w=[0];continue;case 7:w=m.ops.pop(),m.trys.pop();continue;default:if(g=m.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){m=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){m.label=w[1];break}if(w[0]===6&&m.label<g[1]){m.label=g[1],g=w;break}if(g&&m.label<g[2]){m.label=g[2],m.ops.push(w);break}g[2]&&m.ops.pop(),m.trys.pop();continue}w=h.call(d,m)}catch(M){w=[6,M],j=0}finally{E=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},CameraFactory=(function(){function d(){}return d.failIfNotSupported=function(){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(h){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new d]})})},d.prototype.create=function(h){return __awaiter$1(this,void 0,void 0,function(){return __generator$1(this,function(m){return[2,CameraImpl.create(h)]})})},d})(),__awaiter=function(d,h,m,E){function j(g){return g instanceof m?g:new m(function(N){N(g)})}return new(m||(m=Promise))(function(g,N){function k(M){try{w(E.next(M))}catch(_){N(_)}}function A(M){try{w(E.throw(M))}catch(_){N(_)}}function w(M){M.done?g(M.value):j(M.value).then(k,A)}w((E=E.apply(d,h||[])).next())})},__generator=function(d,h){var m={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},E,j,g,N;return N={next:k(0),throw:k(1),return:k(2)},typeof Symbol=="function"&&(N[Symbol.iterator]=function(){return this}),N;function k(w){return function(M){return A([w,M])}}function A(w){if(E)throw new TypeError("Generator is already executing.");for(;N&&(N=0,w[0]&&(m=0)),m;)try{if(E=1,j&&(g=w[0]&2?j.return:w[0]?j.throw||((g=j.return)&&g.call(j),0):j.next)&&!(g=g.call(j,w[1])).done)return g;switch(j=0,g&&(w=[w[0]&2,g.value]),w[0]){case 0:case 1:g=w;break;case 4:return m.label++,{value:w[1],done:!1};case 5:m.label++,j=w[1],w=[0];continue;case 7:w=m.ops.pop(),m.trys.pop();continue;default:if(g=m.trys,!(g=g.length>0&&g[g.length-1])&&(w[0]===6||w[0]===2)){m=0;continue}if(w[0]===3&&(!g||w[1]>g[0]&&w[1]<g[3])){m.label=w[1];break}if(w[0]===6&&m.label<g[1]){m.label=g[1],g=w;break}if(g&&m.label<g[2]){m.label=g[2],m.ops.push(w);break}g[2]&&m.ops.pop(),m.trys.pop();continue}w=h.call(d,m)}catch(M){w=[6,M],j=0}finally{E=g=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},CameraRetriever=(function(){function d(){}return d.retrieve=function(){if(navigator.mediaDevices)return d.getCamerasFromMediaDevices();var h=MediaStreamTrack;return MediaStreamTrack&&h.getSources?d.getCamerasFromMediaStreamTrack():d.rejectWithError()},d.rejectWithError=function(){var h=Html5QrcodeStrings.unableToQuerySupportedDevices();return d.isHttpsOrLocalhost()||(h=Html5QrcodeStrings.insecureContextCameraQueryError()),Promise.reject(h)},d.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var h=location.host.split(":")[0];return h==="127.0.0.1"||h==="localhost"},d.getCamerasFromMediaDevices=function(){return __awaiter(this,void 0,void 0,function(){var h,m,E,j,g,N,k;return __generator(this,function(A){switch(A.label){case 0:return h=function(w){for(var M=w.getVideoTracks(),_=0,J=M;_<J.length;_++){var W=J[_];W.enabled=!1,W.stop(),w.removeTrack(W)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return m=A.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(E=A.sent(),j=[],g=0,N=E;g<N.length;g++)k=N[g],k.kind==="videoinput"&&j.push({id:k.deviceId,label:k.label});return h(m),[2,j]}})})},d.getCamerasFromMediaStreamTrack=function(){return new Promise(function(h,m){var E=function(g){for(var N=[],k=0,A=g;k<A.length;k++){var w=A[k];w.kind==="video"&&N.push({id:w.id,label:w.label})}h(N)},j=MediaStreamTrack;j.getSources(E)})},d})(),Html5QrcodeScannerState;(function(d){d[d.UNKNOWN=0]="UNKNOWN",d[d.NOT_STARTED=1]="NOT_STARTED",d[d.SCANNING=2]="SCANNING",d[d.PAUSED=3]="PAUSED"})(Html5QrcodeScannerState||(Html5QrcodeScannerState={}));var StateManagerImpl=(function(){function d(){this.state=Html5QrcodeScannerState.NOT_STARTED,this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN}return d.prototype.directTransition=function(h){this.failIfTransitionOngoing(),this.validateTransition(h),this.state=h},d.prototype.startTransition=function(h){return this.failIfTransitionOngoing(),this.validateTransition(h),this.onGoingTransactionNewState=h,this},d.prototype.execute=function(){if(this.onGoingTransactionNewState===Html5QrcodeScannerState.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var h=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN,this.directTransition(h)},d.prototype.cancel=function(){if(this.onGoingTransactionNewState===Html5QrcodeScannerState.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Html5QrcodeScannerState.UNKNOWN},d.prototype.getState=function(){return this.state},d.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Html5QrcodeScannerState.UNKNOWN)throw"Cannot transition to a new state, already under transition"},d.prototype.validateTransition=function(h){switch(this.state){case Html5QrcodeScannerState.UNKNOWN:throw"Transition from unknown is not allowed";case Html5QrcodeScannerState.NOT_STARTED:this.failIfNewStateIs(h,[Html5QrcodeScannerState.PAUSED]);break;case Html5QrcodeScannerState.SCANNING:break;case Html5QrcodeScannerState.PAUSED:break}},d.prototype.failIfNewStateIs=function(h,m){for(var E=0,j=m;E<j.length;E++){var g=j[E];if(h===g)throw"Cannot transition from ".concat(this.state," to ").concat(h)}},d})(),StateManagerProxy=(function(){function d(h){this.stateManager=h}return d.prototype.startTransition=function(h){return this.stateManager.startTransition(h)},d.prototype.directTransition=function(h){this.stateManager.directTransition(h)},d.prototype.getState=function(){return this.stateManager.getState()},d.prototype.canScanFile=function(){return this.stateManager.getState()===Html5QrcodeScannerState.NOT_STARTED},d.prototype.isScanning=function(){return this.stateManager.getState()!==Html5QrcodeScannerState.NOT_STARTED},d.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Html5QrcodeScannerState.SCANNING},d.prototype.isPaused=function(){return this.stateManager.getState()===Html5QrcodeScannerState.PAUSED},d})(),StateManagerFactory=(function(){function d(){}return d.create=function(){return new StateManagerProxy(new StateManagerImpl)},d})(),__extends=(function(){var d=function(h,m){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,j){E.__proto__=j}||function(E,j){for(var g in j)Object.prototype.hasOwnProperty.call(j,g)&&(E[g]=j[g])},d(h,m)};return function(h,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");d(h,m);function E(){this.constructor=h}h.prototype=m===null?Object.create(m):(E.prototype=m.prototype,new E)}})(),Constants=(function(d){__extends(h,d);function h(){return d!==null&&d.apply(this,arguments)||this}return h.DEFAULT_WIDTH=300,h.DEFAULT_WIDTH_OFFSET=2,h.FILE_SCAN_MIN_HEIGHT=300,h.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,h.MIN_QR_BOX_SIZE=50,h.SHADED_LEFT=1,h.SHADED_RIGHT=2,h.SHADED_TOP=3,h.SHADED_BOTTOM=4,h.SHADED_REGION_ELEMENT_ID="qr-shaded-region",h.VERBOSE=!1,h.BORDER_SHADER_DEFAULT_COLOR="#ffffff",h.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",h})(Html5QrcodeConstants),InternalHtml5QrcodeConfig=(function(){function d(h,m){this.logger=m,this.fps=Constants.SCAN_DEFAULT_FPS,h?(h.fps&&(this.fps=h.fps),this.disableFlip=h.disableFlip===!0,this.qrbox=h.qrbox,this.aspectRatio=h.aspectRatio,this.videoConstraints=h.videoConstraints):this.disableFlip=Constants.DEFAULT_DISABLE_FLIP}return d.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?VideoConstraintsUtil.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},d.prototype.isShadedBoxEnabled=function(){return!isNullOrUndefined(this.qrbox)},d.create=function(h,m){return new d(h,m)},d})(),Html5Qrcode=(function(){function d(h,m){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(h))throw"HTML Element with id=".concat(h," not found");this.elementId=h,this.verbose=!1;var E;typeof m=="boolean"?this.verbose=m===!0:m&&(E=m,this.verbose=E.verbose===!0,E.experimentalFeatures),this.logger=new BaseLoggger(this.verbose),this.qrcode=new Html5QrcodeShim(this.getSupportedFormats(m),this.getUseBarCodeDetectorIfSupported(E),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=StateManagerFactory.create()}return d.prototype.start=function(h,m,E,j){var g=this;if(!h)throw"cameraIdOrConfig is required";if(!E||typeof E!="function")throw"qrCodeSuccessCallback is required and should be a function.";var N;j?N=j:N=this.verbose?this.logger.log:function(){};var k=InternalHtml5QrcodeConfig.create(m,this.logger);this.clearElement();var A=!1;k.videoConstraints&&(k.isMediaStreamConstraintsValid()?A=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=A,M=document.getElementById(this.elementId);M.clientWidth?M.clientWidth:Constants.DEFAULT_WIDTH,M.style.position="relative",this.shouldScan=!0,this.element=M;var _=this,J=this.stateManagerProxy.startTransition(Html5QrcodeScannerState.SCANNING);return new Promise(function(W,ie){var q=w?k.videoConstraints:_.createVideoConstraints(h);if(!q){J.cancel(),ie("videoConstraints should be defined");return}var L={};(!w||k.aspectRatio)&&(L.aspectRatio=k.aspectRatio);var Ee={onRenderSurfaceReady:function(ue,te){_.setupUi(ue,te,k),_.isScanning=!0,_.foreverScan(k,E,N)}};CameraFactory.failIfNotSupported().then(function(ue){ue.create(q).then(function(te){return te.render(g.element,L,Ee).then(function(K){_.renderedCamera=K,J.execute(),W(null)}).catch(function(K){J.cancel(),ie(K)})}).catch(function(te){J.cancel(),ie(Html5QrcodeStrings.errorGettingUserMedia(te))})}).catch(function(ue){J.cancel(),ie(Html5QrcodeStrings.cameraStreamingNotSupported())})})},d.prototype.pause=function(h){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Html5QrcodeScannerState.PAUSED),this.showPausedState(),(isNullOrUndefined(h)||h!==!0)&&(h=!1),h&&this.renderedCamera&&this.renderedCamera.pause()},d.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var h=this,m=function(){h.stateManagerProxy.directTransition(Html5QrcodeScannerState.SCANNING),h.hidePausedState()};if(!this.renderedCamera.isPaused()){m();return}this.renderedCamera.resume(function(){m()})},d.prototype.getState=function(){return this.stateManagerProxy.getState()},d.prototype.stop=function(){var h=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var m=this.stateManagerProxy.startTransition(Html5QrcodeScannerState.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var E=function(){if(h.element){var g=document.getElementById(Constants.SHADED_REGION_ELEMENT_ID);g&&h.element.removeChild(g)}},j=this;return this.renderedCamera.close().then(function(){return j.renderedCamera=null,j.element&&(j.element.removeChild(j.canvasElement),j.canvasElement=null),E(),j.qrRegion&&(j.qrRegion=null),j.context&&(j.context=null),m.execute(),j.hidePausedState(),j.isScanning=!1,Promise.resolve()})},d.prototype.scanFile=function(h,m){return this.scanFileV2(h,m).then(function(E){return E.decodedText})},d.prototype.scanFileV2=function(h,m){var E=this;if(!h||!(h instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(isNullOrUndefined(m)&&(m=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(j,g){E.possiblyCloseLastScanImageFile(),E.clearElement(),E.lastScanImageFile=URL.createObjectURL(h);var N=new Image;N.onload=function(){var k=N.width,A=N.height,w=document.getElementById(E.elementId),M=w.clientWidth?w.clientWidth:Constants.DEFAULT_WIDTH,_=Math.max(w.clientHeight?w.clientHeight:A,Constants.FILE_SCAN_MIN_HEIGHT),J=E.computeCanvasDrawConfig(k,A,M,_);if(m){var W=E.createCanvasElement(M,_,"qr-canvas-visible");W.style.display="inline-block",w.appendChild(W);var ie=W.getContext("2d");if(!ie)throw"Unable to get 2d context from canvas";ie.canvas.width=M,ie.canvas.height=_,ie.drawImage(N,0,0,k,A,J.x,J.y,J.width,J.height)}var q=Constants.FILE_SCAN_HIDDEN_CANVAS_PADDING,L=Math.max(N.width,J.width),Ee=Math.max(N.height,J.height),ue=L+2*q,te=Ee+2*q,K=E.createCanvasElement(ue,te);w.appendChild(K);var me=K.getContext("2d");if(!me)throw"Unable to get 2d context from canvas";me.canvas.width=ue,me.canvas.height=te,me.drawImage(N,0,0,k,A,q,q,L,Ee);try{E.qrcode.decodeRobustlyAsync(K).then(function(re){j(Html5QrcodeResultFactory.createFromQrcodeResult(re))}).catch(g)}catch(re){g("QR code parse error, error = ".concat(re))}},N.onerror=g,N.onabort=g,N.onstalled=g,N.onsuspend=g,N.src=URL.createObjectURL(h)})},d.prototype.clear=function(){this.clearElement()},d.getCameras=function(){return CameraRetriever.retrieve()},d.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},d.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},d.prototype.applyVideoConstraints=function(h){if(h){if(!VideoConstraintsUtil.isMediaStreamConstraintsValid(h,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(h)},d.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},d.prototype.getSupportedFormats=function(h){var m=[Html5QrcodeSupportedFormats.QR_CODE,Html5QrcodeSupportedFormats.AZTEC,Html5QrcodeSupportedFormats.CODABAR,Html5QrcodeSupportedFormats.CODE_39,Html5QrcodeSupportedFormats.CODE_93,Html5QrcodeSupportedFormats.CODE_128,Html5QrcodeSupportedFormats.DATA_MATRIX,Html5QrcodeSupportedFormats.MAXICODE,Html5QrcodeSupportedFormats.ITF,Html5QrcodeSupportedFormats.EAN_13,Html5QrcodeSupportedFormats.EAN_8,Html5QrcodeSupportedFormats.PDF_417,Html5QrcodeSupportedFormats.RSS_14,Html5QrcodeSupportedFormats.RSS_EXPANDED,Html5QrcodeSupportedFormats.UPC_A,Html5QrcodeSupportedFormats.UPC_E,Html5QrcodeSupportedFormats.UPC_EAN_EXTENSION];if(!h||typeof h=="boolean"||!h.formatsToSupport)return m;if(!Array.isArray(h.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(h.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var E=[],j=0,g=h.formatsToSupport;j<g.length;j++){var N=g[j];isValidHtml5QrcodeSupportedFormats(N)?E.push(N):this.logger.warn("Invalid format: ".concat(N," passed in config, ignoring."))}if(E.length===0)throw"None of formatsToSupport match supported values.";return E},d.prototype.getUseBarCodeDetectorIfSupported=function(h){if(isNullOrUndefined(h))return!0;if(!isNullOrUndefined(h.useBarCodeDetectorIfSupported))return h.useBarCodeDetectorIfSupported!==!1;if(isNullOrUndefined(h.experimentalFeatures))return!0;var m=h.experimentalFeatures;return isNullOrUndefined(m.useBarCodeDetectorIfSupported)?!0:m.useBarCodeDetectorIfSupported!==!1},d.prototype.validateQrboxSize=function(h,m,E){var j=this,g=E.qrbox;this.validateQrboxConfig(g);var N=this.toQrdimensions(h,m,g),k=function(w){if(w<Constants.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Constants.MIN_QR_BOX_SIZE,"px.")},A=function(w){return w>h&&(j.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=h),w};k(N.width),k(N.height),N.width=A(N.width)},d.prototype.validateQrboxConfig=function(h){if(typeof h!="number"&&typeof h!="function"&&(h.width===void 0||h.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},d.prototype.toQrdimensions=function(h,m,E){if(typeof E=="number")return{width:E,height:E};if(typeof E=="function")try{return E(h,m)}catch(j){throw new Error("qrbox config was passed as a function but it failed with unknown error"+j)}return E},d.prototype.setupUi=function(h,m,E){E.isShadedBoxEnabled()&&this.validateQrboxSize(h,m,E);var j=isNullOrUndefined(E.qrbox)?{width:h,height:m}:E.qrbox;this.validateQrboxConfig(j);var g=this.toQrdimensions(h,m,j);g.height>m&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var N=E.isShadedBoxEnabled()&&g.height<=m,k={x:0,y:0,width:h,height:m},A=N?this.getShadedRegionBounds(h,m,g):k,w=this.createCanvasElement(A.width,A.height),M={willReadFrequently:!0},_=w.getContext("2d",M);_.canvas.width=A.width,_.canvas.height=A.height,this.element.append(w),N&&this.possiblyInsertShadingElement(this.element,h,m,g),this.createScannerPausedUiElement(this.element),this.qrRegion=A,this.context=_,this.canvasElement=w},d.prototype.createScannerPausedUiElement=function(h){var m=document.createElement("div");m.innerText=Html5QrcodeStrings.scannerPaused(),m.style.display="none",m.style.position="absolute",m.style.top="0px",m.style.zIndex="1",m.style.background="rgba(9, 9, 9, 0.46)",m.style.color="#FFECEC",m.style.textAlign="center",m.style.width="100%",h.appendChild(m),this.scannerPausedUiElement=m},d.prototype.scanContext=function(h,m){var E=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(j){return h(j.text,Html5QrcodeResultFactory.createFromQrcodeResult(j)),E.possiblyUpdateShaders(!0),!0}).catch(function(j){E.possiblyUpdateShaders(!1);var g=Html5QrcodeStrings.codeParseError(j);return m(g,Html5QrcodeErrorFactory.createFrom(g)),!1})},d.prototype.foreverScan=function(h,m,E){var j=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),N=g.videoWidth/g.clientWidth,k=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var A=this.qrRegion.width*N,w=this.qrRegion.height*k,M=this.qrRegion.x*N,_=this.qrRegion.y*k;this.context.drawImage(g,M,_,A,w,0,0,this.qrRegion.width,this.qrRegion.height);var J=function(){j.foreverScanTimeout=setTimeout(function(){j.foreverScan(h,m,E)},j.getTimeoutFps(h.fps))};this.scanContext(m,E).then(function(W){!W&&h.disableFlip!==!0?(j.context.translate(j.context.canvas.width,0),j.context.scale(-1,1),j.scanContext(m,E).finally(function(){J()})):J()}).catch(function(W){j.logger.logError("Error happend while scanning context",W),J()})}},d.prototype.createVideoConstraints=function(h){if(typeof h=="string")return{deviceId:{exact:h}};if(typeof h=="object"){var m="facingMode",E="deviceId",j={user:!0,environment:!0},g="exact",N=function(ie){if(ie in j)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(ie,"'")},k=Object.keys(h);if(k.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(k.length," keys");var A=Object.keys(h)[0];if(A!==m&&A!==E)throw"Only '".concat(m,"' and '").concat(E,"' ")+" are supported for 'cameraIdOrConfig'";if(A===m){var w=h.facingMode;if(typeof w=="string"){if(N(w))return{facingMode:w}}else if(typeof w=="object")if(g in w){if(N(w["".concat(g)]))return{facingMode:{exact:w["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var M=typeof w;throw"Invalid type of 'facingMode' = ".concat(M)}}else{var _=h.deviceId;if(typeof _=="string")return{deviceId:_};if(typeof _=="object"){if(g in _)return{deviceId:{exact:_["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var J=typeof _;throw"Invalid type of 'deviceId' = ".concat(J)}}}var W=typeof h;throw"Invalid type of 'cameraIdOrConfig' = ".concat(W)},d.prototype.computeCanvasDrawConfig=function(h,m,E,j){if(h<=E&&m<=j){var g=(E-h)/2,N=(j-m)/2;return{x:g,y:N,width:h,height:m}}else{var k=h,A=m;return h>E&&(m=E/h*m,h=E),m>j&&(h=j/m*h,m=j),this.logger.log("Image downsampled from "+"".concat(k,"X").concat(A)+" to ".concat(h,"X").concat(m,".")),this.computeCanvasDrawConfig(h,m,E,j)}},d.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var h=document.getElementById(this.elementId);h&&(h.innerHTML="")},d.prototype.possiblyUpdateShaders=function(h){this.qrMatch!==h&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(m){m.style.backgroundColor=h?Constants.BORDER_SHADER_MATCH_COLOR:Constants.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=h)},d.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},d.prototype.createCanvasElement=function(h,m,E){var j=h,g=m,N=document.createElement("canvas");return N.style.width="".concat(j,"px"),N.style.height="".concat(g,"px"),N.style.display="none",N.id=isNullOrUndefined(E)?"qr-canvas":E,N},d.prototype.getShadedRegionBounds=function(h,m,E){if(E.width>h||E.height>m)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(h-E.width)/2,y:(m-E.height)/2,width:E.width,height:E.height}},d.prototype.possiblyInsertShadingElement=function(h,m,E,j){if(!(m-j.width<1||E-j.height<1)){var g=document.createElement("div");g.style.position="absolute";var N=(m-j.width)/2,k=(E-j.height)/2;if(g.style.borderLeft="".concat(N,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(N,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(k,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(k,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(Constants.SHADED_REGION_ELEMENT_ID),m-j.width<11||E-j.height<11)this.hasBorderShaders=!1;else{var A=5,w=40;this.insertShaderBorders(g,w,A,-A,null,0,!0),this.insertShaderBorders(g,w,A,-A,null,0,!1),this.insertShaderBorders(g,w,A,null,-A,0,!0),this.insertShaderBorders(g,w,A,null,-A,0,!1),this.insertShaderBorders(g,A,w+A,-A,null,-A,!0),this.insertShaderBorders(g,A,w+A,null,-A,-A,!0),this.insertShaderBorders(g,A,w+A,-A,null,-A,!1),this.insertShaderBorders(g,A,w+A,null,-A,-A,!1),this.hasBorderShaders=!0}h.append(g)}},d.prototype.insertShaderBorders=function(h,m,E,j,g,N,k){var A=document.createElement("div");A.style.position="absolute",A.style.backgroundColor=Constants.BORDER_SHADER_DEFAULT_COLOR,A.style.width="".concat(m,"px"),A.style.height="".concat(E,"px"),j!==null&&(A.style.top="".concat(j,"px")),g!==null&&(A.style.bottom="".concat(g,"px")),k?A.style.left="".concat(N,"px"):A.style.right="".concat(N,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(A),h.appendChild(A)},d.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},d.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},d.prototype.getTimeoutFps=function(h){return 1e3/h},d})(),Html5QrcodeScannerStatus;(function(d){d[d.STATUS_DEFAULT=0]="STATUS_DEFAULT",d[d.STATUS_SUCCESS=1]="STATUS_SUCCESS",d[d.STATUS_WARNING=2]="STATUS_WARNING",d[d.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Html5QrcodeScannerStatus||(Html5QrcodeScannerStatus={}));function BarcodeScanner({isOpen:d,onScan:h,onClose:m}){const E=reactExports.useRef(null),j=reactExports.useRef(null),[g,N]=reactExports.useState(!1),[k,A]=reactExports.useState(null),[w,M]=reactExports.useState(!1),[_,J]=reactExports.useState(""),[W,ie]=reactExports.useState(null),[q,L]=reactExports.useState([]),Ee=reactExports.useCallback(async()=>{try{const re=await Html5Qrcode.getCameras();L(re);const F=re.find(U=>U.label.toLowerCase().includes("back")||U.label.toLowerCase().includes("rear")||U.label.toLowerCase().includes("environment"));return ie(F?.id||re[0]?.id),re}catch(re){return console.error("Error getting cameras:",re),A("Unable to access camera. Please grant camera permissions."),[]}},[]),ue=reactExports.useCallback(async()=>{if(!(!E.current||j.current))try{A(null),N(!1);const re=q.length>0?q:await Ee();if(re.length===0){A("No cameras found. Please connect a camera or use manual entry."),M(!0);return}const F=W||re[0]?.id,U=new Html5Qrcode("barcode-scanner-region");j.current=U,await U.start(F,{fps:15,qrbox:{width:300,height:120},aspectRatio:1.777,formatsToSupport:[0,1,2,3,4,5,6,7,8,9,10,11]},Q=>{navigator.vibrate&&navigator.vibrate(100),te(),h(Q)},Q=>{}),N(!0)}catch(re){console.error("Scanner start error:",re),A(re.message||"Failed to start camera. Please try manual entry."),M(!0)}},[W,q,Ee,h]),te=reactExports.useCallback(async()=>{if(j.current){try{await j.current.stop(),j.current.clear()}catch(re){console.error("Error stopping scanner:",re)}j.current=null}N(!1)},[]),K=reactExports.useCallback(()=>{_.trim()&&(te(),h(_.trim()),J(""),M(!1))},[_,h,te]),me=reactExports.useCallback(async()=>{if(q.length<=1)return;const F=(q.findIndex(Q=>Q.id===W)+1)%q.length,U=q[F].id;await te(),ie(U)},[q,W,te]);return reactExports.useEffect(()=>(d?ue():(te(),M(!1),J(""),A(null)),()=>{te()}),[d]),reactExports.useEffect(()=>{d&&W&&!w&&ue()},[W]),d?jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 z-50 bg-black flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-900/90",children:[jsxRuntimeExports.jsx("button",{onClick:m,className:"p-2 rounded-full bg-dark-800/80 hover:bg-dark-700",children:jsxRuntimeExports.jsx(X,{className:"w-6 h-6 text-white"})}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Scan Barcode"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:q.length>1&&jsxRuntimeExports.jsx("button",{onClick:me,className:"p-2 rounded-full bg-dark-800/80 hover:bg-dark-700",children:jsxRuntimeExports.jsx(Camera,{className:"w-6 h-6 text-white"})})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative flex items-center justify-center bg-black",children:[jsxRuntimeExports.jsx("div",{id:"barcode-scanner-region",ref:E,className:"w-full h-full",style:{minHeight:"300px"}}),g&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:jsxRuntimeExports.jsxs("div",{className:"relative w-72 h-40 border-2 border-accent-primary/50 rounded-lg",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-0 left-0 w-8 h-8 border-l-4 border-t-4 border-accent-primary rounded-tl-lg"}),jsxRuntimeExports.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 border-r-4 border-t-4 border-accent-primary rounded-tr-lg"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-8 border-l-4 border-b-4 border-accent-primary rounded-bl-lg"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-8 border-r-4 border-b-4 border-accent-primary rounded-br-lg"})]})})]}),jsxRuntimeExports.jsx("div",{className:"p-6 bg-dark-900",children:w?jsxRuntimeExports.jsxs("div",{className:"text-center",children:[k&&jsxRuntimeExports.jsx("p",{className:"text-amber-400 text-sm mb-3",children:k}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 mb-3",children:jsxRuntimeExports.jsx("input",{type:"text",value:_,onChange:re=>J(re.target.value),onKeyDown:re=>re.key==="Enter"&&K(),placeholder:"Enter barcode number",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 text-center text-lg tracking-wider",autoFocus:!0,inputMode:"numeric",pattern:"[0-9]*"})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{M(!1),J(""),A(null),ue()},className:"flex-1 px-4 py-3 bg-dark-700 text-white rounded-lg font-medium",children:"Back to Camera"}),jsxRuntimeExports.jsx("button",{onClick:K,disabled:!_.trim(),className:"flex-1 px-4 py-3 bg-accent-primary text-white rounded-lg font-medium disabled:opacity-50",children:"Search"})]})]}):k?jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-red-400 mb-4",children:k}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 justify-center",children:[jsxRuntimeExports.jsx("button",{onClick:()=>{A(null),ue()},className:"px-6 py-3 bg-accent-primary text-white rounded-lg font-medium",children:"Try Again"}),jsxRuntimeExports.jsxs("button",{onClick:()=>M(!0),className:"px-6 py-3 bg-dark-700 text-white rounded-lg font-medium flex items-center gap-2",children:[jsxRuntimeExports.jsx(Keyboard,{className:"w-4 h-4"}),"Enter Manually"]})]})]}):jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-white text-lg mb-2",children:g?"Position barcode within frame":"Starting camera..."}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mb-3",children:"Works with UPC, EAN, QR codes, and most product barcodes"}),jsxRuntimeExports.jsxs("button",{onClick:()=>M(!0),className:"text-accent-primary text-sm flex items-center gap-1 mx-auto",children:[jsxRuntimeExports.jsx(Keyboard,{className:"w-4 h-4"}),"Enter barcode manually"]})]})})]}):null}const calculateBMR=(d,h,m,E)=>{const j=10*d+6.25*h-5*m;return E==="male"?j+5:j-161};function calculateAthleteLevel(d){const{trainingHistory:h,yearsTraining:m,currentTrainingDays:E}=d;let j=0;h==="consistent"?j+=40:h==="some"?j+=20:j+=5;const g=parseFloat(m)||0;j+=Math.min(g*3.5,35);const N=parseInt(E)||0;return j+=Math.min(N*4,25),j>=86?{level:"elite",score:j,multiplier:1.4}:j>=61?{level:"advanced",score:j,multiplier:1.2}:j>=31?{level:"intermediate",score:j,multiplier:1}:{level:"beginner",score:j,multiplier:.8}}function calculateProgramLength(d){const{raceDate:h,aestheticGoalDate:m,targetDate:E,strengthGoalDate:j,programType:g,programSubtype:N}=d;let k=null;if(h?k=new Date(h):m?k=new Date(m):j?k=new Date(j):E&&(k=new Date(E)),k){const _=Math.ceil((k-new Date)/(1e3*60*60*24*7));return _>52?{totalWeeks:52,weeksUntilGoal:_}:_<4?{totalWeeks:4,weeksUntilGoal:_}:{totalWeeks:_,weeksUntilGoal:_}}return{totalWeeks:{endurance:{marathon:16,triathlon:20,running:12,cycling:12,swimming:12},strength:{powerlifting:12,olympic:16,strongman:12},aesthetic:{hypertrophy:12,"lean-muscle":16,recomp:16},fatloss:{aggressive:8,moderate:12,slow:16}}[g]?.[N]||12,weeksUntilGoal:null}}function generatePeriodizationPhases(d,h,m){const E=[],g=h==="endurance"&&["running","marathon","triathlon","cycling"].includes(m)?Math.min(3,Math.floor(d*.1)+1):0,N=d-g,k=5;let A=0;for(;A<N;){const w=Math.floor(A/k);if(A%k===4)E.push("Deload");else{const _=Math.ceil(N/k);w===0?E.push("Base"):w>=_-1&&A>=N-4?E.push("Peak"):E.push("Build")}A++}for(let w=0;w<g;w++)E.push("Taper");return E}const RACE_EQUIVALENCY={"5k":{factor:1,miles:3.1},"10k":{factor:2.09,miles:6.2},half:{factor:4.65,miles:13.1},full:{factor:9.8,miles:26.2},ultra:{factor:22,miles:50}};function parseTimeToMinutes(d){if(!d)return 0;const h=d.split(":").map(Number);return h.length===3?h[0]*60+h[1]+h[2]/60:h.length===2?h[0]+h[1]/60:0}function calculateEquivalentPace(d,h,m){const E=RACE_EQUIVALENCY[h]?.miles||6.2,j=RACE_EQUIVALENCY[m]?.miles||26.2,g=parseTimeToMinutes(d);return g<=0?null:g*Math.pow(j/E,1.06)/j}function calculatePaces(d,h,m=null,E=null){const g={"5k":3.1,"10k":6.2,half:13.1,full:26.2,ultra:50}[h]||26.2;let N=null,k=null;m&&E&&(k=calculateEquivalentPace(m,E,h));const A=parseTimeToMinutes(d);A>0&&(N=A/g);const w=k||N;return w?{goalPace:formatPace(N||w),currentPace:k?formatPace(k):null,easyPace:formatPace(w+1.5)+" - "+formatPace(w+2),tempoPace:formatPace(w+.25)+" - "+formatPace(w+.5),intervalPace:formatPace(w-.5)+" - "+formatPace(w-.25),longRunPace:formatPace(w+1)+" - "+formatPace(w+1.5),recoveryPace:formatPace(w+2)+" - "+formatPace(w+2.5)}:{goalPace:"8:00/mi",currentPace:null,easyPace:"9:30-10:00/mi",tempoPace:"7:00-7:30/mi",intervalPace:"6:30-7:00/mi",longRunPace:"8:30-9:00/mi",recoveryPace:"10:00-10:30/mi"}}function formatPace(d){const h=Math.floor(d),m=Math.round((d-h)*60);return`${h}:${m.toString().padStart(2,"0")}/mi`}function calculateTargetPeakMileage(d,h,m){const{level:E}=m,j={"5k":{min:25,max:40},"10k":{min:30,max:50},half:{min:35,max:55},full:{min:40,max:70},ultra:{min:50,max:80}},g=j[d]||j.full;let N=(g.min+g.max)/2;if(h){const k=parseFloat(h)||9;k<7?N=g.max:k<8?N=g.max*.9:k<9?N=(g.min+g.max)/2:N=g.min*1.1}return E==="elite"?N*=1.1:E==="advanced"?N*=1:E==="intermediate"?N*=.9:N*=.8,Math.round(N)}function calculateWeeklyMileage(d,h,m,E,j=null,g=null,N=null){let A=j;(!A||A<=0)&&(A=Math.round(h*.5)),A=Math.min(A,Math.round(h*.8));const M={"5k":10,"10k":15,half:20,full:25,ultra:30}[g]||15;if(A=Math.max(A,M),E==="Taper"){const W=m===d?.4:m===d-1?.5:.75;return Math.round(h*W)}if(E==="Deload"){const W=Math.min(A*Math.pow(1.1,m-1),h);return Math.round(W*.65)}const _=m;let J=A*Math.pow(1+.1,_-1);return J=Math.min(J,h),Math.round(J)}function calculateLongRunCap(d,h,m){const E=parseFloat(d)||10,{level:j}=m;return Math.min(E,j==="elite"?22:j==="advanced"?20:18)}const SPLIT_TEMPLATES={2:{strength:[{name:"Full Body A",focus:["legs","chest","back"]},{name:"Full Body B",focus:["legs","shoulders","back"]}],aesthetic:[{name:"Upper Body",focus:["chest","back","shoulders","arms"]},{name:"Lower Body",focus:["legs","glutes","core"]}]},3:{strength:[{name:"Squat Day",focus:["legs","core"]},{name:"Bench Day",focus:["chest","shoulders","triceps"]},{name:"Deadlift Day",focus:["posterior","back","biceps"]}],aesthetic:[{name:"Push",focus:["chest","shoulders","triceps"]},{name:"Pull",focus:["back","biceps","rear-delts"]},{name:"Legs",focus:["legs","glutes","core"]}]},4:{strength:[{name:"Heavy Squat",focus:["legs","core"]},{name:"Heavy Bench",focus:["chest","shoulders","triceps"]},{name:"Heavy Deadlift",focus:["posterior","back"]},{name:"Volume Upper",focus:["shoulders","chest","arms"]}],aesthetic:[{name:"Upper Push",focus:["chest","shoulders","triceps"]},{name:"Lower",focus:["legs","glutes"]},{name:"Upper Pull",focus:["back","biceps","rear-delts"]},{name:"Arms + Shoulders",focus:["shoulders","biceps","triceps"]}]},5:{strength:[{name:"Competition Squat",focus:["legs"]},{name:"Competition Bench",focus:["chest","triceps"]},{name:"Competition Deadlift",focus:["posterior","back"]},{name:"Volume Squat",focus:["legs","core"]},{name:"Volume Bench",focus:["shoulders","chest","arms"]}],aesthetic:[{name:"Chest + Triceps",focus:["chest","triceps"]},{name:"Back + Biceps",focus:["back","biceps"]},{name:"Shoulders + Rear Delts",focus:["shoulders","rear-delts"]},{name:"Legs",focus:["legs","glutes"]},{name:"Arms + Weak Points",focus:["biceps","triceps","core"]}]},6:{strength:[{name:"Heavy Squat",focus:["legs"]},{name:"Heavy Bench",focus:["chest","triceps"]},{name:"Heavy Deadlift",focus:["posterior","back"]},{name:"Speed Squat",focus:["legs","core"]},{name:"Speed Bench",focus:["chest","shoulders"]},{name:"Back + Arms",focus:["back","biceps","triceps"]}],aesthetic:[{name:"Push A (Heavy)",focus:["chest","shoulders","triceps"]},{name:"Pull A (Heavy)",focus:["back","biceps"]},{name:"Legs A (Quad Focus)",focus:["legs","glutes"]},{name:"Push B (Volume)",focus:["chest","shoulders","triceps"]},{name:"Pull B (Volume)",focus:["back","rear-delts","biceps"]},{name:"Legs B (Posterior)",focus:["legs","core"]}]}},ENDURANCE_TEMPLATES={running:{2:["Easy Run","Long Run"],3:["Easy Run","Tempo Run","Long Run"],4:["Easy Run","Tempo Run","Intervals","Long Run"],5:["Easy Run","Tempo Run","Recovery Run","Intervals","Long Run"],6:["Easy Run","Tempo Run","Easy Run","Intervals","Recovery Run","Long Run"]},triathlon:{5:["Swim + Strength","Bike Intervals + Strength","Run + Strength","Swim + Run","Long Brick"],6:["Swim + Strength","Bike Intervals","Run + Strength","Swim + Easy Ride","Run Tempo + Strength","Long Brick"],7:["Swim + Strength","Bike Intervals","Run + Strength","Swim AM / Run PM","Bike + Strength","Run Tempo","Long Brick"]}};function generateTriathlonStrengthExercises(d,h,m,E,j="full"){const g=[],{multiplier:N,level:k}=m,A=h?.6:1,w=[{name:"Single-Leg Romanian Deadlift",sets:Math.round(3*A),reps:"8-10 each leg",rpe:6,rest:"60s",notes:"Focus on hip stability, not weight. Light dumbbells only.",progression:"Master balance before adding weight. This is injury prevention."},{name:"Bulgarian Split Squat",sets:Math.round(3*A),reps:"10-12 each leg",rpe:6,rest:"60s",notes:"Control descent, drive through front heel. Build single-leg strength.",progression:"Add 5lbs every 2-3 weeks when form is solid."},{name:"Lateral Band Walks",sets:3,reps:"15 each direction",rpe:5,rest:"30s",notes:"Keep tension on band throughout. Glute med activation.",progression:"Use heavier band as it becomes easy."},{name:"Clamshells",sets:3,reps:"15-20 each side",rpe:5,rest:"30s",notes:"External hip rotation. Critical for knee health in running.",progression:"Add resistance band when bodyweight is easy."}],M=[{name:"Dead Bug",sets:3,reps:"10 each side",rpe:5,rest:"45s",notes:"Keep lower back pressed to floor. Anti-extension strength.",progression:"Slow the movement, add holds at end range."},{name:"Pallof Press",sets:3,reps:"10 each side",rpe:6,rest:"45s",notes:"Anti-rotation core work. Essential for swim and run.",progression:"Increase cable weight or add iso holds."},{name:"Side Plank",sets:2,reps:"30-45s each side",rpe:6,rest:"30s",notes:"Hip elevated, straight line from head to feet.",progression:"Add hip dips or raise top leg."},{name:"Bird Dog",sets:3,reps:"8 each side with 3s hold",rpe:5,rest:"45s",notes:"Opposite arm/leg extension with neutral spine.",progression:"Add resistance band around foot."}],_=[{name:"Band Pull-Aparts",sets:3,reps:"15-20",rpe:5,rest:"30s",notes:"Squeeze shoulder blades together. Rotator cuff health.",progression:"Essential for swim shoulder health - never skip."},{name:"External Rotation (Cable/Band)",sets:2,reps:"15 each arm",rpe:5,rest:"30s",notes:"Elbow pinned to side, rotate out. Swim-specific prehab.",progression:"Keep light - this is prehab, not strength training."},{name:"Face Pulls",sets:3,reps:"15",rpe:5,rest:"30s",notes:"Pull to face, external rotate at end. Rear delt & rotator cuff.",progression:"Keep light - focus on squeeze at end range."}];switch(j){case"hip":g.push(...w),g.push(M[0]);break;case"core":g.push(...M),g.push(w[2]);break;case"prehab":g.push(..._),g.push(M[0]),g.push(w[2]);break;default:g.push(...w),g.push(...M.slice(0,3)),g.push(..._.slice(0,2)),(k==="advanced"||k==="elite")&&g.push(M[3]);break}return g}function generateTriathlonSession(d,h,m,E,j,g,N){const{level:k}=E;switch(h==="Taper"||h==="Peak"||h.includes("Build"),d){case"Swim + Run":return{name:"Swim / Run Double",duration:90,exercises:[{name:"Swim - Technique Focus",sets:1,reps:m?"1500m":"2000-2500m",pace:"CSS pace (threshold)",heartRateZone:"Zone 2-3",rpe:6,rest:"N/A",notes:"Focus on catch and pull technique. Include drill work.",progression:`Week ${g}: Build swim volume gradually.`},{name:"Run - Easy/Moderate",sets:1,reps:m?"30 min":"45-60 min",pace:j?.easyPace||"9:00-9:30/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy effort. Recovery between sessions.",progression:"Separate by 4-6 hours if possible."}]};case"Swim AM / Run PM":return{name:"AM Swim / PM Run",duration:105,exercises:[{name:"Morning Swim",sets:1,reps:k==="elite"?"3000-3500m":"2000-2500m",pace:"Mixed: warm up + main set + cool down",heartRateZone:"Zone 2-4",rpe:7,rest:"N/A",notes:"Main set at CSS pace. Include 4x100 at race pace.",progression:`Week ${g}: Focus on stroke efficiency.`},{name:"Evening Run",sets:1,reps:m?"40 min":"50-60 min",pace:j?.easyPace||"9:00/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy effort, focus on cadence and form.",progression:"Build run fitness off swim fatigue."}]};case"Bike Intervals":case"Bike":return{name:"Bike Intervals",duration:m?60:75,exercises:[{name:"Bike Interval Session",sets:m?3:k==="elite"?6:5,reps:"5 min @ FTP",pace:"FTP (Functional Threshold Power)",heartRateZone:"Zone 4",rpe:8,rest:"2 min easy spin",notes:"Maintain steady power throughout interval. Cadence 85-95.",progression:`Week ${g}: Add 1 interval every 2 weeks.`}]};case"Swim + Strength":return{name:"Swim + Injury Prevention",duration:75,exercises:[{name:"Technique Swim",sets:1,reps:"1500-2000m",pace:"Easy-moderate",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Drill-focused: catch-up drill, fingertip drag, 6-kick switch.",progression:"Quality over quantity on strength days."}],strengthSession:generateTriathlonStrengthExercises(h,m,E)};case"Run Tempo":return{name:"Tempo Run",duration:60,exercises:[{name:"Warm-up",sets:1,reps:"1.5 miles",pace:j?.easyPace||"9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include strides at end of warm-up."},{name:"Tempo",sets:1,reps:m?"15 min":k==="elite"?"30 min":"20-25 min",pace:j?.tempoPace||"7:30/mi",heartRateZone:"Zone 3-4",rpe:7,rest:"N/A",notes:"Comfortably hard. Should be able to speak in short sentences.",progression:`Week ${g}: Extend tempo duration by 2-3 min/week.`},{name:"Cool-down",sets:1,reps:"1 mile",pace:j?.recoveryPace||"10:00/mi",heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog + stretching."}]};case"Long Bike/Run Brick":case"Long Brick":case"Long Ride + Run Brick":const A=k==="elite"?3:k==="advanced"?2.5:2,w=k==="elite"?6:k==="advanced"?5:4;return{name:"Long Brick Session",duration:A*60+45,exercises:[{name:"Long Ride",sets:1,reps:`${m?A-.5:A} hours`,pace:"Aerobic (Zone 2)",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Practice race nutrition: 60-90g carbs/hour. Last 20 min at race pace.",progression:`Week ${g}: Key session. Build bike endurance.`},{name:"Brick Run (off bike)",sets:1,reps:`${m?w-1:w} miles`,pace:"Start easy, settle into race pace",heartRateZone:"Zone 2-3",rpe:6,rest:"N/A",notes:"T2 practice. Quick transition, find your legs.",progression:"Critical for race-day leg turnover."}]};case"Swim + Easy Ride":return{name:"Swim + Easy Ride",duration:90,exercises:[{name:"Swim - Aerobic",sets:1,reps:"2000-2500m",pace:"Easy-moderate",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Continuous swim, focus on bilateral breathing."},{name:"Easy Spin",sets:1,reps:"45-60 min",pace:"Recovery",heartRateZone:"Zone 1-2",rpe:4,rest:"N/A",notes:"Active recovery. High cadence, low power."}]};case"Easy Run":return{name:"Easy Run",duration:45,exercises:[{name:"Easy Run",sets:1,reps:m?"30 min":"45 min",pace:j?.easyPace||"9:00-9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Truly easy. Recovery run.",progression:"Keep easy days easy."}]};case"Bike Intervals + Strength":return{name:"Bike Intervals + Strength",duration:90,exercises:[{name:"Bike Interval Session",sets:m?3:k==="elite"?6:5,reps:"5 min @ FTP",pace:"FTP (Functional Threshold Power)",heartRateZone:"Zone 4",rpe:8,rest:"2 min easy spin",notes:"Quality intervals. Maintain power throughout.",progression:`Week ${g}: Key bike session.`}],strengthSession:generateTriathlonStrengthExercises(h,m,E,g,"core")};case"Run + Strength":return{name:"Run + Strength",duration:85,exercises:[{name:"Easy-Moderate Run",sets:1,reps:m?"35 min":"45-50 min",pace:j?.easyPace||"9:00/mi",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Comfortable effort. Focus on form and cadence.",progression:`Week ${g}: Build aerobic base.`}],strengthSession:generateTriathlonStrengthExercises(h,m,E,g,"hip")};case"Bike + Strength":return{name:"Bike + Strength",duration:80,exercises:[{name:"Easy Aerobic Ride",sets:1,reps:m?"45 min":"60 min",pace:"Aerobic (Zone 2)",heartRateZone:"Zone 2",rpe:5,rest:"N/A",notes:"Easy spinning. Active recovery ride with strength after.",progression:"Keep intensity low to allow for PM strength."}],strengthSession:generateTriathlonStrengthExercises(h,m,E,g,"full")};case"Run Tempo + Strength":return{name:"Run Tempo + Strength",duration:95,exercises:[{name:"Warm-up",sets:1,reps:"1 mile",pace:j?.easyPace||"9:30/mi",heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Easy jog with strides."},{name:"Tempo",sets:1,reps:m?"12 min":k==="elite"?"25 min":"18-20 min",pace:j?.tempoPace||"7:30/mi",heartRateZone:"Zone 3-4",rpe:7,rest:"N/A",notes:"Comfortably hard. Shorter than standalone tempo to allow for strength.",progression:`Week ${g}: Quality over quantity.`},{name:"Cool-down",sets:1,reps:"0.5 miles",pace:j?.recoveryPace||"10:00/mi",heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog."}],strengthSession:generateTriathlonStrengthExercises(h,m,E,g,"prehab")};default:return{name:d,duration:60,exercises:[{name:d,sets:1,reps:"60 min",rpe:6,rest:"N/A",notes:"Moderate effort."}]}}}function getDayName(d){return["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"][d]}function distributeWorkoutDays(d){const h={2:[0,3],3:[0,2,4],4:[0,1,3,4],5:[0,1,2,4,5],6:[0,1,2,3,4,5],7:[0,1,2,3,4,5,6]};return h[d]||h[4]}const STRENGTH_EXERCISE_DB={squat:{main:{name:"Back Squat",percentages:{Base:{min:70,max:80,reps:"5-8",sets:4},Build:{min:80,max:87.5,reps:"3-5",sets:5},Peak:{min:87.5,max:95,reps:"1-3",sets:5},Deload:{min:50,max:60,reps:"5-8",sets:3}},rest:"3-4 min",notes:"Break at hips, knees track over toes, drive through heels"},variations:[{name:"Pause Squat",percent:.8,reps:"3-5",sets:3,notes:"2-3 sec pause in hole"},{name:"Front Squat",percent:.75,reps:"4-6",sets:3,notes:"Upright torso, elbows high"},{name:"Box Squat",percent:.85,reps:"3-5",sets:3,notes:"Pause on box, explode up"}],accessories:[{name:"Leg Press",reps:"8-12",sets:3,notes:"Control descent, full ROM",isBodyweight:!1},{name:"Walking Lunges",reps:"10-12 each",sets:3,notes:"Long stride, upright torso",isBodyweight:!0},{name:"Leg Extensions",reps:"12-15",sets:3,notes:"Squeeze at top, slow negative",isBodyweight:!1},{name:"Leg Curls",reps:"10-12",sets:3,notes:"Squeeze hamstrings at top",isBodyweight:!1},{name:"Bulgarian Split Squat",reps:"8-10 each",sets:3,notes:"Vertical shin on front leg",isBodyweight:!0},{name:"Goblet Squat",reps:"10-12",sets:3,notes:"Elbows inside knees at bottom",isBodyweight:!1}]},bench:{main:{name:"Bench Press",percentages:{Base:{min:70,max:80,reps:"5-8",sets:4},Build:{min:80,max:87.5,reps:"3-5",sets:5},Peak:{min:87.5,max:95,reps:"1-3",sets:5},Deload:{min:50,max:60,reps:"5-8",sets:3}},rest:"3-4 min",notes:"Retract scapula, arch back, leg drive, control descent"},variations:[{name:"Close-Grip Bench",percent:.85,reps:"4-6",sets:3,notes:"Elbows tucked, tricep focus"},{name:"Paused Bench Press",percent:.8,reps:"3-5",sets:3,notes:"2 sec pause on chest"},{name:"Incline Bench Press",percent:.75,reps:"6-8",sets:3,notes:"30-45 degree incline"},{name:"Floor Press",percent:.85,reps:"4-6",sets:3,notes:"Pause at floor, lockout strength"}],accessories:[{name:"Dumbbell Bench Press",reps:"8-12",sets:3,notes:"Full ROM, squeeze at top",isBodyweight:!1},{name:"Dumbbell Fly",reps:"10-12",sets:3,notes:"Slight bend in elbows, stretch at bottom",isBodyweight:!1},{name:"Tricep Pushdowns",reps:"12-15",sets:3,notes:"Lock elbows, squeeze triceps",isBodyweight:!1},{name:"Skull Crushers",reps:"10-12",sets:3,notes:"Keep elbows pointed up",isBodyweight:!1},{name:"Dips",reps:"8-12",sets:3,notes:"Lean forward for chest, upright for triceps",isBodyweight:!0},{name:"Overhead Tricep Extension",reps:"10-12",sets:3,notes:"Full stretch at bottom",isBodyweight:!1}]},deadlift:{main:{name:"Deadlift",percentages:{Base:{min:70,max:80,reps:"4-6",sets:3},Build:{min:80,max:87.5,reps:"2-4",sets:4},Peak:{min:87.5,max:95,reps:"1-3",sets:4},Deload:{min:50,max:60,reps:"4-6",sets:2}},rest:"4-5 min",notes:"Brace core, chest up, hinge at hips, bar close to body"},variations:[{name:"Deficit Deadlift",percent:.8,reps:"3-5",sets:3,notes:"2-3 inch deficit, speed off floor"},{name:"Romanian Deadlift",percent:.65,reps:"8-10",sets:3,notes:"Hamstring stretch, slight knee bend"},{name:"Paused Deadlift",percent:.75,reps:"2-4",sets:3,notes:"2 sec pause at knee height"},{name:"Block Pull",percent:.9,reps:"2-4",sets:3,notes:"Lockout strength, above knee"}],accessories:[{name:"Barbell Row",reps:"6-10",sets:4,notes:"Pull to lower chest, squeeze lats",isBodyweight:!1},{name:"Good Mornings",reps:"8-10",sets:3,notes:"Hip hinge, hamstring stretch",isBodyweight:!1},{name:"Back Extensions",reps:"12-15",sets:3,notes:"Squeeze glutes at top",isBodyweight:!0},{name:"Pull-ups",reps:"6-10",sets:4,notes:"Full ROM, dead hang to chin over bar",isBodyweight:!0},{name:"Face Pulls",reps:"15-20",sets:3,notes:"External rotation, rear delt focus",isBodyweight:!1},{name:"Lat Pulldown",reps:"10-12",sets:3,notes:"Drive elbows down, squeeze lats",isBodyweight:!1}]},ohp:{main:{name:"Overhead Press",percentages:{Base:{min:70,max:80,reps:"5-8",sets:4},Build:{min:80,max:87.5,reps:"3-5",sets:4},Peak:{min:85,max:92.5,reps:"2-4",sets:4},Deload:{min:50,max:60,reps:"6-8",sets:3}},rest:"2-3 min",notes:"Squeeze glutes, brace core, press straight up, head through at top"},variations:[{name:"Push Press",percent:1.1,reps:"3-5",sets:3,notes:"Small dip, explosive drive"},{name:"Z Press",percent:.7,reps:"6-8",sets:3,notes:"Seated on floor, no leg drive"},{name:"Seated Dumbbell Press",percent:.8,reps:"8-10",sets:3,notes:"Neutral grip option"}],accessories:[{name:"Lateral Raises",reps:"12-15",sets:3,notes:"Lead with elbows, control descent",isBodyweight:!1},{name:"Rear Delt Fly",reps:"12-15",sets:3,notes:"Squeeze shoulder blades together",isBodyweight:!1},{name:"Upright Rows",reps:"10-12",sets:3,notes:"Elbows above wrists at top",isBodyweight:!1},{name:"Front Raises",reps:"10-12",sets:3,notes:"Thumbs up, raise to eye level",isBodyweight:!1},{name:"Arnold Press",reps:"8-12",sets:3,notes:"Rotate palms during press",isBodyweight:!1}]}};function getDoubleProgression(d,h,m){if(m==="Deload")return d;const[E,j]=d.split("-").map(Number),g=Math.min(h-1,2);return`${E+g}-${j+g}`}function calculateWorkingWeight(d,h,m,E){if(!d)return null;const j=E.percentages[h]||E.percentages.Base,{min:g,max:N}=j;let k;return k=g,Math.round(d*k/100/5)*5}function generateStrengthExercises(d,h,m,E,j,g=[]){const N=[],k=E?.level||"intermediate",A=E?.multiplier||1,w=(j-1)%4+1,M=m?"Deload":h,_=m?.6:(h==="Build"?1.1:1)*A,J=W=>{const ie=g.find(q=>q.id===W);return ie?{current1RM:parseFloat(ie.current1RM)||parseFloat(ie.workingWeight)||null,target1RM:parseFloat(ie.target1RM)||null}:null};if(d.includes("legs")||d.includes("Squat")){const W=J("squat"),ie=STRENGTH_EXERCISE_DB.squat,q=ie.main.percentages[M],L=calculateWorkingWeight(W?.current1RM,M,w,ie.main),Ee=L&&W?.current1RM?Math.round(L/W.current1RM*100):null;if(N.push({name:ie.main.name,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),rpe:m?6:k==="elite"?8.5:8,rest:ie.main.rest,notes:ie.main.notes,startingWeight:L?`${L} lbs (${Ee}% of 1RM)`:"Start light, find working weight",current1RM:W?.current1RM?`${W.current1RM} lbs`:null,target1RM:W?.target1RM?`${W.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${q.reps.split("-")[1]} reps on all sets  add 5 lbs next session`}),!m){const K=ie.variations[h==="Peak"?2:0],me=L?Math.round(L*K.percent/5)*5:null;N.push({name:K.name,sets:Math.round(K.sets*_),reps:K.reps,rpe:7,rest:"3 min",notes:K.notes,startingWeight:me?`${me} lbs (~${Math.round(K.percent*100)}% of working weight)`:null,isVariation:!0,progression:"Follow main lift progression"})}const ue=m?1:k==="beginner"?2:k==="intermediate"?3:4;ie.accessories.slice(0,ue).forEach(K=>{N.push({name:K.name,sets:Math.round(K.sets*_),reps:getDoubleProgression(K.reps,w,M),rpe:7,rest:"90s",notes:K.notes,isAccessory:!0,progression:`Double progression: ${K.reps.split("-")[0]}${K.reps.split("-")[1]} reps, then add weight`})})}if(d.includes("chest")||d.includes("Bench")){const W=J("bench"),ie=STRENGTH_EXERCISE_DB.bench,q=ie.main.percentages[M],L=calculateWorkingWeight(W?.current1RM,M,w,ie.main),Ee=L&&W?.current1RM?Math.round(L/W.current1RM*100):null;if(N.push({name:ie.main.name,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),rpe:m?6:k==="elite"?8.5:8,rest:ie.main.rest,notes:ie.main.notes,startingWeight:L?`${L} lbs (${Ee}% of 1RM)`:"Start light, find working weight",current1RM:W?.current1RM?`${W.current1RM} lbs`:null,target1RM:W?.target1RM?`${W.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${q.reps.split("-")[1]} reps on all sets  add 2.5 lbs next session`}),!m){const K=h==="Peak"?ie.variations[3]:ie.variations[0],me=L?Math.round(L*K.percent/5)*5:null;N.push({name:K.name,sets:Math.round(K.sets*_),reps:K.reps,rpe:7,rest:"2-3 min",notes:K.notes,startingWeight:me?`${me} lbs`:null,isVariation:!0,progression:"Follow main lift progression"})}const ue=m?1:k==="beginner"?2:k==="intermediate"?3:4;ie.accessories.slice(0,ue).forEach(K=>{N.push({name:K.name,sets:Math.round(K.sets*_),reps:getDoubleProgression(K.reps,w,M),rpe:7,rest:"90s",notes:K.notes,isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(d.includes("posterior")||d.includes("Deadlift")){const W=J("deadlift"),ie=STRENGTH_EXERCISE_DB.deadlift,q=ie.main.percentages[M],L=calculateWorkingWeight(W?.current1RM,M,w,ie.main),Ee=L&&W?.current1RM?Math.round(L/W.current1RM*100):null;if(N.push({name:ie.main.name,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),rpe:m?6:k==="elite"?8.5:8,rest:ie.main.rest,notes:ie.main.notes,startingWeight:L?`${L} lbs (${Ee}% of 1RM)`:"Start light, find working weight",current1RM:W?.current1RM?`${W.current1RM} lbs`:null,target1RM:W?.target1RM?`${W.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${q.reps.split("-")[1]} reps on all sets  add 5-10 lbs next session`}),!m){const K=h==="Peak"?ie.variations[3]:ie.variations[0],me=L?Math.round(L*K.percent/5)*5:null;N.push({name:K.name,sets:Math.round(K.sets*_),reps:K.reps,rpe:7,rest:"3-4 min",notes:K.notes,startingWeight:me?`${me} lbs`:null,isVariation:!0,progression:"Follow main lift progression"})}const ue=m?1:k==="beginner"?2:k==="intermediate"?3:4;ie.accessories.slice(0,ue).forEach(K=>{N.push({name:K.name,sets:Math.round(K.sets*_),reps:getDoubleProgression(K.reps,w,M),rpe:7,rest:"90s-2 min",notes:K.notes,isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(d.includes("shoulders")||d.includes("OHP")){const W=J("ohp"),ie=STRENGTH_EXERCISE_DB.ohp,q=ie.main.percentages[M],L=calculateWorkingWeight(W?.current1RM,M,w,ie.main),Ee=L&&W?.current1RM?Math.round(L/W.current1RM*100):null;if(N.push({name:ie.main.name,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),rpe:m?6:k==="elite"?8.5:8,rest:ie.main.rest,notes:ie.main.notes,startingWeight:L?`${L} lbs (${Ee}% of 1RM)`:"Start light, find working weight",current1RM:W?.current1RM?`${W.current1RM} lbs`:null,target1RM:W?.target1RM?`${W.target1RM} lbs`:null,isMainLift:!0,progression:`Double progression: Hit ${q.reps.split("-")[1]} reps  add 2.5 lbs`}),!m){const te=ie.variations[0];N.push({name:te.name,sets:Math.round(te.sets*_),reps:te.reps,rpe:7,rest:"2 min",notes:te.notes,isVariation:!0})}const ue=m?1:k==="beginner"?2:3;ie.accessories.slice(0,ue).forEach(te=>{N.push({name:te.name,sets:Math.round(te.sets*_),reps:getDoubleProgression(te.reps,w,M),rpe:7,rest:"60-90s",notes:te.notes,isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(d.includes("back")&&!d.includes("posterior")&&!d.includes("Deadlift")){const W=[{name:"Barbell Row",sets:4,reps:"6-10",rpe:8,rest:"2-3 min",notes:"Pull to lower chest, squeeze lats"},{name:"Weighted Pull-ups",sets:4,reps:"6-10",rpe:8,rest:"2-3 min",notes:"Dead hang to chin over bar"},{name:"Lat Pulldown",sets:3,reps:"10-12",rpe:7,rest:"90s",notes:"Drive elbows down"},{name:"Seated Cable Row",sets:3,reps:"10-12",rpe:7,rest:"90s",notes:"Squeeze at contraction"}],ie=m?2:k==="beginner"?3:4;W.slice(0,ie).forEach(q=>{N.push({...q,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),isAccessory:!0,progression:"Double progression: Add reps first, then weight"})})}if(d.includes("triceps")||d.includes("arms")){const W=[{name:"Close-Grip Bench Press",sets:3,reps:"6-8",rpe:7,rest:"2 min",notes:"Elbows tucked"},{name:"Tricep Pushdowns",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Lock elbows in place"},{name:"Skull Crushers",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Lower to forehead"}],ie=m?1:k==="beginner"?2:3;W.slice(0,ie).forEach(q=>{N.push({...q,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),isAccessory:!0,progression:"Double progression: 1012 reps, then +5 lbs"})})}if(d.includes("biceps")||d.includes("arms")){const W=[{name:"Barbell Curls",sets:3,reps:"8-12",rpe:7,rest:"60s",notes:"No swinging"},{name:"Incline Dumbbell Curls",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Full stretch at bottom"},{name:"Hammer Curls",sets:3,reps:"10-12",rpe:7,rest:"60s",notes:"Neutral grip"}],ie=m?1:k==="beginner"?2:3;W.slice(0,ie).forEach(q=>{N.push({...q,sets:Math.round(q.sets*_),reps:getDoubleProgression(q.reps,w,M),isAccessory:!0,progression:"Double progression: 812 reps, then +5 lbs"})})}if(d.includes("core")){const W=[{name:"Hanging Leg Raises",sets:3,reps:"10-15",rpe:7,rest:"60s",notes:"Control the movement"},{name:"Ab Wheel Rollouts",sets:3,reps:"8-12",rpe:7,rest:"60s",notes:"Full extension"},{name:"Plank",sets:3,reps:"45-60 sec",rpe:6,rest:"45s",notes:"Squeeze glutes, brace core"}],ie=m?1:2;W.slice(0,ie).forEach(q=>{N.push({...q,sets:Math.round(q.sets*_),isAccessory:!0,progression:"Add reps or hold time, then add weight"})})}return N}function generateAestheticExercises(d,h,m,E,j){const g=[],N=E?.level||"intermediate",k=E?.multiplier||1,w=(m?.5:h==="Build"?1.15:1)*k,M=m?5:N==="elite"?9:N==="advanced"?8.5:8,_=(j-1)%4+1,J=_-1;return d.includes("chest")&&(g.push({name:"Bench Press",sets:Math.round(4*w),reps:`${8+J}-${10+J}`,rpe:M,rest:"2-3 min",notes:"Focus on chest contraction",progression:`Week ${_}/4: Base reps. Add 5lbs at week 4 if all reps hit`}),g.push({name:"Incline Dumbbell Press",sets:Math.round(4*w),reps:`${8+J}-${12+J}`,rpe:M-1,rest:"90s",notes:"30-45 degree incline, control the negative",progression:"Progressive overload: reps  weight  reps"}),g.push({name:"Cable Chest Fly",sets:Math.round(3*w),reps:"12-15",rpe:7,rest:"60s",notes:"Squeeze hard at contraction",progression:"Isolation: focus on mind-muscle connection over weight"}),(N==="advanced"||N==="elite")&&g.push({name:"Weighted Dips",sets:Math.round(3*w),reps:"8-12",rpe:8,rest:"2 min",notes:"Lean forward for chest emphasis",progression:"Add 5lbs when hitting 12 reps"})),d.includes("back")&&(g.push({name:"Weighted Pull-ups",sets:Math.round(4*w),reps:`${6+Math.floor(J/2)}-${10+Math.floor(J/2)}`,rpe:M,rest:"2-3 min",notes:"Full stretch at bottom, chin over bar",progression:"Add 2.5lbs when hitting top of rep range consistently"}),g.push({name:"Barbell Row",sets:Math.round(4*w),reps:`${6+J}-${10+J}`,rpe:M-1,rest:"2 min",notes:"Squeeze lats at top",progression:"Add 5lbs when form stays solid at top reps"}),g.push({name:"Lat Pulldown",sets:Math.round(3*w),reps:"10-12",rpe:7,rest:"90s",notes:"Drive elbows down, chest up",progression:"Focus on stretch and contraction over weight"}),g.push({name:"Seated Cable Row",sets:Math.round(3*w),reps:"10-12",rpe:7,rest:"90s",notes:"Pull to lower chest, squeeze",progression:"Add weight when form is solid"})),d.includes("shoulders")&&(g.push({name:"Overhead Press",sets:Math.round(4*w),reps:N==="elite"?"5-8":"8-10",rpe:M,rest:"2-3 min",notes:"Strict form, no leg drive",progression:"Add 2.5lbs when all reps completed"}),g.push({name:"Lateral Raises",sets:Math.round(4*w),reps:"12-15",rpe:7,rest:"60s",notes:"Lead with elbows, control the negative",progression:"Add 1 rep per week, then increase weight"}),(N==="advanced"||N==="elite")&&g.push({name:"Cable Lateral Raises",sets:3,reps:"15-20",rpe:8,rest:"45s",notes:"Constant tension, squeeze at top",progression:"Drop sets on final set for extra stimulus"})),(d.includes("legs")||d.includes("glutes"))&&(g.push({name:"Back Squat",sets:Math.round(4*w),reps:N==="elite"?"5-8":"8-10",rpe:M,rest:"3 min",notes:"ATG depth if mobility allows",progression:"Add 5lbs when all reps completed at target RPE"}),g.push({name:"Romanian Deadlift",sets:Math.round(4*w),reps:"8-12",rpe:M-1,rest:"2 min",notes:"Feel the hamstring stretch",progression:"Add 5lbs when form is solid at 12 reps"}),g.push({name:"Leg Press",sets:Math.round(3*w),reps:"10-15",rpe:8,rest:"2 min",notes:"Full range of motion",progression:"Volume work: push the reps before weight"}),g.push({name:"Leg Curls",sets:Math.round(3*w),reps:"12-15",rpe:7,rest:"60s",notes:"Squeeze at top, slow negative",progression:"Focus on contraction quality"}),g.push({name:"Standing Calf Raises",sets:Math.round(4*w),reps:"12-15",rpe:8,rest:"60s",notes:"Full stretch at bottom, pause at top",progression:"Calves respond to frequency - hit 3x/week if lagging"})),d.includes("biceps")&&(g.push({name:"Barbell Curls",sets:Math.round(3*w),reps:"8-12",rpe:8,rest:"90s",notes:"No swinging, squeeze at top",progression:"Add reps first, then weight"}),g.push({name:"Hammer Curls",sets:Math.round(3*w),reps:"10-12",rpe:7,rest:"60s",notes:"Control throughout",progression:"Brachialis focus - great for arm thickness"})),d.includes("triceps")&&(g.push({name:"Tricep Pushdowns",sets:Math.round(3*w),reps:"10-12",rpe:8,rest:"90s",notes:"Lock out at bottom",progression:"Add weight when 12 reps is easy"}),g.push({name:"Overhead Tricep Extension",sets:Math.round(3*w),reps:"12-15",rpe:7,rest:"60s",notes:"Feel the stretch at bottom",progression:"Long head focus - crucial for tricep size"})),d.includes("rear-delts")&&g.push({name:"Face Pulls",sets:Math.round(4*w),reps:"15-20",rpe:7,rest:"60s",notes:"External rotation at top",progression:"Health exercise: keep light, focus on form"}),d.includes("core")&&g.push({name:"Hanging Leg Raises",sets:3,reps:"12-15",rpe:8,rest:"60s",notes:"Control the movement",progression:"Add weight (hold DB) when hitting 15 reps"}),g}function generateEnduranceSession(d,h,m,E,j,g,N,k,A=null,w=null){const{multiplier:M,level:_}=j,W=(g?.goalPace||"").match(/(\d+):(\d+)/),ie=W?parseFloat(W[1])+parseFloat(W[2])/60:null,q=calculateTargetPeakMileage(w,ie,j),L=E?Math.round(E*1.15):q,Ee=Math.max(q,L),ue=calculateWeeklyMileage(k,Ee,N,h,E,w,j),te=calculateLongRunCap(A,N,j),K=h==="Taper"?.6:h==="Peak"?1.1:h.includes("Build")?1:.85;switch(d){case"Easy Run":{const me=Math.round(ue*.2*K*10)/10;return{name:"Easy Run",duration:Math.round(me*10),exercises:[{name:"Easy Run",sets:1,reps:`${me} miles`,pace:g.easyPace,heartRateZone:"Zone 2 (65-75% max HR)",rpe:4,rest:"N/A",notes:"Should be able to hold a conversation. If breathing hard, slow down.",progression:`Week ${N}: ${me} mi. Max 5% increase per week.`}]}}case"Tempo Run":{const re=Math.round(ue*.15*K*10)/10,F=1;return{name:"Tempo Run",duration:Math.round((1.5+re+F)*9),exercises:[{name:"Warm-up",sets:1,reps:`${1.5} miles`,pace:g.easyPace,heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include 4x100m strides at end"},{name:"Tempo",sets:1,reps:`${re} miles`,pace:g.tempoPace,heartRateZone:"Zone 3-4 (80-88% max HR)",rpe:7,rest:"N/A",notes:"Comfortably hard - can speak in short sentences only",progression:`Week ${N}: ${re} mi tempo. Lactate threshold training.`},{name:"Cool-down",sets:1,reps:`${F} miles`,pace:g.recoveryPace,heartRateZone:"Zone 1-2",rpe:3,rest:"N/A",notes:"Very easy, let HR come down"}]}}case"Intervals":{const me=_==="elite"?8:_==="advanced"?6:5,re=_==="elite"?"800m":"400m",F=m?Math.floor(me/2):h==="Peak"?me+2:me;return{name:"Interval Training",duration:55,exercises:[{name:"Warm-up",sets:1,reps:"1.5 miles",pace:g.easyPace,heartRateZone:"Zone 2",rpe:4,rest:"N/A",notes:"Include dynamic stretches and 4x100m strides"},{name:`${re} Repeats`,sets:F,reps:re,pace:g.intervalPace,heartRateZone:"Zone 4-5 (88-95% max HR)",rpe:9,rest:_==="elite"?"2:00 jog":"1:30 jog",notes:`Consistent pace each rep. Target ${g.intervalPace}`,progression:`Week ${N}: ${F}x${re}. Add 1 rep every 2-3 weeks.`},{name:"Cool-down",sets:1,reps:"1 mile",pace:g.recoveryPace,heartRateZone:"Zone 1",rpe:3,rest:"N/A",notes:"Easy jog + static stretching"}]}}case"Long Run":{const me=Math.round(ue*.3*K*10)/10,re=_==="elite"?22:_==="advanced"?20:18,F=Math.min(me,te,re);return{name:"Long Run",duration:Math.round(F*9.5),exercises:[{name:"Long Run",sets:1,reps:`${F} miles`,pace:g.longRunPace,heartRateZone:"Zone 2 (start)  Zone 3 (finish)",rpe:6,rest:"N/A",notes:h==="Peak"?`Practice race nutrition. Last 3mi at ${g.goalPace} (goal pace)`:"Practice race nutrition. Keep even effort throughout.",progression:`Week ${N}: ${F} mi. Current cap: ${te}mi (increases ~1mi/2wks). Peak: ${re}mi.`}]}}case"Recovery Run":return{name:"Recovery Run",duration:30,exercises:[{name:"Recovery Run",sets:1,reps:"3-4 miles",pace:g.recoveryPace,heartRateZone:"Zone 1 (60-65% max HR)",rpe:3,rest:"N/A",notes:"Truly easy. This should feel almost too slow. Promotes recovery.",progression:"Keep consistent - dont increase recovery run distance"}]};default:return{name:d,duration:45,exercises:[{name:d,sets:1,reps:"45 min",rpe:6,rest:"N/A",notes:"Moderate steady effort"}]}}}function generateFatLossSession(d,h,m,E,j){const g=[],{multiplier:N,level:k}=E;g.push({name:k==="elite"?"EMOM Circuit":"HIIT Circuit",sets:m?2:Math.round(4*N),reps:k==="elite"?"45s work / 15s rest":"30s work / 30s rest",rpe:9,rest:"2 min between rounds",notes:k==="elite"?"Burpees, box jumps, KB swings, battle ropes":"Max effort during work intervals",progression:`Week ${j}: Add 1 round every 2 weeks`});const A=generateAestheticExercises(d,h,m,E,j);return g.push(...A.slice(0,4)),m||g.push({name:k==="elite"?"Assault Bike":"Incline Walk",sets:1,reps:k==="elite"?"10 min intervals":"15-20 min",rpe:k==="elite"?8:5,rest:"N/A",notes:k==="elite"?"30s sprint / 30s recovery":"10-12% incline, 3.0-3.5 mph",progression:"Add 5 min per week or increase intensity"}),g}function isHardRunningDay(d){return["Tempo Run","Intervals","Long Run","Interval Training"].includes(d)}function createSmartHybridSchedule(d,h,m,E,j,g,N,k,A,w,M,_,J,W,ie){const q=[],L=j[d]||j[4],Ee=L.map((B,Z)=>({runType:B,isHard:isHardRunningDay(B),isLongRun:B==="Long Run",dayIndex:Z})),ue=Ee.findIndex(B=>B.isLongRun),te=3,K=[],me=[];Ee.forEach((B,Z)=>{const ge=ue!==-1&&Z===ue-1;E&&!B.isHard&&!ge&&!B.isLongRun&&K.push(Z)});const re={2:[0,3],3:[0,2,4],4:[0,1,3,4],5:[0,1,2,4,5],6:[0,1,2,3,4,5],7:[0,1,2,3,4,5,6]},F=re[d]||re[4],U=[];for(let B=0;B<7;B++){const Z=ue!==-1&&F.indexOf(B)===ue-1;!(F.indexOf(B)!==-1&&F.indexOf(B)<L.length)&&!Z&&U.push(B)}const Q=K.length,xe=Math.max(0,te-Q);for(let B=0;B<xe&&B<U.length;B++)me.push(U[B]);K.length+me.length<te&&E&&Ee.forEach((B,Z)=>{K.length+me.length>=te||!K.includes(Z)&&!B.isLongRun&&K.push(Z)});for(let B=0;B<7;B++){const Z=F.indexOf(B),ge=Z!==-1,I=getDayName(B);if(!ge){q.push({day:B+1,dayName:I,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const ne=[],le=Z<L.length?L[Z]:null;if(le){const de=generateEnduranceSession(le,k,A,_,N,g,w,M,J,ie);ne.push({time:"AM",type:"endurance",focus:le,duration:de.duration,exercises:de.exercises});const ye=isHardRunningDay(le),z=ue!==-1&&Z===ue-1;if(E&&!ye&&!z&&m==="strength"){const D=Z%2===0?["chest","shoulders","triceps"]:["back","biceps","core"],G=generateAestheticExercises(D,k,!0,N,w).slice(0,4);ne.push({time:"PM",type:"strength",focus:"Supplemental Strength",duration:35,exercises:G,notes:"Keep intensity moderate - recovery is priority"})}}else if(me.includes(B)){const ye=generateStrengthExercises(["legs","core","posterior"],k,A,N,w,W);ne.push({time:"ANY",type:"strength",focus:"Full Body Strength",duration:N.level==="elite"?75:60,exercises:ye,notes:"Primary strength day - can push intensity"})}q.push({day:B+1,dayName:I,name:ne.map(de=>de.focus).join(" / ")||"Active Recovery",isRestDay:ne.length===0,isDeload:A,sessions:ne})}return q}function generateProgram(d){d||(console.error("generateProgram called with no formData"),d={});let{programType:h="strength",programSubtype:m="powerlifting",desiredTrainingDays:E=4,enableHybrid:j=!1,secondaryProgramType:g="",allowDoubleDays:N=!1,currentWeeklyMileage:k=0,longestRecentRun:A=0,vacations:w=[],targetFinishHours:M="",targetFinishMinutes:_="",targetFinishSeconds:J="",raceDistance:W="",baselineRaceDistance:ie="",baselineTimeHours:q="",baselineTimeMinutes:L="",baselineTimeSeconds:Ee="",strengthGoals:ue=[],programStartDate:te=""}=d;E=parseInt(E)||4,E<2&&(E=2),E>7&&(E=7);const K=m==="triathlon";K&&(j=!0,g="strength",N=!0,E<5&&(E=5));const me=calculateAthleteLevel(d),{totalWeeks:re,weeksUntilGoal:F}=calculateProgramLength(d),U=generatePeriodizationPhases(re,h,m),Q=distributeWorkoutDays(E),xe=[M,_,J].filter(Boolean).join(":"),Ce=[q,L,Ee].filter(Boolean).join(":"),B=calculatePaces(xe,W,Ce,ie),Z=parseFloat(k)||null,ge=parseFloat(A)||null;let I="aesthetic";h==="strength"&&(I="strength");const ne=SPLIT_TEMPLATES[Math.min(E,6)]?.[I]||SPLIT_TEMPLATES[4][I],le=U[0]||"Base",de=1,ye=le==="Deload"||le==="Taper";let z=[];if(K){const G=ENDURANCE_TEMPLATES.triathlon[E]||ENDURANCE_TEMPLATES.triathlon[5],Ie={4:[0,2,4,5],5:[0,1,3,4,5],6:[0,1,2,4,5,6],7:[0,1,2,3,4,5,6]},ee=Ie[E]||Ie[5];for(let Re=0;Re<7;Re++){const je=ee.indexOf(Re),Ve=je!==-1,Be=getDayName(Re);if(!Ve){z.push({day:Re+1,dayName:Be,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const Fe=G[je]||"Easy Run",Ke=generateTriathlonSession(Fe,le,ye,me,B,de),ct=[];if(Fe.includes("Strength")){const Ss=Ke.strengthSession||[],rt=Fe.toLowerCase().includes("swim"),ks=Fe.toLowerCase().includes("bike");Fe.toLowerCase().includes("run")||Fe.toLowerCase().includes("tempo");const as=Ke.exercises.filter(xs=>!xs.name.toLowerCase().includes("strength")&&!xs.name.toLowerCase().includes("prevention"));if(as.length>0){const xs=rt?"swim":ks?"bike":"run",_t=rt?"Technique Swim":Fe.includes("Intervals")?"Bike Intervals":Fe.includes("Tempo")?"Tempo Run":ks?"Easy Bike":"Easy-Moderate Run";ct.push({time:"AM",type:xs,focus:_t,duration:Math.round(Ke.duration*.55),exercises:as})}if(Ss.length>0){const xs=Fe.includes("Swim")?"Full Injury Prevention":Fe.includes("Run + Strength")?"Hip & Glute Stability":Fe.includes("Bike + Strength")?"Core & Stability":Fe.includes("Tempo")?"Prehab & Mobility":"Core & Stability";ct.push({time:"PM",type:"strength",focus:xs,duration:35,exercises:Ss,notes:"Triathlon injury prevention: NOT hypertrophy. Focus on stability & resilience."})}}else Fe.includes("/")||Fe.includes("+")?Ke.exercises.length>=2?(ct.push({time:"AM",type:Ke.exercises[0].name.toLowerCase().includes("swim")?"swim":Ke.exercises[0].name.toLowerCase().includes("bike")?"bike":"run",focus:Ke.exercises[0].name,duration:Math.round(Ke.duration*.5),exercises:[Ke.exercises[0]]}),ct.push({time:"PM",type:Ke.exercises[1].name.toLowerCase().includes("swim")?"swim":Ke.exercises[1].name.toLowerCase().includes("bike")?"bike":"run",focus:Ke.exercises[1].name,duration:Math.round(Ke.duration*.5),exercises:[Ke.exercises[1]]})):ct.push({time:"ANY",type:"triathlon",focus:Fe,duration:Ke.duration,exercises:Ke.exercises}):Fe.includes("Brick")?ct.push({time:"AM",type:"brick",focus:"Long Brick",duration:Ke.duration,exercises:Ke.exercises,notes:"Key session: practice race transitions"}):ct.push({time:"ANY",type:Fe.toLowerCase().includes("swim")?"swim":Fe.toLowerCase().includes("bike")?"bike":"run",focus:Fe,duration:Ke.duration,exercises:Ke.exercises});z.push({day:Re+1,dayName:Be,name:ct.map(Ss=>Ss.focus).join(" / "),isRestDay:!1,isDeload:ye,sessions:ct})}}else if(j&&h==="endurance"&&(g==="strength"||g==="aesthetic")){const G=m==="triathlon"?ENDURANCE_TEMPLATES.triathlon:ENDURANCE_TEMPLATES.running;z=createSmartHybridSchedule(E,h,g,N,G,B,me,le,ye,de,re,Z,ge,ue,W)}else for(let G=0;G<7;G++){const Ie=Q.includes(G),ee=getDayName(G);if(!Ie){z.push({day:G+1,dayName:ee,name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]});continue}const Re=Q.indexOf(G),je=ne.length>0?Re%ne.length:0,Ve=ne[je]||{name:"Full Body",focus:["legs","chest","back"]},Be=[];if(h==="endurance"){const Ke=(m==="triathlon"?ENDURANCE_TEMPLATES.triathlon:ENDURANCE_TEMPLATES.running)[E]?.[Re]||"Easy Run",ct=generateEnduranceSession(Ke,le,ye,Z,me,B,de,re,ge,W);Be.push({time:"AM",type:"endurance",focus:Ke,duration:ct.duration,exercises:ct.exercises})}else if(h==="strength"){const Fe=generateStrengthExercises(Ve.focus,le,ye,me,de,ue);Be.push({time:"ANY",type:"strength",focus:Ve.name,duration:me?.level==="elite"?90:75,exercises:Fe})}else if(h==="aesthetic"){const Fe=generateAestheticExercises(Ve.focus,le,ye,me,de);Be.push({time:"ANY",type:"hypertrophy",focus:Ve.name,duration:me?.level==="elite"?75:60,exercises:Fe})}else if(h==="fatloss"){const Fe=generateFatLossSession(Ve.focus,le,ye,me,de);Be.push({time:"ANY",type:"metabolic",focus:Ve.name,duration:50,exercises:Fe})}j&&g==="endurance"&&N&&Be.push({time:"PM",type:"endurance",focus:"Easy Run",duration:30,exercises:[{name:"Easy Run",sets:1,reps:"30 min",pace:B?.recoveryPace||"10:00-10:30/mi",heartRateZone:"Zone 1-2",rpe:4,rest:"N/A",notes:"Recovery pace only - prioritize strength recovery"}]}),z.push({day:G+1,dayName:ee,name:Be.map(Fe=>Fe.focus).join(" / "),isRestDay:!1,isDeload:ye,sessions:Be})}return{name:getProgramName(h,m,me.level),description:`${me.level.charAt(0).toUpperCase()+me.level.slice(1)}-level ${h} program with ${re}-week periodization. Max 5% weekly volume increase.`,mesocycleWeeks:re,totalWeeks:re,currentWeek:1,currentPhase:U[0],phases:U,athleteLevel:me.level,athleteScore:me.score,primaryGoal:h,primarySubtype:m,secondaryGoal:g||null,secondarySubtype:d.secondarySubtype||null,isHybrid:j||!1,allowDoubleDays:N||!1,daysPerWeek:E,vacations:w,weeksUntilGoal:F,baseline:{endurance:h==="endurance"?{currentMileage:Z,longestRecentRun:ge,referenceRace:ie?{distance:ie,time:Ce}:null}:null,strength:h==="strength"?{lifts:ue.filter(G=>G.current1RM).map(G=>({exercise:G.label,current1RM:parseFloat(G.current1RM),target1RM:parseFloat(G.target1RM)}))}:null},paces:h==="endurance"?B:null,generatedAt:new Date().toISOString(),startDate:te||new Date().toISOString().split("T")[0],weeklySchedule:z,progressionRules:{strengthIncrease:me.level==="elite"?"Micro-load 1-2.5lbs when RPE allows. Prioritize technical consistency.":"Add 2.5-5lbs per week when all reps completed at target RPE.",volumeIncrease:"Add 1 set per exercise every 2-3 weeks during Build phase.",mileageIncrease:"Max 5% weekly mileage increase. Never more.",deloadProtocol:`Every ${me.level==="elite"?"3rd":"4th"} week: 50% volume, maintain intensity at RPE 6-7.`},dynamicAdjustments:{missedWorkouts:"Program will auto-adjust if workouts are missed.",nutritionTracking:"Calorie targets adjust based on progress.",goalTracking:"Weekly check-ins to ensure you stay on track."}}}function getProgramName(d,h,m){const E=m==="elite"?"Elite ":m==="advanced"?"Advanced ":"";return{endurance:{running:`${E}Running Program`,marathon:`${E}Marathon Prep`,cycling:`${E}Cycling Performance`,swimming:`${E}Swim Program`,triathlon:`${E}Triathlon Builder`},strength:{powerlifting:`${E}Powerlifting Protocol`,olympic:`${E}Olympic Lifting`,strongman:`${E}Strongman Training`},aesthetic:{hypertrophy:`${E}Hypertrophy Program`,"lean-muscle":`${E}Lean Gains`,recomp:`${E}Body Recomposition`},fatloss:{aggressive:`${E}Rapid Fat Loss`,moderate:`${E}Sustainable Shred`,slow:`${E}Gradual Cut`}}[d]?.[h]||`${E}${d.charAt(0).toUpperCase()+d.slice(1)} Program`}const STRENGTH_LIFTS=[{id:"squat",label:"Back Squat",icon:""},{id:"bench",label:"Bench Press",icon:""},{id:"deadlift",label:"Deadlift",icon:""},{id:"ohp",label:"Overhead Press",icon:""}],NUTRITION_GOALS=[{id:"recomp",label:"Recomp",desc:"Lose fat, build muscle (Recommended)",icon:"",multiplier:1,detail:"Eat at maintenance with high protein. Gradual, sustainable progress."},{id:"gain",label:"Gain Weight",desc:"Calorie surplus for faster gains",icon:"",multiplier:.8,detail:"Better recovery, faster strength gains. Best for building muscle."},{id:"maintain",label:"Maintain",desc:"Keep current weight",icon:"",multiplier:1,detail:"Stable energy levels, steady progress."},{id:"lose",label:"Lose Weight",desc:"Calorie deficit (slower progress)",icon:"",multiplier:1.4,detail:"Less recovery, reduced energy. Strength gains will be slower."}];function calculate1RM(d,h){return!d||!h||h<1?null:h===1?d:Math.round(d*(1+h/30))}function calculateRecommendedDuration(d,h,m,E){const j=h-d;if(j<=0)return{weeks:8,reason:"maintenance",monthlyRate:0};const g={beginner:30,intermediate:15,advanced:8,elite:4},k=(NUTRITION_GOALS.find(J=>J.id===E)||NUTRITION_GOALS[0]).multiplier,A=g[m]||g.intermediate,w=Math.round(A/k),M=Math.ceil(j/w);return{weeks:Math.max(8,M*4),monthlyRate:w,reason:"calculated",nutritionImpact:k!==1?k<1?"faster":"slower":"normal"}}function getTodayString$1(){return new Date().toISOString().split("T")[0]}function addWeeksToDate(d,h){const m=d?new Date(d):new Date;return m.setDate(m.getDate()+h*7),m.toISOString().split("T")[0]}function getWeeksDifference(d,h){const m=new Date(d),j=new Date(h)-m;return Math.round(j/(1e3*60*60*24*7))}function StrengthGoalsForm({strengthGoals:d,strengthGoalDate:h,programStartDate:m,nutritionGoal:E,experienceLevel:j="intermediate",bodyFatPercent:g,onUpdateGoal:N,onUpdateDate:k,onUpdateStartDate:A,onUpdateNutrition:w}){const[M,_]=reactExports.useState({}),[J,W]=reactExports.useState(!1),ie=d&&d.length>0?d:STRENGTH_LIFTS.map(xe=>({id:xe.id,label:xe.label,current1RM:"",target1RM:"",workingWeight:"",workingReps:""})),q=ie.reduce((xe,Ce)=>{const B=parseFloat(Ce.current1RM)||0;return xe+B},0),L=ie.reduce((xe,Ce)=>{const B=parseFloat(Ce.target1RM)||0;return xe+B},0),ue=E||((parseFloat(g)||15)<=10?"gain":"recomp"),te=calculateRecommendedDuration(q,L,j,ue),K=m||getTodayString$1(),me=addWeeksToDate(K,te.weeks),re=addWeeksToDate(K,Math.max(1,te.weeks-1));reactExports.useEffect(()=>{if(L>q&&te.weeks>0){const xe=addWeeksToDate(K,te.weeks);(!h||h<xe)&&(k(xe),W(!1))}},[K,te.weeks,q,L]);const F=xe=>{const Ce=te.weeks;getWeeksDifference(K,xe)<Ce-1?W(!0):W(!1),k(xe)},U=(xe,Ce,B)=>{const Z=ie.find(I=>I.id===xe);if(!Z)return;const ge={...Z,[Ce]:B};if(ge.workingWeight&&ge.workingReps){const I=calculate1RM(parseFloat(ge.workingWeight),parseInt(ge.workingReps));I&&(ge.current1RM=I.toString())}N(xe,Ce,B),ge.current1RM!==Z.current1RM&&N(xe,"current1RM",ge.current1RM)},Q=()=>NUTRITION_GOALS.find(xe=>xe.id===ue)||NUTRITION_GOALS[0];return jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Nutrition Strategy"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Your nutrition affects how fast you can safely progress. This impacts your program timeline."}),parseFloat(g)<=10&&jsxRuntimeExports.jsx("div",{className:"mb-4 p-3 bg-amber-900/20 border border-amber-600/30 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-amber-300",children:[jsxRuntimeExports.jsx("strong",{children:"Note:"})," At 10% body fat, we recommend a calorie surplus for optimal strength gains and recovery."]})}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:NUTRITION_GOALS.map(xe=>jsxRuntimeExports.jsxs("button",{onClick:()=>w(xe.id),className:`p-3 rounded-lg border text-left transition-all ${ue===xe.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500 hover:border-dark-400"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[jsxRuntimeExports.jsx("span",{children:xe.icon}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:xe.label})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:xe.desc})]},xe.id))}),jsxRuntimeExports.jsxs("div",{className:"mt-3 p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:Q().detail}),ue==="lose"&&jsxRuntimeExports.jsx("p",{className:"text-xs text-amber-400 mt-2",children:" Strength gains are significantly slower in a deficit. Consider recomp instead."})]})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Current Strength Baselines"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Enter your current 1 rep max (1RM) for each lift. If you don't know your 1RM, click the calculator to estimate from your working weight and reps."})]}),ie.map(xe=>{const Ce=STRENGTH_LIFTS.find(Z=>Z.id===xe.id),B=M[xe.id];return jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{className:"text-white font-medium flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{children:Ce?.icon}),xe.label]}),jsxRuntimeExports.jsxs("button",{type:"button",onClick:()=>_(Z=>({...Z,[xe.id]:!Z[xe.id]})),className:`flex items-center gap-1 text-xs px-2 py-1 rounded ${B?"bg-accent-primary/20 text-accent-primary":"bg-dark-600 text-gray-400 hover:text-white"}`,children:[jsxRuntimeExports.jsx(Calculator,{className:"w-3 h-3"}),B?"Hide Calculator":"Don't know 1RM?"]})]}),B&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-600 rounded-lg space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Enter the most weight you can lift for multiple reps:"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{type:"number",value:xe.workingWeight||"",onChange:Z=>U(xe.id,"workingWeight",Z.target.value),placeholder:"Weight (lbs)",className:"w-full px-3 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx("input",{type:"number",value:xe.workingReps||"",onChange:Z=>U(xe.id,"workingReps",Z.target.value),placeholder:"Reps",min:"1",max:"15",className:"w-full px-3 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"})})]}),xe.workingWeight&&xe.workingReps&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-accent-primary",children:["Estimated 1RM: ",jsxRuntimeExports.jsxs("span",{className:"font-bold",children:[calculate1RM(parseFloat(xe.workingWeight),parseInt(xe.workingReps))," lbs"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Current 1RM"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"number",value:xe.current1RM||"",onChange:Z=>N(xe.id,"current1RM",Z.target.value),placeholder:"e.g., 225",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:"lbs"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"Goal 1RM"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("input",{type:"number",value:xe.target1RM||"",onChange:Z=>N(xe.id,"target1RM",Z.target.value),placeholder:"e.g., 275",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500",children:"lbs"})]})]})]})]},xe.id)}),q>0&&L>0&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 rounded-lg border border-accent-primary/30",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"Current Total"}),jsxRuntimeExports.jsxs("span",{className:"text-white font-bold",children:[q," lbs"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"Goal Total"}),jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[L," lbs"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between items-center pt-2 border-t border-white/10",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"Total Gain Needed"}),jsxRuntimeExports.jsxs("span",{className:"text-accent-secondary font-bold",children:["+",L-q," lbs"]})]})]}),L>q&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(Info,{className:"w-5 h-5 text-accent-primary flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium mb-1",children:"Estimated Program Duration"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400 mb-3",children:["Based on your goals, experience (",j,"), and nutrition strategy (",ue,"), you can realistically gain about ",jsxRuntimeExports.jsxs("span",{className:"text-white",children:[te.monthlyRate," lbs/month"]})," across your main lifts."]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl font-bold text-accent-primary",children:te.weeks}),jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"weeks estimated"})]}),te.nutritionImpact!=="normal"&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:te.nutritionImpact==="faster"?" Calorie surplus enables faster recovery and progress":" Calorie deficit slows recovery - timeline adjusted accordingly"})]})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Program Start Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:m||"",min:getTodayString$1(),onChange:xe=>A(xe.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to start today"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Estimated 1RM Goal Accomplishment Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:h||me,min:re,onChange:xe=>F(xe.target.value),className:`w-full px-4 py-3 bg-dark-700 border rounded-lg text-white ${J?"border-amber-500":"border-dark-600"}`}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Based on your start date and estimated ",te.weeks,"-week program"]}),J&&jsxRuntimeExports.jsx("div",{className:"mt-3 p-4 bg-amber-900/20 border border-amber-600/30 rounded-lg",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx(AlertTriangle,{className:"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-amber-300 font-medium mb-1",children:" Accelerated Timeline Warning"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 mb-2",children:"Pushing your goals faster than recommended significantly increases injury risk and could set you back even further."}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:[jsxRuntimeExports.jsx("strong",{children:"We don't recommend expediting the program."})," It's already optimized for maximum safe progress. If you're progressing faster than expected, the program will automatically adjust to your performance."]})]})]})})]})]})}function AdvancedMetricsModal({isOpen:d,onClose:h,formData:m,updateFormData:E}){const[j,g]=reactExports.useState("dexa");if(!d)return null;const N=[{id:"dexa",label:"DEXA Scan",icon:""},{id:"inbody",label:"InBody",icon:""},{id:"rmr",label:"RMR Test",icon:""}];return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white",children:"Advanced Body Metrics"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Enter data from professional body composition tests"})]}),jsxRuntimeExports.jsx("button",{onClick:h,className:"p-2 rounded-lg hover:bg-dark-700 text-gray-400 hover:text-white",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"flex border-b border-dark-600",children:N.map(k=>jsxRuntimeExports.jsxs("button",{onClick:()=>g(k.id),className:`flex-1 py-3 px-4 text-sm font-medium transition-colors ${j===k.id?"text-accent-primary border-b-2 border-accent-primary bg-dark-700/50":"text-gray-400 hover:text-white hover:bg-dark-700/30"}`,children:[jsxRuntimeExports.jsx("span",{className:"mr-2",children:k.icon}),k.label]},k.id))}),jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[j==="dexa"&&jsxRuntimeExports.jsx(DEXAForm,{formData:m,updateFormData:E}),j==="inbody"&&jsxRuntimeExports.jsx(InBodyForm,{formData:m,updateFormData:E}),j==="rmr"&&jsxRuntimeExports.jsx(RMRForm,{formData:m,updateFormData:E})]}),jsxRuntimeExports.jsx("div",{className:"p-4 border-t border-dark-600",children:jsxRuntimeExports.jsx("button",{onClick:h,className:"w-full py-3 bg-accent-primary text-dark-900 font-semibold rounded-lg hover:bg-accent-primary/90",children:"Save & Close"})})]})})}function DEXAForm({formData:d,updateFormData:h}){return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-blue-500/10 rounded-lg border border-blue-500/30",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 text-blue-400 mt-0.5"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-blue-300",children:"DEXA (Dual-Energy X-ray Absorptiometry) is the gold standard for body composition analysis, providing accurate measurements of bone density, fat mass, and lean mass."})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Body Fat Percentage (%)"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.dexaBodyFat||"",onChange:m=>h("dexaBodyFat",m.target.value),placeholder:"e.g., 18.5",step:"0.1",min:"3",max:"60",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Lean Body Mass (lbs)"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.dexaLeanMass||"",onChange:m=>h("dexaLeanMass",m.target.value),placeholder:"e.g., 145",step:"0.1",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Fat Mass (lbs)"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.dexaFatMass||"",onChange:m=>h("dexaFatMass",m.target.value),placeholder:"e.g., 35",step:"0.1",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Bone Mineral Density (g/cm) ",jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),jsxRuntimeExports.jsx("input",{type:"number",value:d.dexaBMD||"",onChange:m=>h("dexaBMD",m.target.value),placeholder:"e.g., 1.2",step:"0.01",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Scan Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:d.dexaScanDate||"",onChange:m=>h("dexaScanDate",m.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]})]})}function InBodyForm({formData:d,updateFormData:h}){return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-purple-500/10 rounded-lg border border-purple-500/30",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 text-purple-400 mt-0.5"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-purple-300",children:"InBody uses bioelectrical impedance analysis (BIA) to measure body composition. It provides data on muscle mass, body fat, and water distribution."})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Body Fat Percentage (%)"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.inbodyBodyFat||"",onChange:m=>h("inbodyBodyFat",m.target.value),placeholder:"e.g., 20.3",step:"0.1",min:"3",max:"60",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Skeletal Muscle Mass (lbs)"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.inbodySMM||"",onChange:m=>h("inbodySMM",m.target.value),placeholder:"e.g., 85",step:"0.1",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total Body Water (lbs)"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.inbodyTBW||"",onChange:m=>h("inbodyTBW",m.target.value),placeholder:"e.g., 95",step:"0.1",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Basal Metabolic Rate (kcal) ",jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"(from InBody)"})]}),jsxRuntimeExports.jsx("input",{type:"number",value:d.inbodyBMR||"",onChange:m=>h("inbodyBMR",m.target.value),placeholder:"e.g., 1850",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["InBody Score ",jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),jsxRuntimeExports.jsx("input",{type:"number",value:d.inbodyScore||"",onChange:m=>h("inbodyScore",m.target.value),placeholder:"e.g., 78",min:"0",max:"100",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Test Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:d.inbodyDate||"",onChange:m=>h("inbodyDate",m.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]})]})}function RMRForm({formData:d,updateFormData:h}){return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("div",{className:"p-3 bg-orange-500/10 rounded-lg border border-orange-500/30",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx(Info,{className:"w-4 h-4 text-orange-400 mt-0.5"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-orange-300",children:"Resting Metabolic Rate (RMR) testing measures the calories your body burns at rest using indirect calorimetry. This is the most accurate way to determine your true metabolic rate."})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Measured RMR (kcal/day)"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.measuredRMR||"",onChange:m=>h("measuredRMR",m.target.value),placeholder:"e.g., 1750",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This will override our calculated BMR estimate for more accurate calorie targets."})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Respiratory Quotient (RQ) ",jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),jsxRuntimeExports.jsx("input",{type:"number",value:d.measuredRQ||"",onChange:m=>h("measuredRQ",m.target.value),placeholder:"e.g., 0.85",step:"0.01",min:"0.7",max:"1.0",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"RQ indicates fuel utilization: 0.7 = mostly fat, 1.0 = mostly carbs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Testing Facility/Method"}),jsxRuntimeExports.jsx("input",{type:"text",value:d.rmrFacility||"",onChange:m=>h("rmrFacility",m.target.value),placeholder:"e.g., DEXA Fit, BodySpec",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Test Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:d.rmrDate||"",onChange:m=>h("rmrDate",m.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),d.measuredRMR&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Comparison:"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Measured RMR:"}),jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[d.measuredRMR," kcal"]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Your measured RMR will be used instead of calculated estimates for more accurate nutrition targets."})]})]})}class SetupErrorBoundary extends reactExports.Component{constructor(h){super(h),this.state={hasError:!1,error:null}}static getDerivedStateFromError(h){return{hasError:!0,error:h}}componentDidCatch(h,m){console.error("Setup Wizard Error:",h),console.error("Error Info:",m),console.error("Component Stack:",m?.componentStack)}render(){return this.state.hasError?jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center p-6",children:jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 max-w-md text-center",children:[jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Something went wrong"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-4",children:this.state.error?.message||"An unexpected error occurred"}),jsxRuntimeExports.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:null}),window.location.reload()},className:"px-6 py-3 bg-accent-primary text-white rounded-lg font-medium",children:"Reload"})]})}):this.props.children}}const getTodayString=()=>new Date().toISOString().split("T")[0],STEPS_STANDARD=[{id:1,title:"Program",icon:Target},{id:2,title:"Body Stats",icon:Scale},{id:3,title:"Goal Details",icon:Dumbbell},{id:4,title:"Time Off",icon:Plane},{id:5,title:"Generate",icon:Sparkles}],STEPS_LOCKIN=[{id:1,title:"Program",icon:Target},{id:2,title:"Quick Setup",icon:Scale},{id:3,title:"Commitments",icon:Dumbbell},{id:4,title:"Unlock",icon:Sparkles}],PROGRAM_TYPES=[{id:"lockin",title:"30 Day Lock In",description:"Build momentum with a simple, structured 30-day challenge",icon:"",subtypes:[{id:"lockin-standard",label:"30 Day Challenge"}],isLockIn:!0},{id:"endurance",title:"Endurance",description:"Cardiovascular training - running, cycling, swimming",icon:"",subtypes:[{id:"running",label:"Running (Race Training)"},{id:"cycling",label:"Cycling"},{id:"swimming",label:"Swimming"},{id:"triathlon",label:"Triathlon"}]},{id:"strength",title:"Strength",description:"Build maximal strength and power",icon:"",subtypes:[{id:"powerlifting",label:"Powerlifting"},{id:"olympic",label:"Olympic Lifting"},{id:"strongman",label:"Strongman"}]},{id:"aesthetic",title:"Aesthetic",description:"Physique focused - muscle building and body composition",icon:"",subtypes:[{id:"hypertrophy",label:"Hypertrophy/Bodybuilding"},{id:"lean-muscle",label:"Lean Muscle Building"},{id:"recomp",label:"Body Recomposition"}]}],RACE_DISTANCES=[{id:"5k",label:"5K",miles:3.1},{id:"10k",label:"10K",miles:6.2},{id:"half",label:"Half Marathon",miles:13.1},{id:"full",label:"Full Marathon",miles:26.2},{id:"ultra",label:"Ultra Marathon",miles:null,requiresDistance:!0}],BASELINE_RACE_DISTANCES=[{id:"5k",label:"5K"},{id:"10k",label:"10K"},{id:"half",label:"Half Marathon"},{id:"full",label:"Full Marathon"}],TRIATHLON_DISTANCES=[{id:"sprint",label:"Sprint",description:"750m swim, 20km bike, 5km run"},{id:"olympic",label:"Olympic",description:"1.5km swim, 40km bike, 10km run"},{id:"half-iron",label:"Half Ironman (70.3)",description:"1.9km swim, 90km bike, 21.1km run"},{id:"full-iron",label:"Ironman",description:"3.8km swim, 180km bike, 42.2km run"}],STRENGTH_EXERCISES=[{id:"squat",label:"Back Squat"},{id:"bench",label:"Bench Press"},{id:"deadlift",label:"Deadlift"},{id:"ohp",label:"Overhead Press"}],SECONDARY_CARDIO_OPTIONS=[{id:"running",label:"Running",icon:"",description:"2-3 easy runs per week"},{id:"cycling",label:"Cycling",icon:"",description:"2-3 bike sessions per week"},{id:"swimming",label:"Swimming",icon:"",description:"2-3 swim sessions per week"}],generateTestData=()=>{const d={name:"Test User",age:30,sex:"male",weight:180,weightUnit:"lbs",heightFeet:5,heightInches:10,heightUnit:"imperial",programType:"endurance",programSubtype:"running",desiredTrainingDays:5,yearsTraining:3,trainingHistory:"consistent",raceDistance:"half",raceDate:new Date(Date.now()+7776e6).toISOString().split("T")[0],nutritionGoal:"maintain",weightKg:81.6,heightCm:177.8,bmr:1882,tdee:3200,macros:{calories:3200,protein:180,carbs:400,fat:100}},h={name:"Test Running Program",type:"endurance",subtype:"running",primaryGoal:"endurance",currentWeek:1,currentPhase:"Base",mesocycleWeeks:14,daysPerWeek:5,programStartDate:new Date().toISOString().split("T")[0],weeklySchedule:[{day:1,dayName:"Monday",name:"Easy Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Easy Run",duration:40,exercises:[{name:"Easy Run",sets:1,reps:"40 min",pace:"9:30-10:00/mi",rpe:5}]}]},{day:2,dayName:"Tuesday",name:"Intervals",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Intervals",duration:45,exercises:[{name:"Speed Work",sets:6,reps:"400m",pace:"7:30/mi",rpe:8}]}]},{day:3,dayName:"Wednesday",name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]},{day:4,dayName:"Thursday",name:"Tempo Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Tempo",duration:50,exercises:[{name:"Tempo Run",sets:1,reps:"4 mi",pace:"8:15/mi",rpe:7}]}]},{day:5,dayName:"Friday",name:"Easy Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Easy Run",duration:35,exercises:[{name:"Recovery Run",sets:1,reps:"30 min",pace:"10:00/mi",rpe:4}]}]},{day:6,dayName:"Saturday",name:"Long Run",isRestDay:!1,isDeload:!1,sessions:[{time:"AM",type:"endurance",focus:"Long Run",duration:90,exercises:[{name:"Long Run",sets:1,reps:"10 mi",pace:"9:45/mi",rpe:6}]}]},{day:7,dayName:"Sunday",name:"Active Recovery",isRestDay:!0,isDeload:!1,sessions:[]}]};return{profile:d,program:h}};function SetupWizard({onComplete:d}){const{user:h,signInWithGoogle:m,isAuthenticated:E,isConfigured:j}=useAuth(),[g,N]=reactExports.useState(1),[k,A]=reactExports.useState(!1),[w,M]=reactExports.useState(null),[_,J]=reactExports.useState(0),W=reactExports.useRef(null),ie=()=>L.programType==="lockin"?STEPS_LOCKIN:STEPS_STANDARD,q=ie();q.length;const[L,Ee]=reactExports.useState({name:"",age:"",sex:"male",weight:"",weightUnit:"lbs",heightFeet:"",heightInches:"",heightUnit:"imperial",heightCm:"",bodyFatPercent:"",currentTrainingDays:3,trainingHistory:"some",yearsTraining:1,programType:"",programSubtype:"",desiredTrainingDays:4,raceDistance:"",ultraDistance:"",triathlonDistance:"",targetFinishTime:"",targetFinishHours:"",targetFinishMinutes:"",targetFinishSeconds:"",raceDate:"",currentWeeklyMileage:"",currentPace:"",baselineRaceDistance:"",baselineTimeHours:"",baselineTimeMinutes:"",baselineTimeSeconds:"",longestRecentRun:"",strengthGoals:STRENGTH_EXERCISES.map(I=>({id:I.id,label:I.label,current1RM:"",target1RM:"",workingWeight:"",workingReps:""})),strengthGoalDate:"",includeCardio:!1,cardioType:"",cardioDaysPerWeek:2,currentBodyFat:"",targetBodyFat:"",aestheticGoalDate:"",targetWeight:"",targetDate:"",weeklyWeightChange:.5,enableHybrid:!1,secondaryProgramType:"",secondarySubtype:"",allowDoubleDays:!1,lockInWorkout:!0,lockInSteps:"10k",lockInWater:!0,lockInProtein:!0,lockInCardioType:"treadmill",lockInRestDayActivity:"walk",lockInIdealWeight:"",sessionDuration:60,equipment:"full",programStartDate:"",activityLevel:"moderate",nutritionGoal:"recomp",vacations:[],showAdvancedMetrics:!1,dexaBodyFat:"",dexaLeanMass:"",dexaFatMass:"",dexaBMD:"",dexaScanDate:"",inbodyBodyFat:"",inbodySMM:"",inbodyTBW:"",inbodyBMR:"",inbodyScore:"",inbodyDate:"",measuredRMR:"",measuredRQ:"",rmrFacility:"",rmrDate:""}),ue=(I,ne)=>{Ee(le=>({...le,[I]:ne}))},te=(I,ne,le)=>{const ye=(L.strengthGoals||[]).map(z=>z.id===I?{...z,[ne]:le}:z);ue("strengthGoals",ye)};reactExports.useEffect(()=>{h&&!L.name&&ue("name",h.user_metadata?.full_name||h.email?.split("@")[0]||"")},[h]);const K=()=>{const I=ie();g<I.length&&N(ne=>ne+1)},me=()=>{g>1&&N(I=>I-1)},re=()=>{const I={id:Date.now(),name:"",startDate:"",endDate:""};ue("vacations",[...L.vacations,I])},F=(I,ne,le)=>{const de=L.vacations.map(ye=>ye.id===I?{...ye,[ne]:le}:ye);ue("vacations",de)},U=I=>{ue("vacations",L.vacations.filter(ne=>ne.id!==I))},Q=()=>{if(L.heightUnit==="metric")return parseFloat(L.heightCm)||0;const I=parseFloat(L.heightFeet)||0,ne=parseFloat(L.heightInches)||0;return(I*12+ne)*2.54},xe=async()=>{A(!0);const I={...L,programType:L.programType||"strength",programSubtype:L.programSubtype||"powerlifting",desiredTrainingDays:parseInt(L.desiredTrainingDays)||4,strengthGoals:L.strengthGoals||STRENGTH_EXERCISES.map(Re=>({id:Re.id,label:Re.label,current:"",target:""}))},ne=I.weightUnit==="lbs"?parseFloat(I.weight)*.453592:parseFloat(I.weight),le=Q();let de,ye="calculated";I.measuredRMR&&parseFloat(I.measuredRMR)>0?(de=parseFloat(I.measuredRMR),ye="measured"):I.inbodyBMR&&parseFloat(I.inbodyBMR)>0?(de=parseFloat(I.inbodyBMR),ye="inbody"):de=calculateBMR(ne,le,parseInt(I.age)||30,I.sex);const z=getActivityMultiplier(I.desiredTrainingDays,I.activityLevel),D=Math.round(de*z),G=calculateSmartMacros(D,I,parseFloat(I.weight)),Ie={...I,weightKg:ne,heightCm:le,bmr:de,bmrSource:ye,tdee:D,macros:G};let ee=null;try{console.log("Calling API with profile:",I.programType,I.programSubtype);const Re=await fetch("/api/generate-program",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile:I,macros:G,bmr:de,tdee:D})});if(!Re.ok){const je=await Re.text();throw console.error("API error response:",je),new Error(`API error: ${Re.status}`)}ee=await Re.json(),console.log("API returned program:",ee?.name)}catch(Re){console.error("Error calling API, using fallback:",Re),ee=generateFallbackProgram(I)}(!ee||typeof ee!="object")&&(console.error("Invalid program after generation, creating minimal fallback"),ee=generateFallbackProgram(I)),ee={...ee,primaryGoal:ee.primaryGoal||I.programType,primarySubtype:ee.primarySubtype||I.programSubtype,daysPerWeek:ee.daysPerWeek||I.desiredTrainingDays,weeklySchedule:ee.weeklySchedule||[]};try{d({profile:Ie,program:ee})}catch(Re){console.error("Error in onComplete:",Re),A(!1),alert("Error saving program. Please try again.")}},Ce=()=>{if(L.programType==="lockin")switch(g){case 1:return L.programType==="lockin";case 2:const ne=L.weight,le=L.heightUnit==="metric"?L.heightCm:L.heightFeet&&L.heightInches,de=L.sex;return ne&&le&&de;case 3:return!0;case 4:return!0;default:return!0}else switch(g){case 1:return L.programType&&L.programSubtype&&L.desiredTrainingDays;case 2:const ne=L.weight,le=L.heightUnit==="metric"?L.heightCm:L.heightFeet&&L.heightInches,de=L.age,ye=L.sex;return ne&&le&&de&&ye;case 3:return B();case 4:return!0;case 5:return!0;default:return!0}},B=()=>L.programType==="lockin"?!0:L.programType==="endurance"?L.programSubtype==="running"?L.raceDistance&&L.raceDate:L.programSubtype==="triathlon"?L.triathlonDistance&&L.raceDate:!0:L.programType==="strength"?!(!(L.strengthGoals||[]).some(le=>le.current1RM&&le.target1RM)||!L.strengthGoalDate):L.programType==="aesthetic"?L.targetBodyFat:L.programType==="fatloss"?L.targetWeight:!0;reactExports.useEffect(()=>{if(L.programType!=="strength"){M(null);return}const I=L.strengthGoals||[];if(!I.some(D=>D.current1RM&&D.target1RM)||!L.strengthGoalDate){M(null);return}const le=new Date,de=new Date(L.strengthGoalDate),ye=Math.max(1,Math.ceil((de-le)/(1e3*60*60*24*7))),z=[];if(I.forEach(D=>{if(D.current1RM&&D.target1RM){const G=parseFloat(D.current1RM),ee=parseFloat(D.target1RM)-G,Re=ee/ye;Re>10&&z.push({lift:D.label,weeklyIncrease:Re.toFixed(1),totalIncrease:ee,weeks:ye})}}),z.length>0){const D=z.map(G=>`${G.lift}: ${G.totalIncrease}lbs in ${G.weeks} weeks = ${G.weeklyIncrease}lbs/week`).join(`
`);M(`Your strength goals are not realistic. A maximum of ~10lbs/week 1RM increase is possible with optimal training.

${D}

Please extend your goal date or reduce your targets.`)}else M(null)},[L.programType,L.strengthGoals,L.strengthGoalDate]);const Z=I=>{I.preventDefault(),W.current&&clearTimeout(W.current);const ne=_+1;J(ne),ne>=5?(J(0),ge()):W.current=setTimeout(()=>J(0),3e3)},ge=reactExports.useCallback(()=>{if(window.confirm("Enter test mode? This will create a mock profile for testing.")){const I=generateTestData();d(I)}},[d]);return reactExports.useEffect(()=>{const I=ne=>{ne.ctrlKey&&ne.shiftKey&&ne.key==="T"&&(ne.preventDefault(),ge())};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[ge]),jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 flex flex-col",children:[jsxRuntimeExports.jsxs("header",{className:"px-6 pt-8 pb-4",children:[jsxRuntimeExports.jsx("h1",{className:"font-display text-3xl font-bold tracking-tight gradient-text cursor-pointer select-none",onClick:Z,onTouchEnd:Z,children:"MOTUS"}),jsxRuntimeExports.jsx("p",{className:"text-text-secondary text-sm mt-1",children:"Build your personalized program"}),_>=3&&jsxRuntimeExports.jsxs("p",{className:"text-accent-primary text-xs mt-1 animate-pulse",children:[5-_," more taps for test mode..."]}),jsxRuntimeExports.jsx("p",{className:"text-gray-600 text-xs mt-1 hidden sm:block",children:"Tip: Press Ctrl+Shift+T for test mode"})]}),jsxRuntimeExports.jsx("div",{className:"px-6 py-4",children:jsxRuntimeExports.jsx("div",{className:"flex items-center justify-between mb-2",children:q.map((I,ne)=>jsxRuntimeExports.jsxs(React.Fragment,{children:[jsxRuntimeExports.jsxs("div",{className:"flex flex-col items-center",children:[jsxRuntimeExports.jsx("div",{className:`
                    w-10 h-10 rounded-xl flex items-center justify-center
                    transition-all duration-300
                    ${g>=I.id?"bg-accent-primary text-dark-900":g===I.id-1?"bg-dark-700 text-text-secondary border border-dark-500":"bg-dark-800 text-dark-400"}
                  `,children:jsxRuntimeExports.jsx(I.icon,{className:`w-5 h-5 ${g>=I.id?"stroke-[2.5]":""}`})}),jsxRuntimeExports.jsx("span",{className:`text-xs mt-1.5 hidden sm:block font-medium ${g>=I.id?"text-accent-primary":"text-dark-400"}`,children:I.title})]}),ne<q.length-1&&jsxRuntimeExports.jsx("div",{className:`flex-1 h-0.5 mx-2 transition-all duration-300 rounded-full ${g>I.id?"bg-accent-primary":"bg-dark-700"}`})]},I.id))})}),jsxRuntimeExports.jsx("div",{className:"flex-1 px-6 py-6 overflow-y-auto",children:L.programType==="lockin"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[g===1&&jsxRuntimeExports.jsx(StepProgramSelection,{formData:L,updateFormData:ue}),g===2&&jsxRuntimeExports.jsx(StepLockInQuickSetup,{formData:L,updateFormData:ue}),g===3&&jsxRuntimeExports.jsx(StepLockInCommitments,{formData:L,updateFormData:ue}),g===4&&jsxRuntimeExports.jsx(StepLockInUnlock,{formData:L,isGenerating:k,onGenerate:xe})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[g===1&&jsxRuntimeExports.jsx(StepProgramSelection,{formData:L,updateFormData:ue}),g===2&&jsxRuntimeExports.jsx(StepBodyStats,{formData:L,updateFormData:ue}),g===3&&jsxRuntimeExports.jsx(StepGoalDetails,{formData:L,updateFormData:ue,updateStrengthGoal:te,strengthGoalError:w}),g===4&&jsxRuntimeExports.jsx(StepVacations,{formData:L,addVacation:re,updateVacation:F,removeVacation:U}),g===5&&jsxRuntimeExports.jsx(StepGenerate,{formData:L,isGenerating:k,onGenerate:xe})]})}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-5 border-t border-dark-700 flex justify-between bg-dark-900/95 backdrop-blur-sm",children:[jsxRuntimeExports.jsxs(Button,{variant:"ghost",onClick:me,disabled:g===1,className:"min-w-[100px]",children:[jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5 mr-1"}),"Back"]}),g<ie().length?jsxRuntimeExports.jsxs(Button,{onClick:K,disabled:!Ce(),className:"min-w-[100px]",children:["Next",jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5 ml-1"})]}):null]}),jsxRuntimeExports.jsx(AdvancedMetricsModal,{isOpen:L.showAdvancedMetrics,onClose:()=>ue("showAdvancedMetrics",!1),formData:L,updateFormData:ue})]})}function getActivityMultiplier(d,h="moderate"){const m={sedentary:1.2,light:1.375,moderate:1.55,active:1.725},E={0:0,1:.05,2:.1,3:.15,4:.2,5:.25,6:.3,7:.35},j=m[h]||m.moderate,g=E[Math.min(d||0,7)]||0;return Math.min(j+g,2)}function calculateSmartMacros(d,h,m){let E,j,g,N;switch(h.nutritionGoal){case"maintain":E=d,j=Math.round(m*.8);break;case"recomp":E=d,j=Math.round(m*1);break;case"lose":const w=h.weeklyWeightChange*500;E=Math.round(d-w),j=Math.round(m*1);break;case"gain":const M=h.weeklyWeightChange*500;E=Math.round(d+M),j=Math.round(m*.9);break;default:E=d,j=Math.round(m*.8)}const k=j*4,A=E-k;return N=Math.round(A*.35/9),g=Math.round(A*.65/4),{calories:E,protein:j,carbs:g,fat:N}}function StepProgramSelection({formData:d,updateFormData:h}){const[m,E]=reactExports.useState(null),j={lockin:{icon:"",title:"30 Day Lock In",tagline:"Build momentum in 30 days",description:"A structured 30-day challenge designed to build habits and momentum. Simple, focused, no excuses.",whatToExpect:["6 days/week weightlifting with double progressive overload","3 days/week cardio (20-30 minutes)","Day 7: Active recovery (1 hour)","Daily commitments: workout, steps, water, protein"],timeCommitment:"1-1.5 hours/day",bestFor:"Anyone looking to build consistent habits and see quick results",hybrid:!1},endurance:{icon:"",title:"Endurance",tagline:"Train for distance and speed",description:"Periodized training for running, cycling, swimming, or triathlon. Built on proven race training methodology.",whatToExpect:["Base  Build  Peak  Taper periodization","Zone-based training (easy, tempo, threshold, intervals)","Strategic long runs/rides with progressive distance","Race-specific preparation and pacing"],timeCommitment:"4-10 hours/week depending on race distance",bestFor:"Runners, cyclists, swimmers, and triathletes training for events",hybrid:!0,hybridNote:"Can add Strength or Aesthetic as secondary goal"},strength:{icon:"",title:"Strength",tagline:"Build maximal strength and power",description:"Focused strength training for powerlifting, Olympic lifting, or general strength. Periodized for peak performance.",whatToExpect:["Progressive overload on compound lifts","Periodized intensity (volume  intensity  peak)","Accessory work for weak points","Strategic deloads every 4-6 weeks"],timeCommitment:"4-6 hours/week",bestFor:"Those focused on getting stronger - powerlifters, Olympic lifters, strength enthusiasts",hybrid:!1,hybridNote:"Strength requires dedicated focus - hybrid not recommended"},aesthetic:{icon:"",title:"Aesthetic",tagline:"Sculpt your physique",description:"Hypertrophy-focused training for muscle building, body recomposition, or physique competition.",whatToExpect:["High-volume training with progressive overload","Strategic exercise selection for balanced development","Body recomposition nutrition strategy","Periodized volume and intensity"],timeCommitment:"5-7 hours/week",bestFor:"Bodybuilders, physique competitors, anyone focused on muscle building",hybrid:!1,hybridNote:"Aesthetic goals require dedicated volume - hybrid not recommended"}},g=k=>{h("programType",k),k==="lockin"?(h("programSubtype","lockin-standard"),h("desiredTrainingDays",6),h("enableHybrid",!1)):(h("programSubtype",""),k!=="endurance"&&(h("enableHybrid",!1),h("secondaryProgramType",""),h("secondarySubtype",""))),k==="aesthetic"&&h("nutritionGoal","recomp")},N=PROGRAM_TYPES.find(k=>k.id===d.programType);return jsxRuntimeExports.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Choose Your Program"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Select the program that matches your goals. Tap any card to learn more."})]}),jsxRuntimeExports.jsx("div",{className:"space-y-4",children:Object.entries(j).map(([k,A])=>jsxRuntimeExports.jsxs("div",{className:`rounded-xl border transition-all cursor-pointer overflow-hidden ${d.programType===k?"bg-accent-primary/10 border-accent-primary":"bg-dark-800 border-dark-600 hover:border-dark-400"}`,children:[jsxRuntimeExports.jsxs("div",{className:"p-4 flex items-start gap-4",onClick:()=>{m===k?g(k):E(k)},children:[jsxRuntimeExports.jsx("span",{className:"text-4xl",children:A.icon}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:A.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:A.tagline})]}),d.programType===k&&jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-accent-primary rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-dark-900",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),A.hybrid&&jsxRuntimeExports.jsx("span",{className:"inline-block mt-2 px-2 py-0.5 text-xs bg-accent-secondary/20 text-accent-secondary rounded",children:"Hybrid Available"})]}),jsxRuntimeExports.jsx(ChevronRight,{className:`w-5 h-5 text-gray-500 transition-transform ${m===k?"rotate-90":""}`})]}),m===k&&jsxRuntimeExports.jsxs("div",{className:"px-4 pb-4 border-t border-dark-600 pt-4",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-300 text-sm mb-4",children:A.description}),jsxRuntimeExports.jsxs("div",{className:"space-y-3 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium mb-1",children:"What to Expect:"}),jsxRuntimeExports.jsx("ul",{className:"text-gray-400 space-y-1",children:A.whatToExpect.map((w,M)=>jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),w]},M))})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-4",children:jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Time:"}),jsxRuntimeExports.jsx("span",{className:"text-white ml-2",children:A.timeCommitment})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"Best for:"}),jsxRuntimeExports.jsx("span",{className:"text-gray-300 ml-2",children:A.bestFor})]}),A.hybridNote&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 italic",children:A.hybridNote})]}),jsxRuntimeExports.jsx("button",{onClick:w=>{w.stopPropagation(),g(k)},className:`mt-4 w-full py-3 rounded-lg font-medium transition-all ${d.programType===k?"bg-accent-primary text-dark-900":"bg-dark-600 text-white hover:bg-dark-500"}`,children:d.programType===k?"Selected":"Select This Program"})]})]},k))}),N&&d.programType!=="lockin"&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-800 rounded-xl border border-dark-600",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Select your specific focus:"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:N.subtypes.map(k=>jsxRuntimeExports.jsx("button",{onClick:()=>h("programSubtype",k.id),className:`px-4 py-3 rounded-lg border text-sm transition-all ${d.programSubtype===k.id?"bg-accent-secondary/20 border-accent-secondary text-white":"bg-dark-700 border-dark-500 text-gray-400 hover:border-gray-400"}`,children:k.label},k.id))}),d.programSubtype&&jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["How many days per week do you want to train?"," ",jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[d.desiredTrainingDays," days"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"2",max:"7",step:"1",value:d.desiredTrainingDays,onChange:k=>h("desiredTrainingDays",parseInt(k.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),jsxRuntimeExports.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[2,3,4,5,6,7].map(k=>jsxRuntimeExports.jsx("span",{children:k},k))})]}),d.programType==="endurance"&&d.programSubtype&&d.programSubtype!=="triathlon"&&jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium",children:"Enable Hybrid Training?"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Add strength or aesthetic as secondary goal"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>h("enableHybrid",!d.enableHybrid),className:`w-14 h-8 rounded-full transition-all ${d.enableHybrid?"bg-accent-primary":"bg-dark-600"}`,children:jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded-full bg-white transition-all ${d.enableHybrid?"translate-x-7":"translate-x-1"}`})})]}),d.enableHybrid&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("select",{value:d.secondaryProgramType,onChange:k=>{h("secondaryProgramType",k.target.value),h("secondarySubtype","")},className:"w-full px-4 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select secondary goal..."}),jsxRuntimeExports.jsx("option",{value:"strength",children:" Strength"}),jsxRuntimeExports.jsx("option",{value:"aesthetic",children:" Aesthetic"})]}),d.secondaryProgramType&&jsxRuntimeExports.jsxs("select",{value:d.secondarySubtype,onChange:k=>h("secondarySubtype",k.target.value),className:"w-full px-4 py-2 bg-dark-700 border border-dark-500 rounded-lg text-white text-sm",children:[jsxRuntimeExports.jsx("option",{value:"",children:"Select focus..."}),PROGRAM_TYPES.find(k=>k.id===d.secondaryProgramType)?.subtypes?.map(k=>jsxRuntimeExports.jsx("option",{value:k.id,children:k.label},k.id))]})]})]})]})]})}function StepLockInQuickSetup({formData:d,updateFormData:h}){return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Quick Setup"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Just a few details to calculate your nutrition targets."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Gender"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Used for accurate metabolic calculations"}),jsxRuntimeExports.jsx("div",{className:"flex gap-4",children:["male","female"].map(m=>jsxRuntimeExports.jsx("button",{onClick:()=>h("sex",m),className:`flex-1 py-3 px-4 rounded-lg border transition-all ${d.sex===m?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400 hover:border-gray-400"}`,children:m.charAt(0).toUpperCase()+m.slice(1)},m))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weight"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.weight,onChange:m=>h("weight",m.target.value),placeholder:"Enter weight",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"}),jsxRuntimeExports.jsxs("select",{value:d.weightUnit,onChange:m=>h("weightUnit",m.target.value),className:"px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[jsxRuntimeExports.jsx("option",{value:"lbs",children:"lbs"}),jsxRuntimeExports.jsx("option",{value:"kg",children:"kg"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Height"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("heightUnit","imperial"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${d.heightUnit==="imperial"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"ft / in"}),jsxRuntimeExports.jsx("button",{onClick:()=>h("heightUnit","metric"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${d.heightUnit==="metric"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"cm"})]}),d.heightUnit==="imperial"?jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.heightFeet,onChange:m=>h("heightFeet",m.target.value),placeholder:"Feet",min:"3",max:"8",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.heightInches,onChange:m=>h("heightInches",m.target.value),placeholder:"Inches",min:"0",max:"11",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}):jsxRuntimeExports.jsx("input",{type:"number",value:d.heightCm,onChange:m=>h("heightCm",m.target.value),placeholder:"Height in cm",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Activity Level (outside of workouts)"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:[{id:"sedentary",label:"Sedentary",desc:"Desk job, minimal movement"},{id:"light",label:"Lightly Active",desc:"Some walking, light activity"},{id:"moderate",label:"Moderately Active",desc:"On feet most of day"},{id:"active",label:"Very Active",desc:"Physical job, always moving"}].map(m=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("activityLevel",m.id),className:`w-full p-3 rounded-lg border text-left ${d.activityLevel===m.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:m.label}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:m.desc})]},m.id))})]})]}),d.weight&&(d.heightFeet||d.heightCm)&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl border border-dark-600",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Estimated Daily Calories:"}),jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-accent-primary",children:(()=>{const m=d.weightUnit==="lbs"?parseFloat(d.weight)*.453592:parseFloat(d.weight),E=d.heightUnit==="metric"?parseFloat(d.heightCm):((parseFloat(d.heightFeet)||0)*12+(parseFloat(d.heightInches)||0))*2.54,j=calculateBMR(m,E,30,d.sex||"male"),g=d.activityLevel==="sedentary"?1.2:d.activityLevel==="light"?1.375:d.activityLevel==="moderate"?1.55:d.activityLevel==="active"?1.725:1.55;return Math.round(j*g).toLocaleString()})()}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Based on Mifflin-St Jeor formula  Will be refined during your challenge"})]})]})}function StepLockInCommitments({formData:d,updateFormData:h}){return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Your Commitments"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Choose your daily commitments for the next 30 days."})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gradient-to-r from-orange-500/10 to-red-500/10 rounded-xl border border-orange-500/30",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"30 Day Lock In Schedule"}),jsxRuntimeExports.jsxs("div",{className:"text-sm text-gray-300 space-y-1",children:[jsxRuntimeExports.jsx("p",{children:" Days 1-6: Weightlifting (double progressive overload)"}),jsxRuntimeExports.jsx("p",{children:" 3x/week: Cardio (20-30 min)"}),jsxRuntimeExports.jsx("p",{children:" Day 7: Active recovery (1 hour)"})]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg border border-accent-primary/50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"1hr Workout Daily"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Non-negotiable"})]})]}),jsxRuntimeExports.jsx("div",{className:"w-6 h-6 bg-accent-primary rounded flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-dark-900",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:""}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Daily Steps Goal"})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:["10k","15k"].map(m=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("lockInSteps",m),className:`flex-1 py-2 px-4 rounded-lg border text-sm transition-all ${d.lockInSteps===m?"bg-accent-primary/20 border-accent-primary text-white":"bg-dark-600 border-dark-500 text-gray-400"}`,children:[m," steps"]},m))})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>h("lockInWater",!d.lockInWater),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all ${d.lockInWater?"bg-dark-700 border-accent-primary/50":"bg-dark-800 border-dark-600"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:""}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"1 Gallon Water Daily"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Stay hydrated"})]})]}),jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${d.lockInWater?"bg-accent-primary border-accent-primary":"border-dark-500"}`,children:d.lockInWater&&jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-dark-900",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>h("lockInProtein",!d.lockInProtein),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all ${d.lockInProtein?"bg-dark-700 border-accent-primary/50":"bg-dark-800 border-dark-600"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:""}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"High Protein + Whole Foods"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"1g protein per lb of ideal bodyweight"})]})]}),jsxRuntimeExports.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center ${d.lockInProtein?"bg-accent-primary border-accent-primary":"border-dark-500"}`,children:d.lockInProtein&&jsxRuntimeExports.jsx("svg",{className:"w-4 h-4 text-dark-900",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 bg-dark-800 rounded-xl border border-dark-600",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Cardio & Rest Day:"})," You'll choose your cardio type and rest day activity each day from the home screen. Cardio is 20-30 min, and Day 7 active recovery is 1 hour."]})})]})}function StepLockInUnlock({formData:d,isGenerating:h,onGenerate:m}){const[E,j]=reactExports.useState(0),[g,N]=reactExports.useState([]),k="https://motus.fitness/join",A=`I just signed up for the 30 Day Lock In challenge  Join me: ${k}`,w=async _=>{let J="";switch(_){case"sms":J=`sms:?body=${encodeURIComponent(A)}`;break;case"whatsapp":J=`https://wa.me/?text=${encodeURIComponent(A)}`;break;case"messenger":J=`fb-messenger://share/?link=${encodeURIComponent(k)}&app_id=YOUR_APP_ID`;break;case"copy":try{await navigator.clipboard.writeText(A),alert("Link copied to clipboard!")}catch(W){console.error("Failed to copy:",W)}break;default:if(navigator.share)try{await navigator.share({title:"30 Day Lock In Challenge",text:A,url:k})}catch(W){W.name!=="AbortError"&&console.error("Share failed:",W)}}if(J&&window.open(J,"_blank"),!g.includes(_+Date.now())){const W=Math.min(E+1,3);j(W),N([...g,_+Date.now()])}},M=E>=3;return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-5xl mb-4 block",children:""}),jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Unlock Your Challenge"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Share with 3 friends to unlock the 30 Day Lock In - completely free!"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-800 rounded-xl border border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Share Progress"}),jsxRuntimeExports.jsxs("span",{className:`text-lg font-bold ${M?"text-green-400":"text-accent-primary"}`,children:[E,"/3"]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:[0,1,2].map(_=>jsxRuntimeExports.jsx("div",{className:`flex-1 h-2 rounded-full ${_<E?"bg-accent-primary":"bg-dark-600"}`},_))}),M&&jsxRuntimeExports.jsxs("p",{className:"text-green-400 text-sm mt-2 flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Unlocked! You can start your challenge."]})]}),!M&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 text-center",children:"Share via:"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>w("sms"),className:"flex items-center justify-center gap-2 p-3 bg-green-600 hover:bg-green-500 rounded-lg text-white font-medium",children:[jsxRuntimeExports.jsx("span",{children:""})," Text/iMessage"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>w("whatsapp"),className:"flex items-center justify-center gap-2 p-3 bg-[#25D366] hover:bg-[#20BD5A] rounded-lg text-white font-medium",children:[jsxRuntimeExports.jsx("span",{children:""})," WhatsApp"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>w("messenger"),className:"flex items-center justify-center gap-2 p-3 bg-[#0084FF] hover:bg-[#0073E6] rounded-lg text-white font-medium",children:[jsxRuntimeExports.jsx("span",{children:""})," Messenger"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>w("copy"),className:"flex items-center justify-center gap-2 p-3 bg-dark-600 hover:bg-dark-500 rounded-lg text-white font-medium",children:[jsxRuntimeExports.jsx("span",{children:""})," Copy Link"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-3",children:"Your 30 Day Commitment:"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"1hr Workout Daily"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[d.lockInSteps," Steps Daily"]})]}),d.lockInWater&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"1 Gallon Water"})]}),d.lockInProtein&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"High Protein + Whole Foods"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Cardio 3x/week (20-30 min)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Day 7: Active Recovery (1 hour)"})]})]})]}),jsxRuntimeExports.jsx(Button,{fullWidth:!0,size:"lg",onClick:m,disabled:!M||h,className:`${M?"":"opacity-50"} ${h?"animate-pulse":""}`,children:h?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"animate-spin mr-2",children:""}),"Generating Your Program..."]}):M?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5 mr-2"}),"Start My 30 Day Challenge"]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:" Share to Unlock"})}),jsxRuntimeExports.jsx("button",{onClick:()=>{localStorage.setItem("motus_tylers_friend","true"),j(3)},className:"w-full text-xs text-gray-600 hover:text-gray-400 py-2",children:"I'm Tyler's friend (skip)"})]})}function StepBodyStats({formData:d,updateFormData:h}){return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Body Measurements"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Help us understand your current fitness level."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Gender"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Used for accurate metabolic calculations"}),jsxRuntimeExports.jsx("div",{className:"flex gap-4",children:["male","female"].map(m=>jsxRuntimeExports.jsx("button",{onClick:()=>h("sex",m),className:`flex-1 py-3 px-4 rounded-lg border transition-all ${d.sex===m?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400 hover:border-gray-400"}`,children:m.charAt(0).toUpperCase()+m.slice(1)},m))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weight"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.weight,onChange:m=>h("weight",m.target.value),placeholder:"Enter weight",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"}),jsxRuntimeExports.jsxs("select",{value:d.weightUnit,onChange:m=>h("weightUnit",m.target.value),className:"px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[jsxRuntimeExports.jsx("option",{value:"lbs",children:"lbs"}),jsxRuntimeExports.jsx("option",{value:"kg",children:"kg"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Height"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mb-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("heightUnit","imperial"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${d.heightUnit==="imperial"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"ft / in"}),jsxRuntimeExports.jsx("button",{onClick:()=>h("heightUnit","metric"),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${d.heightUnit==="metric"?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:"cm"})]}),d.heightUnit==="imperial"?jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.heightFeet,onChange:m=>h("heightFeet",m.target.value),placeholder:"Feet",min:"3",max:"8",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.heightInches,onChange:m=>h("heightInches",m.target.value),placeholder:"Inches",min:"0",max:"11",className:"flex-1 px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}):jsxRuntimeExports.jsx("input",{type:"number",value:d.heightCm,onChange:m=>h("heightCm",m.target.value),placeholder:"Height in cm",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Age"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.age,onChange:m=>h("age",m.target.value),placeholder:"Enter your age",min:"16",max:"100",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-accent-primary"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Body Fat % ",jsxRuntimeExports.jsx("span",{className:"text-gray-500",children:"(Optional)"})]}),jsxRuntimeExports.jsx("input",{type:"number",value:d.bodyFatPercent,onChange:m=>h("bodyFatPercent",m.target.value),placeholder:"e.g., 20",min:"5",max:"50",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700/50 rounded-xl border border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium mb-1",children:"Have Professional Data?"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Enter DEXA scan, InBody, or RMR test results for more accurate calculations."})]}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>h("showAdvancedMetrics",!0),className:"px-3 py-1.5 bg-accent-secondary/20 text-accent-secondary text-sm font-medium rounded-lg hover:bg-accent-secondary/30 transition-colors whitespace-nowrap",children:"+ Advanced"})]}),(d.dexaBodyFat||d.inbodyBodyFat||d.measuredRMR)&&jsxRuntimeExports.jsx("div",{className:"mt-3 pt-3 border-t border-dark-600",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-accent-primary",children:[" Advanced metrics on file",d.measuredRMR&&`  RMR: ${d.measuredRMR} kcal`,(d.dexaBodyFat||d.inbodyBodyFat)&&`  BF: ${d.dexaBodyFat||d.inbodyBodyFat}%`]})})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Training History"}),jsxRuntimeExports.jsxs("div",{className:"mb-5",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["How many days per week have you been training? ",jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[d.currentTrainingDays," days"]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Average over the last 30 days"}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"7",step:"1",value:d.currentTrainingDays,onChange:m=>h("currentTrainingDays",parseInt(m.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),jsxRuntimeExports.jsx("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[0,1,2,3,4,5,6,7].map(m=>jsxRuntimeExports.jsx("span",{children:m},m))})]}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"How consistent has your training been?"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:[{id:"none",label:"New to Training",desc:"Just starting out"},{id:"some",label:"Some Experience",desc:"On and off"},{id:"consistent",label:"Consistent",desc:"Regular routine"}].map(m=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("trainingHistory",m.id),className:`p-3 rounded-lg border text-center ${d.trainingHistory===m.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-white text-sm font-medium block",children:m.label}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:m.desc})]},m.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Years of training experience: ",jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[d.yearsTraining," ",d.yearsTraining===1?"year":"years"]})]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0",max:"10",step:"1",value:d.yearsTraining,onChange:m=>h("yearsTraining",parseInt(m.target.value)),className:"w-full h-2 bg-dark-600 rounded-lg appearance-none cursor-pointer accent-accent-primary"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[jsxRuntimeExports.jsx("span",{children:"New"}),jsxRuntimeExports.jsx("span",{children:"5 yrs"}),jsxRuntimeExports.jsx("span",{children:"10+ yrs"})]})]})]})]})]})}function StepGoalDetails({formData:d,updateFormData:h,updateStrengthGoal:m,strengthGoalError:E}){const j=d||{},g=j.programType||"",N=j.programSubtype||"",k=()=>{const w=parseInt(j.yearsTraining)||0;return w<1?"beginner":w<3?"intermediate":w<6?"advanced":"elite"};if(g==="lockin")return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:" Your 30 Day Lock In"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Review your commitments before we build your program."})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-3",children:"Your Weekly Schedule:"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Days 1-6:"}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Weightlifting + Light Cardio"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Day 7:"}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Active Recovery (1 hour)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Cardio (3x/week):"}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Your choice (20-30 min)"})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-3",children:"Daily Commitments:"}),jsxRuntimeExports.jsxs("div",{className:"space-y-2 text-sm",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"1hr Workout (Non-negotiable)"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[j.lockInSteps," Steps Daily"]})]}),j.lockInWater&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"1 Gallon Water"})]}),j.lockInProtein&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[j.lockInIdealWeight?`${j.lockInIdealWeight}g Protein`:"High Protein"," + Whole Foods"]})]})]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-orange-500/10 to-red-500/10 rounded-xl border border-orange-500/30",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300 text-center",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl block mb-2",children:""}),"30 days to build the habits that change everything.",jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:" No excuses. No shortcuts."})]})})]})]});if(g==="strength")return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Goal Details"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Help us tailor your program to your specific targets."})]}),jsxRuntimeExports.jsx(StrengthGoalsForm,{strengthGoals:j.strengthGoals,strengthGoalDate:j.strengthGoalDate,programStartDate:j.programStartDate,nutritionGoal:j.nutritionGoal,experienceLevel:k(),bodyFatPercent:j.bodyFatPercent,onUpdateGoal:m,onUpdateDate:w=>h("strengthGoalDate",w),onUpdateStartDate:w=>h("programStartDate",w),onUpdateNutrition:w=>h("nutritionGoal",w)}),E&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-4 bg-red-900/20 border border-red-700 rounded-xl",children:[jsxRuntimeExports.jsx("h4",{className:"text-red-400 font-semibold mb-2",children:"Unrealistic Goals Detected"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300 whitespace-pre-line",children:E})]}),jsxRuntimeExports.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Add Cardio for Heart Health?"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Adding 2-3 days of easy cardio improves cardiovascular health and recovery without interfering with your strength gains."}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("includeCardio",!j.includeCardio),className:`relative w-12 h-6 rounded-full transition-colors ${j.includeCardio?"bg-accent-primary":"bg-dark-600"}`,children:jsxRuntimeExports.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform ${j.includeCardio?"left-6":"left-0.5"}`})}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Include cardio in my program"})]}),j.includeCardio&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 p-4 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cardio Type"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:SECONDARY_CARDIO_OPTIONS.map(w=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("cardioType",w.id),className:`p-3 rounded-lg border text-center ${j.cardioType===w.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-600 border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-2xl block mb-1",children:w.icon}),jsxRuntimeExports.jsx("span",{className:"text-white text-sm",children:w.label})]},w.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Days per Week"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:[2,3].map(w=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("cardioDaysPerWeek",w),className:`flex-1 py-2 rounded-lg border ${j.cardioDaysPerWeek===w?"bg-accent-primary/20 border-accent-primary text-white":"bg-dark-600 border-dark-500 text-gray-400"}`,children:[w," days"]},w))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Cardio sessions will be scheduled on rest days or as double days (AM/PM splits)"})]})]})]})]});const A=()=>{if(g==="endurance")return N==="marathon"||N==="running"?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:" Race Details"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Distance"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:RACE_DISTANCES.map(w=>jsxRuntimeExports.jsx("button",{onClick:()=>h("raceDistance",w.id),className:`py-3 px-2 rounded-lg border text-sm ${d.raceDistance===w.id?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:w.label},w.id))}),d.raceDistance==="ultra"&&jsxRuntimeExports.jsxs("div",{className:"mt-3",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Ultra Distance (miles)"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.ultraDistance||"",onChange:w=>h("ultraDistance",w.target.value),placeholder:"e.g., 50, 100",min:"30",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Common distances: 50K (31mi), 50mi, 100K (62mi), 100mi"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:d.raceDate,min:getTodayString(),onChange:w=>h("raceDate",w.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Finish Time"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.targetFinishHours,onChange:w=>h("targetFinishHours",w.target.value),placeholder:"Hours",min:"0",max:"24",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.targetFinishMinutes,onChange:w=>h("targetFinishMinutes",w.target.value),placeholder:"Min",min:"0",max:"59",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Minutes"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.targetFinishSeconds,onChange:w=>h("targetFinishSeconds",w.target.value),placeholder:"Sec",min:"0",max:"59",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Seconds"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Current Weekly Mileage"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.currentWeeklyMileage,onChange:w=>h("currentWeeklyMileage",w.target.value),placeholder:"e.g., 20",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h4",{className:"text-md font-semibold text-white mb-2",children:" Current Fitness Baseline"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-4",children:"Enter a recent race or time trial so we can calculate your training paces accurately."}),jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reference Race Distance"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:BASELINE_RACE_DISTANCES.map(w=>jsxRuntimeExports.jsx("button",{onClick:()=>h("baselineRaceDistance",w.id),className:`py-2 px-2 rounded-lg border text-sm ${d.baselineRaceDistance===w.id?"bg-accent-secondary border-accent-secondary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:w.label},w.id))})]}),d.baselineRaceDistance&&jsxRuntimeExports.jsxs("div",{className:"mb-4",children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Your Best Recent ",d.baselineRaceDistance.toUpperCase()," Time"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.baselineTimeHours,onChange:w=>h("baselineTimeHours",w.target.value),placeholder:"Hr",min:"0",max:"10",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.baselineTimeMinutes,onChange:w=>h("baselineTimeMinutes",w.target.value),placeholder:"Min",min:"0",max:"59",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Min"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.baselineTimeSeconds,onChange:w=>h("baselineTimeSeconds",w.target.value),placeholder:"Sec",min:"0",max:"59",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Sec"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Longest Run in Past Month (miles)"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.longestRecentRun,onChange:w=>h("longestRecentRun",w.target.value),placeholder:"e.g., 10",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]})]})]}):N==="triathlon"?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:" Triathlon Details"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Distance"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:TRIATHLON_DISTANCES.map(w=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("triathlonDistance",w.id),className:`w-full p-3 rounded-lg border text-left ${d.triathlonDistance===w.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:w.label}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mt-1",children:w.description})]},w.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Race Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:d.raceDate,min:getTodayString(),onChange:w=>h("raceDate",w.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Finish Time"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.targetFinishHours,onChange:w=>h("targetFinishHours",w.target.value),placeholder:"Hours",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Hours"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.targetFinishMinutes,onChange:w=>h("targetFinishMinutes",w.target.value),placeholder:"Min",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Minutes"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{type:"number",value:d.targetFinishSeconds,onChange:w=>h("targetFinishSeconds",w.target.value),placeholder:"Sec",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-500",children:"Seconds"})]})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:" Endurance Goals"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Set your performance targets"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Event Date (Optional)"}),jsxRuntimeExports.jsx("input",{type:"date",value:d.raceDate,min:getTodayString(),onChange:w=>h("raceDate",w.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Weekly Training Volume Goal"}),jsxRuntimeExports.jsx("input",{type:"text",value:d.currentWeeklyMileage,onChange:w=>h("currentWeeklyMileage",w.target.value),placeholder:"e.g., 100 miles, 10 hours",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]})]});if(g==="aesthetic"){const w=parseFloat(d.bodyFatPercent)||0,M=parseFloat(d.targetBodyFat)||0,_=w-M;return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:" Physique Goals"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Set your body composition targets"}),d.bodyFatPercent&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-dark-700/50 rounded-lg border border-dark-600",children:jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:["Current Body Fat: ",jsxRuntimeExports.jsxs("span",{className:"text-white font-medium",children:[d.bodyFatPercent,"%"]})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Body Fat %"}),jsxRuntimeExports.jsx("input",{type:"number",value:d.targetBodyFat,onChange:J=>h("targetBodyFat",J.target.value),placeholder:"e.g., 12",min:"5",max:"50",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended: 10-15% for men, 18-24% for women for a lean physique"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Target Date (Optional)"}),jsxRuntimeExports.jsx("input",{type:"date",value:d.aestheticGoalDate,min:getTodayString(),onChange:J=>h("aestheticGoalDate",J.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white"})]}),w>0&&M>0&&_>0&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-white",children:[" You're looking to reduce body fat by"," ",jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[_.toFixed(1),"%"]})]})}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Program Start Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:d.programStartDate||"",min:getTodayString(),onChange:J=>h("programStartDate",J.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Leave blank to start today"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-lg border border-accent-primary/20",children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium mb-2",children:" Recomp Strategy"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300",children:["Your nutrition is set to ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary font-medium",children:"recomp"})," (body recomposition). This means eating at maintenance with high protein, slightly lower on rest days, and slightly higher on training days to maximize muscle gain while losing fat."]})]}),jsxRuntimeExports.jsxs("div",{className:"pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-semibold mb-2",children:" Add Cardio for Heart Health?"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Light cardio improves cardiovascular health and can help with fat loss without impacting your muscle-building goals."}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>h("includeCardio",!d.includeCardio),className:`relative w-12 h-6 rounded-full transition-colors ${d.includeCardio?"bg-accent-primary":"bg-dark-600"}`,children:jsxRuntimeExports.jsx("span",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full transition-transform ${d.includeCardio?"left-6":"left-0.5"}`})}),jsxRuntimeExports.jsx("span",{className:"text-white",children:"Include cardio in my program"})]}),d.includeCardio&&jsxRuntimeExports.jsxs("div",{className:"space-y-4 p-4 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cardio Type"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:SECONDARY_CARDIO_OPTIONS.map(J=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("cardioType",J.id),className:`p-3 rounded-lg border text-center ${d.cardioType===J.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-600 border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-2xl block mb-1",children:J.icon}),jsxRuntimeExports.jsx("span",{className:"text-white text-sm",children:J.label})]},J.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Days per Week"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:[2,3].map(J=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("cardioDaysPerWeek",J),className:`flex-1 py-2 rounded-lg border ${d.cardioDaysPerWeek===J?"bg-accent-primary/20 border-accent-primary text-white":"bg-dark-600 border-dark-500 text-gray-400"}`,children:[J," days"]},J))}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Cardio sessions will be scheduled on rest days or as double days"})]})]})]})]})}if(g==="fatloss"){const w=parseFloat(d.weight)||0,M=parseFloat(d.targetWeight)||w,_=w-M,J=_/d.weeklyWeightChange;return jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:" Fat Loss Goals"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Target Weight (",d.weightUnit,")"]}),jsxRuntimeExports.jsx("input",{type:"number",value:d.targetWeight,onChange:W=>h("targetWeight",W.target.value),placeholder:"Enter target weight",className:"w-full px-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white placeholder-gray-500"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Weekly Weight Loss Rate: ",d.weeklyWeightChange," lbs/week"]}),jsxRuntimeExports.jsx("input",{type:"range",min:"0.25",max:"1",step:"0.25",value:d.weeklyWeightChange,onChange:W=>h("weeklyWeightChange",parseFloat(W.target.value)),className:"w-full"}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[jsxRuntimeExports.jsx("span",{children:"Slow (0.25)"}),jsxRuntimeExports.jsx("span",{children:"Moderate (0.5)"}),jsxRuntimeExports.jsx("span",{children:"Aggressive (1.0)"})]})]}),_>0&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-white",children:[" At this rate, you'll reach your goal in approximately"," ",jsxRuntimeExports.jsxs("span",{className:"text-accent-primary font-bold",children:[Math.ceil(J)," weeks"]})]})})]})}return null};return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Goal Details"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Help us tailor your program to your specific targets."})]}),A(),E&&g==="strength"&&jsxRuntimeExports.jsxs("div",{className:"mt-4 p-4 bg-accent-danger/10 border border-accent-danger/30 rounded-xl",children:[jsxRuntimeExports.jsxs("h4",{className:"text-accent-danger font-semibold mb-2 flex items-center gap-2",children:[jsxRuntimeExports.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:jsxRuntimeExports.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),"Unrealistic Goals Detected"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary whitespace-pre-line",children:E}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted mt-3",children:"MOTUS cannot produce a plan with unrealistic goals. Please adjust your targets or extend your timeline."})]}),jsxRuntimeExports.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Program Start Date"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary mb-3",children:"When would you like to begin your program?"}),jsxRuntimeExports.jsx("input",{type:"date",value:d.programStartDate,min:getTodayString(),onChange:w=>h("programStartDate",w.target.value),className:"w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-lg text-white"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted mt-2",children:"Leave blank to start today"})]}),jsxRuntimeExports.jsxs("div",{className:"pt-6 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:" Nutrition Goal"}),g==="aesthetic"?jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-accent-primary/20 border border-accent-primary rounded-lg",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Body Recomposition"}),jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-primary/30 text-accent-primary rounded",children:"Optimal for Aesthetics"})]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:"Simultaneously lose fat while building/maintaining muscle through strategic nutrition timing and macros."})]}),jsxRuntimeExports.jsx("div",{className:"p-3 bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:[jsxRuntimeExports.jsx("strong",{className:"text-gray-300",children:"Recomp Strategy:"})," Eat at maintenance calories with high protein (1g/lb bodyweight). Slight deficit on rest days, slight surplus on training days. This approach maximizes muscle retention while losing fat."]})})]}):jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"maintain",label:"Maintain",desc:"Keep current weight"},{id:"recomp",label:"Recomp",desc:"Lose fat, keep muscle"},{id:"lose",label:"Lose Weight",desc:"Calorie deficit"},{id:"gain",label:"Gain Weight",desc:"Calorie surplus"}].map(w=>jsxRuntimeExports.jsxs("button",{onClick:()=>h("nutritionGoal",w.id),className:`p-3 rounded-lg border text-left ${d.nutritionGoal===w.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:w.label}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:w.desc})]},w.id))}),g!=="aesthetic"&&d.nutritionGoal==="recomp"&&jsxRuntimeExports.jsx("div",{className:"mt-3 p-3 bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:[jsxRuntimeExports.jsx("strong",{className:"text-gray-300",children:"Recomp Strategy:"})," Eat at maintenance with high protein (1g/lb bodyweight). Slight deficit on rest days, slight surplus on training days."]})})]})]})}function StepVacations({formData:d,addVacation:h,updateVacation:m,removeVacation:E}){return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Vacations & Time Off"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Add planned time off so we can align deload weeks and adjust your program."})]}),d.vacations.length>0&&jsxRuntimeExports.jsx("div",{className:"space-y-3",children:d.vacations.map((j,g)=>jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg border border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:["Trip #",g+1]}),jsxRuntimeExports.jsx("button",{onClick:()=>E(j.id),className:"p-1 text-gray-500 hover:text-accent-danger",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsx("input",{type:"text",value:j.name,onChange:N=>m(j.id,"name",N.target.value),placeholder:"Trip name",className:"w-full px-3 py-2 mb-3 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-text-muted",children:"Start Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:j.startDate,min:getTodayString(),onChange:N=>m(j.id,"startDate",N.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-text-muted",children:"End Date"}),jsxRuntimeExports.jsx("input",{type:"date",value:j.endDate,min:j.startDate||getTodayString(),onChange:N=>m(j.id,"endDate",N.target.value),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white text-sm"})]})]})]},j.id))}),jsxRuntimeExports.jsxs("button",{onClick:h,className:"w-full p-4 border-2 border-dashed border-dark-500 rounded-lg hover:border-accent-primary transition-colors flex items-center justify-center gap-2 text-gray-400 hover:text-white",children:[jsxRuntimeExports.jsx(Plus,{className:"w-5 h-5"}),"Add Time Off"]})]})}function StepGenerate({formData:d,isGenerating:h,onGenerate:m}){const E=PROGRAM_TYPES.find(N=>N.id===d.programType),j=E?.subtypes.find(N=>N.id===d.programSubtype),g=()=>{if(d.programType==="endurance"&&d.raceDate){const N=new Date(d.raceDate),A=Math.ceil((N-new Date)/(10080*60*1e3)),w=[d.targetFinishHours,d.targetFinishMinutes,d.targetFinishSeconds].filter(Boolean).join(":");return`${A} weeks to race day${w?`  Target: ${w}`:""}`}return d.programType==="strength"?`${(d.strengthGoals||[]).filter(k=>k.target1RM&&k.current1RM).length} lift targets set`:d.programType==="aesthetic"&&d.targetBodyFat?`Target: ${d.targetBodyFat}% body fat`:d.programType==="fatloss"&&d.targetWeight?`~${Math.ceil((parseFloat(d.weight)-parseFloat(d.targetWeight))/d.weeklyWeightChange)} weeks to ${d.targetWeight} ${d.weightUnit}`:"Ongoing optimization"};return jsxRuntimeExports.jsxs("div",{className:"max-w-md mx-auto space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Ready to Generate"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Your AI-powered program will be optimized for your goals."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl p-6 space-y-4",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:"Your Profile Summary"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Name"}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:d.name})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Stats"}),jsxRuntimeExports.jsxs("p",{className:"text-white font-medium",children:[d.weight," ",d.weightUnit,"  ",d.heightFeet,"'",d.heightInches,'"']})]})]}),jsxRuntimeExports.jsx("hr",{className:"border-dark-600"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Primary Goal"}),jsxRuntimeExports.jsxs("p",{className:"text-white font-medium",children:[E?.icon," ",E?.title,": ",j?.label]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Goal"}),jsxRuntimeExports.jsx("p",{className:"text-accent-primary font-medium",children:g()})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Training Schedule"}),jsxRuntimeExports.jsxs("p",{className:"text-white font-medium",children:[d.desiredTrainingDays," days/week"]})]}),d.enableHybrid&&d.secondaryProgramType&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Secondary Goal"}),jsxRuntimeExports.jsxs("p",{className:"text-white font-medium",children:[PROGRAM_TYPES.find(N=>N.id===d.secondaryProgramType)?.icon," ",d.secondarySubtype]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-sm",children:"Program Features"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-white mt-1 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" Auto-periodization (Base  Build  Peak)"}),jsxRuntimeExports.jsx("li",{children:" Progressive overload built-in"}),jsxRuntimeExports.jsx("li",{children:" Deload weeks every 5 weeks"}),jsxRuntimeExports.jsx("li",{children:" Dynamic adjustments based on progress"})]})]})]}),jsxRuntimeExports.jsx(Button,{fullWidth:!0,size:"lg",onClick:m,disabled:h,className:h?"animate-pulse":"",children:h?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("span",{className:"animate-spin mr-2",children:""}),"Generating Your Program..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-5 h-5 mr-2"}),"Generate My Program"]})})]})}function generateFallbackProgram(d){try{console.log("Generating fallback program with formData:",d);const h=generateProgram(d);if(!h||!h.weeklySchedule)throw console.error("Fallback program generation returned invalid program:",h),new Error("Invalid program generated");return h}catch(h){return console.error("Error in generateFallbackProgram:",h),{name:`${d.programType||"Fitness"} Program`,description:"Your personalized training program",mesocycleWeeks:4,currentWeek:1,currentPhase:"Base",phases:["Base","Build","Peak","Deload"],primaryGoal:d.programType||"strength",primarySubtype:d.programSubtype||"general",daysPerWeek:d.desiredTrainingDays||4,weeklySchedule:[{day:1,dayName:"Monday",name:"Training Day 1",isRestDay:!1,isDeload:!1,sessions:[]},{day:2,dayName:"Tuesday",name:"Training Day 2",isRestDay:!1,isDeload:!1,sessions:[]},{day:3,dayName:"Wednesday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]},{day:4,dayName:"Thursday",name:"Training Day 3",isRestDay:!1,isDeload:!1,sessions:[]},{day:5,dayName:"Friday",name:"Training Day 4",isRestDay:!1,isDeload:!1,sessions:[]},{day:6,dayName:"Saturday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]},{day:7,dayName:"Sunday",name:"Rest Day",isRestDay:!0,isDeload:!1,sessions:[]}],generatedAt:new Date().toISOString(),error:"Program generation failed - using minimal template"}}}function SetupWizardWithErrorBoundary(d){return jsxRuntimeExports.jsx(SetupErrorBoundary,{children:jsxRuntimeExports.jsx(SetupWizard,{...d})})}const MET_VALUES={running_easy:8,running_moderate:10,running_hard:12.5,running_sprint:15,cycling_easy:6,cycling_moderate:8,cycling_hard:12,swimming_easy:6,swimming_moderate:8,swimming_hard:10,walking:3.5,hiking:6,elliptical:5,rowing:7,jump_rope:11,stair_climbing:9,strength_light:3,strength_moderate:5,strength_vigorous:6,bodyweight:4,hiit:8,circuit_training:8,crossfit:8,yoga:2.5,pilates:3,stretching:2,rest:1},WORKOUT_TYPE_TO_MET={marathon:"running_moderate",running:"running_moderate",cycling:"cycling_moderate",swimming:"swimming_moderate",triathlon:"running_moderate",cardio:"elliptical",strength:"strength_moderate",bodybuilding:"strength_moderate",olympic:"strength_vigorous",bodyweight:"bodyweight",maintenance:"strength_light",hiit:"hiit",wellness:"strength_light",mobility:"yoga",functional:"circuit_training",active:"walking"};function calculateCaloriesBurned(d,h,m,E=7){const j=d*.453592;let g=WORKOUT_TYPE_TO_MET[h]||"strength_moderate",N=MET_VALUES[g]||5;const k=.85+(E-6)*.075;N*=k;const A=m/60;return Math.round(N*j*A)}function estimateDailyCalories(d,h="moderate",m=0){const j={sedentary:1.2,light:1.375,moderate:1.55,active:1.725,veryActive:1.9}[h]||1.55,g=Math.round(d*j),N=g+m;return{bmr:Math.round(d),neat:Math.round(g-d),workoutCalories:m,totalDailyBurn:N,remaining:N}}function estimateEODCalories(d,h,m=[],E=[],j=150){const{totalDailyBurn:g}=estimateDailyCalories(d,h,0),N=m.reduce((A,w)=>A+calculateCaloriesBurned(j,w.type,w.duration,w.rpe||7),0),k=E.reduce((A,w)=>A+calculateCaloriesBurned(j,w.type,w.duration||60,7),0);return g+N+k}function Dashboard({profile:d,program:h,meals:m,workouts:E,todaysMeals:j,todaysWorkouts:g,isSubscribed:N=!0,onLogMeal:k,onLogWorkout:A,onViewProgram:w,onViewNutrition:M,onShowPaywall:_,onCreateMealPlan:J}){const{macros:W,bmr:ie,tdee:q}=d,L=d.weightUnit==="kg"?d.weight/.453592:parseFloat(d.weight),Ee=j.reduce((ne,le)=>({calories:ne.calories+(le.calories||0),protein:ne.protein+(le.protein||0),carbs:ne.carbs+(le.carbs||0),fat:ne.fat+(le.fat||0)}),{calories:0,protein:0,carbs:0,fat:0}),ue=g.reduce((ne,le)=>ne+calculateCaloriesBurned(L,le.type||h?.primarySubtype||"strength",le.duration||60,le.overallRpe||7),0),te=h?.startDate?new Date(h.startDate):null;te&&te.setHours(0,0,0,0);const K=new Date;K.setHours(0,0,0,0);const me=!te||te<=K,re=te&&te.getTime()===K.getTime(),F=te?Math.ceil((te-K)/(1e3*60*60*24)):0,U=()=>{if(!h)return null;const{primaryGoal:ne,primarySubtype:le,paces:de,baseline:ye}=h;if(ne==="endurance")return de?.goalPace?`Your goal: ${de.goalPace} pace for ${le}`:`Building your ${le} endurance`;if(ne==="strength"&&ye?.strength?.lifts?.length>0){const z=ye.strength.lifts[0];return`Your goal: ${z.exercise} from ${z.current1RM}lbs  ${z.target1RM}lbs`}return ne==="aesthetic"?`Building lean muscle with ${h.daysPerWeek} training days/week`:`${h.totalWeeks} weeks of structured training ahead`},Q=new Date().getDay()||7,xe=me?h?.weeklySchedule?.find(ne=>ne.day===Q):null,Ce=xe?.sessions||[],B=g.map(ne=>ne.sessionTime),Z=Ce.filter(ne=>!B.includes(ne.time)),ge=me&&xe&&!xe.isRestDay,I=estimateEODCalories(ie||1800,d.activityLevel||"moderate",g.map(ne=>({type:ne.type||h?.primarySubtype,duration:ne.duration,rpe:ne.overallRpe})),ge?Z.map(ne=>({type:ne.type||h?.primarySubtype,duration:ne.duration})):[],L);return estimateDailyCalories(ie||1800,d.activityLevel,ge?ue:0),ge&&Z.reduce((ne,le)=>ne+calculateCaloriesBurned(L,le.type||h?.primarySubtype,le.duration||60,7),0),Ee.calories-I,jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-24",children:[jsxRuntimeExports.jsx("header",{className:"px-6 pt-8 pb-6",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-text-muted text-sm font-medium uppercase tracking-wider mb-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})}),jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:d.name?.split(" ")[0]||"Athlete"})]}),jsxRuntimeExports.jsx("div",{className:"flex items-center gap-3",children:jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider",children:"Week"}),jsxRuntimeExports.jsx("p",{className:"text-xl font-display font-bold text-accent-primary",children:h?.currentWeek||1})]})})]})}),jsxRuntimeExports.jsxs("div",{className:"px-6 space-y-5",children:[N&&jsxRuntimeExports.jsx(Card,{hover:!0,onClick:J,className:"bg-gradient-to-r from-accent-success/10 to-accent-primary/10 border-accent-success/30",children:jsxRuntimeExports.jsx(CardBody,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-accent-success/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(Apple,{className:"w-5 h-5 text-accent-success"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("h3",{className:"font-semibold text-white text-sm flex items-center gap-2",children:["Create Your Meal Plan",jsxRuntimeExports.jsx(Sparkles,{className:"w-3 h-3 text-accent-primary"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Personalized recipes and shopping list"})]}),jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4 text-gray-500"})]})})}),jsxRuntimeExports.jsx(Card,{hover:!0,onClick:M,className:"overflow-hidden",children:jsxRuntimeExports.jsxs(CardBody,{className:"p-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-5 py-3 border-b border-dark-600",children:[jsxRuntimeExports.jsxs("h2",{className:"font-semibold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Flame,{className:"w-4 h-4 text-accent-primary"}),"Today's Nutrition"]}),jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4 text-dark-400"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 divide-x divide-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mb-1",children:"Target"}),jsxRuntimeExports.jsx("p",{className:"font-display text-xl font-bold text-white",children:W?.calories||q})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mb-1",children:"Eaten"}),jsxRuntimeExports.jsx("p",{className:"font-display text-xl font-bold text-accent-success",children:Ee.calories})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 text-center bg-dark-700/50",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wide mb-1",children:"Left"}),jsxRuntimeExports.jsx("p",{className:`font-display text-xl font-bold ${(W?.calories||q)-Ee.calories>0?"text-accent-primary":"text-accent-danger"}`,children:(W?.calories||q)-Ee.calories})]})]}),jsxRuntimeExports.jsxs("div",{className:"px-4 py-3 space-y-2 border-t border-dark-600",children:[jsxRuntimeExports.jsx(MacroBar,{label:"Protein",current:Ee.protein,target:W.protein,color:"primary"}),jsxRuntimeExports.jsx(MacroBar,{label:"Carbs",current:Ee.carbs,target:W.carbs,color:"warning"}),jsxRuntimeExports.jsx(MacroBar,{label:"Fat",current:Ee.fat,target:W.fat,color:"secondary"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs(Button,{variant:"secondary",onClick:k,className:"py-4",children:[jsxRuntimeExports.jsx(Utensils,{className:"w-5 h-5 mr-2"}),"Log Meal"]}),jsxRuntimeExports.jsxs(Button,{variant:"secondary",onClick:A,className:"py-4",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-5 h-5 mr-2"}),"Log Workout"]})]}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"p-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-5 py-4 border-b border-dark-600",children:[jsxRuntimeExports.jsxs("h2",{className:"font-semibold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-5 h-5 text-accent-primary"}),"Today's Training"]}),ue>0&&jsxRuntimeExports.jsxs("span",{className:"text-sm text-text-muted",children:[jsxRuntimeExports.jsx(Flame,{className:"w-4 h-4 inline mr-1 text-accent-danger"}),ue," kcal"]})]}),jsxRuntimeExports.jsx("div",{className:"p-5",children:re?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center py-4",children:[jsxRuntimeExports.jsx("div",{className:"w-24 h-24 bg-gradient-to-br from-accent-primary/30 to-accent-secondary/30 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-accent-primary animate-pulse",children:jsxRuntimeExports.jsx("span",{className:"text-5xl",children:""})}),jsxRuntimeExports.jsx("h3",{className:"font-display text-2xl font-bold text-accent-primary mb-2",children:"Today is the Day!"}),jsxRuntimeExports.jsxs("p",{className:"text-white font-semibold mb-3",children:["Week 1 of your ",h?.totalWeeks,"-week journey begins now"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-secondary max-w-xs mx-auto",children:U()})]}),jsxRuntimeExports.jsx("div",{className:"bg-gradient-to-r from-accent-success/10 to-accent-primary/10 rounded-xl p-4 border border-accent-success/30",children:jsxRuntimeExports.jsxs("p",{className:"text-center text-sm text-text-secondary",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-success font-semibold",children:"Stay the course"})," and this program will get you to your goal. Trust the process, show up every day, and the results will follow."]})}),xe&&!xe.isRestDay&&jsxRuntimeExports.jsxs(Button,{variant:"primary",className:"w-full",onClick:w,children:[jsxRuntimeExports.jsx(Play,{className:"w-4 h-4 mr-2"}),"Start Your First Workout"]})]}):!me&&te?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center py-4",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-accent-primary/20 to-accent-secondary/20 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-accent-primary/30",children:jsxRuntimeExports.jsx("span",{className:"text-4xl",children:""})}),jsxRuntimeExports.jsxs("p",{className:"font-display text-3xl font-bold text-accent-primary mb-1",children:[F," ",F===1?"Day":"Days"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-muted mb-2",children:"until your program begins"}),jsxRuntimeExports.jsxs("p",{className:"text-white font-semibold",children:["Starting ",te.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-xl p-4 border border-accent-primary/20",children:[jsxRuntimeExports.jsxs("h4",{className:"font-semibold text-white mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4 text-accent-primary"}),"Prepare for Success"]}),jsxRuntimeExports.jsxs("ul",{className:"space-y-3 text-sm",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Stock up on nutrition"}),jsxRuntimeExports.jsx("p",{className:"text-text-muted",children:"Prepare your meals and snacks for week 1"})]})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Get quality sleep"}),jsxRuntimeExports.jsx("p",{className:"text-text-muted",children:"Aim for 8+ hours to start fresh"})]})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Review your program"}),jsxRuntimeExports.jsx("p",{className:"text-text-muted",children:"Familiarize yourself with week 1 workouts"})]})]}),jsxRuntimeExports.jsxs("li",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-lg",children:""}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Set your intentions"}),jsxRuntimeExports.jsx("p",{className:"text-text-muted",children:"Visualize your goals and commit fully"})]})]})]})]}),jsxRuntimeExports.jsxs(Button,{variant:"secondary",className:"w-full",onClick:w,children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 mr-2"}),"Preview Your Program"]})]}):xe&&!xe.isRestDay?jsxRuntimeExports.jsx("div",{className:"space-y-3",children:xe.sessions?.map((ne,le)=>{const de=g.some(z=>z.sessionTime===ne.time),ye=calculateCaloriesBurned(L,ne.type||h?.primarySubtype,ne.duration||60,7);return jsxRuntimeExports.jsxs("div",{className:`p-4 rounded-xl border transition-all ${de?"bg-accent-success/5 border-accent-success/20":"bg-dark-700 border-dark-600 hover:border-dark-500"}`,children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded ${ne.time==="AM"?"bg-accent-primary/10 text-accent-primary":"bg-blue-500/10 text-blue-400"}`,children:ne.time}),jsxRuntimeExports.jsx("span",{className:"font-medium text-white",children:ne.focus}),de&&jsxRuntimeExports.jsx("span",{className:"text-accent-success text-sm",children:" Done"})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-text-muted",children:["~",ye," kcal"]})]}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-secondary mb-3",children:[ne.duration," min  ",ne.exercises?.length||0," exercises"]}),!de&&jsxRuntimeExports.jsxs(Button,{variant:"primary",size:"sm",className:"w-full",onClick:w,children:[jsxRuntimeExports.jsx(Play,{className:"w-4 h-4 mr-2"}),"Start Workout"]})]},le)})}):jsxRuntimeExports.jsxs("div",{className:"text-center py-8",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 bg-dark-700 rounded-full flex items-center justify-center mx-auto mb-4",children:jsxRuntimeExports.jsx("span",{className:"text-3xl",children:""})}),jsxRuntimeExports.jsx("p",{className:"font-semibold text-white mb-1",children:"Rest Day"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-text-muted",children:"Recovery is when gains happen"})]})})]})}),jsxRuntimeExports.jsx(ProgramOverview,{profile:d,program:h}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"text-center py-5",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-accent-primary/10 rounded-xl flex items-center justify-center mx-auto mb-3",children:jsxRuntimeExports.jsx(Target,{className:"w-6 h-6 text-accent-primary"})}),jsxRuntimeExports.jsx("p",{className:"font-display text-xl font-bold text-white",children:h?.currentPhase||"Base"}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider mt-1",children:"Phase"})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"text-center py-5",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-accent-success/10 rounded-xl flex items-center justify-center mx-auto mb-3",children:jsxRuntimeExports.jsx(TrendingUp,{className:"w-6 h-6 text-accent-success"})}),jsxRuntimeExports.jsxs("p",{className:"font-display text-xl font-bold text-white",children:[g.length,"/",Ce.length||0]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-text-muted uppercase tracking-wider mt-1",children:"Complete"})]})})]}),jsxRuntimeExports.jsx(ProgressWidget,{profile:d,program:h,meals:m,workouts:E,todaysMeals:j,todaysWorkouts:g}),jsxRuntimeExports.jsx(Card,{hover:!0,onClick:w,children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-xs text-accent-primary uppercase tracking-wider font-semibold mb-1",children:[h?.isHybrid&&"Hybrid  ",h?.athleteLevel||"Intermediate"]}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white text-lg",children:h?.name||"Your Program"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-text-secondary mt-1",children:["Week ",h?.currentWeek||1," of ",h?.mesocycleWeeks||4]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 bg-dark-700 rounded-xl flex items-center justify-center",children:jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 text-text-secondary"})})]}),jsxRuntimeExports.jsx("div",{className:"mt-4",children:jsxRuntimeExports.jsx(ProgressBar,{value:h?.currentWeek||1,max:h?.mesocycleWeeks||4,color:"primary",size:"sm"})})]})})]})]})}function MacroBar({label:d,current:h,target:m,color:E}){const j=h>m;return jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-text-muted uppercase tracking-wide w-16",children:d}),jsxRuntimeExports.jsx("div",{className:"flex-1",children:jsxRuntimeExports.jsx(ProgressBar,{value:h,max:m,color:j?"danger":E,size:"xs"})}),jsxRuntimeExports.jsxs("span",{className:`text-sm tabular-nums ${j?"text-accent-danger":"text-white"}`,children:[h,jsxRuntimeExports.jsxs("span",{className:"text-text-muted",children:["/",m,"g"]})]})]})}const DAY_NAMES=["","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],generateWeekSchedule=(d,h,m,E,j)=>{if(!d||h===1)return d;const g=E?.[h-1]||"Base";E?.[h-2];const N=g==="Deload"||g==="Taper";return d.map(k=>{if(k.isRestDay)return{...k};const A=k.sessions?.map(w=>{const M=w.exercises?.map(_=>{let J={..._};if(N)_.sets&&typeof _.sets=="number"&&(J.sets=Math.max(2,Math.floor(_.sets*.6))),_.rpe&&(J.rpe=Math.max(5,_.rpe-2));else if(g==="Peak")_.rpe&&(J.rpe=Math.min(10,_.rpe+.5));else if(g.includes("Build")){const W=g==="Build 2"?1.15:1.08;_.sets&&typeof _.sets=="number"&&(J.sets=Math.round(_.sets*W))}return J.progression=_.progression?.replace(/Week \d+/g,`Week ${h}`),J});return{...w,exercises:M}});return{...k,sessions:A,isDeload:N}})},getWeeklySummary=(d,h,m,E)=>{const j=m?.[d-1]||"Base",g=d>1?m?.[d-2]:null,N=g&&g!==j,k=j==="Deload"||j==="Taper",A=[];if(N&&A.push({type:"phase",icon:"",text:`New phase: ${g}  ${j}`}),k)A.push({type:"deload",icon:"",text:"Reduced volume (60%) - focus on recovery"});else if(j==="Peak"){let M="Peak intensity training";E?.primaryGoal==="endurance"?M="Peak intensity - race simulation workouts":E?.primaryGoal==="strength"?M="Peak intensity - test maxes and competition prep":E?.primaryGoal==="aesthetic"&&(M="Peak intensity - maximum pump and definition"),A.push({type:"peak",icon:"",text:M})}else j.includes("Build")&&d>1&&A.push({type:"progression",icon:"",text:"Volume increases ~5% from last week"});if(E?.primaryGoal==="endurance"){const M=E?.baseline?.endurance?.currentMileage||20,_=E?.athleteLevel==="elite"?60:50;let J;k?J=Math.round(M*Math.pow(1.05,d-2)*.7):j==="Taper"?J=Math.round(_*.6):J=Math.min(Math.round(M*Math.pow(1.05,d-1)),_),A.push({type:"mileage",icon:"",text:`Target mileage: ~${J} miles`})}const w={1:"Establish baseline, focus on form",2:"Build consistency, dial in paces",3:"First small volume increase",4:"Recovery week - let adaptations settle"};return d<=4&&w[d]&&A.push({type:"goal",icon:"",text:w[d]}),{weekNumber:d,totalWeeks:h,phase:j,changes:A,isDeload:k}},getRecoveryRecommendations=d=>{const h=d?.primaryGoal||"aesthetic",m=[{icon:"",title:"Stretching & Mobility",description:"15-20 min of dynamic stretching or yoga",detail:"Focus on areas worked yesterday"},{icon:"",title:"Light Walk",description:"20-30 min easy walk outdoors",detail:"Promotes blood flow without stress"},{icon:"",title:"Hydration",description:"Drink 3-4L water with electrolytes",detail:"Sodium, potassium, magnesium for recovery",priority:!0},{icon:"",title:"Sleep",description:"Get 8+ hours of quality sleep",detail:"Most recovery happens during deep sleep",priority:!0},{icon:"",title:"Nutrition",description:"Eat at maintenance or slight surplus",detail:"Prioritize protein (1g/lb) for repair",priority:!0}];return h==="endurance"?[...m,{icon:"",title:"Cold Therapy",description:"10-15 min ice bath or cold shower",detail:"Reduces inflammation from high mileage"},{icon:"",title:"Foam Rolling",description:"10 min on calves, quads, IT band",detail:"Breaks up adhesions, improves mobility"},{icon:"",title:"Compression",description:"Wear compression socks/sleeves",detail:"Promotes circulation and reduces swelling"}]:h==="strength"?[...m,{icon:"",title:"Sauna",description:"15-20 min at 170-190F",detail:"Increases blood flow, promotes recovery"},{icon:"",title:"Self-Massage",description:"Lacrosse ball on tight areas",detail:"Target shoulders, hips, and back"},{icon:"",title:"Contrast Therapy",description:"3 min hot / 1 min cold, repeat 3x",detail:"Flushes metabolic waste from muscles"}]:h==="aesthetic"?[...m,{icon:"",title:"Sauna",description:"15-20 min for recovery",detail:"Also supports fat loss through heat exposure"},{icon:"",title:"Yoga Flow",description:"20-30 min gentle yoga",detail:"Mind-muscle connection, flexibility"}]:h==="fatloss"?[...m,{icon:"",title:"LISS Cardio",description:"30-45 min walk or light bike",detail:"Burns extra calories without cortisol spike"},{icon:"",title:"Cold Exposure",description:"2-5 min cold shower",detail:"Activates brown fat, boosts metabolism"}]:m};function ProgramView({program:d,completedWorkouts:h,onCompleteExercise:m,onCompleteSession:E,onUpdateExerciseLog:j,onBack:g}){const[N,k]=reactExports.useState(1),[A,w]=reactExports.useState(0),[M,_]=reactExports.useState(d?.currentWeek||1),[J,W]=reactExports.useState(null),[ie,q]=reactExports.useState({sets:"",reps:"",weight:"",notes:""}),L=d?.totalWeeks||d?.mesocycleWeeks||12,Ee=d?.phases||[],ue=d?.startDate?new Date(d.startDate):new Date;ue.getDay();const te=z=>{const D=new Date(ue);return D.setDate(D.getDate()+(z-1)*7),D},K=z=>{const D=te(M),G=z-1,Ie=new Date(D);return Ie.setDate(Ie.getDate()+G),Ie},me=z=>z.toLocaleDateString("en-US",{month:"short",day:"numeric"}),re=()=>{const z=te(M),D=new Date(z);return D.setDate(D.getDate()+6),`${me(z)}  ${me(D)}`},F=reactExports.useMemo(()=>M===1||M===d?.currentWeek?d?.weeklySchedule:generateWeekSchedule(d?.weeklySchedule,M,L,Ee),[M,d?.weeklySchedule,L,Ee]),U=F?.find(z=>z.day===N),Q=reactExports.useMemo(()=>getWeeklySummary(M,L,Ee,d),[M,L,Ee,d]),xe=(z,D)=>M!==d?.currentWeek?!1:h.some(G=>G.day===N&&G.sessionIndex===z&&G.completedExercises?.includes(D)),Ce=(z,D)=>h.find(Ie=>Ie.day===N&&Ie.sessionIndex===z)?.exerciseLogs?.[D]||null,B=z=>{const D=U?.sessions?.[z];return D?.exercises?D.exercises.every((G,Ie)=>xe(z,Ie)):!1},Z=(z,D,G)=>{const Ie=Ce(z,D);W({sessionIdx:z,exIdx:D}),q({sets:Ie?.sets||G.sets||"",reps:Ie?.reps||G.reps||"",weight:Ie?.weight||G.startingWeight||"",notes:Ie?.notes||""})},ge=()=>{J&&j&&j(N,J.sessionIdx,J.exIdx,ie),W(null),q({sets:"",reps:"",weight:"",notes:""})},I=z=>{E&&E(N,z)},ne=M>1,le=M<L,de=M>(d?.currentWeek||1);M<(d?.currentWeek||1);const ye=getRecoveryRecommendations(d);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[jsxRuntimeExports.jsx("header",{className:"px-6 py-4 bg-dark-800 border-b border-dark-700",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:g,className:"p-2 rounded-lg hover:bg-dark-700",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-6 h-6 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:d?.name||"Your Program"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400 text-sm",children:[d?.currentPhase," Phase"]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-3 bg-dark-800/50 border-b border-dark-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("button",{onClick:()=>ne&&_(z=>z-1),disabled:!ne,className:`p-2 rounded-lg ${ne?"hover:bg-dark-700 text-white":"text-gray-600 cursor-not-allowed"}`,children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 text-accent-primary"}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-lg font-bold text-white",children:["Week ",M]}),jsxRuntimeExports.jsxs("span",{className:"text-gray-400 text-sm",children:[" of ",L]}),M===d?.currentWeek&&jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-primary rounded-full text-white",children:"Current"}),de&&jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 text-xs bg-accent-secondary/50 rounded-full text-accent-secondary",children:"Preview"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:re()})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>le&&_(z=>z+1),disabled:!le,className:`p-2 rounded-lg ${le?"hover:bg-dark-700 text-white":"text-gray-600 cursor-not-allowed"}`,children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-1 mt-2 overflow-x-auto pb-1 scrollbar-thin",children:Array.from({length:L},(z,D)=>D+1).map(z=>{const D=Ee[z-1]||"Base",G={Base:{bg:"bg-blue-500/20",text:"text-blue-400",selected:"bg-blue-500"},Build:{bg:"bg-orange-500/20",text:"text-orange-400",selected:"bg-orange-500"},"Build 1":{bg:"bg-orange-500/20",text:"text-orange-400",selected:"bg-orange-500"},"Build 2":{bg:"bg-red-500/20",text:"text-red-400",selected:"bg-red-500"},Peak:{bg:"bg-purple-500/20",text:"text-purple-400",selected:"bg-purple-500"},Taper:{bg:"bg-cyan-500/20",text:"text-cyan-400",selected:"bg-cyan-500"},Deload:{bg:"bg-green-500/20",text:"text-green-400",selected:"bg-green-500"}},Ie=G[D]||G.Base,ee=z===M,Re=z===d?.currentWeek,je=z<(d?.currentWeek||1);return jsxRuntimeExports.jsx("button",{onClick:()=>_(z),className:`px-2 py-1 text-xs rounded-lg min-w-[28px] transition-all ${ee?`${Ie.selected} text-white font-medium`:Re?`${Ie.bg} ${Ie.text} ring-1 ring-current`:je?"bg-dark-600/50 text-gray-500":`${Ie.bg} ${Ie.text} hover:opacity-80`}`,title:`Week ${z}: ${D}`,children:z},z)})}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-2 mt-2 text-[10px]",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-blue-500"}),"Base"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-orange-500"}),"Build"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-green-500"}),"Deload"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-purple-500"}),"Peak"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx("span",{className:"w-2 h-2 rounded-full bg-cyan-500"}),"Taper"]})]})]}),Q.changes.length>0&&jsxRuntimeExports.jsxs("div",{className:"px-6 py-3 bg-dark-800/30 border-b border-dark-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-4 h-4 text-accent-secondary"}),jsxRuntimeExports.jsxs("span",{className:"text-sm font-medium text-white",children:["Week ",M," Focus"]}),jsxRuntimeExports.jsx("span",{className:"px-2 py-0.5 text-xs bg-dark-600 rounded-full text-gray-300",children:Q.phase})]}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2",children:Q.changes.map((z,D)=>jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-1.5 px-2 py-1 rounded-lg text-xs ${z.type==="deload"?"bg-green-500/20 text-green-400":z.type==="peak"?"bg-red-500/20 text-red-400":z.type==="phase"?"bg-accent-primary/20 text-accent-primary":"bg-dark-600 text-gray-300"}`,children:[jsxRuntimeExports.jsx("span",{children:z.icon}),jsxRuntimeExports.jsx("span",{children:z.text})]},D))})]}),de&&jsxRuntimeExports.jsxs("div",{className:"mx-6 mt-3 p-3 bg-accent-secondary/10 border border-accent-secondary/30 rounded-lg flex items-start gap-2",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"w-4 h-4 text-accent-secondary mt-0.5 flex-shrink-0"}),jsxRuntimeExports.jsxs("div",{className:"text-sm",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-secondary font-medium",children:"Preview Mode:"}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 ml-1",children:"This is a projected schedule. Actual workouts may adjust based on your progress."})]})]}),jsxRuntimeExports.jsx("div",{className:"px-6 py-4 overflow-x-auto",children:jsxRuntimeExports.jsx("div",{className:"flex gap-2 min-w-max",children:[1,2,3,4,5,6,7].map(z=>{const D=F?.find(Ve=>Ve.day===z),G=D?.isRestDay,Ie=N===z,ee=D?.isDeload,Re=K(z),je=Re.toDateString()===new Date().toDateString();return jsxRuntimeExports.jsxs("button",{onClick:()=>k(z),className:`flex flex-col items-center px-3 py-2 rounded-xl min-w-[64px] transition-all ${Ie?"bg-accent-primary text-white":je?"bg-accent-primary/20 text-accent-primary ring-1 ring-accent-primary/50":ee?"bg-green-500/10 text-green-400 hover:bg-green-500/20":"bg-dark-700 text-gray-400 hover:bg-dark-600"} ${G&&!Ie&&!je?"opacity-50":""}`,children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium",children:DAY_NAMES[z]}),jsxRuntimeExports.jsx("span",{className:`text-[10px] ${Ie?"text-white/80":je?"text-accent-primary/80":"text-gray-500"}`,children:Re.getDate()}),jsxRuntimeExports.jsx("span",{className:"text-lg font-bold mt-0.5",children:G?"":ee?"":""})]},z)})})}),jsxRuntimeExports.jsx("div",{className:"px-6 py-4",children:U?.isRestDay?jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center py-6",children:[jsxRuntimeExports.jsx("span",{className:"text-5xl mb-3 block",children:""}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white mb-1",children:"Active Recovery Day"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"Recovery is when adaptation happens. Make the most of it."})]}),jsxRuntimeExports.jsxs("div",{className:"bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 rounded-xl p-4 border border-accent-primary/30",children:[jsxRuntimeExports.jsxs("h3",{className:"text-white font-semibold mb-3 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Heart,{className:"w-5 h-5 text-accent-primary"}),"Recovery Essentials"]}),jsxRuntimeExports.jsx("div",{className:"space-y-3",children:ye.filter(z=>z.priority).map((z,D)=>jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:z.icon}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:z.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-300",children:z.description})]})]},D))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-3",children:"Recommended Activities"}),jsxRuntimeExports.jsx("div",{className:"grid gap-3",children:ye.filter(z=>!z.priority).map((z,D)=>jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:z.icon}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h4",{className:"text-white font-medium",children:z.title}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:z.description}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-1",children:z.detail})]})]})},D))})]}),jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl p-4 border border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-semibold mb-2",children:" Pro Tips"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-400 space-y-2",children:[jsxRuntimeExports.jsx("li",{children:" Avoid intense exercise - save it for training days"}),jsxRuntimeExports.jsx("li",{children:" Listen to your body - if you feel sore, prioritize sleep"}),jsxRuntimeExports.jsx("li",{children:" Mental recovery matters too - take time to destress"}),jsxRuntimeExports.jsx("li",{children:" Prep meals for the week to stay on track"})]})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:U?.name}),U?.sessions?.map((z,D)=>jsxRuntimeExports.jsxs(Card,{children:[jsxRuntimeExports.jsx("button",{onClick:()=>w(A===D?-1:D),className:"w-full",children:jsxRuntimeExports.jsx(CardBody,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${z.time==="AM"?"bg-yellow-500/20":z.time==="PM"?"bg-blue-500/20":"bg-purple-500/20"}`,children:jsxRuntimeExports.jsx("span",{className:"text-2xl",children:z.type==="strength"||z.type==="hypertrophy"?"":z.type==="endurance"?"":""})}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[(z.time==="AM"||z.time==="PM")&&jsxRuntimeExports.jsx("span",{className:`px-2 py-0.5 text-xs rounded ${z.time==="AM"?"bg-yellow-500/20 text-yellow-400":"bg-blue-500/20 text-blue-400"}`,children:z.time}),jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:z.focus})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-400",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-4 h-4"}),z.duration," min"]}),jsxRuntimeExports.jsxs("span",{children:[z.exercises?.length," exercises"]})]})]})]}),jsxRuntimeExports.jsx(ChevronRight,{className:`w-5 h-5 text-gray-400 transition-transform ${A===D?"rotate-90":""}`})]})})}),A===D&&jsxRuntimeExports.jsxs("div",{className:"px-5 pb-5 space-y-3",children:[jsxRuntimeExports.jsx("hr",{className:"border-dark-600"}),z.exercises?.map((G,Ie)=>{const ee=xe(D,Ie),Re=Ce(D,Ie),je=J?.sessionIdx===D&&J?.exIdx===Ie;return jsxRuntimeExports.jsx("div",{className:`p-4 rounded-lg border ${ee?"bg-accent-success/10 border-accent-success/30":"bg-dark-700 border-dark-600"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[jsxRuntimeExports.jsx("h4",{className:"font-medium text-white",children:G.name}),ee&&jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1 px-2 py-0.5 bg-accent-success/20 rounded-full",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-3 h-3 text-accent-success"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-accent-success font-medium",children:"Done"})]})]}),je?jsxRuntimeExports.jsxs("div",{className:"mt-3 space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Sets"}),jsxRuntimeExports.jsx("input",{type:"text",value:ie.sets,onChange:Ve=>q({...ie,sets:Ve.target.value}),placeholder:G.sets||"Sets",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Reps"}),jsxRuntimeExports.jsx("input",{type:"text",value:ie.reps,onChange:Ve=>q({...ie,reps:Ve.target.value}),placeholder:G.reps||"Reps",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Weight"}),jsxRuntimeExports.jsx("input",{type:"text",value:ie.weight,onChange:Ve=>q({...ie,weight:Ve.target.value}),placeholder:G.startingWeight||"Weight",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Notes (optional)"}),jsxRuntimeExports.jsx("input",{type:"text",value:ie.notes,onChange:Ve=>q({...ie,notes:Ve.target.value}),placeholder:"How did it feel? Any adjustments?",className:"w-full px-3 py-2 bg-dark-600 border border-dark-500 rounded text-white text-sm"})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:ge,className:"flex items-center gap-1 px-3 py-1.5 bg-accent-success text-white rounded-lg text-sm font-medium hover:bg-accent-success/80",children:[jsxRuntimeExports.jsx(Save,{className:"w-4 h-4"}),"Save"]}),jsxRuntimeExports.jsxs("button",{onClick:()=>W(null),className:"flex items-center gap-1 px-3 py-1.5 bg-dark-600 text-gray-400 rounded-lg text-sm hover:bg-dark-500",children:[jsxRuntimeExports.jsx(X,{className:"w-4 h-4"}),"Cancel"]})]})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Re&&jsxRuntimeExports.jsxs("div",{className:"mt-2 p-2 bg-accent-primary/10 rounded-lg border border-accent-primary/20",children:[jsxRuntimeExports.jsx("span",{className:"text-xs text-accent-primary font-medium",children:"Logged: "}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-white",children:[Re.sets&&`${Re.sets} sets`,Re.reps&&`  ${Re.reps}`,Re.weight&&` @ ${Re.weight}`]}),Re.notes&&jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:['"',Re.notes,'"']})]}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-3 mt-2 text-sm",children:[G.sets&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:G.sets})," sets"]}),G.reps&&jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:G.reps})}),G.startingWeight&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:["Target ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary font-medium",children:G.startingWeight})]}),G.rpe&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:["RPE ",jsxRuntimeExports.jsx("span",{className:"text-accent-warning font-medium",children:G.rpe})]}),G.pace&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:["Pace ",jsxRuntimeExports.jsx("span",{className:"text-accent-primary font-medium",children:G.pace})]}),G.heartRateZone&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:["Zone ",jsxRuntimeExports.jsx("span",{className:"text-red-400 font-medium",children:G.heartRateZone})]}),G.rest&&jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:["Rest ",jsxRuntimeExports.jsx("span",{className:"text-white",children:G.rest})]})]}),(G.current1RM||G.target1RM)&&jsxRuntimeExports.jsxs("div",{className:"flex gap-4 mt-2 text-xs",children:[G.current1RM&&jsxRuntimeExports.jsxs("span",{className:"text-gray-500",children:["Current 1RM: ",jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:G.current1RM})]}),G.target1RM&&jsxRuntimeExports.jsxs("span",{className:"text-gray-500",children:["Target 1RM: ",jsxRuntimeExports.jsx("span",{className:"text-accent-secondary",children:G.target1RM})]})]}),G.notes&&jsxRuntimeExports.jsxs("p",{className:"mt-2 text-sm text-gray-500 italic",children:[" ",G.notes]}),G.progression&&jsxRuntimeExports.jsxs("p",{className:"mt-1 text-xs text-accent-secondary",children:[" ",G.progression]})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-1",children:[!je&&M===d?.currentWeek&&jsxRuntimeExports.jsx("button",{onClick:()=>Z(D,Ie,G),className:"p-2 rounded-lg text-gray-500 hover:text-accent-primary hover:bg-dark-600 transition-colors",title:"Log actual performance",children:jsxRuntimeExports.jsx(PenLine,{className:"w-5 h-5"})}),!je&&jsxRuntimeExports.jsx("button",{onClick:()=>m(N,D,Ie),className:`p-2 rounded-lg transition-colors ${ee?"text-accent-success":"text-gray-500 hover:text-white hover:bg-dark-600"}`,title:ee?"Mark incomplete":"Mark complete",children:ee?jsxRuntimeExports.jsx(CheckCircle,{className:"w-6 h-6"}):jsxRuntimeExports.jsx(Circle,{className:"w-6 h-6"})})]})]})},Ie)}),B(D)?jsxRuntimeExports.jsxs("div",{className:"mt-4 p-3 bg-accent-success/20 rounded-lg border border-accent-success/30 text-center",children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-5 h-5 text-accent-success inline mr-2"}),jsxRuntimeExports.jsx("span",{className:"text-accent-success font-medium",children:"Session Complete!"})]}):jsxRuntimeExports.jsxs(Button,{fullWidth:!0,variant:"success",className:"mt-4",onClick:()=>I(D),children:[jsxRuntimeExports.jsx(Zap,{className:"w-4 h-4 mr-2"}),"Complete All Exercises"]})]})]},D))]})})]})}const DAYS=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],MEAL_TYPES=["breakfast","lunch","dinner","snack"],MEAL_BENEFITS={breakfast:"Kickstarts metabolism, stabilizes blood sugar for sustained energy.",lunch:"Refuels glycogen stores, provides sustained afternoon energy.",dinner:"Supports overnight muscle repair and recovery.",snack:"Maintains blood sugar, prevents overeating at meals."};function MealPlanView({mealPlan:d,recipes:h,profile:m,onBack:E,onRegenerateMeal:j,onOpenShoppingList:g}){const[N,k]=reactExports.useState(0),[A,w]=reactExports.useState(null),[M,_]=reactExports.useState(!0);if(!d)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-dark-900 p-4 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(ChefHat,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"No Meal Plan Yet"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Generate a meal plan from your preferences"})]})});const J=DAYS[N].toLowerCase(),W=d.week?.[J]||{meals:[],nutrients:{}},ie=W.meals||[],q=W.nutrients||{},L=m?.macros?.calories||2e3,Ee=m?.macros?.protein||150,ue=Ee*4,te=L-ue,K=Math.round(te*.55/4),me=Math.round(te*.45/9),re=U=>ie.find(Q=>Q.type===U),F=U=>h?.[U]||null;return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-40",children:[jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 border-b border-dark-700 sticky top-0 z-10",children:[jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:E,className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5 text-gray-400"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:"Weekly Meal Plan"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Tailored to your goals"})]}),jsxRuntimeExports.jsx("button",{onClick:g,className:"p-2 bg-accent-secondary/20 rounded-lg",children:jsxRuntimeExports.jsx(ShoppingCart,{className:"w-5 h-5 text-accent-secondary"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>k(U=>Math.max(0,U-1)),disabled:N===0,className:"p-1 disabled:opacity-30",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5 text-gray-400"})}),jsxRuntimeExports.jsx("div",{className:"flex-1 overflow-x-auto scrollbar-hide",children:jsxRuntimeExports.jsx("div",{className:"flex gap-1 min-w-max",children:DAYS.map((U,Q)=>jsxRuntimeExports.jsx("button",{onClick:()=>k(Q),className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${N===Q?"bg-accent-primary text-dark-900":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:U.slice(0,3)},U))})}),jsxRuntimeExports.jsx("button",{onClick:()=>k(U=>Math.min(6,U+1)),disabled:N===6,className:"p-1 disabled:opacity-30",children:jsxRuntimeExports.jsx(ChevronRight,{className:"w-5 h-5 text-gray-400"})})]})]}),jsxRuntimeExports.jsx("div",{className:"px-4 pb-4",children:jsxRuntimeExports.jsxs("div",{className:"bg-dark-700 rounded-xl p-3 grid grid-cols-4 gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-1 text-accent-primary",children:[jsxRuntimeExports.jsx(Flame,{className:"w-4 h-4"}),jsxRuntimeExports.jsx("span",{className:"font-bold",children:q.calories||""})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:["/ ",L]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-1 text-accent-success",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-4 h-4"}),jsxRuntimeExports.jsxs("span",{className:"font-bold",children:[q.protein||"","g"]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:["/ ",Ee,"g"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"font-bold text-accent-warning",children:[q.carbohydrates||"","g"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:["/ ",K,"g"]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"font-bold text-accent-secondary",children:[q.fat||"","g"]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:["/ ",me,"g"]})]})]})})]}),M&&jsxRuntimeExports.jsxs("div",{className:"mx-4 mb-4 p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-xl border border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Sparkles,{className:"w-4 h-4 text-accent-primary"}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white",children:"Why This Plan"})]}),jsxRuntimeExports.jsx("button",{onClick:()=>_(!1),className:"text-xs text-gray-500",children:"Hide"})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:[jsxRuntimeExports.jsxs("span",{className:"text-accent-success font-medium",children:[Ee,"g protein"]})," supports muscle recovery.",jsxRuntimeExports.jsxs("span",{className:"text-accent-warning font-medium",children:[" ",K,"g carbs"]})," fuel your training.",jsxRuntimeExports.jsxs("span",{className:"text-accent-secondary font-medium",children:[" ",me,"g fat"]})," for hormones & absorption. Meals timed for energy when you need it most."]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 space-y-4",children:MEAL_TYPES.map(U=>{const Q=re(U),xe=Q?F(Q.id):null,Ce=A===Q?.id;return Q?jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl overflow-hidden border border-dark-700",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>w(Ce?null:Q.id),className:"w-full p-4 flex gap-4 text-left",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 rounded-lg bg-dark-700 overflow-hidden flex-shrink-0",children:Q.image?jsxRuntimeExports.jsx("img",{src:Q.image,alt:Q.title,className:"w-full h-full object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-full h-full flex items-center justify-center",children:jsxRuntimeExports.jsx(ChefHat,{className:"w-8 h-8 text-gray-600"})})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-xs font-medium text-accent-primary uppercase tracking-wide",children:U}),jsxRuntimeExports.jsx(Leaf,{className:"w-3 h-3 text-green-500"})]}),jsxRuntimeExports.jsx("h3",{className:"text-white font-medium mt-1 truncate",children:Q.title}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-0.5 line-clamp-1",children:MEAL_BENEFITS[U]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mt-2 text-sm text-gray-400",children:[jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Clock,{className:"w-3.5 h-3.5"}),Q.readyInMinutes||""," min"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Flame,{className:"w-3.5 h-3.5"}),Q.calories," cal"]}),jsxRuntimeExports.jsxs("span",{className:"flex items-center gap-1",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-3.5 h-3.5"}),Q.protein,"g"]})]})]})]}),Ce&&jsxRuntimeExports.jsxs("div",{className:"border-t border-dark-700 p-4 space-y-4",children:[xe?.ingredients&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Ingredients"}),jsxRuntimeExports.jsx("ul",{className:"space-y-1",children:xe.ingredients.map((B,Z)=>jsxRuntimeExports.jsxs("li",{className:"text-sm text-gray-400 flex items-start gap-2",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:""}),B.original||`${B.amount} ${B.unit} ${B.name}`]},Z))})]}),xe?.instructions&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Instructions"}),jsxRuntimeExports.jsx("ol",{className:"space-y-2",children:xe.instructions.map((B,Z)=>jsxRuntimeExports.jsxs("li",{className:"text-sm text-gray-400 flex gap-3",children:[jsxRuntimeExports.jsx("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-dark-700 text-xs flex items-center justify-center text-white",children:Z+1}),jsxRuntimeExports.jsx("span",{children:B})]},Z))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:B=>{B.stopPropagation(),j?.(J,U)},className:"flex-1 py-2 px-3 bg-dark-700 text-gray-300 rounded-lg text-sm flex items-center justify-center gap-2 hover:bg-dark-600",children:[jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4"}),"Swap Meal"]}),xe?.sourceUrl&&jsxRuntimeExports.jsxs("a",{href:xe.sourceUrl,target:"_blank",rel:"noopener noreferrer",onClick:B=>B.stopPropagation(),className:"py-2 px-3 bg-dark-700 text-gray-300 rounded-lg text-sm flex items-center gap-2 hover:bg-dark-600",children:[jsxRuntimeExports.jsx(ExternalLink,{className:"w-4 h-4"}),"Full Recipe"]})]})]})]},U):null})}),jsxRuntimeExports.jsx("div",{className:"fixed bottom-20 left-0 right-0 p-4",children:jsxRuntimeExports.jsxs("button",{onClick:g,className:"w-full py-4 bg-accent-secondary text-dark-900 font-semibold rounded-xl flex items-center justify-center gap-2 shadow-lg",children:[jsxRuntimeExports.jsx(ShoppingCart,{className:"w-5 h-5"}),"View Shopping List"]})})]})}const RETAILERS=[{id:"auto",name:"Best Match",icon:"",description:"Instacart picks the best store for your items"},{id:"costco",name:"Costco",icon:"",slug:"costco"},{id:"walmart",name:"Walmart",icon:"",slug:"walmart"},{id:"kroger",name:"Kroger",icon:"",slug:"kroger"},{id:"safeway",name:"Safeway",icon:"",slug:"safeway"},{id:"publix",name:"Publix",icon:"",slug:"publix"},{id:"sprouts",name:"Sprouts",icon:"",slug:"sprouts-farmers-market"},{id:"wholefoods",name:"Whole Foods",icon:"",slug:"whole-foods-market"},{id:"target",name:"Target",icon:"",slug:"target"}];function ShoppingListView({mealPlan,recipes,onBack}){const[checkedItems,setCheckedItems]=reactExports.useState({}),[searchQuery,setSearchQuery]=reactExports.useState(""),[expandedCategories,setExpandedCategories]=reactExports.useState({}),[selectedRetailer,setSelectedRetailer]=reactExports.useState("auto"),[showRetailerPicker,setShowRetailerPicker]=reactExports.useState(!1),shoppingList=reactExports.useMemo(()=>{const ingredients={};return mealPlan?.week?(Object.values(mealPlan.week).forEach(day=>{day.meals?.forEach(meal=>{const recipe=recipes?.[meal.id];recipe?.ingredients&&recipe.ingredients.forEach(ing=>{let name,amount,unit;if(ing.original){const parts=ing.original.match(/^([\d.\/]+)?\s*(cup|cups|tbsp|tsp|oz|lb|g|ml|slice|slices|piece|pieces)?\s*(.+)$/i);parts?(amount=parts[1]?parseFloat(eval(parts[1])):1,unit=parts[2]||"",name=parts[3]?.trim()||ing.original):(name=ing.original,amount=1,unit="")}else name=ing.name||"Unknown",amount=ing.amount||1,unit=ing.unit||"";const key=name.toLowerCase();ingredients[key]?ingredients[key].unit===unit&&(ingredients[key].amount+=amount):ingredients[key]={id:ing.id||key,name,amount,unit,category:categorizeIngredient(name)}})})}),Object.values(ingredients)):[]},[mealPlan,recipes]),groupedList=reactExports.useMemo(()=>{const d={};shoppingList.forEach(m=>{const E=m.category||"Other";d[E]||(d[E]=[]),d[E].push(m)});const h={};return Object.keys(d).sort().forEach(m=>{h[m]=d[m].sort((E,j)=>E.name.localeCompare(j.name))}),h},[shoppingList]),filteredList=reactExports.useMemo(()=>{if(!searchQuery.trim())return groupedList;const d=searchQuery.toLowerCase(),h={};return Object.entries(groupedList).forEach(([m,E])=>{const j=E.filter(g=>g.name.toLowerCase().includes(d));j.length>0&&(h[m]=j)}),h},[groupedList,searchQuery]),toggleItem=d=>{setCheckedItems(h=>({...h,[d]:!h[d]}))},toggleCategory=d=>{setExpandedCategories(h=>({...h,[d]:!h[d]}))},checkedCount=Object.values(checkedItems).filter(Boolean).length,totalCount=shoppingList.length,progress=totalCount>0?checkedCount/totalCount*100:0;return RETAILERS.find(d=>d.id===selectedRetailer)||RETAILERS[0],jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-32",children:[jsxRuntimeExports.jsx("div",{className:"bg-dark-800 border-b border-dark-700 sticky top-0 z-10",children:jsxRuntimeExports.jsxs("div",{className:"p-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[jsxRuntimeExports.jsx("button",{onClick:onBack,className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5 text-gray-400"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:"Shopping List"}),jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-400",children:[checkedCount," of ",totalCount," items"]})]}),jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-accent-secondary/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(ShoppingCart,{className:"w-5 h-5 text-accent-secondary"})})]}),jsxRuntimeExports.jsx("div",{className:"h-2 bg-dark-700 rounded-full overflow-hidden mb-4",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-accent-success transition-all duration-300",style:{width:`${progress}%`}})}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search ingredients...",value:searchQuery,onChange:d=>setSearchQuery(d.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 text-sm"})]})]})}),jsxRuntimeExports.jsx("div",{className:"p-4 space-y-4",children:Object.entries(filteredList).length===0?jsxRuntimeExports.jsxs("div",{className:"text-center py-12",children:[jsxRuntimeExports.jsx(Package,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),jsxRuntimeExports.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No Items Found"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:searchQuery?"Try a different search term":"Generate a meal plan to see your shopping list"})]}):Object.entries(filteredList).map(([d,h])=>{const m=expandedCategories[d]!==!1,E=h.filter(j=>checkedItems[j.id]).length;return jsxRuntimeExports.jsxs("div",{className:"bg-dark-800 rounded-xl border border-dark-700 overflow-hidden",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>toggleCategory(d),className:"w-full p-4 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("span",{className:"text-xl",children:getCategoryIcon(d)}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-medium",children:d}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:[E,"/",h.length," items"]})]})]}),m?jsxRuntimeExports.jsx(ChevronUp,{className:"w-5 h-5 text-gray-400"}):jsxRuntimeExports.jsx(ChevronDown,{className:"w-5 h-5 text-gray-400"})]}),m&&jsxRuntimeExports.jsx("div",{className:"border-t border-dark-700",children:h.map(j=>{const g=checkedItems[j.id];return jsxRuntimeExports.jsxs("div",{className:`flex items-center gap-3 p-3 border-b border-dark-700 last:border-0 ${g?"opacity-50":""}`,children:[jsxRuntimeExports.jsx("button",{onClick:()=>toggleItem(j.id),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all ${g?"bg-accent-success border-accent-success":"border-gray-500 hover:border-gray-400"}`,children:g&&jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-dark-900"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("p",{className:`text-white ${g?"line-through":""}`,children:j.name}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:formatAmount(j.amount,j.unit)})]})]},j.id)})})]},d)})})]})}function categorizeIngredient(d){const h=d.toLowerCase(),m={Produce:["lettuce","tomato","onion","garlic","pepper","carrot","celery","spinach","kale","broccoli","cucumber","avocado","lemon","lime","apple","banana","berry","orange","potato","sweet potato","mushroom","zucchini","squash"],"Meat & Seafood":["chicken","beef","pork","turkey","salmon","fish","shrimp","bacon","sausage","lamb","steak","ground"],"Dairy & Eggs":["milk","cheese","yogurt","butter","cream","egg","sour cream"],Bakery:["bread","tortilla","bun","roll","bagel","pita"],Pantry:["rice","pasta","flour","sugar","oil","vinegar","sauce","broth","stock","beans","lentil","quinoa","oat"],"Spices & Seasonings":["salt","pepper","cumin","paprika","oregano","basil","thyme","cinnamon","garlic powder","onion powder"],Frozen:["frozen"],Beverages:["water","juice","coffee","tea","soda"]};for(const[E,j]of Object.entries(m))if(j.some(g=>h.includes(g)))return E;return"Other"}function getCategoryIcon(d){return{Produce:"","Meat & Seafood":"","Dairy & Eggs":"",Bakery:"",Pantry:"","Spices & Seasonings":"",Frozen:"",Beverages:"",Other:""}[d]||""}function formatAmount(d,h){return d?`${d<1?d.toFixed(2):Math.round(d*10)/10} ${h||""}`.trim():""}function NutritionView({profile:d,meals:h,workouts:m,mealPlan:E,recipes:j,isGeneratingMealPlan:g,onLogMeal:N,onDeleteMeal:k,onCreateMealPlan:A,onBack:w}){const[M,_]=reactExports.useState(new Date),[J,W]=reactExports.useState(!1),[ie,q]=reactExports.useState("tracking"),{macros:L,bmr:Ee,tdee:ue}=d||{},te=d.weightUnit==="kg"?d.weight/.453592:parseFloat(d.weight),K=M.toISOString().split("T")[0],me=h.filter(Z=>Z.loggedAt?.startsWith(K)||Z.createdAt?.startsWith(K)),re=m.filter(Z=>Z.loggedAt?.startsWith(K)||Z.completedAt?.startsWith(K)),F=me.reduce((Z,ge)=>({calories:Z.calories+(ge.calories||0),protein:Z.protein+(ge.protein||0),carbs:Z.carbs+(ge.carbs||0),fat:Z.fat+(ge.fat||0),fiber:Z.fiber+(ge.fiber||0),sugar:Z.sugar+(ge.sugar||0),sodium:Z.sodium+(ge.sodium||0)}),{calories:0,protein:0,carbs:0,fat:0,fiber:0,sugar:0,sodium:0}),U=re.reduce((Z,ge)=>Z+(ge.caloriesBurned||200),0),Q=estimateDailyCalories(Ee||1800,d.activityLevel,U),xe=calculateRecommendations(d,Q.totalDailyBurn),Ce=Z=>{const ge=new Date(M);ge.setDate(ge.getDate()+Z),_(ge)},B=M.toISOString().split("T")[0]===new Date().toISOString().split("T")[0];return ie==="mealplan"&&E?jsxRuntimeExports.jsx(MealPlanView,{mealPlan:E,recipes:j,profile:d,onBack:()=>q("tracking"),onOpenShoppingList:()=>q("shopping")}):ie==="shopping"&&E?jsxRuntimeExports.jsx(ShoppingListView,{mealPlan:E,recipes:j,onBack:()=>q("mealplan")}):jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[jsxRuntimeExports.jsxs("header",{className:"px-6 py-5 bg-dark-800 border-b border-dark-700",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[w&&jsxRuntimeExports.jsx("button",{onClick:w,className:"p-2 -ml-2 hover:bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5 text-white"})}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Flame,{className:"w-6 h-6 text-accent-warning"}),"Nutrition"]})})]}),jsxRuntimeExports.jsxs(Button,{size:"sm",onClick:N,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-1"}),"Log Meal"]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2 mt-4",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>q("tracking"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${ie==="tracking"?"bg-accent-primary text-dark-900":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:[jsxRuntimeExports.jsx(Target,{className:"w-4 h-4"}),"Tracking"]}),jsxRuntimeExports.jsx("button",{onClick:()=>E?q("mealplan"):A?.(),disabled:g,className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all flex items-center justify-center gap-2 ${ie==="mealplan"?"bg-accent-secondary text-dark-900":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:g?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader2,{className:"w-4 h-4 animate-spin"}),"Generating..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ChefHat,{className:"w-4 h-4"}),E?"Meal Plan":"Create Plan"]})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4",children:[jsxRuntimeExports.jsx("button",{onClick:()=>Ce(-1),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",children:jsxRuntimeExports.jsx(ChevronLeft,{className:"w-5 h-5 text-gray-400"})}),jsxRuntimeExports.jsx("div",{className:"text-center",children:jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:B?"Today":M.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})}),jsxRuntimeExports.jsx("button",{onClick:()=>Ce(1),className:"p-2 hover:bg-dark-700 rounded-lg transition-colors",disabled:B,children:jsxRuntimeExports.jsx(ChevronRight,{className:`w-5 h-5 ${B?"text-gray-600":"text-gray-400"}`})})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Zap,{className:"w-5 h-5 text-accent-danger mx-auto mb-1"}),jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-white",children:Q.totalDailyBurn}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Burned"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Net"}),jsxRuntimeExports.jsxs("p",{className:`text-2xl font-bold ${F.calories-Q.totalDailyBurn<0?"text-accent-success":"text-accent-warning"}`,children:[F.calories-Q.totalDailyBurn>0?"+":"",F.calories-Q.totalDailyBurn]})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx(Target,{className:"w-5 h-5 text-accent-success mx-auto mb-1"}),jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-white",children:F.calories}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Consumed"})]})]}),jsxRuntimeExports.jsx("div",{className:"h-px bg-dark-600 my-4"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center text-xs",children:[jsxRuntimeExports.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"BMR"}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:Q.bmr})]}),jsxRuntimeExports.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Activity"}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:Q.neat})]}),jsxRuntimeExports.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Workouts"}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:U})]})]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"w-5 h-5 text-accent-primary"}),"Recommended Intake"]}),jsxRuntimeExports.jsxs("span",{className:"text-xs text-gray-400 px-2 py-1 bg-dark-700 rounded",children:[d.nutritionGoal==="maintain"&&"Maintain",d.nutritionGoal==="recomp"&&"Recomp",d.nutritionGoal==="lose"&&"Weight Loss",d.nutritionGoal==="gain"&&"Weight Gain"]})]}),jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-lg mb-4",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-white",children:xe.calories}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Recommended daily calories"})]})}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-accent-success",children:[xe.protein,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Protein"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[xe.proteinPerLb,"g/lb"]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-accent-warning",children:[xe.carbs,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg text-center",children:[jsxRuntimeExports.jsxs("p",{className:"text-lg font-bold text-accent-secondary",children:[xe.fat,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-3 flex items-start gap-1",children:[jsxRuntimeExports.jsx(Info,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),"Based on your ",d.nutritionGoal," goal and estimated ",Q.totalDailyBurn," daily calorie burn"]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"Today's Macros"}),jsxRuntimeExports.jsx("button",{onClick:()=>W(!J),className:"text-sm text-accent-primary",children:J?"Simple View":"Detailed View"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsx(MacroProgress,{label:"Protein",current:F.protein,target:xe.protein,color:"success",calories:F.protein*4}),jsxRuntimeExports.jsx(MacroProgress,{label:"Carbohydrates",current:F.carbs,target:xe.carbs,color:"warning",calories:F.carbs*4}),jsxRuntimeExports.jsx(MacroProgress,{label:"Fat",current:F.fat,target:xe.fat,color:"secondary",calories:F.fat*9})]}),J&&jsxRuntimeExports.jsxs("div",{className:"mt-6 pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-gray-400 mb-3",children:"Additional Nutrients"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsx(MicroNutrient,{label:"Fiber",value:F.fiber,target:30,unit:"g"}),jsxRuntimeExports.jsx(MicroNutrient,{label:"Sugar",value:F.sugar,target:50,unit:"g",warn:!0}),jsxRuntimeExports.jsx(MicroNutrient,{label:"Sodium",value:F.sodium,target:2300,unit:"mg",warn:!0}),jsxRuntimeExports.jsx(MicroNutrient,{label:"Water",value:Math.round(te*.5),target:Math.round(te*.67),unit:"oz"})]})]}),jsxRuntimeExports.jsxs("div",{className:"mt-4 pt-4 border-t border-dark-600",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Calorie Distribution"}),jsxRuntimeExports.jsxs("div",{className:"flex h-3 rounded-full overflow-hidden bg-dark-600",children:[jsxRuntimeExports.jsx("div",{className:"bg-accent-success",style:{width:`${F.calories>0?F.protein*4/F.calories*100:0}%`}}),jsxRuntimeExports.jsx("div",{className:"bg-accent-warning",style:{width:`${F.calories>0?F.carbs*4/F.calories*100:0}%`}}),jsxRuntimeExports.jsx("div",{className:"bg-accent-secondary",style:{width:`${F.calories>0?F.fat*9/F.calories*100:0}%`}})]}),jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[jsxRuntimeExports.jsxs("span",{children:["P: ",F.calories>0?Math.round(F.protein*4/F.calories*100):0,"%"]}),jsxRuntimeExports.jsxs("span",{children:["C: ",F.calories>0?Math.round(F.carbs*4/F.calories*100):0,"%"]}),jsxRuntimeExports.jsxs("span",{children:["F: ",F.calories>0?Math.round(F.fat*9/F.calories*100):0,"%"]})]})]})]})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-3",children:["Meals (",me.length,")"]}),me.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-3",children:me.map(Z=>jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsx(CardBody,{className:"p-4",children:jsxRuntimeExports.jsxs("div",{className:"flex items-start justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-medium text-white",children:Z.name||"Meal"}),jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap gap-x-3 gap-y-1 mt-2 text-sm",children:[jsxRuntimeExports.jsxs("span",{className:"text-white font-medium",children:[Z.calories," kcal"]}),jsxRuntimeExports.jsxs("span",{className:"text-accent-success",children:["P: ",Z.protein,"g"]}),jsxRuntimeExports.jsxs("span",{className:"text-accent-warning",children:["C: ",Z.carbs,"g"]}),jsxRuntimeExports.jsxs("span",{className:"text-accent-secondary",children:["F: ",Z.fat,"g"]})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mt-2",children:new Date(Z.loggedAt||Z.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),Z.screenshot&&jsxRuntimeExports.jsx("img",{src:Z.screenshot,alt:"Meal",className:"w-14 h-14 object-cover rounded-lg ml-3"}),jsxRuntimeExports.jsx("button",{onClick:()=>k&&k(Z.id),className:"p-2 text-gray-500 hover:text-accent-danger ml-2",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]})})},Z.id))}):jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"text-center py-8",children:[jsxRuntimeExports.jsx("span",{className:"text-4xl mb-2 block",children:""}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"No meals logged yet"}),jsxRuntimeExports.jsxs(Button,{variant:"secondary",size:"sm",className:"mt-4",onClick:N,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-1"}),"Log Your First Meal"]})]})})]})]})]})}function calculateRecommendations(d,h){const m=d.weightUnit==="kg"?d.weight/.453592:parseFloat(d.weight);let E,j,g;switch(d.nutritionGoal){case"maintain":E=h,g=.8,j=Math.round(m*g);break;case"recomp":E=h,g=1,j=Math.round(m*g);break;case"lose":const M=(d.weeklyWeightChange||.5)*500;E=Math.round(h-M),g=1,j=Math.round(m*g);break;case"gain":const _=(d.weeklyWeightChange||.5)*500;E=Math.round(h+_),g=.9,j=Math.round(m*g);break;default:E=h,g=.8,j=Math.round(m*g)}const N=j*4,k=E-N,A=Math.round(k*.3/9),w=Math.round(k*.7/4);return{calories:E,protein:j,proteinPerLb:g,carbs:w,fat:A}}function MacroProgress({label:d,current:h,target:m,color:E,calories:j}){const g=h>m;return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:d}),jsxRuntimeExports.jsxs("div",{className:"text-right",children:[jsxRuntimeExports.jsxs("span",{className:`font-medium ${g?"text-accent-danger":"text-white"}`,children:[h,"g"]}),jsxRuntimeExports.jsxs("span",{className:"text-gray-500",children:[" / ",m,"g"]}),jsxRuntimeExports.jsxs("span",{className:"text-gray-600 text-xs ml-2",children:["(",j," kcal)"]})]})]}),jsxRuntimeExports.jsx(ProgressBar,{value:h,max:m,color:g?"danger":E,size:"sm"})]})}function MicroNutrient({label:d,value:h,target:m,unit:E,warn:j=!1}){const g=h/m*100,N=h>m;return jsxRuntimeExports.jsxs("div",{className:"p-2 bg-dark-700 rounded",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-xs",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:d}),jsxRuntimeExports.jsxs("span",{className:`font-medium ${j&&N?"text-accent-danger":"text-white"}`,children:[h,E]})]}),jsxRuntimeExports.jsx("div",{className:"mt-1 h-1 bg-dark-600 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:`h-full rounded-full ${j&&N?"bg-accent-danger":"bg-accent-primary"}`,style:{width:`${Math.min(g,100)}%`}})})]})}const DIETARY_OPTIONS=[{id:"vegetarian",label:"Vegetarian",icon:""},{id:"vegan",label:"Vegan",icon:""},{id:"gluten-free",label:"Gluten-Free",icon:""},{id:"dairy-free",label:"Dairy-Free",icon:""},{id:"keto",label:"Keto",icon:""},{id:"paleo",label:"Paleo",icon:""},{id:"pescatarian",label:"Pescatarian",icon:""},{id:"halal",label:"Halal",icon:""},{id:"kosher",label:"Kosher",icon:""}],CUISINE_OPTIONS=[{id:"american",label:"American",icon:""},{id:"mexican",label:"Mexican",icon:""},{id:"italian",label:"Italian",icon:""},{id:"chinese",label:"Chinese",icon:""},{id:"japanese",label:"Japanese",icon:""},{id:"indian",label:"Indian",icon:""},{id:"mediterranean",label:"Mediterranean",icon:""},{id:"thai",label:"Thai",icon:""},{id:"korean",label:"Korean",icon:""}],COMMON_DISLIKES=["Mushrooms","Olives","Onions","Cilantro","Seafood","Spicy food","Tofu","Eggs","Nuts","Avocado"],DAYS_OF_WEEK=[{id:"mon",label:"Mon"},{id:"tue",label:"Tue"},{id:"wed",label:"Wed"},{id:"thu",label:"Thu"},{id:"fri",label:"Fri"},{id:"sat",label:"Sat"},{id:"sun",label:"Sun"}];function NutritionPreferences({isOpen:d,onClose:h,onSave:m,profile:E}){const[j,g]=reactExports.useState(1),[N,k]=reactExports.useState(!1),[A,w]=reactExports.useState({dietaryRestrictions:[],cuisinePreferences:[],dislikedFoods:[],customDislikes:"",mealsPerDay:3,snacksPerDay:1,cookingTime:"moderate",budgetLevel:"moderate",prepPreference:"mix",excludedMeals:{}});reactExports.useEffect(()=>{d&&M()},[d]);const M=async()=>{const{data:U}=await loadNutritionPreferences();U&&w(Q=>({...Q,...U}))},_=(U,Q)=>{w(xe=>({...xe,[U]:xe[U].includes(Q)?xe[U].filter(Ce=>Ce!==Q):[...xe[U],Q]}))},J=(U,Q)=>{const xe=`${U}-${Q}`;w(Ce=>({...Ce,excludedMeals:{...Ce.excludedMeals,[xe]:!Ce.excludedMeals[xe]}}))},W=reactExports.useMemo(()=>Object.values(A.excludedMeals).filter(Boolean).length,[A.excludedMeals]),ie=E?.macros?.calories||2e3,q=E?.macros?.protein||150,Ee=(A.mealsPerDay+A.snacksPerDay)*7-W,ue=ie/(A.mealsPerDay+A.snacksPerDay),te=Math.round(W/7*ue),K=ie-te,me=async()=>{k(!0);try{const U=[...A.dislikedFoods,...A.customDislikes.split(",").map(xe=>xe.trim()).filter(Boolean)],Q={...A,dislikedFoods:U,adjustedCalories:K,excludedMealCount:W,plannedMealsPerWeek:Ee};await saveNutritionPreferences(Q),m?.(Q)}catch(U){console.error("Error saving preferences:",U)}k(!1)};if(!d)return null;const F=(()=>{const U=[];for(let Q=0;Q<A.mealsPerDay;Q++)Q===0?U.push("B"):Q===A.mealsPerDay-1?U.push("D"):U.push("L");for(let Q=0;Q<A.snacksPerDay;Q++)U.push("S");return U})();return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-lg bg-dark-800 rounded-2xl shadow-2xl border border-dark-600 overflow-hidden max-h-[90vh] flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-3",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 rounded-full bg-accent-secondary/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(Utensils,{className:"w-5 h-5 text-accent-secondary"})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"Meal Plan Preferences"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400",children:["Step ",j," of 3"]})]})]}),jsxRuntimeExports.jsx("button",{onClick:h,className:"p-2 hover:bg-dark-700 rounded-lg",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5 text-gray-400"})})]}),jsxRuntimeExports.jsx("div",{className:"h-1 bg-dark-700",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-accent-secondary transition-all duration-300",style:{width:`${j/3*100}%`}})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[j===1&&jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{className:"bg-dark-700 rounded-xl p-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-gray-400",children:"Planned Daily Targets"}),W>0&&jsxRuntimeExports.jsxs("span",{className:"text-xs text-amber-400",children:[W," meals skipped/week"]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-2xl font-bold text-accent-primary",children:K}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400",children:W>0?`avg cal/day (was ${ie})`:"Calories"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsxs("div",{className:"text-2xl font-bold text-accent-secondary",children:[q,"g"]}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400",children:"Protein"})]})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Dietary Restrictions"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:DIETARY_OPTIONS.map(U=>jsxRuntimeExports.jsxs("button",{onClick:()=>_("dietaryRestrictions",U.id),className:`p-2 rounded-lg border text-center transition-all ${A.dietaryRestrictions.includes(U.id)?"bg-accent-secondary/20 border-accent-secondary text-white":"bg-dark-700 border-dark-600 text-gray-400 hover:border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-base block",children:U.icon}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:U.label})]},U.id))})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Meals/Day"}),jsxRuntimeExports.jsx("div",{className:"flex gap-1",children:[2,3,4].map(U=>jsxRuntimeExports.jsx("button",{onClick:()=>w(Q=>({...Q,mealsPerDay:U,excludedMeals:{}})),className:`flex-1 py-2 rounded-lg border text-sm transition-all ${A.mealsPerDay===U?"bg-accent-primary/20 border-accent-primary text-white":"bg-dark-700 border-dark-600 text-gray-400"}`,children:U},U))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-2",children:"Snacks/Day"}),jsxRuntimeExports.jsx("div",{className:"flex gap-1",children:[0,1,2].map(U=>jsxRuntimeExports.jsx("button",{onClick:()=>w(Q=>({...Q,snacksPerDay:U,excludedMeals:{}})),className:`flex-1 py-2 rounded-lg border text-sm transition-all ${A.snacksPerDay===U?"bg-accent-secondary/20 border-accent-secondary text-white":"bg-dark-700 border-dark-600 text-gray-400"}`,children:U},U))})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-4 h-4 text-gray-400"}),jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white",children:"Skip Meals (eating out, etc.)"})]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-3",children:"Tap to skip - checked meals won't be planned"}),jsxRuntimeExports.jsx("div",{className:"bg-dark-700 rounded-xl p-3 overflow-x-auto",children:jsxRuntimeExports.jsxs("table",{className:"w-full text-xs",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{className:"text-left text-gray-500 font-medium pb-2 pr-2"}),DAYS_OF_WEEK.map(U=>jsxRuntimeExports.jsx("th",{className:"text-center text-gray-400 font-medium pb-2 px-1",children:U.label},U.id))]})}),jsxRuntimeExports.jsx("tbody",{children:F.map((U,Q)=>jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{className:"text-gray-400 pr-2 py-1 whitespace-nowrap",children:U==="B"?"":U==="L"?"":U==="D"?"":""}),DAYS_OF_WEEK.map(xe=>{const Ce=A.excludedMeals[`${xe.id}-${Q}`];return jsxRuntimeExports.jsx("td",{className:"text-center px-1 py-1",children:jsxRuntimeExports.jsx("button",{onClick:()=>J(xe.id,Q),className:`w-6 h-6 rounded border transition-all ${Ce?"bg-amber-500/30 border-amber-500 text-amber-400":"bg-dark-600 border-dark-500 text-transparent hover:border-dark-400"}`,children:Ce&&jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 mx-auto"})})},xe.id)})]},Q))})]})})]})]}),j===2&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Favorite Cuisines"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-3 gap-2",children:CUISINE_OPTIONS.map(U=>jsxRuntimeExports.jsxs("button",{onClick:()=>_("cuisinePreferences",U.id),className:`p-3 rounded-lg border text-center transition-all ${A.cuisinePreferences.includes(U.id)?"bg-accent-secondary/20 border-accent-secondary text-white":"bg-dark-700 border-dark-600 text-gray-400 hover:border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-lg block mb-1",children:U.icon}),jsxRuntimeExports.jsx("span",{className:"text-xs",children:U.label})]},U.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Foods You Dislike"}),jsxRuntimeExports.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:COMMON_DISLIKES.map(U=>jsxRuntimeExports.jsx("button",{onClick:()=>_("dislikedFoods",U),className:`px-3 py-1.5 rounded-full text-sm transition-all ${A.dislikedFoods.includes(U)?"bg-red-500/20 border border-red-500/50 text-red-400":"bg-dark-700 text-gray-400 hover:bg-dark-600"}`,children:U},U))}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Other foods (comma separated)",value:A.customDislikes,onChange:U=>w(Q=>({...Q,customDislikes:U.target.value})),className:"w-full px-3 py-2 bg-dark-700 border border-dark-600 rounded-lg text-white placeholder-gray-500 text-sm"})]})]}),j===3&&jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Cooking Time Preference"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:[{id:"quick",label:"Quick & Easy",desc:"15-20 min meals",icon:""},{id:"moderate",label:"Moderate",desc:"30-45 min meals",icon:""},{id:"elaborate",label:"Elaborate",desc:"60+ min, gourmet",icon:""}].map(U=>jsxRuntimeExports.jsxs("button",{onClick:()=>w(Q=>({...Q,cookingTime:U.id})),className:`w-full p-3 rounded-lg border flex items-center gap-3 transition-all ${A.cookingTime===U.id?"bg-accent-primary/20 border-accent-primary":"bg-dark-700 border-dark-600 hover:border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:U.icon}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-white font-medium",children:U.label}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400",children:U.desc})]}),A.cookingTime===U.id&&jsxRuntimeExports.jsx(Check,{className:"w-5 h-5 text-accent-primary ml-auto"})]},U.id))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Meal Prep Style"}),jsxRuntimeExports.jsx("div",{className:"space-y-2",children:[{id:"meal-prep",label:"Meal Prep",desc:"Cook once, eat all week",icon:""},{id:"daily",label:"Cook Daily",desc:"Fresh meals every day",icon:""},{id:"mix",label:"Mix of Both",desc:"Some prep, some fresh",icon:""}].map(U=>jsxRuntimeExports.jsxs("button",{onClick:()=>w(Q=>({...Q,prepPreference:U.id})),className:`w-full p-3 rounded-lg border flex items-center gap-3 transition-all ${A.prepPreference===U.id?"bg-accent-secondary/20 border-accent-secondary":"bg-dark-700 border-dark-600 hover:border-dark-500"}`,children:[jsxRuntimeExports.jsx("span",{className:"text-2xl",children:U.icon}),jsxRuntimeExports.jsxs("div",{className:"text-left",children:[jsxRuntimeExports.jsx("div",{className:"text-white font-medium",children:U.label}),jsxRuntimeExports.jsx("div",{className:"text-xs text-gray-400",children:U.desc})]}),A.prepPreference===U.id&&jsxRuntimeExports.jsx(Check,{className:"w-5 h-5 text-accent-secondary ml-auto"})]},U.id))})]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 border-t border-dark-600 flex gap-3",children:[j>1&&jsxRuntimeExports.jsx("button",{onClick:()=>g(U=>U-1),className:"flex-1 py-3 px-4 bg-dark-700 text-white rounded-lg hover:bg-dark-600",children:"Back"}),j<3?jsxRuntimeExports.jsxs("button",{onClick:()=>g(U=>U+1),className:"flex-1 py-3 px-4 bg-accent-primary text-dark-900 font-semibold rounded-lg hover:bg-accent-primary/90 flex items-center justify-center gap-2",children:["Continue",jsxRuntimeExports.jsx(ChevronRight,{className:"w-4 h-4"})]}):jsxRuntimeExports.jsxs("button",{onClick:me,disabled:N,className:"flex-1 py-3 px-4 bg-accent-secondary text-dark-900 font-semibold rounded-lg hover:bg-accent-secondary/90 flex items-center justify-center gap-2",children:[N?"Saving...":"Generate Meal Plan",jsxRuntimeExports.jsx(Utensils,{className:"w-4 h-4"})]})]})]})})}function StatsView({profile:d,program:h,meals:m,workouts:E}){const j=new Date,g=new Date(j);g.setDate(j.getDate()-j.getDay()),g.setHours(0,0,0,0);const N=m.filter(W=>new Date(W.loggedAt||W.createdAt)>=g),k=E.filter(W=>new Date(W.loggedAt||W.completedAt)>=g),A=N.length?Math.round(N.reduce((W,ie)=>W+(ie.calories||0),0)/Math.min(7,N.length)):0,w=N.length?Math.round(N.reduce((W,ie)=>W+(ie.protein||0),0)/Math.min(7,N.length)):0,M=d.daysPerWeek||4,_=Math.min(Math.round(k.length/M*100),100),J=k.reduce((W,ie)=>W+(ie.exercises?.reduce((q,L)=>q+(parseInt(L.sets)||0),0)||0),0);return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[jsxRuntimeExports.jsxs("header",{className:"px-6 py-5 bg-dark-800 border-b border-dark-700",children:[jsxRuntimeExports.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(BarChart3,{className:"w-6 h-6 text-accent-primary"}),"Stats & Progress"]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"This week's overview"})]}),jsxRuntimeExports.jsxs("div",{className:"p-6 space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"text-center",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-8 h-8 text-accent-primary mx-auto mb-2"}),jsxRuntimeExports.jsx("div",{className:"text-3xl font-bold text-white",children:k.length}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Workouts"}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["of ",M," planned"]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{className:"text-center",children:[jsxRuntimeExports.jsx(Target,{className:"w-8 h-8 text-accent-success mx-auto mb-2"}),jsxRuntimeExports.jsxs("div",{className:"text-3xl font-bold text-white",children:[_,"%"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Adherence"})]})})]}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(TrendingUp,{className:"w-5 h-5 text-accent-primary"}),"Training Progress"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Program Week"}),jsxRuntimeExports.jsxs("span",{className:"text-white font-medium",children:[h?.currentWeek||1," of ",h?.mesocycleWeeks||4]})]}),jsxRuntimeExports.jsx(ProgressBar,{value:h?.currentWeek||1,max:h?.mesocycleWeeks||4,color:"primary"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:J}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Weekly Sets"})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:k.length>0?Math.round(k.reduce((W,ie)=>W+(ie.duration||0),0)/k.length):0}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Avg Duration"})]})]})]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Flame,{className:"w-5 h-5 text-accent-warning"}),"Nutrition Averages"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Avg Daily Calories"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[A," / ",d.macros?.calories]})]}),jsxRuntimeExports.jsx(ProgressBar,{value:A,max:d.macros?.calories||2e3,color:A>(d.macros?.calories||2e3)?"danger":"warning",size:"sm"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Avg Daily Protein"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[w,"g / ",d.macros?.protein,"g"]})]}),jsxRuntimeExports.jsx(ProgressBar,{value:w,max:d.macros?.protein||150,color:"success",size:"sm"})]}),jsxRuntimeExports.jsxs("div",{className:"pt-2 text-sm text-gray-500",children:["Based on ",N.length," logged meals"]})]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 text-accent-secondary"}),"Mesocycle Progress"]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:h?.phases?.map((W,ie)=>{const q=W===h.currentPhase,L=h.phases.indexOf(h.currentPhase)>ie;return jsxRuntimeExports.jsx("div",{className:`flex-1 p-3 rounded-lg text-center text-sm ${q?"bg-accent-primary text-white":L?"bg-accent-success/20 text-accent-success":"bg-dark-700 text-gray-500"}`,children:W},W)})})]})})]})]})}const getExperienceLevel=d=>!d||d<1?"Beginner":d<2?"Novice":d<4?"Intermediate":d<7?"Advanced":"Expert",capitalize=d=>d?d.charAt(0).toUpperCase()+d.slice(1):"";function ProfileView({profile:d,program:h,onResetSetup:m}){const{macros:E}=d,j={strength:" Strength",bodybuilding:" Bodybuilding",endurance:" Endurance",fatloss:" Fat Loss",marathon:" Marathon",general:" General"};return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 pb-20",children:[jsxRuntimeExports.jsx("header",{className:"px-6 py-8 bg-gradient-to-b from-accent-primary/20 to-dark-900",children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"w-20 h-20 bg-accent-primary rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx("span",{className:"text-3xl",children:d.name?d.name.charAt(0).toUpperCase():""})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h1",{className:"text-2xl font-bold text-white",children:d.name||"Athlete"}),jsxRuntimeExports.jsxs("p",{className:"text-gray-400",children:[getExperienceLevel(d.yearsTraining)," Level"]})]})]})}),jsxRuntimeExports.jsxs("div",{className:"px-6 py-4 space-y-4",children:[jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Scale,{className:"w-5 h-5 text-accent-secondary"}),"Body Stats"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:d.weight}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:d.weightUnit||"lbs"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:d.heightUnit==="metric"?d.heightCm:`${d.heightFeet}'${d.heightInches}"`}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:d.heightUnit==="metric"?"cm":"imperial"})]}),jsxRuntimeExports.jsxs("div",{className:"text-center p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:d.age}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"years"})]})]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Flame,{className:"w-5 h-5 text-accent-warning"}),"Daily Nutrition Targets"]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-3xl font-bold text-white",children:E?.calories}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Calories"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-accent-success",children:[E?.protein,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Protein"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-accent-warning",children:[E?.carbs,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Carbs"})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsxs("p",{className:"text-3xl font-bold text-accent-secondary",children:[E?.fat,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"Fat"})]})]}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["TDEE: ",d.tdee," kcal/day  BMR: ",d.bmr," kcal/day"]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Target,{className:"w-5 h-5 text-accent-primary"}),"Training Goals"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Primary"}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:j[d.programSubtype]||capitalize(d.programType)})]}),d.enableHybrid&&d.secondaryProgramType&&jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-accent-primary/10 border border-accent-primary/30 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-accent-primary",children:"Hybrid"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[" ",d.allowDoubleDays?"AM/PM Splits":"Alternating"]})]})]})]})}),jsxRuntimeExports.jsx(Card,{children:jsxRuntimeExports.jsxs(CardBody,{children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[jsxRuntimeExports.jsx(Calendar,{className:"w-5 h-5 text-accent-secondary"}),"Current Program"]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Program"}),jsxRuntimeExports.jsx("span",{className:"text-white",children:h?.name||"Custom"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Week"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[h?.currentWeek," of ",h?.mesocycleWeeks]})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Phase"}),jsxRuntimeExports.jsx("span",{className:"text-white",children:h?.currentPhase})]})]})]})}),jsxRuntimeExports.jsx("div",{className:"pt-4",children:jsxRuntimeExports.jsxs(Button,{variant:"secondary",fullWidth:!0,onClick:m,children:[jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4 mr-2"}),"Reset & Start Over"]})}),jsxRuntimeExports.jsx("p",{className:"text-center text-xs text-gray-600 pt-4",children:"MOTUS v1.0  Powered by Claude AI"})]})]})}const analyzeFood=async d=>(await new Promise(h=>setTimeout(h,1500)),{foods:[{name:"Grilled Chicken Breast",portion:"6 oz",calories:280,protein:52,carbs:0,fat:6},{name:"Brown Rice",portion:"1 cup",calories:215,protein:5,carbs:45,fat:2},{name:"Steamed Broccoli",portion:"1 cup",calories:55,protein:4,carbs:11,fat:.5}],totals:{calories:550,protein:61,carbs:56,fat:8.5},confidence:.85,suggestions:["Good protein-to-carb ratio for muscle building","Consider adding healthy fats (olive oil, avocado)"]});function PhotoFoodLogger({onLog:d,onClose:h}){const[m,E]=reactExports.useState("capture"),[j,g]=reactExports.useState(null),[N,k]=reactExports.useState(null),[A,w]=reactExports.useState([]),[M,_]=reactExports.useState(null),J=reactExports.useRef(null),W=reactExports.useRef(null),[ie,q]=reactExports.useState(null),[L,Ee]=reactExports.useState(!1),ue=async()=>{try{const B=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});q(B),Ee(!0),W.current&&(W.current.srcObject=B)}catch(B){console.error("Camera access denied:",B),_("Camera access denied. Please allow camera access or upload an image instead.")}},te=()=>{ie&&(ie.getTracks().forEach(B=>B.stop()),q(null)),Ee(!1)},K=()=>{if(W.current){const B=document.createElement("canvas");B.width=W.current.videoWidth,B.height=W.current.videoHeight,B.getContext("2d").drawImage(W.current,0,0);const Z=B.toDataURL("image/jpeg",.8);g(Z),te(),re(Z)}},me=B=>{const Z=B.target.files[0];if(Z){const ge=new FileReader;ge.onload=I=>{g(I.target.result),re(I.target.result)},ge.readAsDataURL(Z)}},re=async B=>{E("analyzing"),_(null);try{const Z=await analyzeFood(B);k(Z),w(Z.foods.map(ge=>({...ge,selected:!0}))),E("review")}catch(Z){console.error("Analysis failed:",Z),_("Failed to analyze food. Please try again or log manually."),E("capture")}},F=B=>{w(Z=>Z.map((ge,I)=>I===B?{...ge,selected:!ge.selected}:ge))},U=(B,Z,ge)=>{w(I=>I.map((ne,le)=>le===B?{...ne,[Z]:ge}:ne))},Q=()=>{const B=A.filter(ge=>ge.selected),Z=B.reduce((ge,I)=>({calories:ge.calories+(parseFloat(I.calories)||0),protein:ge.protein+(parseFloat(I.protein)||0),carbs:ge.carbs+(parseFloat(I.carbs)||0),fat:ge.fat+(parseFloat(I.fat)||0)}),{calories:0,protein:0,carbs:0,fat:0});d({foods:B,totals:Z,image:j,loggedAt:new Date().toISOString(),method:"photo"}),h()},xe=()=>{g(null),k(null),w([]),E("capture"),_(null),te()},Ce=A.filter(B=>B.selected).reduce((B,Z)=>({calories:B.calories+(parseFloat(Z.calories)||0),protein:B.protein+(parseFloat(Z.protein)||0),carbs:B.carbs+(parseFloat(Z.carbs)||0),fat:B.fat+(parseFloat(Z.fat)||0)}),{calories:0,protein:0,carbs:0,fat:0});return jsxRuntimeExports.jsxs("div",{className:"fixed inset-0 bg-black/90 flex flex-col z-50",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 bg-dark-800",children:[jsxRuntimeExports.jsxs("h2",{className:"text-lg font-bold text-white",children:[m==="capture"&&" Snap Your Meal",m==="analyzing"&&" Analyzing...",m==="review"&&" Review & Log",m==="edit"&&" Edit Details"]}),jsxRuntimeExports.jsx("button",{onClick:()=>{te(),h()},className:"p-2 rounded-full hover:bg-dark-700 text-gray-400",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 overflow-y-auto",children:[m==="capture"&&jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[M&&jsxRuntimeExports.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/50 rounded-lg",children:jsxRuntimeExports.jsx("p",{className:"text-sm text-red-300",children:M})}),L?jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("video",{ref:W,autoPlay:!0,playsInline:!0,className:"w-full rounded-xl"}),jsxRuntimeExports.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center gap-4",children:[jsxRuntimeExports.jsx("button",{onClick:te,className:"p-3 bg-dark-800/80 rounded-full text-white",children:jsxRuntimeExports.jsx(X,{className:"w-6 h-6"})}),jsxRuntimeExports.jsx("button",{onClick:K,className:"p-4 bg-white rounded-full",children:jsxRuntimeExports.jsx(Camera,{className:"w-8 h-8 text-dark-900"})})]})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("button",{onClick:ue,className:"w-full p-8 bg-dark-700 rounded-xl border-2 border-dashed border-dark-500 hover:border-accent-primary transition-colors flex flex-col items-center gap-3",children:[jsxRuntimeExports.jsx(Camera,{className:"w-12 h-12 text-accent-primary"}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Take Photo"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400",children:"Use your camera to capture your meal"})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-4",children:[jsxRuntimeExports.jsx("div",{className:"flex-1 h-px bg-dark-600"}),jsxRuntimeExports.jsx("span",{className:"text-gray-500 text-sm",children:"or"}),jsxRuntimeExports.jsx("div",{className:"flex-1 h-px bg-dark-600"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>J.current?.click(),className:"w-full p-6 bg-dark-800 rounded-xl border border-dark-600 hover:border-dark-400 transition-colors flex items-center justify-center gap-3",children:[jsxRuntimeExports.jsx(Upload,{className:"w-6 h-6 text-gray-400"}),jsxRuntimeExports.jsx("span",{className:"text-gray-300",children:"Upload from Gallery"})]}),jsxRuntimeExports.jsx("input",{ref:J,type:"file",accept:"image/*",onChange:me,className:"hidden"})]}),jsxRuntimeExports.jsxs("div",{className:"mt-6 p-4 bg-dark-800 rounded-xl",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-medium mb-2",children:" Tips for best results:"}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[jsxRuntimeExports.jsx("li",{children:" Take the photo from directly above"}),jsxRuntimeExports.jsx("li",{children:" Make sure all food is visible"}),jsxRuntimeExports.jsx("li",{children:" Good lighting helps accuracy"}),jsxRuntimeExports.jsx("li",{children:" Include a reference object (fork, hand) for portion sizing"})]})]})]}),m==="analyzing"&&jsxRuntimeExports.jsxs("div",{className:"p-4 flex flex-col items-center justify-center min-h-[60vh]",children:[j&&jsxRuntimeExports.jsx("img",{src:j,alt:"Food",className:"w-48 h-48 object-cover rounded-xl mb-6 opacity-50"}),jsxRuntimeExports.jsx(Loader2,{className:"w-12 h-12 text-accent-primary animate-spin mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:"Analyzing your meal..."}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Identifying foods and estimating macros"})]}),(m==="review"||m==="edit")&&N&&jsxRuntimeExports.jsxs("div",{className:"p-4 space-y-4",children:[j&&jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:j,alt:"Food",className:"w-full h-48 object-cover rounded-xl"}),jsxRuntimeExports.jsx("button",{onClick:xe,className:"absolute top-2 right-2 p-2 bg-dark-800/80 rounded-full text-white",children:jsxRuntimeExports.jsx(RefreshCw,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400",children:"AI Confidence"}),jsxRuntimeExports.jsxs("span",{className:`text-sm font-medium ${N.confidence>.8?"text-green-400":N.confidence>.6?"text-yellow-400":"text-orange-400"}`,children:[Math.round(N.confidence*100),"%"]})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-medium",children:"Detected Foods"}),jsxRuntimeExports.jsxs("button",{onClick:()=>E(m==="edit"?"review":"edit"),className:"text-sm text-accent-primary flex items-center gap-1",children:[jsxRuntimeExports.jsx(Pen,{className:"w-4 h-4"}),m==="edit"?"Done Editing":"Edit"]})]}),A.map((B,Z)=>jsxRuntimeExports.jsx("div",{className:`p-3 rounded-lg border transition-all ${B.selected?"bg-dark-700 border-accent-primary/50":"bg-dark-800 border-dark-600 opacity-50"}`,children:jsxRuntimeExports.jsxs("div",{className:"flex items-start gap-3",children:[jsxRuntimeExports.jsx("button",{onClick:()=>F(Z),className:`mt-1 w-5 h-5 rounded border flex items-center justify-center ${B.selected?"bg-accent-primary border-accent-primary":"border-dark-500"}`,children:B.selected&&jsxRuntimeExports.jsx(Check,{className:"w-3 h-3 text-dark-900"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[m==="edit"?jsxRuntimeExports.jsx("input",{type:"text",value:B.name,onChange:ge=>U(Z,"name",ge.target.value),className:"w-full bg-dark-600 border border-dark-500 rounded px-2 py-1 text-white text-sm mb-2"}):jsxRuntimeExports.jsx("p",{className:"text-white font-medium",children:B.name}),m==="edit"?jsxRuntimeExports.jsx("input",{type:"text",value:B.portion,onChange:ge=>U(Z,"portion",ge.target.value),className:"bg-dark-600 border border-dark-500 rounded px-2 py-1 text-gray-400 text-xs mb-2"}):jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:B.portion}),m==="edit"?jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-2 mt-2",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500",children:"Cal"}),jsxRuntimeExports.jsx("input",{type:"number",value:B.calories,onChange:ge=>U(Z,"calories",ge.target.value),className:"w-full bg-dark-600 border border-dark-500 rounded px-2 py-1 text-white text-xs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500",children:"P"}),jsxRuntimeExports.jsx("input",{type:"number",value:B.protein,onChange:ge=>U(Z,"protein",ge.target.value),className:"w-full bg-dark-600 border border-dark-500 rounded px-2 py-1 text-white text-xs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500",children:"C"}),jsxRuntimeExports.jsx("input",{type:"number",value:B.carbs,onChange:ge=>U(Z,"carbs",ge.target.value),className:"w-full bg-dark-600 border border-dark-500 rounded px-2 py-1 text-white text-xs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500",children:"F"}),jsxRuntimeExports.jsx("input",{type:"number",value:B.fat,onChange:ge=>U(Z,"fat",ge.target.value),className:"w-full bg-dark-600 border border-dark-500 rounded px-2 py-1 text-white text-xs"})]})]}):jsxRuntimeExports.jsxs("div",{className:"flex gap-3 mt-1 text-xs",children:[jsxRuntimeExports.jsxs("span",{className:"text-gray-400",children:[B.calories," cal"]}),jsxRuntimeExports.jsxs("span",{className:"text-blue-400",children:[B.protein,"g P"]}),jsxRuntimeExports.jsxs("span",{className:"text-yellow-400",children:[B.carbs,"g C"]}),jsxRuntimeExports.jsxs("span",{className:"text-red-400",children:[B.fat,"g F"]})]})]})]})},Z))]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-accent-primary/10 rounded-xl border border-accent-primary/30",children:[jsxRuntimeExports.jsx("h3",{className:"text-white font-medium mb-3",children:"Meal Total"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:Math.round(Ce.calories)}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Calories"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-blue-400",children:[Math.round(Ce.protein),"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Protein"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-yellow-400",children:[Math.round(Ce.carbs),"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-red-400",children:[Math.round(Ce.fat),"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]})]}),N.suggestions&&N.suggestions.length>0&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-2",children:" Tips:"}),N.suggestions.map((B,Z)=>jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-300",children:[" ",B]},Z))]})]})]}),(m==="review"||m==="edit")&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-dark-800 border-t border-dark-600",children:jsxRuntimeExports.jsxs("button",{onClick:Q,disabled:A.filter(B=>B.selected).length===0,className:"w-full py-4 bg-accent-primary text-dark-900 font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed",children:["Log This Meal (",Math.round(Ce.calories)," cal)"]})})]})}const OPEN_FOOD_FACTS_API="https://world.openfoodfacts.org/api/v2",UNIT_CONVERSIONS={g:1,gram:1,grams:1,kg:1e3,oz:28.3495,ounce:28.3495,ounces:28.3495,lb:453.592,pound:453.592,pounds:453.592,ml:1,milliliter:1,milliliters:1,l:1e3,liter:1e3,liters:1e3,"fl oz":29.5735,"fluid ounce":29.5735,"fluid ounces":29.5735,cup:236.588,cups:236.588,tbsp:14.787,tablespoon:14.787,tablespoons:14.787,tsp:4.929,teaspoon:4.929,teaspoons:4.929,pint:473.176,quart:946.353,gallon:3785.41},SERVING_OPTIONS=[{label:"Serving",value:"serving",icon:""},{label:"Gram (g)",value:"g",icon:""},{label:"Ounce (oz)",value:"oz",icon:""},{label:"Cup",value:"cup",icon:""},{label:"Tablespoon",value:"tbsp",icon:""},{label:"Teaspoon",value:"tsp",icon:""},{label:"Fluid Oz",value:"fl oz",icon:""},{label:"mL",value:"ml",icon:""},{label:"Piece",value:"piece",icon:""},{label:"Slice",value:"slice",icon:""},{label:"Container",value:"container",icon:""}];function convertUnits(d,h,m){const E=h.toLowerCase(),j=m.toLowerCase();if(E===j)return d;const g=UNIT_CONVERSIONS[E],N=UNIT_CONVERSIONS[j];return!g||!N?(console.warn(`Unknown unit conversion: ${h} to ${m}`),d):d*g/N}async function fetchProductByBarcode(d){try{const m=await(await fetch(`${OPEN_FOOD_FACTS_API}/product/${d}.json`)).json();if(m.status!==1||!m.product)return{success:!1,error:"Product not found"};const E=m.product,j=E.nutriments||{},g=E.serving_size||"100g",N=parseServingSize(g);return{success:!0,product:{barcode:d,name:E.product_name||E.product_name_en||"Unknown Product",brand:E.brands||"",image:E.image_front_small_url||E.image_url||null,servingSize:g,servingSizeGrams:N,per100g:{calories:Math.round(j["energy-kcal_100g"]||j.energy_100g/4.184||0),protein:Math.round((j.proteins_100g||0)*10)/10,carbs:Math.round((j.carbohydrates_100g||0)*10)/10,fat:Math.round((j.fat_100g||0)*10)/10,fiber:Math.round((j.fiber_100g||0)*10)/10,sugar:Math.round((j.sugars_100g||0)*10)/10,sodium:Math.round(j.sodium_100g*1e3||0)},perServing:{calories:Math.round(j["energy-kcal_serving"]||(j["energy-kcal_100g"]||0)*N/100),protein:Math.round((j.proteins_serving||(j.proteins_100g||0)*N/100)*10)/10,carbs:Math.round((j.carbohydrates_serving||(j.carbohydrates_100g||0)*N/100)*10)/10,fat:Math.round((j.fat_serving||(j.fat_100g||0)*N/100)*10)/10},categories:E.categories||"",ingredients:E.ingredients_text||E.ingredients_text_en||"",allergens:E.allergens||"",nutriscore:E.nutriscore_grade||null}}}catch(h){return console.error("Error fetching product:",h),{success:!1,error:"Failed to fetch product data"}}}async function searchProducts(d,h=1){try{const E=await(await fetch(`${OPEN_FOOD_FACTS_API}/search?search_terms=${encodeURIComponent(d)}&page=${h}&page_size=20&fields=code,product_name,brands,image_front_small_url,nutriments,serving_size`)).json();return E.products?{success:!0,products:E.products.map(g=>{const N=g.nutriments||{},k=g.serving_size||"100g",A=parseServingSize(k);return{barcode:g.code,name:g.product_name||"Unknown Product",brand:g.brands||"",image:g.image_front_small_url||null,servingSize:k,servingSizeGrams:A,perServing:{calories:Math.round((N["energy-kcal_100g"]||0)*A/100),protein:Math.round((N.proteins_100g||0)*A/100*10)/10,carbs:Math.round((N.carbohydrates_100g||0)*A/100*10)/10,fat:Math.round((N.fat_100g||0)*A/100*10)/10},per100g:{calories:Math.round(N["energy-kcal_100g"]||0),protein:Math.round((N.proteins_100g||0)*10)/10,carbs:Math.round((N.carbohydrates_100g||0)*10)/10,fat:Math.round((N.fat_100g||0)*10)/10}}}).filter(g=>g.name!=="Unknown Product"),totalCount:E.count||0,page:E.page||1}:{success:!1,error:"No products found",products:[]}}catch(m){return console.error("Error searching products:",m),{success:!1,error:"Failed to search products",products:[]}}}function parseServingSize(d){if(!d)return 100;const h=d.match(/(\d+\.?\d*)\s*(g|ml|oz|cup|tbsp|tsp)?/i);if(h){const m=parseFloat(h[1]),E=(h[2]||"g").toLowerCase();return convertUnits(m,E,"g")}return 100}function calculateNutrition(d,h,m){if(!d||!d.per100g)return null;let E;m==="serving"?(E=d.servingSizeGrams||100,E*=h):m==="piece"||m==="slice"||m==="container"?E=(d.servingSizeGrams||100)*h:E=convertUnits(h,m,"g");const j=E/100;return{calories:Math.round(d.per100g.calories*j),protein:Math.round(d.per100g.protein*j*10)/10,carbs:Math.round(d.per100g.carbs*j*10)/10,fat:Math.round(d.per100g.fat*j*10)/10,fiber:d.per100g.fiber?Math.round(d.per100g.fiber*j*10)/10:null,sugar:d.per100g.sugar?Math.round(d.per100g.sugar*j*10)/10:null,grams:Math.round(E)}}const COMMON_FOODS=[{id:"egg",name:"Egg (large)",brand:"Generic",servingSize:"1 large (50g)",servingSizeGrams:50,per100g:{calories:143,protein:12.6,carbs:.7,fat:9.5},perServing:{calories:72,protein:6.3,carbs:.4,fat:4.8}},{id:"chicken_breast",name:"Chicken Breast (cooked)",brand:"Generic",servingSize:"3 oz (85g)",servingSizeGrams:85,per100g:{calories:165,protein:31,carbs:0,fat:3.6},perServing:{calories:140,protein:26,carbs:0,fat:3.1}},{id:"rice_white",name:"White Rice (cooked)",brand:"Generic",servingSize:"1 cup (158g)",servingSizeGrams:158,per100g:{calories:130,protein:2.7,carbs:28,fat:.3},perServing:{calories:205,protein:4.3,carbs:44.2,fat:.4}},{id:"oats",name:"Oatmeal (dry)",brand:"Generic",servingSize:"1/2 cup (40g)",servingSizeGrams:40,per100g:{calories:389,protein:16.9,carbs:66,fat:6.9},perServing:{calories:156,protein:6.8,carbs:26.4,fat:2.8}},{id:"banana",name:"Banana (medium)",brand:"Generic",servingSize:"1 medium (118g)",servingSizeGrams:118,per100g:{calories:89,protein:1.1,carbs:23,fat:.3},perServing:{calories:105,protein:1.3,carbs:27,fat:.4}},{id:"apple",name:"Apple (medium)",brand:"Generic",servingSize:"1 medium (182g)",servingSizeGrams:182,per100g:{calories:52,protein:.3,carbs:14,fat:.2},perServing:{calories:95,protein:.5,carbs:25,fat:.3}},{id:"greek_yogurt",name:"Greek Yogurt (plain)",brand:"Generic",servingSize:"1 cup (227g)",servingSizeGrams:227,per100g:{calories:59,protein:10,carbs:3.6,fat:.7},perServing:{calories:134,protein:23,carbs:8.2,fat:1.6}},{id:"almonds",name:"Almonds",brand:"Generic",servingSize:"1 oz (28g)",servingSizeGrams:28,per100g:{calories:579,protein:21,carbs:22,fat:50},perServing:{calories:162,protein:6,carbs:6,fat:14}},{id:"salmon",name:"Salmon (cooked)",brand:"Generic",servingSize:"3 oz (85g)",servingSizeGrams:85,per100g:{calories:208,protein:20,carbs:0,fat:13},perServing:{calories:177,protein:17,carbs:0,fat:11}},{id:"broccoli",name:"Broccoli (cooked)",brand:"Generic",servingSize:"1 cup (156g)",servingSizeGrams:156,per100g:{calories:35,protein:2.4,carbs:7,fat:.4},perServing:{calories:55,protein:3.7,carbs:11,fat:.6}},{id:"avocado",name:"Avocado",brand:"Generic",servingSize:"1/2 avocado (68g)",servingSizeGrams:68,per100g:{calories:160,protein:2,carbs:9,fat:15},perServing:{calories:109,protein:1.4,carbs:6,fat:10}},{id:"protein_shake",name:"Protein Shake (whey)",brand:"Generic",servingSize:"1 scoop (30g)",servingSizeGrams:30,per100g:{calories:400,protein:80,carbs:10,fat:5},perServing:{calories:120,protein:24,carbs:3,fat:1.5}}];function LogMealModal({isOpen:d,onClose:h,onSave:m,mealPlan:E}){const[j,g]=reactExports.useState("main"),[N,k]=reactExports.useState(!1),[A,w]=reactExports.useState(null),[M,_]=reactExports.useState([]),[J,W]=reactExports.useState(""),[ie,q]=reactExports.useState([]),[L,Ee]=reactExports.useState(null),[ue,te]=reactExports.useState("1"),[K,me]=reactExports.useState("serving"),[re,F]=reactExports.useState(null),[U,Q]=reactExports.useState(""),[xe,Ce]=reactExports.useState(""),B=()=>["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][new Date().getDay()],Z=ee=>{if(!E?.week)return null;const Re=B(),je=E.week[Re];if(!je?.meals)return null;const Be={Breakfast:"breakfast",Lunch:"lunch",Dinner:"dinner",Snack:"snack","Pre-workout":"snack","Post-workout":"snack"}[ee]||ee.toLowerCase();return je.meals.find(Fe=>Fe.type===Be)},ge=ee=>{const Re={id:Date.now(),name:ee.title,brand:"From Meal Plan",amount:1,unit:"serving",calories:ee.calories,protein:ee.protein,carbs:ee.carbs,fat:ee.fat};_([Re])};reactExports.useEffect(()=>{d||(g("main"),_([]),W(""),q([]),Ee(null),te("1"),me("serving"),w(null),Q(""),Ce(""))},[d]),reactExports.useEffect(()=>{if(L){const ee=parseFloat(ue)||0,Re=calculateNutrition(L,ee,K);F(Re)}},[L,ue,K]);const I=async ee=>{g("main"),k(!0),w(null);try{const Re=await fetchProductByBarcode(ee);Re.success?(Ee(Re.product),te("1"),me(Re.product.servingSize||"serving"),g("product")):w(`Product not found for barcode: ${ee}`)}catch{w("Failed to fetch product. Please try again.")}finally{k(!1)}},ne=async()=>{if(J.trim()){k(!0),w(null);try{const ee=await searchProducts(J);ee.success?(q(ee.products),ee.products.length===0&&w("No products found. Try a different search term.")):w("Search failed. Please try again.")}catch{w("Search failed. Please try again.")}finally{k(!1)}}},le=ee=>{Ee(ee),te("1"),me(ee.servingSize||"serving"),g("product")},de=()=>{if(!L||!re)return;const ee={id:Date.now(),name:L.name,brand:L.brand,barcode:L.barcode,amount:parseFloat(ue)||1,unit:K,...re};_([...M,ee]),Ee(null),F(null),g("main")},ye=ee=>{_(M.filter(Re=>Re.id!==ee))},z=M.reduce((ee,Re)=>({calories:ee.calories+(Re.calories||0),protein:ee.protein+(Re.protein||0),carbs:ee.carbs+(Re.carbs||0),fat:ee.fat+(Re.fat||0)}),{calories:0,protein:0,carbs:0,fat:0}),D=()=>{if(M.length===0)return;const ee={name:xe||`Meal (${M.length} items)`,items:M,calories:Math.round(z.calories),protein:Math.round(z.protein*10)/10,carbs:Math.round(z.carbs*10)/10,fat:Math.round(z.fat*10)/10,loggedAt:new Date().toISOString()};m(ee),h()},G=()=>{U.trim()&&I(U.trim())},Ie=ee=>{const Re=ee.foods.map((je,Ve)=>({id:Date.now()+Ve,name:je.name,brand:"Photo Analysis",amount:1,unit:je.portion,calories:parseFloat(je.calories)||0,protein:parseFloat(je.protein)||0,carbs:parseFloat(je.carbs)||0,fat:parseFloat(je.fat)||0}));_([...M,...Re]),g("main")};return j==="photo"?jsxRuntimeExports.jsx(PhotoFoodLogger,{onLog:Ie,onClose:()=>g("main")}):j==="scanner"?jsxRuntimeExports.jsx(BarcodeScanner,{isOpen:!0,onScan:I,onClose:()=>g("main")}):j==="product"&&L?jsxRuntimeExports.jsx(Modal,{isOpen:d,onClose:()=>g("main"),title:"Add Food",size:"md",children:jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-4",children:[L.image?jsxRuntimeExports.jsx("img",{src:L.image,alt:L.name,className:"w-20 h-20 rounded-lg object-cover bg-dark-700"}):jsxRuntimeExports.jsx("div",{className:"w-20 h-20 rounded-lg bg-dark-700 flex items-center justify-center",children:jsxRuntimeExports.jsx(Utensils,{className:"w-8 h-8 text-gray-500"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1",children:[jsxRuntimeExports.jsx("h3",{className:"font-semibold text-white",children:L.name}),L.brand&&jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:L.brand}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Serving: ",L.servingSize]})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-dark-700 rounded-xl space-y-4",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-gray-300",children:"Serving Size"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Amount"}),jsxRuntimeExports.jsx("input",{type:"number",value:ue,onChange:ee=>te(ee.target.value),min:"0.1",step:"0.1",className:"w-full px-4 py-3 bg-dark-600 border border-dark-500 rounded-lg text-white text-lg font-medium focus:border-accent-primary focus:outline-none"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-xs text-gray-500 mb-1 block",children:"Unit"}),jsxRuntimeExports.jsx("select",{value:K,onChange:ee=>me(ee.target.value),className:"w-full px-4 py-3 bg-dark-600 border border-dark-500 rounded-lg text-white focus:border-accent-primary focus:outline-none appearance-none",children:SERVING_OPTIONS.map(ee=>jsxRuntimeExports.jsxs("option",{value:ee.value,children:[ee.icon," ",ee.label]},ee.value))})]})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap",children:[.5,1,1.5,2].map(ee=>jsxRuntimeExports.jsxs("button",{onClick:()=>te(ee.toString()),className:`px-3 py-1.5 rounded-lg text-sm transition-colors ${parseFloat(ue)===ee?"bg-accent-primary text-white":"bg-dark-600 text-gray-400 hover:bg-dark-500"}`,children:[ee," ",K==="serving"?"serving":K]},ee))})]}),re&&jsxRuntimeExports.jsx("div",{className:"p-4 bg-gradient-to-r from-accent-primary/10 to-accent-secondary/10 rounded-xl border border-accent-primary/20",children:jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-4 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-2xl font-bold text-white",children:re.calories}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Calories"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-accent-primary",children:[re.protein,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Protein"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-accent-warning",children:[re.carbs,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Carbs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-2xl font-bold text-accent-secondary",children:[re.fat,"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"Fat"})]})]})}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>g("main"),fullWidth:!0,children:"Cancel"}),jsxRuntimeExports.jsxs(Button,{onClick:de,fullWidth:!0,disabled:!re,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Add to Meal"]})]})]})}):j==="search"?jsxRuntimeExports.jsx(Modal,{isOpen:d,onClose:()=>g("main"),title:"Search Food",size:"md",children:jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("input",{type:"text",value:J,onChange:ee=>W(ee.target.value),onKeyPress:ee=>ee.key==="Enter"&&ne(),placeholder:"Search foods...",className:"w-full pl-10 pr-4 py-3 bg-dark-700 border border-dark-500 rounded-lg text-white focus:border-accent-primary focus:outline-none",autoFocus:!0})]}),jsxRuntimeExports.jsx(Button,{onClick:ne,disabled:N,children:N?jsxRuntimeExports.jsx(Loader2,{className:"w-5 h-5 animate-spin"}):"Search"})]}),A&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"w-5 h-5 text-red-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-red-400",children:A})]}),jsxRuntimeExports.jsx("div",{className:"max-h-80 overflow-y-auto space-y-2",children:ie.map((ee,Re)=>jsxRuntimeExports.jsxs("button",{onClick:()=>le(ee),className:"w-full p-3 bg-dark-700 rounded-lg flex items-center gap-3 hover:bg-dark-600 transition-colors text-left",children:[ee.image?jsxRuntimeExports.jsx("img",{src:ee.image,alt:"",className:"w-12 h-12 rounded-lg object-cover"}):jsxRuntimeExports.jsx("div",{className:"w-12 h-12 rounded-lg bg-dark-600 flex items-center justify-center",children:jsxRuntimeExports.jsx(Utensils,{className:"w-5 h-5 text-gray-500"})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-white font-medium truncate",children:ee.name}),ee.brand&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 truncate",children:ee.brand}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-400 mt-0.5",children:[ee.perServing.calories," cal  ",ee.perServing.protein,"g P"]})]}),jsxRuntimeExports.jsx(ChevronDown,{className:"w-5 h-5 text-gray-500 rotate-[-90deg]"})]},Re))}),ie.length===0&&!N&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-gray-400 mb-3",children:"Common Foods"}),jsxRuntimeExports.jsx("div",{className:"grid grid-cols-2 gap-2",children:COMMON_FOODS.slice(0,8).map(ee=>jsxRuntimeExports.jsxs("button",{onClick:()=>le(ee),className:"p-3 bg-dark-700 rounded-lg text-left hover:bg-dark-600 transition-colors",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-white truncate",children:ee.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[ee.perServing.calories," cal"]})]},ee.id))})]}),jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:()=>g("main"),fullWidth:!0,children:"Back"})]})}):jsxRuntimeExports.jsx(Modal,{isOpen:d,onClose:h,title:"Log Meal",size:"md",children:jsxRuntimeExports.jsxs("div",{className:"space-y-5",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>g("photo"),className:"w-full p-4 bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 border border-accent-primary/30 rounded-xl flex items-center gap-4 hover:border-accent-primary/50 transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"w-14 h-14 bg-accent-primary/20 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Camera,{className:"w-7 h-7 text-accent-primary"})}),jsxRuntimeExports.jsxs("div",{className:"text-left flex-1",children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium text-lg",children:" Snap Your Meal"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400",children:"AI analyzes your photo instantly"})]}),jsxRuntimeExports.jsx("span",{className:"px-2 py-1 text-xs bg-accent-primary/20 text-accent-primary rounded-full",children:"Recommended"})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>g("scanner"),className:"p-4 bg-dark-700 border border-dark-500 rounded-xl flex flex-col items-center gap-2 hover:border-dark-400 transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Barcode,{className:"w-6 h-6 text-gray-400"})}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Scan Barcode"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Packaged foods"})]}),jsxRuntimeExports.jsxs("button",{onClick:()=>g("search"),className:"p-4 bg-dark-700 border border-dark-500 rounded-xl flex flex-col items-center gap-2 hover:border-dark-400 transition-colors",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 bg-dark-600 rounded-full flex items-center justify-center",children:jsxRuntimeExports.jsx(Search,{className:"w-6 h-6 text-gray-400"})}),jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"Search Food"}),jsxRuntimeExports.jsx("span",{className:"text-xs text-gray-400",children:"Browse database"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Or enter barcode manually:"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsx("input",{type:"text",value:U,onChange:ee=>Q(ee.target.value),placeholder:"Enter barcode number...",className:"flex-1 px-3 py-2 bg-dark-600 border border-dark-500 rounded-lg text-white text-sm focus:border-accent-primary focus:outline-none"}),jsxRuntimeExports.jsx(Button,{size:"sm",onClick:G,disabled:!U.trim()||N,children:N?jsxRuntimeExports.jsx(Loader2,{className:"w-4 h-4 animate-spin"}):"Look up"})]})]}),A&&jsxRuntimeExports.jsxs("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg flex items-center gap-2",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"w-5 h-5 text-red-400 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-red-400",children:A}),jsxRuntimeExports.jsx("button",{onClick:()=>w(null),className:"ml-auto",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4 text-red-400"})})]}),M.length>0&&jsxRuntimeExports.jsxs("div",{className:"space-y-3",children:[jsxRuntimeExports.jsxs("h4",{className:"text-sm font-medium text-gray-300 flex items-center justify-between",children:[jsxRuntimeExports.jsxs("span",{children:["Food Items (",M.length,")"]}),jsxRuntimeExports.jsxs("span",{className:"text-accent-primary",children:[Math.round(z.calories)," cal"]})]}),jsxRuntimeExports.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:M.map(ee=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg flex items-center justify-between",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 min-w-0",children:[jsxRuntimeExports.jsx("p",{className:"text-white text-sm font-medium truncate",children:ee.name}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-gray-500",children:[ee.amount," ",ee.unit,"  ",ee.calories," cal  ",ee.protein,"g P"]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>ye(ee.id),className:"p-2 text-gray-500 hover:text-red-400 transition-colors",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]},ee.id))}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-success/10 to-accent-primary/10 rounded-xl border border-accent-success/20",children:[jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Meal Totals"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-4 gap-3 text-center",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("p",{className:"text-xl font-bold text-white",children:Math.round(z.calories)}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"cal"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-xl font-bold text-accent-primary",children:[Math.round(z.protein),"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"protein"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-xl font-bold text-accent-warning",children:[Math.round(z.carbs),"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"carbs"})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("p",{className:"text-xl font-bold text-accent-secondary",children:[Math.round(z.fat),"g"]}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400",children:"fat"})]})]})]})]}),E&&jsxRuntimeExports.jsxs("div",{className:"p-4 bg-gradient-to-r from-accent-secondary/10 to-accent-primary/10 rounded-xl border border-accent-secondary/20",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[jsxRuntimeExports.jsx(Utensils,{className:"w-4 h-4 text-accent-secondary"}),jsxRuntimeExports.jsx("h4",{className:"text-sm font-medium text-white",children:"Quick Fill from Today's Plan"})]}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap",children:["Breakfast","Lunch","Dinner","Snack"].map(ee=>{const Re=Z(ee);return Re?jsxRuntimeExports.jsxs("button",{onClick:()=>{ge(Re),Ce(ee)},className:"px-3 py-2 bg-dark-700 border border-accent-secondary/30 rounded-lg text-left hover:border-accent-secondary transition-colors",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-white font-medium",children:ee}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-400 truncate max-w-[120px]",children:Re.title}),jsxRuntimeExports.jsxs("p",{className:"text-xs text-accent-secondary mt-0.5",children:[Re.calories," cal  ",Re.protein,"g P"]})]},ee):null})}),!Z("Breakfast")&&!Z("Lunch")&&!Z("Dinner")&&!Z("Snack")&&jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500",children:"No meals planned for today"})]}),M.length>0&&jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Meal Type (optional)"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2 flex-wrap",children:["Breakfast","Lunch","Dinner","Snack","Pre-workout","Post-workout"].map(ee=>jsxRuntimeExports.jsx("button",{onClick:()=>Ce(xe===ee?"":ee),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${xe===ee?"bg-accent-primary text-white":"bg-dark-700 border border-dark-500 text-gray-300 hover:border-accent-primary"}`,children:ee},ee))})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:h,fullWidth:!0,children:"Cancel"}),jsxRuntimeExports.jsxs(Button,{onClick:D,fullWidth:!0,disabled:M.length===0,children:[jsxRuntimeExports.jsx(CheckCircle,{className:"w-4 h-4 mr-2"}),"Log Meal"]})]})]})})}const COMMON_EXERCISES=["Ab Wheel Rollout","Arnold Press","Back Extension","Band Pull Apart","Barbell Bent Over Row","Barbell Curl","Barbell Hip Thrust","Barbell Lunge","Barbell Row","Barbell Shrug","Barbell Squat","Battle Ropes","Bench Dip","Bench Press","Bent Over Dumbbell Row","Bicycle Crunch","Bird Dog","Box Jump","Bulgarian Split Squat","Burpee","Cable Crossover","Cable Crunch","Cable Face Pull","Cable Fly","Cable Kickback","Cable Lateral Raise","Cable Pull Through","Cable Row","Cable Tricep Extension","Cable Woodchop","Calf Press","Calf Raise","Chest Dip","Chest Fly","Chin Up","Clean","Clean and Jerk","Close Grip Bench Press","Concentration Curl","Crunch","Dead Bug","Deadlift","Decline Bench Press","Decline Crunch","Deficit Deadlift","Dip","Dumbbell Bench Press","Dumbbell Bulgarian Split Squat","Dumbbell Curl","Dumbbell Fly","Dumbbell Front Raise","Dumbbell Lateral Raise","Dumbbell Lunge","Dumbbell Overhead Press","Dumbbell Pullover","Dumbbell Romanian Deadlift","Dumbbell Row","Dumbbell Shrug","Dumbbell Squat","Dumbbell Step Up","Dumbbell Tricep Extension","EZ Bar Curl","EZ Bar Skull Crusher","Face Pull","Farmer's Walk","Floor Press","Front Raise","Front Squat","Glute Bridge","Goblet Squat","Good Morning","Hack Squat","Hammer Curl","Hanging Knee Raise","Hanging Leg Raise","High Pull","Hip Abduction","Hip Adduction","Hip Thrust","Incline Bench Press","Incline Dumbbell Curl","Incline Dumbbell Fly","Incline Dumbbell Press","Inverted Row","Jump Rope","Jump Squat","Kettlebell Clean","Kettlebell Snatch","Kettlebell Swing","Kettlebell Turkish Get Up","Kneeling Cable Crunch","Landmine Press","Landmine Row","Lat Pulldown","Lateral Raise","Leg Curl","Leg Extension","Leg Press","Leg Raise","Lunges","Lying Leg Curl","Lying Tricep Extension","Machine Chest Press","Machine Fly","Machine Row","Machine Shoulder Press","Medicine Ball Slam","Military Press","Mountain Climber","Muscle Up","Overhead Press","Overhead Squat","Pallof Press","Pause Squat","Pec Deck","Pendlay Row","Pistol Squat","Plank","Power Clean","Preacher Curl","Press Up","Pull Up","Push Press","Push Up","Rack Pull","Rear Delt Fly","Reverse Crunch","Reverse Fly","Reverse Grip Lat Pulldown","Reverse Lunge","Romanian Deadlift","Rope Climb","Rope Tricep Pushdown","Rowing Machine","Russian Twist","Seated Cable Row","Seated Calf Raise","Seated Dumbbell Press","Seated Leg Curl","Shoulder Press","Side Bend","Side Plank","Single Arm Dumbbell Row","Single Leg Deadlift","Single Leg Squat","Sissy Squat","Sit Up","Skull Crusher","Sled Push","Smith Machine Squat","Snatch","Spider Curl","Split Squat","Squat","Standing Calf Raise","Step Up","Stiff Leg Deadlift","Sumo Deadlift","Sumo Squat","Superman","T-Bar Row","Thruster","Toe Touch","Trap Bar Deadlift","Tricep Dip","Tricep Kickback","Tricep Pushdown","Upright Row","V-Up","Walking Lunge","Wall Ball","Wide Grip Lat Pulldown","Wide Grip Pull Up","Wrist Curl","Zercher Squat","Zottman Curl"];function LogWorkoutModal({isOpen:d,onClose:h,onSave:m,program:E}){const[j,g]=reactExports.useState("strength"),[N,k]=reactExports.useState(""),[A,w]=reactExports.useState("AM"),[M,_]=reactExports.useState([]),[J,W]=reactExports.useState(""),[ie,q]=reactExports.useState("7"),[L,Ee]=reactExports.useState(null),[ue,te]=reactExports.useState(null),[K,me]=reactExports.useState(null),[re,F]=reactExports.useState(""),U=reactExports.useRef(null),Q=I=>{const ne=I.target.files[0];if(ne){const le=new FileReader;le.onload=de=>te(de.target.result),le.readAsDataURL(ne)}},xe=()=>{_([...M,{id:Date.now(),name:"",sets:"",reps:"",weight:""}]),me(null),F("")},Ce=(I,ne,le)=>{_(M.map(de=>de.id===I?{...de,[ne]:le}:de)),ne==="name"&&(me(null),F(""))},B=I=>_(M.filter(ne=>ne.id!==I)),Z=()=>re?COMMON_EXERCISES.filter(I=>I.toLowerCase().includes(re.toLowerCase())):COMMON_EXERCISES,ge=()=>{m({type:j,duration:parseInt(N)||0,sessionTime:A,exercises:M.filter(I=>I.name),notes:J,screenshot:ue,overallRpe:parseInt(ie),day:new Date().getDay()||7,loggedAt:new Date().toISOString()}),g("strength"),k(""),w("AM"),_([]),W(""),q("7"),Ee(null),te(null),me(null),F(""),h()};return jsxRuntimeExports.jsx(Modal,{isOpen:d,onClose:h,title:"Log Workout",size:"lg",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Type"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:["strength","cardio","hiit"].map(I=>jsxRuntimeExports.jsxs("button",{onClick:()=>g(I),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${j===I?"bg-accent-primary border-accent-primary text-white":"bg-dark-700 border-dark-500 text-gray-400"}`,children:[I==="strength"?"":I==="cardio"?"":""," ",I.charAt(0).toUpperCase()+I.slice(1)]},I))})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Session"}),jsxRuntimeExports.jsx("div",{className:"flex gap-2",children:["AM","PM"].map(I=>jsxRuntimeExports.jsxs("button",{onClick:()=>w(I),className:`flex-1 py-2 px-3 rounded-lg border text-sm ${A===I?I==="AM"?"bg-yellow-500/20 border-yellow-500 text-yellow-400":"bg-blue-500/20 border-blue-500 text-blue-400":"bg-dark-700 border-dark-500 text-gray-400"}`,children:[I==="AM"?"":""," ",I]},I))})]})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[jsxRuntimeExports.jsx(Input,{label:"Duration (min)",type:"number",value:N,onChange:I=>k(I.target.value),placeholder:"60"}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"RPE"}),jsxRuntimeExports.jsx("select",{value:ie,onChange:I=>q(I.target.value),className:"w-full px-4 py-2.5 bg-dark-700 border border-dark-500 rounded-lg text-white",children:[6,7,8,9,10].map(I=>jsxRuntimeExports.jsxs("option",{value:I,children:["RPE ",I]},I))})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-3",children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400",children:"Exercises"}),jsxRuntimeExports.jsxs(Button,{variant:"ghost",size:"sm",onClick:xe,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-1"}),"Add"]})]}),M.length>0?jsxRuntimeExports.jsx("div",{className:"space-y-3",children:M.map((I,ne)=>jsxRuntimeExports.jsxs("div",{className:"p-3 bg-dark-700 rounded-lg border border-dark-600",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-500",children:["#",ne+1]}),jsxRuntimeExports.jsxs("div",{className:"flex-1 relative",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-sm cursor-pointer hover:border-dark-400",onClick:()=>{me(K===I.id?null:I.id),F(I.name||"")},children:[jsxRuntimeExports.jsx("span",{className:I.name?"text-white":"text-gray-500",children:I.name||"Select exercise..."}),jsxRuntimeExports.jsx(ChevronDown,{className:"w-4 h-4 text-gray-400"})]}),K===I.id&&jsxRuntimeExports.jsxs("div",{className:"absolute z-50 top-full left-0 right-0 mt-1 bg-dark-700 border border-dark-500 rounded-lg shadow-xl max-h-60 overflow-hidden",children:[jsxRuntimeExports.jsx("div",{className:"p-2 border-b border-dark-600",children:jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Search,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-500"}),jsxRuntimeExports.jsx("input",{type:"text",value:re,onChange:le=>F(le.target.value),placeholder:"Type to search...",className:"w-full pl-8 pr-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500 focus:outline-none focus:border-accent-primary",autoFocus:!0,onClick:le=>le.stopPropagation()})]})}),jsxRuntimeExports.jsx("div",{className:"max-h-48 overflow-y-auto",children:Z().length>0?Z().map(le=>jsxRuntimeExports.jsx("button",{className:"w-full text-left px-3 py-2 text-sm text-white hover:bg-dark-600 transition-colors",onClick:de=>{de.stopPropagation(),Ce(I.id,"name",le)},children:le},le)):jsxRuntimeExports.jsxs("div",{className:"px-3 py-2 text-sm text-gray-500",children:['No matches. Use custom name: "',re,'"',jsxRuntimeExports.jsxs("button",{className:"block w-full mt-2 px-3 py-1.5 bg-accent-primary/20 text-accent-primary rounded text-xs",onClick:le=>{le.stopPropagation(),Ce(I.id,"name",re)},children:['Use "',re,'"']})]})})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>B(I.id),className:"p-1.5 text-gray-500 hover:text-accent-danger",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4"})})]}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[jsxRuntimeExports.jsx("input",{type:"number",value:I.sets,onChange:le=>Ce(I.id,"sets",le.target.value),placeholder:"Sets",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("input",{type:"text",value:I.reps,onChange:le=>Ce(I.id,"reps",le.target.value),placeholder:"Reps",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"}),jsxRuntimeExports.jsx("input",{type:"text",value:I.weight,onChange:le=>Ce(I.id,"weight",le.target.value),placeholder:"Weight",className:"px-3 py-1.5 bg-dark-600 border border-dark-500 rounded text-white text-sm placeholder-gray-500"})]})]},I.id))}):jsxRuntimeExports.jsxs("div",{className:"p-6 text-center bg-dark-700 rounded-lg border border-dashed border-dark-500",children:[jsxRuntimeExports.jsx(Dumbbell,{className:"w-8 h-8 text-gray-600 mx-auto mb-2"}),jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-500",children:'Click "Add" to track exercises'})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"text-sm font-medium text-gray-400 mb-2 block",children:"Screenshot (Optional)"}),jsxRuntimeExports.jsx("input",{ref:U,type:"file",accept:"image/*",onChange:Q,className:"hidden"}),ue?jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx("img",{src:ue,alt:"Preview",className:"w-full h-40 object-cover rounded-lg"}),jsxRuntimeExports.jsx("button",{onClick:()=>te(null),className:"absolute top-2 right-2 p-2 bg-dark-900/80 rounded-lg",children:jsxRuntimeExports.jsx(Trash2,{className:"w-4 h-4 text-white"})})]}):jsxRuntimeExports.jsxs("button",{onClick:()=>U.current?.click(),className:"w-full p-6 border-2 border-dashed border-dark-500 rounded-lg hover:border-accent-primary flex flex-col items-center gap-2",children:[jsxRuntimeExports.jsx(Camera,{className:"w-6 h-6 text-gray-400"}),jsxRuntimeExports.jsx("span",{className:"text-sm text-gray-400",children:"Upload screenshot"})]})]}),jsxRuntimeExports.jsxs("div",{className:"flex gap-3",children:[jsxRuntimeExports.jsx(Button,{variant:"secondary",onClick:h,fullWidth:!0,children:"Cancel"}),jsxRuntimeExports.jsxs(Button,{onClick:ge,fullWidth:!0,children:[jsxRuntimeExports.jsx(Plus,{className:"w-4 h-4 mr-2"}),"Log Workout"]})]})]})})}function SignUpModal({isOpen:d,onClose:h,onSuccess:m,onShowPrivacy:E,onShowTerms:j}){const[g,N]=reactExports.useState(""),[k,A]=reactExports.useState(""),[w,M]=reactExports.useState(""),[_,J]=reactExports.useState(""),[W,ie]=reactExports.useState(!1),[q,L]=reactExports.useState(null),[Ee,ue]=reactExports.useState(!1);reactExports.useEffect(()=>{d||(N(""),A(""),M(""),J(""),L(null),ue(!1))},[d]);const te=F=>{const U=F.target.value.replace(/\D/g,"");M(U),U.length<=3?J(U):U.length<=6?J(`(${U.slice(0,3)}) ${U.slice(3)}`):J(`(${U.slice(0,3)}) ${U.slice(3,6)}-${U.slice(6,10)}`)},K=F=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(F),me=async()=>{if(!g.trim()){L("Please enter your name");return}if(!k.trim()||!K(k)){L("Please enter a valid email address");return}if(w.length<10){L("Please enter a valid 10-digit phone number");return}if(!Ee){L("Please agree to the Terms & Privacy Policy");return}ie(!0),L(null);try{const F={name:g.trim(),email:k.trim().toLowerCase(),phone:`+1${w}`,createdAt:new Date().toISOString()};localStorage.setItem("motus_user_signup",JSON.stringify(F)),setTimeout(()=>{ie(!1),m?.(F),h()},500)}catch{ie(!1),L("Something went wrong. Please try again.")}},re=g.trim()&&K(k)&&w.length>=10&&Ee;return jsxRuntimeExports.jsx(Modal,{isOpen:d,onClose:h,title:"",size:"sm",children:jsxRuntimeExports.jsxs("div",{className:"space-y-6",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto rounded-full bg-gradient-to-br from-accent-primary to-accent-secondary flex items-center justify-center mb-4",children:jsxRuntimeExports.jsx(User,{className:"w-8 h-8 text-dark-950"})}),jsxRuntimeExports.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Create Your Account"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-sm",children:"Start your fitness journey today"})]}),jsxRuntimeExports.jsxs("div",{className:"space-y-4",children:[jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"Full Name"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(User,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("input",{type:"text",value:g,onChange:F=>N(F.target.value),placeholder:"John Doe",className:"w-full pl-12 pr-4 py-3.5 bg-dark-700 border border-dark-500 rounded-xl text-white focus:border-accent-primary focus:outline-none",autoFocus:!0})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"Email Address"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Mail,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("input",{type:"email",value:k,onChange:F=>A(F.target.value),placeholder:"john@example.com",className:"w-full pl-12 pr-4 py-3.5 bg-dark-700 border border-dark-500 rounded-xl text-white focus:border-accent-primary focus:outline-none"})]})]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1.5",children:"Phone Number"}),jsxRuntimeExports.jsxs("div",{className:"relative",children:[jsxRuntimeExports.jsx(Phone,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500"}),jsxRuntimeExports.jsx("span",{className:"absolute left-12 top-1/2 -translate-y-1/2 text-gray-400",children:"+1"}),jsxRuntimeExports.jsx("input",{type:"tel",value:_,onChange:te,placeholder:"(555) 555-5555",className:"w-full pl-20 pr-4 py-3.5 bg-dark-700 border border-dark-500 rounded-xl text-white focus:border-accent-primary focus:outline-none",maxLength:14})]})]}),jsxRuntimeExports.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[jsxRuntimeExports.jsxs("div",{className:"relative mt-0.5",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",checked:Ee,onChange:F=>ue(F.target.checked),className:"sr-only"}),jsxRuntimeExports.jsx("div",{className:`w-5 h-5 rounded border-2 flex items-center justify-center transition-colors ${Ee?"bg-accent-primary border-accent-primary":"border-dark-500 bg-dark-700"}`,children:Ee&&jsxRuntimeExports.jsx(CheckCircle,{className:"w-3.5 h-3.5 text-dark-950"})})]}),jsxRuntimeExports.jsxs("span",{className:"text-sm text-gray-400",children:["I agree to the"," ",jsxRuntimeExports.jsx("button",{type:"button",onClick:F=>{F.preventDefault(),j?.()},className:"text-accent-primary hover:underline",children:"Terms of Service"})," ","and"," ",jsxRuntimeExports.jsx("button",{type:"button",onClick:F=>{F.preventDefault(),E?.()},className:"text-accent-primary hover:underline",children:"Privacy Policy"})]})]}),q&&jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 text-red-400 text-sm p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"w-4 h-4 flex-shrink-0"}),jsxRuntimeExports.jsx("span",{children:q})]}),jsxRuntimeExports.jsx(Button,{onClick:me,disabled:!re||W,fullWidth:!0,size:"lg",children:W?jsxRuntimeExports.jsx(Loader2,{className:"w-5 h-5 animate-spin"}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Continue",jsxRuntimeExports.jsx(ArrowRight,{className:"w-5 h-5 ml-2"})]})})]}),jsxRuntimeExports.jsxs("p",{className:"text-center text-sm text-gray-500",children:["Already have an account?"," ",jsxRuntimeExports.jsx("button",{className:"text-accent-primary hover:underline",children:"Sign in"})]})]})})}function SubscriptionModal({isOpen:d,onClose:h,onSuccess:m}){const[E,j]=reactExports.useState(!1),[g,N]=reactExports.useState(null);if(!d)return null;const k=!1,A=async()=>{j(!0),N(null);try{if(!k){setTimeout(()=>{m?.({customerId:"demo_customer_"+Date.now(),subscriptionId:"demo_sub_"+Date.now(),currentPeriodEnd:new Date(Date.now()+720*60*60*1e3).toISOString()}),j(!1)},1500);return}const w=await fetch("/api/stripe/create-checkout-session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({priceId:void 0,successUrl:`${window.location.origin}/subscription-success`,cancelUrl:window.location.href})}),{url:M,error:_}=await w.json();if(_)throw new Error(_);window.location.href=M}catch(w){console.error("Subscription error:",w),N(w.message||"Failed to process subscription"),j(!1)}};return jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/70",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-md bg-dark-800 rounded-xl shadow-2xl border border-dark-600 overflow-hidden",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-600",children:[jsxRuntimeExports.jsx("h3",{className:"text-lg font-semibold text-white",children:"Subscribe to MOTUS"}),jsxRuntimeExports.jsx("button",{onClick:h,className:"p-1 text-gray-400 hover:text-white transition-colors",children:jsxRuntimeExports.jsx(X,{className:"w-5 h-5"})})]}),jsxRuntimeExports.jsxs("div",{className:"p-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-dark-700 rounded-xl p-4 mb-6 border border-dark-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsx("span",{className:"text-white font-medium",children:"MOTUS Premium"}),jsxRuntimeExports.jsx("span",{className:"text-accent-primary font-bold",children:"$5/month"})]}),jsxRuntimeExports.jsxs("ul",{className:"text-sm text-gray-400 space-y-1",children:[jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-accent-success"}),"Personalized training program"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-accent-success"}),"Custom meal plans & recipes"]}),jsxRuntimeExports.jsxs("li",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsx(Check,{className:"w-4 h-4 text-accent-success"}),"Progress tracking & analytics"]})]})]}),jsxRuntimeExports.jsxs("div",{className:"mb-6",children:[jsxRuntimeExports.jsx("p",{className:"text-sm text-gray-400 mb-3",children:"Accepted payment methods"}),jsxRuntimeExports.jsxs("div",{className:"flex gap-2",children:[jsxRuntimeExports.jsxs("div",{className:"flex-1 bg-dark-700 rounded-lg p-3 flex items-center justify-center border border-dark-500",children:[jsxRuntimeExports.jsx("svg",{className:"h-6",viewBox:"0 0 50 20",fill:"white",children:jsxRuntimeExports.jsx("path",{d:"M9.5 5.3c-.5.6-1.3 1.1-2.1 1-.1-.8.3-1.6.7-2.1.5-.6 1.4-1 2-1 .1.8-.2 1.6-.6 2.1zm.6 1.1c-1.2-.1-2.2.7-2.7.7-.6 0-1.4-.6-2.4-.6-1.2 0-2.3.7-2.9 1.8-1.3 2.2-.3 5.4.9 7.2.6.9 1.3 1.8 2.3 1.8.9 0 1.3-.6 2.4-.6 1.1 0 1.4.6 2.4.6 1 0 1.6-.9 2.2-1.8.7-1 1-2 1-2-.1 0-1.9-.7-1.9-2.9 0-1.8 1.5-2.7 1.6-2.8-.9-1.3-2.3-1.4-2.9-1.4z"})}),jsxRuntimeExports.jsx("span",{className:"ml-1 text-white text-sm font-medium",children:"Pay"})]}),jsxRuntimeExports.jsx("div",{className:"flex-1 bg-dark-700 rounded-lg p-3 flex items-center justify-center border border-dark-500",children:jsxRuntimeExports.jsx("svg",{className:"h-5",viewBox:"0 0 40 16",fill:"white",children:jsxRuntimeExports.jsx("path",{d:"M19.6 7.8v4.5h-1.4V3h3.7c.9 0 1.7.3 2.3.9.6.6.9 1.3.9 2.2 0 .9-.3 1.6-.9 2.2-.6.6-1.4.9-2.3.9h-2.3zm0-3.5v2.3h2.4c.5 0 .9-.2 1.2-.5.3-.3.5-.7.5-1.2s-.2-.9-.5-1.2c-.3-.3-.7-.5-1.2-.5h-2.4z"})})}),jsxRuntimeExports.jsxs("div",{className:"flex-1 bg-dark-700 rounded-lg p-3 flex items-center justify-center border border-dark-500",children:[jsxRuntimeExports.jsx(CreditCard,{className:"w-5 h-5 text-white"}),jsxRuntimeExports.jsx("span",{className:"ml-1 text-white text-sm",children:"Card"})]})]})]}),g&&jsxRuntimeExports.jsxs("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg flex items-center gap-2 text-red-400 text-sm",children:[jsxRuntimeExports.jsx(AlertCircle,{className:"w-4 h-4 flex-shrink-0"}),g]}),jsxRuntimeExports.jsx("button",{onClick:A,disabled:E,className:"w-full py-3 px-6 bg-accent-primary hover:bg-accent-primary/90 disabled:opacity-50 disabled:cursor-not-allowed text-dark-900 font-semibold rounded-lg transition-colors flex items-center justify-center gap-2",children:E?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Loader2,{className:"w-5 h-5 animate-spin"}),"Processing..."]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CreditCard,{className:"w-5 h-5"}),"Subscribe - $5/month"]})}),jsxRuntimeExports.jsx("p",{className:"text-xs text-amber-400 text-center mt-3",children:" Demo mode: Stripe not configured. Add VITE_STRIPE_PUBLIC_KEY to enable real payments."}),jsxRuntimeExports.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"By subscribing, you agree to our Terms of Service and Privacy Policy. You can cancel anytime from your profile settings."})]})]})})}function PaywallOverlay({isVisible:d,onClose:h,onSuccess:m,program:E}){const{referralCode:j,referralCount:g,referralsNeeded:N,activateTylersFriend:k,bypassPaywall:A}=useSubscription(),[w,M]=reactExports.useState(!1),[_,J]=reactExports.useState(!1),[W,ie]=reactExports.useState(["","",""]),[q,L]=reactExports.useState(!1),[Ee,ue]=reactExports.useState(!1),[te,K]=reactExports.useState(null);if(!d||A)return null;const me=ye=>{M(!1),m?.(ye)},re=()=>{k(),h?.()},F=window.location.origin,U=j?`${F}?ref=${j}`:F,Q=()=>{navigator.clipboard.writeText(U),J(!0),setTimeout(()=>J(!1),2e3)},xe=(ye,z)=>{const D=[...W];D[ye]=z,ie(D)},Ce=W.filter(ye=>ye&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(ye)),B=async()=>{if(Ce.length===0)return;const ye=encodeURIComponent("Join me on MOTUS - Your AI Fitness Coach"),z=encodeURIComponent(`Hey! I've been using MOTUS to crush my fitness goals and thought you'd love it too.

It creates personalized workout and meal plans just for you.

Sign up here: ${U}

Let's get after it! `);window.open(`mailto:${Ce.join(",")}?subject=${ye}&body=${z}`),L(!0)},Z=()=>{navigator.clipboard.writeText(` Join me on MOTUS! Get your personalized AI fitness program: ${U}`),J(!0),setTimeout(()=>J(!1),2e3),window.open("https://instagram.com/direct/inbox/","_blank")},ge=()=>{ue(!0)},ne=(()=>{if(!E)return{name:"Fitness Program",duration:"12 weeks",description:"Personalized fitness and nutrition program"};const ye=E.name||E.title||(E.goal?.primary==="endurance"?"Running Program":E.goal?.primary==="strength"?"Strength Program":"Fitness Program"),z=E.duration?`${E.duration} week`:"12 week";let D="";const G=E.goal?.primary?.toLowerCase()||"";return G.includes("endurance")||G.includes("running")||G.includes("cardio")?D="Personalized endurance and cardio program":G.includes("strength")||G.includes("muscle")||G.includes("power")?D="Personalized strength and muscle building program":G.includes("weight")||G.includes("fat")||G.includes("lean")?D="Personalized body composition program":G.includes("hybrid")||G.includes("general")?D="Personalized hybrid training program":D="Personalized fitness and nutrition program",{name:ye,duration:z,description:D}})(),le=g||0,de=le/3*100;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-lg bg-dark-800 rounded-2xl shadow-2xl border border-dark-600 overflow-hidden max-h-[85vh] flex flex-col",children:[jsxRuntimeExports.jsxs("div",{className:"relative bg-gradient-to-r from-accent-primary/20 to-accent-secondary/20 p-4 text-center flex-shrink-0",children:[jsxRuntimeExports.jsx("div",{className:"w-10 h-10 mx-auto mb-2 rounded-full bg-accent-primary/20 flex items-center justify-center",children:jsxRuntimeExports.jsx(Lock,{className:"w-5 h-5 text-accent-primary"})}),jsxRuntimeExports.jsx("h2",{className:"text-lg font-bold text-white",children:"Unlock Your Full Program"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs",children:"Your personalized training program is ready!"})]}),jsxRuntimeExports.jsxs("div",{className:"overflow-y-auto flex-1 p-4 space-y-3 pb-6",children:[jsxRuntimeExports.jsxs("div",{className:"bg-dark-700 rounded-xl p-3 border border-dark-500",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(CreditCard,{className:"w-4 h-4 text-accent-primary"}),"Subscribe"]}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("span",{className:"text-lg font-bold text-white",children:"$5"}),jsxRuntimeExports.jsx("span",{className:"text-gray-400 text-xs",children:"/mo"})]})]}),jsxRuntimeExports.jsx("button",{onClick:()=>M(!0),className:"w-full py-2 px-4 bg-accent-primary hover:bg-accent-primary/90 text-dark-900 font-semibold rounded-lg text-sm",children:"Subscribe Now"})]}),jsxRuntimeExports.jsxs("div",{className:"relative py-1",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-dark-600"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center",children:jsxRuntimeExports.jsx("span",{className:"px-2 bg-dark-800 text-gray-500 text-xs",children:"or"})})]}),jsxRuntimeExports.jsxs("div",{className:"bg-dark-700/50 rounded-xl p-3 border border-accent-secondary/30",children:[jsxRuntimeExports.jsxs("div",{className:"flex items-center justify-between mb-2",children:[jsxRuntimeExports.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[jsxRuntimeExports.jsx(Users,{className:"w-4 h-4 text-accent-secondary"}),"Share With Friends"]}),jsxRuntimeExports.jsx("span",{className:"bg-accent-success/20 text-accent-success text-[10px] font-bold px-2 py-0.5 rounded-full",children:"FREE MONTH"})]}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs mb-2",children:"Share with 3 friends or post to your Story!"}),jsxRuntimeExports.jsxs("div",{className:"mb-3",children:[jsxRuntimeExports.jsxs("div",{className:"flex justify-between text-[10px] mb-1",children:[jsxRuntimeExports.jsx("span",{className:"text-gray-400",children:"Progress"}),jsxRuntimeExports.jsxs("span",{className:"text-white",children:[le,"/3"]})]}),jsxRuntimeExports.jsx("div",{className:"h-1 bg-dark-600 rounded-full overflow-hidden",children:jsxRuntimeExports.jsx("div",{className:"h-full bg-gradient-to-r from-accent-secondary to-accent-success rounded-full",style:{width:`${de}%`}})})]}),te?jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsx("button",{onClick:()=>K(null),className:"text-[10px] text-gray-400",children:" Back"}),W.map((ye,z)=>jsxRuntimeExports.jsx("input",{type:"email",placeholder:`Friend ${z+1}'s email`,value:ye,onChange:D=>xe(z,D.target.value),className:"w-full px-2 py-1.5 bg-dark-600 border border-dark-500 rounded text-white placeholder-gray-500 text-xs"},z)),jsxRuntimeExports.jsx("button",{onClick:B,disabled:Ce.length===0,className:`w-full py-2 rounded text-xs font-medium ${Ce.length>0?"bg-accent-secondary text-dark-900":"bg-dark-600 text-gray-500"}`,children:q?"Sent!":`Send to ${Ce.length}`})]}):jsxRuntimeExports.jsxs("div",{className:"space-y-2",children:[jsxRuntimeExports.jsxs("button",{onClick:ge,className:"w-full py-2.5 px-3 bg-gradient-to-r from-purple-600 via-pink-500 to-orange-400 text-white font-semibold rounded-lg text-sm flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Instagram,{className:"w-4 h-4"}),"Share to Story",jsxRuntimeExports.jsx(Sparkles,{className:"w-3 h-3"})]}),jsxRuntimeExports.jsx("p",{className:"text-[10px] text-center text-accent-success",children:" Instant unlock!"}),jsxRuntimeExports.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[jsxRuntimeExports.jsxs("button",{onClick:()=>K("email"),className:"py-2 px-2 bg-dark-600 text-white rounded-lg text-xs flex items-center justify-center gap-1",children:[jsxRuntimeExports.jsx(Mail,{className:"w-3 h-3"}),"Email"]}),jsxRuntimeExports.jsxs("button",{onClick:Z,className:"py-2 px-2 bg-dark-600 text-white rounded-lg text-xs flex items-center justify-center gap-1",children:[jsxRuntimeExports.jsx(Send,{className:"w-3 h-3"}),"DMs"]})]}),_&&jsxRuntimeExports.jsx("p",{className:"text-[10px] text-center text-accent-success",children:" Copied!"})]}),jsxRuntimeExports.jsxs("button",{onClick:Q,className:"w-full mt-2 py-1 text-gray-400 text-[10px] flex items-center justify-center gap-1",children:[jsxRuntimeExports.jsx(Copy,{className:"w-2.5 h-2.5"}),_?"Copied!":"Copy link"]})]}),jsxRuntimeExports.jsxs("div",{className:"relative py-1",children:[jsxRuntimeExports.jsx("div",{className:"absolute inset-0 flex items-center",children:jsxRuntimeExports.jsx("div",{className:"w-full border-t border-dark-600"})}),jsxRuntimeExports.jsx("div",{className:"relative flex justify-center",children:jsxRuntimeExports.jsx("span",{className:"px-2 bg-dark-800 text-gray-500 text-xs",children:"or"})})]}),jsxRuntimeExports.jsxs("button",{onClick:re,className:"w-full py-2.5 px-4 bg-dark-700 hover:bg-dark-600 text-gray-300 rounded-lg flex items-center justify-center gap-2 border border-dark-500 text-sm",children:[jsxRuntimeExports.jsx(Gift,{className:"w-4 h-4 text-accent-secondary"}),"I'm Tyler's Friend"]})]})]})}),Ee&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80",children:jsxRuntimeExports.jsxs("div",{className:"relative w-full max-w-xs bg-dark-800 rounded-2xl overflow-hidden",children:[jsxRuntimeExports.jsx("button",{onClick:()=>ue(!1),className:"absolute top-2 right-2 z-10 p-1 bg-black/50 rounded-full",children:jsxRuntimeExports.jsx(X,{className:"w-4 h-4 text-white"})}),jsxRuntimeExports.jsxs("div",{className:"aspect-[9/16] bg-gradient-to-br from-dark-900 via-accent-primary/10 to-accent-secondary/10 p-5 flex flex-col justify-between relative",children:[jsxRuntimeExports.jsxs("div",{className:"absolute inset-0 opacity-5",children:[jsxRuntimeExports.jsx("div",{className:"absolute top-10 left-5 w-24 h-24 bg-accent-primary rounded-full blur-3xl"}),jsxRuntimeExports.jsx("div",{className:"absolute bottom-20 right-5 w-32 h-32 bg-accent-secondary rounded-full blur-3xl"})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10",children:[jsxRuntimeExports.jsx("div",{className:"text-accent-primary font-bold text-base",children:"MOTUS"}),jsxRuntimeExports.jsx("p",{className:"text-gray-500 text-[10px]",children:"AI-Powered Fitness"})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 text-center",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Starting my"}),jsxRuntimeExports.jsx("h3",{className:"text-white text-xl font-bold mb-1",children:ne.duration}),jsxRuntimeExports.jsx("div",{className:"text-accent-primary text-2xl font-black mb-3",children:ne.name}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-xs px-4",children:ne.description})]}),jsxRuntimeExports.jsxs("div",{className:"relative z-10 text-center",children:[jsxRuntimeExports.jsx("div",{className:"inline-block bg-white/10 px-3 py-1.5 rounded-full mb-2",children:jsxRuntimeExports.jsx("span",{className:"text-white text-xs",children:"Join me "})}),jsxRuntimeExports.jsx("div",{className:"text-accent-primary font-bold text-sm",children:"motus.fit"})]})]}),jsxRuntimeExports.jsxs("div",{className:"p-3 space-y-2",children:[jsxRuntimeExports.jsx("p",{className:"text-gray-400 text-[10px] text-center",children:"Screenshot and share to your Story!"}),jsxRuntimeExports.jsxs("button",{onClick:()=>{alert(`Screenshot this and share to Instagram Story!
Your free month will be unlocked.`),ue(!1)},className:"w-full py-2.5 bg-gradient-to-r from-purple-600 via-pink-500 to-orange-400 text-white font-semibold rounded-lg text-sm flex items-center justify-center gap-2",children:[jsxRuntimeExports.jsx(Instagram,{className:"w-4 h-4"}),"I've Posted to My Story"]}),jsxRuntimeExports.jsx("button",{onClick:()=>ue(!1),className:"w-full py-1.5 text-gray-400 text-xs",children:"Cancel"})]})]})}),jsxRuntimeExports.jsx(SubscriptionModal,{isOpen:w,onClose:()=>M(!1),onSuccess:me})]})}function PrivacyPolicy({onBack:d}){const h=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 text-gray-300",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-10 bg-dark-900/95 backdrop-blur-sm border-b border-dark-700",children:jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-4 flex items-center gap-4",children:[d&&jsxRuntimeExports.jsx("button",{onClick:d,className:"p-2 -ml-2 text-gray-400 hover:text-white",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:"Privacy Policy"})]})}),jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 space-y-8",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["Effective Date: ",h]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"1. Introduction"}),jsxRuntimeExports.jsx("p",{children:"Welcome to MOTUS. We are committed to protecting your privacy and ensuring you understand how we collect, use, and safeguard your personal information. This Privacy Policy applies to the MOTUS mobile application and related services."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"2. Information We Collect"}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"2.1 Information You Provide Directly"}),jsxRuntimeExports.jsx("p",{children:"When you create an account or use MOTUS, you may provide:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Account information (name, email address, phone number, profile photo)"}),jsxRuntimeExports.jsx("li",{children:"Physical characteristics (age, height, weight, gender)"}),jsxRuntimeExports.jsx("li",{children:"Fitness goals and preferences"}),jsxRuntimeExports.jsx("li",{children:"Dietary preferences and restrictions"}),jsxRuntimeExports.jsx("li",{children:"Workout logs and exercise history"}),jsxRuntimeExports.jsx("li",{children:"Meal logs and nutrition data"})]}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"2.2 Information from Third-Party Services"}),jsxRuntimeExports.jsx("p",{children:"With your explicit consent, we may collect data from connected services:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Strava:"})," Workout activities, exercise data, distance, duration, pace, heart rate"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Garmin:"})," Activity data, sleep data, heart rate, stress levels, body composition"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Apple Health:"})," Workouts, steps, heart rate, sleep, nutrition data"]}),jsxRuntimeExports.jsxs("li",{children:[jsxRuntimeExports.jsx("strong",{children:"Google Fit:"})," Activity data, heart rate, nutrition"]})]}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"2.3 Automatically Collected Information"}),jsxRuntimeExports.jsx("p",{children:"We automatically collect:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Device information (device type, operating system, unique identifiers)"}),jsxRuntimeExports.jsx("li",{children:"App usage data (features used, time spent, interaction patterns)"}),jsxRuntimeExports.jsx("li",{children:"Log data (access times, errors, performance data)"})]})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"3. How We Use Your Information"}),jsxRuntimeExports.jsx("p",{children:"We use your information to:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Provide personalized workout programs and meal plans"}),jsxRuntimeExports.jsx("li",{children:"Track your fitness progress and nutrition goals"}),jsxRuntimeExports.jsx("li",{children:"Calculate caloric needs and macro recommendations"}),jsxRuntimeExports.jsx("li",{children:"Sync data across your connected fitness devices"}),jsxRuntimeExports.jsx("li",{children:"Improve our services and develop new features"}),jsxRuntimeExports.jsx("li",{children:"Send important updates about your account or our services"}),jsxRuntimeExports.jsx("li",{children:"Comply with legal obligations"})]})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"4. How We Share Your Information"}),jsxRuntimeExports.jsx("p",{className:"font-medium text-accent-primary",children:"We do NOT sell your personal information."}),jsxRuntimeExports.jsx("p",{children:"We may share data with:"}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"4.1 Third-Party Service Providers"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Authentication providers for secure sign-in"}),jsxRuntimeExports.jsx("li",{children:"Cloud storage providers for data storage"}),jsxRuntimeExports.jsx("li",{children:"Payment processors for subscription management"}),jsxRuntimeExports.jsx("li",{children:"Analytics services to improve app performance"})]}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"4.2 Connected Fitness Platforms"}),jsxRuntimeExports.jsx("p",{children:"When you connect Strava, Garmin, or other platforms, data flows bidirectionally as authorized by you. Each platform has its own privacy policy governing their use of your data."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"5. Data Security"}),jsxRuntimeExports.jsx("p",{children:"We implement industry-standard security measures:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Encryption of data in transit (TLS/SSL) and at rest"}),jsxRuntimeExports.jsx("li",{children:"Secure authentication protocols"}),jsxRuntimeExports.jsx("li",{children:"Regular security audits and updates"}),jsxRuntimeExports.jsx("li",{children:"Access controls limiting who can view your data"})]})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"6. Your Rights and Choices"}),jsxRuntimeExports.jsx("p",{children:"You have the right to:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Access your personal data"}),jsxRuntimeExports.jsx("li",{children:"Correct inaccurate information"}),jsxRuntimeExports.jsx("li",{children:"Delete your account and associated data"}),jsxRuntimeExports.jsx("li",{children:"Disconnect third-party services at any time"}),jsxRuntimeExports.jsx("li",{children:"Export your data in a portable format"}),jsxRuntimeExports.jsx("li",{children:"Opt out of marketing communications"})]})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"7. Data Retention"}),jsxRuntimeExports.jsx("p",{children:"We retain your data for as long as your account is active or as needed to provide services. Upon account deletion, we will delete or anonymize your data within 30 days, except where retention is required by law."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"8. Children's Privacy"}),jsxRuntimeExports.jsx("p",{children:"MOTUS is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If we learn we have collected such information, we will delete it promptly."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"9. International Data Transfers"}),jsxRuntimeExports.jsx("p",{children:"Your data may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your information in compliance with applicable data protection laws."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"10. Changes to This Policy"}),jsxRuntimeExports.jsx("p",{children:"We may update this Privacy Policy periodically. We will notify you of material changes through the app or via email. Your continued use of MOTUS after changes constitutes acceptance of the updated policy."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"11. Contact Us"}),jsxRuntimeExports.jsx("p",{children:"If you have questions about this Privacy Policy or our data practices, please contact us at:"}),jsxRuntimeExports.jsx("p",{className:"text-accent-primary",children:"privacy@motusfit.app"})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"12. California Privacy Rights (CCPA)"}),jsxRuntimeExports.jsx("p",{children:"California residents have additional rights under the CCPA, including the right to know what personal information is collected, the right to deletion, and the right to opt-out of the sale of personal information. As stated above, we do not sell personal information."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4 pb-12",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"13. European Privacy Rights (GDPR)"}),jsxRuntimeExports.jsx("p",{children:"If you are in the European Economic Area, you have rights under GDPR including access, rectification, erasure, restriction, portability, and objection. You may also lodge a complaint with your local data protection authority."})]})]})]})}function TermsConditions({onBack:d}){const h=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900 text-gray-300",children:[jsxRuntimeExports.jsx("div",{className:"sticky top-0 z-10 bg-dark-900/95 backdrop-blur-sm border-b border-dark-700",children:jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-4 flex items-center gap-4",children:[d&&jsxRuntimeExports.jsx("button",{onClick:d,className:"p-2 -ml-2 text-gray-400 hover:text-white",children:jsxRuntimeExports.jsx(ArrowLeft,{className:"w-5 h-5"})}),jsxRuntimeExports.jsx("h1",{className:"text-xl font-bold text-white",children:"Terms & Conditions"})]})}),jsxRuntimeExports.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-8 space-y-8",children:[jsxRuntimeExports.jsxs("p",{className:"text-sm text-gray-500",children:["Effective Date: ",h]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"1. Agreement to Terms"}),jsxRuntimeExports.jsx("p",{children:'By accessing or using MOTUS ("the App"), you agree to be bound by these Terms and Conditions ("Terms"). If you do not agree to these Terms, please do not use the App. These Terms constitute a legally binding agreement between you and MOTUS.'})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"2. Description of Service"}),jsxRuntimeExports.jsx("p",{children:"MOTUS is a fitness and nutrition application that provides personalized workout programs, meal planning, macro tracking, and integration with third-party fitness platforms. The App is designed to help users achieve their fitness and health goals."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"3. User Accounts"}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"3.1 Account Creation"}),jsxRuntimeExports.jsx("p",{children:"To use certain features of the App, you must create an account. You agree to provide accurate, current, and complete information during registration and to update such information to keep it accurate."}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"3.2 Account Security"}),jsxRuntimeExports.jsx("p",{children:"You are responsible for safeguarding your account credentials and for all activities that occur under your account. You agree to notify us immediately of any unauthorized use of your account."}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"3.3 Account Termination"}),jsxRuntimeExports.jsx("p",{children:"We reserve the right to suspend or terminate your account at any time for violation of these Terms or for any other reason at our sole discretion."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"4. Subscription and Payments"}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"4.1 Subscription Plans"}),jsxRuntimeExports.jsx("p",{children:"MOTUS offers subscription-based access to premium features. Subscription fees and billing cycles are displayed in the App before purchase."}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"4.2 Automatic Renewal"}),jsxRuntimeExports.jsx("p",{children:"Subscriptions automatically renew unless cancelled at least 24 hours before the end of the current billing period. You can manage or cancel your subscription through your account settings."}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"4.3 Refunds"}),jsxRuntimeExports.jsx("p",{children:"Refund requests are handled on a case-by-case basis. Please contact our support team for assistance with refund requests."}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"4.4 Price Changes"}),jsxRuntimeExports.jsx("p",{children:"We reserve the right to change subscription prices. Any price changes will be communicated to you in advance and will take effect at the start of your next billing cycle."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"5. Acceptable Use"}),jsxRuntimeExports.jsx("p",{children:"You agree not to:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Use the App for any unlawful purpose"}),jsxRuntimeExports.jsx("li",{children:"Share your account credentials with others"}),jsxRuntimeExports.jsx("li",{children:"Attempt to reverse engineer or decompile the App"}),jsxRuntimeExports.jsx("li",{children:"Interfere with or disrupt the App's functionality"}),jsxRuntimeExports.jsx("li",{children:"Use automated systems to access the App without permission"}),jsxRuntimeExports.jsx("li",{children:"Upload malicious code or content"}),jsxRuntimeExports.jsx("li",{children:"Impersonate another person or entity"}),jsxRuntimeExports.jsx("li",{children:"Violate any applicable laws or regulations"})]})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"6. Health and Fitness Disclaimer"}),jsxRuntimeExports.jsxs("div",{className:"p-4 bg-accent-warning/10 border border-accent-warning/30 rounded-lg",children:[jsxRuntimeExports.jsx("p",{className:"text-accent-warning font-medium mb-2",children:"Important Health Notice"}),jsxRuntimeExports.jsx("p",{children:"MOTUS is not a medical service and does not provide medical advice. The workout programs, nutrition recommendations, and other content provided through the App are for informational purposes only and should not be considered medical advice."})]}),jsxRuntimeExports.jsx("p",{className:"mt-4",children:"Before starting any exercise program or making significant changes to your diet, you should consult with a qualified healthcare professional, especially if you have any pre-existing health conditions, injuries, or concerns."}),jsxRuntimeExports.jsx("p",{children:"You acknowledge that physical exercise involves inherent risks, including the risk of injury or death. You assume full responsibility for any risks, injuries, or damages that may result from your use of the App."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"7. Third-Party Integrations"}),jsxRuntimeExports.jsx("p",{children:"The App may integrate with third-party services such as Strava, Garmin, Apple Health, and Google Fit. Your use of these integrations is subject to the terms and privacy policies of those third parties. We are not responsible for the practices of third-party services."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"8. Intellectual Property"}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"8.1 Our Content"}),jsxRuntimeExports.jsx("p",{children:"The App and its original content, features, and functionality are owned by MOTUS and are protected by international copyright, trademark, and other intellectual property laws."}),jsxRuntimeExports.jsx("h3",{className:"text-md font-medium text-gray-200",children:"8.2 Your Content"}),jsxRuntimeExports.jsx("p",{children:"You retain ownership of any content you submit to the App (such as workout logs and progress photos). By submitting content, you grant us a non-exclusive, worldwide, royalty-free license to use, store, and display such content for the purpose of providing our services."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"9. Limitation of Liability"}),jsxRuntimeExports.jsx("p",{children:"To the maximum extent permitted by law, MOTUS and its affiliates, officers, directors, employees, and agents shall not be liable for any indirect, incidental, special, consequential, or punitive damages, including loss of profits, data, or other intangible losses, resulting from:"}),jsxRuntimeExports.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[jsxRuntimeExports.jsx("li",{children:"Your use or inability to use the App"}),jsxRuntimeExports.jsx("li",{children:"Any injuries or health issues arising from workouts or nutrition plans"}),jsxRuntimeExports.jsx("li",{children:"Unauthorized access to your data"}),jsxRuntimeExports.jsx("li",{children:"Any third-party conduct on the App"}),jsxRuntimeExports.jsx("li",{children:"Any errors or omissions in the App's content"})]})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"10. Indemnification"}),jsxRuntimeExports.jsx("p",{children:"You agree to defend, indemnify, and hold harmless MOTUS and its affiliates from any claims, damages, losses, or expenses (including reasonable attorney fees) arising from your use of the App, your violation of these Terms, or your violation of any rights of another."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"11. Disclaimers"}),jsxRuntimeExports.jsx("p",{children:'THE APP IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT WARRANTIES OF ANY KIND, EITHER EXPRESS OR IMPLIED. WE DO NOT WARRANT THAT THE APP WILL BE UNINTERRUPTED, ERROR-FREE, OR FREE OF HARMFUL COMPONENTS.'})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"12. Governing Law"}),jsxRuntimeExports.jsx("p",{children:"These Terms shall be governed by and construed in accordance with the laws of the United States, without regard to conflict of law principles. Any disputes arising under these Terms shall be resolved in the state or federal courts located within the United States."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"13. Changes to Terms"}),jsxRuntimeExports.jsx("p",{children:"We reserve the right to modify these Terms at any time. We will notify you of any material changes by posting the updated Terms in the App or by other means. Your continued use of the App after changes constitutes acceptance of the modified Terms."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"14. Severability"}),jsxRuntimeExports.jsx("p",{children:"If any provision of these Terms is found to be unenforceable, the remaining provisions will continue in full force and effect."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"15. Entire Agreement"}),jsxRuntimeExports.jsx("p",{children:"These Terms, together with our Privacy Policy, constitute the entire agreement between you and MOTUS regarding your use of the App and supersede any prior agreements."})]}),jsxRuntimeExports.jsxs("section",{className:"space-y-4 pb-12",children:[jsxRuntimeExports.jsx("h2",{className:"text-lg font-semibold text-white",children:"16. Contact Us"}),jsxRuntimeExports.jsx("p",{children:"If you have questions about these Terms, please contact us at:"}),jsxRuntimeExports.jsx("p",{className:"text-accent-primary",children:"legal@motusfit.app"})]})]})]})}function useLocalStorage(d,h){const[m,E]=reactExports.useState(()=>{try{const g=window.localStorage.getItem(d);return g?JSON.parse(g):h}catch{return h}});return[m,g=>{try{const N=g instanceof Function?g(m):g;E(N),window.localStorage.setItem(d,JSON.stringify(N))}catch(N){console.error(N)}}]}const generateMockMealPlan=(d,h)=>{const m=h?.macros?.calories||2e3,E=h?.macros?.protein||150,j=d.mealsPerDay||3,g=d.snacksPerDay||1,N=E*4,k=m-N,A=Math.round(k*.55/4),w=Math.round(k*.45/9),_=j===2?{breakfast:.4,dinner:.5,snack:.1/g}:{breakfast:.25,lunch:.3,dinner:.35,snack:g>0?.1/g:0},J={breakfast:[{id:"b1",title:"Greek Yogurt Parfait",baseIngredients:["Greek yogurt","granola","mixed berries","honey"],readyInMinutes:5},{id:"b2",title:"Avocado Toast with Eggs",baseIngredients:["whole grain bread","avocado","eggs","olive oil"],readyInMinutes:15},{id:"b3",title:"Protein Oatmeal Bowl",baseIngredients:["oats","protein powder","almond milk","banana","almond butter"],readyInMinutes:10},{id:"b4",title:"Veggie Egg Scramble",baseIngredients:["eggs","spinach","bell peppers","cheese","olive oil"],readyInMinutes:12},{id:"b5",title:"Smoothie Bowl",baseIngredients:["protein powder","frozen berries","banana","almond milk","chia seeds"],readyInMinutes:8},{id:"b6",title:"Overnight Oats",baseIngredients:["oats","Greek yogurt","milk","maple syrup","walnuts"],readyInMinutes:5},{id:"b7",title:"Breakfast Burrito",baseIngredients:["eggs","black beans","cheese","whole wheat tortilla","salsa"],readyInMinutes:15}],lunch:[{id:"l1",title:"Grilled Chicken Salad",baseIngredients:["chicken breast","mixed greens","cherry tomatoes","feta cheese","olive oil"],readyInMinutes:20},{id:"l2",title:"Quinoa Buddha Bowl",baseIngredients:["quinoa","chickpeas","roasted vegetables","tahini","avocado"],readyInMinutes:25},{id:"l3",title:"Turkey & Avocado Wrap",baseIngredients:["turkey breast","avocado","whole wheat wrap","lettuce","tomato"],readyInMinutes:10},{id:"l4",title:"Salmon Poke Bowl",baseIngredients:["salmon","sushi rice","edamame","cucumber","sesame oil"],readyInMinutes:15},{id:"l5",title:"Mediterranean Plate",baseIngredients:["chicken","hummus","pita bread","cucumber","olives"],readyInMinutes:15},{id:"l6",title:"Asian Chicken Stir Fry",baseIngredients:["chicken breast","brown rice","broccoli","soy sauce","sesame oil"],readyInMinutes:20},{id:"l7",title:"Black Bean Tacos",baseIngredients:["black beans","corn tortillas","avocado","cheese","salsa"],readyInMinutes:15}],dinner:[{id:"d1",title:"Herb Crusted Salmon",baseIngredients:["salmon fillet","quinoa","asparagus","olive oil","lemon"],readyInMinutes:30},{id:"d2",title:"Lean Beef Stir Fry",baseIngredients:["lean beef","brown rice","mixed vegetables","soy sauce","ginger"],readyInMinutes:25},{id:"d3",title:"Grilled Chicken & Veggies",baseIngredients:["chicken breast","sweet potato","broccoli","olive oil","garlic"],readyInMinutes:35},{id:"d4",title:"Shrimp Pasta Primavera",baseIngredients:["shrimp","whole wheat pasta","zucchini","tomatoes","parmesan"],readyInMinutes:30},{id:"d5",title:"Turkey Meatballs & Zoodles",baseIngredients:["ground turkey","zucchini","marinara sauce","parmesan","olive oil"],readyInMinutes:35},{id:"d6",title:"Baked Cod with Quinoa",baseIngredients:["cod fillet","quinoa","spinach","cherry tomatoes","olive oil"],readyInMinutes:30},{id:"d7",title:"Chicken Tikka Masala",baseIngredients:["chicken breast","basmati rice","tikka sauce","Greek yogurt","naan"],readyInMinutes:40}],snack:[{id:"s1",title:"Protein Shake",baseIngredients:["protein powder","almond milk","banana"],readyInMinutes:2},{id:"s2",title:"Apple & Almond Butter",baseIngredients:["apple","almond butter"],readyInMinutes:2},{id:"s3",title:"Greek Yogurt & Berries",baseIngredients:["Greek yogurt","mixed berries","honey"],readyInMinutes:2},{id:"s4",title:"Trail Mix",baseIngredients:["mixed nuts","dried fruit","dark chocolate chips"],readyInMinutes:1},{id:"s5",title:"Cottage Cheese & Fruit",baseIngredients:["cottage cheese","pineapple","walnuts"],readyInMinutes:2},{id:"s6",title:"Hummus & Veggies",baseIngredients:["hummus","carrots","celery","bell peppers"],readyInMinutes:3},{id:"s7",title:"Protein Bar",baseIngredients:["protein bar"],readyInMinutes:1}]},W=(te,K,me,re,F)=>({id:te.id,title:te.title,calories:K,protein:me,carbs:re,fat:F,readyInMinutes:te.readyInMinutes,image:null}),ie=(te,K,me,re)=>{const F=Math.round(K/7*10)/10,U=Math.round(me/40*10)/10,Q=Math.round(re/14*10)/10;return te.baseIngredients.map((xe,Ce)=>Ce===0&&["chicken","salmon","beef","turkey","shrimp","cod","eggs"].some(B=>xe.includes(B))?{original:`${F}oz ${xe}`,name:xe,amount:F,unit:"oz"}:Ce===1&&["rice","quinoa","pasta","oats","bread","tortilla"].some(B=>xe.includes(B))?{original:`${U} cup ${xe}`,name:xe,amount:U,unit:"cup"}:["olive oil","avocado","almond butter","cheese"].some(B=>xe.includes(B))?{original:`${Q} tbsp ${xe}`,name:xe,amount:Q,unit:"tbsp"}:{original:`1 cup ${xe}`,name:xe,amount:1,unit:"cup"})},q=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],L=["mon","tue","wed","thu","fri","sat","sun"],Ee={week:{}},ue={};return q.forEach((te,K)=>{const me=L[K],re=[];let F=0;const U=j===2?["breakfast","dinner"]:j===3?["breakfast","lunch","dinner"]:["breakfast","lunch","dinner"];let Q=0,xe=0,Ce=0,B=0;U.forEach(Z=>{const ge=d.excludedMeals?.[`${me}-${F}`];if(F++,ge)return;const I=_[Z],ne=Math.round(m*I),le=Math.round(E*I),de=Math.round(A*I),ye=Math.round(w*I);Q+=ne,xe+=le,Ce+=de,B+=ye;const z=J[Z][K%J[Z].length],D=W(z,ne,le,de,ye);D.type=Z,re.push(D),ue[z.id]={...D,ingredients:ie(z,le,de,ye),instructions:["Prep all ingredients to specified portions","Cook protein to desired doneness","Combine all components","Season to taste and serve"]}});for(let Z=0;Z<g;Z++){const ge=d.excludedMeals?.[`${me}-${F}`];if(F++,ge)continue;const I=_.snack,ne=Math.round(m*I),le=Math.round(E*I),de=Math.round(A*I),ye=Math.round(w*I);Q+=ne,xe+=le,Ce+=de,B+=ye;const z=J.snack[(K+Z)%J.snack.length],D=W(z,ne,le,de,ye);D.type="snack",re.push(D),ue[z.id]={...D,ingredients:ie(z,le,de,ye),instructions:["Quick, nutritious snack - enjoy!"]}}Ee.week[te]={meals:re,nutrients:{calories:Q,protein:xe,carbohydrates:Ce,fat:B}}}),{mealPlan:Ee,recipes:ue}};function AppContent(){const{user:d,loading:h,isAuthenticated:m}=useAuth(),{isSubscribed:E,loading:j,initializeSubscription:g,activatePaidSubscription:N}=useSubscription(),[k,A]=useLocalStorage("motus_profile",null),[w,M]=useLocalStorage("motus_program",null),[_,J]=useLocalStorage("motus_meals",[]),[W,ie]=useLocalStorage("motus_workouts",[]),[q,L]=useLocalStorage("motus_completed",[]),[Ee,ue]=useLocalStorage("motus_meal_plan",null),[te,K]=useLocalStorage("motus_recipes",{}),[me,re]=reactExports.useState("dashboard"),[F,U]=reactExports.useState(!1),[Q,xe]=reactExports.useState(!1),[Ce,B]=reactExports.useState(!1),[Z,ge]=reactExports.useState(!0),[I,ne]=reactExports.useState(!0),[le,de]=reactExports.useState(!1),[ye,z]=reactExports.useState(!1),[D,G]=reactExports.useState(!1),[Ie,ee]=reactExports.useState(!1),[Re,je]=reactExports.useState(!1),[Ve,Be]=reactExports.useState(!1);reactExports.useEffect(()=>{h||(async()=>{ne(!0),m&&await syncLocalToCloud();const[at,mt,jt,qt]=await Promise.all([loadProfile(),loadProgram(),loadMeals(),loadWorkouts()]);at.data&&A(at.data),mt.data&&M(mt.data),jt.data&&J(jt.data),qt.data&&ie(qt.data),at.data&&mt.data?(B(!0),ge(!1)):localStorage.getItem("motus_has_visited")&&ge(!1),ne(!1)})()},[m,h]),reactExports.useEffect(()=>{const at=new URLSearchParams(window.location.search).get("ref");at&&(localStorage.setItem("motus_referral_code",at),window.history.replaceState({},"",window.location.pathname))},[]),reactExports.useEffect(()=>{if(!I&&!j&&Ce&&!E){const Oe=setTimeout(()=>{de(!0)},1e3);return()=>clearTimeout(Oe)}},[I,j,Ce,E]);const Fe=async Oe=>{A(Oe),await saveProfile(Oe)},Ke=async Oe=>{M(Oe),await saveProgram(Oe)},ct=async Oe=>{J(Oe),await saveMeals(Oe)},Ss=async Oe=>{ie(Oe),await saveWorkouts(Oe)},rt=async Oe=>{await Fe(Oe.profile),await Ke(Oe.program),await g(),E||de(!0),B(!0)},ks=async Oe=>{Oe&&await N(Oe),de(!1)},as=async Oe=>{const at=[..._,{...Oe,id:Date.now()}];await ct(at),U(!1)},xs=async Oe=>{const at=_.filter(mt=>mt.id!==Oe);await ct(at)},_t=async Oe=>{const at=[...W,{...Oe,id:Date.now()}];await Ss(at),xe(!1)},gt=(Oe,at,mt)=>{const jt=q.find(qt=>qt.day===Oe&&qt.sessionIndex===at);if(jt)if(jt.completedExercises.includes(mt)){const qt=q.map(ut=>ut.day===Oe&&ut.sessionIndex===at?{...ut,completedExercises:ut.completedExercises.filter(Gt=>Gt!==mt)}:ut);L(qt)}else{const qt=q.map(ut=>ut.day===Oe&&ut.sessionIndex===at?{...ut,completedExercises:[...ut.completedExercises,mt]}:ut);L(qt)}else L([...q,{day:Oe,sessionIndex:at,completedExercises:[mt]}])},nt=(Oe,at)=>{const mt=w?.weeklySchedule?.find(ut=>ut.day===Oe)?.sessions?.[at];if(!mt?.exercises)return;const jt=mt.exercises.map((ut,Gt)=>Gt);if(q.find(ut=>ut.day===Oe&&ut.sessionIndex===at)){const ut=q.map(Gt=>Gt.day===Oe&&Gt.sessionIndex===at?{...Gt,completedExercises:jt}:Gt);L(ut)}else L([...q,{day:Oe,sessionIndex:at,completedExercises:jt,exerciseLogs:{}}])},Ks=(Oe,at,mt,jt)=>{if(q.find(ut=>ut.day===Oe&&ut.sessionIndex===at)){const ut=q.map(Gt=>Gt.day===Oe&&Gt.sessionIndex===at?{...Gt,exerciseLogs:{...Gt.exerciseLogs,[mt]:jt},completedExercises:Gt.completedExercises.includes(mt)?Gt.completedExercises:[...Gt.completedExercises,mt]}:Gt);L(ut)}else L([...q,{day:Oe,sessionIndex:at,completedExercises:[mt],exerciseLogs:{[mt]:jt}}])},Pe=async()=>{window.confirm("Are you sure you want to reset? All your data will be lost.")&&(await Fe(null),await Ke(null),await ct([]),await Ss([]),L([]),B(!1),re("dashboard"))};if(h||I||j)return jsxRuntimeExports.jsx("div",{className:"min-h-screen bg-dark-900 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"w-12 h-12 border-4 border-accent-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400",children:"Loading your data..."})]})});const cr=new Date().toISOString().split("T")[0],hn=_.filter(Oe=>(Oe.loggedAt||Oe.createdAt)?.startsWith(cr)),_s=W.filter(Oe=>(Oe.loggedAt||Oe.completedAt)?.startsWith(cr)),Wr=()=>{localStorage.setItem("motus_has_visited","true"),ge(!1)};return Ie?jsxRuntimeExports.jsx(PrivacyPolicy,{onBack:()=>ee(!1)}):Re?jsxRuntimeExports.jsx(TermsConditions,{onBack:()=>je(!1)}):Z&&!Ce?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(LandingPage,{onGetStarted:()=>Be(!0),onShowPrivacy:()=>ee(!0),onShowTerms:()=>je(!0)}),jsxRuntimeExports.jsx(SignUpModal,{isOpen:Ve,onClose:()=>Be(!1),onSuccess:Wr,onShowPrivacy:()=>{Be(!1),ee(!0)},onShowTerms:()=>{Be(!1),je(!0)}})]}):Ce?jsxRuntimeExports.jsxs("div",{className:"min-h-screen bg-dark-900",children:[jsxRuntimeExports.jsx(PaywallOverlay,{isVisible:le&&!E,onClose:()=>de(!1),onSuccess:ks,program:w}),jsxRuntimeExports.jsxs("div",{className:!E&&Ce?"relative":"",children:[!E&&Ce&&me!=="dashboard"&&jsxRuntimeExports.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-md z-40 flex items-center justify-center",children:jsxRuntimeExports.jsxs("div",{className:"text-center p-6",children:[jsxRuntimeExports.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-accent-primary/20 flex items-center justify-center",children:jsxRuntimeExports.jsx("svg",{className:"w-8 h-8 text-accent-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:jsxRuntimeExports.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),jsxRuntimeExports.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Premium Feature"}),jsxRuntimeExports.jsx("p",{className:"text-gray-400 mb-4",children:"Subscribe to unlock this tab"}),jsxRuntimeExports.jsx("button",{onClick:()=>de(!0),className:"px-6 py-2 bg-accent-primary text-dark-900 font-medium rounded-lg hover:bg-accent-primary/90",children:"Unlock Now"})]})}),me==="dashboard"&&jsxRuntimeExports.jsx(Dashboard,{profile:k,program:w,meals:_,workouts:W,todaysMeals:hn,todaysWorkouts:_s,isSubscribed:E,onLogMeal:()=>E?U(!0):de(!0),onLogWorkout:()=>E?xe(!0):de(!0),onViewProgram:()=>E?re("program"):de(!0),onViewNutrition:()=>E?re("nutrition"):de(!0),onShowPaywall:()=>de(!0),onCreateMealPlan:()=>z(!0)}),me==="program"&&E&&jsxRuntimeExports.jsx(ProgramView,{program:w,completedWorkouts:q,onCompleteExercise:gt,onCompleteSession:nt,onUpdateExerciseLog:Ks,onBack:()=>re("dashboard")}),me==="nutrition"&&E&&jsxRuntimeExports.jsx(NutritionView,{profile:k,meals:_,workouts:W,mealPlan:Ee,recipes:te,isGeneratingMealPlan:D,onLogMeal:()=>U(!0),onDeleteMeal:xs,onCreateMealPlan:()=>z(!0),onBack:()=>re("dashboard")}),me==="stats"&&E&&jsxRuntimeExports.jsx(StatsView,{profile:k,program:w,meals:_,workouts:W}),me==="profile"&&jsxRuntimeExports.jsx(ProfileView,{profile:k,program:w,isSubscribed:E,onResetSetup:Pe,onShowPaywall:()=>de(!0)})]}),jsxRuntimeExports.jsx(TabBar,{activeTab:me,onChange:Oe=>{!E&&Oe!=="dashboard"&&Oe!=="profile"?de(!0):re(Oe)},isSubscribed:E}),jsxRuntimeExports.jsx(LogMealModal,{isOpen:F,onClose:()=>U(!1),onSave:as,mealPlan:Ee}),jsxRuntimeExports.jsx(LogWorkoutModal,{isOpen:Q,onClose:()=>xe(!1),onSave:_t,program:w}),jsxRuntimeExports.jsx(NutritionPreferences,{isOpen:ye,onClose:()=>z(!1),onSave:async Oe=>{console.log("Nutrition preferences saved:",Oe),z(!1),G(!0);try{const at=generateMockMealPlan(Oe,k);ue(at.mealPlan),K(at.recipes),re("nutrition")}catch(at){console.error("Error generating meal plan:",at)}finally{G(!1)}},profile:k})]}):jsxRuntimeExports.jsx(SetupWizardWithErrorBoundary,{onComplete:rt})}function App(){return jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(SubscriptionProvider,{children:jsxRuntimeExports.jsx(AppContent,{})})})}ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
